var XI=Object.defineProperty;var WI=(n,e,t)=>e in n?XI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var kg=(n,e,t)=>WI(n,typeof e!="symbol"?e+"":e,t);function JI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function RA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vg={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function ZI(){if(Bb)return uu;Bb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return uu.Fragment=e,uu.jsx=t,uu.jsxs=t,uu}var Hb;function ex(){return Hb||(Hb=1,Vg.exports=ZI()),Vg.exports}var E=ex(),Lg={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function tx(){if(Fb)return Qe;Fb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=b&&q[b]||q["@@iterator"],typeof q=="function"?q:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,D={};function j(q,ie,se){this.props=q,this.context=ie,this.refs=D,this.updater=se||M}j.prototype.isReactComponent={},j.prototype.setState=function(q,ie){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ie,"setState")},j.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function P(){}P.prototype=j.prototype;function U(q,ie,se){this.props=q,this.context=ie,this.refs=D,this.updater=se||M}var F=U.prototype=new P;F.constructor=U,H(F,j.prototype),F.isPureReactComponent=!0;var X=Array.isArray;function Y(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function I(q,ie,se){var he=se.ref;return{$$typeof:n,type:q,key:ie,ref:he!==void 0?he:null,props:se}}function V(q,ie){return I(q.type,ie,q.props)}function k(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function L(q){var ie={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(se){return ie[se]})}var x=/\/+/g;function me(q,ie){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):ie.toString(36)}function ge(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(Y,Y):(q.status="pending",q.then(function(ie){q.status==="pending"&&(q.status="fulfilled",q.value=ie)},function(ie){q.status==="pending"&&(q.status="rejected",q.reason=ie)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function G(q,ie,se,he,ye){var Ae=typeof q;(Ae==="undefined"||Ae==="boolean")&&(q=null);var ke=!1;if(q===null)ke=!0;else switch(Ae){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(q.$$typeof){case n:case e:ke=!0;break;case y:return ke=q._init,G(ke(q._payload),ie,se,he,ye)}}if(ke)return ye=ye(q),ke=he===""?"."+me(q,0):he,X(ye)?(se="",ke!=null&&(se=ke.replace(x,"$&/")+"/"),G(ye,ie,se,"",function(At){return At})):ye!=null&&(k(ye)&&(ye=V(ye,se+(ye.key==null||q&&q.key===ye.key?"":(""+ye.key).replace(x,"$&/")+"/")+ke)),ie.push(ye)),1;ke=0;var Fe=he===""?".":he+":";if(X(q))for(var ze=0;ze<q.length;ze++)he=q[ze],Ae=Fe+me(he,ze),ke+=G(he,ie,se,Ae,ye);else if(ze=w(q),typeof ze=="function")for(q=ze.call(q),ze=0;!(he=q.next()).done;)he=he.value,Ae=Fe+me(he,ze++),ke+=G(he,ie,se,Ae,ye);else if(Ae==="object"){if(typeof q.then=="function")return G(ge(q),ie,se,he,ye);throw ie=String(q),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ke}function oe(q,ie,se){if(q==null)return q;var he=[],ye=0;return G(q,he,"","",function(Ae){return ie.call(se,Ae,ye++)}),he}function de(q){if(q._status===-1){var ie=q._result;ie=ie(),ie.then(function(se){(q._status===0||q._status===-1)&&(q._status=1,q._result=se)},function(se){(q._status===0||q._status===-1)&&(q._status=2,q._result=se)}),q._status===-1&&(q._status=0,q._result=ie)}if(q._status===1)return q._result.default;throw q._result}var Pe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Ne={map:oe,forEach:function(q,ie,se){oe(q,function(){ie.apply(this,arguments)},se)},count:function(q){var ie=0;return oe(q,function(){ie++}),ie},toArray:function(q){return oe(q,function(ie){return ie})||[]},only:function(q){if(!k(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Qe.Activity=v,Qe.Children=Ne,Qe.Component=j,Qe.Fragment=t,Qe.Profiler=a,Qe.PureComponent=U,Qe.StrictMode=i,Qe.Suspense=m,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return A.H.useMemoCache(q)}},Qe.cache=function(q){return function(){return q.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(q,ie,se){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var he=H({},q.props),ye=q.key;if(ie!=null)for(Ae in ie.key!==void 0&&(ye=""+ie.key),ie)!C.call(ie,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&ie.ref===void 0||(he[Ae]=ie[Ae]);var Ae=arguments.length-2;if(Ae===1)he.children=se;else if(1<Ae){for(var ke=Array(Ae),Fe=0;Fe<Ae;Fe++)ke[Fe]=arguments[Fe+2];he.children=ke}return I(q.type,ye,he)},Qe.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},Qe.createElement=function(q,ie,se){var he,ye={},Ae=null;if(ie!=null)for(he in ie.key!==void 0&&(Ae=""+ie.key),ie)C.call(ie,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ye[he]=ie[he]);var ke=arguments.length-2;if(ke===1)ye.children=se;else if(1<ke){for(var Fe=Array(ke),ze=0;ze<ke;ze++)Fe[ze]=arguments[ze+2];ye.children=Fe}if(q&&q.defaultProps)for(he in ke=q.defaultProps,ke)ye[he]===void 0&&(ye[he]=ke[he]);return I(q,Ae,ye)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(q){return{$$typeof:f,render:q}},Qe.isValidElement=k,Qe.lazy=function(q){return{$$typeof:y,_payload:{_status:-1,_result:q},_init:de}},Qe.memo=function(q,ie){return{$$typeof:p,type:q,compare:ie===void 0?null:ie}},Qe.startTransition=function(q){var ie=A.T,se={};A.T=se;try{var he=q(),ye=A.S;ye!==null&&ye(se,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(Y,Pe)}catch(Ae){Pe(Ae)}finally{ie!==null&&se.types!==null&&(ie.types=se.types),A.T=ie}},Qe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Qe.use=function(q){return A.H.use(q)},Qe.useActionState=function(q,ie,se){return A.H.useActionState(q,ie,se)},Qe.useCallback=function(q,ie){return A.H.useCallback(q,ie)},Qe.useContext=function(q){return A.H.useContext(q)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(q,ie){return A.H.useDeferredValue(q,ie)},Qe.useEffect=function(q,ie){return A.H.useEffect(q,ie)},Qe.useEffectEvent=function(q){return A.H.useEffectEvent(q)},Qe.useId=function(){return A.H.useId()},Qe.useImperativeHandle=function(q,ie,se){return A.H.useImperativeHandle(q,ie,se)},Qe.useInsertionEffect=function(q,ie){return A.H.useInsertionEffect(q,ie)},Qe.useLayoutEffect=function(q,ie){return A.H.useLayoutEffect(q,ie)},Qe.useMemo=function(q,ie){return A.H.useMemo(q,ie)},Qe.useOptimistic=function(q,ie){return A.H.useOptimistic(q,ie)},Qe.useReducer=function(q,ie,se){return A.H.useReducer(q,ie,se)},Qe.useRef=function(q){return A.H.useRef(q)},Qe.useState=function(q){return A.H.useState(q)},Qe.useSyncExternalStore=function(q,ie,se){return A.H.useSyncExternalStore(q,ie,se)},Qe.useTransition=function(){return A.H.useTransition()},Qe.version="19.2.4",Qe}var qb;function Zd(){return qb||(qb=1,Lg.exports=tx()),Lg.exports}var O=Zd();const IA=RA(O),nx=JI({__proto__:null,default:IA},[O]);var jg={exports:{}},hu={},Ug={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function rx(){return Gb||(Gb=1,(function(n){function e(G,oe){var de=G.length;G.push(oe);e:for(;0<de;){var Pe=de-1>>>1,Ne=G[Pe];if(0<a(Ne,oe))G[Pe]=oe,G[de]=Ne,de=Pe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var oe=G[0],de=G.pop();if(de!==oe){G[0]=de;e:for(var Pe=0,Ne=G.length,q=Ne>>>1;Pe<q;){var ie=2*(Pe+1)-1,se=G[ie],he=ie+1,ye=G[he];if(0>a(se,de))he<Ne&&0>a(ye,se)?(G[Pe]=ye,G[he]=de,Pe=he):(G[Pe]=se,G[ie]=de,Pe=ie);else if(he<Ne&&0>a(ye,de))G[Pe]=ye,G[he]=de,Pe=he;else break e}}return oe}function a(G,oe){var de=G.sortIndex-oe.sortIndex;return de!==0?de:G.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,v=null,b=3,w=!1,M=!1,H=!1,D=!1,j=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function F(G){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=G)i(p),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(p)}}function X(G){if(H=!1,F(G),!M)if(t(m)!==null)M=!0,Y||(Y=!0,L());else{var oe=t(p);oe!==null&&ge(X,oe.startTime-G)}}var Y=!1,A=-1,C=5,I=-1;function V(){return D?!0:!(n.unstable_now()-I<C)}function k(){if(D=!1,Y){var G=n.unstable_now();I=G;var oe=!0;try{e:{M=!1,H&&(H=!1,P(A),A=-1),w=!0;var de=b;try{t:{for(F(G),v=t(m);v!==null&&!(v.expirationTime>G&&V());){var Pe=v.callback;if(typeof Pe=="function"){v.callback=null,b=v.priorityLevel;var Ne=Pe(v.expirationTime<=G);if(G=n.unstable_now(),typeof Ne=="function"){v.callback=Ne,F(G),oe=!0;break t}v===t(m)&&i(m),F(G)}else i(m);v=t(m)}if(v!==null)oe=!0;else{var q=t(p);q!==null&&ge(X,q.startTime-G),oe=!1}}break e}finally{v=null,b=de,w=!1}oe=void 0}}finally{oe?L():Y=!1}}}var L;if(typeof U=="function")L=function(){U(k)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,me=x.port2;x.port1.onmessage=k,L=function(){me.postMessage(null)}}else L=function(){j(k,0)};function ge(G,oe){A=j(function(){G(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(G){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var de=b;b=oe;try{return G()}finally{b=de}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var de=b;b=G;try{return oe()}finally{b=de}},n.unstable_scheduleCallback=function(G,oe,de){var Pe=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Pe+de:Pe):de=Pe,G){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=de+Ne,G={id:y++,callback:oe,priorityLevel:G,startTime:de,expirationTime:Ne,sortIndex:-1},de>Pe?(G.sortIndex=de,e(p,G),t(m)===null&&G===t(p)&&(H?(P(A),A=-1):H=!0,ge(X,de-Pe))):(G.sortIndex=Ne,e(m,G),M||w||(M=!0,Y||(Y=!0,L()))),G},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(G){var oe=b;return function(){var de=b;b=oe;try{return G.apply(this,arguments)}finally{b=de}}}})(zg)),zg}var $b;function ix(){return $b||($b=1,Ug.exports=rx()),Ug.exports}var Bg={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function sx(){if(Kb)return Yn;Kb=1;var n=Zd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Yn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},Yn.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},Yn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Yn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Yn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Yn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Yn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Yn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Yn.requestFormReset=function(m){i.d.r(m)},Yn.unstable_batchedUpdates=function(m,p){return m(p)},Yn.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},Yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Yn.version="19.2.4",Yn}var Yb;function xA(){if(Yb)return Bg.exports;Yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bg.exports=sx(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function ax(){if(Qb)return hu;Qb=1;var n=ix(),e=Zd(),t=xA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return m(d),r;if(g===c)return m(d),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=g;else{for(var T=!1,R=d.child;R;){if(R===o){T=!0,o=d,c=g;break}if(R===c){T=!0,c=d,o=g;break}R=R.sibling}if(!T){for(R=g.child;R;){if(R===o){T=!0,o=g,c=d;break}if(R===c){T=!0,c=g,o=d;break}R=R.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),U=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function L(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case H:return"Fragment";case j:return"Profiler";case D:return"StrictMode";case X:return"Suspense";case Y:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case U:return r.displayName||"Context";case P:return(r._context.displayName||"Context")+".Consumer";case F:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return s=r.displayName||null,s!==null?s:me(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return me(r(s))}catch{}}return null}var ge=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Pe=[],Ne=-1;function q(r){return{current:r}}function ie(r){0>Ne||(r.current=Pe[Ne],Pe[Ne]=null,Ne--)}function se(r,s){Ne++,Pe[Ne]=r.current,r.current=s}var he=q(null),ye=q(null),Ae=q(null),ke=q(null);function Fe(r,s){switch(se(Ae,s),se(ye,r),se(he,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?ub(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=ub(s),r=hb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ie(he),se(he,r)}function ze(){ie(he),ie(ye),ie(Ae)}function At(r){r.memoizedState!==null&&se(ke,r);var s=he.current,o=hb(s,r.type);s!==o&&(se(ye,r),se(he,o))}function kt(r){ye.current===r&&(ie(he),ie(ye)),ke.current===r&&(ie(ke),au._currentValue=de)}var lt,Jt;function In(r){if(lt===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);lt=s&&s[1]||"",Jt=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+r+Jt}var tr=!1;function be(r,s){if(!r||tr)return"";tr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(re){var te=re}Reflect.construct(r,[],ue)}else{try{ue.call()}catch(re){te=re}r.call(ue.prototype)}}else{try{throw Error()}catch(re){te=re}(ue=r())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(re){if(re&&te&&typeof re.stack=="string")return[re.stack,te.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],R=g[1];if(T&&R){var B=T.split(`
`),Z=R.split(`
`);for(d=c=0;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;for(;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;if(c===B.length||d===Z.length)for(c=B.length-1,d=Z.length-1;1<=c&&0<=d&&B[c]!==Z[d];)d--;for(;1<=c&&0<=d;c--,d--)if(B[c]!==Z[d]){if(c!==1||d!==1)do if(c--,d--,0>d||B[c]!==Z[d]){var ae=`
`+B[c].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=c&&0<=d);break}}}finally{tr=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?In(o):""}function Ke(r,s){switch(r.tag){case 26:case 27:case 5:return In(r.type);case 16:return In("Lazy");case 13:return r.child!==s&&s!==null?In("Suspense Fallback"):In("Suspense");case 19:return In("SuspenseList");case 0:case 15:return be(r.type,!1);case 11:return be(r.type.render,!1);case 1:return be(r.type,!0);case 31:return In("Activity");default:return""}}function Je(r){try{var s="",o=null;do s+=Ke(r,o),o=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var De=Object.prototype.hasOwnProperty,Ge=n.unstable_scheduleCallback,Vt=n.unstable_cancelCallback,hr=n.unstable_shouldYield,mn=n.unstable_requestPaint,it=n.unstable_now,An=n.unstable_getCurrentPriorityLevel,Pn=n.unstable_ImmediatePriority,Hr=n.unstable_UserBlockingPriority,ln=n.unstable_NormalPriority,Gn=n.unstable_LowPriority,nr=n.unstable_IdlePriority,zo=n.log,Vs=n.unstable_setDisableYieldValue,Cr=null,Lt=null;function rr(r){if(typeof zo=="function"&&Vs(r),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Cr,r)}catch{}}var Kt=Math.clz32?Math.clz32:qa,Fa=Math.log,Ls=Math.LN2;function qa(r){return r>>>=0,r===0?32:31-(Fa(r)/Ls|0)|0}var ir=256,Si=262144,Yt=4194304;function Fr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Rr(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var d=0,g=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var R=c&134217727;return R!==0?(c=R&~g,c!==0?d=Fr(c):(T&=R,T!==0?d=Fr(T):o||(o=R&~r,o!==0&&(d=Fr(o))))):(R=c&~g,R!==0?d=Fr(R):T!==0?d=Fr(T):o||(o=c&~r,o!==0&&(d=Fr(o)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:d}function Ir(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Bo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(){var r=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),r}function sr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Ai(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function _c(r,s,o,c,d,g){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,B=r.expirationTimes,Z=r.hiddenUpdates;for(o=T&~o;0<o;){var ae=31-Kt(o),ue=1<<ae;R[ae]=0,B[ae]=-1;var te=Z[ae];if(te!==null)for(Z[ae]=null,ae=0;ae<te.length;ae++){var re=te[ae];re!==null&&(re.lane&=-536870913)}o&=~ue}c!==0&&Qi(r,c,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(T&~s))}function Qi(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Kt(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&261930}function z(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-Kt(o),d=1<<c;d&s|r[c]&s&&(r[c]|=s),o&=~d}}function K(r,s){var o=s&-s;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|s))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function pe(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function _e(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:Pb(r.type))}function we(r,s){var o=oe.p;try{return oe.p=r,s()}finally{oe.p=o}}var Ie=Math.random().toString(36).slice(2),ve="__reactFiber$"+Ie,Te="__reactProps$"+Ie,Re="__reactContainer$"+Ie,Be="__reactEvents$"+Ie,Me="__reactListeners$"+Ie,$e="__reactHandles$"+Ie,st="__reactResources$"+Ie,xt="__reactMarker$"+Ie;function Ft(r){delete r[ve],delete r[Te],delete r[Be],delete r[Me],delete r[$e]}function Ut(r){var s=r[ve];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Re]||o[ve]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=_b(r);r!==null;){if(o=r[ve])return o;r=_b(r)}return s}r=o,o=r.parentNode}return null}function tt(r){if(r=r[ve]||r[Re]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function zt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function xn(r){var s=r[st];return s||(s=r[st]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Bt(r){r[xt]=!0}var fr=new Set,$n={};function dr(r,s){Kn(r,s),Kn(r+"Capture",s)}function Kn(r,s){for($n[r]=s,r=0;r<s.length;r++)fr.add(s[r])}var xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wi={},Ci={};function ot(r){return De.call(Ci,r)?!0:De.call(wi,r)?!1:xr.test(r)?Ci[r]=!0:(wi[r]=!0,!1)}function Zt(r,s,o){if(ot(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function pn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Nt(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Nr(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function js(r,s,o){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,g=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Tt(r){if(!r._valueTracker){var s=Nr(r)?"checked":"value";r._valueTracker=js(r,s,""+r[s])}}function Ga(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=Nr(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function Ri(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $a=/[\n"\\]/g;function mr(r){return r.replace($a,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ho(r,s,o,c,d,g,T,R){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+nt(s)):r.value!==""+nt(s)&&(r.value=""+nt(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?vc(r,T,nt(s)):o!=null?vc(r,T,nt(o)):c!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+nt(R):r.removeAttribute("name")}function vh(r,s,o,c,d,g,T,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Tt(r);return}o=o!=null?""+nt(o):"",s=s!=null?""+nt(s):o,R||s===r.value||(r.value=s),r.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=R?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),Tt(r)}function vc(r,s,o){s==="number"&&Ri(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Us(r,s,o,c){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&c&&(r[o].defaultSelected=!0)}else{for(o=""+nt(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Eh(r,s,o){if(s!=null&&(s=""+nt(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+nt(o):""}function zs(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(ge(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=nt(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c),Tt(r)}function pr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||Th.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Tc(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&o[d]!==c&&Ec(r,d,c)}else for(var g in s)s.hasOwnProperty(g)&&Ec(r,g,s[g])}function Fo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(r){return Bs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function li(){}var bc=null;function qr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hs=null,Ii=null;function Ka(r){var s=tt(r);if(s&&(r=s.stateNode)){var o=r[Te]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ho(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+mr(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var d=c[Te]||null;if(!d)throw Error(i(90));Ho(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&Ga(c)}break e;case"textarea":Eh(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Us(r,!!o.multiple,s,!1)}}}var Go=!1;function Fs(r,s,o){if(Go)return r(s,o);Go=!0;try{var c=r(s);return c}finally{if(Go=!1,(Hs!==null||Ii!==null)&&(gf(),Hs&&(s=Hs,r=Ii,Ii=Hs=null,Ka(s),r)))for(s=0;s<r.length;s++)Ka(r[s])}}function ci(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Te]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(Gr)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Ya=!1}var xi=null,Sc=null,Qa=null;function Ac(){if(Qa)return Qa;var r,s=Sc,o=s.length,c,d="value"in xi?xi.value:xi.textContent,g=d.length;for(r=0;r<o&&s[r]===d[r];r++);var T=o-r;for(c=1;c<=T&&s[o-c]===d[g-c];c++);return Qa=d.slice(r,1<c?1-c:void 0)}function Xa(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Xi(){return!0}function ui(){return!1}function kn(r){function s(o,c,d,g,T){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xi:ui,this.isPropagationStopped=ui,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),s}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=kn(Wi),qs=v({},Wi,{view:0,detail:0}),wc=kn(qs),Gs,$o,Di,Ko=v({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Di&&(Di&&r.type==="mousemove"?(Gs=r.screenX-Di.screenX,$o=r.screenY-Di.screenY):$o=Gs=0,Di=r),Gs)},movementY:function(r){return"movementY"in r?r.movementY:$o}}),Cc=kn(Ko),Wa=v({},Ko,{dataTransfer:0}),Sh=kn(Wa),Ah=v({},qs,{relatedTarget:0}),Ja=kn(Ah),Rc=v({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=kn(Rc),Yo=v({},Wi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ch=kn(Yo),Rh=v({},Wi,{data:0}),Oi=kn(Rh),Ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Nh[r])?!!s[r]:!1}function $s(){return Dh}var ar=v({},qs,{key:function(r){if(r.key){var s=Ih[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Xa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(r){return r.type==="keypress"?Xa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Xa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Oh=kn(ar),Mh=v({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=kn(Mh),h=v({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),_=kn(h),S=v({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),N=kn(S),W=v({},Ko,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=kn(W),Ee=v({},Wi,{newState:0,oldState:0}),Ze=kn(Ee),cn=[9,13,27,32],bt=Gr&&"CompositionEvent"in window,Qt=null;Gr&&"documentMode"in document&&(Qt=document.documentMode);var $r=Gr&&"TextEvent"in window&&!Qt,Mi=Gr&&(!bt||Qt&&8<Qt&&11>=Qt),hi=" ",fi=!1;function Za(r,s){switch(r){case"keyup":return cn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xo=!1;function ER(r,s){switch(r){case"compositionend":return Qo(s);case"keypress":return s.which!==32?null:(fi=!0,hi);case"textInput":return r=s.data,r===hi&&fi?null:r;default:return null}}function TR(r,s){if(Xo)return r==="compositionend"||!bt&&Za(r,s)?(r=Ac(),Qa=Sc=xi=null,Xo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mi&&s.locale!=="ko"?null:s.data;default:return null}}var bR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tv(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!bR[r.type]:s==="textarea"}function bv(r,s,o,c){Hs?Ii?Ii.push(c):Ii=[c]:Hs=c,s=Sf(s,"onChange"),0<s.length&&(o=new Ni("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var Ic=null,xc=null;function SR(r){ib(r,0)}function Ph(r){var s=zt(r);if(Ga(s))return r}function Sv(r,s){if(r==="change")return s}var Av=!1;if(Gr){var Hm;if(Gr){var Fm="oninput"in document;if(!Fm){var wv=document.createElement("div");wv.setAttribute("oninput","return;"),Fm=typeof wv.oninput=="function"}Hm=Fm}else Hm=!1;Av=Hm&&(!document.documentMode||9<document.documentMode)}function Cv(){Ic&&(Ic.detachEvent("onpropertychange",Rv),xc=Ic=null)}function Rv(r){if(r.propertyName==="value"&&Ph(xc)){var s=[];bv(s,xc,r,qr(r)),Fs(SR,s)}}function AR(r,s,o){r==="focusin"?(Cv(),Ic=s,xc=o,Ic.attachEvent("onpropertychange",Rv)):r==="focusout"&&Cv()}function wR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ph(xc)}function CR(r,s){if(r==="click")return Ph(s)}function RR(r,s){if(r==="input"||r==="change")return Ph(s)}function IR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Dr=typeof Object.is=="function"?Object.is:IR;function Nc(r,s){if(Dr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!De.call(s,d)||!Dr(r[d],s[d]))return!1}return!0}function Iv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xv(r,s){var o=Iv(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Iv(o)}}function Nv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Nv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Dv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ri(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Ri(r.document)}return s}function qm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var xR=Gr&&"documentMode"in document&&11>=document.documentMode,Wo=null,Gm=null,Dc=null,$m=!1;function Ov(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$m||Wo==null||Wo!==Ri(c)||(c=Wo,"selectionStart"in c&&qm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Dc&&Nc(Dc,c)||(Dc=c,c=Sf(Gm,"onSelect"),0<c.length&&(s=new Ni("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=Wo)))}function eo(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Jo={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},Km={},Mv={};Gr&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function to(r){if(Km[r])return Km[r];if(!Jo[r])return r;var s=Jo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Mv)return Km[r]=s[o];return r}var Pv=to("animationend"),kv=to("animationiteration"),Vv=to("animationstart"),NR=to("transitionrun"),DR=to("transitionstart"),OR=to("transitioncancel"),Lv=to("transitionend"),jv=new Map,Ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ym.push("scrollEnd");function di(r,s){jv.set(r,s),dr(s,[r])}var kh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Kr=[],Zo=0,Qm=0;function Vh(){for(var r=Zo,s=Qm=Zo=0;s<r;){var o=Kr[s];Kr[s++]=null;var c=Kr[s];Kr[s++]=null;var d=Kr[s];Kr[s++]=null;var g=Kr[s];if(Kr[s++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}g!==0&&Uv(o,d,g)}}function Lh(r,s,o,c){Kr[Zo++]=r,Kr[Zo++]=s,Kr[Zo++]=o,Kr[Zo++]=c,Qm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Xm(r,s,o,c){return Lh(r,s,o,c),jh(r)}function no(r,s){return Lh(r,null,null,s),jh(r)}function Uv(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var d=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-Kt(o),r=g.hiddenUpdates,c=r[d],c===null?r[d]=[s]:c.push(s),s.lane=o|536870912),g):null}function jh(r){if(50<Zc)throw Zc=0,sg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var el={};function MR(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(r,s,o,c){return new MR(r,s,o,c)}function Wm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Zi(r,s){var o=r.alternate;return o===null?(o=Or(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function zv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Uh(r,s,o,c,d,g){var T=0;if(c=r,typeof r=="function")Wm(r)&&(T=1);else if(typeof r=="string")T=jI(r,o,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Or(31,o,s,d),r.elementType=I,r.lanes=g,r;case H:return ro(o.children,d,g,s);case D:T=8,d|=24;break;case j:return r=Or(12,o,s,d|2),r.elementType=j,r.lanes=g,r;case X:return r=Or(13,o,s,d),r.elementType=X,r.lanes=g,r;case Y:return r=Or(19,o,s,d),r.elementType=Y,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case U:T=10;break e;case P:T=9;break e;case F:T=11;break e;case A:T=14;break e;case C:T=16,c=null;break e}T=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Or(T,o,s,d),s.elementType=r,s.type=c,s.lanes=g,s}function ro(r,s,o,c){return r=Or(7,r,c,s),r.lanes=o,r}function Jm(r,s,o){return r=Or(6,r,null,s),r.lanes=o,r}function Bv(r){var s=Or(18,null,null,0);return s.stateNode=r,s}function Zm(r,s,o){return s=Or(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Hv=new WeakMap;function Yr(r,s){if(typeof r=="object"&&r!==null){var o=Hv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Je(s)},Hv.set(r,s),s)}return{value:r,source:s,stack:Je(s)}}var tl=[],nl=0,zh=null,Oc=0,Qr=[],Xr=0,Ks=null,Pi=1,ki="";function es(r,s){tl[nl++]=Oc,tl[nl++]=zh,zh=r,Oc=s}function Fv(r,s,o){Qr[Xr++]=Pi,Qr[Xr++]=ki,Qr[Xr++]=Ks,Ks=r;var c=Pi;r=ki;var d=32-Kt(c)-1;c&=~(1<<d),o+=1;var g=32-Kt(s)+d;if(30<g){var T=d-d%5;g=(c&(1<<T)-1).toString(32),c>>=T,d-=T,Pi=1<<32-Kt(s)+d|o<<d|c,ki=g+r}else Pi=1<<g|o<<d|c,ki=r}function ep(r){r.return!==null&&(es(r,1),Fv(r,1,0))}function tp(r){for(;r===zh;)zh=tl[--nl],tl[nl]=null,Oc=tl[--nl],tl[nl]=null;for(;r===Ks;)Ks=Qr[--Xr],Qr[Xr]=null,ki=Qr[--Xr],Qr[Xr]=null,Pi=Qr[--Xr],Qr[Xr]=null}function qv(r,s){Qr[Xr++]=Pi,Qr[Xr++]=ki,Qr[Xr++]=Ks,Pi=s.id,ki=s.overflow,Ks=r}var Vn=null,qt=null,gt=!1,Ys=null,Wr=!1,np=Error(i(519));function Qs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(Yr(s,r)),np}function Gv(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[ve]=r,s[Te]=c,o){case"dialog":ut("cancel",s),ut("close",s);break;case"iframe":case"object":case"embed":ut("load",s);break;case"video":case"audio":for(o=0;o<tu.length;o++)ut(tu[o],s);break;case"source":ut("error",s);break;case"img":case"image":case"link":ut("error",s),ut("load",s);break;case"details":ut("toggle",s);break;case"input":ut("invalid",s),vh(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ut("invalid",s);break;case"textarea":ut("invalid",s),zs(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||lb(s.textContent,o)?(c.popover!=null&&(ut("beforetoggle",s),ut("toggle",s)),c.onScroll!=null&&ut("scroll",s),c.onScrollEnd!=null&&ut("scrollend",s),c.onClick!=null&&(s.onclick=li),s=!0):s=!1,s||Qs(r,!0)}function $v(r){for(Vn=r.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:Wr=!1;return;case 27:case 3:Wr=!0;return;default:Vn=Vn.return}}function rl(r){if(r!==Vn)return!1;if(!gt)return $v(r),gt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Eg(r.type,r.memoizedProps)),o=!o),o&&qt&&Qs(r),$v(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));qt=yb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));qt=yb(r)}else s===27?(s=qt,ca(r.type)?(r=wg,wg=null,qt=r):qt=s):qt=Vn?Zr(r.stateNode.nextSibling):null;return!0}function io(){qt=Vn=null,gt=!1}function rp(){var r=Ys;return r!==null&&(vr===null?vr=r:vr.push.apply(vr,r),Ys=null),r}function Mc(r){Ys===null?Ys=[r]:Ys.push(r)}var ip=q(null),so=null,ts=null;function Xs(r,s,o){se(ip,s._currentValue),s._currentValue=o}function ns(r){r._currentValue=ip.current,ie(ip)}function sp(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function ap(r,s,o,c){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var R=g;g=d;for(var B=0;B<s.length;B++)if(R.context===s[B]){g.lanes|=o,R=g.alternate,R!==null&&(R.lanes|=o),sp(g.return,o,r),c||(T=null);break e}g=R.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),sp(T,o,r),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===r){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function il(r,s,o,c){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var R=d.type;Dr(d.pendingProps.value,T.value)||(r!==null?r.push(R):r=[R])}}else if(d===ke.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(au):r=[au])}d=d.return}r!==null&&ap(s,r,o,c),s.flags|=262144}function Bh(r){for(r=r.firstContext;r!==null;){if(!Dr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ao(r){so=r,ts=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ln(r){return Kv(so,r)}function Hh(r,s){return so===null&&ao(r),Kv(r,s)}function Kv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ts===null){if(r===null)throw Error(i(308));ts=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ts=ts.next=s;return o}var PR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},kR=n.unstable_scheduleCallback,VR=n.unstable_NormalPriority,gn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function op(){return{controller:new PR,data:new Map,refCount:0}}function Pc(r){r.refCount--,r.refCount===0&&kR(VR,function(){r.controller.abort()})}var kc=null,lp=0,sl=0,al=null;function LR(r,s){if(kc===null){var o=kc=[];lp=0,sl=hg(),al={status:"pending",value:void 0,then:function(c){o.push(c)}}}return lp++,s.then(Yv,Yv),s}function Yv(){if(--lp===0&&kc!==null){al!==null&&(al.status="fulfilled");var r=kc;kc=null,sl=0,al=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function jR(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var Qv=G.S;G.S=function(r,s){OT=it(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&LR(r,s),Qv!==null&&Qv(r,s)};var oo=q(null);function cp(){var r=oo.current;return r!==null?r:jt.pooledCache}function Fh(r,s){s===null?se(oo,oo.current):se(oo,s.pool)}function Xv(){var r=cp();return r===null?null:{parent:gn._currentValue,pool:r}}var ol=Error(i(460)),up=Error(i(474)),qh=Error(i(542)),Gh={then:function(){}};function Wv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Jv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(li,li),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,eE(r),r;default:if(typeof s.status=="string")s.then(li,li);else{if(r=jt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,eE(r),r}throw co=s,ol}}function lo(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(co=o,ol):o}}var co=null;function Zv(){if(co===null)throw Error(i(459));var r=co;return co=null,r}function eE(r){if(r===ol||r===qh)throw Error(i(483))}var ll=null,Vc=0;function $h(r){var s=Vc;return Vc+=1,ll===null&&(ll=[]),Jv(ll,r,s)}function Lc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Kh(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function tE(r){function s(Q,$){if(r){var J=Q.deletions;J===null?(Q.deletions=[$],Q.flags|=16):J.push($)}}function o(Q,$){if(!r)return null;for(;$!==null;)s(Q,$),$=$.sibling;return null}function c(Q){for(var $=new Map;Q!==null;)Q.key!==null?$.set(Q.key,Q):$.set(Q.index,Q),Q=Q.sibling;return $}function d(Q,$){return Q=Zi(Q,$),Q.index=0,Q.sibling=null,Q}function g(Q,$,J){return Q.index=J,r?(J=Q.alternate,J!==null?(J=J.index,J<$?(Q.flags|=67108866,$):J):(Q.flags|=67108866,$)):(Q.flags|=1048576,$)}function T(Q){return r&&Q.alternate===null&&(Q.flags|=67108866),Q}function R(Q,$,J,le){return $===null||$.tag!==6?($=Jm(J,Q.mode,le),$.return=Q,$):($=d($,J),$.return=Q,$)}function B(Q,$,J,le){var Le=J.type;return Le===H?ae(Q,$,J.props.children,le,J.key):$!==null&&($.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&lo(Le)===$.type)?($=d($,J.props),Lc($,J),$.return=Q,$):($=Uh(J.type,J.key,J.props,null,Q.mode,le),Lc($,J),$.return=Q,$)}function Z(Q,$,J,le){return $===null||$.tag!==4||$.stateNode.containerInfo!==J.containerInfo||$.stateNode.implementation!==J.implementation?($=Zm(J,Q.mode,le),$.return=Q,$):($=d($,J.children||[]),$.return=Q,$)}function ae(Q,$,J,le,Le){return $===null||$.tag!==7?($=ro(J,Q.mode,le,Le),$.return=Q,$):($=d($,J),$.return=Q,$)}function ue(Q,$,J){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Jm(""+$,Q.mode,J),$.return=Q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return J=Uh($.type,$.key,$.props,null,Q.mode,J),Lc(J,$),J.return=Q,J;case M:return $=Zm($,Q.mode,J),$.return=Q,$;case C:return $=lo($),ue(Q,$,J)}if(ge($)||L($))return $=ro($,Q.mode,J,null),$.return=Q,$;if(typeof $.then=="function")return ue(Q,$h($),J);if($.$$typeof===U)return ue(Q,Hh(Q,$),J);Kh(Q,$)}return null}function te(Q,$,J,le){var Le=$!==null?$.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Le!==null?null:R(Q,$,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===Le?B(Q,$,J,le):null;case M:return J.key===Le?Z(Q,$,J,le):null;case C:return J=lo(J),te(Q,$,J,le)}if(ge(J)||L(J))return Le!==null?null:ae(Q,$,J,le,null);if(typeof J.then=="function")return te(Q,$,$h(J),le);if(J.$$typeof===U)return te(Q,$,Hh(Q,J),le);Kh(Q,J)}return null}function re(Q,$,J,le,Le){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Q=Q.get(J)||null,R($,Q,""+le,Le);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case w:return Q=Q.get(le.key===null?J:le.key)||null,B($,Q,le,Le);case M:return Q=Q.get(le.key===null?J:le.key)||null,Z($,Q,le,Le);case C:return le=lo(le),re(Q,$,J,le,Le)}if(ge(le)||L(le))return Q=Q.get(J)||null,ae($,Q,le,Le,null);if(typeof le.then=="function")return re(Q,$,J,$h(le),Le);if(le.$$typeof===U)return re(Q,$,J,Hh($,le),Le);Kh($,le)}return null}function xe(Q,$,J,le){for(var Le=null,_t=null,Oe=$,rt=$=0,ft=null;Oe!==null&&rt<J.length;rt++){Oe.index>rt?(ft=Oe,Oe=null):ft=Oe.sibling;var vt=te(Q,Oe,J[rt],le);if(vt===null){Oe===null&&(Oe=ft);break}r&&Oe&&vt.alternate===null&&s(Q,Oe),$=g(vt,$,rt),_t===null?Le=vt:_t.sibling=vt,_t=vt,Oe=ft}if(rt===J.length)return o(Q,Oe),gt&&es(Q,rt),Le;if(Oe===null){for(;rt<J.length;rt++)Oe=ue(Q,J[rt],le),Oe!==null&&($=g(Oe,$,rt),_t===null?Le=Oe:_t.sibling=Oe,_t=Oe);return gt&&es(Q,rt),Le}for(Oe=c(Oe);rt<J.length;rt++)ft=re(Oe,Q,rt,J[rt],le),ft!==null&&(r&&ft.alternate!==null&&Oe.delete(ft.key===null?rt:ft.key),$=g(ft,$,rt),_t===null?Le=ft:_t.sibling=ft,_t=ft);return r&&Oe.forEach(function(ma){return s(Q,ma)}),gt&&es(Q,rt),Le}function Ue(Q,$,J,le){if(J==null)throw Error(i(151));for(var Le=null,_t=null,Oe=$,rt=$=0,ft=null,vt=J.next();Oe!==null&&!vt.done;rt++,vt=J.next()){Oe.index>rt?(ft=Oe,Oe=null):ft=Oe.sibling;var ma=te(Q,Oe,vt.value,le);if(ma===null){Oe===null&&(Oe=ft);break}r&&Oe&&ma.alternate===null&&s(Q,Oe),$=g(ma,$,rt),_t===null?Le=ma:_t.sibling=ma,_t=ma,Oe=ft}if(vt.done)return o(Q,Oe),gt&&es(Q,rt),Le;if(Oe===null){for(;!vt.done;rt++,vt=J.next())vt=ue(Q,vt.value,le),vt!==null&&($=g(vt,$,rt),_t===null?Le=vt:_t.sibling=vt,_t=vt);return gt&&es(Q,rt),Le}for(Oe=c(Oe);!vt.done;rt++,vt=J.next())vt=re(Oe,Q,rt,vt.value,le),vt!==null&&(r&&vt.alternate!==null&&Oe.delete(vt.key===null?rt:vt.key),$=g(vt,$,rt),_t===null?Le=vt:_t.sibling=vt,_t=vt);return r&&Oe.forEach(function(QI){return s(Q,QI)}),gt&&es(Q,rt),Le}function Pt(Q,$,J,le){if(typeof J=="object"&&J!==null&&J.type===H&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var Le=J.key;$!==null;){if($.key===Le){if(Le=J.type,Le===H){if($.tag===7){o(Q,$.sibling),le=d($,J.props.children),le.return=Q,Q=le;break e}}else if($.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===C&&lo(Le)===$.type){o(Q,$.sibling),le=d($,J.props),Lc(le,J),le.return=Q,Q=le;break e}o(Q,$);break}else s(Q,$);$=$.sibling}J.type===H?(le=ro(J.props.children,Q.mode,le,J.key),le.return=Q,Q=le):(le=Uh(J.type,J.key,J.props,null,Q.mode,le),Lc(le,J),le.return=Q,Q=le)}return T(Q);case M:e:{for(Le=J.key;$!==null;){if($.key===Le)if($.tag===4&&$.stateNode.containerInfo===J.containerInfo&&$.stateNode.implementation===J.implementation){o(Q,$.sibling),le=d($,J.children||[]),le.return=Q,Q=le;break e}else{o(Q,$);break}else s(Q,$);$=$.sibling}le=Zm(J,Q.mode,le),le.return=Q,Q=le}return T(Q);case C:return J=lo(J),Pt(Q,$,J,le)}if(ge(J))return xe(Q,$,J,le);if(L(J)){if(Le=L(J),typeof Le!="function")throw Error(i(150));return J=Le.call(J),Ue(Q,$,J,le)}if(typeof J.then=="function")return Pt(Q,$,$h(J),le);if(J.$$typeof===U)return Pt(Q,$,Hh(Q,J),le);Kh(Q,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,$!==null&&$.tag===6?(o(Q,$.sibling),le=d($,J),le.return=Q,Q=le):(o(Q,$),le=Jm(J,Q.mode,le),le.return=Q,Q=le),T(Q)):o(Q,$)}return function(Q,$,J,le){try{Vc=0;var Le=Pt(Q,$,J,le);return ll=null,Le}catch(Oe){if(Oe===ol||Oe===qh)throw Oe;var _t=Or(29,Oe,null,Q.mode);return _t.lanes=le,_t.return=Q,_t}finally{}}}var uo=tE(!0),nE=tE(!1),Ws=!1;function hp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Js(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zs(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(St&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=jh(r),Uv(r,null,o),s}return Lh(r,c,s,o),jh(r)}function jc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,z(r,o)}}function dp(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?d=g=s:g=g.next=s}else d=g=s;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var mp=!1;function Uc(){if(mp){var r=al;if(r!==null)throw r}}function zc(r,s,o,c){mp=!1;var d=r.updateQueue;Ws=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var B=R,Z=B.next;B.next=null,T===null?g=Z:T.next=Z,T=B;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,R=ae.lastBaseUpdate,R!==T&&(R===null?ae.firstBaseUpdate=Z:R.next=Z,ae.lastBaseUpdate=B))}if(g!==null){var ue=d.baseState;T=0,ae=Z=B=null,R=g;do{var te=R.lane&-536870913,re=te!==R.lane;if(re?(ht&te)===te:(c&te)===te){te!==0&&te===sl&&(mp=!0),ae!==null&&(ae=ae.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var xe=r,Ue=R;te=s;var Pt=o;switch(Ue.tag){case 1:if(xe=Ue.payload,typeof xe=="function"){ue=xe.call(Pt,ue,te);break e}ue=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ue.payload,te=typeof xe=="function"?xe.call(Pt,ue,te):xe,te==null)break e;ue=v({},ue,te);break e;case 2:Ws=!0}}te=R.callback,te!==null&&(r.flags|=64,re&&(r.flags|=8192),re=d.callbacks,re===null?d.callbacks=[te]:re.push(te))}else re={lane:te,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ae===null?(Z=ae=re,B=ue):ae=ae.next=re,T|=te;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;re=R,R=re.next,re.next=null,d.lastBaseUpdate=re,d.shared.pending=null}}while(!0);ae===null&&(B=ue),d.baseState=B,d.firstBaseUpdate=Z,d.lastBaseUpdate=ae,g===null&&(d.shared.lanes=0),ia|=T,r.lanes=T,r.memoizedState=ue}}function rE(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function iE(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)rE(o[r],s)}var cl=q(null),Yh=q(0);function sE(r,s){r=hs,se(Yh,r),se(cl,s),hs=r|s.baseLanes}function pp(){se(Yh,hs),se(cl,cl.current)}function gp(){hs=Yh.current,ie(cl),ie(Yh)}var Mr=q(null),Jr=null;function ea(r){var s=r.alternate;se(un,un.current&1),se(Mr,r),Jr===null&&(s===null||cl.current!==null||s.memoizedState!==null)&&(Jr=r)}function yp(r){se(un,un.current),se(Mr,r),Jr===null&&(Jr=r)}function aE(r){r.tag===22?(se(un,un.current),se(Mr,r),Jr===null&&(Jr=r)):ta()}function ta(){se(un,un.current),se(Mr,Mr.current)}function Pr(r){ie(Mr),Jr===r&&(Jr=null),ie(un)}var un=q(0);function Qh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Sg(o)||Ag(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rs=0,et=null,Ot=null,yn=null,Xh=!1,ul=!1,ho=!1,Wh=0,Bc=0,hl=null,UR=0;function rn(){throw Error(i(321))}function _p(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Dr(r[o],s[o]))return!1;return!0}function vp(r,s,o,c,d,g){return rs=g,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,G.H=r===null||r.memoizedState===null?FE:Pp,ho=!1,g=o(c,d),ho=!1,ul&&(g=lE(s,o,c,d)),oE(r),g}function oE(r){G.H=qc;var s=Ot!==null&&Ot.next!==null;if(rs=0,yn=Ot=et=null,Xh=!1,Bc=0,hl=null,s)throw Error(i(300));r===null||_n||(r=r.dependencies,r!==null&&Bh(r)&&(_n=!0))}function lE(r,s,o,c){et=r;var d=0;do{if(ul&&(hl=null),Bc=0,ul=!1,25<=d)throw Error(i(301));if(d+=1,yn=Ot=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}G.H=qE,g=s(o,c)}while(ul);return g}function zR(){var r=G.H,s=r.useState()[0];return s=typeof s.then=="function"?Hc(s):s,r=r.useState()[0],(Ot!==null?Ot.memoizedState:null)!==r&&(et.flags|=1024),s}function Ep(){var r=Wh!==0;return Wh=0,r}function Tp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function bp(r){if(Xh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xh=!1}rs=0,yn=Ot=et=null,ul=!1,Bc=Wh=0,hl=null}function or(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?et.memoizedState=yn=r:yn=yn.next=r,yn}function hn(){if(Ot===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=Ot.next;var s=yn===null?et.memoizedState:yn.next;if(s!==null)yn=s,Ot=r;else{if(r===null)throw et.alternate===null?Error(i(467)):Error(i(310));Ot=r,r={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},yn===null?et.memoizedState=yn=r:yn=yn.next=r}return yn}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hc(r){var s=Bc;return Bc+=1,hl===null&&(hl=[]),r=Jv(hl,r,s),s=et,(yn===null?s.memoizedState:yn.next)===null&&(s=s.alternate,G.H=s===null||s.memoizedState===null?FE:Pp),r}function Zh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Hc(r);if(r.$$typeof===U)return Ln(r)}throw Error(i(438,String(r)))}function Sp(r){var s=null,o=et.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=et.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Jh(),et.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=V;return s.index++,o}function is(r,s){return typeof s=="function"?s(r):s}function ef(r){var s=hn();return Ap(s,Ot,r)}function Ap(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=r.baseQueue,g=c.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}s.baseQueue=d=g,c.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var R=T=null,B=null,Z=s,ae=!1;do{var ue=Z.lane&-536870913;if(ue!==Z.lane?(ht&ue)===ue:(rs&ue)===ue){var te=Z.revertLane;if(te===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ue===sl&&(ae=!0);else if((rs&te)===te){Z=Z.next,te===sl&&(ae=!0);continue}else ue={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=ue,T=g):B=B.next=ue,et.lanes|=te,ia|=te;ue=Z.action,ho&&o(g,ue),g=Z.hasEagerState?Z.eagerState:o(g,ue)}else te={lane:ue,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},B===null?(R=B=te,T=g):B=B.next=te,et.lanes|=ue,ia|=ue;Z=Z.next}while(Z!==null&&Z!==s);if(B===null?T=g:B.next=R,!Dr(g,r.memoizedState)&&(_n=!0,ae&&(o=al,o!==null)))throw o;r.memoizedState=g,r.baseState=T,r.baseQueue=B,c.lastRenderedState=g}return d===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function wp(r){var s=hn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,d=o.pending,g=s.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do g=r(g,T.action),T=T.next;while(T!==d);Dr(g,s.memoizedState)||(_n=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function cE(r,s,o){var c=et,d=hn(),g=gt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!Dr((Ot||d).memoizedState,o);if(T&&(d.memoizedState=o,_n=!0),d=d.queue,Ip(fE.bind(null,c,d,r),[r]),d.getSnapshot!==s||T||yn!==null&&yn.memoizedState.tag&1){if(c.flags|=2048,fl(9,{destroy:void 0},hE.bind(null,c,d,o,s),null),jt===null)throw Error(i(349));g||(rs&127)!==0||uE(c,s,o)}return o}function uE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=et.updateQueue,s===null?(s=Jh(),et.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function hE(r,s,o,c){s.value=o,s.getSnapshot=c,dE(s)&&mE(r)}function fE(r,s,o){return o(function(){dE(s)&&mE(r)})}function dE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Dr(r,o)}catch{return!0}}function mE(r){var s=no(r,2);s!==null&&Er(s,r,2)}function Cp(r){var s=or();if(typeof r=="function"){var o=r;if(r=o(),ho){rr(!0);try{o()}finally{rr(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},s}function pE(r,s,o,c){return r.baseState=o,Ap(r,Ot,typeof c=="function"?c:is)}function BR(r,s,o,c,d){if(rf(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};G.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,gE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function gE(r,s){var o=s.action,c=s.payload,d=r.state;if(s.isTransition){var g=G.T,T={};G.T=T;try{var R=o(d,c),B=G.S;B!==null&&B(T,R),yE(r,s,R)}catch(Z){Rp(r,s,Z)}finally{g!==null&&T.types!==null&&(g.types=T.types),G.T=g}}else try{g=o(d,c),yE(r,s,g)}catch(Z){Rp(r,s,Z)}}function yE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){_E(r,s,c)},function(c){return Rp(r,s,c)}):_E(r,s,o)}function _E(r,s,o){s.status="fulfilled",s.value=o,vE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,gE(r,o)))}function Rp(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,vE(s),s=s.next;while(s!==c)}r.action=null}function vE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function EE(r,s){return s}function TE(r,s){if(gt){var o=jt.formState;if(o!==null){e:{var c=et;if(gt){if(qt){t:{for(var d=qt,g=Wr;d.nodeType!==8;){if(!g){d=null;break t}if(d=Zr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){qt=Zr(d.nextSibling),c=d.data==="F!";break e}}Qs(c)}c=!1}c&&(s=o[0])}}return o=or(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:EE,lastRenderedState:s},o.queue=c,o=zE.bind(null,et,c),c.dispatch=o,c=Cp(!1),g=Mp.bind(null,et,!1,c.queue),c=or(),d={state:s,dispatch:null,action:r,pending:null},c.queue=d,o=BR.bind(null,et,d,g,o),d.dispatch=o,c.memoizedState=r,[s,o,!1]}function bE(r){var s=hn();return SE(s,Ot,r)}function SE(r,s,o){if(s=Ap(r,s,EE)[0],r=ef(is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Hc(s)}catch(T){throw T===ol?qh:T}else c=s;s=hn();var d=s.queue,g=d.dispatch;return o!==s.memoizedState&&(et.flags|=2048,fl(9,{destroy:void 0},HR.bind(null,d,o),null)),[c,g,r]}function HR(r,s){r.action=s}function AE(r){var s=hn(),o=Ot;if(o!==null)return SE(s,o,r);hn(),s=s.memoizedState,o=hn();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function fl(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=et.updateQueue,s===null&&(s=Jh(),et.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function wE(){return hn().memoizedState}function tf(r,s,o,c){var d=or();et.flags|=r,d.memoizedState=fl(1|s,{destroy:void 0},o,c===void 0?null:c)}function nf(r,s,o,c){var d=hn();c=c===void 0?null:c;var g=d.memoizedState.inst;Ot!==null&&c!==null&&_p(c,Ot.memoizedState.deps)?d.memoizedState=fl(s,g,o,c):(et.flags|=r,d.memoizedState=fl(1|s,g,o,c))}function CE(r,s){tf(8390656,8,r,s)}function Ip(r,s){nf(2048,8,r,s)}function FR(r){et.flags|=4;var s=et.updateQueue;if(s===null)s=Jh(),et.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function RE(r){var s=hn().memoizedState;return FR({ref:s,nextImpl:r}),function(){if((St&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function IE(r,s){return nf(4,2,r,s)}function xE(r,s){return nf(4,4,r,s)}function NE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function DE(r,s,o){o=o!=null?o.concat([r]):null,nf(4,4,NE.bind(null,s,r),o)}function xp(){}function OE(r,s){var o=hn();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&_p(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function ME(r,s){var o=hn();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&_p(s,c[1]))return c[0];if(c=r(),ho){rr(!0);try{r()}finally{rr(!1)}}return o.memoizedState=[c,s],c}function Np(r,s,o){return o===void 0||(rs&1073741824)!==0&&(ht&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=PT(),et.lanes|=r,ia|=r,o)}function PE(r,s,o,c){return Dr(o,s)?o:cl.current!==null?(r=Np(r,o,c),Dr(r,s)||(_n=!0),r):(rs&42)===0||(rs&1073741824)!==0&&(ht&261930)===0?(_n=!0,r.memoizedState=o):(r=PT(),et.lanes|=r,ia|=r,s)}function kE(r,s,o,c,d){var g=oe.p;oe.p=g!==0&&8>g?g:8;var T=G.T,R={};G.T=R,Mp(r,!1,s,o);try{var B=d(),Z=G.S;if(Z!==null&&Z(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=jR(B,c);Fc(r,s,ae,Lr(r))}else Fc(r,s,c,Lr(r))}catch(ue){Fc(r,s,{then:function(){},status:"rejected",reason:ue},Lr())}finally{oe.p=g,T!==null&&R.types!==null&&(T.types=R.types),G.T=T}}function qR(){}function Dp(r,s,o,c){if(r.tag!==5)throw Error(i(476));var d=VE(r).queue;kE(r,d,s,de,o===null?qR:function(){return LE(r),o(c)})}function VE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:de},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function LE(r){var s=VE(r);s.next===null&&(s=r.alternate.memoizedState),Fc(r,s.next.queue,{},Lr())}function Op(){return Ln(au)}function jE(){return hn().memoizedState}function UE(){return hn().memoizedState}function GR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Lr();r=Js(o);var c=Zs(s,r,o);c!==null&&(Er(c,s,o),jc(c,s,o)),s={cache:op()},r.payload=s;return}s=s.return}}function $R(r,s,o){var c=Lr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},rf(r)?BE(s,o):(o=Xm(r,s,o,c),o!==null&&(Er(o,r,c),HE(o,s,c)))}function zE(r,s,o){var c=Lr();Fc(r,s,o,c)}function Fc(r,s,o,c){var d={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(rf(r))BE(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,R=g(T,o);if(d.hasEagerState=!0,d.eagerState=R,Dr(R,T))return Lh(r,s,d,0),jt===null&&Vh(),!1}catch{}finally{}if(o=Xm(r,s,d,c),o!==null)return Er(o,r,c),HE(o,s,c),!0}return!1}function Mp(r,s,o,c){if(c={lane:2,revertLane:hg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rf(r)){if(s)throw Error(i(479))}else s=Xm(r,o,c,2),s!==null&&Er(s,r,2)}function rf(r){var s=r.alternate;return r===et||s!==null&&s===et}function BE(r,s){ul=Xh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function HE(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,z(r,o)}}var qc={readContext:Ln,use:Zh,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};qc.useEffectEvent=rn;var FE={readContext:Ln,use:Zh,useCallback:function(r,s){return or().memoizedState=[r,s===void 0?null:s],r},useContext:Ln,useEffect:CE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,tf(4194308,4,NE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return tf(4194308,4,r,s)},useInsertionEffect:function(r,s){tf(4,2,r,s)},useMemo:function(r,s){var o=or();s=s===void 0?null:s;var c=r();if(ho){rr(!0);try{r()}finally{rr(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=or();if(o!==void 0){var d=o(s);if(ho){rr(!0);try{o(s)}finally{rr(!1)}}}else d=s;return c.memoizedState=c.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},c.queue=r,r=r.dispatch=$R.bind(null,et,r),[c.memoizedState,r]},useRef:function(r){var s=or();return r={current:r},s.memoizedState=r},useState:function(r){r=Cp(r);var s=r.queue,o=zE.bind(null,et,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:xp,useDeferredValue:function(r,s){var o=or();return Np(o,r,s)},useTransition:function(){var r=Cp(!1);return r=kE.bind(null,et,r.queue,!0,!1),or().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=et,d=or();if(gt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),jt===null)throw Error(i(349));(ht&127)!==0||uE(c,s,o)}d.memoizedState=o;var g={value:o,getSnapshot:s};return d.queue=g,CE(fE.bind(null,c,g,r),[r]),c.flags|=2048,fl(9,{destroy:void 0},hE.bind(null,c,g,o,s),null),o},useId:function(){var r=or(),s=jt.identifierPrefix;if(gt){var o=ki,c=Pi;o=(c&~(1<<32-Kt(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Wh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=UR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Op,useFormState:TE,useActionState:TE,useOptimistic:function(r){var s=or();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Mp.bind(null,et,!0,o),o.dispatch=s,[r,s]},useMemoCache:Sp,useCacheRefresh:function(){return or().memoizedState=GR.bind(null,et)},useEffectEvent:function(r){var s=or(),o={impl:r};return s.memoizedState=o,function(){if((St&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Pp={readContext:Ln,use:Zh,useCallback:OE,useContext:Ln,useEffect:Ip,useImperativeHandle:DE,useInsertionEffect:IE,useLayoutEffect:xE,useMemo:ME,useReducer:ef,useRef:wE,useState:function(){return ef(is)},useDebugValue:xp,useDeferredValue:function(r,s){var o=hn();return PE(o,Ot.memoizedState,r,s)},useTransition:function(){var r=ef(is)[0],s=hn().memoizedState;return[typeof r=="boolean"?r:Hc(r),s]},useSyncExternalStore:cE,useId:jE,useHostTransitionStatus:Op,useFormState:bE,useActionState:bE,useOptimistic:function(r,s){var o=hn();return pE(o,Ot,r,s)},useMemoCache:Sp,useCacheRefresh:UE};Pp.useEffectEvent=RE;var qE={readContext:Ln,use:Zh,useCallback:OE,useContext:Ln,useEffect:Ip,useImperativeHandle:DE,useInsertionEffect:IE,useLayoutEffect:xE,useMemo:ME,useReducer:wp,useRef:wE,useState:function(){return wp(is)},useDebugValue:xp,useDeferredValue:function(r,s){var o=hn();return Ot===null?Np(o,r,s):PE(o,Ot.memoizedState,r,s)},useTransition:function(){var r=wp(is)[0],s=hn().memoizedState;return[typeof r=="boolean"?r:Hc(r),s]},useSyncExternalStore:cE,useId:jE,useHostTransitionStatus:Op,useFormState:AE,useActionState:AE,useOptimistic:function(r,s){var o=hn();return Ot!==null?pE(o,Ot,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Sp,useCacheRefresh:UE};qE.useEffectEvent=RE;function kp(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Vp={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=Lr(),d=Js(c);d.payload=s,o!=null&&(d.callback=o),s=Zs(r,d,c),s!==null&&(Er(s,r,c),jc(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=Lr(),d=Js(c);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Zs(r,d,c),s!==null&&(Er(s,r,c),jc(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Lr(),c=Js(o);c.tag=2,s!=null&&(c.callback=s),s=Zs(r,c,o),s!==null&&(Er(s,r,o),jc(s,r,o))}};function GE(r,s,o,c,d,g,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!Nc(o,c)||!Nc(d,g):!0}function $E(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&Vp.enqueueReplaceState(s,s.state,null)}function fo(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}function KE(r){kh(r)}function YE(r){console.error(r)}function QE(r){kh(r)}function sf(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function XE(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Lp(r,s,o){return o=Js(o),o.tag=3,o.payload={element:null},o.callback=function(){sf(r,s)},o}function WE(r){return r=Js(r),r.tag=3,r}function JE(r,s,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;r.payload=function(){return d(g)},r.callback=function(){XE(s,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){XE(s,o,c),typeof d!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function KR(r,s,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&il(s,o,d,!0),o=Mr.current,o!==null){switch(o.tag){case 31:case 13:return Jr===null?yf():o.alternate===null&&sn===0&&(sn=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===Gh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),lg(r,c,d)),!1;case 22:return o.flags|=65536,c===Gh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),lg(r,c,d)),!1}throw Error(i(435,o.tag))}return lg(r,c,d),yf(),!1}if(gt)return s=Mr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==np&&(r=Error(i(422),{cause:c}),Mc(Yr(r,o)))):(c!==np&&(s=Error(i(423),{cause:c}),Mc(Yr(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,c=Yr(c,o),d=Lp(r.stateNode,c,d),dp(r,d),sn!==4&&(sn=2)),!1;var g=Error(i(520),{cause:c});if(g=Yr(g,o),Jc===null?Jc=[g]:Jc.push(g),sn!==4&&(sn=2),s===null)return!0;c=Yr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Lp(o.stateNode,c,r),dp(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(sa===null||!sa.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=WE(d),JE(d,r,o,c),dp(o,d),!1}o=o.return}while(o!==null);return!1}var jp=Error(i(461)),_n=!1;function jn(r,s,o,c){s.child=r===null?nE(s,null,o,c):uo(s,r.child,o,c)}function ZE(r,s,o,c,d){o=o.render;var g=s.ref;if("ref"in c){var T={};for(var R in c)R!=="ref"&&(T[R]=c[R])}else T=c;return ao(s),c=vp(r,s,o,T,g,d),R=Ep(),r!==null&&!_n?(Tp(r,s,d),ss(r,s,d)):(gt&&R&&ep(s),s.flags|=1,jn(r,s,c,d),s.child)}function eT(r,s,o,c,d){if(r===null){var g=o.type;return typeof g=="function"&&!Wm(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,tT(r,s,g,c,d)):(r=Uh(o.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!$p(r,d)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:Nc,o(T,c)&&r.ref===s.ref)return ss(r,s,d)}return s.flags|=1,r=Zi(g,c),r.ref=s.ref,r.return=s,s.child=r}function tT(r,s,o,c,d){if(r!==null){var g=r.memoizedProps;if(Nc(g,c)&&r.ref===s.ref)if(_n=!1,s.pendingProps=c=g,$p(r,d))(r.flags&131072)!==0&&(_n=!0);else return s.lanes=r.lanes,ss(r,s,d)}return Up(r,s,o,c,d)}function nT(r,s,o,c){var d=c.children,g=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(c=s.child=r.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~g}else c=0,s.child=null;return rT(r,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Fh(s,g!==null?g.cachePool:null),g!==null?sE(s,g):pp(),aE(s);else return c=s.lanes=536870912,rT(r,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Fh(s,g.cachePool),sE(s,g),ta(),s.memoizedState=null):(r!==null&&Fh(s,null),pp(),ta());return jn(r,s,d,o),s.child}function Gc(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function rT(r,s,o,c,d){var g=cp();return g=g===null?null:{parent:gn._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Fh(s,null),pp(),aE(s),r!==null&&il(r,s,c,!0),s.childLanes=d,null}function af(r,s){return s=lf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function iT(r,s,o){return uo(s,r.child,null,o),r=af(s,s.pendingProps),r.flags|=2,Pr(s),s.memoizedState=null,r}function YR(r,s,o){var c=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(gt){if(c.mode==="hidden")return r=af(s,c),s.lanes=536870912,Gc(null,r);if(yp(s),(r=qt)?(r=gb(r,Wr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ks!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},o=Bv(r),o.return=s,s.child=o,Vn=s,qt=null)):r=null,r===null)throw Qs(s);return s.lanes=536870912,null}return af(s,c)}var g=r.memoizedState;if(g!==null){var T=g.dehydrated;if(yp(s),d)if(s.flags&256)s.flags&=-257,s=iT(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(_n||il(r,s,o,!1),d=(o&r.childLanes)!==0,_n||d){if(c=jt,c!==null&&(T=K(c,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,no(r,T),Er(c,r,T),jp;yf(),s=iT(r,s,o)}else r=g.treeContext,qt=Zr(T.nextSibling),Vn=s,gt=!0,Ys=null,Wr=!1,r!==null&&qv(s,r),s=af(s,c),s.flags|=4096;return s}return r=Zi(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function of(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Up(r,s,o,c,d){return ao(s),o=vp(r,s,o,c,void 0,d),c=Ep(),r!==null&&!_n?(Tp(r,s,d),ss(r,s,d)):(gt&&c&&ep(s),s.flags|=1,jn(r,s,o,d),s.child)}function sT(r,s,o,c,d,g){return ao(s),s.updateQueue=null,o=lE(s,c,o,d),oE(r),c=Ep(),r!==null&&!_n?(Tp(r,s,g),ss(r,s,g)):(gt&&c&&ep(s),s.flags|=1,jn(r,s,o,g),s.child)}function aT(r,s,o,c,d){if(ao(s),s.stateNode===null){var g=el,T=o.contextType;typeof T=="object"&&T!==null&&(g=Ln(T)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Vp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},hp(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?Ln(T):el,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(kp(s,o,T,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Vp.enqueueReplaceState(g,g.state,null),zc(s,c,g,d),Uc(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var R=s.memoizedProps,B=fo(o,R);g.props=B;var Z=g.context,ae=o.contextType;T=el,typeof ae=="object"&&ae!==null&&(T=Ln(ae));var ue=o.getDerivedStateFromProps;ae=typeof ue=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||Z!==T)&&$E(s,g,c,T),Ws=!1;var te=s.memoizedState;g.state=te,zc(s,c,g,d),Uc(),Z=s.memoizedState,R||te!==Z||Ws?(typeof ue=="function"&&(kp(s,o,ue,c),Z=s.memoizedState),(B=Ws||GE(s,o,B,c,te,Z,T))?(ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Z),g.props=c,g.state=Z,g.context=T,c=B):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,fp(r,s),T=s.memoizedProps,ae=fo(o,T),g.props=ae,ue=s.pendingProps,te=g.context,Z=o.contextType,B=el,typeof Z=="object"&&Z!==null&&(B=Ln(Z)),R=o.getDerivedStateFromProps,(Z=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ue||te!==B)&&$E(s,g,c,B),Ws=!1,te=s.memoizedState,g.state=te,zc(s,c,g,d),Uc();var re=s.memoizedState;T!==ue||te!==re||Ws||r!==null&&r.dependencies!==null&&Bh(r.dependencies)?(typeof R=="function"&&(kp(s,o,R,c),re=s.memoizedState),(ae=Ws||GE(s,o,ae,c,te,re,B)||r!==null&&r.dependencies!==null&&Bh(r.dependencies))?(Z||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,re,B),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,re,B)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=re),g.props=c,g.state=re,g.context=B,c=ae):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&te===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,of(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=uo(s,r.child,null,d),s.child=uo(s,null,o,d)):jn(r,s,o,d),s.memoizedState=g.state,r=s.child):r=ss(r,s,d),r}function oT(r,s,o,c){return io(),s.flags|=256,jn(r,s,o,c),s.child}var zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bp(r){return{baseLanes:r,cachePool:Xv()}}function Hp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Vr),r}function lT(r,s,o){var c=s.pendingProps,d=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=r!==null&&r.memoizedState===null?!1:(un.current&2)!==0),T&&(d=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(gt){if(d?ea(s):ta(),(r=qt)?(r=gb(r,Wr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ks!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},o=Bv(r),o.return=s,s.child=o,Vn=s,qt=null)):r=null,r===null)throw Qs(s);return Ag(r)?s.lanes=32:s.lanes=536870912,null}var R=c.children;return c=c.fallback,d?(ta(),d=s.mode,R=lf({mode:"hidden",children:R},d),c=ro(c,d,o,null),R.return=s,c.return=s,R.sibling=c,s.child=R,c=s.child,c.memoizedState=Bp(o),c.childLanes=Hp(r,T,o),s.memoizedState=zp,Gc(null,c)):(ea(s),Fp(s,R))}var B=r.memoizedState;if(B!==null&&(R=B.dehydrated,R!==null)){if(g)s.flags&256?(ea(s),s.flags&=-257,s=qp(r,s,o)):s.memoizedState!==null?(ta(),s.child=r.child,s.flags|=128,s=null):(ta(),R=c.fallback,d=s.mode,c=lf({mode:"visible",children:c.children},d),R=ro(R,d,o,null),R.flags|=2,c.return=s,R.return=s,c.sibling=R,s.child=c,uo(s,r.child,null,o),c=s.child,c.memoizedState=Bp(o),c.childLanes=Hp(r,T,o),s.memoizedState=zp,s=Gc(null,c));else if(ea(s),Ag(R)){if(T=R.nextSibling&&R.nextSibling.dataset,T)var Z=T.dgst;T=Z,c=Error(i(419)),c.stack="",c.digest=T,Mc({value:c,source:null,stack:null}),s=qp(r,s,o)}else if(_n||il(r,s,o,!1),T=(o&r.childLanes)!==0,_n||T){if(T=jt,T!==null&&(c=K(T,o),c!==0&&c!==B.retryLane))throw B.retryLane=c,no(r,c),Er(T,r,c),jp;Sg(R)||yf(),s=qp(r,s,o)}else Sg(R)?(s.flags|=192,s.child=r.child,s=null):(r=B.treeContext,qt=Zr(R.nextSibling),Vn=s,gt=!0,Ys=null,Wr=!1,r!==null&&qv(s,r),s=Fp(s,c.children),s.flags|=4096);return s}return d?(ta(),R=c.fallback,d=s.mode,B=r.child,Z=B.sibling,c=Zi(B,{mode:"hidden",children:c.children}),c.subtreeFlags=B.subtreeFlags&65011712,Z!==null?R=Zi(Z,R):(R=ro(R,d,o,null),R.flags|=2),R.return=s,c.return=s,c.sibling=R,s.child=c,Gc(null,c),c=s.child,R=r.child.memoizedState,R===null?R=Bp(o):(d=R.cachePool,d!==null?(B=gn._currentValue,d=d.parent!==B?{parent:B,pool:B}:d):d=Xv(),R={baseLanes:R.baseLanes|o,cachePool:d}),c.memoizedState=R,c.childLanes=Hp(r,T,o),s.memoizedState=zp,Gc(r.child,c)):(ea(s),o=r.child,r=o.sibling,o=Zi(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=o,s.memoizedState=null,o)}function Fp(r,s){return s=lf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function lf(r,s){return r=Or(22,r,null,s),r.lanes=0,r}function qp(r,s,o){return uo(s,r.child,null,o),r=Fp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function cT(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),sp(r.return,s,o)}function Gp(r,s,o,c,d,g){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d,treeForkCount:g}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=o,T.tailMode=d,T.treeForkCount=g)}function uT(r,s,o){var c=s.pendingProps,d=c.revealOrder,g=c.tail;c=c.children;var T=un.current,R=(T&2)!==0;if(R?(T=T&1|2,s.flags|=128):T&=1,se(un,T),jn(r,s,c,o),c=gt?Oc:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&cT(r,o,s);else if(r.tag===19)cT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&Qh(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Gp(s,!1,d,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Qh(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Gp(s,!0,o,null,g,c);break;case"together":Gp(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function ss(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ia|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(il(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Zi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Zi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function $p(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Bh(r)))}function QR(r,s,o){switch(s.tag){case 3:Fe(s,s.stateNode.containerInfo),Xs(s,gn,r.memoizedState.cache),io();break;case 27:case 5:At(s);break;case 4:Fe(s,s.stateNode.containerInfo);break;case 10:Xs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,yp(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ea(s),s.flags|=128,null):(o&s.child.childLanes)!==0?lT(r,s,o):(ea(s),r=ss(r,s,o),r!==null?r.sibling:null);ea(s);break;case 19:var d=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(il(r,s,o,!1),c=(o&s.childLanes)!==0),d){if(c)return uT(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),se(un,un.current),c)break;return null;case 22:return s.lanes=0,nT(r,s,o,s.pendingProps);case 24:Xs(s,gn,r.memoizedState.cache)}return ss(r,s,o)}function hT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)_n=!0;else{if(!$p(r,o)&&(s.flags&128)===0)return _n=!1,QR(r,s,o);_n=(r.flags&131072)!==0}else _n=!1,gt&&(s.flags&1048576)!==0&&Fv(s,Oc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=lo(s.elementType),s.type=r,typeof r=="function")Wm(r)?(c=fo(r,c),s.tag=1,s=aT(null,s,r,c,o)):(s.tag=0,s=Up(null,s,r,c,o));else{if(r!=null){var d=r.$$typeof;if(d===F){s.tag=11,s=ZE(null,s,r,c,o);break e}else if(d===A){s.tag=14,s=eT(null,s,r,c,o);break e}}throw s=me(r)||r,Error(i(306,s,""))}}return s;case 0:return Up(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,d=fo(c,s.pendingProps),aT(r,s,c,d,o);case 3:e:{if(Fe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;d=g.element,fp(r,s),zc(s,c,null,o);var T=s.memoizedState;if(c=T.cache,Xs(s,gn,c),c!==g.cache&&ap(s,[gn],o,!0),Uc(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=oT(r,s,c,o);break e}else if(c!==d){d=Yr(Error(i(424)),s),Mc(d),s=oT(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(qt=Zr(r.firstChild),Vn=s,gt=!0,Ys=null,Wr=!0,o=nE(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(io(),c===d){s=ss(r,s,o);break e}jn(r,s,c,o)}s=s.child}return s;case 26:return of(r,s),r===null?(o=bb(s.type,null,s.pendingProps,null))?s.memoizedState=o:gt||(o=s.type,r=s.pendingProps,c=Af(Ae.current).createElement(o),c[ve]=s,c[Te]=r,Un(c,o,r),Bt(c),s.stateNode=c):s.memoizedState=bb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return At(s),r===null&&gt&&(c=s.stateNode=vb(s.type,s.pendingProps,Ae.current),Vn=s,Wr=!0,d=qt,ca(s.type)?(wg=d,qt=Zr(c.firstChild)):qt=d),jn(r,s,s.pendingProps.children,o),of(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&gt&&((d=c=qt)&&(c=wI(c,s.type,s.pendingProps,Wr),c!==null?(s.stateNode=c,Vn=s,qt=Zr(c.firstChild),Wr=!1,d=!0):d=!1),d||Qs(s)),At(s),d=s.type,g=s.pendingProps,T=r!==null?r.memoizedProps:null,c=g.children,Eg(d,g)?c=null:T!==null&&Eg(d,T)&&(s.flags|=32),s.memoizedState!==null&&(d=vp(r,s,zR,null,null,o),au._currentValue=d),of(r,s),jn(r,s,c,o),s.child;case 6:return r===null&&gt&&((r=o=qt)&&(o=CI(o,s.pendingProps,Wr),o!==null?(s.stateNode=o,Vn=s,qt=null,r=!0):r=!1),r||Qs(s)),null;case 13:return lT(r,s,o);case 4:return Fe(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=uo(s,null,c,o):jn(r,s,c,o),s.child;case 11:return ZE(r,s,s.type,s.pendingProps,o);case 7:return jn(r,s,s.pendingProps,o),s.child;case 8:return jn(r,s,s.pendingProps.children,o),s.child;case 12:return jn(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Xs(s,s.type,c.value),jn(r,s,c.children,o),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,ao(s),d=Ln(d),c=c(d),s.flags|=1,jn(r,s,c,o),s.child;case 14:return eT(r,s,s.type,s.pendingProps,o);case 15:return tT(r,s,s.type,s.pendingProps,o);case 19:return uT(r,s,o);case 31:return YR(r,s,o);case 22:return nT(r,s,o,s.pendingProps);case 24:return ao(s),c=Ln(gn),r===null?(d=cp(),d===null&&(d=jt,g=op(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),s.memoizedState={parent:c,cache:d},hp(s),Xs(s,gn,d)):((r.lanes&o)!==0&&(fp(r,s),zc(s,null,null,o),Uc()),d=r.memoizedState,g=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Xs(s,gn,c)):(c=g.cache,Xs(s,gn,c),c!==d.cache&&ap(s,[gn],o,!0))),jn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function as(r){r.flags|=4}function Kp(r,s,o,c,d){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(d&335544128)===d)if(r.stateNode.complete)r.flags|=8192;else if(jT())r.flags|=8192;else throw co=Gh,up}else r.flags&=-16777217}function fT(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Rb(s))if(jT())r.flags|=8192;else throw co=Gh,up}function cf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Yi():536870912,r.lanes|=s,gl|=s)}function $c(r,s){if(!gt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Gt(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function XR(r,s,o){var c=s.pendingProps;switch(tp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(s),null;case 1:return Gt(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ns(gn),ze(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(rl(s)?as(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rp())),Gt(s),null;case 26:var d=s.type,g=s.memoizedState;return r===null?(as(s),g!==null?(Gt(s),fT(s,g)):(Gt(s),Kp(s,d,null,c,o))):g?g!==r.memoizedState?(as(s),Gt(s),fT(s,g)):(Gt(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&as(s),Gt(s),Kp(s,d,r,c,o)),null;case 27:if(kt(s),o=Ae.current,d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Gt(s),null}r=he.current,rl(s)?Gv(s):(r=vb(d,c,o),s.stateNode=r,as(s))}return Gt(s),null;case 5:if(kt(s),d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Gt(s),null}if(g=he.current,rl(s))Gv(s);else{var T=Af(Ae.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?T.createElement(d,{is:c.is}):T.createElement(d)}}g[ve]=s,g[Te]=c;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=g;e:switch(Un(g,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&as(s)}}return Gt(s),Kp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&as(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Ae.current,rl(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,d=Vn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}r[ve]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||lb(r.nodeValue,o)),r||Qs(s,!0)}else r=Af(r).createTextNode(c),r[ve]=s,s.stateNode=r}return Gt(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(c=rl(s),o!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[ve]=s}else io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),r=!1}else o=rp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Pr(s),s):(Pr(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Gt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=rl(s),c!==null&&c.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[ve]=s}else io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Gt(s),d=!1}else d=rp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Pr(s),s):(Pr(s),null)}return Pr(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,r=r!==null&&r.memoizedState!==null,o&&(c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),cf(s,s.updateQueue),Gt(s),null);case 4:return ze(),r===null&&pg(s.stateNode.containerInfo),Gt(s),null;case 10:return ns(s.type),Gt(s),null;case 19:if(ie(un),c=s.memoizedState,c===null)return Gt(s),null;if(d=(s.flags&128)!==0,g=c.rendering,g===null)if(d)$c(c,!1);else{if(sn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=Qh(r),g!==null){for(s.flags|=128,$c(c,!1),r=g.updateQueue,s.updateQueue=r,cf(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)zv(o,r),o=o.sibling;return se(un,un.current&1|2),gt&&es(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&it()>mf&&(s.flags|=128,d=!0,$c(c,!1),s.lanes=4194304)}else{if(!d)if(r=Qh(g),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,cf(s,r),$c(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!gt)return Gt(s),null}else 2*it()-c.renderingStartTime>mf&&o!==536870912&&(s.flags|=128,d=!0,$c(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(r=c.last,r!==null?r.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=it(),r.sibling=null,o=un.current,se(un,d?o&1|2:o&1),gt&&es(s,c.treeForkCount),r):(Gt(s),null);case 22:case 23:return Pr(s),gp(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Gt(s),s.subtreeFlags&6&&(s.flags|=8192)):Gt(s),o=s.updateQueue,o!==null&&cf(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&ie(oo),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ns(gn),Gt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function WR(r,s){switch(tp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ns(gn),ze(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return kt(s),null;case 31:if(s.memoizedState!==null){if(Pr(s),s.alternate===null)throw Error(i(340));io()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Pr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));io()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ie(un),null;case 4:return ze(),null;case 10:return ns(s.type),null;case 22:case 23:return Pr(s),gp(),r!==null&&ie(oo),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ns(gn),null;case 25:return null;default:return null}}function dT(r,s){switch(tp(s),s.tag){case 3:ns(gn),ze();break;case 26:case 27:case 5:kt(s);break;case 4:ze();break;case 31:s.memoizedState!==null&&Pr(s);break;case 13:Pr(s);break;case 19:ie(un);break;case 10:ns(s.type);break;case 22:case 23:Pr(s),gp(),r!==null&&ie(oo);break;case 24:ns(gn)}}function Kc(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&r)===r){c=void 0;var g=o.create,T=o.inst;c=g(),T.destroy=c}o=o.next}while(o!==d)}}catch(R){It(s,s.return,R)}}function na(r,s,o){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&r)===r){var T=c.inst,R=T.destroy;if(R!==void 0){T.destroy=void 0,d=s;var B=o,Z=R;try{Z()}catch(ae){It(d,B,ae)}}}c=c.next}while(c!==g)}}catch(ae){It(s,s.return,ae)}}function mT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{iE(s,o)}catch(c){It(r,r.return,c)}}}function pT(r,s,o){o.props=fo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){It(r,s,c)}}function Yc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(d){It(r,s,d)}}function Vi(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){It(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){It(r,s,d)}else o.current=null}function gT(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){It(r,r.return,d)}}function Yp(r,s,o){try{var c=r.stateNode;vI(c,r.type,o,s),c[Te]=s}catch(d){It(r,r.return,d)}}function yT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ca(r.type)||r.tag===4}function Qp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||yT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ca(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xp(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=li));else if(c!==4&&(c===27&&ca(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Xp(r,s,o),r=r.sibling;r!==null;)Xp(r,s,o),r=r.sibling}function uf(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&ca(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(uf(r,s,o),r=r.sibling;r!==null;)uf(r,s,o),r=r.sibling}function _T(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Un(s,c,o),s[ve]=r,s[Te]=o}catch(g){It(r,r.return,g)}}var os=!1,vn=!1,Wp=!1,vT=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function JR(r,s){if(r=r.containerInfo,_g=Df,r=Dv(r),qm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,R=-1,B=-1,Z=0,ae=0,ue=r,te=null;t:for(;;){for(var re;ue!==o||d!==0&&ue.nodeType!==3||(R=T+d),ue!==g||c!==0&&ue.nodeType!==3||(B=T+c),ue.nodeType===3&&(T+=ue.nodeValue.length),(re=ue.firstChild)!==null;)te=ue,ue=re;for(;;){if(ue===r)break t;if(te===o&&++Z===d&&(R=T),te===g&&++ae===c&&(B=T),(re=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=re}o=R===-1||B===-1?null:{start:R,end:B}}else o=null}o=o||{start:0,end:0}}else o=null;for(vg={focusedElem:r,selectionRange:o},Df=!1,Nn=s;Nn!==null;)if(s=Nn,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Nn=r;else for(;Nn!==null;){switch(s=Nn,g=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)d=r[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,d=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var xe=fo(o.type,d);r=c.getSnapshotBeforeUpdate(xe,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(Ue){It(o,o.return,Ue)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)bg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Nn=r;break}Nn=s.return}}function ET(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:cs(r,o),c&4&&Kc(5,o);break;case 1:if(cs(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(T){It(o,o.return,T)}else{var d=fo(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){It(o,o.return,T)}}c&64&&mT(o),c&512&&Yc(o,o.return);break;case 3:if(cs(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{iE(r,s)}catch(T){It(o,o.return,T)}}break;case 27:s===null&&c&4&&_T(o);case 26:case 5:cs(r,o),s===null&&c&4&&gT(o),c&512&&Yc(o,o.return);break;case 12:cs(r,o);break;case 31:cs(r,o),c&4&&ST(r,o);break;case 13:cs(r,o),c&4&&AT(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=oI.bind(null,o),RI(r,o))));break;case 22:if(c=o.memoizedState!==null||os,!c){s=s!==null&&s.memoizedState!==null||vn,d=os;var g=vn;os=c,(vn=s)&&!g?us(r,o,(o.subtreeFlags&8772)!==0):cs(r,o),os=d,vn=g}break;case 30:break;default:cs(r,o)}}function TT(r){var s=r.alternate;s!==null&&(r.alternate=null,TT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ft(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Xt=null,gr=!1;function ls(r,s,o){for(o=o.child;o!==null;)bT(r,s,o),o=o.sibling}function bT(r,s,o){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Cr,o)}catch{}switch(o.tag){case 26:vn||Vi(o,s),ls(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:vn||Vi(o,s);var c=Xt,d=gr;ca(o.type)&&(Xt=o.stateNode,gr=!1),ls(r,s,o),ru(o.stateNode),Xt=c,gr=d;break;case 5:vn||Vi(o,s);case 6:if(c=Xt,d=gr,Xt=null,ls(r,s,o),Xt=c,gr=d,Xt!==null)if(gr)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(o.stateNode)}catch(g){It(o,s,g)}else try{Xt.removeChild(o.stateNode)}catch(g){It(o,s,g)}break;case 18:Xt!==null&&(gr?(r=Xt,mb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Al(r)):mb(Xt,o.stateNode));break;case 4:c=Xt,d=gr,Xt=o.stateNode.containerInfo,gr=!0,ls(r,s,o),Xt=c,gr=d;break;case 0:case 11:case 14:case 15:na(2,o,s),vn||na(4,o,s),ls(r,s,o);break;case 1:vn||(Vi(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&pT(o,s,c)),ls(r,s,o);break;case 21:ls(r,s,o);break;case 22:vn=(c=vn)||o.memoizedState!==null,ls(r,s,o),vn=c;break;default:ls(r,s,o)}}function ST(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Al(r)}catch(o){It(s,s.return,o)}}}function AT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Al(r)}catch(o){It(s,s.return,o)}}function ZR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new vT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new vT),s;default:throw Error(i(435,r.tag))}}function hf(r,s){var o=ZR(r);s.forEach(function(c){if(!o.has(c)){o.add(c);var d=lI.bind(null,r,c);c.then(d,d)}})}function yr(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],g=r,T=s,R=T;e:for(;R!==null;){switch(R.tag){case 27:if(ca(R.type)){Xt=R.stateNode,gr=!1;break e}break;case 5:Xt=R.stateNode,gr=!1;break e;case 3:case 4:Xt=R.stateNode.containerInfo,gr=!0;break e}R=R.return}if(Xt===null)throw Error(i(160));bT(g,T,d),Xt=null,gr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wT(s,r),s=s.sibling}var mi=null;function wT(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yr(s,r),_r(r),c&4&&(na(3,r,r.return),Kc(3,r),na(5,r,r.return));break;case 1:yr(s,r),_r(r),c&512&&(vn||o===null||Vi(o,o.return)),c&64&&os&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=mi;if(yr(s,r),_r(r),c&512&&(vn||o===null||Vi(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[xt]||g[ve]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),Un(g,c,o),g[ve]=r,Bt(g),c=g;break e;case"link":var T=wb("link","href",d).get(c+(o.href||""));if(T){for(var R=0;R<T.length;R++)if(g=T[R],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(R,1);break t}}g=d.createElement(c),Un(g,c,o),d.head.appendChild(g);break;case"meta":if(T=wb("meta","content",d).get(c+(o.content||""))){for(R=0;R<T.length;R++)if(g=T[R],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(R,1);break t}}g=d.createElement(c),Un(g,c,o),d.head.appendChild(g);break;default:throw Error(i(468,c))}g[ve]=r,Bt(g),c=g}r.stateNode=c}else Cb(d,r.type,r.stateNode);else r.stateNode=Ab(d,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?Cb(d,r.type,r.stateNode):Ab(d,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Yp(r,r.memoizedProps,o.memoizedProps)}break;case 27:yr(s,r),_r(r),c&512&&(vn||o===null||Vi(o,o.return)),o!==null&&c&4&&Yp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(yr(s,r),_r(r),c&512&&(vn||o===null||Vi(o,o.return)),r.flags&32){d=r.stateNode;try{pr(d,"")}catch(xe){It(r,r.return,xe)}}c&4&&r.stateNode!=null&&(d=r.memoizedProps,Yp(r,d,o!==null?o.memoizedProps:d)),c&1024&&(Wp=!0);break;case 6:if(yr(s,r),_r(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(xe){It(r,r.return,xe)}}break;case 3:if(Rf=null,d=mi,mi=wf(s.containerInfo),yr(s,r),mi=d,_r(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Al(s.containerInfo)}catch(xe){It(r,r.return,xe)}Wp&&(Wp=!1,CT(r));break;case 4:c=mi,mi=wf(r.stateNode.containerInfo),yr(s,r),_r(r),mi=c;break;case 12:yr(s,r),_r(r);break;case 31:yr(s,r),_r(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 13:yr(s,r),_r(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(df=it()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 22:d=r.memoizedState!==null;var B=o!==null&&o.memoizedState!==null,Z=os,ae=vn;if(os=Z||d,vn=ae||B,yr(s,r),vn=ae,os=Z,_r(r),c&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||B||os||vn||mo(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){B=o=s;try{if(g=B.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{R=B.stateNode;var ue=B.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;R.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(xe){It(B,B.return,xe)}}}else if(s.tag===6){if(o===null){B=s;try{B.stateNode.nodeValue=d?"":B.memoizedProps}catch(xe){It(B,B.return,xe)}}}else if(s.tag===18){if(o===null){B=s;try{var re=B.stateNode;d?pb(re,!0):pb(B.stateNode,!1)}catch(xe){It(B,B.return,xe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,hf(r,o))));break;case 19:yr(s,r),_r(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 30:break;case 21:break;default:yr(s,r),_r(r)}}function _r(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(yT(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=Qp(r);uf(r,g,d);break;case 5:var T=o.stateNode;o.flags&32&&(pr(T,""),o.flags&=-33);var R=Qp(r);uf(r,R,T);break;case 3:case 4:var B=o.stateNode.containerInfo,Z=Qp(r);Xp(r,Z,B);break;default:throw Error(i(161))}}catch(ae){It(r,r.return,ae)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function CT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;CT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function cs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ET(r,s.alternate,s),s=s.sibling}function mo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:na(4,s,s.return),mo(s);break;case 1:Vi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&pT(s,s.return,o),mo(s);break;case 27:ru(s.stateNode);case 26:case 5:Vi(s,s.return),mo(s);break;case 22:s.memoizedState===null&&mo(s);break;case 30:mo(s);break;default:mo(s)}r=r.sibling}}function us(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=r,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:us(d,g,o),Kc(4,g);break;case 1:if(us(d,g,o),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Z){It(c,c.return,Z)}if(c=g,d=c.updateQueue,d!==null){var R=c.stateNode;try{var B=d.shared.hiddenCallbacks;if(B!==null)for(d.shared.hiddenCallbacks=null,d=0;d<B.length;d++)rE(B[d],R)}catch(Z){It(c,c.return,Z)}}o&&T&64&&mT(g),Yc(g,g.return);break;case 27:_T(g);case 26:case 5:us(d,g,o),o&&c===null&&T&4&&gT(g),Yc(g,g.return);break;case 12:us(d,g,o);break;case 31:us(d,g,o),o&&T&4&&ST(d,g);break;case 13:us(d,g,o),o&&T&4&&AT(d,g);break;case 22:g.memoizedState===null&&us(d,g,o),Yc(g,g.return);break;case 30:break;default:us(d,g,o)}s=s.sibling}}function Jp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Pc(o))}function Zp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Pc(r))}function pi(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)RT(r,s,o,c),s=s.sibling}function RT(r,s,o,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:pi(r,s,o,c),d&2048&&Kc(9,s);break;case 1:pi(r,s,o,c);break;case 3:pi(r,s,o,c),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Pc(r)));break;case 12:if(d&2048){pi(r,s,o,c),r=s.stateNode;try{var g=s.memoizedProps,T=g.id,R=g.onPostCommit;typeof R=="function"&&R(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){It(s,s.return,B)}}else pi(r,s,o,c);break;case 31:pi(r,s,o,c);break;case 13:pi(r,s,o,c);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?pi(r,s,o,c):Qc(r,s):g._visibility&2?pi(r,s,o,c):(g._visibility|=2,dl(r,s,o,c,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Jp(T,s);break;case 24:pi(r,s,o,c),d&2048&&Zp(s.alternate,s);break;default:pi(r,s,o,c)}}function dl(r,s,o,c,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=r,T=s,R=o,B=c,Z=T.flags;switch(T.tag){case 0:case 11:case 15:dl(g,T,R,B,d),Kc(8,T);break;case 23:break;case 22:var ae=T.stateNode;T.memoizedState!==null?ae._visibility&2?dl(g,T,R,B,d):Qc(g,T):(ae._visibility|=2,dl(g,T,R,B,d)),d&&Z&2048&&Jp(T.alternate,T);break;case 24:dl(g,T,R,B,d),d&&Z&2048&&Zp(T.alternate,T);break;default:dl(g,T,R,B,d)}s=s.sibling}}function Qc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,d=c.flags;switch(c.tag){case 22:Qc(o,c),d&2048&&Jp(c.alternate,c);break;case 24:Qc(o,c),d&2048&&Zp(c.alternate,c);break;default:Qc(o,c)}s=s.sibling}}var Xc=8192;function ml(r,s,o){if(r.subtreeFlags&Xc)for(r=r.child;r!==null;)IT(r,s,o),r=r.sibling}function IT(r,s,o){switch(r.tag){case 26:ml(r,s,o),r.flags&Xc&&r.memoizedState!==null&&UI(o,mi,r.memoizedState,r.memoizedProps);break;case 5:ml(r,s,o);break;case 3:case 4:var c=mi;mi=wf(r.stateNode.containerInfo),ml(r,s,o),mi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Xc,Xc=16777216,ml(r,s,o),Xc=c):ml(r,s,o));break;default:ml(r,s,o)}}function xT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Wc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Nn=c,DT(c,r)}xT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)NT(r),r=r.sibling}function NT(r){switch(r.tag){case 0:case 11:case 15:Wc(r),r.flags&2048&&na(9,r,r.return);break;case 3:Wc(r);break;case 12:Wc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ff(r)):Wc(r);break;default:Wc(r)}}function ff(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];Nn=c,DT(c,r)}xT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:na(8,s,s.return),ff(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ff(s));break;default:ff(s)}r=r.sibling}}function DT(r,s){for(;Nn!==null;){var o=Nn;switch(o.tag){case 0:case 11:case 15:na(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,Nn=c;else e:for(o=r;Nn!==null;){c=Nn;var d=c.sibling,g=c.return;if(TT(c),c===o){Nn=null;break e}if(d!==null){d.return=g,Nn=d;break e}Nn=g}}}var eI={getCacheForType:function(r){var s=Ln(gn),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return Ln(gn).controller.signal}},tI=typeof WeakMap=="function"?WeakMap:Map,St=0,jt=null,ct=null,ht=0,Rt=0,kr=null,ra=!1,pl=!1,eg=!1,hs=0,sn=0,ia=0,po=0,tg=0,Vr=0,gl=0,Jc=null,vr=null,ng=!1,df=0,OT=0,mf=1/0,pf=null,sa=null,wn=0,aa=null,yl=null,fs=0,rg=0,ig=null,MT=null,Zc=0,sg=null;function Lr(){return(St&2)!==0&&ht!==0?ht&-ht:G.T!==null?hg():_e()}function PT(){if(Vr===0)if((ht&536870912)===0||gt){var r=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),Vr=r}else Vr=536870912;return r=Mr.current,r!==null&&(r.flags|=32),Vr}function Er(r,s,o){(r===jt&&(Rt===2||Rt===9)||r.cancelPendingCommit!==null)&&(_l(r,0),oa(r,ht,Vr,!1)),Ai(r,o),((St&2)===0||r!==jt)&&(r===jt&&((St&2)===0&&(po|=o),sn===4&&oa(r,ht,Vr,!1)),Li(r))}function kT(r,s,o){if((St&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Ir(r,s),d=c?iI(r,s):og(r,s,!0),g=c;do{if(d===0){pl&&!c&&oa(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!nI(o)){d=og(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var R=r;d=Jc;var B=R.current.memoizedState.isDehydrated;if(B&&(_l(R,T).flags|=256),T=og(R,T,!1),T!==2){if(eg&&!B){R.errorRecoveryDisabledLanes|=g,po|=g,d=4;break e}g=vr,vr=d,g!==null&&(vr===null?vr=g:vr.push.apply(vr,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){_l(r,0),oa(r,s,0,!0);break}e:{switch(c=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:oa(c,s,Vr,!ra);break e;case 2:vr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=df+300-it(),10<d)){if(oa(c,s,Vr,!ra),Rr(c,0,!0)!==0)break e;fs=s,c.timeoutHandle=fb(VT.bind(null,c,o,vr,pf,ng,s,Vr,po,gl,ra,g,"Throttled",-0,0),d);break e}VT(c,o,vr,pf,ng,s,Vr,po,gl,ra,g,null,-0,0)}}break}while(!0);Li(r)}function VT(r,s,o,c,d,g,T,R,B,Z,ae,ue,te,re){if(r.timeoutHandle=-1,ue=s.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},IT(s,g,ue);var xe=(g&62914560)===g?df-it():(g&4194048)===g?OT-it():0;if(xe=zI(ue,xe),xe!==null){fs=g,r.cancelPendingCommit=xe(qT.bind(null,r,s,g,o,c,d,T,R,B,ae,ue,null,te,re)),oa(r,g,T,!Z);return}}qT(r,s,g,o,c,d,T,R,B)}function nI(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],g=d.getSnapshot;d=d.value;try{if(!Dr(g(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function oa(r,s,o,c){s&=~tg,s&=~po,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var d=s;0<d;){var g=31-Kt(d),T=1<<g;c[g]=-1,d&=~T}o!==0&&Qi(r,o,s)}function gf(){return(St&6)===0?(eu(0),!1):!0}function ag(){if(ct!==null){if(Rt===0)var r=ct.return;else r=ct,ts=so=null,bp(r),ll=null,Vc=0,r=ct;for(;r!==null;)dT(r.alternate,r),r=r.return;ct=null}}function _l(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,bI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),fs=0,ag(),jt=r,ct=o=Zi(r.current,null),ht=s,Rt=0,kr=null,ra=!1,pl=Ir(r,s),eg=!1,gl=Vr=tg=po=ia=sn=0,vr=Jc=null,ng=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var d=31-Kt(c),g=1<<d;s|=r[d],c&=~g}return hs=s,Vh(),o}function LT(r,s){et=null,G.H=qc,s===ol||s===qh?(s=Zv(),Rt=3):s===up?(s=Zv(),Rt=4):Rt=s===jp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kr=s,ct===null&&(sn=1,sf(r,Yr(s,r.current)))}function jT(){var r=Mr.current;return r===null?!0:(ht&4194048)===ht?Jr===null:(ht&62914560)===ht||(ht&536870912)!==0?r===Jr:!1}function UT(){var r=G.H;return G.H=qc,r===null?qc:r}function zT(){var r=G.A;return G.A=eI,r}function yf(){sn=4,ra||(ht&4194048)!==ht&&Mr.current!==null||(pl=!0),(ia&134217727)===0&&(po&134217727)===0||jt===null||oa(jt,ht,Vr,!1)}function og(r,s,o){var c=St;St|=2;var d=UT(),g=zT();(jt!==r||ht!==s)&&(pf=null,_l(r,s)),s=!1;var T=sn;e:do try{if(Rt!==0&&ct!==null){var R=ct,B=kr;switch(Rt){case 8:ag(),T=6;break e;case 3:case 2:case 9:case 6:Mr.current===null&&(s=!0);var Z=Rt;if(Rt=0,kr=null,vl(r,R,B,Z),o&&pl){T=0;break e}break;default:Z=Rt,Rt=0,kr=null,vl(r,R,B,Z)}}rI(),T=sn;break}catch(ae){LT(r,ae)}while(!0);return s&&r.shellSuspendCounter++,ts=so=null,St=c,G.H=d,G.A=g,ct===null&&(jt=null,ht=0,Vh()),T}function rI(){for(;ct!==null;)BT(ct)}function iI(r,s){var o=St;St|=2;var c=UT(),d=zT();jt!==r||ht!==s?(pf=null,mf=it()+500,_l(r,s)):pl=Ir(r,s);e:do try{if(Rt!==0&&ct!==null){s=ct;var g=kr;t:switch(Rt){case 1:Rt=0,kr=null,vl(r,s,g,1);break;case 2:case 9:if(Wv(g)){Rt=0,kr=null,HT(s);break}s=function(){Rt!==2&&Rt!==9||jt!==r||(Rt=7),Li(r)},g.then(s,s);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Wv(g)?(Rt=0,kr=null,HT(s)):(Rt=0,kr=null,vl(r,s,g,7));break;case 5:var T=null;switch(ct.tag){case 26:T=ct.memoizedState;case 5:case 27:var R=ct;if(T?Rb(T):R.stateNode.complete){Rt=0,kr=null;var B=R.sibling;if(B!==null)ct=B;else{var Z=R.return;Z!==null?(ct=Z,_f(Z)):ct=null}break t}}Rt=0,kr=null,vl(r,s,g,5);break;case 6:Rt=0,kr=null,vl(r,s,g,6);break;case 8:ag(),sn=6;break e;default:throw Error(i(462))}}sI();break}catch(ae){LT(r,ae)}while(!0);return ts=so=null,G.H=c,G.A=d,St=o,ct!==null?0:(jt=null,ht=0,Vh(),sn)}function sI(){for(;ct!==null&&!hr();)BT(ct)}function BT(r){var s=hT(r.alternate,r,hs);r.memoizedProps=r.pendingProps,s===null?_f(r):ct=s}function HT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=sT(o,s,s.pendingProps,s.type,void 0,ht);break;case 11:s=sT(o,s,s.pendingProps,s.type.render,s.ref,ht);break;case 5:bp(s);default:dT(o,s),s=ct=zv(s,hs),s=hT(o,s,hs)}r.memoizedProps=r.pendingProps,s===null?_f(r):ct=s}function vl(r,s,o,c){ts=so=null,bp(s),ll=null,Vc=0;var d=s.return;try{if(KR(r,d,s,o,ht)){sn=1,sf(r,Yr(o,r.current)),ct=null;return}}catch(g){if(d!==null)throw ct=d,g;sn=1,sf(r,Yr(o,r.current)),ct=null;return}s.flags&32768?(gt||c===1?r=!0:pl||(ht&536870912)!==0?r=!1:(ra=r=!0,(c===2||c===9||c===3||c===6)&&(c=Mr.current,c!==null&&c.tag===13&&(c.flags|=16384))),FT(s,r)):_f(s)}function _f(r){var s=r;do{if((s.flags&32768)!==0){FT(s,ra);return}r=s.return;var o=XR(s.alternate,s,hs);if(o!==null){ct=o;return}if(s=s.sibling,s!==null){ct=s;return}ct=s=r}while(s!==null);sn===0&&(sn=5)}function FT(r,s){do{var o=WR(r.alternate,r);if(o!==null){o.flags&=32767,ct=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){ct=r;return}ct=r=o}while(r!==null);sn=6,ct=null}function qT(r,s,o,c,d,g,T,R,B){r.cancelPendingCommit=null;do vf();while(wn!==0);if((St&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Qm,_c(r,o,g,T,R,B),r===jt&&(ct=jt=null,ht=0),yl=s,aa=r,fs=o,rg=g,ig=d,MT=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,cI(ln,function(){return QT(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=G.T,G.T=null,d=oe.p,oe.p=2,T=St,St|=4;try{JR(r,s,o)}finally{St=T,oe.p=d,G.T=c}}wn=1,GT(),$T(),KT()}}function GT(){if(wn===1){wn=0;var r=aa,s=yl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var c=oe.p;oe.p=2;var d=St;St|=4;try{wT(s,r);var g=vg,T=Dv(r.containerInfo),R=g.focusedElem,B=g.selectionRange;if(T!==R&&R&&R.ownerDocument&&Nv(R.ownerDocument.documentElement,R)){if(B!==null&&qm(R)){var Z=B.start,ae=B.end;if(ae===void 0&&(ae=Z),"selectionStart"in R)R.selectionStart=Z,R.selectionEnd=Math.min(ae,R.value.length);else{var ue=R.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var re=te.getSelection(),xe=R.textContent.length,Ue=Math.min(B.start,xe),Pt=B.end===void 0?Ue:Math.min(B.end,xe);!re.extend&&Ue>Pt&&(T=Pt,Pt=Ue,Ue=T);var Q=xv(R,Ue),$=xv(R,Pt);if(Q&&$&&(re.rangeCount!==1||re.anchorNode!==Q.node||re.anchorOffset!==Q.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var J=ue.createRange();J.setStart(Q.node,Q.offset),re.removeAllRanges(),Ue>Pt?(re.addRange(J),re.extend($.node,$.offset)):(J.setEnd($.node,$.offset),re.addRange(J))}}}}for(ue=[],re=R;re=re.parentNode;)re.nodeType===1&&ue.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ue.length;R++){var le=ue[R];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Df=!!_g,vg=_g=null}finally{St=d,oe.p=c,G.T=o}}r.current=s,wn=2}}function $T(){if(wn===2){wn=0;var r=aa,s=yl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var c=oe.p;oe.p=2;var d=St;St|=4;try{ET(r,s.alternate,s)}finally{St=d,oe.p=c,G.T=o}}wn=3}}function KT(){if(wn===4||wn===3){wn=0,mn();var r=aa,s=yl,o=fs,c=MT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?wn=5:(wn=0,yl=aa=null,YT(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(sa=null),pe(o),s=s.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Cr,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=G.T,d=oe.p,oe.p=2,G.T=null;try{for(var g=r.onRecoverableError,T=0;T<c.length;T++){var R=c[T];g(R.value,{componentStack:R.stack})}}finally{G.T=s,oe.p=d}}(fs&3)!==0&&vf(),Li(r),d=r.pendingLanes,(o&261930)!==0&&(d&42)!==0?r===sg?Zc++:(Zc=0,sg=r):Zc=0,eu(0)}}function YT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Pc(s)))}function vf(){return GT(),$T(),KT(),QT()}function QT(){if(wn!==5)return!1;var r=aa,s=rg;rg=0;var o=pe(fs),c=G.T,d=oe.p;try{oe.p=32>o?32:o,G.T=null,o=ig,ig=null;var g=aa,T=fs;if(wn=0,yl=aa=null,fs=0,(St&6)!==0)throw Error(i(331));var R=St;if(St|=4,NT(g.current),RT(g,g.current,T,o),St=R,eu(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Cr,g)}catch{}return!0}finally{oe.p=d,G.T=c,YT(r,s)}}function XT(r,s,o){s=Yr(o,s),s=Lp(r.stateNode,s,2),r=Zs(r,s,2),r!==null&&(Ai(r,2),Li(r))}function It(r,s,o){if(r.tag===3)XT(r,r,o);else for(;s!==null;){if(s.tag===3){XT(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(sa===null||!sa.has(c))){r=Yr(o,r),o=WE(2),c=Zs(s,o,2),c!==null&&(JE(o,c,s,r),Ai(c,2),Li(c));break}}s=s.return}}function lg(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new tI;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(o)||(eg=!0,d.add(o),r=aI.bind(null,r,s,o),s.then(r,r))}function aI(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,jt===r&&(ht&o)===o&&(sn===4||sn===3&&(ht&62914560)===ht&&300>it()-df?(St&2)===0&&_l(r,0):tg|=o,gl===ht&&(gl=0)),Li(r)}function WT(r,s){s===0&&(s=Yi()),r=no(r,s),r!==null&&(Ai(r,s),Li(r))}function oI(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),WT(r,o)}function lI(r,s){var o=0;switch(r.tag){case 31:case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),WT(r,o)}function cI(r,s){return Ge(r,s)}var Ef=null,El=null,cg=!1,Tf=!1,ug=!1,la=0;function Li(r){r!==El&&r.next===null&&(El===null?Ef=El=r:El=El.next=r),Tf=!0,cg||(cg=!0,hI())}function eu(r,s){if(!ug&&Tf){ug=!0;do for(var o=!1,c=Ef;c!==null;){if(r!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var T=c.suspendedLanes,R=c.pingedLanes;g=(1<<31-Kt(42|r)+1)-1,g&=d&~(T&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,tb(c,g))}else g=ht,g=Rr(c,c===jt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Ir(c,g)||(o=!0,tb(c,g));c=c.next}while(o);ug=!1}}function uI(){JT()}function JT(){Tf=cg=!1;var r=0;la!==0&&TI()&&(r=la);for(var s=it(),o=null,c=Ef;c!==null;){var d=c.next,g=ZT(c,s);g===0?(c.next=null,o===null?Ef=d:o.next=d,d===null&&(El=o)):(o=c,(r!==0||(g&3)!==0)&&(Tf=!0)),c=d}wn!==0&&wn!==5||eu(r),la!==0&&(la=0)}function ZT(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var T=31-Kt(g),R=1<<T,B=d[T];B===-1?((R&o)===0||(R&c)!==0)&&(d[T]=Bo(R,s)):B<=s&&(r.expiredLanes|=R),g&=~R}if(s=jt,o=ht,o=Rr(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(Rt===2||Rt===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Vt(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ir(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&Vt(c),pe(o)){case 2:case 8:o=Hr;break;case 32:o=ln;break;case 268435456:o=nr;break;default:o=ln}return c=eb.bind(null,r),o=Ge(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&Vt(c),r.callbackPriority=2,r.callbackNode=null,2}function eb(r,s){if(wn!==0&&wn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(vf()&&r.callbackNode!==o)return null;var c=ht;return c=Rr(r,r===jt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(kT(r,c,s),ZT(r,it()),r.callbackNode!=null&&r.callbackNode===o?eb.bind(null,r):null)}function tb(r,s){if(vf())return null;kT(r,s,!0)}function hI(){SI(function(){(St&6)!==0?Ge(Pn,uI):JT()})}function hg(){if(la===0){var r=sl;r===0&&(r=ir,ir<<=1,(ir&261888)===0&&(ir=256)),la=r}return la}function nb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:qo(""+r)}function rb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function fI(r,s,o,c,d){if(s==="submit"&&o&&o.stateNode===d){var g=nb((d[Te]||null).action),T=c.submitter;T&&(s=(s=T[Te]||null)?nb(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var R=new Ni("action","action",null,c,d);r.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(la!==0){var B=T?rb(d,T):new FormData(d);Dp(o,{pending:!0,data:B,method:d.method,action:g},null,B)}}else typeof g=="function"&&(R.preventDefault(),B=T?rb(d,T):new FormData(d),Dp(o,{pending:!0,data:B,method:d.method,action:g},g,B))},currentTarget:d}]})}}for(var fg=0;fg<Ym.length;fg++){var dg=Ym[fg],dI=dg.toLowerCase(),mI=dg[0].toUpperCase()+dg.slice(1);di(dI,"on"+mI)}di(Pv,"onAnimationEnd"),di(kv,"onAnimationIteration"),di(Vv,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(NR,"onTransitionRun"),di(DR,"onTransitionStart"),di(OR,"onTransitionCancel"),di(Lv,"onTransitionEnd"),Kn("onMouseEnter",["mouseout","mouseover"]),Kn("onMouseLeave",["mouseout","mouseover"]),Kn("onPointerEnter",["pointerout","pointerover"]),Kn("onPointerLeave",["pointerout","pointerover"]),dr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dr("onBeforeInput",["compositionend","keypress","textInput","paste"]),dr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function ib(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var R=c[T],B=R.instance,Z=R.currentTarget;if(R=R.listener,B!==g&&d.isPropagationStopped())break e;g=R,d.currentTarget=Z;try{g(d)}catch(ae){kh(ae)}d.currentTarget=null,g=B}else for(T=0;T<c.length;T++){if(R=c[T],B=R.instance,Z=R.currentTarget,R=R.listener,B!==g&&d.isPropagationStopped())break e;g=R,d.currentTarget=Z;try{g(d)}catch(ae){kh(ae)}d.currentTarget=null,g=B}}}}function ut(r,s){var o=s[Be];o===void 0&&(o=s[Be]=new Set);var c=r+"__bubble";o.has(c)||(sb(s,r,2,!1),o.add(c))}function mg(r,s,o){var c=0;s&&(c|=4),sb(o,r,c,s)}var bf="_reactListening"+Math.random().toString(36).slice(2);function pg(r){if(!r[bf]){r[bf]=!0,fr.forEach(function(o){o!=="selectionchange"&&(pI.has(o)||mg(o,!1,r),mg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[bf]||(s[bf]=!0,mg("selectionchange",!1,s))}}function sb(r,s,o,c){switch(Pb(s)){case 2:var d=FI;break;case 8:d=qI;break;default:d=Ng}o=d.bind(null,s,o,r),d=void 0,!Ya||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function gg(r,s,o,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var R=c.stateNode.containerInfo;if(R===d)break;if(T===4)for(T=c.return;T!==null;){var B=T.tag;if((B===3||B===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;R!==null;){if(T=Ut(R),T===null)return;if(B=T.tag,B===5||B===6||B===26||B===27){c=g=T;continue e}R=R.parentNode}}c=c.return}Fs(function(){var Z=g,ae=qr(o),ue=[];e:{var te=jv.get(r);if(te!==void 0){var re=Ni,xe=r;switch(r){case"keypress":if(Xa(o)===0)break e;case"keydown":case"keyup":re=Oh;break;case"focusin":xe="focus",re=Ja;break;case"focusout":xe="blur",re=Ja;break;case"beforeblur":case"afterblur":re=Ja;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=_;break;case Pv:case kv:case Vv:re=wh;break;case Lv:re=N;break;case"scroll":case"scrollend":re=wc;break;case"wheel":re=ne;break;case"copy":case"cut":case"paste":re=Ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Ji;break;case"toggle":case"beforetoggle":re=Ze}var Ue=(s&4)!==0,Pt=!Ue&&(r==="scroll"||r==="scrollend"),Q=Ue?te!==null?te+"Capture":null:te;Ue=[];for(var $=Z,J;$!==null;){var le=$;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||Q===null||(le=ci($,Q),le!=null&&Ue.push(nu($,le,J))),Pt)break;$=$.return}0<Ue.length&&(te=new re(te,xe,null,o,ae),ue.push({event:te,listeners:Ue}))}}if((s&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",re=r==="mouseout"||r==="pointerout",te&&o!==bc&&(xe=o.relatedTarget||o.fromElement)&&(Ut(xe)||xe[Re]))break e;if((re||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,re?(xe=o.relatedTarget||o.toElement,re=Z,xe=xe?Ut(xe):null,xe!==null&&(Pt=l(xe),Ue=xe.tag,xe!==Pt||Ue!==5&&Ue!==27&&Ue!==6)&&(xe=null)):(re=null,xe=Z),re!==xe)){if(Ue=Cc,le="onMouseLeave",Q="onMouseEnter",$="mouse",(r==="pointerout"||r==="pointerover")&&(Ue=Ji,le="onPointerLeave",Q="onPointerEnter",$="pointer"),Pt=re==null?te:zt(re),J=xe==null?te:zt(xe),te=new Ue(le,$+"leave",re,o,ae),te.target=Pt,te.relatedTarget=J,le=null,Ut(ae)===Z&&(Ue=new Ue(Q,$+"enter",xe,o,ae),Ue.target=J,Ue.relatedTarget=Pt,le=Ue),Pt=le,re&&xe)t:{for(Ue=gI,Q=re,$=xe,J=0,le=Q;le;le=Ue(le))J++;le=0;for(var Le=$;Le;Le=Ue(Le))le++;for(;0<J-le;)Q=Ue(Q),J--;for(;0<le-J;)$=Ue($),le--;for(;J--;){if(Q===$||$!==null&&Q===$.alternate){Ue=Q;break t}Q=Ue(Q),$=Ue($)}Ue=null}else Ue=null;re!==null&&ab(ue,te,re,Ue,!1),xe!==null&&Pt!==null&&ab(ue,Pt,xe,Ue,!0)}}e:{if(te=Z?zt(Z):window,re=te.nodeName&&te.nodeName.toLowerCase(),re==="select"||re==="input"&&te.type==="file")var _t=Sv;else if(Tv(te))if(Av)_t=RR;else{_t=wR;var Oe=AR}else re=te.nodeName,!re||re.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Fo(Z.elementType)&&(_t=Sv):_t=CR;if(_t&&(_t=_t(r,Z))){bv(ue,_t,o,ae);break e}Oe&&Oe(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&vc(te,"number",te.value)}switch(Oe=Z?zt(Z):window,r){case"focusin":(Tv(Oe)||Oe.contentEditable==="true")&&(Wo=Oe,Gm=Z,Dc=null);break;case"focusout":Dc=Gm=Wo=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Ov(ue,o,ae);break;case"selectionchange":if(xR)break;case"keydown":case"keyup":Ov(ue,o,ae)}var rt;if(bt)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Xo?Za(r,o)&&(ft="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(Mi&&o.locale!=="ko"&&(Xo||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Xo&&(rt=Ac()):(xi=ae,Sc="value"in xi?xi.value:xi.textContent,Xo=!0)),Oe=Sf(Z,ft),0<Oe.length&&(ft=new Oi(ft,r,null,o,ae),ue.push({event:ft,listeners:Oe}),rt?ft.data=rt:(rt=Qo(o),rt!==null&&(ft.data=rt)))),(rt=$r?ER(r,o):TR(r,o))&&(ft=Sf(Z,"onBeforeInput"),0<ft.length&&(Oe=new Oi("onBeforeInput","beforeinput",null,o,ae),ue.push({event:Oe,listeners:ft}),Oe.data=rt)),fI(ue,r,Z,o,ae)}ib(ue,s)})}function nu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Sf(r,s){for(var o=s+"Capture",c=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=ci(r,o),d!=null&&c.unshift(nu(r,d,g)),d=ci(r,s),d!=null&&c.push(nu(r,d,g))),r.tag===3)return c;r=r.return}return[]}function gI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ab(r,s,o,c,d){for(var g=s._reactName,T=[];o!==null&&o!==c;){var R=o,B=R.alternate,Z=R.stateNode;if(R=R.tag,B!==null&&B===c)break;R!==5&&R!==26&&R!==27||Z===null||(B=Z,d?(Z=ci(o,g),Z!=null&&T.unshift(nu(o,Z,B))):d||(Z=ci(o,g),Z!=null&&T.push(nu(o,Z,B)))),o=o.return}T.length!==0&&r.push({event:s,listeners:T})}var yI=/\r\n?/g,_I=/\u0000|\uFFFD/g;function ob(r){return(typeof r=="string"?r:""+r).replace(yI,`
`).replace(_I,"")}function lb(r,s){return s=ob(s),ob(r)===s}function Mt(r,s,o,c,d,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||pr(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&pr(r,""+c);break;case"className":pn(r,"class",c);break;case"tabIndex":pn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":pn(r,o,c);break;case"style":Tc(r,c,g);break;case"data":if(s!=="object"){pn(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=qo(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Mt(r,s,"name",d.name,d,null),Mt(r,s,"formEncType",d.formEncType,d,null),Mt(r,s,"formMethod",d.formMethod,d,null),Mt(r,s,"formTarget",d.formTarget,d,null)):(Mt(r,s,"encType",d.encType,d,null),Mt(r,s,"method",d.method,d,null),Mt(r,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=qo(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=li);break;case"onScroll":c!=null&&ut("scroll",r);break;case"onScrollEnd":c!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=qo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":ut("beforetoggle",r),ut("toggle",r),Zt(r,"popover",c);break;case"xlinkActuate":Nt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Nt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Nt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Nt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Nt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Nt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Zt(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bh.get(o)||o,Zt(r,o,c))}}function yg(r,s,o,c,d,g){switch(o){case"style":Tc(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?pr(r,c):(typeof c=="number"||typeof c=="bigint")&&pr(r,""+c);break;case"onScroll":c!=null&&ut("scroll",r);break;case"onScrollEnd":c!=null&&ut("scrollend",r);break;case"onClick":c!=null&&(r.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$n.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),g=r[Te]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,d);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Zt(r,o,c)}}}function Un(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var c=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Mt(r,s,g,T,o,null)}}d&&Mt(r,s,"srcSet",o.srcSet,o,null),c&&Mt(r,s,"src",o.src,o,null);return;case"input":ut("invalid",r);var R=g=T=d=null,B=null,Z=null;for(c in o)if(o.hasOwnProperty(c)){var ae=o[c];if(ae!=null)switch(c){case"name":d=ae;break;case"type":T=ae;break;case"checked":B=ae;break;case"defaultChecked":Z=ae;break;case"value":g=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,s));break;default:Mt(r,s,c,ae,o,null)}}vh(r,g,R,B,Z,T,d,!1);return;case"select":ut("invalid",r),c=T=g=null;for(d in o)if(o.hasOwnProperty(d)&&(R=o[d],R!=null))switch(d){case"value":g=R;break;case"defaultValue":T=R;break;case"multiple":c=R;default:Mt(r,s,d,R,o,null)}s=g,o=T,r.multiple=!!c,s!=null?Us(r,!!c,s,!1):o!=null&&Us(r,!!c,o,!0);return;case"textarea":ut("invalid",r),g=d=c=null;for(T in o)if(o.hasOwnProperty(T)&&(R=o[T],R!=null))switch(T){case"value":c=R;break;case"defaultValue":d=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:Mt(r,s,T,R,o,null)}zs(r,c,d,g);return;case"option":for(B in o)if(o.hasOwnProperty(B)&&(c=o[B],c!=null))switch(B){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Mt(r,s,B,c,o,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(c=0;c<tu.length;c++)ut(tu[c],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(c=o[Z],c!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Mt(r,s,Z,c,o,null)}return;default:if(Fo(s)){for(ae in o)o.hasOwnProperty(ae)&&(c=o[ae],c!==void 0&&yg(r,s,ae,c,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(c=o[R],c!=null&&Mt(r,s,R,c,o,null))}function vI(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,R=null,B=null,Z=null,ae=null;for(re in o){var ue=o[re];if(o.hasOwnProperty(re)&&ue!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":B=ue;default:c.hasOwnProperty(re)||Mt(r,s,re,null,c,ue)}}for(var te in c){var re=c[te];if(ue=o[te],c.hasOwnProperty(te)&&(re!=null||ue!=null))switch(te){case"type":g=re;break;case"name":d=re;break;case"checked":Z=re;break;case"defaultChecked":ae=re;break;case"value":T=re;break;case"defaultValue":R=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:re!==ue&&Mt(r,s,te,re,c,ue)}}Ho(r,T,R,B,Z,ae,g,d);return;case"select":re=T=R=te=null;for(g in o)if(B=o[g],o.hasOwnProperty(g)&&B!=null)switch(g){case"value":break;case"multiple":re=B;default:c.hasOwnProperty(g)||Mt(r,s,g,null,c,B)}for(d in c)if(g=c[d],B=o[d],c.hasOwnProperty(d)&&(g!=null||B!=null))switch(d){case"value":te=g;break;case"defaultValue":R=g;break;case"multiple":T=g;default:g!==B&&Mt(r,s,d,g,c,B)}s=R,o=T,c=re,te!=null?Us(r,!!o,te,!1):!!c!=!!o&&(s!=null?Us(r,!!o,s,!0):Us(r,!!o,o?[]:"",!1));return;case"textarea":re=te=null;for(R in o)if(d=o[R],o.hasOwnProperty(R)&&d!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Mt(r,s,R,null,c,d)}for(T in c)if(d=c[T],g=o[T],c.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":te=d;break;case"defaultValue":re=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&Mt(r,s,T,d,c,g)}Eh(r,te,re);return;case"option":for(var xe in o)if(te=o[xe],o.hasOwnProperty(xe)&&te!=null&&!c.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:Mt(r,s,xe,null,c,te)}for(B in c)if(te=c[B],re=o[B],c.hasOwnProperty(B)&&te!==re&&(te!=null||re!=null))switch(B){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Mt(r,s,B,te,c,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in o)te=o[Ue],o.hasOwnProperty(Ue)&&te!=null&&!c.hasOwnProperty(Ue)&&Mt(r,s,Ue,null,c,te);for(Z in c)if(te=c[Z],re=o[Z],c.hasOwnProperty(Z)&&te!==re&&(te!=null||re!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,s));break;default:Mt(r,s,Z,te,c,re)}return;default:if(Fo(s)){for(var Pt in o)te=o[Pt],o.hasOwnProperty(Pt)&&te!==void 0&&!c.hasOwnProperty(Pt)&&yg(r,s,Pt,void 0,c,te);for(ae in c)te=c[ae],re=o[ae],!c.hasOwnProperty(ae)||te===re||te===void 0&&re===void 0||yg(r,s,ae,te,c,re);return}}for(var Q in o)te=o[Q],o.hasOwnProperty(Q)&&te!=null&&!c.hasOwnProperty(Q)&&Mt(r,s,Q,null,c,te);for(ue in c)te=c[ue],re=o[ue],!c.hasOwnProperty(ue)||te===re||te==null&&re==null||Mt(r,s,ue,te,c,re)}function cb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var d=o[c],g=d.transferSize,T=d.initiatorType,R=d.duration;if(g&&R&&cb(T)){for(T=0,R=d.responseEnd,c+=1;c<o.length;c++){var B=o[c],Z=B.startTime;if(Z>R)break;var ae=B.transferSize,ue=B.initiatorType;ae&&cb(ue)&&(B=B.responseEnd,T+=ae*(B<R?1:(R-Z)/(B-Z)))}if(--c,s+=8*(g+T)/(d.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _g=null,vg=null;function Af(r){return r.nodeType===9?r:r.ownerDocument}function ub(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Eg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tg=null;function TI(){var r=window.event;return r&&r.type==="popstate"?r===Tg?!1:(Tg=r,!0):(Tg=null,!1)}var fb=typeof setTimeout=="function"?setTimeout:void 0,bI=typeof clearTimeout=="function"?clearTimeout:void 0,db=typeof Promise=="function"?Promise:void 0,SI=typeof queueMicrotask=="function"?queueMicrotask:typeof db<"u"?function(r){return db.resolve(null).then(r).catch(AI)}:fb;function AI(r){setTimeout(function(){throw r})}function ca(r){return r==="head"}function mb(r,s){var o=s,c=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(c===0){r.removeChild(d),Al(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ru(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,ru(o);for(var g=o.firstChild;g;){var T=g.nextSibling,R=g.nodeName;g[xt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&ru(r.ownerDocument.body);o=d}while(o);Al(s)}function pb(r,s){var o=r;r=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=c}while(o)}function bg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":bg(o),Ft(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function wI(r,s,o,c){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[xt])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Zr(r.nextSibling),r===null)break}return null}function CI(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Zr(r.nextSibling),r===null))return null;return r}function gb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Zr(r.nextSibling),r===null))return null;return r}function Sg(r){return r.data==="$?"||r.data==="$~"}function Ag(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function RI(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Zr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var wg=null;function yb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Zr(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function _b(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function vb(r,s,o){switch(s=Af(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ru(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ft(r)}var ei=new Map,Eb=new Set;function wf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ds=oe.d;oe.d={f:II,r:xI,D:NI,C:DI,L:OI,m:MI,X:kI,S:PI,M:VI};function II(){var r=ds.f(),s=gf();return r||s}function xI(r){var s=tt(r);s!==null&&s.tag===5&&s.type==="form"?LE(s):ds.r(r)}var Tl=typeof document>"u"?null:document;function Tb(r,s,o){var c=Tl;if(c&&typeof s=="string"&&s){var d=mr(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Eb.has(d)||(Eb.add(d),r={rel:r,crossOrigin:o,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),Un(s,"link",r),Bt(s),c.head.appendChild(s)))}}function NI(r){ds.D(r),Tb("dns-prefetch",r,null)}function DI(r,s){ds.C(r,s),Tb("preconnect",r,s)}function OI(r,s,o){ds.L(r,s,o);var c=Tl;if(c&&r&&s){var d='link[rel="preload"][as="'+mr(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+mr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+mr(o.imageSizes)+'"]')):d+='[href="'+mr(r)+'"]';var g=d;switch(s){case"style":g=bl(r);break;case"script":g=Sl(r)}ei.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),ei.set(g,r),c.querySelector(d)!==null||s==="style"&&c.querySelector(iu(g))||s==="script"&&c.querySelector(su(g))||(s=c.createElement("link"),Un(s,"link",r),Bt(s),c.head.appendChild(s)))}}function MI(r,s){ds.m(r,s);var o=Tl;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+mr(c)+'"][href="'+mr(r)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Sl(r)}if(!ei.has(g)&&(r=v({rel:"modulepreload",href:r},s),ei.set(g,r),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(su(g)))return}c=o.createElement("link"),Un(c,"link",r),Bt(c),o.head.appendChild(c)}}}function PI(r,s,o){ds.S(r,s,o);var c=Tl;if(c&&r){var d=xn(c).hoistableStyles,g=bl(r);s=s||"default";var T=d.get(g);if(!T){var R={loading:0,preload:null};if(T=c.querySelector(iu(g)))R.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=ei.get(g))&&Cg(r,o);var B=T=c.createElement("link");Bt(B),Un(B,"link",r),B._p=new Promise(function(Z,ae){B.onload=Z,B.onerror=ae}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Cf(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:R},d.set(g,T)}}}function kI(r,s){ds.X(r,s);var o=Tl;if(o&&r){var c=xn(o).hoistableScripts,d=Sl(r),g=c.get(d);g||(g=o.querySelector(su(d)),g||(r=v({src:r,async:!0},s),(s=ei.get(d))&&Rg(r,s),g=o.createElement("script"),Bt(g),Un(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function VI(r,s){ds.M(r,s);var o=Tl;if(o&&r){var c=xn(o).hoistableScripts,d=Sl(r),g=c.get(d);g||(g=o.querySelector(su(d)),g||(r=v({src:r,async:!0,type:"module"},s),(s=ei.get(d))&&Rg(r,s),g=o.createElement("script"),Bt(g),Un(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function bb(r,s,o,c){var d=(d=Ae.current)?wf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=bl(o.href),o=xn(d).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=bl(o.href);var g=xn(d).hoistableStyles,T=g.get(r);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,T),(g=d.querySelector(iu(r)))&&!g._p&&(T.instance=g,T.state.loading=5),ei.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ei.set(r,o),g||LI(d,r,o,T.state))),s&&c===null)throw Error(i(528,""));return T}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sl(o),o=xn(d).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function bl(r){return'href="'+mr(r)+'"'}function iu(r){return'link[rel="stylesheet"]['+r+"]"}function Sb(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function LI(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Un(s,"link",o),Bt(s),r.head.appendChild(s))}function Sl(r){return'[src="'+mr(r)+'"]'}function su(r){return"script[async]"+r}function Ab(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+mr(o.href)+'"]');if(c)return s.instance=c,Bt(c),c;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),Bt(c),Un(c,"style",d),Cf(c,o.precedence,r),s.instance=c;case"stylesheet":d=bl(o.href);var g=r.querySelector(iu(d));if(g)return s.state.loading|=4,s.instance=g,Bt(g),g;c=Sb(o),(d=ei.get(d))&&Cg(c,d),g=(r.ownerDocument||r).createElement("link"),Bt(g);var T=g;return T._p=new Promise(function(R,B){T.onload=R,T.onerror=B}),Un(g,"link",c),s.state.loading|=4,Cf(g,o.precedence,r),s.instance=g;case"script":return g=Sl(o.src),(d=r.querySelector(su(g)))?(s.instance=d,Bt(d),d):(c=o,(d=ei.get(g))&&(c=v({},o),Rg(c,d)),r=r.ownerDocument||r,d=r.createElement("script"),Bt(d),Un(d,"link",c),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Cf(c,o.precedence,r));return s.instance}function Cf(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,T=0;T<c.length;T++){var R=c[T];if(R.dataset.precedence===s)g=R;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Cg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Rg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Rf=null;function wb(r,s,o){if(Rf===null){var c=new Map,d=Rf=new Map;d.set(o,c)}else d=Rf,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var g=o[d];if(!(g[xt]||g[ve]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=r+T;var R=c.get(T);R?R.push(g):c.set(T,[g])}}return c}function Cb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function jI(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Rb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function UI(r,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=bl(c.href),g=s.querySelector(iu(d));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=If.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=g,Bt(g);return}g=s.ownerDocument||s,c=Sb(c),(d=ei.get(d))&&Cg(c,d),g=g.createElement("link"),Bt(g);var T=g;T._p=new Promise(function(R,B){T.onload=R,T.onerror=B}),Un(g,"link",c),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=If.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Ig=0;function zI(r,s){return r.stylesheets&&r.count===0&&Nf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var c=setTimeout(function(){if(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+s);0<r.imgBytes&&Ig===0&&(Ig=62500*EI());var d=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>Ig?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function If(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xf=null;function Nf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xf=new Map,s.forEach(BI,r),xf=null,If.call(r))}function BI(r,s){if(!(s.state.loading&4)){var o=xf.get(r);if(o)var c=o.get(null);else{o=new Map,xf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}d=s.instance,T=d.getAttribute("data-precedence"),g=o.get(T)||c,g===c&&o.set(null,d),o.set(T,d),this.count++,c=If.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var au={$$typeof:U,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function HI(r,s,o,c,d,g,T,R,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sr(0),this.hiddenUpdates=sr(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function Ib(r,s,o,c,d,g,T,R,B,Z,ae,ue){return r=new HI(r,s,o,T,B,Z,ae,ue,R),s=1,g===!0&&(s|=24),g=Or(3,null,null,s),r.current=g,g.stateNode=r,s=op(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},hp(g),r}function xb(r){return r?(r=el,r):el}function Nb(r,s,o,c,d,g){d=xb(d),c.context===null?c.context=d:c.pendingContext=d,c=Js(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Zs(r,c,s),o!==null&&(Er(o,r,s),jc(o,r,s))}function Db(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function xg(r,s){Db(r,s),(r=r.alternate)&&Db(r,s)}function Ob(r){if(r.tag===13||r.tag===31){var s=no(r,67108864);s!==null&&Er(s,r,67108864),xg(r,67108864)}}function Mb(r){if(r.tag===13||r.tag===31){var s=Lr();s=ee(s);var o=no(r,s);o!==null&&Er(o,r,s),xg(r,s)}}var Df=!0;function FI(r,s,o,c){var d=G.T;G.T=null;var g=oe.p;try{oe.p=2,Ng(r,s,o,c)}finally{oe.p=g,G.T=d}}function qI(r,s,o,c){var d=G.T;G.T=null;var g=oe.p;try{oe.p=8,Ng(r,s,o,c)}finally{oe.p=g,G.T=d}}function Ng(r,s,o,c){if(Df){var d=Dg(c);if(d===null)gg(r,s,c,Of,o),kb(r,c);else if($I(d,r,s,o,c))c.stopPropagation();else if(kb(r,c),s&4&&-1<GI.indexOf(r)){for(;d!==null;){var g=tt(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Fr(g.pendingLanes);if(T!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;T;){var B=1<<31-Kt(T);R.entanglements[1]|=B,T&=~B}Li(g),(St&6)===0&&(mf=it()+500,eu(0))}}break;case 31:case 13:R=no(g,2),R!==null&&Er(R,g,2),gf(),xg(g,2)}if(g=Dg(c),g===null&&gg(r,s,c,Of,o),g===d)break;d=g}d!==null&&c.stopPropagation()}else gg(r,s,c,null,o)}}function Dg(r){return r=qr(r),Og(r)}var Of=null;function Og(r){if(Of=null,r=Ut(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Of=r,null}function Pb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(An()){case Pn:return 2;case Hr:return 8;case ln:case Gn:return 32;case nr:return 268435456;default:return 32}default:return 32}}var Mg=!1,ua=null,ha=null,fa=null,ou=new Map,lu=new Map,da=[],GI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kb(r,s){switch(r){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":ou.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(s.pointerId)}}function cu(r,s,o,c,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=tt(s),s!==null&&Ob(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function $I(r,s,o,c,d){switch(s){case"focusin":return ua=cu(ua,r,s,o,c,d),!0;case"dragenter":return ha=cu(ha,r,s,o,c,d),!0;case"mouseover":return fa=cu(fa,r,s,o,c,d),!0;case"pointerover":var g=d.pointerId;return ou.set(g,cu(ou.get(g)||null,r,s,o,c,d)),!0;case"gotpointercapture":return g=d.pointerId,lu.set(g,cu(lu.get(g)||null,r,s,o,c,d)),!0}return!1}function Vb(r){var s=Ut(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,we(r.priority,function(){Mb(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,we(r.priority,function(){Mb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Dg(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);bc=c,o.target.dispatchEvent(c),bc=null}else return s=tt(o),s!==null&&Ob(s),r.blockedOn=o,!1;s.shift()}return!0}function Lb(r,s,o){Mf(r)&&o.delete(s)}function KI(){Mg=!1,ua!==null&&Mf(ua)&&(ua=null),ha!==null&&Mf(ha)&&(ha=null),fa!==null&&Mf(fa)&&(fa=null),ou.forEach(Lb),lu.forEach(Lb)}function Pf(r,s){r.blockedOn===s&&(r.blockedOn=null,Mg||(Mg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,KI)))}var kf=null;function jb(r){kf!==r&&(kf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kf===r&&(kf=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],d=r[s+2];if(typeof c!="function"){if(Og(c||o)===null)continue;break}var g=tt(o);g!==null&&(r.splice(s,3),s-=3,Dp(g,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function Al(r){function s(B){return Pf(B,r)}ua!==null&&Pf(ua,r),ha!==null&&Pf(ha,r),fa!==null&&Pf(fa,r),ou.forEach(s),lu.forEach(s);for(var o=0;o<da.length;o++){var c=da[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<da.length&&(o=da[0],o.blockedOn===null);)Vb(o),o.blockedOn===null&&da.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],g=o[c+1],T=d[Te]||null;if(typeof g=="function")T||jb(o);else if(T){var R=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[Te]||null)R=T.formAction;else if(Og(d)!==null)continue}else R=T.action;typeof R=="function"?o[c+1]=R:(o.splice(c,3),c-=3),jb(o)}}}function Ub(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Pg(r){this._internalRoot=r}Vf.prototype.render=Pg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=Lr();Nb(o,c,r,s,null,null)},Vf.prototype.unmount=Pg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Nb(r.current,2,null,r,null,null),gf(),s[Re]=null}};function Vf(r){this._internalRoot=r}Vf.prototype.unstable_scheduleHydration=function(r){if(r){var s=_e();r={blockedOn:null,target:r,priority:s};for(var o=0;o<da.length&&s!==0&&s<da[o].priority;o++);da.splice(o,0,r),o===0&&Vb(r)}};var zb=e.version;if(zb!=="19.2.4")throw Error(i(527,zb,"19.2.4"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var YI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{Cr=Lf.inject(YI),Lt=Lf}catch{}}return hu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",d=KE,g=YE,T=QE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Ib(r,1,!1,null,null,o,c,null,d,g,T,Ub),r[Re]=s.current,pg(r),new Pg(s)},hu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,d="",g=KE,T=YE,R=QE,B=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(B=o.formState)),s=Ib(r,1,!0,s,o??null,c,d,B,g,T,R,Ub),s.context=xb(null),o=s.current,c=Lr(),c=ee(c),d=Js(c),d.callback=null,Zs(o,d,c),o=c,s.current.lanes=o,Ai(s,o),Li(s),r[Re]=s.current,pg(r),new Vf(s)},hu.version="19.2.4",hu}var Xb;function ox(){if(Xb)return jg.exports;Xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jg.exports=ax(),jg.exports}var lx=ox();const cx=RA(lx);var Hg={exports:{}},Fg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function ux(){if(Wb)return Fg;Wb=1;var n=Zd();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,f=n.useDebugValue;return Fg.useSyncExternalStoreWithSelector=function(m,p,y,v,b){var w=a(null);if(w.current===null){var M={hasValue:!1,value:null};w.current=M}else M=w.current;w=u(function(){function D(X){if(!j){if(j=!0,P=X,X=v(X),b!==void 0&&M.hasValue){var Y=M.value;if(b(Y,X))return U=Y}return U=X}if(Y=U,t(P,X))return Y;var A=v(X);return b!==void 0&&b(Y,A)?(P=X,Y):(P=X,U=A)}var j=!1,P,U,F=y===void 0?null:y;return[function(){return D(p())},F===null?void 0:function(){return D(F())}]},[p,y,v,b]);var H=i(m,w[0],w[1]);return l(function(){M.hasValue=!0,M.value=H},[H]),f(H),H},Fg}var Jb;function hx(){return Jb||(Jb=1,Hg.exports=ux()),Hg.exports}var fx=hx();function dx(n){n()}function mx(){let n=null,e=null;return{clear(){n=null,e=null},notify(){dx(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var Zb={notify(){},get:()=>[]};function px(n,e){let t,i=Zb,a=0,l=!1;function u(H){y();const D=i.subscribe(H);let j=!1;return()=>{j||(j=!0,D(),v())}}function f(){i.notify()}function m(){M.onStateChange&&M.onStateChange()}function p(){return l}function y(){a++,t||(t=n.subscribe(m),i=mx())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=Zb)}function b(){l||(l=!0,y())}function w(){l&&(l=!1,v())}const M={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:b,tryUnsubscribe:w,getListeners:()=>i};return M}var gx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yx=gx(),_x=()=>typeof navigator<"u"&&navigator.product==="ReactNative",vx=_x(),Ex=()=>yx||vx?O.useLayoutEffect:O.useEffect,Tx=Ex(),qg=Symbol.for("react-redux-context"),Gg=typeof globalThis<"u"?globalThis:{};function bx(){if(!O.createContext)return{};const n=Gg[qg]??(Gg[qg]=new Map);let e=n.get(O.createContext);return e||(e=O.createContext(null),n.set(O.createContext,e)),e}var Da=bx();function Sx(n){const{children:e,context:t,serverState:i,store:a}=n,l=O.useMemo(()=>{const m=px(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),u=O.useMemo(()=>a.getState(),[a]);Tx(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=t||Da;return O.createElement(f.Provider,{value:l},e)}var Ax=Sx;function o_(n=Da){return function(){return O.useContext(n)}}var NA=o_();function DA(n=Da){const e=n===Da?NA:o_(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var wx=DA();function Cx(n=Da){const e=n===Da?wx:DA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Rx=Cx(),Ix=(n,e)=>n===e;function xx(n=Da){const e=n===Da?NA:o_(n),t=(i,a={})=>{const{equalityFn:l=Ix}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:f,subscription:m,getServerState:p}=u;O.useRef(!0);const y=O.useCallback({[i.name](b){return i(b)}}[i.name],[i]),v=fx.useSyncExternalStoreWithSelector(m.addNestedSub,f.getState,p||f.getState,y,l);return O.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var Nx=xx();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var OA=n=>{throw TypeError(n)},Dx=(n,e,t)=>e.has(n)||OA("Cannot "+t),$g=(n,e,t)=>(Dx(n,e,"read from private field"),t?t.call(n):e.get(n)),Ox=(n,e,t)=>e.has(n)?OA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),e0="popstate";function Mx(n={}){function e(a,l){let{pathname:u="/",search:f="",hash:m=""}=Ms(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ku("",{pathname:u,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:Gi(l))}function i(a,l){tn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return kx(e,t,i,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Px(){return Math.random().toString(36).substring(2,10)}function t0(n,e){return{usr:n.state,key:n.key,idx:e}}function ku(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ms(e):e,state:t,key:e&&e.key||i||Px()}}function Gi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ms(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function kx(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,f="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){f="POP";let D=y(),j=D==null?null:D-p;p=D,m&&m({action:f,location:H.location,delta:j})}function b(D,j){f="PUSH";let P=ku(H.location,D,j);t&&t(P,D),p=y()+1;let U=t0(P,p),F=H.createHref(P);try{u.pushState(U,"",F)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;a.location.assign(F)}l&&m&&m({action:f,location:H.location,delta:1})}function w(D,j){f="REPLACE";let P=ku(H.location,D,j);t&&t(P,D),p=y();let U=t0(P,p),F=H.createHref(P);u.replaceState(U,"",F),l&&m&&m({action:f,location:H.location,delta:0})}function M(D){return MA(D)}let H={get action(){return f},get location(){return n(a,u)},listen(D){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(e0,v),m=D,()=>{a.removeEventListener(e0,v),m=null}},createHref(D){return e(a,D)},createURL:M,encodeLocation(D){let j=M(D);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:b,replace:w,go(D){return u.go(D)}};return H}function MA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Gi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var _u,n0=class{constructor(n){if(Ox(this,_u,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if($g(this,_u).has(n))return $g(this,_u).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){$g(this,_u).set(n,e)}};_u=new WeakMap;var Vx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Lx(n){return Vx.has(n)}var jx=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function Ux(n){return jx.has(n)}function zx(n){return n.index===!0}function Vu(n,e,t=[],i={},a=!1){return n.map((l,u)=>{let f=[...t,String(u)],m=typeof l.id=="string"?l.id:f.join("-");if(at(l.index!==!0||!l.children,"Cannot specify children on an index route"),at(a||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),zx(l)){let p={...l,id:m};return i[m]=r0(p,e(p)),p}else{let p={...l,id:m,children:void 0};return i[m]=r0(p,e(p)),l.children&&(p.children=Vu(l.children,e,f,i,a)),p}})}function r0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function _a(n,e,t="/"){return vu(n,e,t,!1)}function vu(n,e,t,i){let a=typeof e=="string"?Ms(e):e,l=si(a.pathname||"/",t);if(l==null)return null;let u=PA(n);Hx(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let p=Zx(l);f=Wx(u[m],p,i)}return f}function Bx(n,e){let{route:t,pathname:i,params:a}=n;return{id:t.id,pathname:i,params:a,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function PA(n,e=[],t=[],i="",a=!1){let l=(u,f,m=a,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;at(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=zi([i,y.relativePath]),b=t.concat(y);u.children&&u.children.length>0&&(at(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),PA(u.children,e,b,v,m)),!(u.path==null&&!u.index)&&e.push({path:v,score:Qx(v,u.index),routesMeta:b})};return n.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))l(u,f);else for(let p of kA(u.path))l(u,f,!0,p)}),e}function kA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=kA(i.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...u),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function Hx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Xx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Fx=/^:[\w-]+$/,qx=3,Gx=2,$x=1,Kx=10,Yx=-2,i0=n=>n==="*";function Qx(n,e){let t=n.split("/"),i=t.length;return t.some(i0)&&(i+=Yx),e&&(i+=Gx),t.filter(a=>!i0(a)).reduce((a,l)=>a+(Fx.test(l)?qx:l===""?$x:Kx),i)}function Xx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function Wx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=Sd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=Sd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:zi([l,v.pathname]),pathnameBase:nN(zi([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=zi([l,v.pathnameBase]))}return u}function Sd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Jx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},b)=>{if(y==="*"){let M=f[b]||"";u=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const w=f[b];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function Jx(n,e=!1,t=!0){tn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Zx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function si(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function eN({basename:n,pathname:e}){return e==="/"?n:zi([n,e])}var VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l_=n=>VA.test(n);function tN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ms(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=s0(t.substring(1),"/"):l=s0(t,e)):l=e,{pathname:l,search:rN(i),hash:iN(a)}}function s0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Kg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function em(n){let e=LA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function tm(n,e,t,i=!1){let a;typeof n=="string"?a=Ms(n):(a={...n},at(!a.pathname||!a.pathname.includes("?"),Kg("?","pathname","search",a)),at(!a.pathname||!a.pathname.includes("#"),Kg("#","pathname","hash",a)),at(!a.search||!a.search.includes("#"),Kg("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}f=v>=0?e[v]:"/"}let m=tN(a,f),p=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var zi=n=>n.join("/").replace(/\/\/+/g,"/"),nN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,iN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Ju=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Lu(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Zu(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function UA(n,e){let t=n;if(typeof t!="string"||!VA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(jA)try{let l=new URL(window.location.href),u=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=si(u.pathname,e);u.origin===l.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{tn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}var Sa=Symbol("Uninstrumented");function sN(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(a=>a({id:e.id,index:e.index,path:e.path,instrument(l){let u=Object.keys(t);for(let f of u)l[f]&&t[f].push(l[f])}}));let i={};if(typeof e.lazy=="function"&&t.lazy.length>0){let a=Ll(t.lazy,e.lazy,()=>{});a&&(i.lazy=a)}if(typeof e.lazy=="object"){let a=e.lazy;["middleware","loader","action"].forEach(l=>{let u=a[l],f=t[`lazy.${l}`];if(typeof u=="function"&&f.length>0){let m=Ll(f,u,()=>{});m&&(i.lazy=Object.assign(i.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(a=>{let l=e[a];if(typeof l=="function"&&t[a].length>0){let u=l[Sa]??l,f=Ll(t[a],u,(...m)=>a0(m[0]));f&&(a==="loader"&&u.hydrate===!0&&(f.hydrate=!0),f[Sa]=u,i[a]=f)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(i.middleware=e.middleware.map(a=>{let l=a[Sa]??a,u=Ll(t.middleware,l,(...f)=>a0(f[0]));return u?(u[Sa]=l,u):a})),i}function aN(n,e){let t={navigate:[],fetch:[]};if(e.forEach(i=>i({instrument(a){let l=Object.keys(a);for(let u of l)a[u]&&t[u].push(a[u])}})),t.navigate.length>0){let i=n.navigate[Sa]??n.navigate,a=Ll(t.navigate,i,(...l)=>{let[u,f]=l;return{to:typeof u=="number"||typeof u=="string"?u:u?Gi(u):".",...o0(n,f??{})}});a&&(a[Sa]=i,n.navigate=a)}if(t.fetch.length>0){let i=n.fetch[Sa]??n.fetch,a=Ll(t.fetch,i,(...l)=>{let[u,,f,m]=l;return{href:f??".",fetcherKey:u,...o0(n,m??{})}});a&&(a[Sa]=i,n.fetch=a)}return n}function Ll(n,e,t){return n.length===0?null:async(...i)=>{let a=await zA(n,t(...i),()=>e(...i),n.length-1);if(a.type==="error")throw a.value;return a.value}}async function zA(n,e,t,i){let a=n[i],l;if(a){let u,f=async()=>(u?console.error("You cannot call instrumented handlers more than once"):u=zA(n,e,t,i-1),l=await u,at(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(f,e)}catch(m){console.error("An instrumentation function threw an error:",m)}u||await f(),await u}else try{l={type:"success",value:await t()}}catch(u){l={type:"error",value:u}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function a0(n){let{request:e,context:t,params:i,unstable_pattern:a}=n;return{request:oN(e),params:{...i},unstable_pattern:a,context:lN(t)}}function o0(n,e){return{currentUrl:Gi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function oN(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function lN(n){if(uN(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var cN=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uN(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===cN}var BA=["POST","PUT","PATCH","DELETE"],hN=new Set(BA),fN=["GET",...BA],dN=new Set(fN),HA=new Set([301,302,303,307,308]),mN=new Set([307,308]),Yg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},gN=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),FA="remix-router-transitions",qA=Symbol("ResetLoaderData");function yN(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";at(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||gN,l=a;if(n.unstable_instrumentations){let z=n.unstable_instrumentations;l=K=>({...a(K),...sN(z.map(ee=>ee.route).filter(Boolean),K)})}let u={},f=Vu(n.routes,l,void 0,u),m,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||bN,v={...n.future},b=null,w=new Set,M=null,H=null,D=null,j=n.hydrationData!=null,P=_a(f,n.history.location,p),U=!1,F=null,X;if(P==null&&!n.patchRoutesOnNavigation){let z=ni(404,{pathname:n.history.location.pathname}),{matches:K,route:ee}=jf(f);X=!0,P=K,F={[ee.id]:z}}else if(P&&!n.hydrationData&&Yi(P,f,n.history.location.pathname).active&&(P=null),P)if(P.some(z=>z.route.lazy))X=!1;else if(!P.some(z=>c_(z.route)))X=!0;else{let z=n.hydrationData?n.hydrationData.loaderData:null,K=n.hydrationData?n.hydrationData.errors:null;if(K){let ee=P.findIndex(pe=>K[pe.route.id]!==void 0);X=P.slice(0,ee+1).every(pe=>!by(pe.route,z,K))}else X=P.every(ee=>!by(ee.route,z,K))}else{X=!1,P=[];let z=Yi(null,f,n.history.location.pathname);z.active&&z.matches&&(U=!0,P=z.matches)}let Y,A={historyAction:n.history.action,location:n.history.location,matches:P,initialized:X,navigation:Yg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||F,fetchers:new Map,blockers:new Map},C="POP",I=null,V=!1,k,L=!1,x=new Map,me=null,ge=!1,G=!1,oe=new Set,de=new Map,Pe=0,Ne=-1,q=new Map,ie=new Set,se=new Map,he=new Map,ye=new Set,Ae=new Map,ke,Fe=null;function ze(){if(b=n.history.listen(({action:z,location:K,delta:ee})=>{if(ke){ke(),ke=void 0;return}tn(Ae.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let pe=Si({currentLocation:A.location,nextLocation:K,historyAction:z});if(pe&&ee!=null){let _e=new Promise(we=>{ke=we});n.history.go(ee*-1),ir(pe,{state:"blocked",location:K,proceed(){ir(pe,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),_e.then(()=>n.history.go(ee))},reset(){let we=new Map(A.blockers);we.set(pe,fu),lt({blockers:we})}}),I==null||I.resolve(),I=null;return}return be(z,K)}),t){zN(e,x);let z=()=>BN(e,x);e.addEventListener("pagehide",z),me=()=>e.removeEventListener("pagehide",z)}return A.initialized||be("POP",A.location,{initialHydration:!0}),Y}function At(){b&&b(),me&&me(),w.clear(),k&&k.abort(),A.fetchers.forEach((z,K)=>Vs(K)),A.blockers.forEach((z,K)=>qa(K))}function kt(z){return w.add(z),()=>w.delete(z)}function lt(z,K={}){z.matches&&(z.matches=z.matches.map(_e=>{let we=u[_e.route.id],Ie=_e.route;return Ie.element!==we.element||Ie.errorElement!==we.errorElement||Ie.hydrateFallbackElement!==we.hydrateFallbackElement?{..._e,route:we}:_e})),A={...A,...z};let ee=[],pe=[];A.fetchers.forEach((_e,we)=>{_e.state==="idle"&&(ye.has(we)?ee.push(we):pe.push(we))}),ye.forEach(_e=>{!A.fetchers.has(_e)&&!de.has(_e)&&ee.push(_e)}),[...w].forEach(_e=>_e(A,{deletedFetchers:ee,newErrors:z.errors??null,viewTransitionOpts:K.viewTransitionOpts,flushSync:K.flushSync===!0})),ee.forEach(_e=>Vs(_e)),pe.forEach(_e=>A.fetchers.delete(_e))}function Jt(z,K,{flushSync:ee}={}){var Be,Me;let pe=A.actionData!=null&&A.navigation.formMethod!=null&&Xn(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Be=z.state)==null?void 0:Be._isRedirect)!==!0,_e;K.actionData?Object.keys(K.actionData).length>0?_e=K.actionData:_e=null:pe?_e=A.actionData:_e=null;let we=K.loaderData?y0(A.loaderData,K.loaderData,K.matches||[],K.errors):A.loaderData,Ie=A.blockers;Ie.size>0&&(Ie=new Map(Ie),Ie.forEach(($e,st)=>Ie.set(st,fu)));let ve=ge?!1:Bo(z,K.matches||A.matches),Te=V===!0||A.navigation.formMethod!=null&&Xn(A.navigation.formMethod)&&((Me=z.state)==null?void 0:Me._isRedirect)!==!0;m&&(f=m,m=void 0),ge||C==="POP"||(C==="PUSH"?n.history.push(z,z.state):C==="REPLACE"&&n.history.replace(z,z.state));let Re;if(C==="POP"){let $e=x.get(A.location.pathname);$e&&$e.has(z.pathname)?Re={currentLocation:A.location,nextLocation:z}:x.has(z.pathname)&&(Re={currentLocation:z,nextLocation:A.location})}else if(L){let $e=x.get(A.location.pathname);$e?$e.add(z.pathname):($e=new Set([z.pathname]),x.set(A.location.pathname,$e)),Re={currentLocation:A.location,nextLocation:z}}lt({...K,actionData:_e,loaderData:we,historyAction:C,location:z,initialized:!0,navigation:Yg,revalidation:"idle",restoreScrollPosition:ve,preventScrollReset:Te,blockers:Ie},{viewTransitionOpts:Re,flushSync:ee===!0}),C="POP",V=!1,L=!1,ge=!1,G=!1,I==null||I.resolve(),I=null,Fe==null||Fe.resolve(),Fe=null}async function In(z,K){if(I==null||I.resolve(),I=null,typeof z=="number"){I||(I=T0());let st=I.promise;return n.history.go(z),st}let ee=Ty(A.location,A.matches,p,z,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:pe,submission:_e,error:we}=l0(!1,ee,K),Ie=A.location,ve=ku(A.location,pe,K&&K.state);ve={...ve,...n.history.encodeLocation(ve)};let Te=K&&K.replace!=null?K.replace:void 0,Re="PUSH";Te===!0?Re="REPLACE":Te===!1||_e!=null&&Xn(_e.formMethod)&&_e.formAction===A.location.pathname+A.location.search&&(Re="REPLACE");let Be=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,Me=(K&&K.flushSync)===!0,$e=Si({currentLocation:Ie,nextLocation:ve,historyAction:Re});if($e){ir($e,{state:"blocked",location:ve,proceed(){ir($e,{state:"proceeding",proceed:void 0,reset:void 0,location:ve}),In(z,K)},reset(){let st=new Map(A.blockers);st.set($e,fu),lt({blockers:st})}});return}await be(Re,ve,{submission:_e,pendingError:we,preventScrollReset:Be,replace:K&&K.replace,enableViewTransition:K&&K.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:K&&K.unstable_defaultShouldRevalidate})}function tr(){Fe||(Fe=T0()),Hr(),lt({revalidation:"loading"});let z=Fe.promise;return A.navigation.state==="submitting"?z:A.navigation.state==="idle"?(be(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),z):(be(C||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:L===!0}),z)}async function be(z,K,ee){k&&k.abort(),k=null,C=z,ge=(ee&&ee.startUninterruptedRevalidation)===!0,Ir(A.location,A.matches),V=(ee&&ee.preventScrollReset)===!0,L=(ee&&ee.enableViewTransition)===!0;let pe=m||f,_e=ee&&ee.overrideNavigation,we=ee!=null&&ee.initialHydration&&A.matches&&A.matches.length>0&&!U?A.matches:_a(pe,K,p),Ie=(ee&&ee.flushSync)===!0;if(we&&A.initialized&&!G&&NN(A.location,K)&&!(ee&&ee.submission&&Xn(ee.submission.formMethod))){Jt(K,{matches:we},{flushSync:Ie});return}let ve=Yi(we,pe,K.pathname);if(ve.active&&ve.matches&&(we=ve.matches),!we){let{error:Ft,notFoundMatches:Ut,route:tt}=Yt(K.pathname);Jt(K,{matches:Ut,loaderData:{},errors:{[tt.id]:Ft}},{flushSync:Ie});return}k=new AbortController;let Te=Nl(n.history,K,k.signal,ee&&ee.submission),Re=n.getContext?await n.getContext():new n0,Be;if(ee&&ee.pendingError)Be=[va(we).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&Xn(ee.submission.formMethod)){let Ft=await Ke(Te,K,ee.submission,we,Re,ve.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:Ie});if(Ft.shortCircuited)return;if(Ft.pendingActionResult){let[Ut,tt]=Ft.pendingActionResult;if(jr(tt)&&Lu(tt.error)&&tt.error.status===404){k=null,Jt(K,{matches:Ft.matches,loaderData:{},errors:{[Ut]:tt.error}});return}}we=Ft.matches||we,Be=Ft.pendingActionResult,_e=Qg(K,ee.submission),Ie=!1,ve.active=!1,Te=Nl(n.history,Te.url,Te.signal)}let{shortCircuited:Me,matches:$e,loaderData:st,errors:xt}=await Je(Te,K,we,Re,ve.active,_e,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Ie,Be,ee&&ee.callSiteDefaultShouldRevalidate);Me||(k=null,Jt(K,{matches:$e||we,..._0(Be),loaderData:st,errors:xt}))}async function Ke(z,K,ee,pe,_e,we,Ie,ve={}){Hr();let Te=jN(K,ee);if(lt({navigation:Te},{flushSync:ve.flushSync===!0}),we){let Me=await sr(pe,K.pathname,z.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:st,route:xt}=jf(f);return{matches:st,pendingActionResult:[xt.id,{type:"error",error:Me.error}]}}let $e=va(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[$e,{type:"error",error:Me.error}]}}else if(Me.matches)pe=Me.matches;else{let{notFoundMatches:$e,error:st,route:xt}=Yt(K.pathname);return{matches:$e,pendingActionResult:[xt.id,{type:"error",error:st}]}}}let Re,Be=Zf(pe,K);if(!Be.route.action&&!Be.route.lazy)Re={type:"error",error:ni(405,{method:z.method,pathname:K.pathname,routeId:Be.route.id})};else{let Me=zl(l,u,z,pe,Be,Ie?[]:i,_e),$e=await An(z,Me,_e,null);if(Re=$e[Be.route.id],!Re){for(let st of pe)if($e[st.route.id]){Re=$e[st.route.id];break}}if(z.signal.aborted)return{shortCircuited:!0}}if(Eo(Re)){let Me;return ve&&ve.replace!=null?Me=ve.replace:Me=m0(Re.response.headers.get("Location"),new URL(z.url),p,n.history)===A.location.pathname+A.location.search,await it(z,Re,!0,{submission:ee,replace:Me}),{shortCircuited:!0}}if(jr(Re)){let Me=va(pe,Be.route.id);return(ve&&ve.replace)!==!0&&(C="PUSH"),{matches:pe,pendingActionResult:[Me.route.id,Re,Be.route.id]}}return{matches:pe,pendingActionResult:[Be.route.id,Re]}}async function Je(z,K,ee,pe,_e,we,Ie,ve,Te,Re,Be,Me,$e){let st=we||Qg(K,Ie),xt=Ie||ve||E0(st),Ft=!ge&&!Re;if(_e){if(Ft){let Zt=De(Me);lt({navigation:st,...Zt!==void 0?{actionData:Zt}:{}},{flushSync:Be})}let ot=await sr(ee,K.pathname,z.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:pn,route:Nt}=jf(f);return{matches:pn,loaderData:{},errors:{[Nt.id]:ot.error}}}let Zt=va(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[Zt]:ot.error}}}else if(ot.matches)ee=ot.matches;else{let{error:Zt,notFoundMatches:pn,route:Nt}=Yt(K.pathname);return{matches:pn,loaderData:{},errors:{[Nt.id]:Zt}}}}let Ut=m||f,{dsMatches:tt,revalidatingFetchers:zt}=c0(z,pe,l,u,n.history,A,ee,xt,K,Re?[]:i,Re===!0,G,oe,ye,se,ie,Ut,p,n.patchRoutesOnNavigation!=null,Me,$e);if(Ne=++Pe,!n.dataStrategy&&!tt.some(ot=>ot.shouldLoad)&&!tt.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&zt.length===0){let ot=Kt();return Jt(K,{matches:ee,loaderData:{},errors:Me&&jr(Me[1])?{[Me[0]]:Me[1].error}:null,..._0(Me),...ot?{fetchers:new Map(A.fetchers)}:{}},{flushSync:Be}),{shortCircuited:!0}}if(Ft){let ot={};if(!_e){ot.navigation=st;let Zt=De(Me);Zt!==void 0&&(ot.actionData=Zt)}zt.length>0&&(ot.fetchers=Ge(zt)),lt(ot,{flushSync:Be})}zt.forEach(ot=>{Lt(ot.key),ot.controller&&de.set(ot.key,ot.controller)});let xn=()=>zt.forEach(ot=>Lt(ot.key));k&&k.signal.addEventListener("abort",xn);let{loaderResults:Bt,fetcherResults:fr}=await Pn(tt,zt,z,pe);if(z.signal.aborted)return{shortCircuited:!0};k&&k.signal.removeEventListener("abort",xn),zt.forEach(ot=>de.delete(ot.key));let $n=Uf(Bt);if($n)return await it(z,$n.result,!0,{replace:Te}),{shortCircuited:!0};if($n=Uf(fr),$n)return ie.add($n.key),await it(z,$n.result,!0,{replace:Te}),{shortCircuited:!0};let{loaderData:dr,errors:Kn}=g0(A,ee,Bt,Me,zt,fr);Re&&A.errors&&(Kn={...A.errors,...Kn});let xr=Kt(),wi=Fa(Ne),Ci=xr||wi||zt.length>0;return{matches:ee,loaderData:dr,errors:Kn,...Ci?{fetchers:new Map(A.fetchers)}:{}}}function De(z){if(z&&!jr(z[1]))return{[z[0]]:z[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function Ge(z){return z.forEach(K=>{let ee=A.fetchers.get(K.key),pe=du(void 0,ee?ee.data:void 0);A.fetchers.set(K.key,pe)}),new Map(A.fetchers)}async function Vt(z,K,ee,pe){Lt(z);let _e=(pe&&pe.flushSync)===!0,we=m||f,Ie=Ty(A.location,A.matches,p,ee,K,pe==null?void 0:pe.relative),ve=_a(we,Ie,p),Te=Yi(ve,we,Ie);if(Te.active&&Te.matches&&(ve=Te.matches),!ve){Gn(z,K,ni(404,{pathname:Ie}),{flushSync:_e});return}let{path:Re,submission:Be,error:Me}=l0(!0,Ie,pe);if(Me){Gn(z,K,Me,{flushSync:_e});return}let $e=n.getContext?await n.getContext():new n0,st=(pe&&pe.preventScrollReset)===!0;if(Be&&Xn(Be.formMethod)){await hr(z,K,Re,ve,$e,Te.active,_e,st,Be,pe&&pe.unstable_defaultShouldRevalidate);return}se.set(z,{routeId:K,path:Re}),await mn(z,K,Re,ve,$e,Te.active,_e,st,Be)}async function hr(z,K,ee,pe,_e,we,Ie,ve,Te,Re){Hr(),se.delete(z);let Be=A.fetchers.get(z);ln(z,UN(Te,Be),{flushSync:Ie});let Me=new AbortController,$e=Nl(n.history,ee,Me.signal,Te);if(we){let nt=await sr(pe,new URL($e.url).pathname,$e.signal,z);if(nt.type==="aborted")return;if(nt.type==="error"){Gn(z,K,nt.error,{flushSync:Ie});return}else if(nt.matches)pe=nt.matches;else{Gn(z,K,ni(404,{pathname:ee}),{flushSync:Ie});return}}let st=Zf(pe,ee);if(!st.route.action&&!st.route.lazy){let nt=ni(405,{method:Te.formMethod,pathname:ee,routeId:K});Gn(z,K,nt,{flushSync:Ie});return}de.set(z,Me);let xt=Pe,Ft=zl(l,u,$e,pe,st,i,_e),Ut=await An($e,Ft,_e,z),tt=Ut[st.route.id];if(!tt){for(let nt of Ft)if(Ut[nt.route.id]){tt=Ut[nt.route.id];break}}if($e.signal.aborted){de.get(z)===Me&&de.delete(z);return}if(ye.has(z)){if(Eo(tt)||jr(tt)){ln(z,gs(void 0));return}}else{if(Eo(tt))if(de.delete(z),Ne>xt){ln(z,gs(void 0));return}else return ie.add(z),ln(z,du(Te)),it($e,tt,!1,{fetcherSubmission:Te,preventScrollReset:ve});if(jr(tt)){Gn(z,K,tt.error);return}}let zt=A.navigation.location||A.location,xn=Nl(n.history,zt,Me.signal),Bt=m||f,fr=A.navigation.state!=="idle"?_a(Bt,A.navigation.location,p):A.matches;at(fr,"Didn't find any matches after fetcher action");let $n=++Pe;q.set(z,$n);let dr=du(Te,tt.data);A.fetchers.set(z,dr);let{dsMatches:Kn,revalidatingFetchers:xr}=c0(xn,_e,l,u,n.history,A,fr,Te,zt,i,!1,G,oe,ye,se,ie,Bt,p,n.patchRoutesOnNavigation!=null,[st.route.id,tt],Re);xr.filter(nt=>nt.key!==z).forEach(nt=>{let Nr=nt.key,js=A.fetchers.get(Nr),Tt=du(void 0,js?js.data:void 0);A.fetchers.set(Nr,Tt),Lt(Nr),nt.controller&&de.set(Nr,nt.controller)}),lt({fetchers:new Map(A.fetchers)});let wi=()=>xr.forEach(nt=>Lt(nt.key));Me.signal.addEventListener("abort",wi);let{loaderResults:Ci,fetcherResults:ot}=await Pn(Kn,xr,xn,_e);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",wi),q.delete(z),de.delete(z),xr.forEach(nt=>de.delete(nt.key)),A.fetchers.has(z)){let nt=gs(tt.data);A.fetchers.set(z,nt)}let Zt=Uf(Ci);if(Zt)return it(xn,Zt.result,!1,{preventScrollReset:ve});if(Zt=Uf(ot),Zt)return ie.add(Zt.key),it(xn,Zt.result,!1,{preventScrollReset:ve});let{loaderData:pn,errors:Nt}=g0(A,fr,Ci,void 0,xr,ot);Fa($n),A.navigation.state==="loading"&&$n>Ne?(at(C,"Expected pending action"),k&&k.abort(),Jt(A.navigation.location,{matches:fr,loaderData:pn,errors:Nt,fetchers:new Map(A.fetchers)})):(lt({errors:Nt,loaderData:y0(A.loaderData,pn,fr,Nt),fetchers:new Map(A.fetchers)}),G=!1)}async function mn(z,K,ee,pe,_e,we,Ie,ve,Te){let Re=A.fetchers.get(z);ln(z,du(Te,Re?Re.data:void 0),{flushSync:Ie});let Be=new AbortController,Me=Nl(n.history,ee,Be.signal);if(we){let tt=await sr(pe,new URL(Me.url).pathname,Me.signal,z);if(tt.type==="aborted")return;if(tt.type==="error"){Gn(z,K,tt.error,{flushSync:Ie});return}else if(tt.matches)pe=tt.matches;else{Gn(z,K,ni(404,{pathname:ee}),{flushSync:Ie});return}}let $e=Zf(pe,ee);de.set(z,Be);let st=Pe,xt=zl(l,u,Me,pe,$e,i,_e),Ut=(await An(Me,xt,_e,z))[$e.route.id];if(de.get(z)===Be&&de.delete(z),!Me.signal.aborted){if(ye.has(z)){ln(z,gs(void 0));return}if(Eo(Ut))if(Ne>st){ln(z,gs(void 0));return}else{ie.add(z),await it(Me,Ut,!1,{preventScrollReset:ve});return}if(jr(Ut)){Gn(z,K,Ut.error);return}ln(z,gs(Ut.data))}}async function it(z,K,ee,{submission:pe,fetcherSubmission:_e,preventScrollReset:we,replace:Ie}={}){ee||(I==null||I.resolve(),I=null),K.response.headers.has("X-Remix-Revalidate")&&(G=!0);let ve=K.response.headers.get("Location");at(ve,"Expected a Location header on the redirect Response"),ve=m0(ve,new URL(z.url),p,n.history);let Te=ku(A.location,ve,{_isRedirect:!0});if(t){let xt=!1;if(K.response.headers.has("X-Remix-Reload-Document"))xt=!0;else if(l_(ve)){const Ft=MA(ve,!0);xt=Ft.origin!==e.location.origin||si(Ft.pathname,p)==null}if(xt){Ie?e.location.replace(ve):e.location.assign(ve);return}}k=null;let Re=Ie===!0||K.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Be,formAction:Me,formEncType:$e}=A.navigation;!pe&&!_e&&Be&&Me&&$e&&(pe=E0(A.navigation));let st=pe||_e;if(mN.has(K.response.status)&&st&&Xn(st.formMethod))await be(Re,Te,{submission:{...st,formAction:ve},preventScrollReset:we||V,enableViewTransition:ee?L:void 0});else{let xt=Qg(Te,pe);await be(Re,Te,{overrideNavigation:xt,fetcherSubmission:_e,preventScrollReset:we||V,enableViewTransition:ee?L:void 0})}}async function An(z,K,ee,pe){var Ie;let _e,we={};try{_e=await AN(y,z,K,pe,ee,!1)}catch(ve){return K.filter(Te=>Te.shouldLoad).forEach(Te=>{we[Te.route.id]={type:"error",error:ve}}),we}if(z.signal.aborted)return we;if(!Xn(z.method))for(let ve of K){if(((Ie=_e[ve.route.id])==null?void 0:Ie.type)==="error")break;!_e.hasOwnProperty(ve.route.id)&&!A.loaderData.hasOwnProperty(ve.route.id)&&(!A.errors||!A.errors.hasOwnProperty(ve.route.id))&&ve.shouldCallHandler()&&(_e[ve.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ve.route.id}`)})}for(let[ve,Te]of Object.entries(_e))if(PN(Te)){let Re=Te.result;we[ve]={type:"redirect",response:IN(Re,z,ve,K,p)}}else we[ve]=await RN(Te);return we}async function Pn(z,K,ee,pe){let _e=An(ee,z,pe,null),we=Promise.all(K.map(async Te=>{if(Te.matches&&Te.match&&Te.request&&Te.controller){let Be=(await An(Te.request,Te.matches,pe,Te.key))[Te.match.route.id];return{[Te.key]:Be}}else return Promise.resolve({[Te.key]:{type:"error",error:ni(404,{pathname:Te.path})}})})),Ie=await _e,ve=(await we).reduce((Te,Re)=>Object.assign(Te,Re),{});return{loaderResults:Ie,fetcherResults:ve}}function Hr(){G=!0,se.forEach((z,K)=>{de.has(K)&&oe.add(K),Lt(K)})}function ln(z,K,ee={}){A.fetchers.set(z,K),lt({fetchers:new Map(A.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function Gn(z,K,ee,pe={}){let _e=va(A.matches,K);Vs(z),lt({errors:{[_e.route.id]:ee},fetchers:new Map(A.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function nr(z){return he.set(z,(he.get(z)||0)+1),ye.has(z)&&ye.delete(z),A.fetchers.get(z)||pN}function zo(z,K){Lt(z,K==null?void 0:K.reason),ln(z,gs(null))}function Vs(z){let K=A.fetchers.get(z);de.has(z)&&!(K&&K.state==="loading"&&q.has(z))&&Lt(z),se.delete(z),q.delete(z),ie.delete(z),ye.delete(z),oe.delete(z),A.fetchers.delete(z)}function Cr(z){let K=(he.get(z)||0)-1;K<=0?(he.delete(z),ye.add(z)):he.set(z,K),lt({fetchers:new Map(A.fetchers)})}function Lt(z,K){let ee=de.get(z);ee&&(ee.abort(K),de.delete(z))}function rr(z){for(let K of z){let ee=nr(K),pe=gs(ee.data);A.fetchers.set(K,pe)}}function Kt(){let z=[],K=!1;for(let ee of ie){let pe=A.fetchers.get(ee);at(pe,`Expected fetcher: ${ee}`),pe.state==="loading"&&(ie.delete(ee),z.push(ee),K=!0)}return rr(z),K}function Fa(z){let K=[];for(let[ee,pe]of q)if(pe<z){let _e=A.fetchers.get(ee);at(_e,`Expected fetcher: ${ee}`),_e.state==="loading"&&(Lt(ee),q.delete(ee),K.push(ee))}return rr(K),K.length>0}function Ls(z,K){let ee=A.blockers.get(z)||fu;return Ae.get(z)!==K&&Ae.set(z,K),ee}function qa(z){A.blockers.delete(z),Ae.delete(z)}function ir(z,K){let ee=A.blockers.get(z)||fu;at(ee.state==="unblocked"&&K.state==="blocked"||ee.state==="blocked"&&K.state==="blocked"||ee.state==="blocked"&&K.state==="proceeding"||ee.state==="blocked"&&K.state==="unblocked"||ee.state==="proceeding"&&K.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${K.state}`);let pe=new Map(A.blockers);pe.set(z,K),lt({blockers:pe})}function Si({currentLocation:z,nextLocation:K,historyAction:ee}){if(Ae.size===0)return;Ae.size>1&&tn(!1,"A router only supports one blocker at a time");let pe=Array.from(Ae.entries()),[_e,we]=pe[pe.length-1],Ie=A.blockers.get(_e);if(!(Ie&&Ie.state==="proceeding")&&we({currentLocation:z,nextLocation:K,historyAction:ee}))return _e}function Yt(z){let K=ni(404,{pathname:z}),ee=m||f,{matches:pe,route:_e}=jf(ee);return{notFoundMatches:pe,route:_e,error:K}}function Fr(z,K,ee){if(M=z,D=K,H=ee||null,!j&&A.navigation===Yg){j=!0;let pe=Bo(A.location,A.matches);pe!=null&&lt({restoreScrollPosition:pe})}return()=>{M=null,D=null,H=null}}function Rr(z,K){return H&&H(z,K.map(pe=>Bx(pe,A.loaderData)))||z.key}function Ir(z,K){if(M&&D){let ee=Rr(z,K);M[ee]=D()}}function Bo(z,K){if(M){let ee=Rr(z,K),pe=M[ee];if(typeof pe=="number")return pe}return null}function Yi(z,K,ee){if(n.patchRoutesOnNavigation)if(z){if(Object.keys(z[0].params).length>0)return{active:!0,matches:vu(K,ee,p,!0)}}else return{active:!0,matches:vu(K,ee,p,!0)||[]};return{active:!1,matches:null}}async function sr(z,K,ee,pe){if(!n.patchRoutesOnNavigation)return{type:"success",matches:z};let _e=z;for(;;){let we=m==null,Ie=m||f,ve=u;try{await n.patchRoutesOnNavigation({signal:ee,path:K,matches:_e,fetcherKey:pe,patch:(Be,Me)=>{ee.aborted||u0(Be,Me,Ie,ve,l,!1)}})}catch(Be){return{type:"error",error:Be,partialMatches:_e}}finally{we&&!ee.aborted&&(f=[...f])}if(ee.aborted)return{type:"aborted"};let Te=_a(Ie,K,p),Re=null;if(Te){if(Object.keys(Te[0].params).length===0)return{type:"success",matches:Te};if(Re=vu(Ie,K,p,!0),!(Re&&_e.length<Re.length&&Ai(_e,Re.slice(0,_e.length))))return{type:"success",matches:Te}}if(Re||(Re=vu(Ie,K,p,!0)),!Re||Ai(_e,Re))return{type:"success",matches:null};_e=Re}}function Ai(z,K){return z.length===K.length&&z.every((ee,pe)=>ee.route.id===K[pe].route.id)}function _c(z){u={},m=Vu(z,l,void 0,u)}function Qi(z,K,ee=!1){let pe=m==null;u0(z,K,m||f,u,l,ee),pe&&(f=[...f],lt({}))}return Y={get basename(){return p},get future(){return v},get state(){return A},get routes(){return f},get window(){return e},initialize:ze,subscribe:kt,enableScrollRestoration:Fr,navigate:In,fetch:Vt,revalidate:tr,createHref:z=>n.history.createHref(z),encodeLocation:z=>n.history.encodeLocation(z),getFetcher:nr,resetFetcher:zo,deleteFetcher:Cr,dispose:At,getBlocker:Ls,deleteBlocker:qa,patchRoutes:Qi,_internalFetchControllers:de,_internalSetRoutes:_c,_internalSetStateDoNotUseOrYouWillBreakYourApp(z){lt(z)}},n.unstable_instrumentations&&(Y=aN(Y,n.unstable_instrumentations.map(z=>z.router).filter(Boolean))),Y}function _N(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ty(n,e,t,i,a,l){let u,f;if(a){u=[];for(let p of e)if(u.push(p),p.route.id===a){f=p;break}}else u=e,f=e[e.length-1];let m=tm(i||".",em(u),si(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&f){let p=h_(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let y=new URLSearchParams(m.search),v=y.getAll("index");y.delete("index"),v.filter(w=>w).forEach(w=>y.append("index",w));let b=y.toString();m.search=b?`?${b}`:""}}return t!=="/"&&(m.pathname=eN({basename:t,pathname:m.pathname})),Gi(m)}function l0(n,e,t){if(!t||!_N(t))return{path:e};if(t.formMethod&&!LN(t.formMethod))return{path:e,error:ni(405,{method:t.formMethod})};let i=()=>({path:e,error:ni(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),u=XA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Xn(l))return i();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[w,M])=>`${b}${w}=${M}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!Xn(l))return i();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}at(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=Ay(t.formData),m=t.formData;else if(t.body instanceof FormData)f=Ay(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=p0(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=p0(f)}catch{return i()}let p={formMethod:l,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Xn(p.formMethod))return{path:e,submission:p};let y=Ms(e);return n&&y.search&&h_(y.search)&&f.append("index",""),y.search=`?${f}`,{path:Gi(y),submission:p}}function c0(n,e,t,i,a,l,u,f,m,p,y,v,b,w,M,H,D,j,P,U,F){var ge;let X=U?jr(U[1])?U[1].error:U[1].data:void 0,Y=a.createURL(l.location),A=a.createURL(m),C;if(y&&l.errors){let G=Object.keys(l.errors)[0];C=u.findIndex(oe=>oe.route.id===G)}else if(U&&jr(U[1])){let G=U[0];C=u.findIndex(oe=>oe.route.id===G)-1}let I=U?U[1].statusCode:void 0,V=I&&I>=400,k={currentUrl:Y,currentParams:((ge=l.matches[0])==null?void 0:ge.params)||{},nextUrl:A,nextParams:u[0].params,...f,actionResult:X,actionStatus:I},L=Zu(u),x=u.map((G,oe)=>{let{route:de}=G,Pe=null;if(C!=null&&oe>C?Pe=!1:de.lazy?Pe=!0:c_(de)?y?Pe=by(de,l.loaderData,l.errors):vN(l.loaderData,l.matches[oe],G)&&(Pe=!0):Pe=!1,Pe!==null)return Sy(t,i,n,L,G,p,e,Pe);let Ne=!1;typeof F=="boolean"?Ne=F:V?Ne=!1:(v||Y.pathname+Y.search===A.pathname+A.search||Y.search!==A.search||EN(l.matches[oe],G))&&(Ne=!0);let q={...k,defaultShouldRevalidate:Ne},ie=wu(G,q);return Sy(t,i,n,L,G,p,e,ie,q,F)}),me=[];return M.forEach((G,oe)=>{if(y||!u.some(ye=>ye.route.id===G.routeId)||w.has(oe))return;let de=l.fetchers.get(oe),Pe=de&&de.state!=="idle"&&de.data===void 0,Ne=_a(D,G.path,j);if(!Ne){if(P&&Pe)return;me.push({key:oe,routeId:G.routeId,path:G.path,matches:null,match:null,request:null,controller:null});return}if(H.has(oe))return;let q=Zf(Ne,G.path),ie=new AbortController,se=Nl(a,G.path,ie.signal),he=null;if(b.has(oe))b.delete(oe),he=zl(t,i,se,Ne,q,p,e);else if(Pe)v&&(he=zl(t,i,se,Ne,q,p,e));else{let ye;typeof F=="boolean"?ye=F:V?ye=!1:ye=v;let Ae={...k,defaultShouldRevalidate:ye};wu(q,Ae)&&(he=zl(t,i,se,Ne,q,p,e,Ae))}he&&me.push({key:oe,routeId:G.routeId,path:G.path,matches:he,match:q,request:se,controller:ie})}),{dsMatches:x,revalidatingFetchers:me}}function c_(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function by(n,e,t){if(n.lazy)return!0;if(!c_(n))return!1;let i=e!=null&&n.id in e,a=t!=null&&t[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function vN(n,e,t){let i=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return i||a}function EN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function wu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function u0(n,e,t,i,a,l){let u;if(n){let p=i[n];at(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),u=p.children}else u=t;let f=[],m=[];if(e.forEach(p=>{let y=u.find(v=>GA(p,v));y?m.push({existingRoute:y,newRoute:p}):f.push(p)}),f.length>0){let p=Vu(f,a,[n||"_","patch",String((u==null?void 0:u.length)||"0")],i);u.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:v}=m[p],b=y,[w]=Vu([v],a,[],{},!0);Object.assign(b,{element:w.element?w.element:b.element,errorElement:w.errorElement?w.errorElement:b.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:b.hydrateFallbackElement})}}function GA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var a;return(a=e.children)==null?void 0:a.some(l=>GA(t,l))}):!1}var h0=new WeakMap,$A=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let a=t[e.id];if(at(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[n];if(!l)return;let u=h0.get(a);u||(u={},h0.set(a,u));let f=u[n];if(f)return f;let m=(async()=>{let p=Lx(n),v=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)tn(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),u[n]=Promise.resolve();else if(v)tn(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(a,{[n]:b}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(b=>b===void 0)&&(a.lazy=void 0))})();return u[n]=m,m},f0=new WeakMap;function TN(n,e,t,i,a){let l=t[n.id];if(at(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=f0.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let v=(async()=>{at(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),w={};for(let M in b){let H=b[M];if(H===void 0)continue;let D=Ux(M),P=l[M]!==void 0&&M!=="hasErrorBoundary";D?tn(!D,"Route property "+M+" is not a supported property to be returned from a lazy route function. This property will be ignored."):P?tn(!P,`Route "${l.id}" has a static property "${M}" defined but its lazy function is also returning a value for this property. The lazy route property "${M}" will be ignored.`):w[M]=H}Object.assign(l,w),Object.assign(l,{...i(l),lazy:void 0})})();return f0.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(n.lazy),f=[],m;for(let y of u){if(a&&a.includes(y))continue;let v=$A({key:y,route:n,manifest:t,mapRouteProperties:i});v&&(f.push(v),y===e&&(m=v))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p==null||p.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function d0(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,l)=>{t[e[l].route.id]=a}),t}async function bN(n){return n.matches.some(e=>e.route.middleware)?KA(n,()=>d0(n)):d0(n)}function KA(n,e){return SN(n,e,i=>{if(VN(i))throw i;return i},ON,t);function t(i,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:i}}));{let{matches:u}=n,f=Math.min(Math.max(u.findIndex(p=>p.route.id===a),0),Math.max(u.findIndex(p=>p.shouldCallHandler()),0)),m=va(u,u[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:i}})}}}async function SN(n,e,t,i,a){let{matches:l,request:u,params:f,context:m,unstable_pattern:p}=n,y=l.flatMap(b=>b.route.middleware?b.route.middleware.map(w=>[b.route.id,w]):[]);return await YA({request:u,params:f,context:m,unstable_pattern:p},y,e,t,i,a)}async function YA(n,e,t,i,a,l,u=0){let{request:f}=n;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=e[u];if(!m)return await t();let[p,y]=m,v,b=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await YA(n,e,t,i,a,l,u+1)},v.value}catch(w){return v={value:await l(w,p,v)},v.value}};try{let w=await y(n,b),M=w!=null?i(w):void 0;return a(M)?M:v?M??v.value:(v={value:await b()},v.value)}catch(w){return await l(w,p,v)}}function QA(n,e,t,i,a){let l=$A({key:"middleware",route:i.route,manifest:e,mapRouteProperties:n}),u=TN(i.route,Xn(t.method)?"action":"loader",e,n,a);return{middleware:l,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function Sy(n,e,t,i,a,l,u,f,m=null,p){let y=!1,v=QA(n,e,t,a,l);return{...a,_lazyPromises:v,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(b){return y=!0,m?typeof p=="boolean"?wu(a,{...m,defaultShouldRevalidate:p}):typeof b=="boolean"?wu(a,{...m,defaultShouldRevalidate:b}):wu(a,m):f},resolve(b){let{lazy:w,loader:M,middleware:H}=a.route,D=y||f||b&&!Xn(t.method)&&(w||M),j=H&&H.length>0&&!M&&!w;return D&&(Xn(t.method)||!j)?wN({request:t,unstable_pattern:i,match:a,lazyHandlerPromise:v==null?void 0:v.handler,lazyRoutePromise:v==null?void 0:v.route,handlerOverride:b,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function zl(n,e,t,i,a,l,u,f=null){return i.map(m=>m.route.id!==a.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:QA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Sy(n,e,t,Zu(i),m,l,u,!0,f))}async function AN(n,e,t,i,a,l){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let u={request:e,unstable_pattern:Zu(t),params:t[0].params,context:a,matches:t},m=await n({...u,fetcherKey:i,runClientMiddleware:p=>{let y=u;return KA(y,()=>p({...y,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,v;return[(y=p._lazyPromises)==null?void 0:y.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return m}async function wN({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:u}){let f,m,p=Xn(n.method),y=p?"action":"loader",v=b=>{let w,M=new Promise((j,P)=>w=P);m=()=>w(),n.signal.addEventListener("abort",m);let H=j=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:u},...j!==void 0?[j]:[]),D=(async()=>{try{return{type:"data",result:await(l?l(P=>H(P)):H())}}catch(j){return{type:"error",result:j}}})();return Promise.race([D,M])};try{let b=p?t.route.action:t.route.loader;if(i||a)if(b){let w,[M]=await Promise.all([v(b).catch(H=>{w=H}),i,a]);if(w!==void 0)throw w;f=M}else{await i;let w=p?t.route.action:t.route.loader;if(w)[f]=await Promise.all([v(w),a]);else if(y==="action"){let M=new URL(n.url),H=M.pathname+M.search;throw ni(405,{method:n.method,pathname:H,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)f=await v(b);else{let w=new URL(n.url),M=w.pathname+w.search;throw ni(404,{pathname:M})}}catch(b){return{type:"error",result:b}}finally{m&&n.signal.removeEventListener("abort",m)}return f}async function CN(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function RN(n){var i,a,l,u,f;let{result:e,type:t}=n;if(u_(e)){let m;try{m=await CN(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Ju(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?v0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:DN(e),statusCode:Lu(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Lu(e)?e.status:void 0}:v0(e)?{type:"data",data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function IN(n,e,t,i,a){let l=n.headers.get("Location");if(at(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!l_(l)){let u=i.slice(0,i.findIndex(f=>f.route.id===t)+1);l=Ty(new URL(e.url),u,a,l),n.headers.set("Location",l)}return n}function m0(n,e,t,i){let a=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(l_(n)){let l=n,u=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(a.includes(u.protocol))throw new Error("Invalid redirect location");let f=si(u.pathname,t)!=null;if(u.origin===e.origin&&f)return u.pathname+u.search+u.hash}try{let l=i.createURL(n);if(a.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Nl(n,e,t,i){let a=n.createURL(XA(e)).toString(),l={signal:t};if(i&&Xn(i.formMethod)){let{formMethod:u,formEncType:f}=i;l.method=u.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(i.json)):f==="text/plain"?l.body=i.text:f==="application/x-www-form-urlencoded"&&i.formData?l.body=Ay(i.formData):l.body=i.formData}return new Request(a,l)}function Ay(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function p0(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function xN(n,e,t,i=!1,a=!1){let l={},u=null,f,m=!1,p={},y=t&&jr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let b=v.route.id,w=e[b];if(at(!Eo(w),"Cannot handle redirect results in processLoaderData"),jr(w)){let M=w.error;if(y!==void 0&&(M=y,y=void 0),u=u||{},a)u[b]=M;else{let H=va(n,b);u[H.route.id]==null&&(u[H.route.id]=M)}i||(l[b]=qA),m||(m=!0,f=Lu(w.error)?w.error.status:500),w.headers&&(p[b]=w.headers)}else l[b]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(p[b]=w.headers)}),y!==void 0&&t&&(u={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:u,statusCode:f||200,loaderHeaders:p}}function g0(n,e,t,i,a,l){let{loaderData:u,errors:f}=xN(e,t,i);return a.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:v}=m;if(v&&v.signal.aborted)return;let b=l[p];if(at(b,"Did not find corresponding fetcher result"),jr(b)){let w=va(n.matches,y==null?void 0:y.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:b.error}),n.fetchers.delete(p)}else if(Eo(b))at(!1,"Unhandled fetcher revalidation redirect");else{let w=gs(b.data);n.fetchers.set(p,w)}}),{loaderData:u,errors:f}}function y0(n,e,t,i){let a=Object.entries(e).filter(([,l])=>l!==qA).reduce((l,[u,f])=>(l[u]=f,l),{});for(let l of t){let u=l.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&l.route.loader&&(a[u]=n[u]),i&&i.hasOwnProperty(u))break}return a}function _0(n){return n?jr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function va(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function jf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ni(n,{pathname:e,routeId:t,method:i,type:a,message:l}={}){let u="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(u="Bad Request",i&&e&&t?f=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(u="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",f=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",i&&e&&t?f=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(f=`Invalid request method "${i.toUpperCase()}"`)),new Ju(n||500,u,new Error(f),!0)}function Uf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,a]=e[t];if(Eo(a))return{key:i,result:a}}}function XA(n){let e=typeof n=="string"?Ms(n):n;return Gi({...e,hash:""})}function NN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function DN(n){var e,t;return new Ju(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function ON(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&MN(t))}function MN(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function PN(n){return u_(n.result)&&HA.has(n.result.status)}function jr(n){return n.type==="error"}function Eo(n){return(n&&n.type)==="redirect"}function v0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function u_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function kN(n){return HA.has(n)}function VN(n){return u_(n)&&kN(n.status)&&n.headers.has("Location")}function LN(n){return dN.has(n.toUpperCase())}function Xn(n){return hN.has(n.toUpperCase())}function h_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Zf(n,e){let t=typeof e=="string"?Ms(e).search:e.search;if(n[n.length-1].route.index&&h_(t||""))return n[n.length-1];let i=LA(n);return i[i.length-1]}function E0(n){let{formMethod:e,formAction:t,formEncType:i,text:a,formData:l,json:u}=n;if(!(!e||!t||!i)){if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:u,text:void 0}}}function Qg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function jN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function du(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function UN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function gs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function zN(n,e){try{let t=n.sessionStorage.getItem(FA);if(t){let i=JSON.parse(t);for(let[a,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function BN(n,e){if(e.size>0){let t={};for(let[i,a]of e)t[i]=[...a];try{n.sessionStorage.setItem(FA,JSON.stringify(t))}catch(i){tn(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function T0(){let n,e,t=new Promise((i,a)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Po=O.createContext(null);Po.displayName="DataRouter";var eh=O.createContext(null);eh.displayName="DataRouterState";var WA=O.createContext(!1);function HN(){return O.useContext(WA)}var f_=O.createContext({isTransitioning:!1});f_.displayName="ViewTransition";var JA=O.createContext(new Map);JA.displayName="Fetchers";var FN=O.createContext(null);FN.displayName="Await";var Br=O.createContext(null);Br.displayName="Navigation";var nm=O.createContext(null);nm.displayName="Location";var ai=O.createContext({outlet:null,matches:[],isDataRoute:!1});ai.displayName="Route";var d_=O.createContext(null);d_.displayName="RouteError";var ZA="REACT_ROUTER_ERROR",qN="REDIRECT",GN="ROUTE_ERROR_RESPONSE";function $N(n){if(n.startsWith(`${ZA}:${qN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function KN(n){if(n.startsWith(`${ZA}:${GN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ju(e.status,e.statusText,e.data)}catch{}}function YN(n,{relative:e}={}){at(oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=O.useContext(Br),{hash:a,pathname:l,search:u}=th(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:zi([t,l])),i.createHref({pathname:f,search:u,hash:a})}function oc(){return O.useContext(nm)!=null}function oi(){return at(oc(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(nm).location}var e1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function t1(n){O.useContext(Br).static||O.useLayoutEffect(n)}function ko(){let{isDataRoute:n}=O.useContext(ai);return n?cD():QN()}function QN(){at(oc(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(Po),{basename:e,navigator:t}=O.useContext(Br),{matches:i}=O.useContext(ai),{pathname:a}=oi(),l=JSON.stringify(em(i)),u=O.useRef(!1);return t1(()=>{u.current=!0}),O.useCallback((m,p={})=>{if(tn(u.current,e1),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=tm(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:zi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var XN=O.createContext(null);function WN(n){let e=O.useContext(ai).outlet;return O.useMemo(()=>e&&O.createElement(XN.Provider,{value:n},e),[e,n])}function Ps(){let{matches:n}=O.useContext(ai),e=n[n.length-1];return e?e.params:{}}function th(n,{relative:e}={}){let{matches:t}=O.useContext(ai),{pathname:i}=oi(),a=JSON.stringify(em(t));return O.useMemo(()=>tm(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function JN(n,e,t,i,a){at(oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(Br),{matches:u}=O.useContext(ai),f=u[u.length-1],m=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let P=v&&v.path||"";r1(p,!v||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let b=oi(),w;w=b;let M=w.pathname||"/",H=M;if(y!=="/"){let P=y.replace(/^\//,"").split("/");H="/"+M.replace(/^\//,"").split("/").slice(P.length).join("/")}let D=_a(n,{pathname:H});return tn(v||D!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),tn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),rD(D&&D.map(P=>Object.assign({},P,{params:Object.assign({},m,P.params),pathname:zi([y,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?y:zi([y,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),u,t,i,a)}function ZN(){let n=lD(),e=Lu(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:a},t):null,u)}var eD=O.createElement(ZN,null),n1=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=KN(n.digest);t&&(n=t)}let e=n!==void 0?O.createElement(ai.Provider,{value:this.props.routeContext},O.createElement(d_.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?O.createElement(tD,{error:n},e):e}};n1.contextType=WA;var Xg=new WeakMap;function tD({children:n,error:e}){let{basename:t}=O.useContext(Br);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=$N(e.digest);if(i){let a=Xg.get(e);if(a)throw a;let l=UA(i.location,t);if(jA&&!Xg.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Xg.set(e,u),u}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function nD({routeContext:n,match:e,children:t}){let i=O.useContext(Po);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(ai.Provider,{value:n},t)}function rD(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t==null?void 0:t.errors;if(u!=null){let y=l.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);at(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:b,errors:w}=t,M=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||M){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&i?(y,v)=>{var b,w;i(y,{location:t.location,params:((w=(b=t.matches)==null?void 0:b[0])==null?void 0:w.params)??{},unstable_pattern:Zu(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,b)=>{let w,M=!1,H=null,D=null;t&&(w=u&&v.route.id?u[v.route.id]:void 0,H=v.route.errorElement||eD,f&&(m<0&&b===0?(r1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,D=null):m===b&&(M=!0,D=v.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,b+1)),P=()=>{let U;return w?U=H:M?U=D:v.route.Component?U=O.createElement(v.route.Component,null):v.route.element?U=v.route.element:U=y,O.createElement(nD,{match:v,routeContext:{outlet:y,matches:j,isDataRoute:t!=null},children:U})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?O.createElement(n1,{location:t.location,revalidation:t.revalidation,component:H,error:w,children:P(),routeContext:{outlet:null,matches:j,isDataRoute:!0},onError:p}):P()},null)}function m_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function iD(n){let e=O.useContext(Po);return at(e,m_(n)),e}function sD(n){let e=O.useContext(eh);return at(e,m_(n)),e}function aD(n){let e=O.useContext(ai);return at(e,m_(n)),e}function p_(n){let e=aD(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function oD(){return p_("useRouteId")}function lD(){var i;let n=O.useContext(d_),e=sD("useRouteError"),t=p_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function cD(){let{router:n}=iD("useNavigate"),e=p_("useNavigate"),t=O.useRef(!1);return t1(()=>{t.current=!0}),O.useCallback(async(a,l={})=>{tn(t.current,e1),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var b0={};function r1(n,e,t){!e&&!b0[n]&&(b0[n]=!0,tn(!1,t))}var S0={};function A0(n,e){!n&&!S0[e]&&(S0[e]=!0,console.warn(e))}var uD="useOptimistic",w0=nx[uD],hD=()=>{};function fD(n){return w0?w0(n):[n,hD]}function dD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:O.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:O.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:O.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var mD=["HydrateFallback","hydrateFallbackElement"],pD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function gD({router:n,flushSync:e,onError:t,unstable_useTransitions:i}){i=HN()||i;let[l,u]=O.useState(n.state),[f,m]=fD(l),[p,y]=O.useState(),[v,b]=O.useState({isTransitioning:!1}),[w,M]=O.useState(),[H,D]=O.useState(),[j,P]=O.useState(),U=O.useRef(new Map),F=O.useCallback((C,{deletedFetchers:I,newErrors:V,flushSync:k,viewTransitionOpts:L})=>{V&&t&&Object.values(V).forEach(me=>{var ge;return t(me,{location:C.location,params:((ge=C.matches[0])==null?void 0:ge.params)??{},unstable_pattern:Zu(C.matches)})}),C.fetchers.forEach((me,ge)=>{me.data!==void 0&&U.current.set(ge,me.data)}),I.forEach(me=>U.current.delete(me)),A0(k===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(A0(L==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!L||!x){e&&k?e(()=>u(C)):i===!1?u(C):O.startTransition(()=>{i===!0&&m(me=>C0(me,C)),u(C)});return}if(e&&k){e(()=>{H&&(w==null||w.resolve(),H.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:L.currentLocation,nextLocation:L.nextLocation})});let me=n.window.document.startViewTransition(()=>{e(()=>u(C))});me.finished.finally(()=>{e(()=>{M(void 0),D(void 0),y(void 0),b({isTransitioning:!1})})}),e(()=>D(me));return}H?(w==null||w.resolve(),H.skipTransition(),P({state:C,currentLocation:L.currentLocation,nextLocation:L.nextLocation})):(y(C),b({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}))},[n.window,e,H,w,i,m,t]);O.useLayoutEffect(()=>n.subscribe(F),[n,F]),O.useEffect(()=>{v.isTransitioning&&!v.flushSync&&M(new pD)},[v]),O.useEffect(()=>{if(w&&p&&n.window){let C=p,I=w.promise,V=n.window.document.startViewTransition(async()=>{i===!1?u(C):O.startTransition(()=>{i===!0&&m(k=>C0(k,C)),u(C)}),await I});V.finished.finally(()=>{M(void 0),D(void 0),y(void 0),b({isTransitioning:!1})}),D(V)}},[p,w,n.window,i,m]),O.useEffect(()=>{w&&p&&f.location.key===p.location.key&&w.resolve()},[w,H,f.location,p]),O.useEffect(()=>{!v.isTransitioning&&j&&(y(j.state),b({isTransitioning:!0,flushSync:!1,currentLocation:j.currentLocation,nextLocation:j.nextLocation}),P(void 0))},[v.isTransitioning,j]);let X=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:C=>n.navigate(C),push:(C,I,V)=>n.navigate(C,{state:I,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(C,I,V)=>n.navigate(C,{replace:!0,state:I,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),Y=n.basename||"/",A=O.useMemo(()=>({router:n,navigator:X,static:!1,basename:Y,onError:t}),[n,X,Y,t]);return O.createElement(O.Fragment,null,O.createElement(Po.Provider,{value:A},O.createElement(eh.Provider,{value:f},O.createElement(JA.Provider,{value:U.current},O.createElement(f_.Provider,{value:v},O.createElement(vD,{basename:Y,location:f.location,navigationType:f.historyAction,navigator:X,unstable_useTransitions:i},O.createElement(yD,{routes:n.routes,future:n.future,state:f,onError:t})))))),null)}function C0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var yD=O.memo(_D);function _D({routes:n,future:e,state:t,onError:i}){return JN(n,void 0,t,i,e)}function wa({to:n,replace:e,state:t,relative:i}){at(oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=O.useContext(Br);tn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=O.useContext(ai),{pathname:u}=oi(),f=ko(),m=tm(n,em(l),u,i==="path"),p=JSON.stringify(m);return O.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:i})},[f,p,i,e,t]),null}function i1(n){return WN(n.context)}function vD({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){at(!oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[f,a,l,u]);typeof t=="string"&&(t=Ms(t));let{pathname:p="/",search:y="",hash:v="",state:b=null,key:w="default"}=t,M=O.useMemo(()=>{let H=si(p,f);return H==null?null:{location:{pathname:H,search:y,hash:v,state:b,key:w},navigationType:i}},[f,p,y,v,b,w,i]);return tn(M!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:O.createElement(Br.Provider,{value:m},O.createElement(nm.Provider,{children:e,value:M}))}var ed="get",td="application/x-www-form-urlencoded";function rm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ED(n){return rm(n)&&n.tagName.toLowerCase()==="button"}function TD(n){return rm(n)&&n.tagName.toLowerCase()==="form"}function bD(n){return rm(n)&&n.tagName.toLowerCase()==="input"}function SD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function AD(n,e){return n.button===0&&(!e||e==="_self")&&!SD(n)}function wy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(a=>[t,a]):[[t,i]])},[]))}function wD(n,e){let t=wy(n);return e&&e.forEach((i,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var zf=null;function CD(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var RD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wg(n){return n!=null&&!RD.has(n)?(tn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${td}"`),null):n}function ID(n,e){let t,i,a,l,u;if(TD(n)){let f=n.getAttribute("action");i=f?si(f,e):null,t=n.getAttribute("method")||ed,a=Wg(n.getAttribute("enctype"))||td,l=new FormData(n)}else if(ED(n)||bD(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?si(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||ed,a=Wg(n.getAttribute("formenctype"))||Wg(f.getAttribute("enctype"))||td,l=new FormData(f,n),!CD()){let{name:p,type:y,value:v}=n;if(y==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,v)}}else{if(rm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ed,i=null,a=td,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function g_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xD(n,e,t,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&si(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function ND(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function OD(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await ND(l,t);return u.links?u.links():[]}return[]}));return VD(i.flat(1).filter(DD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function R0(n,e,t,i,a,l){let u=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>u(m,p)||f(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function MD(n,e,{includeHydrateFallback:t}={}){return PD(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function PD(n){return[...new Set(n)]}function kD(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function VD(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(kD(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function s1(){let n=O.useContext(Po);return g_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function LD(){let n=O.useContext(eh);return g_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var y_=O.createContext(void 0);y_.displayName="FrameworkContext";function a1(){let n=O.useContext(y_);return g_(n,"You must render this element inside a <HydratedRouter> element"),n}function jD(n,e){let t=O.useContext(y_),[i,a]=O.useState(!1),[l,u]=O.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,b=O.useRef(null);O.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let H=j=>{j.forEach(P=>{u(P.isIntersecting)})},D=new IntersectionObserver(H,{threshold:.5});return b.current&&D.observe(b.current),()=>{D.disconnect()}}},[n]),O.useEffect(()=>{if(i){let H=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(H)}}},[i]);let w=()=>{a(!0)},M=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:mu(f,w),onBlur:mu(m,M),onMouseEnter:mu(p,w),onMouseLeave:mu(y,M),onTouchStart:mu(v,w)}]:[!1,b,{}]}function mu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function UD({page:n,...e}){let{router:t}=s1(),i=O.useMemo(()=>_a(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?O.createElement(BD,{page:n,matches:i,...e}):null}function zD(n){let{manifest:e,routeModules:t}=a1(),[i,a]=O.useState([]);return O.useEffect(()=>{let l=!1;return OD(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function BD({page:n,matches:e,...t}){let i=oi(),{future:a,manifest:l,routeModules:u}=a1(),{basename:f}=s1(),{loaderData:m,matches:p}=LD(),y=O.useMemo(()=>R0(n,e,p,l,i,"data"),[n,e,p,l,i]),v=O.useMemo(()=>R0(n,e,p,l,i,"assets"),[n,e,p,l,i]),b=O.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let H=new Set,D=!1;if(e.forEach(P=>{var F;let U=l.routes[P.route.id];!U||!U.hasLoader||(!y.some(X=>X.route.id===P.route.id)&&P.route.id in m&&((F=u[P.route.id])!=null&&F.shouldRevalidate)||U.hasClientLoader?D=!0:H.add(P.route.id))}),H.size===0)return[];let j=xD(n,f,a.unstable_trailingSlashAwareDataRequests,"data");return D&&H.size>0&&j.searchParams.set("_routes",e.filter(P=>H.has(P.route.id)).map(P=>P.route.id).join(",")),[j.pathname+j.search]},[f,a.unstable_trailingSlashAwareDataRequests,m,i,l,y,e,n,u]),w=O.useMemo(()=>MD(v,l),[v,l]),M=zD(v);return O.createElement(O.Fragment,null,b.map(H=>O.createElement("link",{key:H,rel:"prefetch",as:"fetch",href:H,...t})),w.map(H=>O.createElement("link",{key:H,rel:"modulepreload",href:H,...t})),M.map(({key:H,link:D})=>O.createElement("link",{key:H,nonce:t.nonce,...D,crossOrigin:D.crossOrigin??t.crossOrigin})))}function HD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var FD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{FD&&(window.__reactRouterVersion="7.13.0")}catch{}function qD(n,e){return yN({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Mx({window:e==null?void 0:e.window}),hydrationData:GD(),routes:n,mapRouteProperties:dD,hydrationRouteProperties:mD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function GD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:$D(n.errors)}),n}function $D(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")t[i]=new Ju(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let u=new l(a.message);u.stack="",t[i]=u}catch{}}if(t[i]==null){let l=new Error(a.message);l.stack="",t[i]=l}}else t[i]=a;return t}var o1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l1=O.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:f,target:m,to:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...w},M){let{basename:H,unstable_useTransitions:D}=O.useContext(Br),j=typeof p=="string"&&o1.test(p),P=UA(p,H);p=P.to;let U=YN(p,{relative:a}),[F,X,Y]=jD(i,w),A=XD(p,{replace:u,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:D});function C(V){e&&e(V),V.defaultPrevented||A(V)}let I=O.createElement("a",{...w,...Y,href:P.absoluteURL||U,onClick:P.isExternal||l?e:C,ref:HD(M,X),target:m,"data-discover":!j&&t==="render"?"true":void 0});return F&&!j?O.createElement(O.Fragment,null,I,O.createElement(UD,{page:U})):I});l1.displayName="Link";var KD=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:f,children:m,...p},y){let v=th(u,{relative:p.relative}),b=oi(),w=O.useContext(eh),{navigator:M,basename:H}=O.useContext(Br),D=w!=null&&n2(v)&&f===!0,j=M.encodeLocation?M.encodeLocation(v).pathname:v.pathname,P=b.pathname,U=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(P=P.toLowerCase(),U=U?U.toLowerCase():null,j=j.toLowerCase()),U&&H&&(U=si(U,H)||U);const F=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let X=P===j||!a&&P.startsWith(j)&&P.charAt(F)==="/",Y=U!=null&&(U===j||!a&&U.startsWith(j)&&U.charAt(j.length)==="/"),A={isActive:X,isPending:Y,isTransitioning:D},C=X?e:void 0,I;typeof i=="function"?I=i(A):I=[i,X?"active":null,Y?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(A):l;return O.createElement(l1,{...p,"aria-current":C,className:I,ref:y,style:V,to:u,viewTransition:f},typeof m=="function"?m(A):m)});KD.displayName="NavLink";var YD=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=ed,action:f,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...w},M)=>{let{unstable_useTransitions:H}=O.useContext(Br),D=e2(),j=t2(f,{relative:p}),P=u.toLowerCase()==="get"?"get":"post",U=typeof f=="string"&&o1.test(f),F=X=>{if(m&&m(X),X.defaultPrevented)return;X.preventDefault();let Y=X.nativeEvent.submitter,A=(Y==null?void 0:Y.getAttribute("formmethod"))||u,C=()=>D(Y||X.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b});H&&t!==!1?O.startTransition(()=>C()):C()};return O.createElement("form",{ref:M,method:P,action:j,onSubmit:i?m:F,...w,"data-discover":!U&&n==="render"?"true":void 0})});YD.displayName="Form";function QD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c1(n){let e=O.useContext(Po);return at(e,QD(n)),e}function XD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=ko(),y=oi(),v=th(n,{relative:l});return O.useCallback(b=>{if(AD(b,e)){b.preventDefault();let w=t!==void 0?t:Gi(y)===Gi(v),M=()=>p(n,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f});m?O.startTransition(()=>M()):M()}},[y,p,v,t,i,e,n,a,l,u,f,m])}function WD(n){tn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=O.useRef(wy(n)),t=O.useRef(!1),i=oi(),a=O.useMemo(()=>wD(i.search,t.current?null:e.current),[i.search]),l=ko(),u=O.useCallback((f,m)=>{const p=wy(typeof f=="function"?f(new URLSearchParams(a)):f);t.current=!0,l("?"+p,m)},[l,a]);return[a,u]}var JD=0,ZD=()=>`__${String(++JD)}__`;function e2(){let{router:n}=c1("useSubmit"),{basename:e}=O.useContext(Br),t=oD(),i=n.fetch,a=n.navigate;return O.useCallback(async(l,u={})=>{let{action:f,method:m,encType:p,formData:y,body:v}=ID(l,e);if(u.navigate===!1){let b=u.fetcherKey||ZD();await i(b,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||p,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,a,e,t])}function t2(n,{relative:e}={}){let{basename:t}=O.useContext(Br),i=O.useContext(ai);at(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...th(n||".",{relative:e})},u=oi();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:zi([t,l.pathname])),Gi(l)}function n2(n,{relative:e}={}){let t=O.useContext(f_);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=c1("useViewTransitionState"),a=th(n,{relative:e});if(!t.isTransitioning)return!1;let l=si(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=si(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Sd(a.pathname,u)!=null||Sd(a.pathname,l)!=null}var u1=xA();function r2(n){return O.createElement(gD,{flushSync:u1.flushSync,...n})}const i2=O.createContext(void 0),Mn=()=>Rx(),Ve=Nx.withTypes(),s2=({children:n})=>{const e=Ve(t=>t.auth.loading);return E.jsx(i2.Provider,{value:{isLoading:e},children:n})},a2=()=>{};var I0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},o2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},f1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let b=(f&15)<<2|p>>6,w=p&63;m||(w=64,u||(b=64)),i.push(t[y],t[v],t[b],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(h1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):o2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new l2;const b=l<<2|f>>4;if(i.push(b),p!==64){const w=f<<4&240|p>>2;if(i.push(w),v!==64){const M=p<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class l2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c2=function(n){const e=h1(n);return f1.encodeByteArray(e,!0)},Ad=function(n){return c2(n).replace(/\./g,"")},d1=function(n){try{return f1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=()=>u2().__FIREBASE_DEFAULTS__,f2=()=>{if(typeof process>"u"||typeof I0>"u")return;const n=I0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},d2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&d1(n[1]);return e&&JSON.parse(e)},im=()=>{try{return a2()||h2()||f2()||d2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},m1=n=>{var e,t;return(t=(e=im())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},m2=n=>{const e=m1(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},p1=()=>{var n;return(n=im())==null?void 0:n.config},g1=n=>{var e;return(e=im())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function y1(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ad(JSON.stringify(t)),Ad(JSON.stringify(u)),""].join(".")}const Cu={};function y2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?n.emulator.push(e):n.prod.push(e);return n}function _2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let x0=!1;function _1(n,e){if(typeof window>"u"||typeof document>"u"||!lc(window.location.host)||Cu[n]===e||Cu[n]||x0)return;Cu[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=y2().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{x0=!0,u()},b}function y(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=_2(i),w=t("text"),M=document.getElementById(w)||document.createElement("span"),H=t("learnmore"),D=document.getElementById(H)||document.createElement("a"),j=t("preprendIcon"),P=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const U=b.element;f(U),y(D,H);const F=p();m(P,j),U.append(P,M,D,F),document.body.appendChild(U)}l?(M.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(er())}function E2(){var e;const n=(e=im())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function S2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function A2(){const n=er();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function w2(){return!E2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function C2(){try{return typeof indexedDB=="object"}catch{return!1}}function R2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="FirebaseError";class ks extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=I2,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nh.prototype.create)}}class nh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?x2(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new ks(a,f,i)}}function x2(n,e){return n.replace(N2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const N2=/\{\$([^}]+)}/g;function D2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(N0(l)&&N0(u)){if(!Ro(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function N0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function O2(n,e){const t=new M2(n,e);return t.subscribe.bind(t)}class M2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");P2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Jg),a.error===void 0&&(a.error=Jg),a.complete===void 0&&(a.complete=Jg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(n){return n&&n._delegate?n._delegate:n}class Io{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new p2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(L2(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:V2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V2(n){return n===_o?void 0:n}function L2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new k2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const U2={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},z2=dt.INFO,B2={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},H2=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=B2[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class __{constructor(e){this.name=e,this._logLevel=z2,this._logHandler=H2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?U2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const F2=(n,e)=>e.some(t=>n instanceof t);let D0,O0;function q2(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function G2(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const v1=new WeakMap,Cy=new WeakMap,E1=new WeakMap,Zg=new WeakMap,v_=new WeakMap;function $2(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Ca(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&v1.set(t,n)}).catch(()=>{}),v_.set(e,n),e}function K2(n){if(Cy.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Cy.set(n,e)}let Ry={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||E1.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ca(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Y2(n){Ry=n(Ry)}function Q2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ey(this),e,...t);return E1.set(i,e.sort?e.sort():[e]),Ca(i)}:G2().includes(n)?function(...e){return n.apply(ey(this),e),Ca(v1.get(this))}:function(...e){return Ca(n.apply(ey(this),e))}}function X2(n){return typeof n=="function"?Q2(n):(n instanceof IDBTransaction&&K2(n),F2(n,q2())?new Proxy(n,Ry):n)}function Ca(n){if(n instanceof IDBRequest)return $2(n);if(Zg.has(n))return Zg.get(n);const e=X2(n);return e!==n&&(Zg.set(n,e),v_.set(e,n)),e}const ey=n=>v_.get(n);function W2(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=Ca(u);return i&&u.addEventListener("upgradeneeded",m=>{i(Ca(u.result),m.oldVersion,m.newVersion,Ca(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const J2=["get","getKey","getAll","getAllKeys","count"],Z2=["put","add","delete","clear"],ty=new Map;function M0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ty.get(e))return ty.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=Z2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||J2.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return ty.set(e,l),l}Y2(n=>({...n,get:(e,t,i)=>M0(e,t)||n.get(e,t,i),has:(e,t)=>!!M0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(tO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function tO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iy="@firebase/app",P0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new __("@firebase/app"),nO="@firebase/app-compat",rO="@firebase/analytics-compat",iO="@firebase/analytics",sO="@firebase/app-check-compat",aO="@firebase/app-check",oO="@firebase/auth",lO="@firebase/auth-compat",cO="@firebase/database",uO="@firebase/data-connect",hO="@firebase/database-compat",fO="@firebase/functions",dO="@firebase/functions-compat",mO="@firebase/installations",pO="@firebase/installations-compat",gO="@firebase/messaging",yO="@firebase/messaging-compat",_O="@firebase/performance",vO="@firebase/performance-compat",EO="@firebase/remote-config",TO="@firebase/remote-config-compat",bO="@firebase/storage",SO="@firebase/storage-compat",AO="@firebase/firestore",wO="@firebase/ai",CO="@firebase/firestore-compat",RO="firebase",IO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="[DEFAULT]",xO={[Iy]:"fire-core",[nO]:"fire-core-compat",[iO]:"fire-analytics",[rO]:"fire-analytics-compat",[aO]:"fire-app-check",[sO]:"fire-app-check-compat",[oO]:"fire-auth",[lO]:"fire-auth-compat",[cO]:"fire-rtdb",[uO]:"fire-data-connect",[hO]:"fire-rtdb-compat",[fO]:"fire-fn",[dO]:"fire-fn-compat",[mO]:"fire-iid",[pO]:"fire-iid-compat",[gO]:"fire-fcm",[yO]:"fire-fcm-compat",[_O]:"fire-perf",[vO]:"fire-perf-compat",[EO]:"fire-rc",[TO]:"fire-rc-compat",[bO]:"fire-gcs",[SO]:"fire-gcs-compat",[AO]:"fire-fst",[CO]:"fire-fst-compat",[wO]:"fire-vertex","fire-js":"fire-js",[RO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,NO=new Map,Ny=new Map;function k0(n,e){try{n.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xl(n){const e=n.name;if(Ny.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Ny.set(e,n);for(const t of wd.values())k0(t,n);for(const t of NO.values())k0(t,n);return!0}function E_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ra=new nh("app","Firebase",DO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=IO;function T1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:xy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ra.create("bad-app-name",{appName:String(a)});if(t||(t=p1()),!t)throw Ra.create("no-options");const l=wd.get(a);if(l){if(Ro(t,l.options)&&Ro(i,l.config))return l;throw Ra.create("duplicate-app",{appName:a})}const u=new j2(a);for(const m of Ny.values())u.addComponent(m);const f=new OO(t,i,u);return wd.set(a,f),f}function b1(n=xy){const e=wd.get(n);if(!e&&n===xy&&p1())return T1();if(!e)throw Ra.create("no-app",{appName:n});return e}function Ia(n,e,t){let i=xO[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(u.join(" "));return}Xl(new Io(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO="firebase-heartbeat-database",PO=1,ju="firebase-heartbeat-store";let ny=null;function S1(){return ny||(ny=W2(MO,PO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ra.create("idb-open",{originalErrorMessage:n.message})})),ny}async function kO(n){try{const t=(await S1()).transaction(ju),i=await t.objectStore(ju).get(A1(n));return await t.done,i}catch(e){if(e instanceof ks)Cs.warn(e.message);else{const t=Ra.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function V0(n,e){try{const i=(await S1()).transaction(ju,"readwrite");await i.objectStore(ju).put(e,A1(n)),await i.done}catch(t){if(t instanceof ks)Cs.warn(t.message);else{const i=Ra.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(i.message)}}}function A1(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=1024,LO=30;class jO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new zO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=L0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>LO){const u=BO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=L0(),{heartbeatsToSend:i,unsentEntries:a}=UO(this._heartbeatsCache.heartbeats),l=Ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Cs.warn(t),""}}}function L0(){return new Date().toISOString().substring(0,10)}function UO(n,e=VO){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),j0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),j0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class zO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return C2()?R2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return V0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return V0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function j0(n){return Ad(JSON.stringify({version:2,heartbeats:n})).length}function BO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(n){Xl(new Io("platform-logger",e=>new eO(e),"PRIVATE")),Xl(new Io("heartbeat",e=>new jO(e),"PRIVATE")),Ia(Iy,P0,n),Ia(Iy,P0,"esm2020"),Ia("fire-js","")}HO("");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xa,w1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function I(){}I.prototype=C.prototype,A.F=C.prototype,A.prototype=new I,A.prototype.constructor=A,A.D=function(V,k,L){for(var x=Array(arguments.length-2),me=2;me<arguments.length;me++)x[me-2]=arguments[me];return C.prototype[k].apply(V,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,C,I){I||(I=0);const V=Array(16);if(typeof C=="string")for(var k=0;k<16;++k)V[k]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(k=0;k<16;++k)V[k]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=A.g[0],I=A.g[1],k=A.g[2];let L=A.g[3],x;x=C+(L^I&(k^L))+V[0]+3614090360&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[1]+3905402710&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[2]+606105819&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[3]+3250441966&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(L^I&(k^L))+V[4]+4118548399&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[5]+1200080426&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[6]+2821735955&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[7]+4249261313&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(L^I&(k^L))+V[8]+1770035416&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[9]+2336552879&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[10]+4294925233&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[11]+2304563134&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(L^I&(k^L))+V[12]+1804603682&4294967295,C=I+(x<<7&4294967295|x>>>25),x=L+(k^C&(I^k))+V[13]+4254626195&4294967295,L=C+(x<<12&4294967295|x>>>20),x=k+(I^L&(C^I))+V[14]+2792965006&4294967295,k=L+(x<<17&4294967295|x>>>15),x=I+(C^k&(L^C))+V[15]+1236535329&4294967295,I=k+(x<<22&4294967295|x>>>10),x=C+(k^L&(I^k))+V[1]+4129170786&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[6]+3225465664&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[11]+643717713&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[0]+3921069994&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(k^L&(I^k))+V[5]+3593408605&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[10]+38016083&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[15]+3634488961&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[4]+3889429448&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(k^L&(I^k))+V[9]+568446438&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[14]+3275163606&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[3]+4107603335&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[8]+1163531501&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(k^L&(I^k))+V[13]+2850285829&4294967295,C=I+(x<<5&4294967295|x>>>27),x=L+(I^k&(C^I))+V[2]+4243563512&4294967295,L=C+(x<<9&4294967295|x>>>23),x=k+(C^I&(L^C))+V[7]+1735328473&4294967295,k=L+(x<<14&4294967295|x>>>18),x=I+(L^C&(k^L))+V[12]+2368359562&4294967295,I=k+(x<<20&4294967295|x>>>12),x=C+(I^k^L)+V[5]+4294588738&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[8]+2272392833&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[11]+1839030562&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[14]+4259657740&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(I^k^L)+V[1]+2763975236&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[4]+1272893353&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[7]+4139469664&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[10]+3200236656&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(I^k^L)+V[13]+681279174&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[0]+3936430074&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[3]+3572445317&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[6]+76029189&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(I^k^L)+V[9]+3654602809&4294967295,C=I+(x<<4&4294967295|x>>>28),x=L+(C^I^k)+V[12]+3873151461&4294967295,L=C+(x<<11&4294967295|x>>>21),x=k+(L^C^I)+V[15]+530742520&4294967295,k=L+(x<<16&4294967295|x>>>16),x=I+(k^L^C)+V[2]+3299628645&4294967295,I=k+(x<<23&4294967295|x>>>9),x=C+(k^(I|~L))+V[0]+4096336452&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[7]+1126891415&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[14]+2878612391&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[5]+4237533241&4294967295,I=k+(x<<21&4294967295|x>>>11),x=C+(k^(I|~L))+V[12]+1700485571&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[3]+2399980690&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[10]+4293915773&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[1]+2240044497&4294967295,I=k+(x<<21&4294967295|x>>>11),x=C+(k^(I|~L))+V[8]+1873313359&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[15]+4264355552&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[6]+2734768916&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[13]+1309151649&4294967295,I=k+(x<<21&4294967295|x>>>11),x=C+(k^(I|~L))+V[4]+4149444226&4294967295,C=I+(x<<6&4294967295|x>>>26),x=L+(I^(C|~k))+V[11]+3174756917&4294967295,L=C+(x<<10&4294967295|x>>>22),x=k+(C^(L|~I))+V[2]+718787259&4294967295,k=L+(x<<15&4294967295|x>>>17),x=I+(L^(k|~C))+V[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(k+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+k&4294967295,A.g[3]=A.g[3]+L&4294967295}i.prototype.v=function(A,C){C===void 0&&(C=A.length);const I=C-this.blockSize,V=this.C;let k=this.h,L=0;for(;L<C;){if(k==0)for(;L<=I;)a(this,A,L),L+=this.blockSize;if(typeof A=="string"){for(;L<C;)if(V[k++]=A.charCodeAt(L++),k==this.blockSize){a(this,V),k=0;break}}else for(;L<C;)if(V[k++]=A[L++],k==this.blockSize){a(this,V),k=0;break}}this.h=k,this.o+=C},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var I=A.length-8;I<A.length;++I)A[I]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)A[C++]=this.g[I]>>>V&255;return A};function l(A,C){var I=f;return Object.prototype.hasOwnProperty.call(I,A)?I[A]:I[A]=C(A)}function u(A,C){this.h=C;const I=[];let V=!0;for(let k=A.length-1;k>=0;k--){const L=A[k]|0;V&&L==C||(I[k]=L,V=!1)}this.g=I}var f={};function m(A){return-128<=A&&A<128?l(A,function(C){return new u([C|0],C<0?-1:0)}):new u([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return D(p(-A));const C=[];let I=1;for(let V=0;A>=I;V++)C[V]=A/I|0,I*=4294967296;return new u(C,0)}function y(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return D(y(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(C,8));let V=v;for(let L=0;L<A.length;L+=8){var k=Math.min(8,A.length-L);const x=parseInt(A.substring(L,L+k),C);k<8?(k=p(Math.pow(C,k)),V=V.j(k).add(p(x))):(V=V.j(I),V=V.add(p(x)))}return V}var v=m(0),b=m(1),w=m(16777216);n=u.prototype,n.m=function(){if(H(this))return-D(this).m();let A=0,C=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);A+=(V>=0?V:4294967296+V)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(M(this))return"0";if(H(this))return"-"+D(this).toString(A);const C=p(Math.pow(A,6));var I=this;let V="";for(;;){const k=F(I,C).g;I=j(I,k.j(C));let L=((I.g.length>0?I.g[0]:I.h)>>>0).toString(A);if(I=k,M(I))return L+V;for(;L.length<6;)L="0"+L;V=L+V}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function M(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function H(A){return A.h==-1}n.l=function(A){return A=j(this,A),H(A)?-1:M(A)?0:1};function D(A){const C=A.g.length,I=[];for(let V=0;V<C;V++)I[V]=~A.g[V];return new u(I,~A.h).add(b)}n.abs=function(){return H(this)?D(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),I=[];let V=0;for(let k=0;k<=C;k++){let L=V+(this.i(k)&65535)+(A.i(k)&65535),x=(L>>>16)+(this.i(k)>>>16)+(A.i(k)>>>16);V=x>>>16,L&=65535,x&=65535,I[k]=x<<16|L}return new u(I,I[I.length-1]&-2147483648?-1:0)};function j(A,C){return A.add(D(C))}n.j=function(A){if(M(this)||M(A))return v;if(H(this))return H(A)?D(this).j(D(A)):D(D(this).j(A));if(H(A))return D(this.j(D(A)));if(this.l(w)<0&&A.l(w)<0)return p(this.m()*A.m());const C=this.g.length+A.g.length,I=[];for(var V=0;V<2*C;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let k=0;k<A.g.length;k++){const L=this.i(V)>>>16,x=this.i(V)&65535,me=A.i(k)>>>16,ge=A.i(k)&65535;I[2*V+2*k]+=x*ge,P(I,2*V+2*k),I[2*V+2*k+1]+=L*ge,P(I,2*V+2*k+1),I[2*V+2*k+1]+=x*me,P(I,2*V+2*k+1),I[2*V+2*k+2]+=L*me,P(I,2*V+2*k+2)}for(A=0;A<C;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=C;A<2*C;A++)I[A]=0;return new u(I,0)};function P(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function U(A,C){this.g=A,this.h=C}function F(A,C){if(M(C))throw Error("division by zero");if(M(A))return new U(v,v);if(H(A))return C=F(D(A),C),new U(D(C.g),D(C.h));if(H(C))return C=F(A,D(C)),new U(D(C.g),C.h);if(A.g.length>30){if(H(A)||H(C))throw Error("slowDivide_ only works with positive integers.");for(var I=b,V=C;V.l(A)<=0;)I=X(I),V=X(V);var k=Y(I,1),L=Y(V,1);for(V=Y(V,2),I=Y(I,2);!M(V);){var x=L.add(V);x.l(A)<=0&&(k=k.add(I),L=x),V=Y(V,1),I=Y(I,1)}return C=j(A,k.j(C)),new U(k,C)}for(k=v;A.l(C)>=0;){for(I=Math.max(1,Math.floor(A.m()/C.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),L=p(I),x=L.j(C);H(x)||x.l(A)>0;)I-=V,L=p(I),x=L.j(C);M(L)&&(L=b),k=k.add(L),A=j(A,x)}return new U(k,A)}n.B=function(A){return F(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)&A.i(V);return new u(I,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)|A.i(V);return new u(I,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),I=[];for(let V=0;V<C;V++)I[V]=this.i(V)^A.i(V);return new u(I,this.h^A.h)};function X(A){const C=A.g.length+1,I=[];for(let V=0;V<C;V++)I[V]=A.i(V)<<1|A.i(V-1)>>>31;return new u(I,A.h)}function Y(A,C){const I=C>>5;C%=32;const V=A.g.length-I,k=[];for(let L=0;L<V;L++)k[L]=C>0?A.i(L+I)>>>C|A.i(L+I+1)<<32-C:A.i(L+I);return new u(k,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,w1=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,xa=u}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C1,Eu,R1,nd,Dy,I1,x1,N1;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bf=="object"&&Bf];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var S=i;h=h.split(".");for(var N=0;N<h.length-1;N++){var W=h[N];if(!(W in S))break e;S=S[W]}h=h[h.length-1],N=S[h],_=_(N),_!=N&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var S=[],N;for(N in _)Object.prototype.hasOwnProperty.call(_,N)&&S.push([N,_[N]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,S){return h.call.apply(h.bind,arguments)}function p(h,_,S){return p=m,p.apply(null,arguments)}function y(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var N=S.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function v(h,_){function S(){}S.prototype=_.prototype,h.Z=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(N,W,ne){for(var Ee=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Ee[Ze-2]=arguments[Ze];return _.prototype[W].apply(N,Ee)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const S=Array(_);for(let N=0;N<_;N++)S[N]=h[N];return S}return[]}function M(h,_){for(let N=1;N<arguments.length;N++){const W=arguments[N];var S=typeof W;if(S=S!="object"?S:W?Array.isArray(W)?"array":S:"null",S=="array"||S=="object"&&typeof W.length=="number"){S=h.length||0;const ne=W.length||0;h.length=S+ne;for(let Ee=0;Ee<ne;Ee++)h[S+Ee]=W[Ee]}else h.push(W)}}class H{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function D(h){u.setTimeout(()=>{throw h},0)}function j(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class P{constructor(){this.h=this.g=null}add(_,S){const N=U.get();N.set(_,S),this.h?this.h.next=N:this.g=N,this.h=N}}var U=new H(()=>new F,h=>h.reset());class F{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let X,Y=!1,A=new P,C=()=>{const h=Promise.resolve(void 0);X=()=>{h.then(I)}};function I(){for(var h;h=j();){try{h.h.call(h.g)}catch(S){D(S)}var _=U;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Y=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};u.addEventListener("test",S,_),u.removeEventListener("test",S,_)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function me(h,_){k.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(me,k),me.prototype.init=function(h,_){const S=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&me.Z.h.call(this)},me.prototype.h=function(){me.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),G=0;function oe(h,_,S,N,W){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!N,this.ha=W,this.key=++G,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Pe(h,_,S){for(const N in h)_.call(S,h[N],N,h)}function Ne(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function q(h){const _={};for(const S in h)_[S]=h[S];return _}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(h,_){let S,N;for(let W=1;W<arguments.length;W++){N=arguments[W];for(S in N)h[S]=N[S];for(let ne=0;ne<ie.length;ne++)S=ie[ne],Object.prototype.hasOwnProperty.call(N,S)&&(h[S]=N[S])}}function he(h){this.src=h,this.g={},this.h=0}he.prototype.add=function(h,_,S,N,W){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const Ee=Ae(h,_,N,W);return Ee>-1?(_=h[Ee],S||(_.fa=!1)):(_=new oe(_,this.src,ne,!!N,W),_.fa=S,h.push(_)),_};function ye(h,_){const S=_.type;if(S in h.g){var N=h.g[S],W=Array.prototype.indexOf.call(N,_,void 0),ne;(ne=W>=0)&&Array.prototype.splice.call(N,W,1),ne&&(de(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Ae(h,_,S,N){for(let W=0;W<h.length;++W){const ne=h[W];if(!ne.da&&ne.listener==_&&ne.capture==!!S&&ne.ha==N)return W}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),Fe={};function ze(h,_,S,N,W){if(Array.isArray(_)){for(let ne=0;ne<_.length;ne++)ze(h,_[ne],S,N,W);return null}return S=Je(S),h&&h[ge]?h.J(_,S,f(N)?!!N.capture:!1,W):At(h,_,S,!1,N,W)}function At(h,_,S,N,W,ne){if(!_)throw Error("Invalid event type");const Ee=f(W)?!!W.capture:!!W;let Ze=be(h);if(Ze||(h[ke]=Ze=new he(h)),S=Ze.add(_,S,N,Ee,ne),S.proxy)return S;if(N=kt(),S.proxy=N,N.src=h,N.listener=S,h.addEventListener)L||(W=Ee),W===void 0&&(W=!1),h.addEventListener(_.toString(),N,W);else if(h.attachEvent)h.attachEvent(In(_.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return S}function kt(){function h(S){return _.call(h.src,h.listener,S)}const _=tr;return h}function lt(h,_,S,N,W){if(Array.isArray(_))for(var ne=0;ne<_.length;ne++)lt(h,_[ne],S,N,W);else N=f(N)?!!N.capture:!!N,S=Je(S),h&&h[ge]?(h=h.i,ne=String(_).toString(),ne in h.g&&(_=h.g[ne],S=Ae(_,S,N,W),S>-1&&(de(_[S]),Array.prototype.splice.call(_,S,1),_.length==0&&(delete h.g[ne],h.h--)))):h&&(h=be(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ae(_,S,N,W)),(S=h>-1?_[h]:null)&&Jt(S))}function Jt(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ge])ye(_.i,h);else{var S=h.type,N=h.proxy;_.removeEventListener?_.removeEventListener(S,N,h.capture):_.detachEvent?_.detachEvent(In(S),N):_.addListener&&_.removeListener&&_.removeListener(N),(S=be(_))?(ye(S,h),S.h==0&&(S.src=null,_[ke]=null)):de(h)}}}function In(h){return h in Fe?Fe[h]:Fe[h]="on"+h}function tr(h,_){if(h.da)h=!0;else{_=new me(_,this);const S=h.listener,N=h.ha||h.src;h.fa&&Jt(h),h=S.call(N,_)}return h}function be(h){return h=h[ke],h instanceof he?h:null}var Ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function Je(h){return typeof h=="function"?h:(h[Ke]||(h[Ke]=function(_){return h.handleEvent(_)}),h[Ke])}function De(){V.call(this),this.i=new he(this),this.M=this,this.G=null}v(De,V),De.prototype[ge]=!0,De.prototype.removeEventListener=function(h,_,S,N){lt(this,h,_,S,N)};function Ge(h,_){var S,N=h.G;if(N)for(S=[];N;N=N.G)S.push(N);if(h=h.M,N=_.type||_,typeof _=="string")_=new k(_,h);else if(_ instanceof k)_.target=_.target||h;else{var W=_;_=new k(N,h),se(_,W)}W=!0;let ne,Ee;if(S)for(Ee=S.length-1;Ee>=0;Ee--)ne=_.g=S[Ee],W=Vt(ne,N,!0,_)&&W;if(ne=_.g=h,W=Vt(ne,N,!0,_)&&W,W=Vt(ne,N,!1,_)&&W,S)for(Ee=0;Ee<S.length;Ee++)ne=_.g=S[Ee],W=Vt(ne,N,!1,_)&&W}De.prototype.N=function(){if(De.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const S=h.g[_];for(let N=0;N<S.length;N++)de(S[N]);delete h.g[_],h.h--}}this.G=null},De.prototype.J=function(h,_,S,N){return this.i.add(String(h),_,!1,S,N)},De.prototype.K=function(h,_,S,N){return this.i.add(String(h),_,!0,S,N)};function Vt(h,_,S,N){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let W=!0;for(let ne=0;ne<_.length;++ne){const Ee=_[ne];if(Ee&&!Ee.da&&Ee.capture==S){const Ze=Ee.listener,cn=Ee.ha||Ee.src;Ee.fa&&ye(h.i,Ee),W=Ze.call(cn,N)!==!1&&W}}return W&&!N.defaultPrevented}function hr(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function mn(h){h.g=hr(()=>{h.g=null,h.i&&(h.i=!1,mn(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class it extends V{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:mn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function An(h){V.call(this),this.h=h,this.g={}}v(An,V);var Pn=[];function Hr(h){Pe(h.g,function(_,S){this.g.hasOwnProperty(S)&&Jt(_)},h),h.g={}}An.prototype.N=function(){An.Z.N.call(this),Hr(this)},An.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ln=u.JSON.stringify,Gn=u.JSON.parse,nr=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function zo(){}function Vs(){}var Cr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){k.call(this,"d")}v(Lt,k);function rr(){k.call(this,"c")}v(rr,k);var Kt={},Fa=null;function Ls(){return Fa=Fa||new De}Kt.Ia="serverreachability";function qa(h){k.call(this,Kt.Ia,h)}v(qa,k);function ir(h){const _=Ls();Ge(_,new qa(_))}Kt.STAT_EVENT="statevent";function Si(h,_){k.call(this,Kt.STAT_EVENT,h),this.stat=_}v(Si,k);function Yt(h){const _=Ls();Ge(_,new Si(_,h))}Kt.Ja="timingevent";function Fr(h,_){k.call(this,Kt.Ja,h),this.size=_}v(Fr,k);function Rr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function Ir(){this.g=!0}Ir.prototype.ua=function(){this.g=!1};function Bo(h,_,S,N,W,ne){h.info(function(){if(h.g)if(ne){var Ee="",Ze=ne.split("&");for(let bt=0;bt<Ze.length;bt++){var cn=Ze[bt].split("=");if(cn.length>1){const Qt=cn[0];cn=cn[1];const $r=Qt.split("_");Ee=$r.length>=2&&$r[1]=="type"?Ee+(Qt+"="+cn+"&"):Ee+(Qt+"=redacted&")}}}else Ee=null;else Ee=ne;return"XMLHTTP REQ ("+N+") [attempt "+W+"]: "+_+`
`+S+`
`+Ee})}function Yi(h,_,S,N,W,ne,Ee){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+W+"]: "+_+`
`+S+`
`+ne+" "+Ee})}function sr(h,_,S,N){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+_c(h,S)+(N?" "+N:"")})}function Ai(h,_){h.info(function(){return"TIMEOUT: "+_})}Ir.prototype.info=function(){};function _c(h,_){if(!h.g)return _;if(!_)return null;try{const ne=JSON.parse(_);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var S=ne[h];if(!(S.length<2)){var N=S[1];if(Array.isArray(N)&&!(N.length<1)){var W=N[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Ee=1;Ee<N.length;Ee++)N[Ee]=""}}}}return ln(ne)}catch{return _}}var Qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},z={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},K;function ee(){}v(ee,zo),ee.prototype.g=function(){return new XMLHttpRequest},K=new ee;function pe(h){return encodeURIComponent(String(h))}function _e(h){var _=1;h=h.split(":");const S=[];for(;_>0&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function we(h,_,S,N){this.j=h,this.i=_,this.l=S,this.S=N||1,this.V=new An(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}var ve={},Te={};function Re(h,_,S){h.M=1,h.A=Ga(Nt(_)),h.u=S,h.R=!0,Be(h,null)}function Be(h,_){h.F=Date.now(),xt(h),h.B=Nt(h.A);var S=h.B,N=h.S;Array.isArray(N)||(N=[String(N)]),Fo(S.i,"t",N),h.C=0,S=h.j.L,h.h=new Ie,h.g=Nh(h.j,S?_:null,!h.u),h.P>0&&(h.O=new it(p(h.Y,h,h.g),h.P)),_=h.V,S=h.g,N=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(Pn[0]=W.toString()),W=Pn);for(let ne=0;ne<W.length;ne++){const Ee=ze(S,W[ne],N||_.handleEvent,!1,_.h||_);if(!Ee)break;_.g[Ee.key]=Ee}_=h.J?q(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),ir(),Bo(h.i,h.v,h.B,h.l,h.S,h.u)}we.prototype.ba=function(h){h=h.target;const _=this.O;_&&ui(h)==3?_.j():this.Y(h)},we.prototype.Y=function(h){try{if(h==this.g)e:{const Ze=ui(this.g),cn=this.g.ya(),bt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||kn(this.g)))){this.K||Ze!=4||cn==7||(cn==8||bt<=0?ir(3):ir(2)),Ut(this);var _=this.g.ca();this.X=_;var S=Me(this);if(this.o=_==200,Yi(this.i,this.v,this.B,this.l,this.S,Ze,_),this.o){if(this.U&&!this.L){t:{if(this.g){var N,W=this.g;if((N=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(N)){var ne=N;break t}}ne=null}if(h=ne)sr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xn(this,h);else{this.o=!1,this.m=3,Yt(12),zt(this),tt(this);break e}}if(this.R){h=!0;let Qt;for(;!this.K&&this.C<S.length;)if(Qt=st(this,S),Qt==Te){Ze==4&&(this.m=4,Yt(14),h=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==ve){this.m=4,Yt(15),sr(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else sr(this.i,this.l,Qt,null),xn(this,Qt);if($e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||S.length!=0||this.h.h||(this.m=1,Yt(16),h=!1),this.o=this.o&&h,!h)sr(this.i,this.l,S,"[Invalid Chunked Response]"),zt(this),tt(this);else if(S.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Rc(Ee),Ee.P=!0,Yt(11))}}else sr(this.i,this.l,S,null),xn(this,S);Ze==4&&zt(this),this.o&&!this.K&&(Ze==4?Ch(this.j,this):(this.o=!1,xt(this)))}else Wi(this.g),_==400&&S.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),zt(this),tt(this)}}}catch{}finally{}};function Me(h){if(!$e(h))return h.g.la();const _=kn(h.g);if(_==="")return"";let S="";const N=_.length,W=ui(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return zt(h),tt(h),"";h.h.i=new u.TextDecoder}for(let ne=0;ne<N;ne++)h.h.h=!0,S+=h.h.i.decode(_[ne],{stream:!(W&&ne==N-1)});return _.length=0,h.h.g+=S,h.C=0,h.h.g}function $e(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function st(h,_){var S=h.C,N=_.indexOf(`
`,S);return N==-1?Te:(S=Number(_.substring(S,N)),isNaN(S)?ve:(N+=1,N+S>_.length?Te:(_=_.slice(N,N+S),h.C=N+S,_)))}we.prototype.cancel=function(){this.K=!0,zt(this)};function xt(h){h.T=Date.now()+h.H,Ft(h,h.H)}function Ft(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=Rr(p(h.aa,h),_)}function Ut(h){h.D&&(u.clearTimeout(h.D),h.D=null)}we.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ai(this.i,this.B),this.M!=2&&(ir(),Yt(17)),zt(this),this.m=2,tt(this)):Ft(this,this.T-h)};function tt(h){h.j.I==0||h.K||Ch(h.j,h)}function zt(h){Ut(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Hr(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function xn(h,_){try{var S=h.j;if(S.I!=0&&(S.g==h||Kn(S.h,h))){if(!h.L&&Kn(S.h,h)&&S.I==3){try{var N=S.Ba.g.parse(_)}catch{N=null}if(Array.isArray(N)&&N.length==3){var W=N;if(W[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Yo(S),Gs(S);else break e;Ja(S),Yt(18)}}else S.xa=W[1],0<S.xa-S.K&&W[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Rr(p(S.Va,S),6e3));dr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Oi(S,11)}else if((h.L||S.g==h)&&Yo(S),!x(_))for(W=S.Ba.g.parse(_),_=0;_<W.length;_++){let bt=W[_];const Qt=bt[0];if(!(Qt<=S.K))if(S.K=Qt,bt=bt[1],S.I==2)if(bt[0]=="c"){S.M=bt[1],S.ba=bt[2];const $r=bt[3];$r!=null&&(S.ka=$r,S.j.info("VER="+S.ka));const Mi=bt[4];Mi!=null&&(S.za=Mi,S.j.info("SVER="+S.za));const hi=bt[5];hi!=null&&typeof hi=="number"&&hi>0&&(N=1.5*hi,S.O=N,S.j.info("backChannelRequestTimeoutMs_="+N)),N=S;const fi=h.g;if(fi){const Za=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Za){var ne=N.h;ne.g||Za.indexOf("spdy")==-1&&Za.indexOf("quic")==-1&&Za.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(xr(ne,ne.h),ne.h=null))}if(N.G){const Qo=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(N.wa=Qo,Tt(N.J,N.G,Qo))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),N=S;var Ee=h;if(N.na=xh(N,N.L?N.ba:null,N.W),Ee.L){wi(N.h,Ee);var Ze=Ee,cn=N.O;cn&&(Ze.H=cn),Ze.D&&(Ut(Ze),xt(Ze)),N.g=Ee}else Ah(N);S.i.length>0&&Di(S)}else bt[0]!="stop"&&bt[0]!="close"||Oi(S,7);else S.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Oi(S,7):wc(S):bt[0]!="noop"&&S.l&&S.l.qa(bt),S.A=0)}}ir(4)}catch{}}var Bt=class{constructor(h,_){this.g=h,this.map=_}};function fr(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $n(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function dr(h){return h.h?1:h.g?h.g.size:0}function Kn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function xr(h,_){h.g?h.g.add(_):h.h=_}function wi(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}fr.prototype.cancel=function(){if(this.i=Ci(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ci(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.G);return _}return w(h.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zt(h,_){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const N=h[S].indexOf("=");let W,ne=null;N>=0?(W=h[S].substring(0,N),ne=h[S].substring(N+1)):W=h[S],_(W,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function pn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof pn?(this.l=h.l,nt(this,h.j),this.o=h.o,this.g=h.g,Nr(this,h.u),this.h=h.h,js(this,bh(h.i)),this.m=h.m):h&&(_=String(h).match(ot))?(this.l=!1,nt(this,_[1]||"",!0),this.o=Ri(_[2]||""),this.g=Ri(_[3]||"",!0),Nr(this,_[4]),this.h=Ri(_[5]||"",!0),js(this,_[6]||"",!0),this.m=Ri(_[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}pn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push($a(_,Ho,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push($a(_,Ho,!0),"@"),h.push(pe(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push($a(S,S.charAt(0)=="/"?vc:vh,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",$a(S,Eh)),h.join("")},pn.prototype.resolve=function(h){const _=Nt(this);let S=!!h.j;S?nt(_,h.j):S=!!h.o,S?_.o=h.o:S=!!h.g,S?_.g=h.g:S=h.u!=null;var N=h.h;if(S)Nr(_,h.u);else if(S=!!h.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var W=_.h.lastIndexOf("/");W!=-1&&(N=_.h.slice(0,W+1)+N)}if(W=N,W==".."||W==".")N="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){N=W.lastIndexOf("/",0)==0,W=W.split("/");const ne=[];for(let Ee=0;Ee<W.length;){const Ze=W[Ee++];Ze=="."?N&&Ee==W.length&&ne.push(""):Ze==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),N&&Ee==W.length&&ne.push("")):(ne.push(Ze),N=!0)}N=ne.join("/")}else N=W}return S?_.h=N:S=h.i.toString()!=="",S?js(_,bh(h.i)):S=!!h.m,S&&(_.m=h.m),_};function Nt(h){return new pn(h)}function nt(h,_,S){h.j=S?Ri(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Nr(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function js(h,_,S){_ instanceof zs?(h.i=_,qo(h.i,h.l)):(S||(_=$a(_,Us)),h.i=new zs(_,h.l))}function Tt(h,_,S){h.i.set(_,S)}function Ga(h){return Tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ri(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $a(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,mr),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function mr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ho=/[#\/\?@]/g,vh=/[#\?:]/g,vc=/[#\?]/g,Us=/[#\?@]/g,Eh=/#/g;function zs(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function pr(h){h.g||(h.g=new Map,h.h=0,h.i&&Zt(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}n=zs.prototype,n.add=function(h,_){pr(this),this.i=null,h=Bs(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function Th(h,_){pr(h),_=Bs(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ec(h,_){return pr(h),_=Bs(h,_),h.g.has(_)}n.forEach=function(h,_){pr(this),this.g.forEach(function(S,N){S.forEach(function(W){h.call(_,W,N,this)},this)},this)};function Tc(h,_){pr(h);let S=[];if(typeof _=="string")Ec(h,_)&&(S=S.concat(h.g.get(Bs(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)S=S.concat(h[_]);return S}n.set=function(h,_){return pr(this),this.i=null,h=Bs(this,h),Ec(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=Tc(this,h),h.length>0?String(h[0]):_):_};function Fo(h,_,S){Th(h,_),S.length>0&&(h.i=null,h.g.set(Bs(h,_),w(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let N=0;N<_.length;N++){var S=_[N];const W=pe(S);S=Tc(this,S);for(let ne=0;ne<S.length;ne++){let Ee=W;S[ne]!==""&&(Ee+="="+pe(S[ne])),h.push(Ee)}}return this.i=h.join("&")};function bh(h){const _=new zs;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Bs(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function qo(h,_){_&&!h.j&&(pr(h),h.i=null,h.g.forEach(function(S,N){const W=N.toLowerCase();N!=W&&(Th(this,N),Fo(this,W,S))},h)),h.j=_}function li(h,_){const S=new Ir;if(u.Image){const N=new Image;N.onload=y(qr,S,"TestLoadImage: loaded",!0,_,N),N.onerror=y(qr,S,"TestLoadImage: error",!1,_,N),N.onabort=y(qr,S,"TestLoadImage: abort",!1,_,N),N.ontimeout=y(qr,S,"TestLoadImage: timeout",!1,_,N),u.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else _(!1)}function bc(h,_){const S=new Ir,N=new AbortController,W=setTimeout(()=>{N.abort(),qr(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:N.signal}).then(ne=>{clearTimeout(W),ne.ok?qr(S,"TestPingServer: ok",!0,_):qr(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),qr(S,"TestPingServer: error",!1,_)})}function qr(h,_,S,N,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),N(S)}catch{}}function Hs(){this.g=new nr}function Ii(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Ii,zo),Ii.prototype.g=function(){return new Ka(this.i,this.h)};function Ka(h,_){De.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ka,De),n=Ka.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,ci(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Go(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Go(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Fs(this):ci(this),this.readyState==3&&Go(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Fs(this))},n.Na=function(h){this.g&&(this.response=h,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ci(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Gr(h){let _="";return Pe(h,function(S,N){_+=N,_+=":",_+=S,_+=`\r
`}),_}function Ya(h,_,S){e:{for(N in S){var N=!1;break e}N=!0}N||(S=Gr(S),typeof h=="string"?S!=null&&pe(S):Tt(h,_,S))}function Dt(h){De.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Dt,De);var xi=/^https?$/i,Sc=["POST","PUT"];n=Dt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,S,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():K.g(),this.g.onreadystatechange=b(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ne){Qa(this,ne);return}if(h=S||"",S=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var W in N)S.set(W,N[W]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const ne of N.keys())S.set(ne,N.get(ne));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(S.keys()).find(ne=>ne.toLowerCase()=="content-type"),W=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Sc,_,void 0)>=0)||N||W||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,Ee]of S)this.g.setRequestHeader(ne,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Qa(this,ne)}};function Qa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Ac(h),Xi(h)}function Ac(h){h.A||(h.A=!0,Ge(h,"complete"),Ge(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Ge(this,"complete"),Ge(this,"abort"),Xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xa(this):this.Xa())},n.Xa=function(){Xa(this)};function Xa(h){if(h.h&&typeof l<"u"){if(h.v&&ui(h)==4)setTimeout(h.Ca.bind(h),0);else if(Ge(h,"readystatechange"),ui(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var N;if(N=ne===0){let Ee=String(h.D).match(ot)[1]||null;!Ee&&u.self&&u.self.location&&(Ee=u.self.location.protocol.slice(0,-1)),N=!xi.test(Ee?Ee.toLowerCase():"")}S=N}if(S)Ge(h,"complete"),Ge(h,"success");else{h.o=6;try{var W=ui(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",Ac(h)}}finally{Xi(h)}}}}function Xi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,_||Ge(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Gn(_)}};function kn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(h){const _={};h=(h.g&&ui(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(x(h[N]))continue;var S=_e(h[N]);const W=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ne=_[W]||[];_[W]=ne,ne.push(S)}Ne(_,function(N){return N.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function qs(h){this.za=0,this.i=[],this.j=new Ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,h),this.Za=Ni("retryDelaySeedMs",1e4,h),this.Ta=Ni("forwardChannelMaxRetries",2,h),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new fr(h&&h.concurrentRequestLimit),this.Ba=new Hs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=qs.prototype,n.ka=8,n.I=1,n.connect=function(h,_,S,N){Yt(0),this.W=h,this.H=_||{},S&&N!==void 0&&(this.H.OSID=S,this.H.OAID=N),this.F=this.X,this.J=xh(this,null,this.W),Di(this)};function wc(h){if($o(h),h.I==3){var _=h.V++,S=Nt(h.J);if(Tt(S,"SID",h.M),Tt(S,"RID",_),Tt(S,"TYPE","terminate"),Wa(h,S),_=new we(h,h.j,_),_.M=2,_.A=Ga(Nt(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!S&&u.Image&&(new Image().src=_.A,S=!0),S||(_.g=Nh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),xt(_)}Ih(h)}function Gs(h){h.g&&(Rc(h),h.g.cancel(),h.g=null)}function $o(h){Gs(h),h.v&&(u.clearTimeout(h.v),h.v=null),Yo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Di(h){if(!$n(h.h)&&!h.m){h.m=!0;var _=h.Ea;X||C(),Y||(X(),Y=!0),A.add(_,h),h.D=0}}function Ko(h,_){return dr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=Rr(p(h.Ea,h,_),Rh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new we(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=q(ne),se(ne,this.U)):ne=this.U),this.u!==null||this.R||(W.J=ne,ne=null),this.S)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var N=this.i[S];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(_+=N,_>4096){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=Sh(this,W,_),S=Nt(this.J),Tt(S,"RID",h),Tt(S,"CVER",22),this.G&&Tt(S,"X-HTTP-Session-Id",this.G),Wa(this,S),ne&&(this.R?_="headers="+pe(Gr(ne))+"&"+_:this.u&&Ya(S,this.u,ne)),xr(this.h,W),this.Ra&&Tt(S,"TYPE","init"),this.S?(Tt(S,"$req",_),Tt(S,"SID","null"),W.U=!0,Re(W,S,null)):Re(W,S,_),this.I=2}}else this.I==3&&(h?Cc(this,h):this.i.length==0||$n(this.h)||Cc(this))};function Cc(h,_){var S;_?S=_.l:S=h.V++;const N=Nt(h.J);Tt(N,"SID",h.M),Tt(N,"RID",S),Tt(N,"AID",h.K),Wa(h,N),h.u&&h.o&&Ya(N,h.u,h.o),S=new we(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Sh(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),xr(h.h,S),Re(S,N,_)}function Wa(h,_){h.H&&Pe(h.H,function(S,N){Tt(_,N,S)}),h.l&&Pe({},function(S,N){Tt(_,N,S)})}function Sh(h,_,S){S=Math.min(h.i.length,S);const N=h.l?p(h.l.Ka,h.l,h):null;e:{var W=h.i;let Ze=-1;for(;;){const cn=["count="+S];Ze==-1?S>0?(Ze=W[0].g,cn.push("ofs="+Ze)):Ze=0:cn.push("ofs="+Ze);let bt=!0;for(let Qt=0;Qt<S;Qt++){var ne=W[Qt].g;const $r=W[Qt].map;if(ne-=Ze,ne<0)Ze=Math.max(0,W[Qt].g-100),bt=!1;else try{ne="req"+ne+"_"||"";try{var Ee=$r instanceof Map?$r:Object.entries($r);for(const[Mi,hi]of Ee){let fi=hi;f(hi)&&(fi=ln(hi)),cn.push(ne+Mi+"="+encodeURIComponent(fi))}}catch(Mi){throw cn.push(ne+"type="+encodeURIComponent("_badmap")),Mi}}catch{N&&N($r)}}if(bt){Ee=cn.join("&");break e}}Ee=void 0}return h=h.i.splice(0,S),_.G=h,Ee}function Ah(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;X||C(),Y||(X(),Y=!0),A.add(_,h),h.A=0}}function Ja(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=Rr(p(h.Da,h),Rh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,wh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=Rr(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),Gs(this),wh(this))};function Rc(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function wh(h){h.g=new we(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=Nt(h.na);Tt(_,"RID","rpc"),Tt(_,"SID",h.M),Tt(_,"AID",h.K),Tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Tt(_,"TO",h.ia),Tt(_,"TYPE","xmlhttp"),Wa(h,_),h.u&&h.o&&Ya(_,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Ga(Nt(_)),S.u=null,S.R=!0,Be(S,h)}n.Va=function(){this.C!=null&&(this.C=null,Gs(this),Ja(this),Yt(19))};function Yo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Ch(h,_){var S=null;if(h.g==_){Yo(h),Rc(h),h.g=null;var N=2}else if(Kn(h.h,_))S=_.G,wi(h.h,_),N=1;else return;if(h.I!=0){if(_.o)if(N==1){S=_.u?_.u.length:0,_=Date.now()-_.F;var W=h.D;N=Ls(),Ge(N,new Fr(N,S)),Di(h)}else Ah(h);else if(W=_.m,W==3||W==0&&_.X>0||!(N==1&&Ko(h,_)||N==2&&Ja(h)))switch(S&&S.length>0&&(_=h.h,_.i=_.i.concat(S)),W){case 1:Oi(h,5);break;case 4:Oi(h,10);break;case 3:Oi(h,6);break;default:Oi(h,2)}}}function Rh(h,_){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*_}function Oi(h,_){if(h.j.info("Error code "+_),_==2){var S=p(h.bb,h),N=h.Ua;const W=!N;N=new pn(N||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||nt(N,"https"),Ga(N),W?li(N.toString(),S):bc(N.toString(),S)}else Yt(2);h.I=0,h.l&&h.l.pa(_),Ih(h),$o(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Ih(h){if(h.I=0,h.ja=[],h.l){const _=Ci(h.h);(_.length!=0||h.i.length!=0)&&(M(h.ja,_),M(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function xh(h,_,S){var N=S instanceof pn?Nt(S):new pn(S);if(N.g!="")_&&(N.g=_+"."+N.g),Nr(N,N.u);else{var W=u.location;N=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;const ne=new pn(null);N&&nt(ne,N),_&&(ne.g=_),W&&Nr(ne,W),S&&(ne.h=S),N=ne}return S=h.G,_=h.wa,S&&_&&Tt(N,S,_),Tt(N,"VER",h.ka),Wa(h,N),N}function Nh(h,_,S){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Dt(new Ii({ab:S})):new Dt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dh(){}n=Dh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $s(){}$s.prototype.g=function(h,_){return new ar(h,_)};function ar(h,_){De.call(this),this.g=new qs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!x(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ji(this)}v(ar,De),ar.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ar.prototype.close=function(){wc(this.g)},ar.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=ln(h),h=S);_.i.push(new Bt(_.Ya++,h)),_.I==3&&Di(_)},ar.prototype.N=function(){this.g.l=null,delete this.j,wc(this.g),delete this.g,ar.Z.N.call(this)};function Oh(h){Lt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Oh,Lt);function Mh(){rr.call(this),this.status=1}v(Mh,rr);function Ji(h){this.g=h}v(Ji,Dh),Ji.prototype.ra=function(){Ge(this.g,"a")},Ji.prototype.qa=function(h){Ge(this.g,new Oh(h))},Ji.prototype.pa=function(h){Ge(this.g,new Mh)},Ji.prototype.oa=function(){Ge(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,ar.prototype.send=ar.prototype.o,ar.prototype.open=ar.prototype.m,ar.prototype.close=ar.prototype.close,N1=function(){return new $s},x1=function(){return Ls()},I1=Kt,Dy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,nd=Qi,z.COMPLETE="complete",R1=z,Vs.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",De.prototype.listen=De.prototype.J,Eu=Vs,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,C1=Dt}).apply(typeof Bf<"u"?Bf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Wn.UNAUTHENTICATED=new Wn(null),Wn.GOOGLE_CREDENTIALS=new Wn("google-credentials-uid"),Wn.FIRST_PARTY=new Wn("first-party-uid"),Wn.MOCK_USER=new Wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="12.8.0";function FO(n){uc=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new __("@firebase/firestore");function Dl(){return xo.logLevel}function Ce(n,...e){if(xo.logLevel<=dt.DEBUG){const t=e.map(T_);xo.debug(`Firestore (${uc}): ${n}`,...t)}}function Rs(n,...e){if(xo.logLevel<=dt.ERROR){const t=e.map(T_);xo.error(`Firestore (${uc}): ${n}`,...t)}}function Wl(n,...e){if(xo.logLevel<=dt.WARN){const t=e.map(T_);xo.warn(`Firestore (${uc}): ${n}`,...t)}}function T_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,D1(n,i,t)}function D1(n,e,t){let i=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Rs(i),new Error(i)}function Ct(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||D1(e,a,i)}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ks{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Wn.UNAUTHENTICATED)))}shutdown(){}}class GO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class $O{constructor(e){this.t=e,this.currentUser=Wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ct(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new As;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new As,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new As)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ct(typeof i.accessToken=="string",31837,{l:i}),new O1(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string",2055,{h:e}),new Wn(e)}}class KO{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Wn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class YO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new KO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Wn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ct(this.o===void 0,3512);const i=l=>{l.error!=null&&Ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=XO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function mt(n,e){return n<e?-1:n>e?1:0}function Oy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return ry(a)===ry(l)?mt(a,l):ry(a)?1:-1}return mt(n.length,e.length)}const WO=55296,JO=57343;function ry(n){const e=n.charCodeAt(0);return e>=WO&&e<=JO}function Jl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class ji{constructor(e,t,i){t===void 0?t=0:t>e.length&&He(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&He(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=ji.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const i=ji.isNumericId(e),a=ji.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ji.extractNumericId(e).compare(ji.extractNumericId(t)):Oy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class Ht extends ji{construct(e,t,i){return new Ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Se(ce.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ht(t)}static emptyPath(){return new Ht([])}}const ZO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends ji{construct(e,t,i){return new Fn(e,t,i)}static isValidIdentifier(e){return ZO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new Fn([B0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new Se(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Se(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new Se(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Ht.fromString(e))}static fromName(e){return new je(Ht.fromString(e).popFirst(5))}static empty(){return new je(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M1(n,e,t){if(!t)throw new Se(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eM(n,e,t,i){if(e===!0&&i===!0)throw new Se(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function H0(n){if(!je.isDocumentKey(n))throw new Se(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F0(n){if(je.isDocumentKey(n))throw new Se(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function P1(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":He(12329,{type:typeof n})}function Sr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sm(n);throw new Se(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(n,e){const t={typeString:n};return e&&(t.value=e),t}function ih(n,e){if(!P1(n))throw new Se(ce.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Se(ce.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,G0=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*G0);return new $t(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q0)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G0}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ih(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:Sn("string",$t._jsonSchemaVersion),seconds:Sn("number"),nanoseconds:Sn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new $t(0,0))}static max(){return new Ye(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function tM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ye.fromTimestamp(i===1e9?new $t(t+1,0):new $t(t,i));return new Oa(a,je.empty(),e)}function nM(n){return new Oa(n.readTime,n.key,Uu)}class Oa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oa(Ye.min(),je.empty(),Uu)}static max(){return new Oa(Ye.max(),je.empty(),Uu)}}function rM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==iM)throw n;Ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&He(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,i)=>{t(e)}))}static reject(e){return new fe(((t,i)=>{i(e)}))}static waitFor(e){return new fe(((t,i)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(m=>i(m)))})),u=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const i of e)t=t.next((a=>a?fe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new fe(((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{u[p]=y,++f,f===l&&i(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new fe(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function aM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}am.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-1;function om(n){return n==null}function Cd(n){return n===0&&1/n==-1/0}function oM(n){return typeof n=="number"&&Number.isInteger(n)&&!Cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="";function lM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$0(e)),e=cM(n.get(t),e);return $0(e)}function cM(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case k1:t+="";break;default:t+=l}}return t}function $0(n){return n+k1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function V1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t){this.comparator=e,this.root=t||Hn.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Hn.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Hn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Hn.RED,this.left=a??Hn.EMPTY,this.right=l??Hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Hn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Hn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw He(43730,{key:this.key,value:this.value});if(this.right.isRed())throw He(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw He(27949);return e+(this.isRed()?0:1)}}Hn.EMPTY=null,Hn.RED=!0,Hn.BLACK=!1;Hn.EMPTY=new class{constructor(){this.size=0}get key(){throw He(57766)}get value(){throw He(16141)}get color(){throw He(16727)}get left(){throw He(29726)}get right(){throw He(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cn(this.comparator);return t.data=e,t}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new Ur([])}unionWith(e){let t=new Cn(Fn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ur(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new L1("Invalid base64 string: "+l):l}})(e);return new qn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const uM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(Ct(!!n,39018),typeof n=="string"){let e=0;const t=uM.exec(n);if(Ct(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:fn(n.seconds),nanos:fn(n.nanos)}}function fn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pa(n){return typeof n=="string"?qn.fromBase64String(n):qn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="server_timestamp",U1="__type__",z1="__previous_value__",B1="__local_write_time__";function A_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[U1])==null?void 0:i.stringValue)===j1}function lm(n){const e=n.mapValue.fields[z1];return A_(e)?lm(e):e}function zu(n){const e=Ma(n.mapValue.fields[B1].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t,i,a,l,u,f,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=v}}const Rd="(default)";class Bu{constructor(e,t){this.projectId=e,this.database=t||Rd}static empty(){return new Bu("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}function fM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Se(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="__type__",dM="__max__",Ff={mapValue:{}},F1="__vector__",Id="value";function ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?A_(n)?4:pM(n)?9007199254740991:mM(n)?10:11:He(28295,{value:n})}function $i(n,e){if(n===e)return!0;const t=ka(n);if(t!==ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zu(n).isEqual(zu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ma(a.timestampValue),f=Ma(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Pa(a.bytesValue).isEqual(Pa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return fn(a.geoPointValue.latitude)===fn(l.geoPointValue.latitude)&&fn(a.geoPointValue.longitude)===fn(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return fn(a.integerValue)===fn(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=fn(a.doubleValue),f=fn(l.doubleValue);return u===f?Cd(u)===Cd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Jl(n.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(K0(u)!==K0(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!$i(u[m],f[m])))return!1;return!0})(n,e);default:return He(52216,{left:n})}}function Hu(n,e){return(n.values||[]).find((t=>$i(t,e)))!==void 0}function Zl(n,e){if(n===e)return 0;const t=ka(n),i=ka(e);if(t!==i)return mt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=fn(l.integerValue||l.doubleValue),m=fn(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return Q0(n.timestampValue,e.timestampValue);case 4:return Q0(zu(n),zu(e));case 5:return Oy(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=Pa(l),m=Pa(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),m=u.split("/");for(let p=0;p<f.length&&p<m.length;p++){const y=mt(f[p],m[p]);if(y!==0)return y}return mt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=mt(fn(l.latitude),fn(u.latitude));return f!==0?f:mt(fn(l.longitude),fn(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return X0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var b,w,M,H;const f=l.fields||{},m=u.fields||{},p=(b=f[Id])==null?void 0:b.arrayValue,y=(w=m[Id])==null?void 0:w.arrayValue,v=mt(((M=p==null?void 0:p.values)==null?void 0:M.length)||0,((H=y==null?void 0:y.values)==null?void 0:H.length)||0);return v!==0?v:X0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Ff.mapValue&&u===Ff.mapValue)return 0;if(l===Ff.mapValue)return 1;if(u===Ff.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const b=Oy(m[v],y[v]);if(b!==0)return b;const w=Zl(f[m[v]],p[y[v]]);if(w!==0)return w}return mt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw He(23264,{he:t})}}function Q0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=Ma(n),i=Ma(e),a=mt(t.seconds,i.seconds);return a!==0?a:mt(t.nanos,i.nanos)}function X0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Zl(t[a],i[a]);if(l)return l}return mt(t.length,i.length)}function ec(n){return My(n)}function My(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ma(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Pa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return je.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=My(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${My(t.fields[u])}`;return a+"}"})(n.mapValue):He(61005,{value:n})}function rd(n){switch(ka(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(n);return e?16+rd(e):16;case 5:return 2*n.stringValue.length;case 6:return Pa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+rd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ua(i.fields,((l,u)=>{a+=l.length+rd(u)})),a})(n.mapValue);default:throw He(13486,{value:n})}}function W0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Py(n){return!!n&&"integerValue"in n}function w_(n){return!!n&&"arrayValue"in n}function J0(n){return!!n&&"nullValue"in n}function Z0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function id(n){return!!n&&"mapValue"in n}function mM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[H1])==null?void 0:i.stringValue)===F1}function Ru(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ru(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ru(n.arrayValue.values[t]);return e}return{...n}}function pM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===dM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e){this.value=e}static empty(){return new br({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(t)}setAll(e){let t=Fn.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=Ru(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];id(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ua(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new br(Ru(this.value))}}function q1(n){const e=[];return Ua(n.fields,((t,i)=>{const a=new Fn([t]);if(id(i)){const l=q1(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Zn(e,0,Ye.min(),Ye.min(),Ye.min(),br.empty(),0)}static newFoundDocument(e,t,i,a){return new Zn(e,1,t,Ye.min(),i,a,0)}static newNoDocument(e,t){return new Zn(e,2,t,Ye.min(),Ye.min(),br.empty(),0)}static newUnknownDocument(e,t){return new Zn(e,3,t,Ye.min(),Ye.min(),br.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=br.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=br.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.position=e,this.inclusive=t}}function eS(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=je.comparator(je.fromName(u.referenceValue),t.key):i=Zl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function tS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function gM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{}class bn extends G1{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _M(e,t,i):t==="array-contains"?new TM(e,i):t==="in"?new bM(e,i):t==="not-in"?new SM(e,i):t==="array-contains-any"?new AM(e,i):new bn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vM(e,i):new EM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zl(t,this.value)):t!==null&&ka(this.value)===ka(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends G1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ti(e,t)}matches(e){return $1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $1(n){return n.op==="and"}function K1(n){return yM(n)&&$1(n)}function yM(n){for(const e of n.filters)if(e instanceof Ti)return!1;return!0}function ky(n){if(n instanceof bn)return n.field.canonicalString()+n.op.toString()+ec(n.value);if(K1(n))return n.filters.map((e=>ky(e))).join(",");{const e=n.filters.map((t=>ky(t))).join(",");return`${n.op}(${e})`}}function Y1(n,e){return n instanceof bn?(function(i,a){return a instanceof bn&&i.op===a.op&&i.field.isEqual(a.field)&&$i(i.value,a.value)})(n,e):n instanceof Ti?(function(i,a){return a instanceof Ti&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,f)=>l&&Y1(u,a.filters[f])),!0):!1})(n,e):void He(19439)}function Q1(n){return n instanceof bn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ec(t.value)}`})(n):n instanceof Ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q1).join(" ,")+"}"})(n):"Filter"}class _M extends bn{constructor(e,t,i){super(e,t,i),this.key=je.fromName(i.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class vM extends bn{constructor(e,t){super(e,"in",t),this.keys=X1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class EM extends bn{constructor(e,t){super(e,"not-in",t),this.keys=X1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function X1(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>je.fromName(i.referenceValue)))}class TM extends bn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return w_(t)&&Hu(t.arrayValue,this.value)}}class bM extends bn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}}class SM extends bn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hu(this.value.arrayValue,t)}}class AM extends bn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!w_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Hu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function nS(n,e=null,t=[],i=[],a=null,l=null,u=null){return new wM(n,e,t,i,a,l,u)}function C_(n){const e=We(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ky(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ec(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ec(i))).join(",")),e.Te=t}return e.Te}function R_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Y1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tS(n.startAt,e.startAt)&&tS(n.endAt,e.endAt)}function Vy(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function CM(n,e,t,i,a,l,u,f){return new sh(n,e,t,i,a,l,u,f)}function cm(n){return new sh(n)}function rS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function RM(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function W1(n){return n.collectionGroup!==null}function Iu(n){const e=We(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Cn(Fn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Nd(l,i))})),t.has(Fn.keyField().canonicalString())||e.Ie.push(new Nd(Fn.keyField(),i))}return e.Ie}function Bi(n){const e=We(n);return e.Ee||(e.Ee=IM(e,Iu(n))),e.Ee}function IM(n,e){if(n.limitType==="F")return nS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Nd(a.field,l)}));const t=n.endAt?new xd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new xd(n.startAt.position,n.startAt.inclusive):null;return nS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ly(n,e){const t=n.filters.concat([e]);return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jy(n,e,t){return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function um(n,e){return R_(Bi(n),Bi(e))&&n.limitType===e.limitType}function J1(n){return`${C_(Bi(n))}|lt:${n.limitType}`}function Ol(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Q1(a))).join(", ")}]`),om(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>ec(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>ec(a))).join(",")),`Target(${i})`})(Bi(n))}; limitType=${n.limitType})`}function hm(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):je.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Iu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,m){const p=eS(u,f,m);return u.inclusive?p<=0:p<0})(i.startAt,Iu(i),a)||i.endAt&&!(function(u,f,m){const p=eS(u,f,m);return u.inclusive?p>=0:p>0})(i.endAt,Iu(i),a))})(n,e)}function xM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Z1(n){return(e,t)=>{let i=!1;for(const a of Iu(n)){const l=NM(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function NM(n,e,t){const i=n.field.isKeyField()?je.comparator(e.key,t.key):(function(l,u,f){const m=u.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Zl(m,p):He(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return He(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return V1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM=new nn(je.comparator);function Is(){return DM}const ew=new nn(je.comparator);function Tu(...n){let e=ew;for(const t of n)e=e.insert(t.key,t);return e}function tw(n){let e=ew;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function To(){return xu()}function nw(){return xu()}function xu(){return new Vo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const OM=new nn(je.comparator),MM=new Cn(je.comparator);function pt(...n){let e=MM;for(const t of n)e=e.add(t);return e}const PM=new Cn(mt);function kM(){return PM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function rw(n){return{integerValue:""+n}}function VM(n,e){return oM(e)?rw(e):I_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function LM(n,e,t){return n instanceof Fu?(function(a,l){const u={fields:{[U1]:{stringValue:j1},[B1]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&A_(l)&&(l=lm(l)),l&&(u.fields[z1]=l),{mapValue:u}})(t,e):n instanceof qu?sw(n,e):n instanceof Gu?aw(n,e):(function(a,l){const u=iw(a,l),f=iS(u)+iS(a.Ae);return Py(u)&&Py(a.Ae)?rw(f):I_(a.serializer,f)})(n,e)}function jM(n,e,t){return n instanceof qu?sw(n,e):n instanceof Gu?aw(n,e):t}function iw(n,e){return n instanceof Dd?(function(i){return Py(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Fu extends fm{}class qu extends fm{constructor(e){super(),this.elements=e}}function sw(n,e){const t=ow(e);for(const i of n.elements)t.some((a=>$i(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Gu extends fm{constructor(e){super(),this.elements=e}}function aw(n,e){let t=ow(e);for(const i of n.elements)t=t.filter((a=>!$i(a,i)));return{arrayValue:{values:t}}}class Dd extends fm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iS(n){return fn(n.integerValue||n.doubleValue)}function ow(n){return w_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,t){this.field=e,this.transform=t}}function zM(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof qu&&a instanceof qu||i instanceof Gu&&a instanceof Gu?Jl(i.elements,a.elements,$i):i instanceof Dd&&a instanceof Dd?$i(i.Ae,a.Ae):i instanceof Fu&&a instanceof Fu})(n.transform,e.transform)}class BM{constructor(e,t){this.version=e,this.transformResults=t}}class Ar{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ar}static exists(e){return new Ar(void 0,e)}static updateTime(e){return new Ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dm{}function lw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mm(n.key,Ar.none()):new ah(n.key,n.data,Ar.none());{const t=n.data,i=br.empty();let a=new Cn(Fn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new za(n.key,i,new Ur(a.toArray()),Ar.none())}}function HM(n,e,t){n instanceof ah?(function(a,l,u){const f=a.value.clone(),m=aS(a.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof za?(function(a,l,u){if(!sd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=aS(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(cw(a)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Nu(n,e,t,i){return n instanceof ah?(function(l,u,f,m){if(!sd(l.precondition,u))return f;const p=l.value.clone(),y=oS(l.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof za?(function(l,u,f,m){if(!sd(l.precondition,u))return f;const p=oS(l.fieldTransforms,m,u),y=u.data;return y.setAll(cw(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,u,f){return sd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function FM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=iw(i.transform,a||null);l!=null&&(t===null&&(t=br.empty()),t.set(i.field,l))}return t||null}function sS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Jl(i,a,((l,u)=>zM(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ah extends dm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class za extends dm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function aS(n,e,t){const i=new Map;Ct(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,jM(u,f,t[a]))}return i}function oS(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,LM(l,u,e))}return i}class mm extends dm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qM extends dm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&HM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Nu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Nu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nw();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const m=lw(u,f);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(Ye.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((t,i)=>sS(t,i)))&&Jl(this.baseMutations,e.baseMutations,((t,i)=>sS(t,i)))}}class x_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Ct(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return OM})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new x_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En,yt;function YM(n){switch(n){case ce.OK:return He(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return He(15467,{code:n})}}function uw(n){if(n===void 0)return Rs("GRPC error has no .code"),ce.UNKNOWN;switch(n){case En.OK:return ce.OK;case En.CANCELLED:return ce.CANCELLED;case En.UNKNOWN:return ce.UNKNOWN;case En.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case En.INTERNAL:return ce.INTERNAL;case En.UNAVAILABLE:return ce.UNAVAILABLE;case En.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case En.NOT_FOUND:return ce.NOT_FOUND;case En.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case En.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case En.ABORTED:return ce.ABORTED;case En.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case En.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case En.DATA_LOSS:return ce.DATA_LOSS;default:return He(39323,{code:n})}}(yt=En||(En={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new xa([4294967295,4294967295],0);function lS(n){const e=QM().encode(n),t=new w1;return t.update(e),new Uint8Array(t.digest())}function cS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xa([t,i],0),new xa([a,l],0)]}class N_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(i<0)throw new bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xa.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(xa.fromNumber(i)));return a.compare(XM)===1&&(a=new xa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lS(e),[i,a]=cS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new N_(l,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=lS(e),[i,a]=cS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new pm(Ye.min(),a,new nn(mt),Is(),pt())}}class oh{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new oh(i,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class hw{constructor(e,t){this.targetId=e,this.Ce=t}}class fw{constructor(e,t,i=qn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class uS{constructor(){this.ve=0,this.Fe=hS(),this.Me=qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),i=pt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:He(38017,{changeType:l})}})),new oh(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=hS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ct(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class WM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.He=qf(),this.Je=qf(),this.Ze=new nn(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:He(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Vy(l))if(i===0){const u=new je(l.path);this.et(t,u,Zn.newNoDocument(u,Ye.min()))}else Ct(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=Pa(i).toUint8Array()}catch(m){if(m instanceof L1)return Wl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new N_(u,a,l)}catch(m){return Wl(m instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Vy(f.target)){const m=new je(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,Zn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let i=pt();this.Je.forEach(((l,u)=>{let f=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new pm(e,t,this.Ze,this.je,i);return this.je=Is(),this.He=qf(),this.Je=qf(),this.Ze=new nn(mt),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new uS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Cn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Cn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qf(){return new nn(je.comparator)}function hS(){return new nn(je.comparator)}const JM={asc:"ASCENDING",desc:"DESCENDING"},ZM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},e4={and:"AND",or:"OR"};class t4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Uy(n,e){return n.useProto3Json||om(e)?e:{value:e}}function Od(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function n4(n,e){return Od(n,e.toTimestamp())}function Hi(n){return Ct(!!n,49232),Ye.fromTimestamp((function(t){const i=Ma(t);return new $t(i.seconds,i.nanos)})(n))}function D_(n,e){return zy(n,e).canonicalString()}function zy(n,e){const t=(function(a){return new Ht(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mw(n){const e=Ht.fromString(n);return Ct(vw(e),10190,{key:e.toString()}),e}function By(n,e){return D_(n.databaseId,e.path)}function iy(n,e){const t=mw(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(gw(t))}function pw(n,e){return D_(n.databaseId,e)}function r4(n){const e=mw(n);return e.length===4?Ht.emptyPath():gw(e)}function Hy(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gw(n){return Ct(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fS(n,e,t){return{name:By(n,e),fields:t.value.mapValue.fields}}function i4(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:He(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(Ct(y===void 0||typeof y=="string",58123),qn.fromBase64String(y||"")):(Ct(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),qn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const y=p.code===void 0?ce.UNKNOWN:uw(p.code);return new Se(y,p.message||"")})(u);t=new fw(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=iy(n,i.document.name),l=Hi(i.document.updateTime),u=i.document.createTime?Hi(i.document.createTime):Ye.min(),f=new br({mapValue:{fields:i.document.fields}}),m=Zn.newFoundDocument(a,l,u,f),p=i.targetIds||[],y=i.removedTargetIds||[];t=new ad(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=iy(n,i.document),l=i.readTime?Hi(i.readTime):Ye.min(),u=Zn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new ad([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=iy(n,i.document),l=i.removedTargetIds||[];t=new ad([],l,a,null)}else{if(!("filter"in e))return He(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new KM(a,l),f=i.targetId;t=new hw(f,u)}}return t}function s4(n,e){let t;if(e instanceof ah)t={update:fS(n,e.key,e.value)};else if(e instanceof mm)t={delete:By(n,e.key)};else if(e instanceof za)t={update:fS(n,e.key,e.data),updateMask:m4(e.fieldMask)};else{if(!(e instanceof qM))return He(16599,{dt:e.type});t={verify:By(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof Fu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Gu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Dd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw He(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:n4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:He(27497)})(n,e.precondition)),t}function a4(n,e){return n&&n.length>0?(Ct(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Hi(a.updateTime):Hi(l);return u.isEqual(Ye.min())&&(u=Hi(l)),new BM(u,a.transformResults||[])})(t,e)))):[]}function o4(n,e){return{documents:[pw(n,e.path)]}}function l4(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=pw(n,a);const l=(function(p){if(p.length!==0)return _w(Ti.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((y=>(function(b){return{field:Ml(b.field),direction:h4(b.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Uy(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function c4(n){let e=r4(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ct(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const b=yw(v);return b instanceof Ti&&K1(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((b=>(function(M){return new Nd(Pl(M.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let b;return b=typeof v=="object"?v.value:v,om(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(v){const b=!!v.before,w=v.values||[];return new xd(w,b)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const b=!v.before,w=v.values||[];return new xd(w,b)})(t.endAt)),CM(e,a,u,l,f,"F",m,p)}function u4(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Pl(t.unaryFilter.field);return bn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Pl(t.unaryFilter.field);return bn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Pl(t.unaryFilter.field);return bn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Pl(t.unaryFilter.field);return bn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return He(61313);default:return He(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bn.create(Pl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return He(58110);default:return He(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ti.create(t.compositeFilter.filters.map((i=>yw(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return He(1026)}})(t.compositeFilter.op))})(n):He(30097,{filter:n})}function h4(n){return JM[n]}function f4(n){return ZM[n]}function d4(n){return e4[n]}function Ml(n){return{fieldPath:n.canonicalString()}}function Pl(n){return Fn.fromServerFormat(n.fieldPath)}function _w(n){return n instanceof bn?(function(t){if(t.op==="=="){if(Z0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(J0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(J0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:f4(t.op),value:t.value}}})(n):n instanceof Ti?(function(t){const i=t.getFilters().map((a=>_w(a)));return i.length===1?i[0]:{compositeFilter:{op:d4(t.op),filters:i}}})(n):He(54877,{filter:n})}function m4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Ew(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t,i,a,l=Ye.min(),u=Ye.min(),f=qn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.yt=e}}function g4(n){const e=c4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this.Sn=new _4}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Oa.min())}updateCollectionGroup(e,t,i){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class _4{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Cn(Ht.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Cn(Ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tw=41943040;class Tr{static withCacheSize(e){return new Tr(e,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr.DEFAULT_COLLECTION_PERCENTILE=10,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tr.DEFAULT=new Tr(Tw,Tr.DEFAULT_COLLECTION_PERCENTILE,Tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tr.DISABLED=new Tr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new tc(0)}static ar(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",v4=1048576;function pS([n,e],[t,i]){const a=mt(n,t);return a===0?mt(e,i):a}class E4{constructor(e){this.Pr=e,this.buffer=new Cn(pS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();pS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T4{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ce(mS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fc(t)?Ce(mS,"Ignoring IndexedDB error during garbage collection: ",t):await hc(t)}await this.Ar(3e5)}))}}class b4{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(am.ce);const i=new E4(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ce("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(dS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,u,f,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),Dl()<=dt.DEBUG&&Ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function S4(n,e){return new b4(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.changes=new Vo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Nu(i.mutation,a,Ur.empty(),$t.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,pt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=pt()){const a=To();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=Tu();return l.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=To();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,pt())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let l=Is();const u=xu(),f=(function(){return xu()})();return t.forEach(((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof za)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Nu(y.mutation,p,y.mutation.getFieldMask(),$t.now())):u.set(p.key,Ur.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>u.set(p,y))),t.forEach(((p,y)=>f.set(p,new w4(y,u.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=xu();let a=new nn(((u,f)=>u-f)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Ur.empty();y=f.applyToLocalView(p,y),i.set(m,y);const v=(a.get(f.batchId)||pt()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,y=m.value,v=nw();y.forEach((b=>{if(!l.has(b)){const w=lw(t.get(b),i.get(b));w!==null&&v.set(b,w),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return fe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return RM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):W1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):fe.resolve(To());let f=Uu,m=l;return u.next((p=>fe.forEach(p,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?fe.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,pt()))).next((y=>({batchId:f,changes:tw(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((i=>{let a=Tu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=Tu();return this.indexManager.getCollectionParents(e,l).next((f=>fe.forEach(f,(m=>{const p=(function(v,b){return new sh(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((y=>{y.forEach(((v,b)=>{u=u.insert(v,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,Zn.newInvalidDocument(y)))}));let f=Tu();return u.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&Nu(y.mutation,p,Ur.empty(),$t.now()),hm(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Hi(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:g4(a.bundledQuery),readTime:Hi(a.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.overlays=new nn(je.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=To();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),fe.resolve()}getOverlaysForCollection(e,t,i){const a=To(),l=t.length+1,u=new je(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new nn(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=To(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=To(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return fe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new $M(t,i));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.kr=new Cn(On.Kr),this.qr=new Cn(On.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new On(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new On(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new je(new Ht([])),i=new On(t,e),a=new On(t,e+1),l=[];return this.qr.forEachInRange([i,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new je(new Ht([])),i=new On(t,e),a=new On(t,e+1);let l=pt();return this.qr.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new On(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class On{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return je.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Cn(On.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new GM(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Jr=this.Jr.add(new On(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return fe.resolve(u)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?S_:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new On(t,0),a=new On(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(u=>{const f=this.Zr(u.Hr);l.push(f)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Cn(mt);return t.forEach((a=>{const l=new On(a,0),u=new On(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(f=>{i=i.add(f.Hr)}))})),fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;je.isDocumentKey(l)||(l=l.child(""));const u=new On(new je(l),0);let f=new Cn(mt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Hr)),!0)}),u),fe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ct(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return fe.forEach(t.mutations,(a=>{const l=new On(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new On(t,0),a=this.Jr.firstAfterOrEqual(i);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.ti=e,this.docs=(function(){return new nn(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return fe.resolve(i?i.document.mutableCopy():Zn.newInvalidDocument(t))}getEntries(e,t){let i=Is();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Zn.newInvalidDocument(a))})),fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Is();const u=t.path,f=new je(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||rM(nM(y),i)<=0||(a.has(y.key)||hm(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){He(9500)}ni(e,t){return fe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new O4(this)}getSize(e){return fe.resolve(this.size)}}class O4 extends A4{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.persistence=e,this.ri=new Vo((t=>C_(t)),R_),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ii=0,this.si=new O_,this.targetCount=0,this.oi=tc._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new tc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return fe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),fe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return fe.resolve(i)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e,t){this._i={},this.overlays={},this.ai=new am(0),this.ui=!1,this.ui=!0,this.ci=new x4,this.referenceDelegate=e(this),this.li=new M4(this),this.indexManager=new y4,this.remoteDocumentCache=(function(a){return new D4(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new p4(t),this.Pi=new R4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new I4,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new N4(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Ce("MemoryPersistence","Starting transaction:",e);const a=new P4(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class P4 extends sM{constructor(e){super(),this.currentSequenceNumber=e}}class M_{constructor(e){this.persistence=e,this.Ri=new O_,this.Ai=null}static Vi(e){return new M_(e)}get di(){if(this.Ai)return this.Ai;throw He(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),fe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(i=>{const a=je.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,Ye.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Md{constructor(e,t){this.persistence=e,this.fi=new Vo((i=>lM(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=S4(this,t)}static Vi(e,t){return new Md(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,l.removeEntry(u,Ye.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rd(e.data.value)),t}wr(e,t,i){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return fe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=pt(),a=pt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new P_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return w2()?8:aM(er())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new k4;return this.ys(e,t,u).next((f=>{if(l.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Dl()<=dt.DEBUG&&Ce("QueryEngine","SDK will not create cache indexes for query:",Ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Dl()<=dt.DEBUG&&Ce("QueryEngine","Query:",Ol(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Dl()<=dt.DEBUG&&Ce("QueryEngine","The SDK decides to create cache indexes for query:",Ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):fe.resolve())}gs(e,t){if(rS(t))return fe.resolve(null);let i=Bi(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=jy(t,null,"F"),i=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=pt(...l);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,f);return this.Ss(t,p,u,m.readTime)?this.gs(e,jy(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,a){return rS(t)||a.isEqual(Ye.min())?fe.resolve(null):this.fs.getDocuments(e,i).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,i,a)?fe.resolve(null):(Dl()<=dt.DEBUG&&Ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ol(t)),this.Ds(e,u,t,tM(a,Uu)).next((f=>f)))}))}bs(e,t){let i=new Cn(Z1(e));return t.forEach(((a,l)=>{hm(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Dl()<=dt.DEBUG&&Ce("QueryEngine","Using full collection scan to execute query:",Ol(t)),this.fs.getDocumentsMatchingQuery(e,t,Oa.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="LocalStore",L4=3e8;class j4{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new nn(mt),this.Fs=new Vo((l=>C_(l)),R_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new C4(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function U4(n,e,t,i){return new j4(n,e,t,i)}async function Sw(n,e){const t=We(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let m=pt();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function z4(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,y){const v=p.batch,b=v.keys();let w=fe.resolve();return b.forEach((M=>{w=w.next((()=>y.getEntry(m,M))).next((H=>{const D=p.docVersions.get(M);Ct(D!==null,48541),H.version.compareTo(D)<0&&(v.applyToRemoteDocument(H,p),H.isValidDocument()&&(H.setReadTime(p.commitVersion),y.addEntry(H)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=pt();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function Aw(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function B4(n,e){const t=We(n),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((y,v)=>{const b=a.get(v);if(!b)return;f.push(t.li.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,v))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(qn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),a=a.insert(v,w),(function(H,D,j){return H.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=L4?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(b,w,y)&&f.push(t.li.updateTargetData(l,w))}));let m=Is(),p=pt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(H4(l,u,e.documentUpdates).next((y=>{m=y.Bs,p=y.Ls}))),!i.isEqual(Ye.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return fe.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.vs=a,l)))}function H4(n,e,t){let i=pt(),a=pt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Is();return t.forEach(((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(Ye.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Ce(k_,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:u,Ls:a}}))}function F4(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=S_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function q4(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,fe.resolve(a)):t.li.allocateTargetId(i).next((u=>(a=new Aa(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Fy(n,e,t){const i=We(n),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!fc(u))throw u;Ce(k_,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function gS(n,e,t){const i=We(n);let a=Ye.min(),l=pt();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,y){const v=We(m),b=v.Fs.get(y);return b!==void 0?fe.resolve(v.vs.get(b)):v.li.getTargetData(p,y)})(i,u,Bi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?a:Ye.min(),t?l:pt()))).next((f=>(G4(i,xM(e),f),{documents:f,ks:l})))))}function G4(n,e,t){let i=n.Ms.get(e)||Ye.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Ms.set(e,i)}class yS{constructor(){this.activeTargetIds=kM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $4{constructor(){this.vo=new yS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="ConnectivityMonitor";class vS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ce(_S,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ce(_S,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=null;function qy(){return Gf===null?Gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gf++,"0x"+Gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="RestConnection",Y4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Q4{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Rd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const u=qy(),f=this.Qo(e,t.toUriEncodedString());Ce(sy,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:p}=new URL(f),y=lc(p);return this.zo(e,f,m,i,y).then((v=>(Ce(sy,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw Wl(sy,`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,u){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=Y4[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection",pu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Bl extends Q4{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Bl.c_){const e=x1();pu(e,I1.STAT_EVENT,(t=>{t.stat===Dy.PROXY?Ce(Qn,"STAT_EVENT: detected buffering proxy"):t.stat===Dy.NOPROXY&&Ce(Qn,"STAT_EVENT: detected no buffering proxy")})),Bl.c_=!0}}zo(e,t,i,a,l){const u=qy();return new Promise(((f,m)=>{const p=new C1;p.setWithCredentials(!0),p.listenOnce(R1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case nd.NO_ERROR:const v=p.getResponseJson();Ce(Qn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),f(v);break;case nd.TIMEOUT:Ce(Qn,`RPC '${e}' ${u} timed out`),m(new Se(ce.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const b=p.getStatus();if(Ce(Qn,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const M=w==null?void 0:w.error;if(M&&M.status&&M.message){const H=(function(j){const P=j.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(P)>=0?P:ce.UNKNOWN})(M.status);m(new Se(H,M.message))}else m(new Se(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new Se(ce.UNAVAILABLE,"Connection failed."));break;default:He(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Ce(Qn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);Ce(Qn,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=qy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");Ce(Qn,`Creating RPC '${e}' stream ${a}: ${p}`,f);const y=u.createWebChannel(p,f);this.I_(y);let v=!1,b=!1;const w=new X4({Ho:M=>{b?Ce(Qn,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(v||(Ce(Qn,`Opening RPC '${e}' stream ${a} transport.`),y.open(),v=!0),Ce(Qn,`RPC '${e}' stream ${a} sending:`,M),y.send(M))},Jo:()=>y.close()});return pu(y,Eu.EventType.OPEN,(()=>{b||(Ce(Qn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),pu(y,Eu.EventType.CLOSE,(()=>{b||(b=!0,Ce(Qn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(y))})),pu(y,Eu.EventType.ERROR,(M=>{b||(b=!0,Wl(Qn,`RPC '${e}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),w.o_(new Se(ce.UNAVAILABLE,"The operation could not be completed")))})),pu(y,Eu.EventType.MESSAGE,(M=>{var H;if(!b){const D=M.data[0];Ct(!!D,16349);const j=D,P=(j==null?void 0:j.error)||((H=j[0])==null?void 0:H.error);if(P){Ce(Qn,`RPC '${e}' stream ${a} received error:`,P);const U=P.status;let F=(function(A){const C=En[A];if(C!==void 0)return uw(C)})(U),X=P.message;F===void 0&&(F=ce.INTERNAL,X="Unknown error status: "+U+" with message "+P.message),b=!0,w.o_(new Se(F,X)),y.close()}else Ce(Qn,`RPC '${e}' stream ${a} received:`,D),w.__(D)}})),Bl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return N1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n){return new Bl(n)}function ay(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){return new t4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bl.c_=!1;class ww{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="PersistentStream";class Cw{constructor(e,t,i,a,l,u,f,m){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ww(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Rs(t.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new Se(ce.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ce(ES,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ce(ES,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class J4 extends Cw{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=i4(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Ye.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ye.min():u.readTime?Hi(u.readTime):Ye.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Hy(this.serializer),t.addTarget=(function(l,u){let f;const m=u.target;if(f=Vy(m)?{documents:o4(l,m)}:{query:l4(l,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=dw(l,u.resumeToken);const p=Uy(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(Ye.min())>0){f.readTime=Od(l,u.snapshotVersion.toTimestamp());const p=Uy(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=u4(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Hy(this.serializer),t.removeTarget=e,this.K_(t)}}class Z4 extends Cw{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=a4(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>s4(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{}class tP extends eP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,zy(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(ce.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,zy(t,i),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ce.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function nP(n,e,t,i){return new tP(n,e,t,i)}class rP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(t),this.aa=!1):Ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RemoteStore";class iP{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Lo(this)&&(Ce(No,"Restarting streams for network reachability change."),await(async function(m){const p=We(m);p.Ea.add(4),await lh(p),p.Va.set("Unknown"),p.Ea.delete(4),await ym(p)})(this))}))})),this.Va=new rP(i,a)}}async function ym(n){if(Lo(n))for(const e of n.Ra)await e(!0)}async function lh(n){for(const e of n.Ra)await e(!1)}function Rw(n,e){const t=We(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U_(t)?j_(t):dc(t).O_()&&L_(t,e))}function V_(n,e){const t=We(n),i=dc(t);t.Ia.delete(e),i.O_()&&Iw(t,e),t.Ia.size===0&&(i.O_()?i.L_():Lo(t)&&t.Va.set("Unknown"))}function L_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dc(n).Z_(e)}function Iw(n,e){n.da.$e(e),dc(n).X_(e)}function j_(n){n.da=new WM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.Va.ua()}function U_(n){return Lo(n)&&!dc(n).x_()&&n.Ia.size>0}function Lo(n){return We(n).Ea.size===0}function xw(n){n.da=void 0}async function sP(n){n.Va.set("Online")}async function aP(n){n.Ia.forEach(((e,t)=>{L_(n,e)}))}async function oP(n,e){xw(n),U_(n)?(n.Va.ha(e),j_(n)):n.Va.set("Unknown")}async function lP(n,e,t){if(n.Va.set("Online"),e instanceof fw&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.da.removeTarget(f))})(n,e)}catch(i){Ce(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pd(n,i)}else if(e instanceof ad?n.da.Xe(e):e instanceof hw?n.da.st(e):n.da.tt(e),!t.isEqual(Ye.min()))try{const i=await Aw(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.da.Tt(u);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(qn.EMPTY_BYTE_STRING,y.snapshotVersion)),Iw(l,m);const v=new Aa(y.target,m,p,y.sequenceNumber);L_(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){Ce(No,"Failed to raise snapshot:",i),await Pd(n,i)}}async function Pd(n,e,t){if(!fc(e))throw e;n.Ea.add(1),await lh(n),n.Va.set("Offline"),t||(t=()=>Aw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ce(No,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ym(n)}))}function Nw(n,e){return e().catch((t=>Pd(n,t,e)))}async function _m(n){const e=We(n),t=Va(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:S_;for(;cP(e);)try{const a=await F4(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,uP(e,a)}catch(a){await Pd(e,a)}Dw(e)&&Ow(e)}function cP(n){return Lo(n)&&n.Ta.length<10}function uP(n,e){n.Ta.push(e);const t=Va(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Dw(n){return Lo(n)&&!Va(n).x_()&&n.Ta.length>0}function Ow(n){Va(n).start()}async function hP(n){Va(n).ra()}async function fP(n){const e=Va(n);for(const t of n.Ta)e.ea(t.mutations)}async function dP(n,e,t){const i=n.Ta.shift(),a=x_.from(i,e,t);await Nw(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await _m(n)}async function mP(n,e){e&&Va(n).Y_&&await(async function(i,a){if((function(u){return YM(u)&&u!==ce.ABORTED})(a.code)){const l=i.Ta.shift();Va(i).B_(),await Nw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await _m(i)}})(n,e),Dw(n)&&Ow(n)}async function TS(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ce(No,"RemoteStore received new credentials");const i=Lo(t);t.Ea.add(3),await lh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ym(t)}async function pP(n,e){const t=We(n);e?(t.Ea.delete(2),await ym(t)):e||(t.Ea.add(2),await lh(t),t.Va.set("Unknown"))}function dc(n){return n.ma||(n.ma=(function(t,i,a){const l=We(t);return l.sa(),new J4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:sP.bind(null,n),Yo:aP.bind(null,n),t_:oP.bind(null,n),J_:lP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),U_(n)?j_(n):n.Va.set("Unknown")):(await n.ma.stop(),xw(n))}))),n.ma}function Va(n){return n.fa||(n.fa=(function(t,i,a){const l=We(t);return l.sa(),new Z4(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:hP.bind(null,n),t_:mP.bind(null,n),ta:fP.bind(null,n),na:dP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await _m(n)):(await n.fa.stop(),n.Ta.length>0&&(Ce(No,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new z_(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(n,e){if(Rs("AsyncQueue",`${e}: ${n}`),fc(n))return new Se(ce.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||je.comparator(t.key,i.key):(t,i)=>je.comparator(t.key,i.key),this.keyedMap=Tu(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Hl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.ga=new nn(je.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):He(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class nc{constructor(e,t,i,a,l,u,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new nc(e,t,Hl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class yP{constructor(){this.queries=SS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=We(t),l=a.queries;a.queries=SS(),l.forEach(((u,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new Se(ce.ABORTED,"Firestore shutting down"))}}function SS(){return new Vo((n=>J1(n)),um)}async function H_(n,e){const t=We(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new gP,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=B_(u,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&q_(t)}async function F_(n,e){const t=We(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function _P(n,e){const t=We(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.ba)f.Fa(a)&&(i=!0);u.wa=a}}i&&q_(t)}function vP(n,e,t){const i=We(n),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function q_(n){n.Ca.forEach((e=>{e.next()}))}var Gy,AS;(AS=Gy||(Gy={})).Ma="default",AS.Cache="cache";class G_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new nc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.key=e}}class Pw{constructor(e){this.key=e}}class EP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=Z1(e),this.tu=new Hl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new bS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const b=a.get(y),w=hm(this.query,v)?v:null,M=!!b&&this.mutatedKeys.has(b.key),H=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;b&&w?b.data.isEqual(w.data)?M!==H&&(i.track({type:3,doc:w}),D=!0):this.su(b,w)||(i.track({type:2,doc:w}),D=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(f=!0)):!b&&w?(i.track({type:0,doc:w}),D=!0):b&&!w&&(i.track({type:1,doc:b}),D=!0,(m||p)&&(f=!0)),D&&(w?(u=u.add(w),l=H?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:u,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,v)=>(function(w,M){const H=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He(20277,{Vt:D})}};return H(w)-H(M)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Xa;return this.Xa=m,u.length!==0||p?{snapshot:new nc(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new Pw(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new Mw(i))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $_="SyncEngine";class TP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class bP{constructor(e){this.key=e,this.hu=!1}}class SP{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Vo((f=>J1(f)),um),this.Iu=new Map,this.Eu=new Set,this.Ru=new nn(je.comparator),this.Au=new Map,this.Vu=new O_,this.du={},this.mu=new Map,this.fu=tc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function AP(n,e,t=!0){const i=zw(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await kw(i,e,t,!0),a}async function wP(n,e){const t=zw(n);await kw(t,e,!0,!1)}async function kw(n,e,t,i){const a=await q4(n.localStore,Bi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await CP(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&Rw(n.remoteStore,a),f}async function CP(n,e,t,i,a){n.pu=(v,b,w)=>(async function(H,D,j,P){let U=D.view.ru(j);U.Ss&&(U=await gS(H.localStore,D.query,!1).then((({documents:A})=>D.view.ru(A,U))));const F=P&&P.targetChanges.get(D.targetId),X=P&&P.targetMismatches.get(D.targetId)!=null,Y=D.view.applyChanges(U,H.isPrimaryClient,F,X);return CS(H,D.targetId,Y.au),Y.snapshot})(n,v,b,w);const l=await gS(n.localStore,e,!0),u=new EP(e,l.ks),f=u.ru(l.documents),m=oh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=u.applyChanges(f,n.isPrimaryClient,m);CS(n,t,p.au);const y=new TP(e,t,u);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function RP(n,e,t){const i=We(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!um(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Fy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&V_(i.remoteStore,a.targetId),$y(i,a.targetId)})).catch(hc)):($y(i,a.targetId),await Fy(i.localStore,a.targetId,!0))}async function IP(n,e){const t=We(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),V_(t.remoteStore,i.targetId))}async function xP(n,e,t){const i=VP(n);try{const a=await(function(u,f){const m=We(u),p=$t.now(),y=f.reduce(((w,M)=>w.add(M.key)),pt());let v,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let M=Is(),H=pt();return m.xs.getEntries(w,y).next((D=>{M=D,M.forEach(((j,P)=>{P.isValidDocument()||(H=H.add(j))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,M))).next((D=>{v=D;const j=[];for(const P of f){const U=FM(P,v.get(P.key).overlayedDocument);U!=null&&j.push(new za(P.key,U,q1(U.value.mapValue),Ar.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,j,f)})).next((D=>{b=D;const j=D.applyToLocalDocumentSet(v,H);return m.documentOverlayCache.saveOverlays(w,D.batchId,j)}))})).then((()=>({batchId:b.batchId,changes:tw(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,m){let p=u.du[u.currentUser.toKey()];p||(p=new nn(mt)),p=p.insert(f,m),u.du[u.currentUser.toKey()]=p})(i,a.batchId,t),await ch(i,a.changes),await _m(i.remoteStore)}catch(a){const l=B_(a,"Failed to persist write");t.reject(l)}}async function Vw(n,e){const t=We(n);try{const i=await B4(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(Ct(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?Ct(u.hu,14607):a.removedDocuments.size>0&&(Ct(u.hu,42227),u.hu=!1))})),await ch(t,i,e)}catch(i){await hc(i)}}function wS(n,e,t){const i=We(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const m=We(u);m.onlineState=f;let p=!1;m.queries.forEach(((y,v)=>{for(const b of v.ba)b.va(f)&&(p=!0)})),p&&q_(m)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function NP(n,e,t){const i=We(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new nn(je.comparator);u=u.insert(l,Zn.newNoDocument(l,Ye.min()));const f=pt().add(l),m=new pm(Ye.min(),new Map,new nn(mt),u,f);await Vw(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),K_(i)}else await Fy(i.localStore,e,!1).then((()=>$y(i,e,t))).catch(hc)}async function DP(n,e){const t=We(n),i=e.batch.batchId;try{const a=await z4(t.localStore,e);jw(t,i,null),Lw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ch(t,a)}catch(a){await hc(a)}}async function OP(n,e,t){const i=We(n);try{const a=await(function(u,f){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,f).next((v=>(Ct(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);jw(i,e,t),Lw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ch(i,a)}catch(a){await hc(a)}}function Lw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function jw(n,e,t){const i=We(n);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function $y(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||Uw(n,i)}))}function Uw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(V_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),K_(n))}function CS(n,e,t){for(const i of t)i instanceof Mw?(n.Vu.addReference(i.key,e),MP(n,i)):i instanceof Pw?(Ce($_,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||Uw(n,i.key)):He(19791,{wu:i})}function MP(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Ce($_,"New document in limbo: "+t),n.Eu.add(i),K_(n))}function K_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new je(Ht.fromString(e)),i=n.fu.next();n.Au.set(i,new bP(t)),n.Ru=n.Ru.insert(t,i),Rw(n.remoteStore,new Aa(Bi(cm(t.path)),i,"TargetPurposeLimboResolution",am.ce))}}async function ch(n,e,t){const i=We(n),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,t).then((p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=P_.Es(m.targetId,p);l.push(v)}})))})),await Promise.all(u),i.Pu.J_(a),await(async function(m,p){const y=We(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(p,(b=>fe.forEach(b.Ts,(w=>y.persistence.referenceDelegate.addReference(v,b.targetId,w))).next((()=>fe.forEach(b.Is,(w=>y.persistence.referenceDelegate.removeReference(v,b.targetId,w)))))))))}catch(v){if(!fc(v))throw v;Ce(k_,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const w=y.vs.get(b),M=w.snapshotVersion,H=w.withLastLimboFreeSnapshotVersion(M);y.vs=y.vs.insert(b,H)}}})(i.localStore,l))}async function PP(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ce($_,"User change. New user:",e.toKey());const i=await Sw(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new Se(ce.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ch(t,i.Ns)}}function kP(n,e){const t=We(n),i=t.Au.get(e);if(i&&i.hu)return pt().add(i.key);{let a=pt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function zw(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NP.bind(null,e),e.Pu.J_=_P.bind(null,e.eventManager),e.Pu.yu=vP.bind(null,e.eventManager),e}function VP(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OP.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return U4(this.persistence,new V4,e.initialUser,this.serializer)}Cu(e){return new bw(M_.Vi,this.serializer)}Du(e){return new $4}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class LP extends kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ct(this.persistence.referenceDelegate instanceof Md,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new T4(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tr.withCacheSize(this.cacheSizeBytes):Tr.DEFAULT;return new bw((i=>Md.Vi(i,t)),this.serializer)}}class Ky{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PP.bind(null,this.syncEngine),await pP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new yP})()}createDatastore(e){const t=gm(e.databaseInfo.databaseId),i=W4(e.databaseInfo);return nP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,f){return new iP(i,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>wS(this.syncEngine,t,0)),(function(){return vS.v()?new vS:new K4})())}createSyncEngine(e,t){return(function(a,l,u,f,m,p,y){const v=new SP(a,l,u,f,m,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=We(a);Ce(No,"RemoteStore shutting down."),l.Ea.add(5),await lh(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ky.provider={build:()=>new Ky};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="FirestoreClient";class jP{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Wn.UNAUTHENTICATED,this.clientId=b_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{Ce(La,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(Ce(La,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=B_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function oy(n,e){n.asyncQueue.verifyOperationInProgress(),Ce(La,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await Sw(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function RS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await UP(n);Ce(La,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>TS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>TS(e.remoteStore,a))),n._onlineComponents=e}async function UP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ce(La,"Using user provided OfflineComponentProvider");try{await oy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===ce.FAILED_PRECONDITION||a.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Wl("Error using user provided cache. Falling back to memory cache: "+t),await oy(n,new kd)}}else Ce(La,"Using default OfflineComponentProvider"),await oy(n,new LP(void 0));return n._offlineComponents}async function Bw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ce(La,"Using user provided OnlineComponentProvider"),await RS(n,n._uninitializedComponentsProvider._online)):(Ce(La,"Using default OnlineComponentProvider"),await RS(n,new Ky))),n._onlineComponents}function zP(n){return Bw(n).then((e=>e.syncEngine))}async function Vd(n){const e=await Bw(n),t=e.eventManager;return t.onListen=AP.bind(null,e.syncEngine),t.onUnlisten=RP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IP.bind(null,e.syncEngine),t}function BP(n,e,t,i){const a=new Y_(i),l=new G_(e,a,t);return n.asyncQueue.enqueueAndForget((async()=>H_(await Vd(n),l))),()=>{a.Nu(),n.asyncQueue.enqueueAndForget((async()=>F_(await Vd(n),l)))}}function HP(n,e,t={}){const i=new As;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,p){const y=new Y_({next:b=>{y.Nu(),u.enqueueAndForget((()=>F_(l,v)));const w=b.docs.has(f);!w&&b.fromCache?p.reject(new Se(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&b.fromCache&&m&&m.source==="server"?p.reject(new Se(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new G_(cm(f.path),y,{includeMetadataChanges:!0,Ka:!0});return H_(l,v)})(await Vd(n),n.asyncQueue,e,t,i))),i.promise}function FP(n,e,t={}){const i=new As;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,p){const y=new Y_({next:b=>{y.Nu(),u.enqueueAndForget((()=>F_(l,v))),b.fromCache&&m.source==="server"?p.reject(new Se(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new G_(f,y,{includeMetadataChanges:!0,Ka:!0});return H_(l,v)})(await Vd(n),n.asyncQueue,e,t,i))),i.promise}function qP(n,e){const t=new As;return n.asyncQueue.enqueueAndForget((async()=>xP(await zP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="ComponentProvider",IS=new Map;function $P(n,e,t,i,a){return new hM(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Hw(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="firestore.googleapis.com",xS=!0;class NS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Fw,this.ssl=xS}else this.host=e.host,this.ssl=e.ssl??xS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<v4)throw new Se(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Se(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new qO;switch(i.type){case"firstParty":return new YO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Se(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=IS.get(t);i&&(Ce(GP,"Removing Datastore"),IS.delete(t),i.terminate())})(this),Promise.resolve()}}function KP(n,e,t,i={}){var p;n=Sr(n,vm);const a=lc(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(y1(`https://${f}`),_1("Firestore",!0)),l.host!==Fw&&l.host!==f&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!Ro(m,u)&&(n._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Wn.MOCK_USER;else{y=g2(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Se(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Wn(b)}n._authCredentials=new GO(new O1(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class an{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new an(this.firestore,e,this._key)}toJSON(){return{type:an._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ih(t,an._jsonSchema))return new an(e,i||null,new je(Ht.fromString(t.referencePath)))}}an._jsonSchemaVersion="firestore/documentReference/1.0",an._jsonSchema={type:Sn("string",an._jsonSchemaVersion),referencePath:Sn("string")};class Na extends jo{constructor(e,t,i){super(e,t,cm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new an(this.firestore,null,new je(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function xs(n,e,...t){if(n=Rn(n),M1("collection","path",e),n instanceof vm){const i=Ht.fromString(e,...t);return F0(i),new Na(n,null,i)}{if(!(n instanceof an||n instanceof Na))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ht.fromString(e,...t));return F0(i),new Na(n.firestore,null,i)}}function on(n,e,...t){if(n=Rn(n),arguments.length===1&&(e=b_.newId()),M1("doc","path",e),n instanceof vm){const i=Ht.fromString(e,...t);return H0(i),new an(n,null,new je(i))}{if(!(n instanceof an||n instanceof Na))throw new Se(ce.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ht.fromString(e,...t));return H0(i),new an(n.firestore,n instanceof Na?n.converter:null,new je(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class OS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ww(this,"async_queue_retry"),this._c=()=>{const i=ay();i&&Ce(DS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ay();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ay();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new As;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!fc(e))throw e;Ce(DS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",MS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=z_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&He(47125,{Pc:MS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function MS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ns extends vm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new OS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OS(e),this._firestoreClient=void 0,await e}}}function YP(n,e){const t=typeof n=="object"?n:b1(),i=typeof n=="string"?n:Rd,a=E_(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=m2("firestore");l&&KP(a,...l)}return a}function uh(n){if(n._terminated)throw new Se(ce.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||QP(n),n._firestoreClient}function QP(n){var i,a,l,u;const e=n._freezeSettings(),t=$P(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(a=n._app)==null?void 0:a.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(qn.fromBase64String(e))}catch(t){throw new Se(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ri(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ih(e,ri._jsonSchema))return ri.fromBase64String(e.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:Sn("string",ri._jsonSchemaVersion),bytes:Sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(ih(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:Sn("string",Fi._jsonSchemaVersion),latitude:Sn("number"),longitude:Sn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ih(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vi(e.vectorValues);throw new Se(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:Sn("string",vi._jsonSchemaVersion),vectorValues:Sn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=/^__.*__$/;class WP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new ah(e,this.data,t,this.fieldTransforms)}}class qw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Gw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He(40011,{dataSource:n})}}class Q_{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Q_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ld(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Gw(this.dataSource)&&XP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class JP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||gm(e)}createContext(e,t,i,a=!1){return new Q_({dataSource:e,methodName:t,targetDoc:i,path:Fn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tm(n){const e=n._freezeSettings(),t=gm(n._databaseId);return new JP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $w(n,e,t,i,a,l={}){const u=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);W_("Data must be an object, but it was:",u,i);const f=Qw(i,u);let m,p;if(l.merge)m=new Ur(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=rc(e,v,t);if(!u.contains(b))throw new Se(ce.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Jw(y,b)||y.push(b)}m=new Ur(y),p=u.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=u.fieldTransforms;return new WP(new br(f),m,p)}class hh extends Em{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}class X_ extends Em{_toFieldTransform(e){return new UM(e.path,new Fu)}isEqual(e){return e instanceof X_}}function Kw(n,e,t,i){const a=n.createContext(1,e,t);W_("Data must be an object, but it was:",a,i);const l=[],u=br.empty();Ua(i,((m,p)=>{const y=Ww(e,m,t);p=Rn(p);const v=a.childContextForFieldPath(y);if(p instanceof hh)l.push(y);else{const b=fh(p,v);b!=null&&(l.push(y),u.set(y,b))}}));const f=new Ur(l);return new qw(u,f,a.fieldTransforms)}function Yw(n,e,t,i,a,l){const u=n.createContext(1,e,t),f=[rc(e,i,t)],m=[a];if(l.length%2!=0)throw new Se(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(rc(e,l[b])),m.push(l[b+1]);const p=[],y=br.empty();for(let b=f.length-1;b>=0;--b)if(!Jw(p,f[b])){const w=f[b];let M=m[b];M=Rn(M);const H=u.childContextForFieldPath(w);if(M instanceof hh)p.push(w);else{const D=fh(M,H);D!=null&&(p.push(w),y.set(w,D))}}const v=new Ur(p);return new qw(y,v,u.fieldTransforms)}function ZP(n,e,t,i=!1){return fh(t,n.createContext(i?4:3,e))}function fh(n,e){if(Xw(n=Rn(n)))return W_("Unsupported field value:",e,n),Qw(n,e);if(n instanceof Em)return(function(i,a){if(!Gw(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const f of i){let m=fh(f,a.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=$t.fromDate(i);return{timestampValue:Od(a.serializer,l)}}if(i instanceof $t){const l=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(a.serializer,l)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ri)return{bytesValue:dw(a.serializer,i._byteString)};if(i instanceof an){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:D_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof vi)return(function(u,f){const m=u instanceof vi?u.toArray():u;return{mapValue:{fields:{[H1]:{stringValue:F1},[Id]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return I_(f.serializer,y)}))}}}}}})(i,a);if(Ew(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${sm(i)}`)})(n,e)}function Qw(n,e){const t={};return V1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,((i,a)=>{const l=fh(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function Xw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof Fi||n instanceof ri||n instanceof an||n instanceof Em||n instanceof vi||Ew(n))}function W_(n,e,t){if(!Xw(t)||!P1(t)){const i=sm(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function rc(n,e,t){if((e=Rn(e))instanceof Ui)return e._internalPath;if(typeof e=="string")return Ww(n,e);throw Ld("Field path arguments must be of type string or ",n,!1,void 0,t)}const ek=new RegExp("[~\\*/\\[\\]]");function Ww(n,e,t){if(e.search(ek)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ui(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ld(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new Se(ce.INVALID_ARGUMENT,f+n+m)}function Jw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{convertValue(e,t="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw He(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ua(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[Id].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>fn(u.doubleValue)));return new vi(t)}convertGeoPoint(e){return new Fi(fn(e.latitude),fn(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=lm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ht.fromString(e);Ct(vw(i),9688,{name:e});const a=new Bu(i.get(1),i.get(3)),l=new je(i.popFirst(5));return a.isEqual(t)||Rs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends tk{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new an(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(){return new hh("deleteField")}function ja(){return new X_("serverTimestamp")}const PS="@firebase/firestore",kS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new an(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(rc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nk extends Zw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z_{}class rk extends Z_{}function Ba(n,e,...t){let i=[];e instanceof Z_&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((m=>m instanceof ev)).length,f=l.filter((m=>m instanceof bm)).length;if(u>1||u>0&&f>0)throw new Se(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class bm extends rk{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bm(e,t,i)}_apply(e){const t=this._parse(e);return tC(e._query,t),new jo(e.firestore,e.converter,Ly(e._query,t))}_parse(e){const t=Tm(e.firestore);return(function(l,u,f,m,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new Se(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){jS(v,y);const M=[];for(const H of v)M.push(LS(m,l,H));b={arrayValue:{values:M}}}else b=LS(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||jS(v,y),b=ZP(f,u,v,y==="in"||y==="not-in");return bn.create(p,y,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sm(n,e,t){const i=e,a=rc("where",n);return bm._create(a,i,t)}class ev extends Z_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ev(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const m of f)tC(u,m),u=Ly(u,m)})(e._query,t),new jo(e.firestore,e.converter,Ly(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function LS(n,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new Se(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!W1(e)&&t.indexOf("/")!==-1)throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ht.fromString(t));if(!je.isDocumentKey(i))throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return W0(n,new je(i))}if(t instanceof an)return W0(n,t._key);throw new Se(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sm(t)}.`)}function jS(n,e){if(!Array.isArray(n)||n.length===0)throw new Se(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tC(n,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function nC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends Zw{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(rc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=So._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:Sn("string",So._jsonSchemaVersion),bundleSource:Sn("string","DocumentSnapshot"),bundleName:Sn("string"),bundle:Sn("string")};class od extends So{data(e={}){return super.data(e)}}class Ao{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Su(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new od(this._firestore,this._userDataWriter,i.key,i,new Su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const m=new od(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Su(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new od(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Su(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:ik(f.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=b_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ik(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:Sn("string",Ao._jsonSchemaVersion),bundleSource:Sn("string","QuerySnapshot"),bundleName:Sn("string"),bundle:Sn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tm(e)}set(e,t,i){this._verifyNotCommitted();const a=ly(e,this._firestore),l=nC(a.converter,t,i),u=$w(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(u.toMutation(a._key,Ar.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ly(e,this._firestore);let u;return u=typeof(t=Rn(t))=="string"||t instanceof Ui?Yw(this._dataReader,"WriteBatch.update",l._key,t,i,a):Kw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Ar.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ly(e,this._firestore);return this._mutations=this._mutations.concat(new mm(t._key,Ar.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ly(n,e){if((n=Rn(n)).firestore!==e)throw new Se(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n){n=Sr(n,an);const e=Sr(n.firestore,Ns),t=uh(e);return HP(t,n._key).then((i=>rC(e,n,i)))}function mc(n){n=Sr(n,jo);const e=Sr(n.firestore,Ns),t=uh(e),i=new J_(e);return eC(n._query),FP(t,n._query).then((a=>new Ao(e,i,n,a)))}function Uo(n,e,t){n=Sr(n,an);const i=Sr(n.firestore,Ns),a=nC(n.converter,e,t),l=Tm(i);return Am(i,[$w(l,"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Ar.none())])}function pc(n,e,t,...i){n=Sr(n,an);const a=Sr(n.firestore,Ns),l=Tm(a);let u;return u=typeof(e=Rn(e))=="string"||e instanceof Ui?Yw(l,"updateDoc",n._key,e,t,i):Kw(l,"updateDoc",n._key,e),Am(a,[u.toMutation(n._key,Ar.exists(!0))])}function US(n){return Am(Sr(n.firestore,Ns),[new mm(n._key,Ar.none())])}function vo(n,...e){var p,y,v;n=Rn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||VS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VS(e[i])){const b=e[i];e[i]=(p=b.next)==null?void 0:p.bind(b),e[i+1]=(y=b.error)==null?void 0:y.bind(b),e[i+2]=(v=b.complete)==null?void 0:v.bind(b)}let l,u,f;if(n instanceof an)u=Sr(n.firestore,Ns),f=cm(n._key.path),l={next:b=>{e[i]&&e[i](rC(u,n,b))},error:e[i+1],complete:e[i+2]};else{const b=Sr(n,jo);u=Sr(b.firestore,Ns),f=b._query;const w=new J_(u);l={next:M=>{e[i]&&e[i](new Ao(u,w,b,M))},error:e[i+1],complete:e[i+2]},eC(n._query)}const m=uh(u);return BP(m,f,a,l)}function Am(n,e){const t=uh(n);return qP(t,e)}function rC(n,e,t){const i=t.docs.get(e._key),a=new J_(n);return new So(n,a,e._key,i,new Su(t.hasPendingWrites,t.fromCache),e.converter)}function ak(n){return n=Sr(n,Ns),uh(n),new sk(n,(e=>Am(n,e)))}(function(e,t=!0){FO(cc),Xl(new Io("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Ns(new $O(i.getProvider("auth-internal")),new QO(u,i.getProvider("app-check-internal")),fM(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ia(PS,kS,e),Ia(PS,kS,"esm2020")})();var ok="firebase",lk="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ia(ok,lk,"app");function iC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ck=iC,sC=new nh("auth","Firebase",iC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new __("@firebase/auth");function uk(n,...e){jd.logLevel<=dt.WARN&&jd.warn(`Auth (${cc}): ${n}`,...e)}function ld(n,...e){jd.logLevel<=dt.ERROR&&jd.error(`Auth (${cc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(n,...e){throw nv(n,...e)}function Ei(n,...e){return nv(n,...e)}function tv(n,e,t){const i={...ck(),[e]:t};return new nh("auth","Firebase",i).create(e,{appName:n.name})}function wo(n){return tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hk(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ki(n,"argument-error"),tv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return sC.create(n,...e)}function qe(n,e,...t){if(!n)throw nv(e,...t)}function Ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ld(e),new Error(e)}function Ds(n,e){n||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function fk(){return zS()==="http:"||zS()==="https:"}function zS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fk()||b2()||"connection"in navigator)?navigator.onLine:!0}function mk(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ds(t>e,"Short delay should be less than long delay!"),this.isMobile=v2()||S2()}get(){return dk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){Ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yk=new mh(3e4,6e4);function iv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function gc(n,e,t,i,a={}){return oC(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=rh({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return T2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&lc(n.emulatorConfig.host)&&(p.credentials="include"),aC.fetch()(await lC(n,n.config.apiHost,t,f),p)})}async function oC(n,e,t){n._canInitEmulator=!1;const i={...pk,...e};try{const a=new vk(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw $f(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw $f(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw $f(n,"user-disabled",u);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw tv(n,y,p);Ki(n,y)}}catch(a){if(a instanceof ks)throw a;Ki(n,"network-request-failed",{message:String(a)})}}async function _k(n,e,t,i,a={}){const l=await gc(n,e,t,i,a);return"mfaPendingCredential"in l&&Ki(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function lC(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?rv(n.config,a):`${n.config.apiScheme}://${a}`;return gk.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class vk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),yk.get())})}}function $f(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ei(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ek(n,e){return gc(n,"POST","/v1/accounts:delete",e)}async function Ud(n,e){return gc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tk(n,e=!1){const t=Rn(n),i=await t.getIdToken(e),a=sv(i);qe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Du(cy(a.auth_time)),issuedAtTime:Du(cy(a.iat)),expirationTime:Du(cy(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function cy(n){return Number(n)*1e3}function sv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const a=d1(t);return a?JSON.parse(a):(ld("Failed to decode base64 JWT payload"),null)}catch(a){return ld("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function BS(n){const e=sv(n);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ks&&bk(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function bk({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Du(this.lastLoginAt),this.creationTime=Du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(n){var v;const e=n.auth,t=await n.getIdToken(),i=await $u(n,Ud(e,{idToken:t}));qe(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?cC(a.providerUserInfo):[],u=wk(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),p=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Xy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function Ak(n){const e=Rn(n);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wk(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function cC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(n,e){const t=await oC(n,{},async()=>{const i=rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await lC(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&lc(n.emulatorConfig.host)&&(m.credentials="include"),aC.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Rk(n,e){return gc(n,"POST","/v2/accounts:revokeToken",iv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const t=BS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await Ck(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new Fl;return i&&(qe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(qe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(qe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n,e){qe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _i{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new Sk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Xy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Tk(this,e)}reload(){return Ak(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await $u(this,Ek(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:M,stsTokenManager:H}=t;qe(v&&H,e,"internal-error");const D=Fl.fromJSON(this.name,H);qe(typeof v=="string",e,"internal-error"),pa(i,e.name),pa(a,e.name),qe(typeof b=="boolean",e,"internal-error"),qe(typeof w=="boolean",e,"internal-error"),pa(l,e.name),pa(u,e.name),pa(f,e.name),pa(m,e.name),pa(p,e.name),pa(y,e.name);const j=new _i({uid:v,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:D,createdAt:p,lastLoginAt:y});return M&&Array.isArray(M)&&(j.providerData=M.map(P=>({...P}))),m&&(j._redirectEventId=m),j}static async _fromIdTokenResponse(e,t,i=!1){const a=new Fl;a.updateFromServerResponse(t);const l=new _i({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await zd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];qe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?cC(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Fl;f.updateFromIdToken(i);const m=new _i({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Xy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Map;function bs(n){Ds(n instanceof Function,"Expected a class definition");let e=HS.get(n);return e?(Ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,HS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uC.type="NONE";const FS=uC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(n,e,t){return`firebase:${n}:${e}:${t}`}class ql{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=cd(this.userKey,a.apiKey,l),this.fullPersistenceKey=cd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ud(this.auth,{idToken:e}).catch(()=>{});return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ql(bs(FS),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||bs(FS);const u=cd(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(u);if(y){let v;if(typeof y=="string"){const b=await Ud(e,{idToken:y}).catch(()=>{});if(!b)break;v=await _i._fromGetAccountInfoResponse(e,b,y)}else v=_i._fromJSON(e,y);p!==l&&(f=v),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ql(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new ql(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gC(e))return"Blackberry";if(yC(e))return"Webos";if(fC(e))return"Safari";if((e.includes("chrome/")||dC(e))&&!e.includes("edge/"))return"Chrome";if(pC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hC(n=er()){return/firefox\//i.test(n)}function fC(n=er()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dC(n=er()){return/crios\//i.test(n)}function mC(n=er()){return/iemobile/i.test(n)}function pC(n=er()){return/android/i.test(n)}function gC(n=er()){return/blackberry/i.test(n)}function yC(n=er()){return/webos/i.test(n)}function av(n=er()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Ik(n=er()){var e;return av(n)&&!!((e=window.navigator)!=null&&e.standalone)}function xk(){return A2()&&document.documentMode===10}function _C(n=er()){return av(n)||pC(n)||yC(n)||gC(n)||/windows phone/i.test(n)||mC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n,e=[]){let t;switch(n){case"Browser":t=qS(er());break;case"Worker":t=`${qS(er())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(n,e={}){return gc(n,"GET","/v2/passwordPolicy",iv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=6;class Mk{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Ok,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GS(this),this.idTokenSubscription=new GS(this),this.beforeStateQueue=new Nk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bs(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ud(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(wo(this));const t=e?Rn(e):null;return t&&qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Dk(this),t=new Mk(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Rk(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bs(e)||this._popupRedirectResolver;qe(t,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&uk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wm(n){return Rn(n)}class GS{constructor(e){this.auth=e,this.observer=null,this.addObserver=O2(t=>this.observer=t)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kk(n){ov=n}function Vk(n){return ov.loadJS(n)}function Lk(){return ov.gapiScript}function jk(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(n,e){const t=E_(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ro(l,e??{}))return a;Ki(a,"already-initialized")}return t.initialize({options:e})}function zk(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(bs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function Bk(n,e,t){const i=wm(n);qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=EC(e),{host:u,port:f}=Hk(e),m=f===null?"":`:${f}`,p={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){qe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),qe(Ro(p,i.config.emulator)&&Ro(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,lc(u)?(y1(`${l}//${u}${m}`),_1("Auth",!0)):Fk()}function EC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Hk(n){const e=EC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:$S(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:$S(u)}}}function $S(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Fk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(n,e){return _k(n,"POST","/v1/accounts:signInWithIdp",iv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="http://localhost";class Do extends TC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new Do(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Gl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Gl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gl(e,t)}buildRequest(){const e={requestUri:qk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends ph{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ea.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends ph{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.GITHUB_SIGN_IN_METHOD="github.com";Ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends ph{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ba.credential(t,i)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await _i._fromIdTokenResponse(e,i,a),u=KS(i);return new ic({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=KS(i);return new ic({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function KS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends ks{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Bd(e,t,i,a)}}function bC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(n,l,e,i):l})}async function Gk(n,e,t=!1){const i=await $u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ic._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(n,e,t=!1){const{auth:i}=n;if(gi(i.app))return Promise.reject(wo(i));const a="reauthenticate";try{const l=await $u(n,bC(i,a,e,n),t);qe(l.idToken,i,"internal-error");const u=sv(l.idToken);qe(u,i,"internal-error");const{sub:f}=u;return qe(n.uid===f,i,"user-mismatch"),ic._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ki(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kk(n,e,t=!1){if(gi(n.app))return Promise.reject(wo(n));const i="signIn",a=await bC(n,i,e),l=await ic._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function Yk(n,e,t,i){return Rn(n).onIdTokenChanged(e,t,i)}function Qk(n,e,t){return Rn(n).beforeAuthStateChanged(e,t)}function Xk(n,e,t,i){return Rn(n).onAuthStateChanged(e,t,i)}const Hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1e3,Jk=10;class AC extends SC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_C(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);xk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,Jk):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AC.type="LOCAL";const Zk=AC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends SC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wC.type="SESSION";const CC=wC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Cm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async p=>p(t.origin,l)),m=await eV(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const p=cv("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function nV(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function rV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function sV(){return RC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebaseLocalStorageDb",aV=1,Fd="firebaseLocalStorage",xC="fbase_key";class gh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rm(n,e){return n.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function oV(){const n=indexedDB.deleteDatabase(IC);return new gh(n).toPromise()}function Wy(){const n=indexedDB.open(IC,aV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Fd,{keyPath:xC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Fd)?e(i):(i.close(),await oV(),e(await Wy()))})})}async function YS(n,e,t){const i=Rm(n,!0).put({[xC]:e,value:t});return new gh(i).toPromise()}async function lV(n,e){const t=Rm(n,!1).get(e),i=await new gh(t).toPromise();return i===void 0?null:i.value}function QS(n,e){const t=Rm(n,!0).delete(e);return new gh(t).toPromise()}const cV=800,uV=3;class NC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>uV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cm._getInstance(sV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await rV(),!this.activeServiceWorker)return;this.sender=new tV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||iV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wy();return await YS(e,Hd,"1"),await QS(e,Hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>YS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>lV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>QS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Rm(a,!1).getAll();return new gh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NC.type="LOCAL";const hV=NC;new mh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n,e){return e?bs(e):(qe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends TC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fV(n){return Kk(n.auth,new uv(n),n.bypassAuthState)}function dV(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),$k(t,new uv(n),n.bypassAuthState)}async function mV(n){const{auth:e,user:t}=n;return qe(t,e,"internal-error"),Gk(t,new uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fV;case"linkViaPopup":case"linkViaRedirect":return mV;case"reauthViaPopup":case"reauthViaRedirect":return dV;default:Ki(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=new mh(2e3,1e4);async function gV(n,e,t){if(gi(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const i=wm(n);hk(n,e,lv);const a=DC(i,t);return new bo(i,"signInViaPopup",e,a).executeNotNull()}class bo extends OC{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pV.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV="pendingRedirect",ud=new Map;class _V extends OC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const i=await vV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vV(n,e){const t=bV(e),i=TV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function EV(n,e){ud.set(n._key(),e)}function TV(n){return bs(n._redirectPersistence)}function bV(n){return cd(yV,n.config.apiKey,n.name)}async function SV(n,e,t=!1){if(gi(n.app))return Promise.reject(wo(n));const i=wm(n),a=DC(i,e),u=await new _V(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV=600*1e3;class wV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!MC(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AV&&this.cachedEventUids.clear(),this.cachedEventUids.has(XS(e))}saveEventToCache(e){this.cachedEventUids.add(XS(e)),this.lastProcessedEventTime=Date.now()}}function XS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(n,e={}){return gc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xV=/^https?/;async function NV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await RV(n);for(const t of e)try{if(DV(t))return}catch{}Ki(n,"unauthorized-domain")}function DV(n){const e=Qy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!xV.test(t))return!1;if(IV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=new mh(3e4,6e4);function WS(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function MV(n){return new Promise((e,t)=>{var a,l,u;function i(){WS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WS(),t(Ei(n,"network-request-failed"))},timeout:OV.get()})}if((l=(a=qi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=qi().gapi)!=null&&u.load)i();else{const f=jk("iframefcb");return qi()[f]=()=>{gapi.load?i():t(Ei(n,"network-request-failed"))},Vk(`${Lk()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw hd=null,e})}let hd=null;function PV(n){return hd=hd||MV(n),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=new mh(5e3,15e3),VV="__/auth/iframe",LV="emulator/auth/iframe",jV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zV(n){const e=n.config;qe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rv(e,LV):`https://${n.config.authDomain}/${VV}`,i={apiKey:e.apiKey,appName:n.name,v:cc},a=UV.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${rh(i).slice(1)}`}async function BV(n){const e=await PV(n),t=qi().gapi;return qe(t,n,"internal-error"),e.open({where:document.body,url:zV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jV,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Ei(n,"network-request-failed"),f=qi().setTimeout(()=>{l(u)},kV.get());function m(){qi().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FV=500,qV=600,GV="_blank",$V="http://localhost";class JS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KV(n,e,t,i=FV,a=qV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...HV,width:i.toString(),height:a.toString(),top:l,left:u},p=er().toLowerCase();t&&(f=dC(p)?GV:t),hC(p)&&(e=e||$V,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[w,M])=>`${b}${w}=${M},`,"");if(Ik(p)&&f!=="_self")return YV(e||"",f),new JS(null);const v=window.open(e||"",f,y);qe(v,n,"popup-blocked");try{v.focus()}catch{}return new JS(v)}function YV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="__/auth/handler",XV="emulator/auth/handler",WV=encodeURIComponent("fac");async function ZS(n,e,t,i,a,l){qe(n.config.authDomain,n,"auth-domain-config-required"),qe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:cc,eventId:a};if(e instanceof lv){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",D2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof ph){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),p=m?`#${WV}=${encodeURIComponent(m)}`:"";return`${JV(n)}?${rh(f).slice(1)}${p}`}function JV({config:n}){return n.emulator?rv(n,XV):`https://${n.authDomain}/${QV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="webStorageSupport";class ZV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CC,this._completeRedirectFn=SV,this._overrideRedirectResult=EV}async _openPopup(e,t,i,a){var u;Ds((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await ZS(e,t,i,Qy(),a);return KV(e,l,cv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await ZS(e,t,i,Qy(),a);return nV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ds(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await BV(e),i=new wV(e);return t.register("authEvent",a=>(qe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uy,{type:uy},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[uy];l!==void 0&&t(!!l),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _C()||fC()||av()}}const eL=ZV;var eA="@firebase/auth",tA="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rL(n){Xl(new Io("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;qe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vC(n)},p=new Pk(i,a,l,m);return zk(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xl(new Io("auth-internal",e=>{const t=wm(e.getProvider("auth").getImmediate());return(i=>new tL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ia(eA,tA,nL(n)),Ia(eA,tA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=300,sL=g1("authIdTokenMaxAge")||iL;let nA=null;const aL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>sL)return;const a=t==null?void 0:t.token;nA!==a&&(nA=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function oL(n=b1()){const e=E_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Uk(n,{popupRedirectResolver:eL,persistence:[hV,Zk,CC]}),i=g1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=aL(l.toString());Qk(t,u,()=>u(t.currentUser)),Yk(t,f=>u(f))}}const a=m1("auth");return a&&Bk(t,`http://${a}`),t}function lL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}kk({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ei("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",lL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rL("Browser");const cL={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function wl(n){const e=cL[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const uL={apiKey:wl("VITE_FIREBASE_API_KEY"),authDomain:wl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:wl("VITE_FIREBASE_PROJECT_ID"),storageBucket:wl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:wl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:wl("VITE_FIREBASE_APP_ID")},PC=T1(uL),Oo=oL(PC),hL=new vs,Et=YP(PC),kC=O.createContext(void 0),fL=({children:n})=>{const[e,t]=O.useState(()=>{const u=localStorage.getItem("app-theme");return u||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=O.useCallback(u=>{document.documentElement.setAttribute("data-theme",u),localStorage.setItem("app-theme",u)},[]);O.useEffect(()=>{i(e)},[e,i]);const a=O.useCallback(u=>{t(u),i(u);const f=Oo.currentUser;if(f){const m=on(Et,"users",f.uid);pc(m,{preferredTheme:u}).catch(p=>console.error("Error updating preferred theme in Firebase:",p))}},[i]),l=O.useCallback(()=>{t(u=>u==="light"?"dark":"light")},[t]);return O.useEffect(()=>Oo.onAuthStateChanged(async f=>{if(f){const m=on(Et,"users",f.uid),p=await dh(m);if(p.exists()&&p.data().preferredTheme){const y=p.data().preferredTheme;t(y),i(y)}}}),[i]),E.jsx(kC.Provider,{value:{theme:e,toggleTheme:l,setTheme:a},children:n})},dL="_spinner_5jyct_1",mL="_spinnerContainer_5jyct_19",rA={spinner:dL,spinnerContainer:mL},yc=({container:n=!0})=>{const e=E.jsx("div",{className:rA.spinner});return n?E.jsx("div",{className:rA.spinnerContainer,children:e}):e},pL="_loadingContainer_1n1m5_1",gL={loadingContainer:pL},sc=()=>E.jsx("div",{className:gL.loadingContainer,children:E.jsx(yc,{container:!1})}),yL=()=>{const n=Ve(i=>i.auth.firebaseUser),e=Ve(i=>i.auth.userData);return Ve(i=>i.auth.loading)?E.jsx(sc,{}):n?e?e.isApproved?E.jsx(wa,{to:"/app/dashboard",replace:!0}):E.jsx(wa,{to:"/guest",replace:!0}):E.jsx(sc,{}):E.jsx(wa,{to:"/login",replace:!0})};function Bn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var _L=typeof Symbol=="function"&&Symbol.observable||"@@observable",iA=_L,hy=()=>Math.random().toString(36).substring(7).split("").join("."),vL={INIT:`@@redux/INIT${hy()}`,REPLACE:`@@redux/REPLACE${hy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hy()}`},qd=vL;function hv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function VC(n,e,t){if(typeof n!="function")throw new Error(Bn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Bn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Bn(1));return t(VC)(n,e)}let i=n,a=e,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((D,j)=>{u.set(j,D)}))}function y(){if(m)throw new Error(Bn(3));return a}function v(D){if(typeof D!="function")throw new Error(Bn(4));if(m)throw new Error(Bn(5));let j=!0;p();const P=f++;return u.set(P,D),function(){if(j){if(m)throw new Error(Bn(6));j=!1,p(),u.delete(P),l=null}}}function b(D){if(!hv(D))throw new Error(Bn(7));if(typeof D.type>"u")throw new Error(Bn(8));if(typeof D.type!="string")throw new Error(Bn(17));if(m)throw new Error(Bn(9));try{m=!0,a=i(a,D)}finally{m=!1}return(l=u).forEach(P=>{P()}),D}function w(D){if(typeof D!="function")throw new Error(Bn(10));i=D,b({type:qd.REPLACE})}function M(){const D=v;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Bn(11));function P(){const F=j;F.next&&F.next(y())}return P(),{unsubscribe:D(P)}},[iA](){return this}}}return b({type:qd.INIT}),{dispatch:b,subscribe:v,getState:y,replaceReducer:w,[iA]:M}}function EL(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:qd.INIT})>"u")throw new Error(Bn(12));if(typeof t(void 0,{type:qd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Bn(13))})}function TL(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const u=e[l];typeof n[u]=="function"&&(t[u]=n[u])}const i=Object.keys(t);let a;try{EL(t)}catch(l){a=l}return function(u={},f){if(a)throw a;let m=!1;const p={};for(let y=0;y<i.length;y++){const v=i[y],b=t[v],w=u[v],M=b(w,f);if(typeof M>"u")throw f&&f.type,new Error(Bn(14));p[v]=M,m=m||M!==w}return m=m||i.length!==Object.keys(u).length,m?p:u}}function Gd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function bL(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(Bn(15))};const u={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},f=n.map(m=>m(u));return l=Gd(...f)(a.dispatch),{...a,dispatch:l}}}function SL(n){return hv(n)&&"type"in n&&typeof n.type=="string"}var LC=Symbol.for("immer-nothing"),sA=Symbol.for("immer-draftable"),cr=Symbol.for("immer-state");function yi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var zr=Object,ac=zr.getPrototypeOf,$d="constructor",Im="prototype",Jy="configurable",Kd="enumerable",fd="writable",Ku="value",Os=n=>!!n&&!!n[cr];function bi(n){var e;return n?jC(n)||Nm(n)||!!n[sA]||!!((e=n[$d])!=null&&e[sA])||Dm(n)||Om(n):!1}var AL=zr[Im][$d].toString(),aA=new WeakMap;function jC(n){if(!n||!fv(n))return!1;const e=ac(n);if(e===null||e===zr[Im])return!0;const t=zr.hasOwnProperty.call(e,$d)&&e[$d];if(t===Object)return!0;if(!kl(t))return!1;let i=aA.get(t);return i===void 0&&(i=Function.toString.call(t),aA.set(t,i)),i===AL}function xm(n,e,t=!0){yh(n)===0?(t?Reflect.ownKeys(n):zr.keys(n)).forEach(a=>{e(a,n[a],n)}):n.forEach((i,a)=>e(a,i,n))}function yh(n){const e=n[cr];return e?e.type_:Nm(n)?1:Dm(n)?2:Om(n)?3:0}var oA=(n,e,t=yh(n))=>t===2?n.has(e):zr[Im].hasOwnProperty.call(n,e),Zy=(n,e,t=yh(n))=>t===2?n.get(e):n[e],Yd=(n,e,t,i=yh(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function wL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Nm=Array.isArray,Dm=n=>n instanceof Map,Om=n=>n instanceof Set,fv=n=>typeof n=="object",kl=n=>typeof n=="function",fy=n=>typeof n=="boolean";function CL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ys=n=>n.copy_||n.base_,dv=n=>n.modified_?n.copy_:n.base_;function e_(n,e){if(Dm(n))return new Map(n);if(Om(n))return new Set(n);if(Nm(n))return Array[Im].slice.call(n);const t=jC(n);if(e===!0||e==="class_only"&&!t){const i=zr.getOwnPropertyDescriptors(n);delete i[cr];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const u=a[l],f=i[u];f[fd]===!1&&(f[fd]=!0,f[Jy]=!0),(f.get||f.set)&&(i[u]={[Jy]:!0,[fd]:!0,[Kd]:f[Kd],[Ku]:n[u]})}return zr.create(ac(n),i)}else{const i=ac(n);if(i!==null&&t)return{...n};const a=zr.create(i);return zr.assign(a,n)}}function mv(n,e=!1){return Mm(n)||Os(n)||!bi(n)||(yh(n)>1&&zr.defineProperties(n,{set:Kf,add:Kf,clear:Kf,delete:Kf}),zr.freeze(n),e&&xm(n,(t,i)=>{mv(i,!0)},!1)),n}function RL(){yi(2)}var Kf={[Ku]:RL};function Mm(n){return n===null||!fv(n)?!0:zr.isFrozen(n)}var Qd="MapSet",t_="Patches",lA="ArrayMethods",UC={};function Mo(n){const e=UC[n];return e||yi(0,n),e}var cA=n=>!!UC[n],Yu,zC=()=>Yu,IL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cA(Qd)?Mo(Qd):void 0,arrayMethodsPlugin_:cA(lA)?Mo(lA):void 0});function uA(n,e){e&&(n.patchPlugin_=Mo(t_),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function n_(n){r_(n),n.drafts_.forEach(xL),n.drafts_=null}function r_(n){n===Yu&&(Yu=n.parent_)}var hA=n=>Yu=IL(Yu,n);function xL(n){const e=n[cr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function fA(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[cr].modified_&&(n_(e),yi(4)),bi(n)&&(n=dA(e,n));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(t[cr].base_,n,e)}else n=dA(e,t);return NL(e,n,!0),n_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==LC?n:void 0}function dA(n,e){if(Mm(e))return e;const t=e[cr];if(!t)return Xd(e,n.handledSet_,n);if(!Pm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);FC(t,n)}return t.copy_}function NL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&mv(e,t)}function BC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Pm=(n,e)=>n.scope_===e,DL=[];function HC(n,e,t,i){const a=ys(n),l=n.type_;if(i!==void 0&&Zy(a,i,l)===e){Yd(a,i,t,l);return}if(!n.draftLocations_){const f=n.draftLocations_=new Map;xm(a,(m,p)=>{if(Os(p)){const y=f.get(p)||[];y.push(m),f.set(p,y)}})}const u=n.draftLocations_.get(e)??DL;for(const f of u)Yd(a,f,t,l)}function OL(n,e,t){n.callbacks_.push(function(a){var f;const l=e;if(!l||!Pm(l,a))return;(f=a.mapSetPlugin_)==null||f.fixSetContents(l);const u=dv(l);HC(n,l.draft_??l,u,t),FC(l,a)})}function FC(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const l=a.getPath(n);l&&a.generatePatches_(n,l,e)}BC(n)}}function ML(n,e,t){const{scope_:i}=n;if(Os(t)){const a=t[cr];Pm(a,i)&&a.callbacks_.push(function(){dd(n);const u=dv(a);HC(n,t,u,e)})}else bi(t)&&n.callbacks_.push(function(){const l=ys(n);n.type_===3?l.has(t)&&Xd(t,i.handledSet_,i):Zy(l,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Xd(Zy(n.copy_,e,n.type_),i.handledSet_,i)})}function Xd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Os(n)||e.has(n)||!bi(n)||Mm(n)||(e.add(n),xm(n,(i,a)=>{if(Os(a)){const l=a[cr];if(Pm(l,t)){const u=dv(l);Yd(n,i,u,n.type_),BC(l)}}else bi(a)&&Xd(a,e,t)})),n}function PL(n,e){const t=Nm(n),i={type_:t?1:0,scope_:e?e.scope_:zC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,l=Wd;t&&(a=[i],l=Qu);const{revoke:u,proxy:f}=Proxy.revocable(a,l);return i.draft_=f,i.revoke_=u,[f,i]}var Wd={get(n,e){if(e===cr)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const a=ys(n);if(!oA(a,e,n.type_))return kL(n,a,e);const l=a[e];if(n.finalized_||!bi(l)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&CL(e))return l;if(l===dy(n.base_,e)){dd(n);const u=n.type_===1?+e:e,f=s_(n.scope_,l,n,u);return n.copy_[u]=f}return l},has(n,e){return e in ys(n)},ownKeys(n){return Reflect.ownKeys(ys(n))},set(n,e,t){const i=qC(ys(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=dy(ys(n),e),l=a==null?void 0:a[cr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(wL(t,a)&&(t!==void 0||oA(n.base_,e,n.type_)))return!0;dd(n),i_(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),ML(n,e,t)),!0},deleteProperty(n,e){return dd(n),dy(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),i_(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ys(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[fd]:!0,[Jy]:n.type_!==1||e!=="length",[Kd]:i[Kd],[Ku]:t[e]}},defineProperty(){yi(11)},getPrototypeOf(n){return ac(n.base_)},setPrototypeOf(){yi(12)}},Qu={};for(let n in Wd){let e=Wd[n];Qu[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Qu.deleteProperty=function(n,e){return Qu.set.call(this,n,e,void 0)};Qu.set=function(n,e,t){return Wd.set.call(this,n[0],e,t,n[0])};function dy(n,e){const t=n[cr];return(t?ys(t):n)[e]}function kL(n,e,t){var a;const i=qC(e,t);return i?Ku in i?i[Ku]:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function qC(n,e){if(!(e in n))return;let t=ac(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=ac(t)}}function i_(n){n.modified_||(n.modified_=!0,n.parent_&&i_(n.parent_))}function dd(n){n.copy_||(n.assigned_=new Map,n.copy_=e_(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var VL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(kl(e)&&!kl(t)){const l=t;t=e;const u=this;return function(m=l,...p){return u.produce(m,y=>t.call(this,y,...p))}}kl(t)||yi(6),i!==void 0&&!kl(i)&&yi(7);let a;if(bi(e)){const l=hA(this),u=s_(l,e,void 0);let f=!0;try{a=t(u),f=!1}finally{f?n_(l):r_(l)}return uA(l,i),fA(a,l)}else if(!e||!fv(e)){if(a=t(e),a===void 0&&(a=e),a===LC&&(a=void 0),this.autoFreeze_&&mv(a,!0),i){const l=[],u=[];Mo(t_).generateReplacementPatches_(e,a,{patches_:l,inversePatches_:u}),i(l,u)}return a}else yi(1,e)},this.produceWithPatches=(e,t)=>{if(kl(e))return(u,...f)=>this.produceWithPatches(u,m=>e(m,...f));let i,a;return[this.produce(e,t,(u,f)=>{i=u,a=f}),i,a]},fy(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),fy(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),fy(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){bi(n)||yi(8),Os(n)&&(n=LL(n));const e=hA(this),t=s_(e,n,void 0);return t[cr].isManual_=!0,r_(e),t}finishDraft(n,e){const t=n&&n[cr];(!t||!t.isManual_)&&yi(9);const{scope_:i}=t;return uA(i,e),fA(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=Mo(t_).applyPatches_;return Os(n)?i(n,e):this.produce(n,a=>i(a,e))}};function s_(n,e,t,i){const[a,l]=Dm(e)?Mo(Qd).proxyMap_(e,t):Om(e)?Mo(Qd).proxySet_(e,t):PL(e,t);return((t==null?void 0:t.scope_)??zC()).drafts_.push(a),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=i,t&&i!==void 0?OL(t,l,i):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:p}=m;l.modified_&&p&&p.generatePatches_(l,[],m)}),a}function LL(n){return Os(n)||yi(10,n),GC(n)}function GC(n){if(!bi(n)||Mm(n))return n;const e=n[cr];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=e_(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=e_(n,!0);return xm(t,(a,l)=>{Yd(t,a,GC(l))},i),e&&(e.finalized_=!1),t}var jL=new VL,$C=jL.produce;function KC(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var UL=KC(),zL=KC,BL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Gd:Gd.apply(null,arguments)},HL=n=>n&&typeof n.match=="function";function Ou(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(ws(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>SL(i)&&i.type===n,t}var YC=class Au extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Au.prototype)}static get[Symbol.species](){return Au}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Au(...e[0].concat(this)):new Au(...e.concat(this))}};function mA(n){return bi(n)?$C(n,()=>{}):n}function Yf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function FL(n){return typeof n=="boolean"}var qL=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let u=new YC;return t&&(FL(t)?u.push(UL):u.push(zL(t.extraArgument))),u},GL="RTK_autoBatch",pA=n=>e=>{setTimeout(e,n)},$L=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,u=!1;const f=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pA(10):n.type==="callback"?n.queueNotification:pA(n.timeout),p=()=>{u=!1,l&&(l=!1,f.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>a&&y(),b=i.subscribe(v);return f.add(y),()=>{b(),f.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[GL]),l=!a,l&&(u||(u=!0,m(p))),i.dispatch(y)}finally{a=!0}}})},KL=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new YC(n);return i&&a.push($L(typeof i=="object"?i:void 0)),a};function YL(n){const e=qL(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=n||{};let f;if(typeof t=="function")f=t;else if(hv(t))f=TL(t);else throw new Error(ws(1));let m;typeof i=="function"?m=i(e):m=e();let p=Gd;a&&(p=BL({trace:!1,...typeof a=="object"&&a}));const y=bL(...m),v=KL(y);let b=typeof u=="function"?u(v):v();const w=p(...b);return VC(f,l,w)}function QC(n){const e={},t=[];let i;const a={addCase(l,u){const f=typeof l=="string"?l:l.type;if(!f)throw new Error(ws(28));if(f in e)throw new Error(ws(29));return e[f]=u,a},addAsyncThunk(l,u){return u.pending&&(e[l.pending.type]=u.pending),u.rejected&&(e[l.rejected.type]=u.rejected),u.fulfilled&&(e[l.fulfilled.type]=u.fulfilled),u.settled&&t.push({matcher:l.settled,reducer:u.settled}),a},addMatcher(l,u){return t.push({matcher:l,reducer:u}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function QL(n){return typeof n=="function"}function XL(n,e){let[t,i,a]=QC(e),l;if(QL(n))l=()=>mA(n());else{const f=mA(n);l=()=>f}function u(f=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[a]),p.reduce((y,v)=>{if(v)if(Os(y)){const w=v(y,m);return w===void 0?y:w}else{if(bi(y))return $C(y,b=>v(b,m));{const b=v(y,m);if(b===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return y},f)}return u.getInitialState=l,u}var WL=(n,e)=>HL(n)?n.match(e):n(e);function JL(...n){return e=>n.some(t=>WL(t,e))}var ZL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ej=(n=21)=>{let e="",t=n;for(;t--;)e+=ZL[Math.random()*64|0];return e},tj=["name","message","stack","code"],my=class{constructor(n,e){kg(this,"_type");this.payload=n,this.meta=e}},gA=class{constructor(n,e){kg(this,"_type");this.payload=n,this.meta=e}},nj=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of tj)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},yA="External signal was aborted",ur=(()=>{function n(e,t,i){const a=Ou(e+"/fulfilled",(m,p,y,v)=>({payload:m,meta:{...v||{},arg:y,requestId:p,requestStatus:"fulfilled"}})),l=Ou(e+"/pending",(m,p,y)=>({payload:void 0,meta:{...y||{},arg:p,requestId:m,requestStatus:"pending"}})),u=Ou(e+"/rejected",(m,p,y,v,b)=>({payload:v,error:(i&&i.serializeError||nj)(m||"Rejected"),meta:{...b||{},arg:y,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function f(m,{signal:p}={}){return(y,v,b)=>{const w=i!=null&&i.idGenerator?i.idGenerator(m):ej(),M=new AbortController;let H,D;function j(U){D=U,M.abort()}p&&(p.aborted?j(yA):p.addEventListener("abort",()=>j(yA),{once:!0}));const P=(async function(){var X,Y;let U;try{let A=(X=i==null?void 0:i.condition)==null?void 0:X.call(i,m,{getState:v,extra:b});if(ij(A)&&(A=await A),A===!1||M.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const C=new Promise((I,V)=>{H=()=>{V({name:"AbortError",message:D||"Aborted"})},M.signal.addEventListener("abort",H,{once:!0})});y(l(w,m,(Y=i==null?void 0:i.getPendingMeta)==null?void 0:Y.call(i,{requestId:w,arg:m},{getState:v,extra:b}))),U=await Promise.race([C,Promise.resolve(t(m,{dispatch:y,getState:v,extra:b,requestId:w,signal:M.signal,abort:j,rejectWithValue:(I,V)=>new my(I,V),fulfillWithValue:(I,V)=>new gA(I,V)})).then(I=>{if(I instanceof my)throw I;return I instanceof gA?a(I.payload,w,m,I.meta):a(I,w,m)})])}catch(A){U=A instanceof my?u(null,w,m,A.payload,A.meta):u(A,w,m)}finally{H&&M.signal.removeEventListener("abort",H)}return i&&!i.dispatchConditionRejection&&u.match(U)&&U.meta.condition||y(U),U})();return Object.assign(P,{abort:j,requestId:w,arg:m,unwrap(){return P.then(rj)}})}}return Object.assign(f,{pending:l,rejected:u,fulfilled:a,settled:JL(u,a),typePrefix:e})}return n.withTypes=()=>n,n})();function rj(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function ij(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var sj=Symbol.for("rtk-slice-createasyncthunk");function aj(n,e){return`${n}/${e}`}function oj({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[sj];return function(a){const{name:l,reducerPath:u=l}=a;if(!l)throw new Error(ws(11));const f=(typeof a.reducers=="function"?a.reducers(cj()):a.reducers)||{},m=Object.keys(f),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(F,X){const Y=typeof F=="string"?F:F.type;if(!Y)throw new Error(ws(12));if(Y in p.sliceCaseReducersByType)throw new Error(ws(13));return p.sliceCaseReducersByType[Y]=X,y},addMatcher(F,X){return p.sliceMatchers.push({matcher:F,reducer:X}),y},exposeAction(F,X){return p.actionCreators[F]=X,y},exposeCaseReducer(F,X){return p.sliceCaseReducersByName[F]=X,y}};m.forEach(F=>{const X=f[F],Y={reducerName:F,type:aj(l,F),createNotation:typeof a.reducers=="function"};hj(X)?dj(Y,X,y,e):uj(Y,X,y)});function v(){const[F={},X=[],Y=void 0]=typeof a.extraReducers=="function"?QC(a.extraReducers):[a.extraReducers],A={...F,...p.sliceCaseReducersByType};return XL(a.initialState,C=>{for(let I in A)C.addCase(I,A[I]);for(let I of p.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of X)C.addMatcher(I.matcher,I.reducer);Y&&C.addDefaultCase(Y)})}const b=F=>F,w=new Map,M=new WeakMap;let H;function D(F,X){return H||(H=v()),H(F,X)}function j(){return H||(H=v()),H.getInitialState()}function P(F,X=!1){function Y(C){let I=C[F];return typeof I>"u"&&X&&(I=Yf(M,Y,j)),I}function A(C=b){const I=Yf(w,X,()=>new WeakMap);return Yf(I,C,()=>{const V={};for(const[k,L]of Object.entries(a.selectors??{}))V[k]=lj(L,C,()=>Yf(M,C,j),X);return V})}return{reducerPath:F,getSelectors:A,get selectors(){return A(Y)},selectSlice:Y}}const U={name:l,reducer:D,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:j,...P(u),injectInto(F,{reducerPath:X,...Y}={}){const A=X??u;return F.inject({reducerPath:A,reducer:D},Y),{...U,...P(A,!0)}}};return U}}function lj(n,e,t,i){function a(l,...u){let f=e(l);return typeof f>"u"&&i&&(f=t()),n(f,...u)}return a.unwrapped=n,a}var Ha=oj();function cj(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function uj({type:n,reducerName:e,createNotation:t},i,a){let l,u;if("reducer"in i){if(t&&!fj(i))throw new Error(ws(17));l=i.reducer,u=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,u?Ou(n,u):Ou(n))}function hj(n){return n._reducerDefinitionType==="asyncThunk"}function fj(n){return n._reducerDefinitionType==="reducerWithPrepare"}function dj({type:n,reducerName:e},t,i,a){if(!a)throw new Error(ws(18));const{payloadCreator:l,fulfilled:u,pending:f,rejected:m,settled:p,options:y}=t,v=a(n,l,y);i.exposeAction(e,v),u&&i.addCase(v.fulfilled,u),f&&i.addCase(v.pending,f),m&&i.addCase(v.rejected,m),p&&i.addMatcher(v.settled,p),i.exposeCaseReducer(e,{fulfilled:u||Qf,pending:f||Qf,rejected:m||Qf,settled:p||Qf})}function Qf(){}function ws(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const mj={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},$l=ur("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=on(Et,"metadata","positions"),i=await dh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),pv=ur("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=on(Et,"metadata","positions");return await Uo(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),XC=Ha({name:"positions",initialState:mj,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:i}=e.payload,a=n.positions.find(l=>l.name===t);a&&(a.customLabels=i,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1},setPositions:(n,e)=>{n.positions=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase($l.pending,e=>{e.loading=!0,e.error=null}).addCase($l.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase($l.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(pv.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:Xf,resetPositionsDirty:pj,setPositions:gj}=XC.actions,yj=XC.reducer,_j={teams:[],loading:!1,error:null,fetched:!1},Mu=ur("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=on(Et,"metadata","teams"),i=await dh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list.map(u=>({...u,maxConflict:u.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),md=ur("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=on(Et,"metadata","teams");return await Uo(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),WC=Ha({name:"teams",initialState:_j,reducers:{clearError:n=>{n.error=null},setTeams:(n,e)=>{n.teams=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(Mu.pending,e=>{e.loading=!0,e.error=null}).addCase(Mu.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(Mu.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(md.pending,e=>{e.error=null}).addCase(md.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(md.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:Kz,setTeams:vj}=WC.actions,Ej=WC.reducer,Tj=()=>{const n=Mn(),{firebaseUser:e,userData:t,loading:i}=Ve(m=>m.auth),{fetched:a,loading:l}=Ve(m=>m.teams),{fetched:u,loading:f}=Ve(m=>m.positions);return O.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!a&&!l&&n(Mu()),!u&&!f&&n($l()))},[n,e,t,a,l,u,f]),i||t!=null&&t.isApproved&&(!a||!u)?E.jsx(sc,{}):e?t?t.isApproved?E.jsx(i1,{}):E.jsx(wa,{to:"/guest",replace:!0}):E.jsx(sc,{}):E.jsx(wa,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=n=>{const e=Sj(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Aj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:u,...f},m)=>O.createElement("svg",{ref:m,...Aj,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:JC("lucide",a),...!l&&!wj(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>O.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=(n,e)=>{const t=O.forwardRef(({className:i,...a},l)=>O.createElement(Cj,{ref:l,iconNode:e,className:JC(`lucide-${bj(_A(n))}`,`lucide-${n}`,i),...a}));return t.displayName=_A(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ij=dn("arrow-left",Rj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Nj=dn("arrow-right",xj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Oj=dn("calendar",Dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZC=dn("chevron-up",Mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kj=dn("circle-check",Pj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Lj=dn("copy",Vj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],eR=dn("corner-down-right",jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],zj=dn("layout-dashboard",Uj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Hj=dn("layout-grid",Bj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],qj=dn("moon",Fj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],$j=dn("music",Gj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Yj=dn("panel-left-close",Kj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Xj=dn("panel-left-open",Qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_h=dn("plus",Wj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zj=dn("settings",Jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],t3=dn("sun",e3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tR=dn("trash-2",n3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],i3=dn("trophy",r3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],a3=dn("user",s3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],nR=dn("users",o3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gv=dn("x",l3),c3=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},u3={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:c3(),lastVisitedPaths:{},rosterAllViewMode:"user",alertConfig:null,peekPositionName:null,focusedCell:null},rR=Ha({name:"ui",initialState:u3,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:i}=e.payload;n.lastVisitedPaths[t]=i},toggleTeamExpansion:(n,e)=>{const t=e.payload,i=n.expandedTeams.indexOf(t);i>=0?n.expandedTeams.splice(i,1):n.expandedTeams.push(t)},expandTeam:(n,e)=>{const t=e.payload;n.expandedTeams.includes(t)||n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:i,userEmail:a}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][i]||(n.hiddenUsers[t][i]=[]);const l=n.hiddenUsers[t][i],u=l.indexOf(a);u>=0?l.splice(u,1):l.push(a),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))},showAlert:(n,e)=>{n.alertConfig=e.payload},hideAlert:n=>{n.alertConfig=null},setPeekPositionName:(n,e)=>{n.peekPositionName=e.payload},setFocusedCell:(n,e)=>{n.focusedCell=e.payload}}}),{setMobileSidebarOpen:Vl,setDesktopSidebarExpanded:h3,setRosterAllViewMode:vA,setLastVisitedPath:f3,toggleTeamExpansion:d3,expandTeam:m3,toggleUserVisibility:p3,showAlert:Co,hideAlert:EA,setPeekPositionName:g3,setFocusedCell:Cl}=rR.actions,y3=rR.reducer,_3=()=>{const n=O.useContext(kC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},v3="_themeToggleButton_1ugtj_1",E3={themeToggleButton:v3},km=({showText:n,className:e,iconClassName:t})=>{const{theme:i,toggleTheme:a}=_3();return E.jsxs("button",{className:`${E3.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[E.jsx("span",{className:t||"",children:i==="dark"?E.jsx(t3,{size:20}):E.jsx(qj,{size:20})}),n&&E.jsx("span",{children:"Toggle theme"})]})},T3={onlineUsers:[],error:null},iR=Ha({name:"presence",initialState:T3,reducers:{setOnlineUsers:(n,e)=>{n.onlineUsers=e.payload,n.error=null},setPresenceError:(n,e)=>{n.error=e.payload}}}),{setOnlineUsers:b3,setPresenceError:S3}=iR.actions,A3=iR.reducer,w3=()=>{try{const n="gig_roster_session_id";let e=sessionStorage.getItem(n);return e||(e=Math.random().toString(36).substring(2,10),sessionStorage.setItem(n,e)),e}catch{return Math.random().toString(36).substring(2,10)}},C3=()=>{try{const n="gig_roster_session_color";let e=sessionStorage.getItem(n);if(!e){const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F78FB3","#BB8FCE","#82E0AA","#F1948A","#85C1E9","#76D7C4","#F8C471","#C39BD3","#7FB3D5","#7DCEA0","#F0B27A","#5DADE2","#D7BDE2","#A9CCE3","#A3E4D7"],i=Math.floor(Math.random()*t.length);e=t[i],sessionStorage.setItem(n,e)}return e}catch{return"#FF6B6B"}},Jd=w3(),R3=C3(),I3=6e4,x3=9e4,N3=(n,e)=>{const t=O.useRef(!1),{teamName:i,positionName:a}=Ps(),{focusedCell:l}=Ve(v=>v.ui),{rosterDates:u,users:f,allTeamUsers:m}=Ve(v=>v.rosterView),{positions:p}=Ve(v=>v.positions),y=O.useMemo(()=>{var w,M,H;if(!i)return null;let v="",b="";if(l){if(b=u[l.row]||"",l.table==="absence")v=((w=m[l.col])==null?void 0:w.email)||"";else if(l.table==="roster"){const D=p.find(j=>j.name===a);D!=null&&D.isCustom?v=((M=D.customLabels)==null?void 0:M[l.col])||"":v=((H=f.filter(P=>P.isActive)[l.col])==null?void 0:H.email)||""}}return{date:b,identifier:v,teamName:i,viewName:a}},[l,u,f,m,i,p,a]);O.useEffect(()=>{if(!(n!=null&&n.uid)||!(e!=null&&e.email))return;const v=`${n.uid}_${Jd}`,b=on(Et,"presence",v);t.current||(t.current=!0,(async()=>{try{const P=new Date(Date.now()-6e5),U=Ba(xs(Et,"presence"),Sm("userUid","==",n.uid));(await mc(U)).forEach(X=>{var A,C;const Y=((C=(A=X.data().lastSeen)==null?void 0:A.toDate)==null?void 0:C.call(A))||new Date(0);X.id!==v&&Y<P&&US(X.ref).catch(()=>{})})}catch{}})());const w=async(j=y)=>{if(!(!Oo.currentUser||document.visibilityState!=="visible"))try{await Uo(b,{uid:v,userUid:n.uid,name:e.name||n.displayName||"Anonymous",email:e.email,color:R3,lastSeen:ja(),focus:j},{merge:!0})}catch(P){const U=P;U.code!=="unavailable"&&console.warn("[Presence] Heartbeat failed:",U.message)}},M=()=>{US(b).catch(()=>{})};w();const H=setInterval(()=>w(y),I3),D=()=>{document.visibilityState==="visible"?w():M()};return document.addEventListener("visibilitychange",D),window.addEventListener("beforeunload",M),()=>{clearInterval(H),document.removeEventListener("visibilitychange",D),window.removeEventListener("beforeunload",M),M()}},[n==null?void 0:n.uid,n==null?void 0:n.displayName,e==null?void 0:e.email,e==null?void 0:e.name,y]),O.useEffect(()=>{const v=`${n==null?void 0:n.uid}_${Jd}`;if(!(n!=null&&n.uid)||document.visibilityState!=="visible")return;const b=setTimeout(()=>{pc(on(Et,"presence",v),{focus:y,lastSeen:ja()}).catch(()=>{})},200);return()=>clearTimeout(b)},[y,n==null?void 0:n.uid])},D3=()=>{const n=Mn(),{firebaseUser:e}=Ve(a=>a.auth),t=e==null?void 0:e.uid,i=O.useRef([]);O.useEffect(()=>{if(!t)return;let a=null;const l=Ba(xs(Et,"presence")),u=p=>{const y=Date.now(),v=y-x3,b=[];p.forEach(w=>{var H,D,j;if(!w||!w.name)return;const M=((D=(H=w.lastSeen)==null?void 0:H.toMillis)==null?void 0:D.call(H))||((j=w.lastSeen)==null?void 0:j.seconds)*1e3||y;M>v&&b.push({uid:w.uid,userUid:String(w.userUid||""),name:String(w.name),email:String(w.email||""),color:String(w.color||"#5c4eb1"),lastSeen:M,focus:w.focus||null})}),n(b3(b.sort((w,M)=>w.name.localeCompare(M.name))))},f=setTimeout(()=>{a=vo(l,{next:p=>{const y=p.docs.map(v=>v.data());i.current=y,u(y)},error:p=>{console.error("[Presence] Listener failed:",p.message),n(S3(p.message))}})},1e3),m=setInterval(()=>{u(i.current)},3e4);return()=>{clearTimeout(f),a&&a(),clearInterval(m)}},[n,t])},O3=()=>Ve(n=>n.presence.onlineUsers),M3="_meTag_sc6t2_10",P3="_isMe_sc6t2_51",TA={meTag:M3,isMe:P3},Vm=({displayName:n,isMe:e})=>E.jsxs(O.Fragment,{children:[E.jsx("span",{className:e?TA.isMe:"",children:n}),e&&E.jsx("span",{className:TA.meTag,children:"Me"})]}),k3="_onlineUsersContainer_1vvxe_1",V3="_sidebarVariant_1vvxe_17",L3="_sidebarExpanded_1vvxe_22",j3="_onlineLabel_1vvxe_26",U3="_avatarStack_1vvxe_38",z3="_avatarCircle_1vvxe_44",B3="_moreCircle_1vvxe_66",H3="_userDropdown_1vvxe_72",F3="_dropdownDown_1vvxe_83",q3="_dropdownUp_1vvxe_88",G3="_dropdownTitle_1vvxe_93",$3="_userListScroll_1vvxe_103",K3="_userItem_1vvxe_108",Y3="_userNameText_1vvxe_122",Q3="_userAvatarSmall_1vvxe_129",X3="_pulse_1vvxe_142",zn={onlineUsersContainer:k3,sidebarVariant:V3,sidebarExpanded:L3,onlineLabel:j3,avatarStack:U3,avatarCircle:z3,moreCircle:B3,userDropdown:H3,dropdownDown:F3,dropdownUp:q3,dropdownTitle:G3,userListScroll:$3,userItem:K3,userNameText:Y3,userAvatarSmall:Q3,pulse:X3},sR=({variant:n="top-bar",showText:e=!1})=>{const t=O3(),{firebaseUser:i}=Ve(w=>w.auth),a=i?`${i.uid}_${Jd}`:null,[l,u]=O.useState(!1),f=O.useRef(null);if(O.useEffect(()=>{const w=M=>{f.current&&!f.current.contains(M.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),!t||t.length===0)return null;const m=t.slice(0,3),p=t.length-3,y=w=>{if(!w||typeof w!="string")return"?";const M=w.trim().split(" ");return M.length===0?"?":M.map(H=>H[0]).join("").substring(0,2).toUpperCase()},v=[zn.onlineUsersContainer,n==="sidebar"?zn.sidebarVariant:"",e?zn.sidebarExpanded:""].filter(Boolean).join(" "),b=[zn.userDropdown,n==="sidebar"?zn.dropdownUp:zn.dropdownDown].filter(Boolean).join(" ");return E.jsxs("div",{className:v,ref:f,onClick:()=>u(!l),children:[e&&E.jsx("span",{className:zn.onlineLabel,children:"Online"}),E.jsxs("div",{className:zn.avatarStack,children:[p>0&&E.jsxs("div",{className:`${zn.avatarCircle} ${zn.moreCircle}`,children:["+",p]}),[...m].reverse().map(w=>E.jsx("div",{className:zn.avatarCircle,title:w.name||"Unknown User",style:{backgroundColor:w.color,borderColor:"white"},children:y(w.name)},w.uid))]}),l&&E.jsxs("div",{className:b,children:[E.jsxs("div",{className:zn.dropdownTitle,children:["Online Now (",t.length,")"]}),E.jsx("div",{className:zn.userListScroll,children:t.map(w=>E.jsxs("div",{className:zn.userItem,children:[E.jsx("div",{className:zn.userAvatarSmall,style:{backgroundColor:w.color},children:y(w.name)}),E.jsx("span",{className:zn.userNameText,children:E.jsx(Vm,{displayName:w.name||"Unknown User",isMe:w.uid===a})}),E.jsx("div",{className:zn.pulse})]},w.uid))})]})]})},W3="_mobileHeader_lcvro_1",J3="_mobileHeaderPill_lcvro_18",Z3="_mobileHeaderPillDisabled_lcvro_30",e6="_mobileHeaderPillActive_lcvro_34",t6="_mobileHeaderText_lcvro_45",n6="_mobileHeaderChevron_lcvro_53",r6="_rotate_lcvro_58",i6="_mobileHeaderActions_lcvro_62",s6="_mobileThemeToggle_lcvro_68",ms={mobileHeader:W3,mobileHeaderPill:J3,mobileHeaderPillDisabled:Z3,mobileHeaderPillActive:e6,mobileHeaderText:t6,mobileHeaderChevron:n6,rotate:r6,mobileHeaderActions:i6,mobileThemeToggle:s6},a6=({title:n,hasSideNav:e=!0})=>{const t=Mn(),{isMobileSidebarOpen:i}=Ve(l=>l.ui),a=()=>{e&&t(Vl(!i))};return E.jsxs("header",{className:ms.mobileHeader,children:[E.jsxs("div",{className:`${ms.mobileHeaderPill} ${i?ms.mobileHeaderPillActive:""} ${e?"":ms.mobileHeaderPillDisabled}`,onClick:a,children:[E.jsx("span",{className:ms.mobileHeaderText,children:n}),e&&E.jsx(ZC,{className:`${ms.mobileHeaderChevron} ${i?ms.rotate:""}`})]}),E.jsxs("div",{className:ms.mobileHeaderActions,children:[E.jsx(km,{className:ms.mobileThemeToggle}),E.jsx(sR,{})]})]})};var Wt=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(Wt||{}),jl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(jl||{});const yv=[{id:"dashboard",label:"Dashboard",icon:zj},{id:"roster",label:"Roster",icon:Oj},{id:"settings",label:"Settings",icon:Zj}],bA=[{id:"Profile",label:"My Profile",icon:a3},{id:"Users",label:"User Management",icon:nR,adminOnly:!0},{id:"Teams",label:"Team Management",icon:i3,adminOnly:!0},{id:"Positions",label:"Position Setup",icon:$j,adminOnly:!0}],aR=n=>{const e=[];return Object.entries(n).forEach(([t,i])=>{i.forEach(a=>{e.push(`${t}|${a}`)})}),e},oR=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Ss=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),o6={firebaseUser:null,userData:null,loading:!0,error:null},pd=ur("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=on(Et,"users",n),i=await dh(t);if(!i.exists()){const a="chris.sm.kang542@gmail.com",l=Oo.currentUser,u=(l==null?void 0:l.email)===a,f={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:u,isAdmin:u,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await Uo(t,f),f}return i.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),gd=ur("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const i=on(Et,"users",n),a={...e};return a.teamPositions&&(a.indexedAssignments=aR(a.teamPositions)),await pc(i,a),a}catch(i){return t(i instanceof Error?i.message:"Failed to update profile")}}),lR=Ha({name:"auth",initialState:o6,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(pd.pending,e=>{e.loading=!0,e.error=null}).addCase(pd.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(pd.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(gd.pending,e=>{e.error=null}).addCase(gd.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(gd.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:l6,setUserData:cR,setLoading:Yz,logout:c6}=lR.actions,u6=lR.reducer,h6={entries:{},loading:!0,initialLoad:!1,syncing:{},error:null},py=ur("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Ba(xs(Et,"roster")),i=await mc(t),a={};return i.docs.forEach(l=>{const u=l.data(),f=u.updatedAt,m={...u,updatedAt:f&&typeof f=="object"&&"toMillis"in f?f.toMillis():f};a[l.id]={...m,id:l.id}}),a}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),yd=ur("roster/syncAssignmentRemote",async(n,{rejectWithValue:e})=>{const{date:t,teamName:i,userIdentifier:a,updatedAssignments:l}=n;try{const u=on(Et,"roster",t),m=l.length===0?Yy():l;return await pc(u,new Ui("teams",i,a),m,new Ui("updatedAt"),ja()),{date:t}}catch(u){const f=u;if(f.code==="not-found"){const m={id:t,date:t,teams:{[i]:{[a]:l}},absence:{},updatedAt:Date.now()};return await Uo(on(Et,"roster",t),{...m,updatedAt:ja()}),{date:t}}return e(f.message||"Sync failed")}}),Kl=ur("roster/syncAbsenceRemote",async(n,{rejectWithValue:e})=>{const{date:t,userIdentifier:i,isAbsent:a,reason:l,clearedTeams:u}=n;try{const f=on(Et,"roster",t),m=[];return m.push(new Ui("updatedAt"),ja()),a?(m.push(new Ui("absence",i),{reason:l||""}),u.forEach(p=>{m.push(new Ui("teams",p,i),Yy())})):m.push(new Ui("absence",i),Yy()),await pc(f,...m),{date:t}}catch(f){const m=f;if(m.code==="not-found"&&a){const p={id:t,date:t,teams:{},absence:{[i]:{reason:l||""}},updatedAt:Date.now()};return await Uo(on(Et,"roster",t),{...p,updatedAt:ja()}),{date:t}}return e(m.message||"Sync failed")}}),Pu=ur("roster/syncEventNameRemote",async(n,{rejectWithValue:e})=>{const{date:t,eventName:i}=n;try{const a=on(Et,"roster",t);return await pc(a,{eventName:i,updatedAt:ja()}),{date:t}}catch(a){const l=a;if(l.code==="not-found"){const u=on(Et,"roster",t),f={id:t,date:t,teams:{},absence:{},eventName:i,updatedAt:Date.now()};return await Uo(u,{...f,updatedAt:ja()}),{date:t}}return e(l.message||"Sync failed")}}),uR=Ha({name:"roster",initialState:h6,reducers:{clearError:n=>{n.error=null},setRosterEntries(n,e){n.entries=e.payload,n.loading=!1,n.initialLoad=!0},setLoading(n,e){n.loading=e.payload},applyOptimisticAssignment(n,e){const{date:t,teamName:i,userIdentifier:a,updatedAssignments:l}=e.payload;n.entries[t]||(n.entries[t]={id:t,date:t,teams:{},absence:{}});const u=n.entries[t];u.teams[i]||(u.teams[i]={}),l.length===0?delete u.teams[i][a]:u.teams[i][a]=l},applyOptimisticAbsence(n,e){const{date:t,userIdentifier:i,isAbsent:a,reason:l}=e.payload;n.entries[t]||(n.entries[t]={id:t,date:t,teams:{},absence:{}});const u=n.entries[t];a?(u.absence[i]={reason:l||""},Object.keys(u.teams).forEach(f=>{delete u.teams[f][i]})):delete u.absence[i]},applyOptimisticEventName(n,e){const{date:t,eventName:i}=e.payload;n.entries[t]||(n.entries[t]={id:t,date:t,teams:{},absence:{}}),n.entries[t].eventName=i}},extraReducers:n=>{n.addCase(py.pending,e=>{e.loading=!0,e.error=null}).addCase(py.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(py.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(yd.pending,(e,t)=>{e.syncing[t.meta.arg.date]=!0}).addCase(yd.fulfilled,(e,t)=>{e.syncing[t.payload.date]=!1}).addCase(yd.rejected,(e,t)=>{e.error=t.payload,e.syncing[t.meta.arg.date]=!1}).addCase(Kl.pending,(e,t)=>{e.syncing[t.meta.arg.date]=!0}).addCase(Kl.fulfilled,(e,t)=>{e.syncing[t.payload.date]=!1}).addCase(Kl.rejected,(e,t)=>{e.error=t.payload,e.syncing[t.meta.arg.date]=!1}).addCase(Pu.pending,(e,t)=>{e.syncing[t.meta.arg.date]=!0}).addCase(Pu.fulfilled,(e,t)=>{e.syncing[t.payload.date]=!1}).addCase(Pu.rejected,(e,t)=>{e.error=t.payload,e.syncing[t.meta.arg.date]=!1})}}),{clearError:Qz,setRosterEntries:f6,setLoading:SA,applyOptimisticAssignment:d6,applyOptimisticAbsence:gy,applyOptimisticEventName:hR}=uR.actions,m6=uR.reducer,p6={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},yy=ur("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=xs(Et,"users"),i=Ba(t),a=await mc(i),l=[];return a.forEach(u=>{l.push({...u.data(),id:u.id})}),l.sort((u,f)=>(u.name||"").localeCompare(f.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),_d=ur("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=ak(Et);n.forEach(i=>{const{id:a,...l}=i;l.teamPositions&&(l.indexedAssignments=aR(l.teamPositions)),t.update(on(Et,"users",a),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),fR=Ha({name:"userManagement",initialState:p6,reducers:{updateUserField(n,e){const{id:t,field:i,value:a}=e.payload,l=n.allUsers.find(u=>u.id===t);l&&(l[i]=a)},toggleUserTeam(n,e){const{userId:t,teamName:i}=e.payload,a=n.allUsers.find(l=>l.id===t);if(a){const l=a.teams||[],u=l.includes(i)?l.filter(f=>f!==i):[...l,i];a.teams=u,a.teamPositions||(a.teamPositions={}),u.includes(i)?a.teamPositions[i]||(a.teamPositions[i]=[]):delete a.teamPositions[i]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:i,posName:a}=e.payload,l=n.allUsers.find(u=>u.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[i]||(l.teamPositions[i]=[]);const u=l.teamPositions[i],f=u.includes(a)?u.filter(m=>m!==a):[...u,a];l.teamPositions[i]=f}},moveUserTeam(n,e){const{userId:t,teamName:i,direction:a}=e.payload,l=n.allUsers.find(u=>u.id===t);if(l&&l.teams){const u=l.teams.indexOf(i);if(u===-1)return;const f=a==="up"?u-1:u+1;if(f<0||f>=l.teams.length)return;const m=[...l.teams];[m[u],m[f]]=[m[f],m[u]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))},setAllUsers(n,e){n.allUsers=e.payload,n.originalUsers=JSON.parse(JSON.stringify(e.payload)),n.loading=!1}},extraReducers:n=>{n.addCase(yy.pending,e=>{e.loading=!0,e.error=null}).addCase(yy.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(yy.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(_d.pending,e=>{e.saving=!0,e.error=null}).addCase(_d.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(_d.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:g6,toggleUserTeam:y6,toggleUserTeamPosition:_6,moveUserTeam:v6,resetUserChanges:E6,setAllUsers:T6}=fR.actions,b6=fR.reducer,S6=()=>{const n=Mn(),{firebaseUser:e,userData:t}=Ve(i=>i.auth);N3(e,t),D3(),O.useEffect(()=>{n(SA(!0));const i=Ba(xs(Et,"roster")),a=vo(i,{next:m=>{const p={};m.docs.forEach(y=>{const v=y.data(),b=v.updatedAt,w={...v,updatedAt:b&&typeof b=="object"&&"toMillis"in b?b.toMillis():b};p[y.id]={...w,id:y.id}}),n(f6(p))},error:m=>{console.error("Roster sync error:",m),n(SA(!1))}}),l=vo(on(Et,"metadata","teams"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list.map(v=>({...v,maxConflict:v.maxConflict||1})):[];n(vj(y))}},m=>console.error("Teams sync error:",m)),u=vo(on(Et,"metadata","positions"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list:[];n(gj(y))}},m=>console.error("Positions sync error:",m)),f=vo(xs(Et,"users"),m=>{const p=[];m.forEach(v=>{p.push({...v.data(),id:v.id})});const y=p.sort((v,b)=>(v.name||"").localeCompare(b.name||""));n(T6(y))},m=>console.error("Users sync error:",m));return()=>{a(),l(),u(),f()}},[n]),O.useEffect(()=>{if(!(e!=null&&e.uid))return;const i=vo(on(Et,"users",e.uid),a=>{a.exists()&&n(cR(a.data()))},a=>console.error("Profile sync error:",a));return()=>i()},[n,e==null?void 0:e.uid])},A6="_modalOverlay_ah937_1",w6="_modalContent_ah937_16",C6="_modalHeader_ah937_34",R6="_closeButton_ah937_48",I6="_modalBody_ah937_64",x6="_modalFooter_ah937_70",Rl={modalOverlay:A6,modalContent:w6,modalHeader:C6,closeButton:R6,modalBody:I6,modalFooter:x6},_v=({isOpen:n,onClose:e,title:t,children:i,footer:a})=>{if(O.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=E.jsx("div",{className:Rl.modalOverlay,onClick:e,children:E.jsxs("div",{className:Rl.modalContent,onClick:u=>u.stopPropagation(),children:[E.jsxs("div",{className:Rl.modalHeader,children:[E.jsx("h2",{children:t}),E.jsx("button",{className:Rl.closeButton,onClick:e,"aria-label":"Close",children:E.jsx(gv,{size:24})})]}),E.jsx("div",{className:Rl.modalBody,children:i}),a&&E.jsx("div",{className:Rl.modalFooter,children:a})]})});return u1.createPortal(l,document.body)},N6="_confirmModalBody_17sxu_1",D6="_confirmModalMessage_17sxu_8",O6="_footer_17sxu_12",M6="_cancelButton_17sxu_19",P6="_confirmButton_17sxu_34",gu={confirmModalBody:N6,confirmModalMessage:D6,footer:O6,cancelButton:M6,confirmButton:P6},k6=()=>{const n=Mn(),{alertConfig:e}=Ve(l=>l.ui);if(!e)return null;const t=()=>{n(EA())},i=()=>{e.onConfirm&&e.onConfirm(),n(EA())},a=E.jsxs("div",{className:gu.footer,children:[e.showCancel!==!1&&E.jsx("button",{className:gu.cancelButton,onClick:t,children:e.cancelText||"Cancel"}),E.jsx("button",{className:gu.confirmButton,onClick:i,children:e.confirmText||"OK"})]});return E.jsx(_v,{isOpen:!!e,onClose:t,title:e.title,footer:a,children:E.jsx("div",{className:gu.confirmModalBody,children:E.jsx("div",{className:gu.confirmModalMessage,children:e.message})})})},V6="_bottomNavContainer_1c0tq_1",L6="_bottomNav_1c0tq_1",j6="_bottomNavBtn_1c0tq_18",U6="_bottomNavBtnActive_1c0tq_42",Wf={bottomNavContainer:V6,bottomNav:L6,bottomNavBtn:j6,bottomNavBtnActive:U6},z6=()=>{const n=ko(),e=oi(),{lastVisitedPaths:t}=Ve(l=>l.ui),i=e.pathname.includes("/settings")?Wt.SETTINGS:e.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,a=l=>{if(i===l){l===Wt.DASHBOARD&&n("/app/dashboard");return}const u=t[l];n(u||`/app/${l}`)};return E.jsx("nav",{className:Wf.bottomNavContainer,children:E.jsx("div",{className:Wf.bottomNav,children:yv.map(l=>{const u=l.icon;return E.jsxs("button",{className:`${Wf.bottomNavBtn} ${i===l.id?Wf.bottomNavBtnActive:""}`,onClick:()=>a(l.id),children:[E.jsx(u,{size:20}),E.jsx("span",{children:l.label})]},l.id)})})})},B6="_sideNav_1pls4_1",H6="_menuOpen_1pls4_24",F6="_sidebarContent_1pls4_29",q6="_tabletSidebarHeader_1pls4_37",G6="_sidebarToggleButton_1pls4_57",$6="_sideMenuList_1pls4_75",K6="_sideNavItem_1pls4_83",Y6="_navItemLabel_1pls4_103",Q6="_sideNavItemActive_1pls4_114",X6="_sideNavItemSub_1pls4_121",W6="_sideEmoji_1pls4_126",J6="_sidenavMenuSubheading_1pls4_135",Z6="_sidenavMenuSubheadingClickable_1pls4_152",eU="_teamHeadingContent_1pls4_156",tU="_locationIndicators_1pls4_166",nU="_locationDot_1pls4_174",rU="_expandIcon_1pls4_198",iU="_sideNavSubItems_1pls4_204",sU="_adminOnlySectionWrapper_1pls4_211",aU="_sidebarFooter_1pls4_217",oU="_sidebarThemeToggle_1pls4_227",lU="_sidebarThemeIcon_1pls4_235",cU="_sidebarCollapsed_1pls4_262",Xe={sideNav:B6,menuOpen:H6,sidebarContent:F6,tabletSidebarHeader:q6,sidebarToggleButton:G6,sideMenuList:$6,sideNavItem:K6,navItemLabel:Y6,sideNavItemActive:Q6,sideNavItemSub:X6,sideEmoji:W6,sidenavMenuSubheading:J6,sidenavMenuSubheadingClickable:Z6,teamHeadingContent:eU,locationIndicators:tU,locationDot:nU,expandIcon:rU,sideNavSubItems:iU,adminOnlySectionWrapper:sU,sidebarFooter:aU,sidebarThemeToggle:oU,sidebarThemeIcon:lU,sidebarCollapsed:cU},uU=()=>{var k;const n=ko(),e=oi(),{teamName:t,positionName:i,section:a}=Ps(),l=Mn(),{userData:u}=Ve(L=>L.auth),{isDesktopSidebarExpanded:f,isMobileSidebarOpen:m,expandedTeams:p}=Ve(L=>L.ui),{teams:y,fetched:v,loading:b}=Ve(L=>L.teams),{fetched:w}=Ve(L=>L.positions),{onlineUsers:M}=Ve(L=>L.presence),[H,D]=O.useState(window.innerWidth);O.useEffect(()=>{const L=()=>D(window.innerWidth);return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]);const P=H<=767||f,U=e.pathname.includes("/settings")?Wt.SETTINGS:e.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,F=i||a,X=O.useRef(void 0);O.useEffect(()=>{t&&U===Wt.ROSTER&&t!==X.current&&l(m3(t)),X.current=t},[t,U,l]),O.useEffect(()=>{v||l(Mu()),w||l($l())},[l,v,w]);const Y=O.useCallback(L=>{n(L)},[n]),A=L=>{l(d3(L))},C=()=>{const L=yv.find(me=>me.id===U),x=L?L.label:"GIG ROSTER";return t&&F?`${t}  ${F}`:t||(F?`${x}  ${F}`:x)},I=(L,x)=>{const me=M.filter(ge=>{var G,oe;return((G=ge.focus)==null?void 0:G.teamName)===L&&(x?((oe=ge.focus)==null?void 0:oe.viewName)===x:!0)});return me.length===0?null:E.jsx("div",{className:Xe.locationIndicators,children:me.map(ge=>{var G;return E.jsx("span",{className:Xe.locationDot,style:{backgroundColor:ge.color},title:`${ge.name} is in ${((G=ge.focus)==null?void 0:G.viewName)||L}`},ge.uid)})})},V=[Xe.sideNav,m?Xe.menuOpen:"",f?"":Xe.sidebarCollapsed].filter(Boolean).join(" ");return E.jsxs("aside",{className:V,children:[E.jsxs("div",{className:Xe.sidebarContent,children:[E.jsxs("div",{className:Xe.tabletSidebarHeader,children:[P&&E.jsx("h3",{children:C()}),E.jsx("button",{className:Xe.sidebarToggleButton,onClick:()=>l(h3(!f)),"aria-label":f?"Collapse sidebar":"Expand sidebar",children:f?E.jsx(Yj,{size:20}):E.jsx(Xj,{size:20})})]}),E.jsxs("nav",{className:Xe.sideMenuList,children:[U===Wt.ROSTER&&b&&E.jsx("div",{className:`${Xe.sideNavItem} ${Xe.loading}`,children:"Loading teams..."}),U===Wt.ROSTER?(k=u==null?void 0:u.teams)==null?void 0:k.map(L=>{var G,oe;const x=y.find(de=>de.name===L);if(!x)return null;const me=u.teams.length===1,ge=me||p.includes(x.name);return E.jsxs("div",{children:[!me&&E.jsxs("div",{className:`${Xe.sidenavMenuSubheading} ${Xe.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{A(x.name),Y(`/app/roster/${x.name}/All`)},children:[E.jsxs("div",{className:Xe.teamHeadingContent,children:[x.emoji," ",P&&x.name]}),E.jsx("span",{className:Xe.expandIcon,children:ge?"":""})]}),ge&&E.jsxs("div",{className:Xe.sideNavSubItems,children:[E.jsxs("button",{className:`${Xe.sideNavItem} ${Xe.sideNavItemSub} ${F==="All"&&t===x.name?Xe.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${x.name}/All`),l(Vl(!1))},children:[E.jsx("span",{className:Xe.sideEmoji,children:""}),E.jsx("span",{className:Xe.navItemLabel,children:P&&"All"}),I(x.name,"All")]}),(oe=(G=x.positions)==null?void 0:G.filter(de=>!de.parentId))==null?void 0:oe.map(de=>{const Pe=F===de.name&&t===x.name;return E.jsxs("button",{className:`${Xe.sideNavItem} ${Xe.sideNavItemSub} ${Pe?Xe.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${x.name}/${de.name}`),l(Vl(!1))},style:{"--active-color":de.colour,"--active-bg":`${de.colour}15`},children:[E.jsx("span",{className:Xe.sideEmoji,children:de.emoji}),E.jsx("span",{className:Xe.navItemLabel,children:P&&de.name}),I(x.name,de.name)]},de.name)}),x.allowAbsence!==!1&&E.jsxs("button",{className:`${Xe.sideNavItem} ${Xe.sideNavItemSub} ${F==="Absence"&&t===x.name?Xe.sideNavItemActive:""}`,onClick:()=>{Y(`/app/roster/${x.name}/Absence`),l(Vl(!1))},style:{"--active-color":"var(--color-error)","--active-bg":"var(--background-toggle-off-transparent)"},children:[E.jsx("span",{className:Xe.sideEmoji,children:""}),E.jsx("span",{className:Xe.navItemLabel,children:P&&"Absence"}),I(x.name,"Absence")]})]})]},x.name)}):bA.filter(L=>!L.adminOnly).map(L=>{const x=L.icon;return E.jsxs("button",{className:`${Xe.sideNavItem} ${F===L.id?Xe.sideNavItemActive:""}`,onClick:()=>{Y(`/app/settings/${L.id}`),l(Vl(!1))},children:[E.jsx("span",{className:Xe.sideEmoji,children:E.jsx(x,{size:18})}),E.jsx("span",{className:Xe.navItemLabel,children:P&&L.label})]},L.id)})]}),(u==null?void 0:u.isAdmin)&&U===Wt.SETTINGS&&E.jsxs("div",{className:Xe.adminOnlySectionWrapper,children:[E.jsx("div",{className:Xe.sidenavMenuSubheading,children:P&&E.jsx("h4",{children:"Admin Only"})}),bA.filter(L=>L.adminOnly).map(L=>{const x=L.icon;return E.jsxs("button",{className:`${Xe.sideNavItem} ${F===L.id?Xe.sideNavItemActive:""}`,onClick:()=>{Y(`/app/settings/${L.id}`),l(Vl(!1))},children:[E.jsx("span",{className:Xe.sideEmoji,children:E.jsx(x,{size:18})}),E.jsx("span",{className:Xe.navItemLabel,children:P&&L.label})]},L.id)})]})]}),E.jsxs("div",{className:Xe.sidebarFooter,children:[E.jsx(km,{className:Xe.sidebarThemeToggle,iconClassName:Xe.sidebarThemeIcon}),E.jsx(sR,{variant:"sidebar",showText:P})]})]})},hU="_layoutWrapper_13ibt_1",fU="_menuOpen_13ibt_13",dU="_innerWrapper_13ibt_17",mU="_sidebarExpanded_13ibt_26",pU="_sidebarCollapsed_13ibt_30",gU="_mainContent_13ibt_34",Il={layoutWrapper:hU,menuOpen:fU,innerWrapper:dU,sidebarExpanded:mU,sidebarCollapsed:pU,mainContent:gU},yU=()=>{const n=Mn(),e=ko(),t=oi(),i=Ps(),{userData:a}=Ve(D=>D.auth);S6();const{teams:l}=Ve(D=>D.teams),{isMobileSidebarOpen:u,isDesktopSidebarExpanded:f,lastVisitedPaths:m}=Ve(D=>D.ui),p=t.pathname.includes("/settings")?Wt.SETTINGS:t.pathname.includes("/dashboard")?Wt.DASHBOARD:Wt.ROSTER,{teamName:y,positionName:v,section:b}=i,w=v||b||null,M=p!==Wt.DASHBOARD;O.useEffect(()=>{const D=p===Wt.ROSTER&&!y,j=p===Wt.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!D&&!j&&p!==Wt.DASHBOARD){const P=t.pathname+t.search;n(f3({tabId:p,path:P}))}},[t.pathname,t.search,p,y,w,n]),O.useEffect(()=>{var U;const D=t.pathname==="/app"||t.pathname==="/app/",j=p===Wt.ROSTER&&!y,P=p===Wt.SETTINGS&&!w;if(D)e(m[Wt.DASHBOARD]||"/app/dashboard",{replace:!0});else if(j){const F=m[Wt.ROSTER];if(F)e(F,{replace:!0});else if((U=a==null?void 0:a.teams)!=null&&U[0]&&l.length>0){const X=l.find(Y=>Y.name===a.teams[0]);X&&e(`/app/roster/${X.name}/All`,{replace:!0})}}else if(P){const F=m[Wt.SETTINGS];e(F||`/app/settings/${jl.PROFILE}`,{replace:!0})}},[p,y,w,a,l,e,t.pathname,t.search,m]);const H=()=>{const D=yv.find(P=>P.id===p),j=D?D.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${j}  ${w}`:j)};return E.jsxs("div",{className:`${Il.layoutWrapper} ${u?Il.menuOpen:""} ${f?Il.sidebarExpanded:Il.sidebarCollapsed}`,children:[M&&E.jsx(uU,{}),E.jsxs("div",{className:Il.innerWrapper,children:[E.jsx(a6,{title:H(),hasSideNav:M}),E.jsx("main",{className:Il.mainContent,children:E.jsx(i1,{})}),E.jsx(z6,{})]}),E.jsx(k6,{})]})},vd=(n,e,t)=>{const i=[],a=new Date;a.setHours(0,0,0,0);const l=a.getFullYear(),u=e||l,f=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},p=n.map(w=>m[w]);let y;u===l?y=new Date(a):y=new Date(u,0,1),y.setHours(0,0,0,0);const v=new Date(f,11,31);v.setHours(23,59,59,999);const b=new Date(y);for(;b.getTime()<=v.getTime();)p.includes(b.getDay())&&i.push(new Date(b)),b.setDate(b.getDate()+1);return i.sort((w,M)=>w.getTime()-M.getTime()),i.map(w=>oR(w))},_U=(n,e,t=5)=>{const i=[],a=new Date(e);a.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},u=n.map(m=>l[m]),f=new Date(a);for(;i.length<t;){f.setDate(f.getDate()-1),u.includes(f.getDay())&&i.push(new Date(f));const m=new Date(a);if(m.setFullYear(m.getFullYear()-1),f<m)break}return i.map(m=>oR(m)).sort()},vU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Ed=ur("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=xs(Et,"users"),i=Ba(t,Sm("teams","array-contains",n)),a=await mc(i),l=[];return a.forEach(u=>{l.push(u.data())}),l.sort((u,f)=>(u.name||"").localeCompare(f.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Td=ur("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:i})=>{if(!n||!e)return[];try{const u=i().positions.positions.filter(w=>w.parentId===e),m=[e,...u.map(w=>w.name)].map(w=>`${n}|${w}`),p=xs(Et,"users"),y=Ba(p,Sm("indexedAssignments","array-contains-any",m)),v=await mc(y),b=[];return v.forEach(w=>{b.push(w.data())}),b.sort((w,M)=>(w.name||"").localeCompare(M.name||""))}catch(a){return console.error("Error fetching users:",a),t("Failed to load users.")}}),bd=ur("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=on(Et,"metadata","teams"),i=await dh(t);if(i.exists()){const a=i.data();return(Array.isArray(a.list)?a.list.map(f=>({...f,preferredDays:f.preferredDays||[],positions:f.positions||[]})):[]).find(f=>f.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),dR=Ha({name:"rosterView",initialState:vU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=_U(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=vd(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,i=vd(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...i]}}},extraReducers:n=>{n.addCase(Td.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Td.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Td.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Ed.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Ed.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Ed.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(bd.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(bd.fulfilled,(e,t)=>{var i;e.currentTeamData=t.payload,(i=t.payload)!=null&&i.preferredDays&&(e.rosterDates=vd(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(bd.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:mR,resetToUpcomingDates:pR,loadNextYearDates:EU}=dR.actions,TU=dR.reducer,bU="_dashboardContainer_1vvbr_1",SU="_dashboardHeader_1vvbr_13",AU="_dashboardHeaderActions_1vvbr_28",wU="_clearPastBtn_1vvbr_35",CU="_eventNameContainer_1vvbr_51",RU="_dashboardEventNameInput_1vvbr_59",IU="_dashboardEventNameInputHasEvent_1vvbr_81",xU="_carouselOuterWrapper_1vvbr_92",NU="_eventsCarouselTrack_1vvbr_101",DU="_eventCardWrapper_1vvbr_115",OU="_peek_1vvbr_126",MU="_active_1vvbr_132",PU="_eventCardDate_1vvbr_138",kU="_dashboardTodayBadge_1vvbr_151",VU="_teamCardsContainer_1vvbr_162",LU="_teamEventCard_1vvbr_170",jU="_teamEventHeader_1vvbr_178",UU="_teamCardEmoji_1vvbr_197",zU="_teamCardName_1vvbr_201",BU="_copyRosterBtn_1vvbr_205",HU="_copyRosterBtnSuccess_1vvbr_226",FU="_teamEventDetails_1vvbr_232",qU="_posAssignmentRow_1vvbr_238",GU="_posEmojiLabel_1vvbr_244",$U="_assignedNames_1vvbr_250",KU="_unassigned_1vvbr_256",YU="_meTag_1vvbr_264",QU="_carouselPagination_1vvbr_286",XU="_dashboardEmpty_1vvbr_296",wt={dashboardContainer:bU,dashboardHeader:SU,dashboardHeaderActions:AU,clearPastBtn:wU,eventNameContainer:CU,dashboardEventNameInput:RU,dashboardEventNameInputHasEvent:IU,carouselOuterWrapper:xU,eventsCarouselTrack:NU,eventCardWrapper:DU,peek:OU,active:MU,eventCardDate:PU,dashboardTodayBadge:kU,teamCardsContainer:VU,teamEventCard:LU,teamEventHeader:jU,teamCardEmoji:UU,teamCardName:zU,copyRosterBtn:BU,copyRosterBtnSuccess:HU,teamEventDetails:FU,posAssignmentRow:qU,posEmojiLabel:GU,assignedNames:$U,unassigned:KU,meTag:YU,carouselPagination:QU,dashboardEmpty:XU},WU=()=>{const n=Mn(),[e,t]=WD(),i=e.get("date"),{userData:a}=Ve(se=>se.auth),{teams:l}=Ve(se=>se.teams),{entries:u,loading:f,initialLoad:m}=Ve(se=>se.roster),{positions:p}=Ve(se=>se.positions),[y,v]=O.useState([]),[b,w]=O.useState(!1),[M,H]=O.useState(null),[D,j]=O.useState(0),[P,U]=O.useState(0),[F,X]=O.useState(!1),Y=O.useRef(null),A=O.useRef(!1),C=O.useRef(null);O.useEffect(()=>{const se=Y.current;if(!se)return;const he=new ResizeObserver(ye=>{for(const Ae of ye){const ke=Ae.contentRect.width;ke>0&&U(ke)}});return he.observe(se),()=>he.disconnect()},[]);const I=O.useMemo(()=>{const se=Ss();if(!(a!=null&&a.teams)||l.length===0)return[];const he=l.filter(ke=>a.teams.includes(ke.name)),ye=new Set;he.forEach(ke=>{vd(ke.preferredDays).forEach(ze=>ye.add(ze))});const Ae=Array.from(ye).sort();return i&&i<se?[i]:Ae.filter(ke=>{const Fe=ke;if(i===Fe)return!0;const ze=u[Fe];return ze?he.some(At=>{var lt;const kt=((lt=ze.teams)==null?void 0:lt[At.name])||{};return Object.values(kt).some(Jt=>Array.isArray(Jt)&&Jt.length>0)}):!1})},[a,l,u,i]);O.useEffect(()=>{if(f||I.length===0||P===0||F)return;const se=Y.current;if(!se)return;const he=i?I.findIndex(Ae=>Ae===i):0,ye=he>=0?he:0;A.current=!0,se.style.scrollSnapType="none",se.scrollLeft=P*ye,requestAnimationFrame(()=>{se&&(se.style.scrollSnapType="x mandatory"),j(ye),X(!0),setTimeout(()=>{A.current=!1},100)})},[f,I,P,i,F]),O.useEffect(()=>{if(!F&&!f&&I.length>0){const se=setTimeout(()=>X(!0),1e3);return()=>clearTimeout(se)}},[F,f,I]);const V=()=>{t({},{replace:!0})};O.useEffect(()=>{(async()=>{if(!(!(a!=null&&a.teams)||a.teams.length===0)){w(!0);try{const he=xs(Et,"users"),ye=Ba(he,Sm("teams","array-contains-any",a.teams)),Ae=await mc(ye),ke=[];Ae.forEach(Fe=>ke.push(Fe.data())),v(ke)}catch(he){console.error("Error fetching users for dashboard:",he)}finally{w(!1)}}})()},[a==null?void 0:a.teams]);const k=O.useCallback(se=>{if(!se||!(a!=null&&a.teams)||l.length===0)return null;const ye=u[se],Fe=l.filter(ze=>a.teams.includes(ze.name)).sort((ze,At)=>{const kt=a.teams.indexOf(ze.name),lt=a.teams.indexOf(At.name);return kt-lt}).map(ze=>{var In;const At=((In=ye==null?void 0:ye.teams)==null?void 0:In[ze.name])||{},kt=[],lt=ze.positions.map(tr=>tr.name);let Jt=0;return lt.forEach(tr=>{const be=p.find(De=>De.name===tr),Ke=[];Object.entries(At).forEach(([De,Ge])=>{if(Array.isArray(Ge)&&Ge.includes(tr)){const Vt=y.find(hr=>hr.email===De);Vt?Ke.push(Vt):Ke.push({email:De,name:De}),Jt++}});const Je=[...Ke].sort((De,Ge)=>be!=null&&be.sortByGender&&De.gender!==Ge.gender?De.gender==="Male"?-1:Ge.gender==="Male"?1:(De.gender||"").localeCompare(Ge.gender||""):(De.name||"").localeCompare(Ge.name||""));kt.push({posName:tr,emoji:(be==null?void 0:be.emoji)||"",assignedUsers:Je.map(De=>({name:De.name||De.email||"Unknown",isMe:De.email===a.email}))})}),{teamName:ze.name,teamEmoji:ze.emoji,positions:kt,hasAssignments:Jt>0}}).filter(ze=>ze.hasAssignments);return Fe.length>0?Fe:null},[u,a,l,p,y]),L=(se,he,ye,Ae,ke)=>{const ze=new Date(se).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let At="";ke&&(At+=` ${ke} 
`),At+=`${ye} ${he}  ${ze}
`,Ae.forEach(kt=>{const lt=kt.assignedUsers.length>0?kt.assignedUsers.map(Jt=>Jt.name).join(", "):"-";At+=`${kt.emoji}: ${lt}
`}),navigator.clipboard.writeText(At).then(()=>{const kt=`${se}-${he}`;H(kt),setTimeout(()=>H(null),2e3)})},x=()=>{if(!Y.current||P===0||A.current)return;const se=Y.current,he=Math.round(se.scrollLeft/P);he!==D&&I[he]&&(j(he),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{const ye=I[he];if(i!==ye){const Ae=Ss();he===0&&Ae===ye?t({},{replace:!0}):t({date:ye},{replace:!0})}},300))},me=(se,he)=>{const ye={date:se,eventName:he};n(hR(ye)),n(Pu(ye))},ge=f&&!m||b||!F;if(I.length===0&&!f)return E.jsxs("div",{className:wt.dashboardEmpty,children:[E.jsx("h2",{children:"No upcoming events found"}),E.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const G=I[D],oe=Ss(),de=G&&G<oe,Pe=de?"Previous Event":"Upcoming Events",Ne=se=>new Date(se).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),q=(se,he=!1)=>{const ye=k(se);if(!ye)return null;const Ae=u[se],ke=Ae==null?void 0:Ae.eventName;return E.jsx("div",{className:wt.teamCardsContainer,children:ye.map(Fe=>{const ze=M===`${se}-${Fe.teamName}`;return E.jsxs("div",{className:wt.teamEventCard,children:[E.jsxs("div",{className:wt.teamEventHeader,children:[E.jsxs("h3",{children:[E.jsx("span",{className:wt.teamCardEmoji,children:Fe.teamEmoji}),E.jsx("span",{className:wt.teamCardName,children:Fe.teamName})]}),!he&&E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[E.jsx(km,{className:wt.dashboardThemeToggle}),E.jsx("button",{className:`${wt.copyRosterBtn} ${ze?wt.copyRosterBtnSuccess:""}`,onClick:()=>L(se,Fe.teamName,Fe.teamEmoji,Fe.positions,ke),title:"Copy to clipboard",children:ze?E.jsxs(E.Fragment,{children:[E.jsx(kj,{size:16})," Copied"]}):E.jsxs(E.Fragment,{children:[E.jsx(Lj,{size:16})," Copy"]})})]})]}),E.jsx("div",{className:wt.teamEventDetails,children:Fe.positions.map(At=>E.jsxs("div",{className:wt.posAssignmentRow,children:[E.jsx("span",{className:wt.posEmojiLabel,title:At.posName,children:At.emoji}),E.jsx("span",{className:`${wt.assignedNames} ${At.assignedUsers.length===0?wt.unassigned:""}`,children:At.assignedUsers.length>0?At.assignedUsers.map((kt,lt)=>E.jsxs(O.Fragment,{children:[kt.name,kt.isMe&&E.jsx("span",{className:wt.meTag,children:"Me"}),lt<At.assignedUsers.length-1?", ":""]},`${kt.name}-${lt}`)):"Unassigned"})]},At.posName))})]},Fe.teamName)})})},ie=u[G]||{eventName:""};return E.jsxs("div",{className:wt.dashboardContainer,style:{opacity:F?1:0},children:[ge&&E.jsx(yc,{}),E.jsxs("div",{className:wt.dashboardHeader,children:[E.jsx("h1",{children:Pe}),E.jsx("div",{className:wt.dashboardHeaderActions,children:de&&E.jsx("button",{className:wt.clearPastBtn,onClick:V,children:"Reset to upcoming"})})]}),E.jsx("div",{className:wt.eventNameContainer,children:E.jsx("input",{type:"text",className:`${wt.dashboardEventNameInput} ${ie.eventName?wt.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:ie.eventName||"",onChange:se=>me(G,se.target.value)})}),E.jsxs("div",{className:wt.eventCardDate,children:[Ne(G),G===oe&&E.jsx("span",{className:wt.dashboardTodayBadge,children:"TODAY"})]}),E.jsxs("div",{className:wt.carouselOuterWrapper,children:[E.jsx("div",{className:wt.eventsCarouselTrack,ref:Y,onScroll:x,children:I.map((se,he)=>E.jsx("div",{className:`${wt.eventCardWrapper} ${he===D?wt.active:wt.peek}`,children:q(se,he!==D)},se))}),E.jsxs("div",{className:wt.carouselPagination,children:[D+1," / ",I.length]})]})]})},JU="_button_4hh4s_1",ZU="_primary_4hh4s_26",e9="_secondary_4hh4s_31",t9="_icon_4hh4s_42",n9="_small_4hh4s_48",Jf={button:JU,primary:ZU,secondary:e9,delete:"_delete_4hh4s_36",icon:t9,small:n9},lr=({variant:n="primary",size:e="medium",isIcon:t=!1,className:i="",children:a,...l})=>{const u=[Jf.button,Jf[n],e==="small"?Jf.small:"",t?Jf.icon:"",i].filter(Boolean).join(" ");return E.jsx("button",{className:u,...l,children:a})},r9="_pillGroup_ti99d_1",i9="_pillGroupNowrap_ti99d_9",s9="_pill_ti99d_1",a9="_pillActive_ti99d_35",o9="_pillDisabled_ti99d_40",l9="_pillText_ti99d_61",Ul={pillGroup:r9,pillGroupNowrap:i9,pill:s9,pillActive:a9,pillDisabled:o9,pillText:l9},Yl=({children:n,nowrap:e})=>E.jsx("div",{className:`${Ul.pillGroup} ${e?Ul.pillGroupNowrap:""}`,children:n}),wr=({colour:n,isDropdown:e,isActive:t,isDisabled:i,minWidth:a,onClick:l,children:u})=>{const[f,m]=O.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),E.jsxs("div",{className:`${Ul.pill} ${Ul.pillText} ${t?Ul.pillActive:""} ${i?Ul.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:a?`${a}px`:"fit-content"},onClick:p=>{i||(m(y=>!y),l&&l(p))},children:[u,e&&E.jsx(ZC,{style:{rotate:f?"90deg":"0"}})]})},c9="_settingsSection_5m9oe_1",u9="_sectionLabel_5m9oe_7",h9="_subSectionGroup_5m9oe_17",f9="_subSectionHeader_5m9oe_21",d9="_formGroup_5m9oe_31",m9="_summaryButton_5m9oe_35",p9="_summaryPrimary_5m9oe_57",g9="_summarySeparator_5m9oe_66",y9="_summarySecondary_5m9oe_73",_9="_summaryEmoji_5m9oe_78",v9="_remainingCount_5m9oe_82",Tn={settingsSection:c9,sectionLabel:u9,subSectionGroup:h9,subSectionHeader:f9,formGroup:d9,summaryButton:m9,summaryPrimary:p9,summarySeparator:g9,summarySecondary:y9,summaryEmoji:_9,remainingCount:v9},gR=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:i,onMoveTeam:a,availableTeams:l,globalPositions:u})=>E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:Tn.formGroup,children:[E.jsx("label",{className:Tn.sectionLabel,children:"Teams"}),E.jsx(Yl,{children:l.map(f=>{const m=n.includes(f.name);return E.jsxs(wr,{onClick:()=>t(f.name),isActive:m,children:[E.jsx("span",{children:f.emoji})," ",f.name]},f.name)})})]}),n.length>0&&E.jsxs("div",{className:Tn.settingsSection,children:[E.jsx("label",{className:Tn.sectionLabel,children:"Positions per Team"}),n.map((f,m)=>{var v;const p=l.find(b=>b.name===f);if(!p)return null;const y=((v=p.positions)==null?void 0:v.filter(b=>!b.parentId))||[];return E.jsxs("div",{className:Tn.subSectionGroup,children:[E.jsxs("div",{className:Tn.subSectionHeader,style:{justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.emoji," ",p.name]}),a&&E.jsxs("div",{style:{display:"flex",gap:"4px"},children:[E.jsx(lr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"up"),disabled:m===0,children:""}),E.jsx(lr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?E.jsx(Yl,{children:y.map(b=>{var D;const w=u.find(j=>j.name===b.name),M=!!(w!=null&&w.isCustom),H=(D=e[f])==null?void 0:D.includes(b.name);return E.jsxs(wr,{onClick:()=>i(f,b.name),isActive:H,isDisabled:M,colour:b.colour,children:[E.jsx("span",{children:b.emoji})," ",b.name]},b.name)})}):E.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},f)})]})]}),E9="_rosterSaveFooter_1ce1v_1",T9="_saveFooterContent_1ce1v_23",b9="_changesLabel_1ce1v_32",S9="_saveFooterActions_1ce1v_37",A9="_saveBtn_1ce1v_42",w9="_cancelBtn_1ce1v_57",C9="_sidebarCollapsed_1ce1v_77",R9="_noSidebar_1ce1v_81",ga={rosterSaveFooter:E9,saveFooterContent:T9,changesLabel:b9,saveFooterActions:S9,saveBtn:A9,cancelBtn:w9,sidebarCollapsed:C9,noSidebar:R9},Lm=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:i,saveText:a="Save",discardText:l="Discard",hasSideNav:u=!0})=>{const{isDesktopSidebarExpanded:f}=Ve(p=>p.ui),m=[ga.rosterSaveFooter,u?"":ga.noSidebar,!f&&u?ga.sidebarCollapsed:""].filter(Boolean).join(" ");return E.jsx("div",{className:m,children:E.jsxs("div",{className:ga.saveFooterContent,children:[E.jsx("span",{className:ga.changesLabel,children:n}),E.jsxs("div",{className:ga.saveFooterActions,children:[E.jsx("button",{className:ga.cancelBtn,onClick:t,disabled:i,children:l}),E.jsx("button",{className:ga.saveBtn,onClick:e,disabled:i,children:i?"Saving...":a})]})]})})},I9="_formGroup_163vy_1",x9="_formInput_163vy_16",N9="_formSelect_163vy_52",D9="_colorInput_163vy_86",O9="_fieldHint_163vy_104",Es={formGroup:I9,formInput:x9,formSelect:N9,colorInput:D9,fieldHint:O9},M9="_profileCard_1qei9_1",P9="_profileReadonly_1qei9_11",k9="_actionContainer_1qei9_59",_y={profileCard:M9,profileReadonly:P9,actionContainer:k9},yR=({className:n})=>{const e=Mn(),{userData:t,firebaseUser:i}=Ve(D=>D.auth),{teams:a}=Ve(D=>D.teams),{positions:l}=Ve(D=>D.positions),[u,f]=O.useState({name:"",gender:"",isActive:!0,teams:[],teamPositions:{}}),[m,p]=O.useState("idle");O.useEffect(()=>{!t||m==="saving"||f(D=>!(D.name!==(t.name||"")||D.gender!==(t.gender||"")||D.isActive!==(t.isActive??!0)||JSON.stringify(D.teams)!==JSON.stringify(t.teams||[])||JSON.stringify(D.teamPositions)!==JSON.stringify(t.teamPositions||{}))||m==="idle"?{name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}}:D)},[t,m]);const y=O.useMemo(()=>{if(!t)return!1;const D={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(u)!==JSON.stringify(D)},[u,t]),v=async()=>{if(i){p("saving");try{await e(gd({uid:i.uid,data:u})).unwrap(),p("success"),setTimeout(()=>p("idle"),2e3)}catch(D){console.error(D),p("idle")}}},b=()=>{t&&f({name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}})},w=D=>{f(j=>{const P=j.teams.includes(D),U=P?j.teams.filter(X=>X!==D):[...j.teams,D],F={...j.teamPositions};return P?delete F[D]:F[D]||(F[D]=[]),{...j,teams:U,teamPositions:F}})},M=(D,j)=>{f(P=>{const U=P.teamPositions[D]||[],F=U.includes(j)?U.filter(X=>X!==j):[...U,j];return{...P,teamPositions:{...P.teamPositions,[D]:F}}})},H=(D,j)=>{f(P=>{const U=P.teams.indexOf(D);if(U===-1)return P;const F=j==="up"?U-1:U+1;if(F<0||F>=P.teams.length)return P;const X=[...P.teams];return[X[U],X[F]]=[X[F],X[U]],{...P,teams:X}})};return t?E.jsxs("section",{className:`${_y.profileCard} ${n||""}`,children:[E.jsx("div",{className:_y.profileReadonly,children:E.jsxs("p",{children:[E.jsx("strong",{children:"Email:"})," ",t.email]})}),E.jsxs("div",{className:Es.formGroup,children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:u.name,onChange:D=>f(j=>({...j,name:D.target.value})),className:Es.formInput})]}),E.jsxs("div",{className:Es.formGroup,children:[E.jsx("label",{children:"Gender"}),E.jsx(Yl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(D=>E.jsx(wr,{colour:D.colour,onClick:()=>f(j=>({...j,gender:D.value})),isActive:u.gender===D.value,children:D.value},D.value))})]}),E.jsx(gR,{selectedTeams:u.teams,teamPositions:u.teamPositions,onToggleTeam:w,onTogglePosition:M,onMoveTeam:H,availableTeams:a,globalPositions:l}),E.jsxs("div",{className:Es.formGroup,children:[E.jsx("label",{children:"Availability Status"}),E.jsx(wr,{colour:u.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>f(D=>({...D,isActive:!D.isActive})),isActive:!0,children:u.isActive?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),E.jsx("p",{className:Es.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),E.jsx("div",{className:_y.actionContainer,children:E.jsx(lr,{variant:"delete",onClick:()=>Oo.signOut(),children:"Logout"})}),y&&E.jsx(Lm,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:v,onCancel:b,isSaving:m==="saving"})]}):E.jsx("div",{children:"Loading profile..."})},V9="_guestContainer_1m4dd_1",L9="_profileCardOverride_1m4dd_14",j9="_guestHeader_1m4dd_21",U9="_brandTitle_1m4dd_28",z9="_guestThemeToggleContainer_1m4dd_32",B9="_pendingLabel_1m4dd_38",xl={guestContainer:V9,profileCardOverride:L9,guestHeader:j9,brandTitle:U9,guestThemeToggleContainer:z9,pendingLabel:B9},H9=()=>{const{userData:n,firebaseUser:e,loading:t}=Ve(i=>i.auth);return t?E.jsx(sc,{}):e?n?n.isApproved?E.jsx(wa,{to:"/app",replace:!0}):E.jsxs("div",{className:xl.guestContainer,children:[E.jsxs("header",{className:xl.guestHeader,children:[E.jsx("h2",{className:xl.brandTitle,children:"God is Good"}),E.jsx("p",{className:xl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),E.jsx("div",{className:xl.guestThemeToggleContainer,children:E.jsx(km,{})})]}),E.jsx(yR,{className:xl.profileCardOverride})]}):E.jsx(sc,{}):E.jsx(wa,{to:"/login",replace:!0})},F9="_loginContainer_12x6v_1",q9="_loginHeader_12x6v_12",G9="_brandTitle_12x6v_16",$9="_brandSubtitle_12x6v_24",K9="_loginButtonContainer_12x6v_33",Y9="_loginButton_12x6v_33",Q9="_google_12x6v_57",go={loginContainer:F9,loginHeader:q9,brandTitle:G9,brandSubtitle:$9,loginButtonContainer:K9,loginButton:Y9,google:Q9},X9=()=>{const{firebaseUser:n,loading:e}=Ve(i=>i.auth),t=()=>gV(Oo,hL);return e?null:n?E.jsx(wa,{to:"/",replace:!0}):E.jsxs("div",{className:go.loginContainer,children:[E.jsxs("header",{className:go.loginHeader,children:[E.jsx("h1",{className:go.brandTitle,children:"God is Good"}),E.jsx("p",{className:go.brandSubtitle,children:"Worship Team Roster"})]}),E.jsx("div",{className:go.loginButtonContainer,children:E.jsxs("button",{onClick:t,className:`${go.loginButton} ${go.google}`,children:[E.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},jm=()=>{const n=Mn(),e=ko(),{teamName:t,positionName:i}=Ps(),{userData:a}=Ve(be=>be.auth),{users:l,allTeamUsers:u,rosterDates:f,currentTeamData:m,loadingUsers:p,loadingTeam:y,loadingAllTeamUsers:v,error:b}=Ve(be=>be.rosterView),{entries:w,syncing:M,loading:H,initialLoad:D,error:j}=Ve(be=>be.roster),{positions:P,isDirty:U}=Ve(be=>be.positions),F=Ve(be=>be.teams),X=O.useMemo(()=>(F==null?void 0:F.teams)||[],[F==null?void 0:F.teams]),{hiddenUsers:Y,rosterAllViewMode:A,peekPositionName:C,focusedCell:I}=Ve(be=>be.ui),V=O.useRef(null),k=U;O.useEffect(()=>{t&&(n(bd(t)),n(Ed(t)))},[t,n]),O.useEffect(()=>{i&&t&&!["Absence","All"].includes(i)&&n(Td({teamName:t,positionName:i}))},[i,t,n]),O.useEffect(()=>{const be=Ke=>{V.current&&!V.current.contains(Ke.target)&&n(Cl(null))};return document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[n]);const L=O.useCallback(be=>{!t||!i||n(p3({teamName:t,positionName:i,userEmail:be}))},[n,t,i]),x=O.useCallback(()=>n(mR()),[n]),me=O.useCallback(()=>n(pR()),[n]),ge=O.useCallback(()=>n(EU()),[n]),G=O.useCallback(be=>{const Ke=be.split("T")[0],Je=w[Ke];return Je?Object.values(Je.teams).some(De=>Object.values(De).some(Ge=>Array.isArray(Ge)&&Ge.length>0)):!1},[w]),oe=O.useCallback(be=>{G(be)&&e(`/app/dashboard?date=${be}`)},[G,e]),de=O.useCallback(()=>{U&&n(pv(P))},[n,P,U]),Pe=O.useCallback(()=>{U&&(n(pj()),n($l())),n(Cl(null))},[n,U]),Ne=O.useCallback((be,Ke)=>{const Je=w[be];return!!(Je&&Je.absence&&Je.absence[Ke])},[w]),q=O.useCallback((be,Ke)=>{var De,Ge;const Je=w[be];return((Ge=(De=Je==null?void 0:Je.absence)==null?void 0:De[Ke])==null?void 0:Ge.reason)||""},[w]),ie=O.useCallback(be=>{if(!C||!t)return[];const Ke=be.split("T")[0],Je=w[Ke];return!Je||!Je.teams[t]?[]:Object.entries(Je.teams[t]).filter(([,De])=>Array.isArray(De)&&De.includes(C)).map(([De])=>{const Ge=u.find(Vt=>Vt.email===De);return(Ge==null?void 0:Ge.name)||De})},[t,w,u,C]),se=O.useMemo(()=>{var be;return!t||!i?[]:((be=Y[t])==null?void 0:be[i])||[]},[Y,t,i]),he=O.useCallback((be,Ke)=>{if(!t||!i||i==="Absence"||i==="All")return!1;if(Ne(be,Ke))return!0;const Je=w[be],De=X.find(it=>it.name===t),Ge=(De==null?void 0:De.maxConflict)||1;if(!Je||!Je.teams[t]||!Je.teams[t][Ke])return!1;const Vt=Je.teams[t][Ke];if(!Array.isArray(Vt))return!1;const hr=P.filter(it=>it.parentId===i),mn=[i,...hr.map(it=>it.name)];return Vt.some(it=>mn.includes(it))?!1:Vt.length>=Ge},[t,i,Ne,w,X,P]),ye=O.useCallback((be,Ke,Je,De)=>{var Gn;if(i==="Absence"||i==="All"||!t||!i)return;if(he(be,Ke)){n(Cl({row:Je,col:De,table:"roster"}));return}n(Cl({row:Je,col:De,table:"roster"}));const Ge=w[be],Vt=((Gn=Ge==null?void 0:Ge.teams[t])==null?void 0:Gn[Ke])||[],hr=P.filter(nr=>nr.parentId===i),mn=[i,...hr.map(nr=>nr.name)],it=mn.findIndex(nr=>Vt.includes(nr)),An=it>=0?mn[it]:null;let Pn=null;An===null?Pn=mn[0]:it<mn.length-1?Pn=mn[it+1]:Pn=null;const Hr=Vt.filter(nr=>!mn.includes(nr));Pn&&Hr.push(Pn);const ln={date:be,teamName:t,userIdentifier:Ke,updatedAssignments:Hr};n(d6(ln)),n(yd(ln))},[i,t,he,w,P,n]),Ae=O.useCallback((be,Ke,Je,De)=>{n(Cl({row:Je,col:De,table:"absence"}));const Vt=!Ne(be,Ke),hr=w[be],mn=[];Vt&&hr&&Object.entries(hr.teams).forEach(([An,Pn])=>{Array.isArray(Pn[Ke])&&Pn[Ke].length>0&&mn.push(An)});const it={date:be,userIdentifier:Ke,isAbsent:Vt,clearedTeams:mn};if(Vt&&mn.length>0){const An=mn.join(", ");n(Co({title:"Clear Existing Assignments?",message:`User is already assigned to: ${An}. Marking them as absent will remove these assignments. Continue?`,confirmText:"Mark Absent",onConfirm:()=>{n(gy({date:be,userIdentifier:Ke,isAbsent:!0})),n(Kl(it))}}));return}n(gy({date:be,userIdentifier:Ke,isAbsent:Vt})),n(Kl(it))},[Ne,w,n]),ke=O.useCallback((be,Ke,Je)=>{const De={date:be,userIdentifier:Ke,reason:Je,isAbsent:!0,clearedTeams:[]};n(gy(De)),n(Kl(De))},[n]),Fe=O.useCallback((be,Ke)=>{const Je={date:be,eventName:Ke};n(hR(Je)),n(Pu(Je))},[n]),ze=O.useCallback(be=>{const Ke=Ss(),Je=be.split("T")[0];return Je<Ke?"past-date":Je===Ke?"today-date":"future-date"},[]),At=O.useMemo(()=>Ss(),[]),kt=O.useMemo(()=>{const be=Ss();return f.length>0&&f[0]<be},[f]),lt=O.useMemo(()=>{const be=Ss();return f.find(Ke=>Ke.split("T")[0]>=be)},[f]),Jt=p||y||v||H&&!D,In=b||j,tr=O.useCallback(be=>{n(Cl(be))},[n]);return{dispatch:n,navigate:e,teamName:t,activePosition:i,userData:a,users:l,allTeamUsers:u,rosterDates:f,currentTeamData:m,entries:w,syncing:M,allPositions:P,allTeams:X,hiddenUsers:Y,hiddenUserList:se,rosterAllViewMode:A,focusedCell:I,setFocusedCell:tr,hasDirtyChanges:k,handleToggleVisibility:L,handleLoadPrevious:x,handleResetDates:me,handleLoadNextYear:ge,handleDateClick:oe,handleSave:de,handleCancel:Pe,isUserAbsent:Ne,getAbsenceReason:q,getPeekAssignedUsers:ie,isLoading:Jt,error:In,checkHasAssignments:G,getRowClass:ze,todayKey:At,hasPastDates:kt,closestNextDate:lt,containerRef:V,handleCellClick:ye,handleAbsenceClick:Ae,handleAbsenceReasonChange:ke,handleEventNameChange:Fe,isCellDisabled:he}},W9="_topControls_edhcc_1",J9="_topControlsLeft_edhcc_14",Z9="_viewToggleBar_edhcc_27",e5="_hiddenMembersBar_edhcc_38",t5="_hiddenMembersLabel_edhcc_50",n5="_hiddenMembersList_edhcc_58",r5="_toggleButtonGap_edhcc_64",i5="_unhideButton_edhcc_68",ps={topControls:W9,topControlsLeft:J9,viewToggleBar:Z9,hiddenMembersBar:e5,hiddenMembersLabel:t5,hiddenMembersList:n5,toggleButtonGap:r5,unhideButton:i5},s5=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l})=>{const u=Mn(),f=!e&&i.length>0;return!f&&!n?null:E.jsx("div",{className:ps.topControls,children:E.jsxs("div",{className:ps.topControlsLeft,children:[n&&E.jsxs("div",{className:ps.viewToggleBar,children:[E.jsxs(lr,{variant:t==="user"?"primary":"secondary",size:"small",onClick:()=>u(vA("user")),className:ps.toggleButtonGap,children:[E.jsx(nR,{size:18})," ",E.jsx("span",{children:"User View"})]}),E.jsxs(lr,{variant:t==="position"?"primary":"secondary",size:"small",onClick:()=>u(vA("position")),className:ps.toggleButtonGap,children:[E.jsx(Hj,{size:18})," ",E.jsx("span",{children:"Position View"})]})]}),f&&E.jsxs("div",{className:ps.hiddenMembersBar,children:[E.jsx("span",{className:ps.hiddenMembersLabel,children:"Hidden Members:"}),E.jsx("div",{className:ps.hiddenMembersList,children:i.map(m=>{const p=a.find(y=>y.email===m);return E.jsxs(lr,{variant:"secondary",size:"small",onClick:()=>l(m),className:ps.unhideButton,children:[(p==null?void 0:p.name)||m," ",E.jsx(_h,{size:14})]},m)})})]})]})})},a5="_rosterTableWrapper_5sdjt_1",o5="_syncIndicator_5sdjt_8",l5="_rosterSection_5sdjt_34",c5="_rosterTable_5sdjt_1",u5="_rosterTableError_5sdjt_74",h5="_loadMoreFooter_5sdjt_81",f5="_loadNextYearBtn_5sdjt_88",ya={rosterTableWrapper:a5,syncIndicator:o5,rosterSection:l5,rosterTable:c5,rosterTableError:u5,loadMoreFooter:h5,loadNextYearBtn:f5},Um=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,users:a,handleToggleVisibility:l,isLoading:u,error:f,syncing:m,renderHeader:p,children:y,onLoadNextYear:v,containerRef:b,focusedCell:w,setFocusedCell:M,rosterDates:H,colCount:D,onCellClick:j,hasDirtyChanges:P,handleSave:U,handleCancel:F})=>{if(O.useEffect(()=>{const Y=A=>{const C=A.target;if(C.tagName==="INPUT"||C.tagName==="TEXTAREA")return;if(A.key==="Escape"){A.preventDefault(),M(null),F&&P&&F();return}if(!w)return;const{row:I,col:V,table:k}=w,L=H.length;switch(A.key){case"ArrowUp":A.preventDefault(),I>0&&M({row:I-1,col:V,table:k});break;case"ArrowDown":A.preventDefault(),I<L-1&&M({row:I+1,col:V,table:k});break;case"ArrowLeft":A.preventDefault(),V>0&&M({row:I,col:V-1,table:k});break;case"ArrowRight":A.preventDefault(),V<D-1&&M({row:I,col:V+1,table:k});break;case"Tab":A.preventDefault(),A.shiftKey?I>0&&M({row:I-1,col:V,table:k}):I<L-1&&M({row:I+1,col:V,table:k});break;case" ":A.preventDefault(),j&&j(I,V);break;case"Enter":P&&U&&(A.preventDefault(),U());break}};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[w,H.length,D,j,U,F,P,M]),u)return E.jsx(yc,{});if(f)return E.jsxs("div",{className:ya.rosterTableError,children:["Error: ",f]});const X=Object.values(m).some(Y=>Y);return E.jsxs("div",{ref:b,className:ya.rosterTableWrapper,tabIndex:-1,children:[E.jsx(s5,{isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l}),X&&E.jsx("div",{className:ya.syncIndicator,children:"Syncing changes..."}),E.jsx("div",{className:ya.rosterSection,children:E.jsxs("table",{className:`${ya.rosterTable} ${e?ya.absenceTable:""}`,children:[p(),E.jsx("tbody",{children:y})]})}),E.jsx("div",{className:ya.loadMoreFooter,children:E.jsx("button",{className:ya.loadNextYearBtn,onClick:v,children:"Load Next Year "})})]})},a_=()=>E.jsx("th",{style:{width:"8px",minWidth:"8px",maxWidth:"8px",backgroundColor:"var(--border-color-secondary)",padding:"0",border:"none",position:"sticky",top:"0"}}),d5="_rosterTableHeaderCell_15zat_1",m5="_stickyCol_15zat_10",p5="_dateHeaderContent_15zat_26",g5="_dateHeaderActions_15zat_33",y5="_loadPrevBtn_15zat_38",_5="_resetDatesBtn_15zat_60",v5="_highlightedHeader_15zat_70",Jn={rosterTableHeaderCell:d5,stickyCol:m5,dateHeaderContent:p5,dateHeaderActions:g5,loadPrevBtn:y5,resetDatesBtn:_5,highlightedHeader:v5},E5="_peekHeader_1yo1s_1",T5="_peekSelector_1yo1s_9",b5="_peekCell_1yo1s_26",S5="_stickyRight_1yo1s_36",_s={peekHeader:E5,peekSelector:T5,peekCell:b5,stickyRight:S5},A5=O.memo(()=>{const n=Mn(),{positionName:e}=Ps(),{peekPositionName:t}=Ve(l=>l.ui),{currentTeamData:i}=Ve(l=>l.rosterView),a=O.useMemo(()=>i?i.positions.filter(l=>l.name!==e):[],[i,e]);return E.jsx("th",{className:`${_s.peekHeader} ${_s.stickyRight}`,children:E.jsxs("select",{className:_s.peekSelector,value:t||"",onChange:l=>n(g3(l.target.value||null)),children:[E.jsx("option",{value:"",children:"Peek Position..."}),a.map(l=>E.jsxs("option",{value:l.name,children:[l.emoji," ",l.name]},l.name))]})})}),zm=O.memo(({showPeek:n,children:e})=>{const t=Mn(),{rosterDates:i}=Ve(f=>f.rosterView),a=O.useMemo(()=>{const f=Ss();return i.length>0&&i[0]<f},[i]),l=()=>t(mR()),u=()=>t(pR());return E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:`${Jn.rosterTableHeaderCell} ${Jn.stickyCol}`,children:E.jsxs("div",{className:Jn.dateHeaderContent,children:["Date",E.jsxs("div",{className:Jn.dateHeaderActions,children:[E.jsx("button",{className:Jn.loadPrevBtn,onClick:l,title:"Load previous dates",children:""}),a&&E.jsx("button",{className:`${Jn.loadPrevBtn} ${Jn.resetDatesBtn}`,onClick:u,title:"Reset dates",children:""})]})]})}),e,n&&E.jsx(A5,{})]})})}),w5=O.memo(({allTeamUsers:n,showPeek:e})=>E.jsxs(zm,{showPeek:e,children:[n.map(t=>E.jsx("th",{className:Jn.rosterTableHeaderCell,children:t.name},t.email)),E.jsx(a_,{})]})),C5="_absentCell_x5xrn_1",R5="_absenceInputContainer_x5xrn_5",I5="_absenceReasonInput_x5xrn_24",x5="_removeAbsenceBtn_x5xrn_36",N5="_absenceRosterCell_x5xrn_57",yu={absentCell:C5,absenceInputContainer:R5,absenceReasonInput:I5,removeAbsenceBtn:x5,absenceRosterCell:N5},D5="_rosterCell_1ufav_1",O5="_clickable_1ufav_7",M5="_disabled_1ufav_16",P5="_focused_1ufav_22",k5="_highlightedCell_1ufav_30",V5="_absentStrike_1ufav_34",L5="_remoteCursorBorder_1ufav_41",j5="_remoteCursorBadge_1ufav_53",U5="_reasonPopover_1ufav_68",z5="_popoverBottom_1ufav_86",B5="_noReason_1ufav_109",Dn={rosterCell:D5,clickable:O5,disabled:M5,focused:P5,highlightedCell:k5,absentStrike:V5,remoteCursorBorder:L5,remoteCursorBadge:j5,reasonPopover:U5,popoverBottom:z5,noReason:B5},Xu=O.memo(({type:n,rowIndex:e,isFocused:t,onFocus:i,identifier:a,dateString:l,absent:u,absenceReason:f,isAssignedOnClosestDate:m,content:p,onClick:y,handleAbsenceReasonChange:v,disabled:b})=>{const w=O.useRef(null),{teamName:M}=Ps(),{onlineUsers:H}=Ve(F=>F.presence),{firebaseUser:D}=Ve(F=>F.auth);O.useEffect(()=>{t&&w.current&&(w.current.focus(),w.current.scrollIntoView({block:"nearest",inline:"nearest"}))},[t]);const j=O.useMemo(()=>H.filter(F=>{var Y,A,C;return F.uid!==`${D==null?void 0:D.uid}_${Jd}`&&((Y=F.focus)==null?void 0:Y.date)===l&&((A=F.focus)==null?void 0:A.identifier)===a&&((C=F.focus)==null?void 0:C.teamName)===M}),[H,l,a,M,D==null?void 0:D.uid]),P=[Dn.rosterCell,t?Dn.focused:"",m?Dn.highlightedCell:""],U=()=>j.length===0?null:j.map((F,X)=>E.jsx("div",{className:Dn.remoteCursorBorder,style:{borderColor:F.color,transform:`translate(${X*2}px, ${X*2}px)`},children:E.jsx("div",{className:Dn.remoteCursorBadge,style:{backgroundColor:F.color},children:F.name})},F.uid));return n==="all-user"?E.jsxs("td",{ref:w,className:[...P,Dn.clickable,u?Dn.absentStrike:""].filter(Boolean).join(" "),tabIndex:0,onClick:y,onFocus:i,children:[U(),u&&t&&E.jsx("div",{className:`${Dn.reasonPopover} ${e===0?Dn.popoverBottom:""}`,children:f||E.jsx("span",{className:Dn.noReason,children:"No reason provided"})}),u?E.jsx("span",{title:f,children:""}):p]}):n==="all-position"?E.jsxs("td",{ref:w,className:P.filter(Boolean).join(" "),tabIndex:0,onFocus:i,children:[U(),p]}):n==="roster-custom"?E.jsxs("td",{ref:w,className:[...P,Dn.clickable].filter(Boolean).join(" "),onClick:y,tabIndex:0,onFocus:i,children:[U(),p]}):n==="roster-user"?E.jsxs("td",{ref:w,className:[...P,b?Dn.disabled:Dn.clickable,u?Dn.absentStrike:""].filter(Boolean).join(" "),onClick:y,tabIndex:0,onFocus:i,children:[U(),u&&t&&E.jsx("div",{className:`${Dn.reasonPopover} ${e===0?Dn.popoverBottom:""}`,children:f||E.jsx("span",{className:Dn.noReason,children:"No reason provided"})}),u?E.jsx("span",{title:f,children:""}):p]}):n==="absence"?E.jsxs("td",{ref:w,className:[...P,Dn.clickable,yu.absenceRosterCell,u?yu.absentCell:""].filter(Boolean).join(" "),onClick:y,tabIndex:0,onFocus:i,title:f,children:[U(),u?E.jsxs("div",{className:yu.absenceInputContainer,children:[E.jsx("input",{type:"text",className:yu.absenceReasonInput,value:f,placeholder:"Reason...",maxLength:20,autoFocus:t,onClick:F=>F.stopPropagation(),onChange:F=>v==null?void 0:v(F.target.value)}),E.jsx("button",{className:yu.removeAbsenceBtn,onClick:F=>{F.stopPropagation(),y==null||y()},title:"Mark as present",children:E.jsx(gv,{size:14})})]}):""]}):null}),H5=O.memo(({dateString:n})=>{const{teamName:e}=Ps(),{peekPositionName:t}=Ve(m=>m.ui),{allTeamUsers:i}=Ve(m=>m.rosterView),{entries:a}=Ve(m=>m.roster);if(!t||!e)return E.jsx("td",{className:_s.peekCell});const l=n.split("T")[0],u=a[l];if(!u||!u.teams[e])return E.jsx("td",{className:_s.peekCell});const f=Object.entries(u.teams[e]).filter(([,m])=>Array.isArray(m)&&m.includes(t)).map(([m])=>{const p=i.find(y=>y.email===m);return(p==null?void 0:p.name)||m});return E.jsx("td",{className:`${_s.peekCell} ${_s.stickyRight}`,children:E.jsx("div",{className:_s.peekContent,children:f.map((m,p)=>E.jsxs("span",{className:_s.peekName,children:[m,p<f.length-1?", ":""]},m))})})}),F5="_stickyCol_bin2j_1",q5="_dateCell_bin2j_11",G5="_clickable_bin2j_19",$5="_dateCellContent_bin2j_31",K5="_specialEventDot_bin2j_39",Y5="_rosterTodayDot_bin2j_50",Q5="_pastDate_bin2j_61",X5="_noData_bin2j_65",W5="_closestNextDateRow_bin2j_77",J5="_todayDate_bin2j_78",ti={stickyCol:F5,dateCell:q5,clickable:G5,dateCellContent:$5,specialEventDot:K5,rosterTodayDot:Y5,pastDate:Q5,noData:X5,closestNextDateRow:W5,todayDate:J5},Bm=O.memo(({dateString:n,entries:e,onDateClick:t,closestNextDate:i,showPeek:a,children:l})=>{const u=O.useMemo(()=>Ss(),[]),f=n.split("T")[0],m=f===u,p=f<u,y=e[f],v=y==null?void 0:y.eventName,b=O.useMemo(()=>y?Object.values(y.teams).some(M=>Object.values(M).some(H=>H.length>0)):!1,[y]),w=[p?ti.pastDate:"",m?ti.todayDate:ti.futureDate,b?"":ti.noData,v?ti.specialEventRow:"",n===i?ti.closestNextDateRow:""].filter(Boolean).join(" ");return E.jsxs("tr",{className:w,children:[E.jsx("td",{className:`${ti.dateCell} ${ti.stickyCol} ${b?ti.clickable:""}`,onClick:()=>t(n),title:v,children:E.jsxs("div",{className:ti.dateCellContent,children:[v&&E.jsx("span",{className:ti.specialEventDot}),m&&E.jsx("span",{className:ti.rosterTodayDot,title:"Today"}),new Date(n.replace(/-/g,"/")).toLocaleDateString()]})}),l,a&&E.jsx(H5,{dateString:n})]})}),Z5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,allTeamUsers:f,handleAbsenceClick:m,handleAbsenceReasonChange:p,isUserAbsent:y,getAbsenceReason:v,showPeek:b})=>E.jsx(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,showPeek:b,children:f.map((w,M)=>E.jsx(Xu,{type:"absence",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===M&&(t==null?void 0:t.table)==="absence",onFocus:()=>i({row:e,col:M,table:"absence"}),identifier:w.email||"",absent:w.email?y(n,w.email):!1,absenceReason:w.email?v(n,w.email):"",onClick:()=>{w.email&&m(n,w.email,e,M)},handleAbsenceReasonChange:H=>{w.email&&p(n,w.email,H)}},w.email))})),ez=()=>{const n=jm(),{allTeamUsers:e,rosterDates:t,entries:i,hiddenUserList:a,closestNextDate:l,handleAbsenceClick:u,handleAbsenceReasonChange:f}=n,m=O.useCallback((y,v)=>{const b=t[y],w=e[v];b&&(w!=null&&w.email)&&u(b,w.email,y,v)},[t,e,u]),p=()=>E.jsx(w5,{allTeamUsers:e,showPeek:!0});return E.jsx(Um,{...n,isAllView:!1,isAbsenceView:!0,hiddenUserList:a,renderHeader:p,onLoadNextYear:n.handleLoadNextYear,colCount:e.length,onCellClick:m,children:t.map((y,v)=>E.jsx(Z5,{dateString:y,rowIndex:v,entries:i,closestNextDate:l,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,allTeamUsers:e,handleAbsenceClick:u,handleAbsenceReasonChange:f,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,showPeek:!0},y))})},tz="_allViewPositionHeader_ryktq_1",nz="_allViewPositionName_ryktq_8",rz="_clickableHeader_ryktq_14",vy={allViewPositionHeader:tz,allViewPositionName:nz,clickableHeader:rz},iz=O.memo(({rosterAllViewMode:n,allViewColumns:e,userData:t,currentTeamData:i,teamName:a,navigate:l})=>E.jsx(zm,{children:n==="user"?e.map(u=>{const f=u.id===(t==null?void 0:t.email);return E.jsx("th",{className:`${Jn.rosterTableHeaderCell} ${f?Jn.isMe:""}`,children:E.jsx(Vm,{displayName:u.name,isMe:f})},u.id)}):((i==null?void 0:i.positions)||[]).map(u=>E.jsx("th",{className:`${Jn.rosterTableHeaderCell} ${vy.clickableHeader}`,onClick:()=>l(`/app/roster/${a}/${u.name}`),children:E.jsxs("div",{className:vy.allViewPositionHeader,children:[E.jsx("span",{children:u.emoji}),E.jsx("span",{className:vy.allViewPositionName,children:u.name})]})},u.name))})),sz=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,rosterAllViewMode:f,allViewColumns:m,currentTeamData:p,getAllViewUserCellContent:y,getAllViewPositionCellContent:v,getAssignmentsForIdentifier:b,navigate:w,teamName:M,isUserAbsent:H,getAbsenceReason:D})=>E.jsx(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,children:f==="user"?m.map((j,P)=>E.jsx(Xu,{type:"all-user",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===P&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:P,table:"all"}),identifier:j.id||"",absent:j.id?H(n,j.id):!1,absenceReason:j.id?D(n,j.id):"",content:j.id?y(n,j.id):null,onClick:()=>{const U=b(n,j.id);U.length>0&&w(`/app/roster/${M}/${U[0]}`)}},j.id)):((p==null?void 0:p.positions)||[]).map((j,P)=>E.jsx(Xu,{type:"all-position",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===P&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:P,table:"all"}),identifier:j.name,content:v(n,j.name)},j.name))})),az=()=>{const n=jm(),{teamName:e,allTeamUsers:t,currentTeamData:i,allPositions:a,rosterAllViewMode:l,userData:u,rosterDates:f,navigate:m,entries:p,hiddenUserList:y,closestNextDate:v}=n,b=O.useMemo(()=>t.filter(U=>{var X;return!U.isActive||!e?!1:(((X=U.teamPositions)==null?void 0:X[e])||[]).length>0}),[t,e]),w=O.useMemo(()=>{const U=b.map(Y=>({id:Y.email||"",name:Y.name||"",isUser:!0,gender:Y.gender}));if(!i)return U;const F=i.positions.map(Y=>Y.name),X=Array.from(new Set(a.filter(Y=>F.includes(Y.name)&&Y.isCustom).flatMap(Y=>Y.customLabels||[]).map(Y=>Y.trim()).filter(Y=>Y!==""))).map(Y=>({id:Y,name:Y,isUser:!1}));return[...U,...X]},[b,i,a]),M=O.useCallback((U,F)=>{const X=U.split("T")[0],Y=p[X];if(!Y||!e||!Y.teams[e])return[];let A=Y.teams[e][F]||[];if(!Array.isArray(A)||A.length===0){const C=F.trim(),I=Object.keys(Y.teams[e]).find(V=>V.trim()===C);I&&(A=Y.teams[e][I])}return Array.isArray(A)?A:[]},[p,e]),H=O.useCallback((U,F)=>{const X=M(U,F);return X.length===0?"":E.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:X.map(Y=>{const A=a.find(C=>C.name===Y);return E.jsx("span",{onClick:C=>{C.stopPropagation(),m(`/app/roster/${e}/${Y}`)},title:Y,style:{cursor:"pointer"},children:(A==null?void 0:A.emoji)||""},Y)})})},[M,a,m,e]),D=O.useCallback((U,F)=>{const X=U.split("T")[0],Y=p[X];if(!Y||!e)return"";const A=Object.entries(Y.teams[e]||{}).filter(([,C])=>Array.isArray(C)&&C.includes(F));return E.jsx("div",{style:{fontSize:"0.75rem"},children:A.map(([C],I)=>{const V=b.find(x=>x.email===C),k=C===(u==null?void 0:u.email),L=V?V.name:C;return E.jsxs("span",{children:[E.jsx(Vm,{displayName:L,isMe:k}),I<A.length-1?", ":""]},C)})})},[p,e,b,u]),j=O.useCallback((U,F)=>{if(l!=="user")return;const X=f[U],Y=w[F];if(X&&(Y!=null&&Y.isUser)&&Y.id){const A=M(X,Y.id);A.length>0&&m(`/app/roster/${e}/${A[0]}`)}},[l,f,w,M,m,e]),P=()=>E.jsx(iz,{rosterAllViewMode:l,allViewColumns:w,userData:u,currentTeamData:i,teamName:e,navigate:m});return E.jsx(Um,{...n,isAllView:!0,isAbsenceView:!1,hiddenUserList:y,renderHeader:P,onLoadNextYear:n.handleLoadNextYear,colCount:l==="user"?w.length:(i==null?void 0:i.positions.length)||0,onCellClick:j,children:f.map((U,F)=>E.jsx(sz,{dateString:U,rowIndex:F,entries:p,closestNextDate:v,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,rosterAllViewMode:l,allViewColumns:w,currentTeamData:i,getAllViewUserCellContent:H,getAllViewPositionCellContent:D,getAssignmentsForIdentifier:M,navigate:m,teamName:e,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason},U))})},oz="_headerInput_k44bb_1",lz="_headerActions_k44bb_27",cz="_headerActionBtn_k44bb_34",uz="_removeHeaderBtn_k44bb_58",hz="_addColumnBtn_k44bb_63",yo={headerInput:oz,headerActions:lz,headerActionBtn:cz,removeHeaderBtn:uz,addColumnBtn:hz},fz=O.memo(({currentPosition:n,userData:e,handleUpdateCustomLabel:t,handleMoveCustomLabel:i,handleRemoveCustomLabel:a,handleAddCustomLabel:l,showPeek:u})=>E.jsxs(zm,{showPeek:u,children:[((n==null?void 0:n.customLabels)||[]).map((f,m)=>{var p;return E.jsxs("th",{className:Jn.rosterTableHeaderCell,children:[E.jsx("input",{type:"text",className:yo.headerInput,value:f,placeholder:"New Heading...",readOnly:!(e!=null&&e.isAdmin),onChange:y=>t(m,y.target.value)}),(e==null?void 0:e.isAdmin)&&E.jsxs("div",{className:yo.headerActions,children:[E.jsx("button",{className:yo.headerActionBtn,onClick:()=>i(m,"left"),disabled:m===0,title:"Move Left",children:E.jsx(Ij,{size:12})}),E.jsx("button",{className:`${yo.headerActionBtn} ${yo.removeHeaderBtn}`,onClick:()=>a(m),title:"Remove Column",children:E.jsx(gv,{size:12})}),E.jsx("button",{className:yo.headerActionBtn,onClick:()=>i(m,"right"),disabled:m===(((p=n==null?void 0:n.customLabels)==null?void 0:p.length)||0)-1,title:"Move Right",children:E.jsx(Nj,{size:12})})]})]},`custom-${m}`)}),(e==null?void 0:e.isAdmin)&&E.jsx("th",{className:Jn.rosterTableHeaderCell,children:E.jsx("button",{className:yo.addColumnBtn,onClick:l,title:"Add Column",children:E.jsx(_h,{size:16})})}),E.jsx("th",{className:Jn.genderDividerCell})]})),dz=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,currentPosition:f,handleCellClick:m,getCellContent:p,showPeek:y})=>E.jsx(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,showPeek:y,children:((f==null?void 0:f.customLabels)||[]).map((v,b)=>E.jsx(Xu,{type:"roster-custom",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===b&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:b,table:"roster"}),identifier:v||"",content:v&&p(n,v),onClick:()=>{v&&m(n,v,e,b)}},`custom-cell-${b}`))})),mz=()=>{var U;const n=jm(),{dispatch:e,teamName:t,activePosition:i,allPositions:a,userData:l,rosterDates:u,entries:f,hiddenUserList:m,closestNextDate:p,handleCellClick:y}=n,v=O.useMemo(()=>a.find(F=>F.name===i),[a,i]),b=O.useCallback((F,X)=>{if(!v||!i)return;const Y=[...v.customLabels||[]];Y[F]=X,e(Xf({positionName:i,labels:Y}))},[e,v,i]),w=O.useCallback((F,X)=>{if(!v||!i)return;const Y=[...v.customLabels||[]],A=X==="left"?F-1:F+1;if(A<0||A>=Y.length)return;const C=Y[F];Y[F]=Y[A],Y[A]=C,e(Xf({positionName:i,labels:Y}))},[e,v,i]),M=O.useCallback(F=>{if(!v||!i)return;const X=[...v.customLabels||[]];X.splice(F,1),e(Xf({positionName:i,labels:X}))},[e,v,i]),H=O.useCallback(()=>{if(!v||!i)return;const F=v.customLabels||[];e(Xf({positionName:i,labels:[...F,""]}))},[e,v,i]),D=O.useCallback((F,X)=>{var C;const Y=u[F],A=(C=v==null?void 0:v.customLabels)==null?void 0:C[X];Y&&A&&y(Y,A,F,X)},[u,v,y]),j=O.useCallback((F,X)=>{var C;const Y=f[F];return!Y||!t?"":(((C=Y.teams[t])==null?void 0:C[X])||[]).length>0?(v==null?void 0:v.emoji)||"":""},[f,t,v]),P=()=>E.jsx(fz,{currentPosition:v,userData:l,handleUpdateCustomLabel:b,handleMoveCustomLabel:w,handleRemoveCustomLabel:M,handleAddCustomLabel:H,showPeek:!0});return E.jsx(Um,{...n,isAllView:!1,isAbsenceView:!1,hiddenUserList:m,renderHeader:P,onLoadNextYear:n.handleLoadNextYear,colCount:((U=v==null?void 0:v.customLabels)==null?void 0:U.length)||0,onCellClick:D,children:u.map((F,X)=>E.jsx(dz,{dateString:F,rowIndex:X,entries:f,closestNextDate:p,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,currentPosition:v,handleCellClick:y,getCellContent:j,showPeek:!0},F))})},pz="_genderLabel_ffjys_1",gz="_clickableHeader_ffjys_8",AA={genderLabel:pz,clickableHeader:gz},yz=O.memo(({sortedUsers:n,genderDividerIndex:e,assignedOnClosestDate:t,currentPosition:i,userData:a,onToggleVisibility:l,showPeek:u})=>E.jsxs(zm,{showPeek:u,children:[n.map((f,m)=>{const p=!!(f.email&&f.email===(a==null?void 0:a.email));return E.jsxs(O.Fragment,{children:[e===m&&E.jsx(a_,{}),E.jsxs("th",{className:`${Jn.rosterTableHeaderCell} ${AA.clickableHeader} ${f.email&&t.includes(f.email)?Jn.highlightedHeader:""}`,onClick:()=>f.email&&l(f.email),title:"Click to hide member",children:[E.jsx(Vm,{displayName:f.name,isMe:p}),(i==null?void 0:i.sortByGender)&&E.jsxs("span",{className:AA.genderLabel,children:["(",f.gender==="Male"?"M":f.gender==="Female"?"F":"?",")"]})]})]},f.email)}),E.jsx(a_,{})]})),_z=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,handleCellClick:f,getCellContent:m,sortedUsers:p,genderDividerIndex:y,isCellDisabled:v,isUserAbsent:b,getAbsenceReason:w,assignedOnClosestDate:M,showPeek:H})=>E.jsxs(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,showPeek:H,children:[p.map((D,j)=>E.jsxs(O.Fragment,{children:[y===j&&E.jsx("td",{style:{width:"8px",background:"var(--border-color-secondary)"}}),E.jsx(Xu,{type:"roster-user",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===j&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:j,table:"roster"}),identifier:D.email||"",disabled:D.email?v(n,D.email):!1,absent:D.email?b(n,D.email):!1,absenceReason:D.email?w(n,D.email):"",isAssignedOnClosestDate:!!(n===u&&D.email&&M.includes(D.email)),content:D.email?m(n,D.email):null,onClick:()=>{D.email&&!v(n,D.email)&&f(n,D.email,e,j)}})]},D.email)),E.jsx("td",{style:{width:"8px",background:"var(--border-color-secondary)"}})]})),vz=()=>{const n=jm(),{teamName:e,activePosition:t,users:i,allPositions:a,rosterDates:l,closestNextDate:u,entries:f,hiddenUserList:m,userData:p,handleCellClick:y}=n,v=O.useMemo(()=>a.find(P=>P.name===t),[a,t]),b=O.useMemo(()=>{const P=i.filter(U=>U.email&&!m.includes(U.email)&&U.isActive);return v!=null&&v.sortByGender?P.sort((U,F)=>U.gender===F.gender?(U.name||"").localeCompare(F.name||""):U.gender==="Male"?-1:F.gender==="Male"?1:(U.gender||"").localeCompare(F.gender||"")):P},[i,v,m]),w=O.useMemo(()=>{if(!(v!=null&&v.sortByGender)||b.length===0)return-1;const P=b.findIndex(U=>U.gender==="Female");return P>0&&P<b.length?P:-1},[v,b]),M=O.useMemo(()=>{if(!u||!e||!t)return[];const P=u.split("T")[0],U=f[P];if(!U||!U.teams[e])return[];const F=a.filter(Y=>Y.parentId===t),X=[t,...F.map(Y=>Y.name)];return Object.entries(U.teams[e]).filter(([,Y])=>Y.some(A=>X.includes(A))).map(([Y])=>Y)},[u,e,t,f,a]),H=O.useCallback((P,U)=>{const F=l[P],X=b[U];F&&(X!=null&&X.email)&&y(F,X.email,P,U)},[l,b,y]),D=O.useCallback((P,U)=>{var A;const F=f[P];if(!F||!e)return"";const X=((A=F.teams[e])==null?void 0:A[U])||[],Y=[];return Object.entries(F.teams).forEach(([C,I])=>{C!==e&&I[U]&&Y.push({team:C,positions:I[U]})}),X.length===0&&Y.length===0?"":E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:[X.map(C=>{const I=a.find(V=>V.name===C);return E.jsx("span",{title:`${e}: ${C}`,children:(I==null?void 0:I.emoji)||""},C)}),Y.map(C=>C.positions.map(I=>{const V=a.find(k=>k.name===I);return E.jsx("span",{title:`${C.team}: ${I}`,style:{opacity:.6},children:(V==null?void 0:V.emoji)||""},`${C.team}-${I}`)}))]})},[f,e,a]),j=()=>E.jsx(yz,{sortedUsers:b,genderDividerIndex:w,assignedOnClosestDate:M,currentPosition:v,userData:p,onToggleVisibility:n.handleToggleVisibility,showPeek:!0});return E.jsx(Um,{...n,isAllView:!1,isAbsenceView:!1,hiddenUserList:m,renderHeader:j,onLoadNextYear:n.handleLoadNextYear,colCount:b.length,onCellClick:H,children:l.map((P,U)=>E.jsx(_z,{dateString:P,rowIndex:U,entries:f,closestNextDate:u,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,handleCellClick:y,getCellContent:D,sortedUsers:b,genderDividerIndex:w,isCellDisabled:n.isCellDisabled,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,assignedOnClosestDate:M,showPeek:!0},P))})},Ez="_rosterPage_j93zt_1",Tz={rosterPage:Ez},bz=()=>{const{positionName:n}=Ps(),{positions:e}=Ve(a=>a.positions),t=e.find(a=>a.name===n),i=()=>n==="All"?E.jsx(az,{}):n==="Absence"?E.jsx(ez,{}):t!=null&&t.isCustom?E.jsx(mz,{}):E.jsx(vz,{});return E.jsx("div",{className:Tz.rosterPage,children:i()})},Sz="_appTableContainer_1wf07_1",Az="_appTable_1wf07_1",wz="_colorPickerGroup_1wf07_50",Cz="_stickyCol_1wf07_60",Wu={appTableContainer:Sz,appTable:Az,colorPickerGroup:wz,stickyCol:Cz},Rz=({text:n,textAlign:e="left",width:t,minWidth:i})=>E.jsx("th",{className:Wu.stickyCol,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:i?`${i}px`:"auto"},children:n}),en=({isSticky:n=!1,textAlign:e="left",className:t,children:i})=>E.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Wu.stickyCol:""}
`,children:E.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:i})}),ii=({name:n,value:e,placeholder:t,type:i="text",isSticky:a,isReadOnly:l=!1,isChild:u=!1,onChange:f})=>E.jsxs(en,{isSticky:a,children:[u&&E.jsx(eR,{}),E.jsx("input",{name:n,className:Es.formInput,type:i,placeholder:t,value:e,onChange:f,readOnly:l})]}),_R=({name:n,value:e,placeholder:t,onChange:i})=>E.jsxs(en,{className:Wu.colorPickerGroup,children:[E.jsx("input",{name:n,type:"color",className:Es.colorInput,value:e||"#FFFFFF",onChange:i}),E.jsx("input",{name:n,className:Es.formInput,value:e,placeholder:t,onChange:i})]}),vv=({headers:n,children:e})=>E.jsx("div",{className:Wu.appTableContainer,children:E.jsxs("table",{className:Wu.appTable,children:[E.jsx("thead",{children:E.jsx("tr",{children:n.map((t,i)=>E.jsx(Rz,{...t},i))})}),E.jsx("tbody",{children:e})]})}),Iz=({position:n,index:e,onUpdate:t,onMove:i,onDelete:a,onAddChild:l,isFirst:u,isLast:f})=>E.jsxs("tr",{children:[E.jsx(ii,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),E.jsx(en,{textAlign:"center",children:n.parentId?E.jsx(eR,{}):E.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[E.jsx(lr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"up"),disabled:u,children:""}),E.jsx(lr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"down"),disabled:f,children:""})]})}),E.jsx(ii,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),E.jsx(_R,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),E.jsx(en,{textAlign:"center",children:!n.parentId&&E.jsxs(lr,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[E.jsx(_h,{size:14,style:{marginRight:"4px"}}),"Add"]})}),E.jsx(en,{textAlign:"center",children:E.jsxs(lr,{variant:"delete",size:"small",onClick:()=>a(e),children:[E.jsx(tR,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),xz="_settingsContainer_w7sc3_1",Nz="_managementWrapper_w7sc3_13",Ql={settingsContainer:xz,managementWrapper:Nz},Ey={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},Dz=()=>{const n=Mn(),{positions:e,loading:t}=Ve(j=>j.positions),[i,a]=O.useState(e),[l,u]=O.useState(Ey),[f,m]=O.useState("idle"),p=O.useMemo(()=>{const j=P=>P.map(U=>({name:U.name||"",emoji:U.emoji||"",colour:U.colour||"",parentId:U.parentId||void 0,sortByGender:!!U.sortByGender,isCustom:!!U.isCustom}));return JSON.stringify(j(i))!==JSON.stringify(j(e))},[i,e]);O.useEffect(()=>{a(e)},[e]);const y=(j,P,U)=>{const F=[...i];F[j]={...F[j],[P]:U},a(F)},v=(j,P)=>{const U=[...i],F=U[j],X=F.parentId,Y=A=>{const C=U[A];if(!C)return{block:[],startIndex:-1,endIndex:-1};const I=[],V=[C],k=new Set;let L=A,x=A,me=0;for(;me<V.length;){const G=V[me++];k.has(G.name)||(k.add(G.name),I.push(G),U.forEach((oe,de)=>{oe.parentId===G.name&&!k.has(oe.name)&&(V.push(oe),L=Math.min(L,de),x=Math.max(x,de))}))}return{block:I,startIndex:L,endIndex:x}};if(X){const A=U.filter(me=>me.parentId===X),I=A.findIndex(me=>me.name===F.name)+(P==="up"?-1:1);if(I<0||I>=A.length)return;const V=A[I],k=U.indexOf(F),L=U.indexOf(V);if(k===-1||L===-1)return;const x=[...U];x[k]=V,x[L]=F,a(x)}else{const A=Y(j),{block:C,startIndex:I,endIndex:V}=A;if(!C||C.length===0)return;if(P==="up"){if(I===0)return;let k=I-1;for(;k>=0&&U[k].parentId;)k--;if(k<0)return;const L=Y(k),{block:x,startIndex:me}=L;if(!x||x.length===0)return;const ge=[...U.slice(0,me),...C,...x,...U.slice(V+1)].filter(Boolean);a(ge)}else{if(V===U.length-1)return;let k=V+1;for(;k<U.length&&U[k].parentId;)k++;if(k>=U.length)return;const L=Y(k),{block:x,startIndex:me}=L;if(!x||x.length===0)return;const ge=[...U.slice(0,I),...x,...C,...U.slice(me+x.length)].filter(Boolean);a(ge)}}},b=()=>{if(!l.name.trim()||!l.emoji.trim()){n(Co({title:"Missing Information",message:"Please provide both an emoji and a name.",showCancel:!1}));return}a([...i,l]),u(Ey)},w=j=>{n(Co({title:"Delete Position",message:"Delete this position? This will remove it from the global list, and any associated child positions.",confirmText:"Delete",onConfirm:()=>{const P=i[j];let U=i.filter((F,X)=>X!==j);P.parentId||(U=U.filter(F=>F.parentId!==P.name)),a(U)}}))},M=async()=>{m("saving");try{const j=i.map(P=>{const U={name:P.name||"",emoji:P.emoji||"",colour:P.colour||"",sortByGender:!!P.sortByGender,isCustom:!!P.isCustom,customLabels:P.customLabels||[]};return P.parentId&&(U.parentId=P.parentId),U});await n(pv(j)).unwrap(),m("success"),setTimeout(()=>m("idle"),2e3)}catch(j){console.error("Save Error:",j),n(Co({title:"Save Error",message:"Error saving: "+(j instanceof Error?j.message:"Unknown error"),showCancel:!1})),m("idle")}},H=j=>{a(P=>{const U={...Ey,parentId:j},F=P.findIndex(A=>A.name===j);if(F===-1)return[...P,U];let X=F;for(;X+1<P.length&&P[X+1].parentId===j;)X++;return[...P.slice(0,X+1),U,...P.slice(X+1)]})},D=()=>{a(e)};return t?E.jsx(yc,{}):E.jsxs("div",{className:Ql.managementWrapper,children:[E.jsxs(vv,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[i.map((j,P)=>E.jsx(Iz,{position:j,index:P,onUpdate:y,onMove:v,onDelete:w,onAddChild:H,isFirst:P===0,isLast:P===i.length-1},`${j.emoji}-${P}`)),E.jsxs("tr",{className:"pos-row-new",children:[E.jsx(ii,{name:"new-name",value:l.name,placeholder:"Position Name",onChange:j=>u({...l,name:j.target.value}),isSticky:!0}),E.jsx(en,{textAlign:"center",children:""}),E.jsx(ii,{name:"new-emoji",value:l.emoji,placeholder:"",onChange:j=>u({...l,emoji:j.target.value})}),E.jsx(_R,{name:"new-colour",value:l.colour,placeholder:"#FFFFFF",onChange:j=>u({...l,colour:j.target.value})}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:l.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.sortByGender,onClick:()=>u({...l,sortByGender:!l.sortByGender}),isDisabled:l.isCustom,children:l.sortByGender?"YES":"NO"})}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:l.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.isCustom,onClick:()=>u({...l,isCustom:!l.isCustom}),children:l.isCustom?"YES":"NO"})}),E.jsx(en,{textAlign:"center",children:E.jsxs(lr,{onClick:b,disabled:!l.name.trim()||!l.emoji.trim(),children:[E.jsx(_h,{size:16,style:{marginRight:"6px"}}),"Add"]})}),E.jsx(en,{textAlign:"center",children:""})]})]}),p&&E.jsx(Lm,{label:"Unsaved position changes",saveText:"Save Positions",onSave:M,onCancel:D,isSaving:f==="saving"})]})},Oz=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],vR=({isOpen:n,onClose:e,team:t,availablePositions:i,onTogglePosition:a,onToggleDay:l,onToggleAllowAbsence:u})=>{var f;return E.jsxs(_v,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[E.jsxs("div",{className:Tn.formGroup,children:[E.jsx("label",{className:Tn.sectionLabel,children:"Allowed Positions"}),E.jsx(Yl,{children:(f=i==null?void 0:i.filter(m=>!m.parentId))==null?void 0:f.map(m=>{var y;const p=(y=t.positions)==null?void 0:y.some(v=>v.name===m.name);return E.jsxs(wr,{colour:m.colour,isActive:p,onClick:()=>a(m),children:[m.emoji," ",m.name]},m.name)})})]}),E.jsxs("div",{className:Tn.formGroup,children:[E.jsx("label",{className:Tn.sectionLabel,children:"Preferred Days"}),E.jsx(Yl,{children:Oz.map(m=>{var y;const p=(y=t.preferredDays)==null?void 0:y.includes(m);return E.jsx(wr,{isActive:p,onClick:()=>l(m),children:m},m)})})]}),E.jsxs("div",{className:Tn.formGroup,children:[E.jsx("label",{className:Tn.sectionLabel,children:"Feature Settings"}),E.jsx(Yl,{children:E.jsxs(wr,{isActive:t.allowAbsence!==!1,onClick:()=>u(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},Ev=({primaryText:n,secondaryText:e,onClick:t})=>E.jsxs("button",{className:Tn.summaryButton,onClick:t,type:"button",children:[E.jsx("span",{className:Tn.summaryPrimary,children:n}),e&&E.jsxs(E.Fragment,{children:[E.jsx("span",{className:Tn.summarySeparator,children:""}),E.jsx("span",{className:Tn.summarySecondary,children:e})]})]}),Mz=({team:n,teamIndex:e,availablePositions:t,onUpdate:i,onMove:a,onDelete:l,onTogglePosition:u,onToggleDay:f,onToggleAllowAbsence:m,isFirst:p,isLast:y})=>{var H;const[v,b]=O.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const D=n.positions.slice(0,3).map(P=>E.jsx("span",{className:Tn.summaryEmoji,children:P.emoji},P.name)),j=n.positions.length-3;return E.jsxs(E.Fragment,{children:[D,j>0&&E.jsxs("span",{className:Tn.remainingCount,children:["+",j]})]})},M=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(D=>D.substring(0,3)).join(", ");return E.jsxs(E.Fragment,{children:[E.jsxs("tr",{children:[E.jsx(ii,{name:`team-name-${e}`,value:n.name,onChange:D=>i(e,"name",D.target.value),isSticky:!0}),E.jsx(en,{children:E.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[E.jsx(lr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"up"),disabled:p,children:""}),E.jsx(lr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"down"),disabled:y,children:""})]})}),E.jsx(ii,{name:`team-emoji-${e}`,value:n.emoji,onChange:D=>i(e,"emoji",D.target.value)}),E.jsx(ii,{name:`team-maxConflict-${e}`,value:((H=n.maxConflict)==null?void 0:H.toString())||"1",type:"number",onChange:D=>i(e,"maxConflict",parseInt(D.target.value)||1)}),E.jsx(en,{children:E.jsx(Ev,{primaryText:w(),secondaryText:M(),onClick:()=>b(!0)})}),E.jsx(en,{children:E.jsxs(lr,{variant:"delete",size:"small",onClick:()=>l(e),children:[E.jsx(tR,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),E.jsx(vR,{isOpen:v,onClose:()=>b(!1),team:n,availablePositions:t,onTogglePosition:D=>u(e,D),onToggleDay:D=>f(e,D),onToggleAllowAbsence:D=>m(e,D)})]})},wA={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},Pz=()=>{var L;const n=Mn(),{teams:e,loading:t}=Ve(x=>x.teams),{positions:i,loading:a}=Ve(x=>x.positions),[l,u]=O.useState(e),[f,m]=O.useState(wA),[p,y]=O.useState("idle"),[v,b]=O.useState(!1),w=O.useMemo(()=>{const x=me=>me.map(ge=>({name:ge.name||"",emoji:ge.emoji||"",positions:(ge.positions||[]).map(G=>G.name).sort(),preferredDays:[...ge.preferredDays||[]].sort(),maxConflict:ge.maxConflict||1,allowAbsence:ge.allowAbsence!==!1}));return JSON.stringify(x(l))!==JSON.stringify(x(e))},[l,e]);O.useEffect(()=>{u(e)},[e]);const M=(x,me,ge)=>{const G=[...l];G[x]={...G[x],[me]:ge},u(G)},H=(x,me)=>{const ge=[...l],G=me==="up"?x-1:x+1;if(G<0||G>=ge.length)return;const oe=ge[x];ge[x]=ge[G],ge[G]=oe,u(ge)},D=(x,me)=>{const ge=l.map((G,oe)=>{if(oe!==x)return G;const de=G.positions||[],Pe=de.find(Ne=>Ne.name===me.name)?de.filter(Ne=>Ne.name!==me.name):[...de,me];return{...G,positions:Pe}});u(ge)},j=(x,me)=>{const ge=l.map((G,oe)=>{if(oe!==x)return G;const de=G.preferredDays||[],Pe=de.includes(me)?de.filter(Ne=>Ne!==me):[...de,me];return{...G,preferredDays:Pe}});u(ge)},P=(x,me)=>{const ge=l.map((G,oe)=>oe!==x?G:{...G,allowAbsence:me});u(ge)},U=x=>{const me=f.positions||[],ge=me.some(G=>G.name===x.name)?me.filter(G=>G.name!==x.name):[...me,x];m({...f,positions:ge})},F=x=>{const me=f.preferredDays||[],ge=me.includes(x)?me.filter(G=>G!==x):[...me,x];m({...f,preferredDays:ge})},X=x=>{m({...f,allowAbsence:x})},Y=()=>{if(!f.name.trim()||!f.emoji.trim()){n(Co({title:"Missing Information",message:"Please provide both an emoji and a name for the team.",showCancel:!1}));return}u([...l,f]),m(wA)},A=x=>{n(Co({title:"Delete Team",message:"Are you sure you want to delete this team?",confirmText:"Delete",onConfirm:()=>{u(l.filter((me,ge)=>ge!==x))}}))},C=async()=>{y("saving");try{const x=l.map(me=>({name:me.name||"",emoji:me.emoji||"",maxConflict:me.maxConflict||1,allowAbsence:me.allowAbsence!==!1,preferredDays:me.preferredDays||[],positions:(me.positions||[]).map(ge=>({name:ge.name||"",emoji:ge.emoji||"",colour:ge.colour||"",sortByGender:!!ge.sortByGender,isCustom:!!ge.isCustom,customLabels:ge.customLabels||[],...ge.parentId?{parentId:ge.parentId}:{}}))}));await n(md(x)).unwrap(),y("success"),setTimeout(()=>y("idle"),2e3)}catch(x){console.error("Save Error:",x),n(Co({title:"Save Error",message:"Error saving: "+(x instanceof Error?x.message:"Unknown error"),showCancel:!1})),y("idle")}},I=()=>{u(e)};if(t||a)return E.jsx(yc,{});const V=()=>{if(!f.positions||f.positions.length===0)return"No positions";const x=f.positions.slice(0,3).map(ge=>E.jsx("span",{className:Ql.summaryEmoji,children:ge.emoji},ge.name)),me=f.positions.length-3;return E.jsxs(E.Fragment,{children:[x,me>0&&E.jsxs("span",{className:Ql.remainingCount,children:["+",me]})]})},k=()=>!f.preferredDays||f.preferredDays.length===0?"No days":f.preferredDays.map(x=>x.substring(0,3)).join(", ");return E.jsxs("div",{className:Ql.managementWrapper,children:[E.jsxs(vv,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[l.map((x,me)=>E.jsx(Mz,{team:x,teamIndex:me,availablePositions:i,onUpdate:M,onMove:H,onDelete:A,onTogglePosition:D,onToggleDay:j,onToggleAllowAbsence:P,isFirst:me===0,isLast:me===l.length-1},`${x.emoji}-${me}`)),E.jsxs("tr",{className:"team-row-new",children:[E.jsx(ii,{name:"new-team-name",value:f.name,placeholder:"Team Name",onChange:x=>m({...f,name:x.target.value}),isSticky:!0}),E.jsx(en,{children:""}),E.jsx(ii,{name:"new-team-emoji",value:f.emoji,placeholder:"",onChange:x=>m({...f,emoji:x.target.value})}),E.jsx(ii,{name:"new-team-maxConflict",value:((L=f.maxConflict)==null?void 0:L.toString())||"1",type:"number",onChange:x=>m({...f,maxConflict:parseInt(x.target.value)||1})}),E.jsx(en,{children:E.jsx(Ev,{primaryText:V(),secondaryText:k(),onClick:()=>b(!0)})}),E.jsx(en,{children:E.jsxs(lr,{onClick:Y,disabled:!f.name.trim()||!f.emoji.trim(),children:[E.jsx(_h,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),E.jsx(vR,{isOpen:v,onClose:()=>b(!1),team:f,availablePositions:i,onTogglePosition:U,onToggleDay:F,onToggleAllowAbsence:X}),w&&E.jsx(Lm,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:C,onCancel:I,isSaving:p==="saving"})]})},kz=({isOpen:n,onClose:e,user:t,availableTeams:i})=>{const a=Mn(),{positions:l}=Ve(p=>p.positions),u=p=>{a(y6({userId:t.id,teamName:p}))},f=(p,y)=>{a(_6({userId:t.id,teamName:p,posName:y}))},m=(p,y)=>{a(v6({userId:t.id,teamName:p,direction:y}))};return E.jsx(_v,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:E.jsx(gR,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:u,onTogglePosition:f,onMoveTeam:m,availableTeams:i,globalPositions:l})})},Vz=({user:n,availableTeams:e,adminEmail:t})=>{const i=Mn(),{positions:a}=Ve(y=>y.positions),[l,u]=O.useState(!1),f=(y,v)=>{i(g6({id:n.id,field:y,value:v}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const M=e.find(H=>H.name===w);return(M==null?void 0:M.emoji)||""}).filter(Boolean),v=y.slice(0,3).map((w,M)=>E.jsx("span",{className:Tn.summaryEmoji,children:w},M)),b=y.length-3;return E.jsxs(E.Fragment,{children:[v,b>0&&E.jsxs("span",{className:Tn.remainingCount,children:["+",b]})]})},p=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,v])=>{const b=v.filter(w=>{const M=a.find(H=>H.name===w);return!(M!=null&&M.isCustom)});return y+b.length},0):0;return E.jsxs(E.Fragment,{children:[E.jsxs("tr",{children:[E.jsx(ii,{name:`name-${n.id}`,value:n.name||"",onChange:y=>f("name",y.target.value),isSticky:!0}),E.jsx(ii,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),E.jsx(en,{children:E.jsxs("select",{name:`gender-${n.id}`,className:Es.formSelect,value:n.gender,onChange:y=>f("gender",y.target.value),children:[E.jsx("option",{value:"",children:"-"}),E.jsx("option",{value:"Male",children:"Male"}),E.jsx("option",{value:"Female",children:"Female"})]})}),E.jsx(en,{children:E.jsx(Ev,{primaryText:m(),secondaryText:`(${p()} pos)`,onClick:()=>u(!0)})}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),E.jsx(en,{textAlign:"center",children:E.jsx(wr,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),E.jsx(kz,{isOpen:l,onClose:()=>u(!1),user:n,availableTeams:e})]})},Lz=()=>{const n=Mn(),{allUsers:e,originalUsers:t,loading:i,saving:a,error:l}=Ve(y=>y.userManagement),u=Ve(y=>y.teams.teams),f=O.useMemo(()=>{const y=v=>v.map(b=>({name:b.name||"",gender:b.gender||"",teams:[...b.teams||[]].sort(),teamPositions:Object.keys(b.teamPositions||{}).sort().reduce((w,M)=>{var H;return w[M]=[...((H=b.teamPositions)==null?void 0:H[M])||[]].sort(),w},{}),isActive:!!b.isActive,isApproved:!!b.isApproved,isAdmin:!!b.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]),m=()=>{n(_d(e))},p=()=>{n(E6())};return i?E.jsx(yc,{}):l?E.jsxs("div",{children:["Error: ",l]}):E.jsxs("div",{className:Ql.managementWrapper,children:[E.jsx(vv,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center"},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>E.jsx(Vz,{user:y,availableTeams:u,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),f&&E.jsx(Lm,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:p,isSaving:a})]})},jz=()=>{const{userData:n}=Ve(t=>t.auth),{section:e}=Ps();return n?E.jsxs("div",{className:Ql.settingsContainer,children:[e===jl.PROFILE&&E.jsx(yR,{}),e===jl.USER_MANAGEMENT&&(n.isAdmin?E.jsx(Lz,{}):E.jsx("p",{children:"Access Denied"})),e===jl.TEAMS&&(n.isAdmin?E.jsx(Pz,{}):E.jsx("p",{children:"Access Denied"})),e===jl.POSITIONS&&(n.isAdmin?E.jsx(Dz,{}):E.jsx("p",{children:"Access Denied"}))]}):null},Uz=[{path:"/",element:E.jsx(yL,{})},{path:"/login",element:E.jsx(X9,{})},{path:"/guest",element:E.jsx(H9,{})},{path:"/app",element:E.jsx(Tj,{}),children:[{path:"",element:E.jsx(yU,{}),children:[{path:"dashboard",element:E.jsx(WU,{})},{path:"roster/:teamName?/:positionName?",element:E.jsx(bz,{})},{path:"settings/:section?",element:E.jsx(jz,{})}]}]}];let CA=!1;const zz=n=>{if(!CA){CA=!0;let e;Xk(Oo,t=>{if(t){n.dispatch(l6(t)),n.dispatch(pd(t.uid));const i=on(Et,"users",t.uid);e=vo(i,a=>{if(a.exists()){const l=a.data();n.dispatch(cR(l))}})}else n.dispatch(c6()),e&&e()})}return e=>t=>e(t)},Bz=YL({reducer:{auth:u6,positions:yj,presence:A3,roster:m6,rosterView:TU,teams:Ej,ui:y3,userManagement:b6},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(zz)}),Hz=qD(Uz);cx.createRoot(document.getElementById("root")).render(E.jsx(IA.StrictMode,{children:E.jsx(Ax,{store:Bz,children:E.jsx(s2,{children:E.jsx(fL,{children:E.jsx(r2,{router:Hz})})})})}));
