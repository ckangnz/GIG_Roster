var IC=Object.defineProperty;var DC=(n,e,t)=>e in n?IC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var kp=(n,e,t)=>DC(n,typeof e!="symbol"?e+"":e,t);function NC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function yb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Up={exports:{}},Iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kT;function xC(){if(kT)return Iu;kT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Iu.Fragment=e,Iu.jsx=t,Iu.jsxs=t,Iu}var UT;function OC(){return UT||(UT=1,Up.exports=xC()),Up.exports}var O=OC(),jp={exports:{}},Be={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function MC(){if(jT)return Be;jT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function C(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,L={};function G(U,re,he){this.props=U,this.context=re,this.refs=L,this.updater=he||V}G.prototype.isReactComponent={},G.prototype.setState=function(U,re){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,re,"setState")},G.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function F(){}F.prototype=G.prototype;function K(U,re,he){this.props=U,this.context=re,this.refs=L,this.updater=he||V}var ee=K.prototype=new F;ee.constructor=K,j(ee,G.prototype),ee.isPureReactComponent=!0;var ae=Array.isArray;function Y(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function w(U,re,he){var ve=he.ref;return{$$typeof:n,type:U,key:re,ref:ve!==void 0?ve:null,props:he}}function I(U,re){return w(U.type,re,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function M(U){var re={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(he){return re[he]})}var x=/\/+/g;function Ae(U,re){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):re.toString(36)}function ke(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(Y,Y):(U.status="pending",U.then(function(re){U.status==="pending"&&(U.status="fulfilled",U.value=re)},function(re){U.status==="pending"&&(U.status="rejected",U.reason=re)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function Q(U,re,he,ve,Re){var Oe=typeof U;(Oe==="undefined"||Oe==="boolean")&&(U=null);var Ye=!1;if(U===null)Ye=!0;else switch(Oe){case"bigint":case"string":case"number":Ye=!0;break;case"object":switch(U.$$typeof){case n:case e:Ye=!0;break;case v:return Ye=U._init,Q(Ye(U._payload),re,he,ve,Re)}}if(Ye)return Re=Re(U),Ye=ve===""?"."+Ae(U,0):ve,ae(Re)?(he="",Ye!=null&&(he=Ye.replace(x,"$&/")+"/"),Q(Re,re,he,"",function(Ii){return Ii})):Re!=null&&(N(Re)&&(Re=I(Re,he+(Re.key==null||U&&U.key===Re.key?"":(""+Re.key).replace(x,"$&/")+"/")+Ye)),re.push(Re)),1;Ye=0;var St=ve===""?".":ve+":";if(ae(U))for(var At=0;At<U.length;At++)ve=U[At],Oe=St+Ae(ve,At),Ye+=Q(ve,re,he,Oe,Re);else if(At=C(U),typeof At=="function")for(U=At.call(U),At=0;!(ve=U.next()).done;)ve=ve.value,Oe=St+Ae(ve,At++),Ye+=Q(ve,re,he,Oe,Re);else if(Oe==="object"){if(typeof U.then=="function")return Q(ke(U),re,he,ve,Re);throw re=String(U),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ye}function ce(U,re,he){if(U==null)return U;var ve=[],Re=0;return Q(U,ve,"","",function(Oe){return re.call(he,Oe,Re++)}),ve}function ge(U){if(U._status===-1){var re=U._result;re=re(),re.then(function(he){(U._status===0||U._status===-1)&&(U._status=1,U._result=he)},function(he){(U._status===0||U._status===-1)&&(U._status=2,U._result=he)}),U._status===-1&&(U._status=0,U._result=re)}if(U._status===1)return U._result.default;throw U._result}var De=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Ve={map:ce,forEach:function(U,re,he){ce(U,function(){re.apply(this,arguments)},he)},count:function(U){var re=0;return ce(U,function(){re++}),re},toArray:function(U){return ce(U,function(re){return re})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return Be.Activity=E,Be.Children=Ve,Be.Component=G,Be.Fragment=t,Be.Profiler=s,Be.PureComponent=K,Be.StrictMode=a,Be.Suspense=p,Be.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Be.__COMPILER_RUNTIME={__proto__:null,c:function(U){return S.H.useMemoCache(U)}},Be.cache=function(U){return function(){return U.apply(null,arguments)}},Be.cacheSignal=function(){return null},Be.cloneElement=function(U,re,he){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ve=j({},U.props),Re=U.key;if(re!=null)for(Oe in re.key!==void 0&&(Re=""+re.key),re)!A.call(re,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&re.ref===void 0||(ve[Oe]=re[Oe]);var Oe=arguments.length-2;if(Oe===1)ve.children=he;else if(1<Oe){for(var Ye=Array(Oe),St=0;St<Oe;St++)Ye[St]=arguments[St+2];ve.children=Ye}return w(U.type,Re,ve)},Be.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},Be.createElement=function(U,re,he){var ve,Re={},Oe=null;if(re!=null)for(ve in re.key!==void 0&&(Oe=""+re.key),re)A.call(re,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Re[ve]=re[ve]);var Ye=arguments.length-2;if(Ye===1)Re.children=he;else if(1<Ye){for(var St=Array(Ye),At=0;At<Ye;At++)St[At]=arguments[At+2];Re.children=St}if(U&&U.defaultProps)for(ve in Ye=U.defaultProps,Ye)Re[ve]===void 0&&(Re[ve]=Ye[ve]);return w(U,Oe,Re)},Be.createRef=function(){return{current:null}},Be.forwardRef=function(U){return{$$typeof:d,render:U}},Be.isValidElement=N,Be.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ge}},Be.memo=function(U,re){return{$$typeof:g,type:U,compare:re===void 0?null:re}},Be.startTransition=function(U){var re=S.T,he={};S.T=he;try{var ve=U(),Re=S.S;Re!==null&&Re(he,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Y,De)}catch(Oe){De(Oe)}finally{re!==null&&he.types!==null&&(re.types=he.types),S.T=re}},Be.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Be.use=function(U){return S.H.use(U)},Be.useActionState=function(U,re,he){return S.H.useActionState(U,re,he)},Be.useCallback=function(U,re){return S.H.useCallback(U,re)},Be.useContext=function(U){return S.H.useContext(U)},Be.useDebugValue=function(){},Be.useDeferredValue=function(U,re){return S.H.useDeferredValue(U,re)},Be.useEffect=function(U,re){return S.H.useEffect(U,re)},Be.useEffectEvent=function(U){return S.H.useEffectEvent(U)},Be.useId=function(){return S.H.useId()},Be.useImperativeHandle=function(U,re,he){return S.H.useImperativeHandle(U,re,he)},Be.useInsertionEffect=function(U,re){return S.H.useInsertionEffect(U,re)},Be.useLayoutEffect=function(U,re){return S.H.useLayoutEffect(U,re)},Be.useMemo=function(U,re){return S.H.useMemo(U,re)},Be.useOptimistic=function(U,re){return S.H.useOptimistic(U,re)},Be.useReducer=function(U,re,he){return S.H.useReducer(U,re,he)},Be.useRef=function(U){return S.H.useRef(U)},Be.useState=function(U){return S.H.useState(U)},Be.useSyncExternalStore=function(U,re,he){return S.H.useSyncExternalStore(U,re,he)},Be.useTransition=function(){return S.H.useTransition()},Be.version="19.2.4",Be}var zT;function ld(){return zT||(zT=1,jp.exports=MC()),jp.exports}var z=ld();const vb=yb(z),VC=NC({__proto__:null,default:vb},[z]);var zp={exports:{}},Du={},Bp={exports:{}},Fp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function PC(){return BT||(BT=1,(function(n){function e(Q,ce){var ge=Q.length;Q.push(ce);e:for(;0<ge;){var De=ge-1>>>1,Ve=Q[De];if(0<s(Ve,ce))Q[De]=ce,Q[ge]=Ve,ge=De;else break e}}function t(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var ce=Q[0],ge=Q.pop();if(ge!==ce){Q[0]=ge;e:for(var De=0,Ve=Q.length,U=Ve>>>1;De<U;){var re=2*(De+1)-1,he=Q[re],ve=re+1,Re=Q[ve];if(0>s(he,ge))ve<Ve&&0>s(Re,he)?(Q[De]=Re,Q[ve]=ge,De=ve):(Q[De]=he,Q[re]=ge,De=re);else if(ve<Ve&&0>s(Re,ge))Q[De]=Re,Q[ve]=ge,De=ve;else break e}}return ce}function s(Q,ce){var ge=Q.sortIndex-ce.sortIndex;return ge!==0?ge:Q.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,b=3,C=!1,V=!1,j=!1,L=!1,G=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ee(Q){for(var ce=t(g);ce!==null;){if(ce.callback===null)a(g);else if(ce.startTime<=Q)a(g),ce.sortIndex=ce.expirationTime,e(p,ce);else break;ce=t(g)}}function ae(Q){if(j=!1,ee(Q),!V)if(t(p)!==null)V=!0,Y||(Y=!0,M());else{var ce=t(g);ce!==null&&ke(ae,ce.startTime-Q)}}var Y=!1,S=-1,A=5,w=-1;function I(){return L?!0:!(n.unstable_now()-w<A)}function N(){if(L=!1,Y){var Q=n.unstable_now();w=Q;var ce=!0;try{e:{V=!1,j&&(j=!1,F(S),S=-1),C=!0;var ge=b;try{t:{for(ee(Q),E=t(p);E!==null&&!(E.expirationTime>Q&&I());){var De=E.callback;if(typeof De=="function"){E.callback=null,b=E.priorityLevel;var Ve=De(E.expirationTime<=Q);if(Q=n.unstable_now(),typeof Ve=="function"){E.callback=Ve,ee(Q),ce=!0;break t}E===t(p)&&a(p),ee(Q)}else a(p);E=t(p)}if(E!==null)ce=!0;else{var U=t(g);U!==null&&ke(ae,U.startTime-Q),ce=!1}}break e}finally{E=null,b=ge,C=!1}ce=void 0}}finally{ce?M():Y=!1}}}var M;if(typeof K=="function")M=function(){K(N)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ae=x.port2;x.port1.onmessage=N,M=function(){Ae.postMessage(null)}}else M=function(){G(N,0)};function ke(Q,ce){S=G(function(){Q(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var ce=3;break;default:ce=b}var ge=b;b=ce;try{return Q()}finally{b=ge}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ge=b;b=Q;try{return ce()}finally{b=ge}},n.unstable_scheduleCallback=function(Q,ce,ge){var De=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?De+ge:De):ge=De,Q){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=ge+Ve,Q={id:v++,callback:ce,priorityLevel:Q,startTime:ge,expirationTime:Ve,sortIndex:-1},ge>De?(Q.sortIndex=ge,e(g,Q),t(p)===null&&Q===t(g)&&(j?(F(S),S=-1):j=!0,ke(ae,ge-De))):(Q.sortIndex=Ve,e(p,Q),V||C||(V=!0,Y||(Y=!0,M()))),Q},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(Q){var ce=b;return function(){var ge=b;b=ce;try{return Q.apply(this,arguments)}finally{b=ge}}}})(Fp)),Fp}var FT;function LC(){return FT||(FT=1,Bp.exports=PC()),Bp.exports}var Hp={exports:{}},Cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT;function kC(){if(HT)return Cn;HT=1;var n=ld();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Cn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},Cn.flushSync=function(p){var g=c.T,v=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=v,a.d.f()}},Cn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Cn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Cn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:b,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Cn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Cn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Cn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Cn.requestFormReset=function(p){a.d.r(p)},Cn.unstable_batchedUpdates=function(p,g){return p(g)},Cn.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},Cn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Cn.version="19.2.4",Cn}var qT;function _b(){if(qT)return Hp.exports;qT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hp.exports=kC(),Hp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function UC(){if(GT)return Du;GT=1;var n=LC(),e=ld(),t=_b();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var h=o.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===o)return p(h),r;if(m===u)return p(h),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=h,u=m;else{for(var _=!1,R=h.child;R;){if(R===o){_=!0,o=h,u=m;break}if(R===u){_=!0,u=h,o=m;break}R=R.sibling}if(!_){for(R=m.child;R;){if(R===o){_=!0,o=m,u=h;break}if(R===u){_=!0,u=m,o=h;break}R=R.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function Ae(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case j:return"Fragment";case G:return"Profiler";case L:return"StrictMode";case ae:return"Suspense";case Y:return"SuspenseList";case w:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case V:return"Portal";case K:return r.displayName||"Context";case F:return(r._context.displayName||"Context")+".Consumer";case ee:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return i=r.displayName||null,i!==null?i:Ae(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return Ae(r(i))}catch{}}return null}var ke=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},De=[],Ve=-1;function U(r){return{current:r}}function re(r){0>Ve||(r.current=De[Ve],De[Ve]=null,Ve--)}function he(r,i){Ve++,De[Ve]=r.current,r.current=i}var ve=U(null),Re=U(null),Oe=U(null),Ye=U(null);function St(r,i){switch(he(Oe,i),he(Re,r),he(ve,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?sT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=sT(i),r=oT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(ve),he(ve,r)}function At(){re(ve),re(Re),re(Oe)}function Ii(r){r.memoizedState!==null&&he(Ye,r);var i=ve.current,o=oT(i,r.type);i!==o&&(he(Re,r),he(ve,o))}function fa(r){Re.current===r&&(re(ve),re(Re)),Ye.current===r&&(re(Ye),wu._currentValue=ge)}var Ut,Jn;function Zn(r){if(Ut===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Ut=i&&i[1]||"",Jn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ut+r+Jn}var gs=!1;function Mn(r,i){if(!r||gs)return"";gs=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(ne){var Z=ne}Reflect.construct(r,[],le)}else{try{le.call()}catch(ne){Z=ne}r.call(le.prototype)}}else{try{throw Error()}catch(ne){Z=ne}(le=r())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(ne){if(ne&&Z&&typeof ne.stack=="string")return[ne.stack,Z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],R=m[1];if(_&&R){var k=_.split(`
`),W=R.split(`
`);for(h=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;h<W.length&&!W[h].includes("DetermineComponentFrameRoot");)h++;if(u===k.length||h===W.length)for(u=k.length-1,h=W.length-1;1<=u&&0<=h&&k[u]!==W[h];)h--;for(;1<=u&&0<=h;u--,h--)if(k[u]!==W[h]){if(u!==1||h!==1)do if(u--,h--,0>h||k[u]!==W[h]){var ie=`
`+k[u].replace(" at new "," at ");return r.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",r.displayName)),ie}while(1<=u&&0<=h);break}}}finally{gs=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Zn(o):""}function ys(r,i){switch(r.tag){case 26:case 27:case 5:return Zn(r.type);case 16:return Zn("Lazy");case 13:return r.child!==i&&i!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return Mn(r.type,!1);case 11:return Mn(r.type.render,!1);case 1:return Mn(r.type,!0);case 31:return Zn("Activity");default:return""}}function vs(r){try{var i="",o=null;do i+=ys(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var jt=Object.prototype.hasOwnProperty,$t=n.unstable_scheduleCallback,ni=n.unstable_cancelCallback,Pl=n.unstable_shouldYield,fo=n.unstable_requestPaint,zt=n.unstable_now,er=n.unstable_getCurrentPriorityLevel,ha=n.unstable_ImmediatePriority,Di=n.unstable_UserBlockingPriority,fn=n.unstable_NormalPriority,tr=n.unstable_LowPriority,_s=n.unstable_IdlePriority,ho=n.log,da=n.unstable_setDisableYieldValue,nr=null,bt=null;function Vn(r){if(typeof ho=="function"&&da(r),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(nr,r)}catch{}}var Vt=Math.clz32?Math.clz32:Ts,Es=Math.log,ma=Math.LN2;function Ts(r){return r>>>=0,r===0?32:31-(Es(r)/ma|0)|0}var Pn=256,ri=262144,Pt=4194304;function Tr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function rr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var R=u&134217727;return R!==0?(u=R&~m,u!==0?h=Tr(u):(_&=R,_!==0?h=Tr(_):o||(o=R&~r,o!==0&&(h=Tr(o))))):(R=u&~m,R!==0?h=Tr(R):_!==0?h=Tr(_):o||(o=u&~r,o!==0&&(h=Tr(o)))),h===0?0:i!==0&&i!==h&&(i&m)===0&&(m=h&-h,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:h}function ir(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function mo(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ni(){var r=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),r}function Ln(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function ii(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ll(r,i,o,u,h,m){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,k=r.expirationTimes,W=r.hiddenUpdates;for(o=_&~o;0<o;){var ie=31-Vt(o),le=1<<ie;R[ie]=0,k[ie]=-1;var Z=W[ie];if(Z!==null)for(W[ie]=null,ie=0;ie<Z.length;ie++){var ne=Z[ie];ne!==null&&(ne.lane&=-536870913)}o&=~le}u!==0&&xi(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(_&~i))}function xi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Vt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function P(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Vt(o),h=1<<u;h&i|r[u]&i&&(r[u]|=i),o&=~h}}function H(r,i){var o=i&-i;return o=(o&42)!==0?1:J(o),(o&(r.suspendedLanes|i))!==0?0:o}function J(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function fe(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function de(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:NT(r.type))}function Ee(r,i){var o=ce.p;try{return ce.p=r,i()}finally{ce.p=o}}var be=Math.random().toString(36).slice(2),me="__reactFiber$"+be,ye="__reactProps$"+be,Se="__reactContainer$"+be,Pe="__reactEvents$"+be,Ie="__reactListeners$"+be,je="__reactHandles$"+be,Qe="__reactResources$"+be,gt="__reactMarker$"+be;function Nt(r){delete r[me],delete r[ye],delete r[Pe],delete r[Ie],delete r[je]}function Rt(r){var i=r[me];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Se]||o[me]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=mT(r);r!==null;){if(o=r[me])return o;r=mT(r)}return i}r=o,o=r.parentNode}return null}function Ge(r){if(r=r[me]||r[Se]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function Ct(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function hn(r){var i=r[Qe];return i||(i=r[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function It(r){r[gt]=!0}var Bn=new Set,An={};function Fn(r,i){Rn(r,i),Rn(r+"Capture",i)}function Rn(r,i){for(An[r]=i,r=0;r<i.length;r++)Bn.add(i[r])}var ar=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ai={},si={};function We(r){return jt.call(si,r)?!0:jt.call(ai,r)?!1:ar.test(r)?si[r]=!0:(ai[r]=!0,!1)}function Bt(r,i,o){if(We(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function Zt(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function yt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function Ke(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function sr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function pa(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function ut(r){if(!r._valueTracker){var i=sr(r)?"checked":"value";r._valueTracker=pa(r,i,""+r[i])}}function Ss(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=sr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function oi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var bs=/[\n"\\]/g;function Hn(r){return r.replace(bs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function po(r,i,o,u,h,m,_,R){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+Ke(i)):r.value!==""+Ke(i)&&(r.value=""+Ke(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?kl(r,_,Ke(i)):o!=null?kl(r,_,Ke(o)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+Ke(R):r.removeAttribute("name")}function Nc(r,i,o,u,h,m,_,R){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){ut(r);return}o=o!=null?""+Ke(o):"",i=i!=null?""+Ke(i):o,R||i===r.value||(r.value=i),r.defaultValue=i}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=R?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),ut(r)}function kl(r,i,o){i==="number"&&oi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ga(r,i,o,u){if(r=r.options,i){i={};for(var h=0;h<o.length;h++)i["$"+o[h]]=!0;for(o=0;o<r.length;o++)h=i.hasOwnProperty("$"+r[o].value),r[o].selected!==h&&(r[o].selected=h),h&&u&&(r[o].defaultSelected=!0)}else{for(o=""+Ke(o),i=null,h=0;h<r.length;h++){if(r[h].value===o){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}i!==null||r[h].disabled||(i=r[h])}i!==null&&(i.selected=!0)}}function xc(r,i,o){if(i!=null&&(i=""+Ke(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+Ke(o):""}function ya(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(ke(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=Ke(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),ut(r)}function qn(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ul(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Oc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function jl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in i)u=i[h],i.hasOwnProperty(h)&&o[h]!==u&&Ul(r,h,u)}else for(var m in i)i.hasOwnProperty(m)&&Ul(r,m,i[m])}function go(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yo(r){return va.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function zr(){}var zl=null;function Sr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _a=null,li=null;function ws(r){var i=Ge(r);if(i&&(r=i.stateNode)){var o=r[ye]||null;e:switch(r=i.stateNode,i.type){case"input":if(po(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Hn(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var h=u[ye]||null;if(!h)throw Error(a(90));po(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&Ss(u)}break e;case"textarea":xc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ga(r,!!o.multiple,i,!1)}}}var vo=!1;function Ea(r,i,o){if(vo)return r(i,o);vo=!0;try{var u=r(i);return u}finally{if(vo=!1,(_a!==null||li!==null)&&(Cf(),_a&&(i=_a,r=li,li=_a=null,ws(i),r)))for(i=0;i<r.length;i++)ws(r[i])}}function Br(r,i){var o=r.stateNode;if(o===null)return null;var u=o[ye]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),As=!1;if(br)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){As=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{As=!1}var ui=null,Bl=null,Rs=null;function Fl(){if(Rs)return Rs;var r,i=Bl,o=i.length,u,h="value"in ui?ui.value:ui.textContent,m=h.length;for(r=0;r<o&&i[r]===h[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===h[m-u];u++);return Rs=h.slice(r,1<u?1-u:void 0)}function Cs(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Oi(){return!0}function Fr(){return!1}function pn(r){function i(o,u,h,m,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Oi:Fr,this.isPropagationStopped=Fr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),i}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ci=pn(Mi),Ta=E({},Mi,{view:0,detail:0}),Hl=pn(Ta),Sa,_o,fi,Eo=E({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ba,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==fi&&(fi&&r.type==="mousemove"?(Sa=r.screenX-fi.screenX,_o=r.screenY-fi.screenY):_o=Sa=0,fi=r),Sa)},movementY:function(r){return"movementY"in r?r.movementY:_o}}),ql=pn(Eo),Is=E({},Eo,{dataTransfer:0}),Vc=pn(Is),Pc=E({},Ta,{relatedTarget:0}),Ds=pn(Pc),Gl=E({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),Lc=pn(Gl),To=E({},Mi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),kc=pn(To),Uc=E({},Mi,{data:0}),hi=pn(Uc),jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Bc[r])?!!i[r]:!1}function ba(){return Fc}var kn=E({},Ta,{key:function(r){if(r.key){var i=jc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Cs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?zc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ba,charCode:function(r){return r.type==="keypress"?Cs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Hc=pn(kn),qc=E({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vi=pn(qc),f=E({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ba}),y=pn(f),T=E({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=pn(T),$=E({},Eo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),te=pn($),pe=E({},Mi,{newState:0,oldState:0}),He=pn(pe),Yt=[9,13,27,32],ct=br&&"CompositionEvent"in window,Lt=null;br&&"documentMode"in document&&(Lt=document.documentMode);var wr=br&&"TextEvent"in window&&!Lt,di=br&&(!ct||Lt&&8<Lt&&11>=Lt),Hr=" ",qr=!1;function Ns(r,i){switch(r){case"keyup":return Yt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function So(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var bo=!1;function JR(r,i){switch(r){case"compositionend":return So(i);case"keypress":return i.which!==32?null:(qr=!0,Hr);case"textInput":return r=i.data,r===Hr&&qr?null:r;default:return null}}function ZR(r,i){if(bo)return r==="compositionend"||!ct&&Ns(r,i)?(r=Fl(),Rs=Bl=ui=null,bo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return di&&i.locale!=="ko"?null:i.data;default:return null}}var e1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!e1[r.type]:i==="textarea"}function vv(r,i,o,u){_a?li?li.push(u):li=[u]:_a=u,i=Vf(i,"onChange"),0<i.length&&(o=new ci("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Kl=null,$l=null;function t1(r){eT(r,0)}function Gc(r){var i=Ct(r);if(Ss(i))return r}function _v(r,i){if(r==="change")return i}var Ev=!1;if(br){var qd;if(br){var Gd="oninput"in document;if(!Gd){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),Gd=typeof Tv.oninput=="function"}qd=Gd}else qd=!1;Ev=qd&&(!document.documentMode||9<document.documentMode)}function Sv(){Kl&&(Kl.detachEvent("onpropertychange",bv),$l=Kl=null)}function bv(r){if(r.propertyName==="value"&&Gc($l)){var i=[];vv(i,$l,r,Sr(r)),Ea(t1,i)}}function n1(r,i,o){r==="focusin"?(Sv(),Kl=i,$l=o,Kl.attachEvent("onpropertychange",bv)):r==="focusout"&&Sv()}function r1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Gc($l)}function i1(r,i){if(r==="click")return Gc(i)}function a1(r,i){if(r==="input"||r==="change")return Gc(i)}function s1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var or=typeof Object.is=="function"?Object.is:s1;function Yl(r,i){if(or(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!jt.call(i,h)||!or(r[h],i[h]))return!1}return!0}function wv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Av(r,i){var o=wv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=wv(o)}}function Rv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Rv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Cv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=oi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=oi(r.document)}return i}function Kd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var o1=br&&"documentMode"in document&&11>=document.documentMode,wo=null,$d=null,Ql=null,Yd=!1;function Iv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Yd||wo==null||wo!==oi(u)||(u=wo,"selectionStart"in u&&Kd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ql&&Yl(Ql,u)||(Ql=u,u=Vf($d,"onSelect"),0<u.length&&(i=new ci("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=wo)))}function xs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Ao={animationend:xs("Animation","AnimationEnd"),animationiteration:xs("Animation","AnimationIteration"),animationstart:xs("Animation","AnimationStart"),transitionrun:xs("Transition","TransitionRun"),transitionstart:xs("Transition","TransitionStart"),transitioncancel:xs("Transition","TransitionCancel"),transitionend:xs("Transition","TransitionEnd")},Qd={},Dv={};br&&(Dv=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Os(r){if(Qd[r])return Qd[r];if(!Ao[r])return r;var i=Ao[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Dv)return Qd[r]=i[o];return r}var Nv=Os("animationend"),xv=Os("animationiteration"),Ov=Os("animationstart"),l1=Os("transitionrun"),u1=Os("transitionstart"),c1=Os("transitioncancel"),Mv=Os("transitionend"),Vv=new Map,Xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xd.push("scrollEnd");function Gr(r,i){Vv.set(r,i),Fn(i,[r])}var Kc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ar=[],Ro=0,Wd=0;function $c(){for(var r=Ro,i=Wd=Ro=0;i<r;){var o=Ar[i];Ar[i++]=null;var u=Ar[i];Ar[i++]=null;var h=Ar[i];Ar[i++]=null;var m=Ar[i];if(Ar[i++]=null,u!==null&&h!==null){var _=u.pending;_===null?h.next=h:(h.next=_.next,_.next=h),u.pending=h}m!==0&&Pv(o,h,m)}}function Yc(r,i,o,u){Ar[Ro++]=r,Ar[Ro++]=i,Ar[Ro++]=o,Ar[Ro++]=u,Wd|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Jd(r,i,o,u){return Yc(r,i,o,u),Qc(r)}function Ms(r,i){return Yc(r,null,null,i),Qc(r)}function Pv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var h=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&i!==null&&(h=31-Vt(o),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[i]:u.push(i),i.lane=o|536870912),m):null}function Qc(r){if(50<yu)throw yu=0,op=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Co={};function f1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(r,i,o,u){return new f1(r,i,o,u)}function Zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Pi(r,i){var o=r.alternate;return o===null?(o=lr(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Lv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function Xc(r,i,o,u,h,m){var _=0;if(u=r,typeof r=="function")Zd(r)&&(_=1);else if(typeof r=="string")_=gC(r,o,ve.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case w:return r=lr(31,o,i,h),r.elementType=w,r.lanes=m,r;case j:return Vs(o.children,h,m,i);case L:_=8,h|=24;break;case G:return r=lr(12,o,i,h|2),r.elementType=G,r.lanes=m,r;case ae:return r=lr(13,o,i,h),r.elementType=ae,r.lanes=m,r;case Y:return r=lr(19,o,i,h),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case K:_=10;break e;case F:_=9;break e;case ee:_=11;break e;case S:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=lr(_,o,i,h),i.elementType=r,i.type=u,i.lanes=m,i}function Vs(r,i,o,u){return r=lr(7,r,u,i),r.lanes=o,r}function em(r,i,o){return r=lr(6,r,null,i),r.lanes=o,r}function kv(r){var i=lr(18,null,null,0);return i.stateNode=r,i}function tm(r,i,o){return i=lr(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Uv=new WeakMap;function Rr(r,i){if(typeof r=="object"&&r!==null){var o=Uv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:vs(i)},Uv.set(r,i),i)}return{value:r,source:i,stack:vs(i)}}var Io=[],Do=0,Wc=null,Xl=0,Cr=[],Ir=0,wa=null,mi=1,pi="";function Li(r,i){Io[Do++]=Xl,Io[Do++]=Wc,Wc=r,Xl=i}function jv(r,i,o){Cr[Ir++]=mi,Cr[Ir++]=pi,Cr[Ir++]=wa,wa=r;var u=mi;r=pi;var h=32-Vt(u)-1;u&=~(1<<h),o+=1;var m=32-Vt(i)+h;if(30<m){var _=h-h%5;m=(u&(1<<_)-1).toString(32),u>>=_,h-=_,mi=1<<32-Vt(i)+h|o<<h|u,pi=m+r}else mi=1<<m|o<<h|u,pi=r}function nm(r){r.return!==null&&(Li(r,1),jv(r,1,0))}function rm(r){for(;r===Wc;)Wc=Io[--Do],Io[Do]=null,Xl=Io[--Do],Io[Do]=null;for(;r===wa;)wa=Cr[--Ir],Cr[Ir]=null,pi=Cr[--Ir],Cr[Ir]=null,mi=Cr[--Ir],Cr[Ir]=null}function zv(r,i){Cr[Ir++]=mi,Cr[Ir++]=pi,Cr[Ir++]=wa,mi=i.id,pi=i.overflow,wa=r}var gn=null,xt=null,at=!1,Aa=null,Dr=!1,im=Error(a(519));function Ra(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wl(Rr(i,r)),im}function Bv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[me]=r,i[ye]=u,o){case"dialog":Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":case"embed":Ze("load",i);break;case"video":case"audio":for(o=0;o<_u.length;o++)Ze(_u[o],i);break;case"source":Ze("error",i);break;case"img":case"image":case"link":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"input":Ze("invalid",i),Nc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ze("invalid",i);break;case"textarea":Ze("invalid",i),ya(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||iT(i.textContent,o)?(u.popover!=null&&(Ze("beforetoggle",i),Ze("toggle",i)),u.onScroll!=null&&Ze("scroll",i),u.onScrollEnd!=null&&Ze("scrollend",i),u.onClick!=null&&(i.onclick=zr),i=!0):i=!1,i||Ra(r,!0)}function Fv(r){for(gn=r.return;gn;)switch(gn.tag){case 5:case 31:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:gn=gn.return}}function No(r){if(r!==gn)return!1;if(!at)return Fv(r),at=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Sp(r.type,r.memoizedProps)),o=!o),o&&xt&&Ra(r),Fv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));xt=dT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));xt=dT(r)}else i===27?(i=xt,za(r.type)?(r=Cp,Cp=null,xt=r):xt=i):xt=gn?xr(r.stateNode.nextSibling):null;return!0}function Ps(){xt=gn=null,at=!1}function am(){var r=Aa;return r!==null&&(Yn===null?Yn=r:Yn.push.apply(Yn,r),Aa=null),r}function Wl(r){Aa===null?Aa=[r]:Aa.push(r)}var sm=U(null),Ls=null,ki=null;function Ca(r,i,o){he(sm,i._currentValue),i._currentValue=o}function Ui(r){r._currentValue=sm.current,re(sm)}function om(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function lm(r,i,o,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var _=h.child;m=m.firstContext;e:for(;m!==null;){var R=m;m=h;for(var k=0;k<i.length;k++)if(R.context===i[k]){m.lanes|=o,R=m.alternate,R!==null&&(R.lanes|=o),om(m.return,o,r),u||(_=null);break e}m=R.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(a(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),om(_,o,r),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===r){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function xo(r,i,o,u){r=null;for(var h=i,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var R=h.type;or(h.pendingProps.value,_.value)||(r!==null?r.push(R):r=[R])}}else if(h===Ye.current){if(_=h.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(wu):r=[wu])}h=h.return}r!==null&&lm(i,r,o,u),i.flags|=262144}function Jc(r){for(r=r.firstContext;r!==null;){if(!or(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ks(r){Ls=r,ki=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function yn(r){return Hv(Ls,r)}function Zc(r,i){return Ls===null&&ks(r),Hv(r,i)}function Hv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},ki===null){if(r===null)throw Error(a(308));ki=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else ki=ki.next=i;return o}var h1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},d1=n.unstable_scheduleCallback,m1=n.unstable_NormalPriority,en={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function um(){return{controller:new h1,data:new Map,refCount:0}}function Jl(r){r.refCount--,r.refCount===0&&d1(m1,function(){r.controller.abort()})}var Zl=null,cm=0,Oo=0,Mo=null;function p1(r,i){if(Zl===null){var o=Zl=[];cm=0,Oo=dp(),Mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return cm++,i.then(qv,qv),i}function qv(){if(--cm===0&&Zl!==null){Mo!==null&&(Mo.status="fulfilled");var r=Zl;Zl=null,Oo=0,Mo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function g1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var h=0;h<o.length;h++)(0,o[h])(i)},function(h){for(u.status="rejected",u.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),u}var Gv=Q.S;Q.S=function(r,i){IE=zt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&p1(r,i),Gv!==null&&Gv(r,i)};var Us=U(null);function fm(){var r=Us.current;return r!==null?r:wt.pooledCache}function ef(r,i){i===null?he(Us,Us.current):he(Us,i.pool)}function Kv(){var r=fm();return r===null?null:{parent:en._currentValue,pool:r}}var Vo=Error(a(460)),hm=Error(a(474)),tf=Error(a(542)),nf={then:function(){}};function $v(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Yv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(zr,zr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Xv(r),r;default:if(typeof i.status=="string")i.then(zr,zr);else{if(r=wt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=u}},function(u){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,Xv(r),r}throw zs=i,Vo}}function js(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(zs=o,Vo):o}}var zs=null;function Qv(){if(zs===null)throw Error(a(459));var r=zs;return zs=null,r}function Xv(r){if(r===Vo||r===tf)throw Error(a(483))}var Po=null,eu=0;function rf(r){var i=eu;return eu+=1,Po===null&&(Po=[]),Yv(Po,r,i)}function tu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function af(r,i){throw i.$$typeof===b?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function Wv(r){function i(q,B){if(r){var X=q.deletions;X===null?(q.deletions=[B],q.flags|=16):X.push(B)}}function o(q,B){if(!r)return null;for(;B!==null;)i(q,B),B=B.sibling;return null}function u(q){for(var B=new Map;q!==null;)q.key!==null?B.set(q.key,q):B.set(q.index,q),q=q.sibling;return B}function h(q,B){return q=Pi(q,B),q.index=0,q.sibling=null,q}function m(q,B,X){return q.index=X,r?(X=q.alternate,X!==null?(X=X.index,X<B?(q.flags|=67108866,B):X):(q.flags|=67108866,B)):(q.flags|=1048576,B)}function _(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function R(q,B,X,se){return B===null||B.tag!==6?(B=em(X,q.mode,se),B.return=q,B):(B=h(B,X),B.return=q,B)}function k(q,B,X,se){var Ne=X.type;return Ne===j?ie(q,B,X.props.children,se,X.key):B!==null&&(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===A&&js(Ne)===B.type)?(B=h(B,X.props),tu(B,X),B.return=q,B):(B=Xc(X.type,X.key,X.props,null,q.mode,se),tu(B,X),B.return=q,B)}function W(q,B,X,se){return B===null||B.tag!==4||B.stateNode.containerInfo!==X.containerInfo||B.stateNode.implementation!==X.implementation?(B=tm(X,q.mode,se),B.return=q,B):(B=h(B,X.children||[]),B.return=q,B)}function ie(q,B,X,se,Ne){return B===null||B.tag!==7?(B=Vs(X,q.mode,se,Ne),B.return=q,B):(B=h(B,X),B.return=q,B)}function le(q,B,X){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=em(""+B,q.mode,X),B.return=q,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case C:return X=Xc(B.type,B.key,B.props,null,q.mode,X),tu(X,B),X.return=q,X;case V:return B=tm(B,q.mode,X),B.return=q,B;case A:return B=js(B),le(q,B,X)}if(ke(B)||M(B))return B=Vs(B,q.mode,X,null),B.return=q,B;if(typeof B.then=="function")return le(q,rf(B),X);if(B.$$typeof===K)return le(q,Zc(q,B),X);af(q,B)}return null}function Z(q,B,X,se){var Ne=B!==null?B.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ne!==null?null:R(q,B,""+X,se);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case C:return X.key===Ne?k(q,B,X,se):null;case V:return X.key===Ne?W(q,B,X,se):null;case A:return X=js(X),Z(q,B,X,se)}if(ke(X)||M(X))return Ne!==null?null:ie(q,B,X,se,null);if(typeof X.then=="function")return Z(q,B,rf(X),se);if(X.$$typeof===K)return Z(q,B,Zc(q,X),se);af(q,X)}return null}function ne(q,B,X,se,Ne){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return q=q.get(X)||null,R(B,q,""+se,Ne);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case C:return q=q.get(se.key===null?X:se.key)||null,k(B,q,se,Ne);case V:return q=q.get(se.key===null?X:se.key)||null,W(B,q,se,Ne);case A:return se=js(se),ne(q,B,X,se,Ne)}if(ke(se)||M(se))return q=q.get(X)||null,ie(B,q,se,Ne,null);if(typeof se.then=="function")return ne(q,B,X,rf(se),Ne);if(se.$$typeof===K)return ne(q,B,X,Zc(B,se),Ne);af(B,se)}return null}function we(q,B,X,se){for(var Ne=null,ot=null,Ce=B,$e=B=0,tt=null;Ce!==null&&$e<X.length;$e++){Ce.index>$e?(tt=Ce,Ce=null):tt=Ce.sibling;var lt=Z(q,Ce,X[$e],se);if(lt===null){Ce===null&&(Ce=tt);break}r&&Ce&&lt.alternate===null&&i(q,Ce),B=m(lt,B,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt,Ce=tt}if($e===X.length)return o(q,Ce),at&&Li(q,$e),Ne;if(Ce===null){for(;$e<X.length;$e++)Ce=le(q,X[$e],se),Ce!==null&&(B=m(Ce,B,$e),ot===null?Ne=Ce:ot.sibling=Ce,ot=Ce);return at&&Li(q,$e),Ne}for(Ce=u(Ce);$e<X.length;$e++)tt=ne(Ce,q,$e,X[$e],se),tt!==null&&(r&&tt.alternate!==null&&Ce.delete(tt.key===null?$e:tt.key),B=m(tt,B,$e),ot===null?Ne=tt:ot.sibling=tt,ot=tt);return r&&Ce.forEach(function(Ga){return i(q,Ga)}),at&&Li(q,$e),Ne}function Me(q,B,X,se){if(X==null)throw Error(a(151));for(var Ne=null,ot=null,Ce=B,$e=B=0,tt=null,lt=X.next();Ce!==null&&!lt.done;$e++,lt=X.next()){Ce.index>$e?(tt=Ce,Ce=null):tt=Ce.sibling;var Ga=Z(q,Ce,lt.value,se);if(Ga===null){Ce===null&&(Ce=tt);break}r&&Ce&&Ga.alternate===null&&i(q,Ce),B=m(Ga,B,$e),ot===null?Ne=Ga:ot.sibling=Ga,ot=Ga,Ce=tt}if(lt.done)return o(q,Ce),at&&Li(q,$e),Ne;if(Ce===null){for(;!lt.done;$e++,lt=X.next())lt=le(q,lt.value,se),lt!==null&&(B=m(lt,B,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt);return at&&Li(q,$e),Ne}for(Ce=u(Ce);!lt.done;$e++,lt=X.next())lt=ne(Ce,q,$e,lt.value,se),lt!==null&&(r&&lt.alternate!==null&&Ce.delete(lt.key===null?$e:lt.key),B=m(lt,B,$e),ot===null?Ne=lt:ot.sibling=lt,ot=lt);return r&&Ce.forEach(function(CC){return i(q,CC)}),at&&Li(q,$e),Ne}function Tt(q,B,X,se){if(typeof X=="object"&&X!==null&&X.type===j&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case C:e:{for(var Ne=X.key;B!==null;){if(B.key===Ne){if(Ne=X.type,Ne===j){if(B.tag===7){o(q,B.sibling),se=h(B,X.props.children),se.return=q,q=se;break e}}else if(B.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===A&&js(Ne)===B.type){o(q,B.sibling),se=h(B,X.props),tu(se,X),se.return=q,q=se;break e}o(q,B);break}else i(q,B);B=B.sibling}X.type===j?(se=Vs(X.props.children,q.mode,se,X.key),se.return=q,q=se):(se=Xc(X.type,X.key,X.props,null,q.mode,se),tu(se,X),se.return=q,q=se)}return _(q);case V:e:{for(Ne=X.key;B!==null;){if(B.key===Ne)if(B.tag===4&&B.stateNode.containerInfo===X.containerInfo&&B.stateNode.implementation===X.implementation){o(q,B.sibling),se=h(B,X.children||[]),se.return=q,q=se;break e}else{o(q,B);break}else i(q,B);B=B.sibling}se=tm(X,q.mode,se),se.return=q,q=se}return _(q);case A:return X=js(X),Tt(q,B,X,se)}if(ke(X))return we(q,B,X,se);if(M(X)){if(Ne=M(X),typeof Ne!="function")throw Error(a(150));return X=Ne.call(X),Me(q,B,X,se)}if(typeof X.then=="function")return Tt(q,B,rf(X),se);if(X.$$typeof===K)return Tt(q,B,Zc(q,X),se);af(q,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,B!==null&&B.tag===6?(o(q,B.sibling),se=h(B,X),se.return=q,q=se):(o(q,B),se=em(X,q.mode,se),se.return=q,q=se),_(q)):o(q,B)}return function(q,B,X,se){try{eu=0;var Ne=Tt(q,B,X,se);return Po=null,Ne}catch(Ce){if(Ce===Vo||Ce===tf)throw Ce;var ot=lr(29,Ce,null,q.mode);return ot.lanes=se,ot.return=q,ot}finally{}}}var Bs=Wv(!0),Jv=Wv(!1),Ia=!1;function dm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Da(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Na(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(ft&2)!==0){var h=u.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),u.pending=i,i=Qc(r),Pv(r,null,o),i}return Yc(r,u,i,o),Qc(r)}function nu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,P(r,o)}}function pm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?h=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?h=m=i:m=m.next=i}else h=m=i;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var gm=!1;function ru(){if(gm){var r=Mo;if(r!==null)throw r}}function iu(r,i,o,u){gm=!1;var h=r.updateQueue;Ia=!1;var m=h.firstBaseUpdate,_=h.lastBaseUpdate,R=h.shared.pending;if(R!==null){h.shared.pending=null;var k=R,W=k.next;k.next=null,_===null?m=W:_.next=W,_=k;var ie=r.alternate;ie!==null&&(ie=ie.updateQueue,R=ie.lastBaseUpdate,R!==_&&(R===null?ie.firstBaseUpdate=W:R.next=W,ie.lastBaseUpdate=k))}if(m!==null){var le=h.baseState;_=0,ie=W=k=null,R=m;do{var Z=R.lane&-536870913,ne=Z!==R.lane;if(ne?(et&Z)===Z:(u&Z)===Z){Z!==0&&Z===Oo&&(gm=!0),ie!==null&&(ie=ie.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var we=r,Me=R;Z=i;var Tt=o;switch(Me.tag){case 1:if(we=Me.payload,typeof we=="function"){le=we.call(Tt,le,Z);break e}le=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Me.payload,Z=typeof we=="function"?we.call(Tt,le,Z):we,Z==null)break e;le=E({},le,Z);break e;case 2:Ia=!0}}Z=R.callback,Z!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=h.callbacks,ne===null?h.callbacks=[Z]:ne.push(Z))}else ne={lane:Z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ie===null?(W=ie=ne,k=le):ie=ie.next=ne,_|=Z;if(R=R.next,R===null){if(R=h.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,h.lastBaseUpdate=ne,h.shared.pending=null}}while(!0);ie===null&&(k=le),h.baseState=k,h.firstBaseUpdate=W,h.lastBaseUpdate=ie,m===null&&(h.shared.lanes=0),Pa|=_,r.lanes=_,r.memoizedState=le}}function Zv(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function e_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)Zv(o[r],i)}var Lo=U(null),sf=U(0);function t_(r,i){r=$i,he(sf,r),he(Lo,i),$i=r|i.baseLanes}function ym(){he(sf,$i),he(Lo,Lo.current)}function vm(){$i=sf.current,re(Lo),re(sf)}var ur=U(null),Nr=null;function xa(r){var i=r.alternate;he(Qt,Qt.current&1),he(ur,r),Nr===null&&(i===null||Lo.current!==null||i.memoizedState!==null)&&(Nr=r)}function _m(r){he(Qt,Qt.current),he(ur,r),Nr===null&&(Nr=r)}function n_(r){r.tag===22?(he(Qt,Qt.current),he(ur,r),Nr===null&&(Nr=r)):Oa()}function Oa(){he(Qt,Qt.current),he(ur,ur.current)}function cr(r){re(ur),Nr===r&&(Nr=null),re(Qt)}var Qt=U(0);function of(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Ap(o)||Rp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ji=0,qe=null,_t=null,tn=null,lf=!1,ko=!1,Fs=!1,uf=0,au=0,Uo=null,y1=0;function Ht(){throw Error(a(321))}function Em(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!or(r[o],i[o]))return!1;return!0}function Tm(r,i,o,u,h,m){return ji=m,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=r===null||r.memoizedState===null?j_:Lm,Fs=!1,m=o(u,h),Fs=!1,ko&&(m=i_(i,o,u,h)),r_(r),m}function r_(r){Q.H=lu;var i=_t!==null&&_t.next!==null;if(ji=0,tn=_t=qe=null,lf=!1,au=0,Uo=null,i)throw Error(a(300));r===null||nn||(r=r.dependencies,r!==null&&Jc(r)&&(nn=!0))}function i_(r,i,o,u){qe=r;var h=0;do{if(ko&&(Uo=null),au=0,ko=!1,25<=h)throw Error(a(301));if(h+=1,tn=_t=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}Q.H=z_,m=i(o,u)}while(ko);return m}function v1(){var r=Q.H,i=r.useState()[0];return i=typeof i.then=="function"?su(i):i,r=r.useState()[0],(_t!==null?_t.memoizedState:null)!==r&&(qe.flags|=1024),i}function Sm(){var r=uf!==0;return uf=0,r}function bm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function wm(r){if(lf){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}lf=!1}ji=0,tn=_t=qe=null,ko=!1,au=uf=0,Uo=null}function Un(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?qe.memoizedState=tn=r:tn=tn.next=r,tn}function Xt(){if(_t===null){var r=qe.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var i=tn===null?qe.memoizedState:tn.next;if(i!==null)tn=i,_t=r;else{if(r===null)throw qe.alternate===null?Error(a(467)):Error(a(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},tn===null?qe.memoizedState=tn=r:tn=tn.next=r}return tn}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(r){var i=au;return au+=1,Uo===null&&(Uo=[]),r=Yv(Uo,r,i),i=qe,(tn===null?i.memoizedState:tn.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?j_:Lm),r}function ff(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return su(r);if(r.$$typeof===K)return yn(r)}throw Error(a(438,String(r)))}function Am(r){var i=null,o=qe.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=qe.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=cf(),qe.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=I;return i.index++,o}function zi(r,i){return typeof i=="function"?i(r):i}function hf(r){var i=Xt();return Rm(i,_t,r)}function Rm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var _=h.next;h.next=m.next,m.next=_}i.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{i=h.next;var R=_=null,k=null,W=i,ie=!1;do{var le=W.lane&-536870913;if(le!==W.lane?(et&le)===le:(ji&le)===le){var Z=W.revertLane;if(Z===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),le===Oo&&(ie=!0);else if((ji&Z)===Z){W=W.next,Z===Oo&&(ie=!0);continue}else le={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},k===null?(R=k=le,_=m):k=k.next=le,qe.lanes|=Z,Pa|=Z;le=W.action,Fs&&o(m,le),m=W.hasEagerState?W.eagerState:o(m,le)}else Z={lane:le,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},k===null?(R=k=Z,_=m):k=k.next=Z,qe.lanes|=le,Pa|=le;W=W.next}while(W!==null&&W!==i);if(k===null?_=m:k.next=R,!or(m,r.memoizedState)&&(nn=!0,ie&&(o=Mo,o!==null)))throw o;r.memoizedState=m,r.baseState=_,r.baseQueue=k,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Cm(r){var i=Xt(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,h=o.pending,m=i.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do m=r(m,_.action),_=_.next;while(_!==h);or(m,i.memoizedState)||(nn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function a_(r,i,o){var u=qe,h=Xt(),m=at;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var _=!or((_t||h).memoizedState,o);if(_&&(h.memoizedState=o,nn=!0),h=h.queue,Nm(l_.bind(null,u,h,r),[r]),h.getSnapshot!==i||_||tn!==null&&tn.memoizedState.tag&1){if(u.flags|=2048,jo(9,{destroy:void 0},o_.bind(null,u,h,o,i),null),wt===null)throw Error(a(349));m||(ji&127)!==0||s_(u,i,o)}return o}function s_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=qe.updateQueue,i===null?(i=cf(),qe.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function o_(r,i,o,u){i.value=o,i.getSnapshot=u,u_(i)&&c_(r)}function l_(r,i,o){return o(function(){u_(i)&&c_(r)})}function u_(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!or(r,o)}catch{return!0}}function c_(r){var i=Ms(r,2);i!==null&&Qn(i,r,2)}function Im(r){var i=Un();if(typeof r=="function"){var o=r;if(r=o(),Fs){Vn(!0);try{o()}finally{Vn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:r},i}function f_(r,i,o,u){return r.baseState=o,Rm(r,_t,typeof u=="function"?u:zi)}function _1(r,i,o,u,h){if(pf(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};Q.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,h_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function h_(r,i){var o=i.action,u=i.payload,h=r.state;if(i.isTransition){var m=Q.T,_={};Q.T=_;try{var R=o(h,u),k=Q.S;k!==null&&k(_,R),d_(r,i,R)}catch(W){Dm(r,i,W)}finally{m!==null&&_.types!==null&&(m.types=_.types),Q.T=m}}else try{m=o(h,u),d_(r,i,m)}catch(W){Dm(r,i,W)}}function d_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){m_(r,i,u)},function(u){return Dm(r,i,u)}):m_(r,i,o)}function m_(r,i,o){i.status="fulfilled",i.value=o,p_(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,h_(r,o)))}function Dm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,p_(i),i=i.next;while(i!==u)}r.action=null}function p_(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function g_(r,i){return i}function y_(r,i){if(at){var o=wt.formState;if(o!==null){e:{var u=qe;if(at){if(xt){t:{for(var h=xt,m=Dr;h.nodeType!==8;){if(!m){h=null;break t}if(h=xr(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){xt=xr(h.nextSibling),u=h.data==="F!";break e}}Ra(u)}u=!1}u&&(i=o[0])}}return o=Un(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g_,lastRenderedState:i},o.queue=u,o=L_.bind(null,qe,u),u.dispatch=o,u=Im(!1),m=Pm.bind(null,qe,!1,u.queue),u=Un(),h={state:i,dispatch:null,action:r,pending:null},u.queue=h,o=_1.bind(null,qe,h,m,o),h.dispatch=o,u.memoizedState=r,[i,o,!1]}function v_(r){var i=Xt();return __(i,_t,r)}function __(r,i,o){if(i=Rm(r,i,g_)[0],r=hf(zi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=su(i)}catch(_){throw _===Vo?tf:_}else u=i;i=Xt();var h=i.queue,m=h.dispatch;return o!==i.memoizedState&&(qe.flags|=2048,jo(9,{destroy:void 0},E1.bind(null,h,o),null)),[u,m,r]}function E1(r,i){r.action=i}function E_(r){var i=Xt(),o=_t;if(o!==null)return __(i,o,r);Xt(),i=i.memoizedState,o=Xt();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function jo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=qe.updateQueue,i===null&&(i=cf(),qe.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function T_(){return Xt().memoizedState}function df(r,i,o,u){var h=Un();qe.flags|=r,h.memoizedState=jo(1|i,{destroy:void 0},o,u===void 0?null:u)}function mf(r,i,o,u){var h=Xt();u=u===void 0?null:u;var m=h.memoizedState.inst;_t!==null&&u!==null&&Em(u,_t.memoizedState.deps)?h.memoizedState=jo(i,m,o,u):(qe.flags|=r,h.memoizedState=jo(1|i,m,o,u))}function S_(r,i){df(8390656,8,r,i)}function Nm(r,i){mf(2048,8,r,i)}function T1(r){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=cf(),qe.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function b_(r){var i=Xt().memoizedState;return T1({ref:i,nextImpl:r}),function(){if((ft&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function w_(r,i){return mf(4,2,r,i)}function A_(r,i){return mf(4,4,r,i)}function R_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function C_(r,i,o){o=o!=null?o.concat([r]):null,mf(4,4,R_.bind(null,i,r),o)}function xm(){}function I_(r,i){var o=Xt();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Em(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function D_(r,i){var o=Xt();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Em(i,u[1]))return u[0];if(u=r(),Fs){Vn(!0);try{r()}finally{Vn(!1)}}return o.memoizedState=[u,i],u}function Om(r,i,o){return o===void 0||(ji&1073741824)!==0&&(et&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=NE(),qe.lanes|=r,Pa|=r,o)}function N_(r,i,o,u){return or(o,i)?o:Lo.current!==null?(r=Om(r,o,u),or(r,i)||(nn=!0),r):(ji&42)===0||(ji&1073741824)!==0&&(et&261930)===0?(nn=!0,r.memoizedState=o):(r=NE(),qe.lanes|=r,Pa|=r,i)}function x_(r,i,o,u,h){var m=ce.p;ce.p=m!==0&&8>m?m:8;var _=Q.T,R={};Q.T=R,Pm(r,!1,i,o);try{var k=h(),W=Q.S;if(W!==null&&W(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ie=g1(k,u);ou(r,i,ie,dr(r))}else ou(r,i,u,dr(r))}catch(le){ou(r,i,{then:function(){},status:"rejected",reason:le},dr())}finally{ce.p=m,_!==null&&R.types!==null&&(_.types=R.types),Q.T=_}}function S1(){}function Mm(r,i,o,u){if(r.tag!==5)throw Error(a(476));var h=O_(r).queue;x_(r,h,i,ge,o===null?S1:function(){return M_(r),o(u)})}function O_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ge},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function M_(r){var i=O_(r);i.next===null&&(i=r.alternate.memoizedState),ou(r,i.next.queue,{},dr())}function Vm(){return yn(wu)}function V_(){return Xt().memoizedState}function P_(){return Xt().memoizedState}function b1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=dr();r=Da(o);var u=Na(i,r,o);u!==null&&(Qn(u,i,o),nu(u,i,o)),i={cache:um()},r.payload=i;return}i=i.return}}function w1(r,i,o){var u=dr();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},pf(r)?k_(i,o):(o=Jd(r,i,o,u),o!==null&&(Qn(o,r,u),U_(o,i,u)))}function L_(r,i,o){var u=dr();ou(r,i,o,u)}function ou(r,i,o,u){var h={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(pf(r))k_(i,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,R=m(_,o);if(h.hasEagerState=!0,h.eagerState=R,or(R,_))return Yc(r,i,h,0),wt===null&&$c(),!1}catch{}finally{}if(o=Jd(r,i,h,u),o!==null)return Qn(o,r,u),U_(o,i,u),!0}return!1}function Pm(r,i,o,u){if(u={lane:2,revertLane:dp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},pf(r)){if(i)throw Error(a(479))}else i=Jd(r,o,u,2),i!==null&&Qn(i,r,2)}function pf(r){var i=r.alternate;return r===qe||i!==null&&i===qe}function k_(r,i){ko=lf=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function U_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,P(r,o)}}var lu={readContext:yn,use:ff,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht};lu.useEffectEvent=Ht;var j_={readContext:yn,use:ff,useCallback:function(r,i){return Un().memoizedState=[r,i===void 0?null:i],r},useContext:yn,useEffect:S_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,df(4194308,4,R_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return df(4194308,4,r,i)},useInsertionEffect:function(r,i){df(4,2,r,i)},useMemo:function(r,i){var o=Un();i=i===void 0?null:i;var u=r();if(Fs){Vn(!0);try{r()}finally{Vn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Un();if(o!==void 0){var h=o(i);if(Fs){Vn(!0);try{o(i)}finally{Vn(!1)}}}else h=i;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=w1.bind(null,qe,r),[u.memoizedState,r]},useRef:function(r){var i=Un();return r={current:r},i.memoizedState=r},useState:function(r){r=Im(r);var i=r.queue,o=L_.bind(null,qe,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:xm,useDeferredValue:function(r,i){var o=Un();return Om(o,r,i)},useTransition:function(){var r=Im(!1);return r=x_.bind(null,qe,r.queue,!0,!1),Un().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=qe,h=Un();if(at){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),wt===null)throw Error(a(349));(et&127)!==0||s_(u,i,o)}h.memoizedState=o;var m={value:o,getSnapshot:i};return h.queue=m,S_(l_.bind(null,u,m,r),[r]),u.flags|=2048,jo(9,{destroy:void 0},o_.bind(null,u,m,o,i),null),o},useId:function(){var r=Un(),i=wt.identifierPrefix;if(at){var o=pi,u=mi;o=(u&~(1<<32-Vt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=uf++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=y1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Vm,useFormState:y_,useActionState:y_,useOptimistic:function(r){var i=Un();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Pm.bind(null,qe,!0,o),o.dispatch=i,[r,i]},useMemoCache:Am,useCacheRefresh:function(){return Un().memoizedState=b1.bind(null,qe)},useEffectEvent:function(r){var i=Un(),o={impl:r};return i.memoizedState=o,function(){if((ft&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Lm={readContext:yn,use:ff,useCallback:I_,useContext:yn,useEffect:Nm,useImperativeHandle:C_,useInsertionEffect:w_,useLayoutEffect:A_,useMemo:D_,useReducer:hf,useRef:T_,useState:function(){return hf(zi)},useDebugValue:xm,useDeferredValue:function(r,i){var o=Xt();return N_(o,_t.memoizedState,r,i)},useTransition:function(){var r=hf(zi)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:su(r),i]},useSyncExternalStore:a_,useId:V_,useHostTransitionStatus:Vm,useFormState:v_,useActionState:v_,useOptimistic:function(r,i){var o=Xt();return f_(o,_t,r,i)},useMemoCache:Am,useCacheRefresh:P_};Lm.useEffectEvent=b_;var z_={readContext:yn,use:ff,useCallback:I_,useContext:yn,useEffect:Nm,useImperativeHandle:C_,useInsertionEffect:w_,useLayoutEffect:A_,useMemo:D_,useReducer:Cm,useRef:T_,useState:function(){return Cm(zi)},useDebugValue:xm,useDeferredValue:function(r,i){var o=Xt();return _t===null?Om(o,r,i):N_(o,_t.memoizedState,r,i)},useTransition:function(){var r=Cm(zi)[0],i=Xt().memoizedState;return[typeof r=="boolean"?r:su(r),i]},useSyncExternalStore:a_,useId:V_,useHostTransitionStatus:Vm,useFormState:E_,useActionState:E_,useOptimistic:function(r,i){var o=Xt();return _t!==null?f_(o,_t,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Am,useCacheRefresh:P_};z_.useEffectEvent=b_;function km(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Um={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=dr(),h=Da(u);h.payload=i,o!=null&&(h.callback=o),i=Na(r,h,u),i!==null&&(Qn(i,r,u),nu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=dr(),h=Da(u);h.tag=1,h.payload=i,o!=null&&(h.callback=o),i=Na(r,h,u),i!==null&&(Qn(i,r,u),nu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=dr(),u=Da(o);u.tag=2,i!=null&&(u.callback=i),i=Na(r,u,o),i!==null&&(Qn(i,r,o),nu(i,r,o))}};function B_(r,i,o,u,h,m,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!Yl(o,u)||!Yl(h,m):!0}function F_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Um.enqueueReplaceState(i,i.state,null)}function Hs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var h in r)o[h]===void 0&&(o[h]=r[h])}return o}function H_(r){Kc(r)}function q_(r){console.error(r)}function G_(r){Kc(r)}function gf(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function K_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jm(r,i,o){return o=Da(o),o.tag=3,o.payload={element:null},o.callback=function(){gf(r,i)},o}function $_(r){return r=Da(r),r.tag=3,r}function Y_(r,i,o,u){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){K_(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){K_(i,o,u),typeof h!="function"&&(La===null?La=new Set([this]):La.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function A1(r,i,o,u,h){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&xo(i,o,h,!0),o=ur.current,o!==null){switch(o.tag){case 31:case 13:return Nr===null?If():o.alternate===null&&qt===0&&(qt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,u===nf?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),cp(r,u,h)),!1;case 22:return o.flags|=65536,u===nf?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),cp(r,u,h)),!1}throw Error(a(435,o.tag))}return cp(r,u,h),If(),!1}if(at)return i=ur.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,u!==im&&(r=Error(a(422),{cause:u}),Wl(Rr(r,o)))):(u!==im&&(i=Error(a(423),{cause:u}),Wl(Rr(i,o))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Rr(u,o),h=jm(r.stateNode,u,h),pm(r,h),qt!==4&&(qt=2)),!1;var m=Error(a(520),{cause:u});if(m=Rr(m,o),gu===null?gu=[m]:gu.push(m),qt!==4&&(qt=2),i===null)return!0;u=Rr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=h&-h,o.lanes|=r,r=jm(o.stateNode,u,r),pm(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(La===null||!La.has(m))))return o.flags|=65536,h&=-h,o.lanes|=h,h=$_(h),Y_(h,r,o,u),pm(o,h),!1}o=o.return}while(o!==null);return!1}var zm=Error(a(461)),nn=!1;function vn(r,i,o,u){i.child=r===null?Jv(i,null,o,u):Bs(i,r.child,o,u)}function Q_(r,i,o,u,h){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return ks(i),u=Tm(r,i,o,_,m,h),R=Sm(),r!==null&&!nn?(bm(r,i,h),Bi(r,i,h)):(at&&R&&nm(i),i.flags|=1,vn(r,i,u,h),i.child)}function X_(r,i,o,u,h){if(r===null){var m=o.type;return typeof m=="function"&&!Zd(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,W_(r,i,m,u,h)):(r=Xc(o.type,null,u,i,i.mode,h),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Ym(r,h)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Yl,o(_,u)&&r.ref===i.ref)return Bi(r,i,h)}return i.flags|=1,r=Pi(m,u),r.ref=i.ref,r.return=i,i.child=r}function W_(r,i,o,u,h){if(r!==null){var m=r.memoizedProps;if(Yl(m,u)&&r.ref===i.ref)if(nn=!1,i.pendingProps=u=m,Ym(r,h))(r.flags&131072)!==0&&(nn=!0);else return i.lanes=r.lanes,Bi(r,i,h)}return Bm(r,i,o,u,h)}function J_(r,i,o,u){var h=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,i.child=null;return Z_(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&ef(i,m!==null?m.cachePool:null),m!==null?t_(i,m):ym(),n_(i);else return u=i.lanes=536870912,Z_(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(ef(i,m.cachePool),t_(i,m),Oa(),i.memoizedState=null):(r!==null&&ef(i,null),ym(),Oa());return vn(r,i,h,o),i.child}function uu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Z_(r,i,o,u,h){var m=fm();return m=m===null?null:{parent:en._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&ef(i,null),ym(),n_(i),r!==null&&xo(r,i,u,!0),i.childLanes=h,null}function yf(r,i){return i=_f({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function eE(r,i,o){return Bs(i,r.child,null,o),r=yf(i,i.pendingProps),r.flags|=2,cr(i),i.memoizedState=null,r}function R1(r,i,o){var u=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(at){if(u.mode==="hidden")return r=yf(i,u),i.lanes=536870912,uu(null,r);if(_m(i),(r=xt)?(r=hT(r,Dr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:wa!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},o=kv(r),o.return=i,i.child=o,gn=i,xt=null)):r=null,r===null)throw Ra(i);return i.lanes=536870912,null}return yf(i,u)}var m=r.memoizedState;if(m!==null){var _=m.dehydrated;if(_m(i),h)if(i.flags&256)i.flags&=-257,i=eE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(nn||xo(r,i,o,!1),h=(o&r.childLanes)!==0,nn||h){if(u=wt,u!==null&&(_=H(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ms(r,_),Qn(u,r,_),zm;If(),i=eE(r,i,o)}else r=m.treeContext,xt=xr(_.nextSibling),gn=i,at=!0,Aa=null,Dr=!1,r!==null&&zv(i,r),i=yf(i,u),i.flags|=4096;return i}return r=Pi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function vf(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Bm(r,i,o,u,h){return ks(i),o=Tm(r,i,o,u,void 0,h),u=Sm(),r!==null&&!nn?(bm(r,i,h),Bi(r,i,h)):(at&&u&&nm(i),i.flags|=1,vn(r,i,o,h),i.child)}function tE(r,i,o,u,h,m){return ks(i),i.updateQueue=null,o=i_(i,u,o,h),r_(r),u=Sm(),r!==null&&!nn?(bm(r,i,m),Bi(r,i,m)):(at&&u&&nm(i),i.flags|=1,vn(r,i,o,m),i.child)}function nE(r,i,o,u,h){if(ks(i),i.stateNode===null){var m=Co,_=o.contextType;typeof _=="object"&&_!==null&&(m=yn(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Um,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},dm(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?yn(_):Co,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(km(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Um.enqueueReplaceState(m,m.state,null),iu(i,u,m,h),ru(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var R=i.memoizedProps,k=Hs(o,R);m.props=k;var W=m.context,ie=o.contextType;_=Co,typeof ie=="object"&&ie!==null&&(_=yn(ie));var le=o.getDerivedStateFromProps;ie=typeof le=="function"||typeof m.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,ie||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(R||W!==_)&&F_(i,m,u,_),Ia=!1;var Z=i.memoizedState;m.state=Z,iu(i,u,m,h),ru(),W=i.memoizedState,R||Z!==W||Ia?(typeof le=="function"&&(km(i,o,le,u),W=i.memoizedState),(k=Ia||B_(i,o,k,u,Z,W,_))?(ie||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=W),m.props=u,m.state=W,m.context=_,u=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,mm(r,i),_=i.memoizedProps,ie=Hs(o,_),m.props=ie,le=i.pendingProps,Z=m.context,W=o.contextType,k=Co,typeof W=="object"&&W!==null&&(k=yn(W)),R=o.getDerivedStateFromProps,(W=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==le||Z!==k)&&F_(i,m,u,k),Ia=!1,Z=i.memoizedState,m.state=Z,iu(i,u,m,h),ru();var ne=i.memoizedState;_!==le||Z!==ne||Ia||r!==null&&r.dependencies!==null&&Jc(r.dependencies)?(typeof R=="function"&&(km(i,o,R,u),ne=i.memoizedState),(ie=Ia||B_(i,o,ie,u,Z,ne,k)||r!==null&&r.dependencies!==null&&Jc(r.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ne,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ne,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&Z===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&Z===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ne),m.props=u,m.state=ne,m.context=k,u=ie):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&Z===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&Z===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,vf(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Bs(i,r.child,null,h),i.child=Bs(i,null,o,h)):vn(r,i,o,h),i.memoizedState=m.state,r=i.child):r=Bi(r,i,h),r}function rE(r,i,o,u){return Ps(),i.flags|=256,vn(r,i,o,u),i.child}var Fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hm(r){return{baseLanes:r,cachePool:Kv()}}function qm(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=hr),r}function iE(r,i,o){var u=i.pendingProps,h=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=r!==null&&r.memoizedState===null?!1:(Qt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(at){if(h?xa(i):Oa(),(r=xt)?(r=hT(r,Dr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:wa!==null?{id:mi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},o=kv(r),o.return=i,i.child=o,gn=i,xt=null)):r=null,r===null)throw Ra(i);return Rp(r)?i.lanes=32:i.lanes=536870912,null}var R=u.children;return u=u.fallback,h?(Oa(),h=i.mode,R=_f({mode:"hidden",children:R},h),u=Vs(u,h,o,null),R.return=i,u.return=i,R.sibling=u,i.child=R,u=i.child,u.memoizedState=Hm(o),u.childLanes=qm(r,_,o),i.memoizedState=Fm,uu(null,u)):(xa(i),Gm(i,R))}var k=r.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(m)i.flags&256?(xa(i),i.flags&=-257,i=Km(r,i,o)):i.memoizedState!==null?(Oa(),i.child=r.child,i.flags|=128,i=null):(Oa(),R=u.fallback,h=i.mode,u=_f({mode:"visible",children:u.children},h),R=Vs(R,h,o,null),R.flags|=2,u.return=i,R.return=i,u.sibling=R,i.child=u,Bs(i,r.child,null,o),u=i.child,u.memoizedState=Hm(o),u.childLanes=qm(r,_,o),i.memoizedState=Fm,i=uu(null,u));else if(xa(i),Rp(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var W=_.dgst;_=W,u=Error(a(419)),u.stack="",u.digest=_,Wl({value:u,source:null,stack:null}),i=Km(r,i,o)}else if(nn||xo(r,i,o,!1),_=(o&r.childLanes)!==0,nn||_){if(_=wt,_!==null&&(u=H(_,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,Ms(r,u),Qn(_,r,u),zm;Ap(R)||If(),i=Km(r,i,o)}else Ap(R)?(i.flags|=192,i.child=r.child,i=null):(r=k.treeContext,xt=xr(R.nextSibling),gn=i,at=!0,Aa=null,Dr=!1,r!==null&&zv(i,r),i=Gm(i,u.children),i.flags|=4096);return i}return h?(Oa(),R=u.fallback,h=i.mode,k=r.child,W=k.sibling,u=Pi(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,W!==null?R=Pi(W,R):(R=Vs(R,h,o,null),R.flags|=2),R.return=i,u.return=i,u.sibling=R,i.child=u,uu(null,u),u=i.child,R=r.child.memoizedState,R===null?R=Hm(o):(h=R.cachePool,h!==null?(k=en._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=Kv(),R={baseLanes:R.baseLanes|o,cachePool:h}),u.memoizedState=R,u.childLanes=qm(r,_,o),i.memoizedState=Fm,uu(r.child,u)):(xa(i),o=r.child,r=o.sibling,o=Pi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function Gm(r,i){return i=_f({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function _f(r,i){return r=lr(22,r,null,i),r.lanes=0,r}function Km(r,i,o){return Bs(i,r.child,null,o),r=Gm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function aE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),om(r.return,i,o)}function $m(r,i,o,u,h,m){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=h,_.treeForkCount=m)}function sE(r,i,o){var u=i.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var _=Qt.current,R=(_&2)!==0;if(R?(_=_&1|2,i.flags|=128):_&=1,he(Qt,_),vn(r,i,u,o),u=at?Xl:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&aE(r,o,i);else if(r.tag===19)aE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(h){case"forwards":for(o=i.child,h=null;o!==null;)r=o.alternate,r!==null&&of(r)===null&&(h=o),o=o.sibling;o=h,o===null?(h=i.child,i.child=null):(h=o.sibling,o.sibling=null),$m(i,!1,h,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,h=i.child,i.child=null;h!==null;){if(r=h.alternate,r!==null&&of(r)===null){i.child=h;break}r=h.sibling,h.sibling=o,o=h,h=r}$m(i,!0,o,null,m,u);break;case"together":$m(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Bi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Pa|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(xo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Pi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Pi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Ym(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&Jc(r)))}function C1(r,i,o){switch(i.tag){case 3:St(i,i.stateNode.containerInfo),Ca(i,en,r.memoizedState.cache),Ps();break;case 27:case 5:Ii(i);break;case 4:St(i,i.stateNode.containerInfo);break;case 10:Ca(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,_m(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(xa(i),i.flags|=128,null):(o&i.child.childLanes)!==0?iE(r,i,o):(xa(i),r=Bi(r,i,o),r!==null?r.sibling:null);xa(i);break;case 19:var h=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(xo(r,i,o,!1),u=(o&i.childLanes)!==0),h){if(u)return sE(r,i,o);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),he(Qt,Qt.current),u)break;return null;case 22:return i.lanes=0,J_(r,i,o,i.pendingProps);case 24:Ca(i,en,r.memoizedState.cache)}return Bi(r,i,o)}function oE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)nn=!0;else{if(!Ym(r,o)&&(i.flags&128)===0)return nn=!1,C1(r,i,o);nn=(r.flags&131072)!==0}else nn=!1,at&&(i.flags&1048576)!==0&&jv(i,Xl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=js(i.elementType),i.type=r,typeof r=="function")Zd(r)?(u=Hs(r,u),i.tag=1,i=nE(null,i,r,u,o)):(i.tag=0,i=Bm(null,i,r,u,o));else{if(r!=null){var h=r.$$typeof;if(h===ee){i.tag=11,i=Q_(null,i,r,u,o);break e}else if(h===S){i.tag=14,i=X_(null,i,r,u,o);break e}}throw i=Ae(r)||r,Error(a(306,i,""))}}return i;case 0:return Bm(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,h=Hs(u,i.pendingProps),nE(r,i,u,h,o);case 3:e:{if(St(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;h=m.element,mm(r,i),iu(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Ca(i,en,u),u!==m.cache&&lm(i,[en],o,!0),ru(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=rE(r,i,u,o);break e}else if(u!==h){h=Rr(Error(a(424)),i),Wl(h),i=rE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(xt=xr(r.firstChild),gn=i,at=!0,Aa=null,Dr=!0,o=Jv(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ps(),u===h){i=Bi(r,i,o);break e}vn(r,i,u,o)}i=i.child}return i;case 26:return vf(r,i),r===null?(o=vT(i.type,null,i.pendingProps,null))?i.memoizedState=o:at||(o=i.type,r=i.pendingProps,u=Pf(Oe.current).createElement(o),u[me]=i,u[ye]=r,_n(u,o,r),It(u),i.stateNode=u):i.memoizedState=vT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Ii(i),r===null&&at&&(u=i.stateNode=pT(i.type,i.pendingProps,Oe.current),gn=i,Dr=!0,h=xt,za(i.type)?(Cp=h,xt=xr(u.firstChild)):xt=h),vn(r,i,i.pendingProps.children,o),vf(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&at&&((h=u=xt)&&(u=rC(u,i.type,i.pendingProps,Dr),u!==null?(i.stateNode=u,gn=i,xt=xr(u.firstChild),Dr=!1,h=!0):h=!1),h||Ra(i)),Ii(i),h=i.type,m=i.pendingProps,_=r!==null?r.memoizedProps:null,u=m.children,Sp(h,m)?u=null:_!==null&&Sp(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Tm(r,i,v1,null,null,o),wu._currentValue=h),vf(r,i),vn(r,i,u,o),i.child;case 6:return r===null&&at&&((r=o=xt)&&(o=iC(o,i.pendingProps,Dr),o!==null?(i.stateNode=o,gn=i,xt=null,r=!0):r=!1),r||Ra(i)),null;case 13:return iE(r,i,o);case 4:return St(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Bs(i,null,u,o):vn(r,i,u,o),i.child;case 11:return Q_(r,i,i.type,i.pendingProps,o);case 7:return vn(r,i,i.pendingProps,o),i.child;case 8:return vn(r,i,i.pendingProps.children,o),i.child;case 12:return vn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ca(i,i.type,u.value),vn(r,i,u.children,o),i.child;case 9:return h=i.type._context,u=i.pendingProps.children,ks(i),h=yn(h),u=u(h),i.flags|=1,vn(r,i,u,o),i.child;case 14:return X_(r,i,i.type,i.pendingProps,o);case 15:return W_(r,i,i.type,i.pendingProps,o);case 19:return sE(r,i,o);case 31:return R1(r,i,o);case 22:return J_(r,i,o,i.pendingProps);case 24:return ks(i),u=yn(en),r===null?(h=fm(),h===null&&(h=wt,m=um(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=o),h=m),i.memoizedState={parent:u,cache:h},dm(i),Ca(i,en,h)):((r.lanes&o)!==0&&(mm(r,i),iu(i,null,null,o),ru()),h=r.memoizedState,m=i.memoizedState,h.parent!==u?(h={parent:u,cache:u},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Ca(i,en,u)):(u=m.cache,Ca(i,en,u),u!==h.cache&&lm(i,[en],o,!0))),vn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Fi(r){r.flags|=4}function Qm(r,i,o,u,h){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(h&335544128)===h)if(r.stateNode.complete)r.flags|=8192;else if(VE())r.flags|=8192;else throw zs=nf,hm}else r.flags&=-16777217}function lE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!bT(i))if(VE())r.flags|=8192;else throw zs=nf,hm}function Ef(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ni():536870912,r.lanes|=i,Ho|=i)}function cu(r,i){if(!at)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Ot(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function I1(r,i,o){var u=i.pendingProps;switch(rm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Ot(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ui(en),At(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(No(i)?Fi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,am())),Ot(i),null;case 26:var h=i.type,m=i.memoizedState;return r===null?(Fi(i),m!==null?(Ot(i),lE(i,m)):(Ot(i),Qm(i,h,null,u,o))):m?m!==r.memoizedState?(Fi(i),Ot(i),lE(i,m)):(Ot(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Fi(i),Ot(i),Qm(i,h,r,u,o)),null;case 27:if(fa(i),o=Oe.current,h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Fi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ot(i),null}r=ve.current,No(i)?Bv(i):(r=pT(h,u,o),i.stateNode=r,Fi(i))}return Ot(i),null;case 5:if(fa(i),h=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Fi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Ot(i),null}if(m=ve.current,No(i))Bv(i);else{var _=Pf(Oe.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(h,{is:u.is}):_.createElement(h)}}m[me]=i,m[ye]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(_n(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Fi(i)}}return Ot(i),Qm(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Fi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Oe.current,No(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,h=gn,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[me]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||iT(r.nodeValue,o)),r||Ra(i,!0)}else r=Pf(r).createTextNode(u),r[me]=i,i.stateNode=r}return Ot(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=No(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[me]=i}else Ps(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),r=!1}else o=am(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(cr(i),i):(cr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Ot(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=No(i),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(a(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[me]=i}else Ps(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ot(i),h=!1}else h=am(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(cr(i),i):(cr(i),null)}return cr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Ef(i,i.updateQueue),Ot(i),null);case 4:return At(),r===null&&yp(i.stateNode.containerInfo),Ot(i),null;case 10:return Ui(i.type),Ot(i),null;case 19:if(re(Qt),u=i.memoizedState,u===null)return Ot(i),null;if(h=(i.flags&128)!==0,m=u.rendering,m===null)if(h)cu(u,!1);else{if(qt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=of(r),m!==null){for(i.flags|=128,cu(u,!1),r=m.updateQueue,i.updateQueue=r,Ef(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)Lv(o,r),o=o.sibling;return he(Qt,Qt.current&1|2),at&&Li(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&zt()>Af&&(i.flags|=128,h=!0,cu(u,!1),i.lanes=4194304)}else{if(!h)if(r=of(m),r!==null){if(i.flags|=128,h=!0,r=r.updateQueue,i.updateQueue=r,Ef(i,r),cu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!at)return Ot(i),null}else 2*zt()-u.renderingStartTime>Af&&o!==536870912&&(i.flags|=128,h=!0,cu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=zt(),r.sibling=null,o=Qt.current,he(Qt,h?o&1|2:o&1),at&&Li(i,u.treeForkCount),r):(Ot(i),null);case 22:case 23:return cr(i),vm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),o=i.updateQueue,o!==null&&Ef(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&re(Us),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ui(en),Ot(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function D1(r,i){switch(rm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ui(en),At(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return fa(i),null;case 31:if(i.memoizedState!==null){if(cr(i),i.alternate===null)throw Error(a(340));Ps()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(cr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Ps()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return re(Qt),null;case 4:return At(),null;case 10:return Ui(i.type),null;case 22:case 23:return cr(i),vm(),r!==null&&re(Us),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ui(en),null;case 25:return null;default:return null}}function uE(r,i){switch(rm(i),i.tag){case 3:Ui(en),At();break;case 26:case 27:case 5:fa(i);break;case 4:At();break;case 31:i.memoizedState!==null&&cr(i);break;case 13:cr(i);break;case 19:re(Qt);break;case 10:Ui(i.type);break;case 22:case 23:cr(i),vm(),r!==null&&re(Us);break;case 24:Ui(en)}}function fu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var h=u.next;o=h;do{if((o.tag&r)===r){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==h)}}catch(R){mt(i,i.return,R)}}function Ma(r,i,o){try{var u=i.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,h=i;var k=o,W=R;try{W()}catch(ie){mt(h,k,ie)}}}u=u.next}while(u!==m)}}catch(ie){mt(i,i.return,ie)}}function cE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{e_(i,o)}catch(u){mt(r,r.return,u)}}}function fE(r,i,o){o.props=Hs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){mt(r,i,u)}}function hu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(h){mt(r,i,h)}}function gi(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(h){mt(r,i,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){mt(r,i,h)}else o.current=null}function hE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(h){mt(r,r.return,h)}}function Xm(r,i,o){try{var u=r.stateNode;W1(u,r.type,o,i),u[ye]=i}catch(h){mt(r,r.return,h)}}function dE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&za(r.type)||r.tag===4}function Wm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||dE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&za(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Jm(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=zr));else if(u!==4&&(u===27&&za(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(Jm(r,i,o),r=r.sibling;r!==null;)Jm(r,i,o),r=r.sibling}function Tf(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&za(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Tf(r,i,o),r=r.sibling;r!==null;)Tf(r,i,o),r=r.sibling}function mE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);_n(i,u,o),i[me]=r,i[ye]=o}catch(m){mt(r,r.return,m)}}var Hi=!1,rn=!1,Zm=!1,pE=typeof WeakSet=="function"?WeakSet:Set,dn=null;function N1(r,i){if(r=r.containerInfo,Ep=Ff,r=Cv(r),Kd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,R=-1,k=-1,W=0,ie=0,le=r,Z=null;t:for(;;){for(var ne;le!==o||h!==0&&le.nodeType!==3||(R=_+h),le!==m||u!==0&&le.nodeType!==3||(k=_+u),le.nodeType===3&&(_+=le.nodeValue.length),(ne=le.firstChild)!==null;)Z=le,le=ne;for(;;){if(le===r)break t;if(Z===o&&++W===h&&(R=_),Z===m&&++ie===u&&(k=_),(ne=le.nextSibling)!==null)break;le=Z,Z=le.parentNode}le=ne}o=R===-1||k===-1?null:{start:R,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Tp={focusedElem:r,selectionRange:o},Ff=!1,dn=i;dn!==null;)if(i=dn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,dn=r;else for(;dn!==null;){switch(i=dn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)h=r[o],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,h=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var we=Hs(o.type,h);r=u.getSnapshotBeforeUpdate(we,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Me){mt(o,o.return,Me)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)wp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,dn=r;break}dn=i.return}}function gE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(r,o),u&4&&fu(5,o);break;case 1:if(Gi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){mt(o,o.return,_)}else{var h=Hs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(h,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){mt(o,o.return,_)}}u&64&&cE(o),u&512&&hu(o,o.return);break;case 3:if(Gi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{e_(r,i)}catch(_){mt(o,o.return,_)}}break;case 27:i===null&&u&4&&mE(o);case 26:case 5:Gi(r,o),i===null&&u&4&&hE(o),u&512&&hu(o,o.return);break;case 12:Gi(r,o);break;case 31:Gi(r,o),u&4&&_E(r,o);break;case 13:Gi(r,o),u&4&&EE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=j1.bind(null,o),aC(r,o))));break;case 22:if(u=o.memoizedState!==null||Hi,!u){i=i!==null&&i.memoizedState!==null||rn,h=Hi;var m=rn;Hi=u,(rn=i)&&!m?Ki(r,o,(o.subtreeFlags&8772)!==0):Gi(r,o),Hi=h,rn=m}break;case 30:break;default:Gi(r,o)}}function yE(r){var i=r.alternate;i!==null&&(r.alternate=null,yE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Nt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var kt=null,Gn=!1;function qi(r,i,o){for(o=o.child;o!==null;)vE(r,i,o),o=o.sibling}function vE(r,i,o){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(nr,o)}catch{}switch(o.tag){case 26:rn||gi(o,i),qi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:rn||gi(o,i);var u=kt,h=Gn;za(o.type)&&(kt=o.stateNode,Gn=!1),qi(r,i,o),Tu(o.stateNode),kt=u,Gn=h;break;case 5:rn||gi(o,i);case 6:if(u=kt,h=Gn,kt=null,qi(r,i,o),kt=u,Gn=h,kt!==null)if(Gn)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(o.stateNode)}catch(m){mt(o,i,m)}else try{kt.removeChild(o.stateNode)}catch(m){mt(o,i,m)}break;case 18:kt!==null&&(Gn?(r=kt,cT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Wo(r)):cT(kt,o.stateNode));break;case 4:u=kt,h=Gn,kt=o.stateNode.containerInfo,Gn=!0,qi(r,i,o),kt=u,Gn=h;break;case 0:case 11:case 14:case 15:Ma(2,o,i),rn||Ma(4,o,i),qi(r,i,o);break;case 1:rn||(gi(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&fE(o,i,u)),qi(r,i,o);break;case 21:qi(r,i,o);break;case 22:rn=(u=rn)||o.memoizedState!==null,qi(r,i,o),rn=u;break;default:qi(r,i,o)}}function _E(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Wo(r)}catch(o){mt(i,i.return,o)}}}function EE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Wo(r)}catch(o){mt(i,i.return,o)}}function x1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new pE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new pE),i;default:throw Error(a(435,r.tag))}}function Sf(r,i){var o=x1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var h=z1.bind(null,r,u);u.then(h,h)}})}function Kn(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u],m=r,_=i,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(za(R.type)){kt=R.stateNode,Gn=!1;break e}break;case 5:kt=R.stateNode,Gn=!1;break e;case 3:case 4:kt=R.stateNode.containerInfo,Gn=!0;break e}R=R.return}if(kt===null)throw Error(a(160));vE(m,_,h),kt=null,Gn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)TE(i,r),i=i.sibling}var Kr=null;function TE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Kn(i,r),$n(r),u&4&&(Ma(3,r,r.return),fu(3,r),Ma(5,r,r.return));break;case 1:Kn(i,r),$n(r),u&512&&(rn||o===null||gi(o,o.return)),u&64&&Hi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var h=Kr;if(Kn(i,r),$n(r),u&512&&(rn||o===null||gi(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[gt]||m[me]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),_n(m,u,o),m[me]=r,It(m),u=m;break e;case"link":var _=TT("link","href",h).get(u+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(m=_[R],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}m=h.createElement(u),_n(m,u,o),h.head.appendChild(m);break;case"meta":if(_=TT("meta","content",h).get(u+(o.content||""))){for(R=0;R<_.length;R++)if(m=_[R],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}m=h.createElement(u),_n(m,u,o),h.head.appendChild(m);break;default:throw Error(a(468,u))}m[me]=r,It(m),u=m}r.stateNode=u}else ST(h,r.type,r.stateNode);else r.stateNode=ET(h,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?ST(h,r.type,r.stateNode):ET(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Xm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Kn(i,r),$n(r),u&512&&(rn||o===null||gi(o,o.return)),o!==null&&u&4&&Xm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Kn(i,r),$n(r),u&512&&(rn||o===null||gi(o,o.return)),r.flags&32){h=r.stateNode;try{qn(h,"")}catch(we){mt(r,r.return,we)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,Xm(r,h,o!==null?o.memoizedProps:h)),u&1024&&(Zm=!0);break;case 6:if(Kn(i,r),$n(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(we){mt(r,r.return,we)}}break;case 3:if(Uf=null,h=Kr,Kr=Lf(i.containerInfo),Kn(i,r),Kr=h,$n(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Wo(i.containerInfo)}catch(we){mt(r,r.return,we)}Zm&&(Zm=!1,SE(r));break;case 4:u=Kr,Kr=Lf(r.stateNode.containerInfo),Kn(i,r),$n(r),Kr=u;break;case 12:Kn(i,r),$n(r);break;case 31:Kn(i,r),$n(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sf(r,u)));break;case 13:Kn(i,r),$n(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(wf=zt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sf(r,u)));break;case 22:h=r.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,W=Hi,ie=rn;if(Hi=W||h,rn=ie||k,Kn(i,r),rn=ie,Hi=W,$n(r),u&8192)e:for(i=r.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(o===null||k||Hi||rn||qs(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(m=k.stateNode,h)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=k.stateNode;var le=k.memoizedProps.style,Z=le!=null&&le.hasOwnProperty("display")?le.display:null;R.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(we){mt(k,k.return,we)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(we){mt(k,k.return,we)}}}else if(i.tag===18){if(o===null){k=i;try{var ne=k.stateNode;h?fT(ne,!0):fT(k.stateNode,!1)}catch(we){mt(k,k.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Sf(r,o))));break;case 19:Kn(i,r),$n(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Sf(r,u)));break;case 30:break;case 21:break;default:Kn(i,r),$n(r)}}function $n(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(dE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var h=o.stateNode,m=Wm(r);Tf(r,m,h);break;case 5:var _=o.stateNode;o.flags&32&&(qn(_,""),o.flags&=-33);var R=Wm(r);Tf(r,R,_);break;case 3:case 4:var k=o.stateNode.containerInfo,W=Wm(r);Jm(r,W,k);break;default:throw Error(a(161))}}catch(ie){mt(r,r.return,ie)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function SE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;SE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Gi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)gE(r,i.alternate,i),i=i.sibling}function qs(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ma(4,i,i.return),qs(i);break;case 1:gi(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&fE(i,i.return,o),qs(i);break;case 27:Tu(i.stateNode);case 26:case 5:gi(i,i.return),qs(i);break;case 22:i.memoizedState===null&&qs(i);break;case 30:qs(i);break;default:qs(i)}r=r.sibling}}function Ki(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,h=r,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Ki(h,m,o),fu(4,m);break;case 1:if(Ki(h,m,o),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(W){mt(u,u.return,W)}if(u=m,h=u.updateQueue,h!==null){var R=u.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Zv(k[h],R)}catch(W){mt(u,u.return,W)}}o&&_&64&&cE(m),hu(m,m.return);break;case 27:mE(m);case 26:case 5:Ki(h,m,o),o&&u===null&&_&4&&hE(m),hu(m,m.return);break;case 12:Ki(h,m,o);break;case 31:Ki(h,m,o),o&&_&4&&_E(h,m);break;case 13:Ki(h,m,o),o&&_&4&&EE(h,m);break;case 22:m.memoizedState===null&&Ki(h,m,o),hu(m,m.return);break;case 30:break;default:Ki(h,m,o)}i=i.sibling}}function ep(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Jl(o))}function tp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Jl(r))}function $r(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)bE(r,i,o,u),i=i.sibling}function bE(r,i,o,u){var h=i.flags;switch(i.tag){case 0:case 11:case 15:$r(r,i,o,u),h&2048&&fu(9,i);break;case 1:$r(r,i,o,u);break;case 3:$r(r,i,o,u),h&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&Jl(r)));break;case 12:if(h&2048){$r(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,_=m.id,R=m.onPostCommit;typeof R=="function"&&R(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){mt(i,i.return,k)}}else $r(r,i,o,u);break;case 31:$r(r,i,o,u);break;case 13:$r(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?$r(r,i,o,u):du(r,i):m._visibility&2?$r(r,i,o,u):(m._visibility|=2,zo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),h&2048&&ep(_,i);break;case 24:$r(r,i,o,u),h&2048&&tp(i.alternate,i);break;default:$r(r,i,o,u)}}function zo(r,i,o,u,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,_=i,R=o,k=u,W=_.flags;switch(_.tag){case 0:case 11:case 15:zo(m,_,R,k,h),fu(8,_);break;case 23:break;case 22:var ie=_.stateNode;_.memoizedState!==null?ie._visibility&2?zo(m,_,R,k,h):du(m,_):(ie._visibility|=2,zo(m,_,R,k,h)),h&&W&2048&&ep(_.alternate,_);break;case 24:zo(m,_,R,k,h),h&&W&2048&&tp(_.alternate,_);break;default:zo(m,_,R,k,h)}i=i.sibling}}function du(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,h=u.flags;switch(u.tag){case 22:du(o,u),h&2048&&ep(u.alternate,u);break;case 24:du(o,u),h&2048&&tp(u.alternate,u);break;default:du(o,u)}i=i.sibling}}var mu=8192;function Bo(r,i,o){if(r.subtreeFlags&mu)for(r=r.child;r!==null;)wE(r,i,o),r=r.sibling}function wE(r,i,o){switch(r.tag){case 26:Bo(r,i,o),r.flags&mu&&r.memoizedState!==null&&yC(o,Kr,r.memoizedState,r.memoizedProps);break;case 5:Bo(r,i,o);break;case 3:case 4:var u=Kr;Kr=Lf(r.stateNode.containerInfo),Bo(r,i,o),Kr=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=mu,mu=16777216,Bo(r,i,o),mu=u):Bo(r,i,o));break;default:Bo(r,i,o)}}function AE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function pu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];dn=u,CE(u,r)}AE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)RE(r),r=r.sibling}function RE(r){switch(r.tag){case 0:case 11:case 15:pu(r),r.flags&2048&&Ma(9,r,r.return);break;case 3:pu(r);break;case 12:pu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,bf(r)):pu(r);break;default:pu(r)}}function bf(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];dn=u,CE(u,r)}AE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ma(8,i,i.return),bf(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,bf(i));break;default:bf(i)}r=r.sibling}}function CE(r,i){for(;dn!==null;){var o=dn;switch(o.tag){case 0:case 11:case 15:Ma(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Jl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,dn=u;else e:for(o=r;dn!==null;){u=dn;var h=u.sibling,m=u.return;if(yE(u),u===o){dn=null;break e}if(h!==null){h.return=m,dn=h;break e}dn=m}}}var O1={getCacheForType:function(r){var i=yn(en),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return yn(en).controller.signal}},M1=typeof WeakMap=="function"?WeakMap:Map,ft=0,wt=null,Je=null,et=0,dt=0,fr=null,Va=!1,Fo=!1,np=!1,$i=0,qt=0,Pa=0,Gs=0,rp=0,hr=0,Ho=0,gu=null,Yn=null,ip=!1,wf=0,IE=0,Af=1/0,Rf=null,La=null,ln=0,ka=null,qo=null,Yi=0,ap=0,sp=null,DE=null,yu=0,op=null;function dr(){return(ft&2)!==0&&et!==0?et&-et:Q.T!==null?dp():de()}function NE(){if(hr===0)if((et&536870912)===0||at){var r=ri;ri<<=1,(ri&3932160)===0&&(ri=262144),hr=r}else hr=536870912;return r=ur.current,r!==null&&(r.flags|=32),hr}function Qn(r,i,o){(r===wt&&(dt===2||dt===9)||r.cancelPendingCommit!==null)&&(Go(r,0),Ua(r,et,hr,!1)),ii(r,o),((ft&2)===0||r!==wt)&&(r===wt&&((ft&2)===0&&(Gs|=o),qt===4&&Ua(r,et,hr,!1)),yi(r))}function xE(r,i,o){if((ft&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||ir(r,i),h=u?L1(r,i):up(r,i,!0),m=u;do{if(h===0){Fo&&!u&&Ua(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!V1(o)){h=up(r,i,!1),m=!1;continue}if(h===2){if(m=i,r.errorRecoveryDisabledLanes&m)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var R=r;h=gu;var k=R.current.memoizedState.isDehydrated;if(k&&(Go(R,_).flags|=256),_=up(R,_,!1),_!==2){if(np&&!k){R.errorRecoveryDisabledLanes|=m,Gs|=m,h=4;break e}m=Yn,Yn=h,m!==null&&(Yn===null?Yn=m:Yn.push.apply(Yn,m))}h=_}if(m=!1,h!==2)continue}}if(h===1){Go(r,0),Ua(r,i,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ua(u,i,hr,!Va);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(h=wf+300-zt(),10<h)){if(Ua(u,i,hr,!Va),rr(u,0,!0)!==0)break e;Yi=i,u.timeoutHandle=lT(OE.bind(null,u,o,Yn,Rf,ip,i,hr,Gs,Ho,Va,m,"Throttled",-0,0),h);break e}OE(u,o,Yn,Rf,ip,i,hr,Gs,Ho,Va,m,null,-0,0)}}break}while(!0);yi(r)}function OE(r,i,o,u,h,m,_,R,k,W,ie,le,Z,ne){if(r.timeoutHandle=-1,le=i.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:zr},wE(i,m,le);var we=(m&62914560)===m?wf-zt():(m&4194048)===m?IE-zt():0;if(we=vC(le,we),we!==null){Yi=m,r.cancelPendingCommit=we(zE.bind(null,r,i,m,o,u,h,_,R,k,ie,le,null,Z,ne)),Ua(r,m,_,!W);return}}zE(r,i,m,o,u,h,_,R,k)}function V1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var h=o[u],m=h.getSnapshot;h=h.value;try{if(!or(m(),h))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ua(r,i,o,u){i&=~rp,i&=~Gs,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var h=i;0<h;){var m=31-Vt(h),_=1<<m;u[m]=-1,h&=~_}o!==0&&xi(r,o,i)}function Cf(){return(ft&6)===0?(vu(0),!1):!0}function lp(){if(Je!==null){if(dt===0)var r=Je.return;else r=Je,ki=Ls=null,wm(r),Po=null,eu=0,r=Je;for(;r!==null;)uE(r.alternate,r),r=r.return;Je=null}}function Go(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,eC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),Yi=0,lp(),wt=r,Je=o=Pi(r.current,null),et=i,dt=0,fr=null,Va=!1,Fo=ir(r,i),np=!1,Ho=hr=rp=Gs=Pa=qt=0,Yn=gu=null,ip=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var h=31-Vt(u),m=1<<h;i|=r[h],u&=~m}return $i=i,$c(),o}function ME(r,i){qe=null,Q.H=lu,i===Vo||i===tf?(i=Qv(),dt=3):i===hm?(i=Qv(),dt=4):dt=i===zm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fr=i,Je===null&&(qt=1,gf(r,Rr(i,r.current)))}function VE(){var r=ur.current;return r===null?!0:(et&4194048)===et?Nr===null:(et&62914560)===et||(et&536870912)!==0?r===Nr:!1}function PE(){var r=Q.H;return Q.H=lu,r===null?lu:r}function LE(){var r=Q.A;return Q.A=O1,r}function If(){qt=4,Va||(et&4194048)!==et&&ur.current!==null||(Fo=!0),(Pa&134217727)===0&&(Gs&134217727)===0||wt===null||Ua(wt,et,hr,!1)}function up(r,i,o){var u=ft;ft|=2;var h=PE(),m=LE();(wt!==r||et!==i)&&(Rf=null,Go(r,i)),i=!1;var _=qt;e:do try{if(dt!==0&&Je!==null){var R=Je,k=fr;switch(dt){case 8:lp(),_=6;break e;case 3:case 2:case 9:case 6:ur.current===null&&(i=!0);var W=dt;if(dt=0,fr=null,Ko(r,R,k,W),o&&Fo){_=0;break e}break;default:W=dt,dt=0,fr=null,Ko(r,R,k,W)}}P1(),_=qt;break}catch(ie){ME(r,ie)}while(!0);return i&&r.shellSuspendCounter++,ki=Ls=null,ft=u,Q.H=h,Q.A=m,Je===null&&(wt=null,et=0,$c()),_}function P1(){for(;Je!==null;)kE(Je)}function L1(r,i){var o=ft;ft|=2;var u=PE(),h=LE();wt!==r||et!==i?(Rf=null,Af=zt()+500,Go(r,i)):Fo=ir(r,i);e:do try{if(dt!==0&&Je!==null){i=Je;var m=fr;t:switch(dt){case 1:dt=0,fr=null,Ko(r,i,m,1);break;case 2:case 9:if($v(m)){dt=0,fr=null,UE(i);break}i=function(){dt!==2&&dt!==9||wt!==r||(dt=7),yi(r)},m.then(i,i);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:$v(m)?(dt=0,fr=null,UE(i)):(dt=0,fr=null,Ko(r,i,m,7));break;case 5:var _=null;switch(Je.tag){case 26:_=Je.memoizedState;case 5:case 27:var R=Je;if(_?bT(_):R.stateNode.complete){dt=0,fr=null;var k=R.sibling;if(k!==null)Je=k;else{var W=R.return;W!==null?(Je=W,Df(W)):Je=null}break t}}dt=0,fr=null,Ko(r,i,m,5);break;case 6:dt=0,fr=null,Ko(r,i,m,6);break;case 8:lp(),qt=6;break e;default:throw Error(a(462))}}k1();break}catch(ie){ME(r,ie)}while(!0);return ki=Ls=null,Q.H=u,Q.A=h,ft=o,Je!==null?0:(wt=null,et=0,$c(),qt)}function k1(){for(;Je!==null&&!Pl();)kE(Je)}function kE(r){var i=oE(r.alternate,r,$i);r.memoizedProps=r.pendingProps,i===null?Df(r):Je=i}function UE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=tE(o,i,i.pendingProps,i.type,void 0,et);break;case 11:i=tE(o,i,i.pendingProps,i.type.render,i.ref,et);break;case 5:wm(i);default:uE(o,i),i=Je=Lv(i,$i),i=oE(o,i,$i)}r.memoizedProps=r.pendingProps,i===null?Df(r):Je=i}function Ko(r,i,o,u){ki=Ls=null,wm(i),Po=null,eu=0;var h=i.return;try{if(A1(r,h,i,o,et)){qt=1,gf(r,Rr(o,r.current)),Je=null;return}}catch(m){if(h!==null)throw Je=h,m;qt=1,gf(r,Rr(o,r.current)),Je=null;return}i.flags&32768?(at||u===1?r=!0:Fo||(et&536870912)!==0?r=!1:(Va=r=!0,(u===2||u===9||u===3||u===6)&&(u=ur.current,u!==null&&u.tag===13&&(u.flags|=16384))),jE(i,r)):Df(i)}function Df(r){var i=r;do{if((i.flags&32768)!==0){jE(i,Va);return}r=i.return;var o=I1(i.alternate,i,$i);if(o!==null){Je=o;return}if(i=i.sibling,i!==null){Je=i;return}Je=i=r}while(i!==null);qt===0&&(qt=5)}function jE(r,i){do{var o=D1(r.alternate,r);if(o!==null){o.flags&=32767,Je=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){Je=r;return}Je=r=o}while(r!==null);qt=6,Je=null}function zE(r,i,o,u,h,m,_,R,k){r.cancelPendingCommit=null;do Nf();while(ln!==0);if((ft&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=Wd,Ll(r,o,m,_,R,k),r===wt&&(Je=wt=null,et=0),qo=i,ka=r,Yi=o,ap=m,sp=h,DE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,B1(fn,function(){return GE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,h=ce.p,ce.p=2,_=ft,ft|=4;try{N1(r,i,o)}finally{ft=_,ce.p=h,Q.T=u}}ln=1,BE(),FE(),HE()}}function BE(){if(ln===1){ln=0;var r=ka,i=qo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null;var u=ce.p;ce.p=2;var h=ft;ft|=4;try{TE(i,r);var m=Tp,_=Cv(r.containerInfo),R=m.focusedElem,k=m.selectionRange;if(_!==R&&R&&R.ownerDocument&&Rv(R.ownerDocument.documentElement,R)){if(k!==null&&Kd(R)){var W=k.start,ie=k.end;if(ie===void 0&&(ie=W),"selectionStart"in R)R.selectionStart=W,R.selectionEnd=Math.min(ie,R.value.length);else{var le=R.ownerDocument||document,Z=le&&le.defaultView||window;if(Z.getSelection){var ne=Z.getSelection(),we=R.textContent.length,Me=Math.min(k.start,we),Tt=k.end===void 0?Me:Math.min(k.end,we);!ne.extend&&Me>Tt&&(_=Tt,Tt=Me,Me=_);var q=Av(R,Me),B=Av(R,Tt);if(q&&B&&(ne.rangeCount!==1||ne.anchorNode!==q.node||ne.anchorOffset!==q.offset||ne.focusNode!==B.node||ne.focusOffset!==B.offset)){var X=le.createRange();X.setStart(q.node,q.offset),ne.removeAllRanges(),Me>Tt?(ne.addRange(X),ne.extend(B.node,B.offset)):(X.setEnd(B.node,B.offset),ne.addRange(X))}}}}for(le=[],ne=R;ne=ne.parentNode;)ne.nodeType===1&&le.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<le.length;R++){var se=le[R];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Ff=!!Ep,Tp=Ep=null}finally{ft=h,ce.p=u,Q.T=o}}r.current=i,ln=2}}function FE(){if(ln===2){ln=0;var r=ka,i=qo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=Q.T,Q.T=null;var u=ce.p;ce.p=2;var h=ft;ft|=4;try{gE(r,i.alternate,i)}finally{ft=h,ce.p=u,Q.T=o}}ln=3}}function HE(){if(ln===4||ln===3){ln=0,fo();var r=ka,i=qo,o=Yi,u=DE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ln=5:(ln=0,qo=ka=null,qE(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(La=null),fe(o),i=i.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(nr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=Q.T,h=ce.p,ce.p=2,Q.T=null;try{for(var m=r.onRecoverableError,_=0;_<u.length;_++){var R=u[_];m(R.value,{componentStack:R.stack})}}finally{Q.T=i,ce.p=h}}(Yi&3)!==0&&Nf(),yi(r),h=r.pendingLanes,(o&261930)!==0&&(h&42)!==0?r===op?yu++:(yu=0,op=r):yu=0,vu(0)}}function qE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,Jl(i)))}function Nf(){return BE(),FE(),HE(),GE()}function GE(){if(ln!==5)return!1;var r=ka,i=ap;ap=0;var o=fe(Yi),u=Q.T,h=ce.p;try{ce.p=32>o?32:o,Q.T=null,o=sp,sp=null;var m=ka,_=Yi;if(ln=0,qo=ka=null,Yi=0,(ft&6)!==0)throw Error(a(331));var R=ft;if(ft|=4,RE(m.current),bE(m,m.current,_,o),ft=R,vu(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(nr,m)}catch{}return!0}finally{ce.p=h,Q.T=u,qE(r,i)}}function KE(r,i,o){i=Rr(o,i),i=jm(r.stateNode,i,2),r=Na(r,i,2),r!==null&&(ii(r,2),yi(r))}function mt(r,i,o){if(r.tag===3)KE(r,r,o);else for(;i!==null;){if(i.tag===3){KE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(La===null||!La.has(u))){r=Rr(o,r),o=$_(2),u=Na(i,o,2),u!==null&&(Y_(o,u,i,r),ii(u,2),yi(u));break}}i=i.return}}function cp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new M1;var h=new Set;u.set(i,h)}else h=u.get(i),h===void 0&&(h=new Set,u.set(i,h));h.has(o)||(np=!0,h.add(o),r=U1.bind(null,r,i,o),i.then(r,r))}function U1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,wt===r&&(et&o)===o&&(qt===4||qt===3&&(et&62914560)===et&&300>zt()-wf?(ft&2)===0&&Go(r,0):rp|=o,Ho===et&&(Ho=0)),yi(r)}function $E(r,i){i===0&&(i=Ni()),r=Ms(r,i),r!==null&&(ii(r,i),yi(r))}function j1(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),$E(r,o)}function z1(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),$E(r,o)}function B1(r,i){return $t(r,i)}var xf=null,$o=null,fp=!1,Of=!1,hp=!1,ja=0;function yi(r){r!==$o&&r.next===null&&($o===null?xf=$o=r:$o=$o.next=r),Of=!0,fp||(fp=!0,H1())}function vu(r,i){if(!hp&&Of){hp=!0;do for(var o=!1,u=xf;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var _=u.suspendedLanes,R=u.pingedLanes;m=(1<<31-Vt(42|r)+1)-1,m&=h&~(_&~R),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,WE(u,m))}else m=et,m=rr(u,u===wt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||ir(u,m)||(o=!0,WE(u,m));u=u.next}while(o);hp=!1}}function F1(){YE()}function YE(){Of=fp=!1;var r=0;ja!==0&&Z1()&&(r=ja);for(var i=zt(),o=null,u=xf;u!==null;){var h=u.next,m=QE(u,i);m===0?(u.next=null,o===null?xf=h:o.next=h,h===null&&($o=o)):(o=u,(r!==0||(m&3)!==0)&&(Of=!0)),u=h}ln!==0&&ln!==5||vu(r),ja!==0&&(ja=0)}function QE(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var _=31-Vt(m),R=1<<_,k=h[_];k===-1?((R&o)===0||(R&u)!==0)&&(h[_]=mo(R,i)):k<=i&&(r.expiredLanes|=R),m&=~R}if(i=wt,o=et,o=rr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(dt===2||dt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&ni(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||ir(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&ni(u),fe(o)){case 2:case 8:o=Di;break;case 32:o=fn;break;case 268435456:o=_s;break;default:o=fn}return u=XE.bind(null,r),o=$t(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&ni(u),r.callbackPriority=2,r.callbackNode=null,2}function XE(r,i){if(ln!==0&&ln!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Nf()&&r.callbackNode!==o)return null;var u=et;return u=rr(r,r===wt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(xE(r,u,i),QE(r,zt()),r.callbackNode!=null&&r.callbackNode===o?XE.bind(null,r):null)}function WE(r,i){if(Nf())return null;xE(r,i,!0)}function H1(){tC(function(){(ft&6)!==0?$t(ha,F1):YE()})}function dp(){if(ja===0){var r=Oo;r===0&&(r=Pn,Pn<<=1,(Pn&261888)===0&&(Pn=256)),ja=r}return ja}function JE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:yo(""+r)}function ZE(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function q1(r,i,o,u,h){if(i==="submit"&&o&&o.stateNode===h){var m=JE((h[ye]||null).action),_=u.submitter;_&&(i=(i=_[ye]||null)?JE(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var R=new ci("action","action",null,u,h);r.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ja!==0){var k=_?ZE(h,_):new FormData(h);Mm(o,{pending:!0,data:k,method:h.method,action:m},null,k)}}else typeof m=="function"&&(R.preventDefault(),k=_?ZE(h,_):new FormData(h),Mm(o,{pending:!0,data:k,method:h.method,action:m},m,k))},currentTarget:h}]})}}for(var mp=0;mp<Xd.length;mp++){var pp=Xd[mp],G1=pp.toLowerCase(),K1=pp[0].toUpperCase()+pp.slice(1);Gr(G1,"on"+K1)}Gr(Nv,"onAnimationEnd"),Gr(xv,"onAnimationIteration"),Gr(Ov,"onAnimationStart"),Gr("dblclick","onDoubleClick"),Gr("focusin","onFocus"),Gr("focusout","onBlur"),Gr(l1,"onTransitionRun"),Gr(u1,"onTransitionStart"),Gr(c1,"onTransitionCancel"),Gr(Mv,"onTransitionEnd"),Rn("onMouseEnter",["mouseout","mouseover"]),Rn("onMouseLeave",["mouseout","mouseover"]),Rn("onPointerEnter",["pointerout","pointerover"]),Rn("onPointerLeave",["pointerout","pointerover"]),Fn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function eT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],h=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var R=u[_],k=R.instance,W=R.currentTarget;if(R=R.listener,k!==m&&h.isPropagationStopped())break e;m=R,h.currentTarget=W;try{m(h)}catch(ie){Kc(ie)}h.currentTarget=null,m=k}else for(_=0;_<u.length;_++){if(R=u[_],k=R.instance,W=R.currentTarget,R=R.listener,k!==m&&h.isPropagationStopped())break e;m=R,h.currentTarget=W;try{m(h)}catch(ie){Kc(ie)}h.currentTarget=null,m=k}}}}function Ze(r,i){var o=i[Pe];o===void 0&&(o=i[Pe]=new Set);var u=r+"__bubble";o.has(u)||(tT(i,r,2,!1),o.add(u))}function gp(r,i,o){var u=0;i&&(u|=4),tT(o,r,u,i)}var Mf="_reactListening"+Math.random().toString(36).slice(2);function yp(r){if(!r[Mf]){r[Mf]=!0,Bn.forEach(function(o){o!=="selectionchange"&&($1.has(o)||gp(o,!1,r),gp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Mf]||(i[Mf]=!0,gp("selectionchange",!1,i))}}function tT(r,i,o,u){switch(NT(i)){case 2:var h=TC;break;case 8:h=SC;break;default:h=Op}o=h.bind(null,i,o,r),h=void 0,!As||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(i,o,{capture:!0,passive:h}):r.addEventListener(i,o,!0):h!==void 0?r.addEventListener(i,o,{passive:h}):r.addEventListener(i,o,!1)}function vp(r,i,o,u,h){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===h)break;if(_===4)for(_=u.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;R!==null;){if(_=Rt(R),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){u=m=_;continue e}R=R.parentNode}}u=u.return}Ea(function(){var W=m,ie=Sr(o),le=[];e:{var Z=Vv.get(r);if(Z!==void 0){var ne=ci,we=r;switch(r){case"keypress":if(Cs(o)===0)break e;case"keydown":case"keyup":ne=Hc;break;case"focusin":we="focus",ne=Ds;break;case"focusout":we="blur",ne=Ds;break;case"beforeblur":case"afterblur":ne=Ds;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=ql;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=y;break;case Nv:case xv:case Ov:ne=Lc;break;case Mv:ne=D;break;case"scroll":case"scrollend":ne=Hl;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=kc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Vi;break;case"toggle":case"beforetoggle":ne=He}var Me=(i&4)!==0,Tt=!Me&&(r==="scroll"||r==="scrollend"),q=Me?Z!==null?Z+"Capture":null:Z;Me=[];for(var B=W,X;B!==null;){var se=B;if(X=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||X===null||q===null||(se=Br(B,q),se!=null&&Me.push(Eu(B,se,X))),Tt)break;B=B.return}0<Me.length&&(Z=new ne(Z,we,null,o,ie),le.push({event:Z,listeners:Me}))}}if((i&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",Z&&o!==zl&&(we=o.relatedTarget||o.fromElement)&&(Rt(we)||we[Se]))break e;if((ne||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,ne?(we=o.relatedTarget||o.toElement,ne=W,we=we?Rt(we):null,we!==null&&(Tt=l(we),Me=we.tag,we!==Tt||Me!==5&&Me!==27&&Me!==6)&&(we=null)):(ne=null,we=W),ne!==we)){if(Me=ql,se="onMouseLeave",q="onMouseEnter",B="mouse",(r==="pointerout"||r==="pointerover")&&(Me=Vi,se="onPointerLeave",q="onPointerEnter",B="pointer"),Tt=ne==null?Z:Ct(ne),X=we==null?Z:Ct(we),Z=new Me(se,B+"leave",ne,o,ie),Z.target=Tt,Z.relatedTarget=X,se=null,Rt(ie)===W&&(Me=new Me(q,B+"enter",we,o,ie),Me.target=X,Me.relatedTarget=Tt,se=Me),Tt=se,ne&&we)t:{for(Me=Y1,q=ne,B=we,X=0,se=q;se;se=Me(se))X++;se=0;for(var Ne=B;Ne;Ne=Me(Ne))se++;for(;0<X-se;)q=Me(q),X--;for(;0<se-X;)B=Me(B),se--;for(;X--;){if(q===B||B!==null&&q===B.alternate){Me=q;break t}q=Me(q),B=Me(B)}Me=null}else Me=null;ne!==null&&nT(le,Z,ne,Me,!1),we!==null&&Tt!==null&&nT(le,Tt,we,Me,!0)}}e:{if(Z=W?Ct(W):window,ne=Z.nodeName&&Z.nodeName.toLowerCase(),ne==="select"||ne==="input"&&Z.type==="file")var ot=_v;else if(yv(Z))if(Ev)ot=a1;else{ot=r1;var Ce=n1}else ne=Z.nodeName,!ne||ne.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&go(W.elementType)&&(ot=_v):ot=i1;if(ot&&(ot=ot(r,W))){vv(le,ot,o,ie);break e}Ce&&Ce(r,Z,W),r==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&kl(Z,"number",Z.value)}switch(Ce=W?Ct(W):window,r){case"focusin":(yv(Ce)||Ce.contentEditable==="true")&&(wo=Ce,$d=W,Ql=null);break;case"focusout":Ql=$d=wo=null;break;case"mousedown":Yd=!0;break;case"contextmenu":case"mouseup":case"dragend":Yd=!1,Iv(le,o,ie);break;case"selectionchange":if(o1)break;case"keydown":case"keyup":Iv(le,o,ie)}var $e;if(ct)e:{switch(r){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else bo?Ns(r,o)&&(tt="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(tt="onCompositionStart");tt&&(di&&o.locale!=="ko"&&(bo||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&bo&&($e=Fl()):(ui=ie,Bl="value"in ui?ui.value:ui.textContent,bo=!0)),Ce=Vf(W,tt),0<Ce.length&&(tt=new hi(tt,r,null,o,ie),le.push({event:tt,listeners:Ce}),$e?tt.data=$e:($e=So(o),$e!==null&&(tt.data=$e)))),($e=wr?JR(r,o):ZR(r,o))&&(tt=Vf(W,"onBeforeInput"),0<tt.length&&(Ce=new hi("onBeforeInput","beforeinput",null,o,ie),le.push({event:Ce,listeners:tt}),Ce.data=$e)),q1(le,r,W,o,ie)}eT(le,i)})}function Eu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Vf(r,i){for(var o=i+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=Br(r,o),h!=null&&u.unshift(Eu(r,h,m)),h=Br(r,i),h!=null&&u.push(Eu(r,h,m))),r.tag===3)return u;r=r.return}return[]}function Y1(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function nT(r,i,o,u,h){for(var m=i._reactName,_=[];o!==null&&o!==u;){var R=o,k=R.alternate,W=R.stateNode;if(R=R.tag,k!==null&&k===u)break;R!==5&&R!==26&&R!==27||W===null||(k=W,h?(W=Br(o,m),W!=null&&_.unshift(Eu(o,W,k))):h||(W=Br(o,m),W!=null&&_.push(Eu(o,W,k)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var Q1=/\r\n?/g,X1=/\u0000|\uFFFD/g;function rT(r){return(typeof r=="string"?r:""+r).replace(Q1,`
`).replace(X1,"")}function iT(r,i){return i=rT(i),rT(r)===i}function Et(r,i,o,u,h,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||qn(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&qn(r,""+u);break;case"className":Zt(r,"class",u);break;case"tabIndex":Zt(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Zt(r,o,u);break;case"style":jl(r,u,m);break;case"data":if(i!=="object"){Zt(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Et(r,i,"name",h.name,h,null),Et(r,i,"formEncType",h.formEncType,h,null),Et(r,i,"formMethod",h.formMethod,h,null),Et(r,i,"formTarget",h.formTarget,h,null)):(Et(r,i,"encType",h.encType,h,null),Et(r,i,"method",h.method,h,null),Et(r,i,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=yo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=zr);break;case"onScroll":u!=null&&Ze("scroll",r);break;case"onScrollEnd":u!=null&&Ze("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=yo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ze("beforetoggle",r),Ze("toggle",r),Bt(r,"popover",u);break;case"xlinkActuate":yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Bt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Mc.get(o)||o,Bt(r,o,u))}}function _p(r,i,o,u,h,m){switch(o){case"style":jl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(h.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qn(r,u):(typeof u=="number"||typeof u=="bigint")&&qn(r,""+u);break;case"onScroll":u!=null&&Ze("scroll",r);break;case"onScrollEnd":u!=null&&Ze("scrollend",r);break;case"onClick":u!=null&&(r.onclick=zr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!An.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),i=o.slice(2,h?o.length-7:void 0),m=r[ye]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,h);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Bt(r,o,u)}}}function _n(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",r),Ze("load",r);var u=!1,h=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Et(r,i,m,_,o,null)}}h&&Et(r,i,"srcSet",o.srcSet,o,null),u&&Et(r,i,"src",o.src,o,null);return;case"input":Ze("invalid",r);var R=m=_=h=null,k=null,W=null;for(u in o)if(o.hasOwnProperty(u)){var ie=o[u];if(ie!=null)switch(u){case"name":h=ie;break;case"type":_=ie;break;case"checked":k=ie;break;case"defaultChecked":W=ie;break;case"value":m=ie;break;case"defaultValue":R=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:Et(r,i,u,ie,o,null)}}Nc(r,m,R,k,W,_,h,!1);return;case"select":Ze("invalid",r),u=_=m=null;for(h in o)if(o.hasOwnProperty(h)&&(R=o[h],R!=null))switch(h){case"value":m=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:Et(r,i,h,R,o,null)}i=m,o=_,r.multiple=!!u,i!=null?ga(r,!!u,i,!1):o!=null&&ga(r,!!u,o,!0);return;case"textarea":Ze("invalid",r),m=h=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":h=R;break;case"children":m=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:Et(r,i,_,R,o,null)}ya(r,u,h,m);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Et(r,i,k,u,o,null)}return;case"dialog":Ze("beforetoggle",r),Ze("toggle",r),Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":Ze("load",r);break;case"video":case"audio":for(u=0;u<_u.length;u++)Ze(_u[u],r);break;case"image":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"embed":case"source":case"link":Ze("error",r),Ze("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(u=o[W],u!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Et(r,i,W,u,o,null)}return;default:if(go(i)){for(ie in o)o.hasOwnProperty(ie)&&(u=o[ie],u!==void 0&&_p(r,i,ie,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&Et(r,i,R,u,o,null))}function W1(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,_=null,R=null,k=null,W=null,ie=null;for(ne in o){var le=o[ne];if(o.hasOwnProperty(ne)&&le!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":k=le;default:u.hasOwnProperty(ne)||Et(r,i,ne,null,u,le)}}for(var Z in u){var ne=u[Z];if(le=o[Z],u.hasOwnProperty(Z)&&(ne!=null||le!=null))switch(Z){case"type":m=ne;break;case"name":h=ne;break;case"checked":W=ne;break;case"defaultChecked":ie=ne;break;case"value":_=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:ne!==le&&Et(r,i,Z,ne,u,le)}}po(r,_,R,k,W,ie,m,h);return;case"select":ne=_=R=Z=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":ne=k;default:u.hasOwnProperty(m)||Et(r,i,m,null,u,k)}for(h in u)if(m=u[h],k=o[h],u.hasOwnProperty(h)&&(m!=null||k!=null))switch(h){case"value":Z=m;break;case"defaultValue":R=m;break;case"multiple":_=m;default:m!==k&&Et(r,i,h,m,u,k)}i=R,o=_,u=ne,Z!=null?ga(r,!!o,Z,!1):!!u!=!!o&&(i!=null?ga(r,!!o,i,!0):ga(r,!!o,o?[]:"",!1));return;case"textarea":ne=Z=null;for(R in o)if(h=o[R],o.hasOwnProperty(R)&&h!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Et(r,i,R,null,u,h)}for(_ in u)if(h=u[_],m=o[_],u.hasOwnProperty(_)&&(h!=null||m!=null))switch(_){case"value":Z=h;break;case"defaultValue":ne=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(a(91));break;default:h!==m&&Et(r,i,_,h,u,m)}xc(r,Z,ne);return;case"option":for(var we in o)if(Z=o[we],o.hasOwnProperty(we)&&Z!=null&&!u.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:Et(r,i,we,null,u,Z)}for(k in u)if(Z=u[k],ne=o[k],u.hasOwnProperty(k)&&Z!==ne&&(Z!=null||ne!=null))switch(k){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Et(r,i,k,Z,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in o)Z=o[Me],o.hasOwnProperty(Me)&&Z!=null&&!u.hasOwnProperty(Me)&&Et(r,i,Me,null,u,Z);for(W in u)if(Z=u[W],ne=o[W],u.hasOwnProperty(W)&&Z!==ne&&(Z!=null||ne!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,i));break;default:Et(r,i,W,Z,u,ne)}return;default:if(go(i)){for(var Tt in o)Z=o[Tt],o.hasOwnProperty(Tt)&&Z!==void 0&&!u.hasOwnProperty(Tt)&&_p(r,i,Tt,void 0,u,Z);for(ie in u)Z=u[ie],ne=o[ie],!u.hasOwnProperty(ie)||Z===ne||Z===void 0&&ne===void 0||_p(r,i,ie,Z,u,ne);return}}for(var q in o)Z=o[q],o.hasOwnProperty(q)&&Z!=null&&!u.hasOwnProperty(q)&&Et(r,i,q,null,u,Z);for(le in u)Z=u[le],ne=o[le],!u.hasOwnProperty(le)||Z===ne||Z==null&&ne==null||Et(r,i,le,Z,u,ne)}function aT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function J1(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var h=o[u],m=h.transferSize,_=h.initiatorType,R=h.duration;if(m&&R&&aT(_)){for(_=0,R=h.responseEnd,u+=1;u<o.length;u++){var k=o[u],W=k.startTime;if(W>R)break;var ie=k.transferSize,le=k.initiatorType;ie&&aT(le)&&(k=k.responseEnd,_+=ie*(k<R?1:(R-W)/(k-W)))}if(--u,i+=8*(m+_)/(h.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ep=null,Tp=null;function Pf(r){return r.nodeType===9?r:r.ownerDocument}function sT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Sp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var bp=null;function Z1(){var r=window.event;return r&&r.type==="popstate"?r===bp?!1:(bp=r,!0):(bp=null,!1)}var lT=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,uT=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof uT<"u"?function(r){return uT.resolve(null).then(r).catch(nC)}:lT;function nC(r){setTimeout(function(){throw r})}function za(r){return r==="head"}function cT(r,i){var o=i,u=0;do{var h=o.nextSibling;if(r.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(h),Wo(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Tu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Tu(o);for(var m=o.firstChild;m;){var _=m.nextSibling,R=m.nodeName;m[gt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Tu(r.ownerDocument.body);o=h}while(o);Wo(i)}function fT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function wp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":wp(o),Nt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function rC(r,i,o,u){for(;r.nodeType===1;){var h=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[gt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=xr(r.nextSibling),r===null)break}return null}function iC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=xr(r.nextSibling),r===null))return null;return r}function hT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=xr(r.nextSibling),r===null))return null;return r}function Ap(r){return r.data==="$?"||r.data==="$~"}function Rp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function aC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function xr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Cp=null;function dT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return xr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function mT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function pT(r,i,o){switch(i=Pf(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Tu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Nt(r)}var Or=new Map,gT=new Set;function Lf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Qi=ce.d;ce.d={f:sC,r:oC,D:lC,C:uC,L:cC,m:fC,X:dC,S:hC,M:mC};function sC(){var r=Qi.f(),i=Cf();return r||i}function oC(r){var i=Ge(r);i!==null&&i.tag===5&&i.type==="form"?M_(i):Qi.r(r)}var Yo=typeof document>"u"?null:document;function yT(r,i,o){var u=Yo;if(u&&typeof i=="string"&&i){var h=Hn(i);h='link[rel="'+r+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),gT.has(h)||(gT.add(h),r={rel:r,crossOrigin:o,href:i},u.querySelector(h)===null&&(i=u.createElement("link"),_n(i,"link",r),It(i),u.head.appendChild(i)))}}function lC(r){Qi.D(r),yT("dns-prefetch",r,null)}function uC(r,i){Qi.C(r,i),yT("preconnect",r,i)}function cC(r,i,o){Qi.L(r,i,o);var u=Yo;if(u&&r&&i){var h='link[rel="preload"][as="'+Hn(i)+'"]';i==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+Hn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+Hn(o.imageSizes)+'"]')):h+='[href="'+Hn(r)+'"]';var m=h;switch(i){case"style":m=Qo(r);break;case"script":m=Xo(r)}Or.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Or.set(m,r),u.querySelector(h)!==null||i==="style"&&u.querySelector(Su(m))||i==="script"&&u.querySelector(bu(m))||(i=u.createElement("link"),_n(i,"link",r),It(i),u.head.appendChild(i)))}}function fC(r,i){Qi.m(r,i);var o=Yo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Hn(u)+'"][href="'+Hn(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Xo(r)}if(!Or.has(m)&&(r=E({rel:"modulepreload",href:r},i),Or.set(m,r),o.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bu(m)))return}u=o.createElement("link"),_n(u,"link",r),It(u),o.head.appendChild(u)}}}function hC(r,i,o){Qi.S(r,i,o);var u=Yo;if(u&&r){var h=hn(u).hoistableStyles,m=Qo(r);i=i||"default";var _=h.get(m);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(Su(m)))R.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Or.get(m))&&Ip(r,o);var k=_=u.createElement("link");It(k),_n(k,"link",r),k._p=new Promise(function(W,ie){k.onload=W,k.onerror=ie}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,kf(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:R},h.set(m,_)}}}function dC(r,i){Qi.X(r,i);var o=Yo;if(o&&r){var u=hn(o).hoistableScripts,h=Xo(r),m=u.get(h);m||(m=o.querySelector(bu(h)),m||(r=E({src:r,async:!0},i),(i=Or.get(h))&&Dp(r,i),m=o.createElement("script"),It(m),_n(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function mC(r,i){Qi.M(r,i);var o=Yo;if(o&&r){var u=hn(o).hoistableScripts,h=Xo(r),m=u.get(h);m||(m=o.querySelector(bu(h)),m||(r=E({src:r,async:!0,type:"module"},i),(i=Or.get(h))&&Dp(r,i),m=o.createElement("script"),It(m),_n(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function vT(r,i,o,u){var h=(h=Oe.current)?Lf(h):null;if(!h)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Qo(o.href),o=hn(h).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Qo(o.href);var m=hn(h).hoistableStyles,_=m.get(r);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,_),(m=h.querySelector(Su(r)))&&!m._p&&(_.instance=m,_.state.loading=5),Or.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Or.set(r,o),m||pC(h,r,o,_.state))),i&&u===null)throw Error(a(528,""));return _}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Xo(o),o=hn(h).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Qo(r){return'href="'+Hn(r)+'"'}function Su(r){return'link[rel="stylesheet"]['+r+"]"}function _T(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function pC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),_n(i,"link",o),It(i),r.head.appendChild(i))}function Xo(r){return'[src="'+Hn(r)+'"]'}function bu(r){return"script[async]"+r}function ET(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+Hn(o.href)+'"]');if(u)return i.instance=u,It(u),u;var h=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),It(u),_n(u,"style",h),kf(u,o.precedence,r),i.instance=u;case"stylesheet":h=Qo(o.href);var m=r.querySelector(Su(h));if(m)return i.state.loading|=4,i.instance=m,It(m),m;u=_T(o),(h=Or.get(h))&&Ip(u,h),m=(r.ownerDocument||r).createElement("link"),It(m);var _=m;return _._p=new Promise(function(R,k){_.onload=R,_.onerror=k}),_n(m,"link",u),i.state.loading|=4,kf(m,o.precedence,r),i.instance=m;case"script":return m=Xo(o.src),(h=r.querySelector(bu(m)))?(i.instance=h,It(h),h):(u=o,(h=Or.get(m))&&(u=E({},o),Dp(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),It(h),_n(h,"link",u),r.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,kf(u,o.precedence,r));return i.instance}function kf(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===i)m=R;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Ip(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Dp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Uf=null;function TT(r,i,o){if(Uf===null){var u=new Map,h=Uf=new Map;h.set(o,u)}else h=Uf,u=h.get(o),u||(u=new Map,h.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),h=0;h<o.length;h++){var m=o[h];if(!(m[gt]||m[me]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=r+_;var R=u.get(_);R?R.push(m):u.set(_,[m])}}return u}function ST(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function gC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function bT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function yC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var h=Qo(u.href),m=i.querySelector(Su(h));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=jf.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,It(m);return}m=i.ownerDocument||i,u=_T(u),(h=Or.get(h))&&Ip(u,h),m=m.createElement("link"),It(m);var _=m;_._p=new Promise(function(R,k){_.onload=R,_.onerror=k}),_n(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=jf.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Np=0;function vC(r,i){return r.stylesheets&&r.count===0&&Bf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Bf(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Np===0&&(Np=62500*J1());var h=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Bf(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Np?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function jf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Bf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var zf=null;function Bf(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,zf=new Map,i.forEach(_C,r),zf=null,jf.call(r))}function _C(r,i){if(!(i.state.loading&4)){var o=zf.get(r);if(o)var u=o.get(null);else{o=new Map,zf.set(r,o);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var _=h[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}h=i.instance,_=h.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,h),o.set(_,h),this.count++,u=jf.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),i.state.loading|=4}}var wu={$$typeof:K,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function EC(r,i,o,u,h,m,_,R,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ln(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ln(0),this.hiddenUpdates=Ln(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function wT(r,i,o,u,h,m,_,R,k,W,ie,le){return r=new EC(r,i,o,_,k,W,ie,le,R),i=1,m===!0&&(i|=24),m=lr(3,null,null,i),r.current=m,m.stateNode=r,i=um(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},dm(m),r}function AT(r){return r?(r=Co,r):Co}function RT(r,i,o,u,h,m){h=AT(h),u.context===null?u.context=h:u.pendingContext=h,u=Da(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Na(r,u,i),o!==null&&(Qn(o,r,i),nu(o,r,i))}function CT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function xp(r,i){CT(r,i),(r=r.alternate)&&CT(r,i)}function IT(r){if(r.tag===13||r.tag===31){var i=Ms(r,67108864);i!==null&&Qn(i,r,67108864),xp(r,67108864)}}function DT(r){if(r.tag===13||r.tag===31){var i=dr();i=J(i);var o=Ms(r,i);o!==null&&Qn(o,r,i),xp(r,i)}}var Ff=!0;function TC(r,i,o,u){var h=Q.T;Q.T=null;var m=ce.p;try{ce.p=2,Op(r,i,o,u)}finally{ce.p=m,Q.T=h}}function SC(r,i,o,u){var h=Q.T;Q.T=null;var m=ce.p;try{ce.p=8,Op(r,i,o,u)}finally{ce.p=m,Q.T=h}}function Op(r,i,o,u){if(Ff){var h=Mp(u);if(h===null)vp(r,i,u,Hf,o),xT(r,u);else if(wC(h,r,i,o,u))u.stopPropagation();else if(xT(r,u),i&4&&-1<bC.indexOf(r)){for(;h!==null;){var m=Ge(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Tr(m.pendingLanes);if(_!==0){var R=m;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var k=1<<31-Vt(_);R.entanglements[1]|=k,_&=~k}yi(m),(ft&6)===0&&(Af=zt()+500,vu(0))}}break;case 31:case 13:R=Ms(m,2),R!==null&&Qn(R,m,2),Cf(),xp(m,2)}if(m=Mp(u),m===null&&vp(r,i,u,Hf,o),m===h)break;h=m}h!==null&&u.stopPropagation()}else vp(r,i,u,null,o)}}function Mp(r){return r=Sr(r),Vp(r)}var Hf=null;function Vp(r){if(Hf=null,r=Rt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Hf=r,null}function NT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(er()){case ha:return 2;case Di:return 8;case fn:case tr:return 32;case _s:return 268435456;default:return 32}default:return 32}}var Pp=!1,Ba=null,Fa=null,Ha=null,Au=new Map,Ru=new Map,qa=[],bC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xT(r,i){switch(r){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Au.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(i.pointerId)}}function Cu(r,i,o,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},i!==null&&(i=Ge(i),i!==null&&IT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),r)}function wC(r,i,o,u,h){switch(i){case"focusin":return Ba=Cu(Ba,r,i,o,u,h),!0;case"dragenter":return Fa=Cu(Fa,r,i,o,u,h),!0;case"mouseover":return Ha=Cu(Ha,r,i,o,u,h),!0;case"pointerover":var m=h.pointerId;return Au.set(m,Cu(Au.get(m)||null,r,i,o,u,h)),!0;case"gotpointercapture":return m=h.pointerId,Ru.set(m,Cu(Ru.get(m)||null,r,i,o,u,h)),!0}return!1}function OT(r){var i=Rt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Ee(r.priority,function(){DT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Ee(r.priority,function(){DT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Mp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);zl=u,o.target.dispatchEvent(u),zl=null}else return i=Ge(o),i!==null&&IT(i),r.blockedOn=o,!1;i.shift()}return!0}function MT(r,i,o){qf(r)&&o.delete(i)}function AC(){Pp=!1,Ba!==null&&qf(Ba)&&(Ba=null),Fa!==null&&qf(Fa)&&(Fa=null),Ha!==null&&qf(Ha)&&(Ha=null),Au.forEach(MT),Ru.forEach(MT)}function Gf(r,i){r.blockedOn===i&&(r.blockedOn=null,Pp||(Pp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,AC)))}var Kf=null;function VT(r){Kf!==r&&(Kf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kf===r&&(Kf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],h=r[i+2];if(typeof u!="function"){if(Vp(u||o)===null)continue;break}var m=Ge(o);m!==null&&(r.splice(i,3),i-=3,Mm(m,{pending:!0,data:h,method:o.method,action:u},u,h))}}))}function Wo(r){function i(k){return Gf(k,r)}Ba!==null&&Gf(Ba,r),Fa!==null&&Gf(Fa,r),Ha!==null&&Gf(Ha,r),Au.forEach(i),Ru.forEach(i);for(var o=0;o<qa.length;o++){var u=qa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<qa.length&&(o=qa[0],o.blockedOn===null);)OT(o),o.blockedOn===null&&qa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var h=o[u],m=o[u+1],_=h[ye]||null;if(typeof m=="function")_||VT(o);else if(_){var R=null;if(m&&m.hasAttribute("formAction")){if(h=m,_=m[ye]||null)R=_.formAction;else if(Vp(h)!==null)continue}else R=_.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),VT(o)}}}function PT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function Lp(r){this._internalRoot=r}$f.prototype.render=Lp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=dr();RT(o,u,r,i,null,null)},$f.prototype.unmount=Lp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;RT(r.current,2,null,r,null,null),Cf(),i[Se]=null}};function $f(r){this._internalRoot=r}$f.prototype.unstable_scheduleHydration=function(r){if(r){var i=de();r={blockedOn:null,target:r,priority:i};for(var o=0;o<qa.length&&i!==0&&i<qa[o].priority;o++);qa.splice(o,0,r),o===0&&OT(r)}};var LT=e.version;if(LT!=="19.2.4")throw Error(a(527,LT,"19.2.4"));ce.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var RC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{nr=Yf.inject(RC),bt=Yf}catch{}}return Du.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",h=H_,m=q_,_=G_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=wT(r,1,!1,null,null,o,u,null,h,m,_,PT),r[Se]=i.current,yp(r),new Lp(i)},Du.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,h="",m=H_,_=q_,R=G_,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),i=wT(r,1,!0,i,o??null,u,h,k,m,_,R,PT),i.context=AT(null),o=i.current,u=dr(),u=J(u),h=Da(u),h.callback=null,Na(o,h,u),o=u,i.current.lanes=o,ii(i,o),yi(i),r[Se]=i.current,yp(r),new $f(i)},Du.version="19.2.4",Du}var KT;function jC(){if(KT)return zp.exports;KT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),zp.exports=UC(),zp.exports}var zC=jC();const BC=yb(zC);var qp={exports:{}},Gp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function FC(){if($T)return Gp;$T=1;var n=ld();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Gp.useSyncExternalStoreWithSelector=function(p,g,v,E,b){var C=s(null);if(C.current===null){var V={hasValue:!1,value:null};C.current=V}else V=C.current;C=c(function(){function L(ae){if(!G){if(G=!0,F=ae,ae=E(ae),b!==void 0&&V.hasValue){var Y=V.value;if(b(Y,ae))return K=Y}return K=ae}if(Y=K,t(F,ae))return Y;var S=E(ae);return b!==void 0&&b(Y,S)?(F=ae,Y):(F=ae,K=S)}var G=!1,F,K,ee=v===void 0?null:v;return[function(){return L(g())},ee===null?void 0:function(){return L(ee())}]},[g,v,E,b]);var j=a(p,C[0],C[1]);return l(function(){V.hasValue=!0,V.value=j},[j]),d(j),j},Gp}var YT;function HC(){return YT||(YT=1,qp.exports=FC()),qp.exports}var qC=HC();function GC(n){n()}function KC(){let n=null,e=null;return{clear(){n=null,e=null},notify(){GC(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var QT={notify(){},get:()=>[]};function $C(n,e){let t,a=QT,s=0,l=!1;function c(j){v();const L=a.subscribe(j);let G=!1;return()=>{G||(G=!0,L(),E())}}function d(){a.notify()}function p(){V.onStateChange&&V.onStateChange()}function g(){return l}function v(){s++,t||(t=n.subscribe(p),a=KC())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=QT)}function b(){l||(l=!0,v())}function C(){l&&(l=!1,E())}const V={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:b,tryUnsubscribe:C,getListeners:()=>a};return V}var YC=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QC=YC(),XC=()=>typeof navigator<"u"&&navigator.product==="ReactNative",WC=XC(),JC=()=>QC||WC?z.useLayoutEffect:z.useEffect,ZC=JC(),Kp=Symbol.for("react-redux-context"),$p=typeof globalThis<"u"?globalThis:{};function eI(){if(!z.createContext)return{};const n=$p[Kp]??($p[Kp]=new Map);let e=n.get(z.createContext);return e||(e=z.createContext(null),n.set(z.createContext,e)),e}var ss=eI();function tI(n){const{children:e,context:t,serverState:a,store:s}=n,l=z.useMemo(()=>{const p=$C(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=z.useMemo(()=>s.getState(),[s]);ZC(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||ss;return z.createElement(d.Provider,{value:l},e)}var nI=tI;function ny(n=ss){return function(){return z.useContext(n)}}var Eb=ny();function Tb(n=ss){const e=n===ss?Eb:ny(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var rI=Tb();function iI(n=ss){const e=n===ss?rI:Tb(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var aI=iI(),sI=(n,e)=>n===e;function oI(n=ss){const e=n===ss?Eb:ny(n),t=(a,s={})=>{const{equalityFn:l=sI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;z.useRef(!0);const v=z.useCallback({[a.name](b){return a(b)}}[a.name],[a]),E=qC.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,v,l);return z.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var lI=oI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Sb=n=>{throw TypeError(n)},uI=(n,e,t)=>e.has(n)||Sb("Cannot "+t),Yp=(n,e,t)=>(uI(n,e,"read from private field"),t?t.call(n):e.get(n)),cI=(n,e,t)=>e.has(n)?Sb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),XT="popstate";function fI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=la(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Qu("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Ai(l))}function a(s,l){Kt(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return dI(e,t,a,n)}function Xe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Kt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hI(){return Math.random().toString(36).substring(2,10)}function WT(n,e){return{usr:n.state,key:n.key,idx:e}}function Qu(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?la(e):e,state:t,key:e&&e.key||a||hI()}}function Ai({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function la(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function dI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let L=v(),G=L==null?null:L-g;g=L,p&&p({action:d,location:j.location,delta:G})}function b(L,G){d="PUSH";let F=Qu(j.location,L,G);t&&t(F,L),g=v()+1;let K=WT(F,g),ee=j.createHref(F);try{c.pushState(K,"",ee)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;s.location.assign(ee)}l&&p&&p({action:d,location:j.location,delta:1})}function C(L,G){d="REPLACE";let F=Qu(j.location,L,G);t&&t(F,L),g=v();let K=WT(F,g),ee=j.createHref(F);c.replaceState(K,"",ee),l&&p&&p({action:d,location:j.location,delta:0})}function V(L){return bb(L)}let j={get action(){return d},get location(){return n(s,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(XT,E),p=L,()=>{s.removeEventListener(XT,E),p=null}},createHref(L){return e(s,L)},createURL:V,encodeLocation(L){let G=V(L);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:b,replace:C,go(L){return c.go(L)}};return j}function bb(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Ai(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Vu,JT=class{constructor(n){if(cI(this,Vu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Yp(this,Vu).has(n))return Yp(this,Vu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Yp(this,Vu).set(n,e)}};Vu=new WeakMap;var mI=new Set(["lazy","caseSensitive","path","id","index","children"]);function pI(n){return mI.has(n)}var gI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function yI(n){return gI.has(n)}function vI(n){return n.index===!0}function Xu(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(Xe(l.index!==!0||!l.children,"Cannot specify children on an index route"),Xe(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),vI(l)){let g={...l,id:p};return a[p]=ZT(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=ZT(g,e(g)),l.children&&(g.children=Xu(l.children,e,d,a,s)),g}})}function ZT(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function $a(n,e,t="/"){return Pu(n,e,t,!1)}function Pu(n,e,t,a){let s=typeof e=="string"?la(e):e,l=Lr(s.pathname||"/",t);if(l==null)return null;let c=wb(n);EI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=xI(l);d=DI(c[p],g,a)}return d}function _I(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function wb(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;Xe(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let E=Ei([a,v.relativePath]),b=t.concat(v);c.children&&c.children.length>0&&(Xe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),wb(c.children,e,b,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:CI(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of Ab(c.path))l(c,d,!0,g)}),e}function Ab(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=Ab(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function EI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:II(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var TI=/^:[\w-]+$/,SI=3,bI=2,wI=1,AI=10,RI=-2,e0=n=>n==="*";function CI(n,e){let t=n.split("/"),a=t.length;return t.some(e0)&&(a+=RI),e&&(a+=bI),t.filter(s=>!e0(s)).reduce((s,l)=>s+(TI.test(l)?SI:l===""?wI:AI),a)}function II(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function DI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Oh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Oh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Ei([l,E.pathname]),pathnameBase:VI(Ei([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Ei([l,E.pathnameBase]))}return c}function Oh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=NI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:E},b)=>{if(v==="*"){let V=d[b]||"";c=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const C=d[b];return E&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function NI(n,e=!1,t=!0){Kt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function xI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Lr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function OI({basename:n,pathname:e}){return e==="/"?n:Ei([n,e])}var Rb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ry=n=>Rb.test(n);function MI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?la(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=t0(t.substring(1),"/"):l=t0(t,e)):l=e,{pathname:l,search:PI(a),hash:LI(s)}}function t0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Qp(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Cb(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ud(n){let e=Cb(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function cd(n,e,t,a=!1){let s;typeof n=="string"?s=la(n):(s={...n},Xe(!s.pathname||!s.pathname.includes("?"),Qp("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),Qp("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),Qp("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;s.pathname=b.join("/")}d=E>=0?e[E]:"/"}let p=MI(s,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ei=n=>n.join("/").replace(/\/\/+/g,"/"),VI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),PI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,uc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Wu(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function cc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ib=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Db(n,e){let t=n;if(typeof t!="string"||!Rb.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(Ib)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Lr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{Kt(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var Ja=Symbol("Uninstrumented");function kI(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=al(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=al(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[Ja]??l,d=al(t[s],c,(...p)=>n0(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[Ja]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[Ja]??s,c=al(t.middleware,l,(...d)=>n0(d[0]));return c?(c[Ja]=l,c):s})),a}function UI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[Ja]??n.navigate,s=al(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Ai(c):".",...r0(n,d??{})}});s&&(s[Ja]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[Ja]??n.fetch,s=al(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...r0(n,p??{})}});s&&(s[Ja]=a,n.fetch=s)}return n}function al(n,e,t){return n.length===0?null:async(...a)=>{let s=await Nb(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function Nb(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=Nb(n,e,t,a-1),l=await c,Xe(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function n0(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:jI(e),params:{...a},unstable_pattern:s,context:zI(t)}}function r0(n,e){return{currentUrl:Ai(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function jI(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function zI(n){if(FI(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var BI=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function FI(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===BI}var xb=["POST","PUT","PATCH","DELETE"],HI=new Set(xb),qI=["GET",...xb],GI=new Set(qI),Ob=new Set([301,302,303,307,308]),KI=new Set([307,308]),Xp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$I={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Nu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},YI=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),Mb="remix-router-transitions",Vb=Symbol("ResetLoaderData");function QI(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Xe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||YI,l=s;if(n.unstable_instrumentations){let P=n.unstable_instrumentations;l=H=>({...s(H),...kI(P.map(J=>J.route).filter(Boolean),H)})}let c={},d=Xu(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let v=n.dataStrategy||eD,E={...n.future},b=null,C=new Set,V=null,j=null,L=null,G=n.hydrationData!=null,F=$a(d,n.history.location,g),K=!1,ee=null,ae;if(F==null&&!n.patchRoutesOnNavigation){let P=Mr(404,{pathname:n.history.location.pathname}),{matches:H,route:J}=Qf(d);ae=!0,F=H,ee={[J.id]:P}}else if(F&&!n.hydrationData&&Ni(F,d,n.history.location.pathname).active&&(F=null),F)if(F.some(P=>P.route.lazy))ae=!1;else if(!F.some(P=>iy(P.route)))ae=!0;else{let P=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let J=F.findIndex(fe=>H[fe.route.id]!==void 0);ae=F.slice(0,J+1).every(fe=>!Eg(fe.route,P,H))}else ae=F.every(J=>!Eg(J.route,P,H))}else{ae=!1,F=[];let P=Ni(null,d,n.history.location.pathname);P.active&&P.matches&&(K=!0,F=P.matches)}let Y,S={historyAction:n.history.action,location:n.history.location,matches:F,initialized:ae,navigation:Xp,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ee,fetchers:new Map,blockers:new Map},A="POP",w=null,I=!1,N,M=!1,x=new Map,Ae=null,ke=!1,Q=!1,ce=new Set,ge=new Map,De=0,Ve=-1,U=new Map,re=new Set,he=new Map,ve=new Map,Re=new Set,Oe=new Map,Ye,St=null;function At(){if(b=n.history.listen(({action:P,location:H,delta:J})=>{if(Ye){Ye(),Ye=void 0;return}Kt(Oe.size===0||J!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=ri({currentLocation:S.location,nextLocation:H,historyAction:P});if(fe&&J!=null){let de=new Promise(Ee=>{Ye=Ee});n.history.go(J*-1),Pn(fe,{state:"blocked",location:H,proceed(){Pn(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),de.then(()=>n.history.go(J))},reset(){let Ee=new Map(S.blockers);Ee.set(fe,Nu),Ut({blockers:Ee})}}),w==null||w.resolve(),w=null;return}return Mn(P,H)}),t){vD(e,x);let P=()=>_D(e,x);e.addEventListener("pagehide",P),Ae=()=>e.removeEventListener("pagehide",P)}return S.initialized||Mn("POP",S.location,{initialHydration:!0}),Y}function Ii(){b&&b(),Ae&&Ae(),C.clear(),N&&N.abort(),S.fetchers.forEach((P,H)=>da(H)),S.blockers.forEach((P,H)=>Ts(H))}function fa(P){return C.add(P),()=>C.delete(P)}function Ut(P,H={}){P.matches&&(P.matches=P.matches.map(de=>{let Ee=c[de.route.id],be=de.route;return be.element!==Ee.element||be.errorElement!==Ee.errorElement||be.hydrateFallbackElement!==Ee.hydrateFallbackElement?{...de,route:Ee}:de})),S={...S,...P};let J=[],fe=[];S.fetchers.forEach((de,Ee)=>{de.state==="idle"&&(Re.has(Ee)?J.push(Ee):fe.push(Ee))}),Re.forEach(de=>{!S.fetchers.has(de)&&!ge.has(de)&&J.push(de)}),[...C].forEach(de=>de(S,{deletedFetchers:J,newErrors:P.errors??null,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),J.forEach(de=>da(de)),fe.forEach(de=>S.fetchers.delete(de))}function Jn(P,H,{flushSync:J}={}){var Pe,Ie;let fe=S.actionData!=null&&S.navigation.formMethod!=null&&Dn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((Pe=P.state)==null?void 0:Pe._isRedirect)!==!0,de;H.actionData?Object.keys(H.actionData).length>0?de=H.actionData:de=null:fe?de=S.actionData:de=null;let Ee=H.loaderData?d0(S.loaderData,H.loaderData,H.matches||[],H.errors):S.loaderData,be=S.blockers;be.size>0&&(be=new Map(be),be.forEach((je,Qe)=>be.set(Qe,Nu)));let me=ke?!1:mo(P,H.matches||S.matches),ye=I===!0||S.navigation.formMethod!=null&&Dn(S.navigation.formMethod)&&((Ie=P.state)==null?void 0:Ie._isRedirect)!==!0;p&&(d=p,p=void 0),ke||A==="POP"||(A==="PUSH"?n.history.push(P,P.state):A==="REPLACE"&&n.history.replace(P,P.state));let Se;if(A==="POP"){let je=x.get(S.location.pathname);je&&je.has(P.pathname)?Se={currentLocation:S.location,nextLocation:P}:x.has(P.pathname)&&(Se={currentLocation:P,nextLocation:S.location})}else if(M){let je=x.get(S.location.pathname);je?je.add(P.pathname):(je=new Set([P.pathname]),x.set(S.location.pathname,je)),Se={currentLocation:S.location,nextLocation:P}}Ut({...H,actionData:de,loaderData:Ee,historyAction:A,location:P,initialized:!0,navigation:Xp,revalidation:"idle",restoreScrollPosition:me,preventScrollReset:ye,blockers:be},{viewTransitionOpts:Se,flushSync:J===!0}),A="POP",I=!1,M=!1,ke=!1,Q=!1,w==null||w.resolve(),w=null,St==null||St.resolve(),St=null}async function Zn(P,H){if(w==null||w.resolve(),w=null,typeof P=="number"){w||(w=y0());let Qe=w.promise;return n.history.go(P),Qe}let J=_g(S.location,S.matches,g,P,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:fe,submission:de,error:Ee}=i0(!1,J,H),be=S.location,me=Qu(S.location,fe,H&&H.state);me={...me,...n.history.encodeLocation(me)};let ye=H&&H.replace!=null?H.replace:void 0,Se="PUSH";ye===!0?Se="REPLACE":ye===!1||de!=null&&Dn(de.formMethod)&&de.formAction===S.location.pathname+S.location.search&&(Se="REPLACE");let Pe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Ie=(H&&H.flushSync)===!0,je=ri({currentLocation:be,nextLocation:me,historyAction:Se});if(je){Pn(je,{state:"blocked",location:me,proceed(){Pn(je,{state:"proceeding",proceed:void 0,reset:void 0,location:me}),Zn(P,H)},reset(){let Qe=new Map(S.blockers);Qe.set(je,Nu),Ut({blockers:Qe})}});return}await Mn(Se,me,{submission:de,pendingError:Ee,preventScrollReset:Pe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Ie,callSiteDefaultShouldRevalidate:H&&H.unstable_defaultShouldRevalidate})}function gs(){St||(St=y0()),Di(),Ut({revalidation:"loading"});let P=St.promise;return S.navigation.state==="submitting"?P:S.navigation.state==="idle"?(Mn(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),P):(Mn(A||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:M===!0}),P)}async function Mn(P,H,J){N&&N.abort(),N=null,A=P,ke=(J&&J.startUninterruptedRevalidation)===!0,ir(S.location,S.matches),I=(J&&J.preventScrollReset)===!0,M=(J&&J.enableViewTransition)===!0;let fe=p||d,de=J&&J.overrideNavigation,Ee=J!=null&&J.initialHydration&&S.matches&&S.matches.length>0&&!K?S.matches:$a(fe,H,g),be=(J&&J.flushSync)===!0;if(Ee&&S.initialized&&!Q&&lD(S.location,H)&&!(J&&J.submission&&Dn(J.submission.formMethod))){Jn(H,{matches:Ee},{flushSync:be});return}let me=Ni(Ee,fe,H.pathname);if(me.active&&me.matches&&(Ee=me.matches),!Ee){let{error:Nt,notFoundMatches:Rt,route:Ge}=Pt(H.pathname);Jn(H,{matches:Rt,loaderData:{},errors:{[Ge.id]:Nt}},{flushSync:be});return}N=new AbortController;let ye=Zo(n.history,H,N.signal,J&&J.submission),Se=n.getContext?await n.getContext():new JT,Pe;if(J&&J.pendingError)Pe=[Ya(Ee).route.id,{type:"error",error:J.pendingError}];else if(J&&J.submission&&Dn(J.submission.formMethod)){let Nt=await ys(ye,H,J.submission,Ee,Se,me.active,J&&J.initialHydration===!0,{replace:J.replace,flushSync:be});if(Nt.shortCircuited)return;if(Nt.pendingActionResult){let[Rt,Ge]=Nt.pendingActionResult;if(mr(Ge)&&Wu(Ge.error)&&Ge.error.status===404){N=null,Jn(H,{matches:Nt.matches,loaderData:{},errors:{[Rt]:Ge.error}});return}}Ee=Nt.matches||Ee,Pe=Nt.pendingActionResult,de=Wp(H,J.submission),be=!1,me.active=!1,ye=Zo(n.history,ye.url,ye.signal)}let{shortCircuited:Ie,matches:je,loaderData:Qe,errors:gt}=await vs(ye,H,Ee,Se,me.active,de,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,be,Pe,J&&J.callSiteDefaultShouldRevalidate);Ie||(N=null,Jn(H,{matches:je||Ee,...m0(Pe),loaderData:Qe,errors:gt}))}async function ys(P,H,J,fe,de,Ee,be,me={}){Di();let ye=gD(H,J);if(Ut({navigation:ye},{flushSync:me.flushSync===!0}),Ee){let Ie=await Ln(fe,H.pathname,P.signal);if(Ie.type==="aborted")return{shortCircuited:!0};if(Ie.type==="error"){if(Ie.partialMatches.length===0){let{matches:Qe,route:gt}=Qf(d);return{matches:Qe,pendingActionResult:[gt.id,{type:"error",error:Ie.error}]}}let je=Ya(Ie.partialMatches).route.id;return{matches:Ie.partialMatches,pendingActionResult:[je,{type:"error",error:Ie.error}]}}else if(Ie.matches)fe=Ie.matches;else{let{notFoundMatches:je,error:Qe,route:gt}=Pt(H.pathname);return{matches:je,pendingActionResult:[gt.id,{type:"error",error:Qe}]}}}let Se,Pe=oh(fe,H);if(!Pe.route.action&&!Pe.route.lazy)Se={type:"error",error:Mr(405,{method:P.method,pathname:H.pathname,routeId:Pe.route.id})};else{let Ie=ol(l,c,P,fe,Pe,be?[]:a,de),je=await er(P,Ie,de,null);if(Se=je[Pe.route.id],!Se){for(let Qe of fe)if(je[Qe.route.id]){Se=je[Qe.route.id];break}}if(P.signal.aborted)return{shortCircuited:!0}}if($s(Se)){let Ie;return me&&me.replace!=null?Ie=me.replace:Ie=c0(Se.response.headers.get("Location"),new URL(P.url),g,n.history)===S.location.pathname+S.location.search,await zt(P,Se,!0,{submission:J,replace:Ie}),{shortCircuited:!0}}if(mr(Se)){let Ie=Ya(fe,Pe.route.id);return(me&&me.replace)!==!0&&(A="PUSH"),{matches:fe,pendingActionResult:[Ie.route.id,Se,Pe.route.id]}}return{matches:fe,pendingActionResult:[Pe.route.id,Se]}}async function vs(P,H,J,fe,de,Ee,be,me,ye,Se,Pe,Ie,je){let Qe=Ee||Wp(H,be),gt=be||me||g0(Qe),Nt=!ke&&!Se;if(de){if(Nt){let Bt=jt(Ie);Ut({navigation:Qe,...Bt!==void 0?{actionData:Bt}:{}},{flushSync:Pe})}let We=await Ln(J,H.pathname,P.signal);if(We.type==="aborted")return{shortCircuited:!0};if(We.type==="error"){if(We.partialMatches.length===0){let{matches:Zt,route:yt}=Qf(d);return{matches:Zt,loaderData:{},errors:{[yt.id]:We.error}}}let Bt=Ya(We.partialMatches).route.id;return{matches:We.partialMatches,loaderData:{},errors:{[Bt]:We.error}}}else if(We.matches)J=We.matches;else{let{error:Bt,notFoundMatches:Zt,route:yt}=Pt(H.pathname);return{matches:Zt,loaderData:{},errors:{[yt.id]:Bt}}}}let Rt=p||d,{dsMatches:Ge,revalidatingFetchers:Ct}=a0(P,fe,l,c,n.history,S,J,gt,H,Se?[]:a,Se===!0,Q,ce,Re,he,re,Rt,g,n.patchRoutesOnNavigation!=null,Ie,je);if(Ve=++De,!n.dataStrategy&&!Ge.some(We=>We.shouldLoad)&&!Ge.some(We=>We.route.middleware&&We.route.middleware.length>0)&&Ct.length===0){let We=Vt();return Jn(H,{matches:J,loaderData:{},errors:Ie&&mr(Ie[1])?{[Ie[0]]:Ie[1].error}:null,...m0(Ie),...We?{fetchers:new Map(S.fetchers)}:{}},{flushSync:Pe}),{shortCircuited:!0}}if(Nt){let We={};if(!de){We.navigation=Qe;let Bt=jt(Ie);Bt!==void 0&&(We.actionData=Bt)}Ct.length>0&&(We.fetchers=$t(Ct)),Ut(We,{flushSync:Pe})}Ct.forEach(We=>{bt(We.key),We.controller&&ge.set(We.key,We.controller)});let hn=()=>Ct.forEach(We=>bt(We.key));N&&N.signal.addEventListener("abort",hn);let{loaderResults:It,fetcherResults:Bn}=await ha(Ge,Ct,P,fe);if(P.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",hn),Ct.forEach(We=>ge.delete(We.key));let An=Xf(It);if(An)return await zt(P,An.result,!0,{replace:ye}),{shortCircuited:!0};if(An=Xf(Bn),An)return re.add(An.key),await zt(P,An.result,!0,{replace:ye}),{shortCircuited:!0};let{loaderData:Fn,errors:Rn}=h0(S,J,It,Ie,Ct,Bn);Se&&S.errors&&(Rn={...S.errors,...Rn});let ar=Vt(),ai=Es(Ve),si=ar||ai||Ct.length>0;return{matches:J,loaderData:Fn,errors:Rn,...si?{fetchers:new Map(S.fetchers)}:{}}}function jt(P){if(P&&!mr(P[1]))return{[P[0]]:P[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function $t(P){return P.forEach(H=>{let J=S.fetchers.get(H.key),fe=xu(void 0,J?J.data:void 0);S.fetchers.set(H.key,fe)}),new Map(S.fetchers)}async function ni(P,H,J,fe){bt(P);let de=(fe&&fe.flushSync)===!0,Ee=p||d,be=_g(S.location,S.matches,g,J,H,fe==null?void 0:fe.relative),me=$a(Ee,be,g),ye=Ni(me,Ee,be);if(ye.active&&ye.matches&&(me=ye.matches),!me){tr(P,H,Mr(404,{pathname:be}),{flushSync:de});return}let{path:Se,submission:Pe,error:Ie}=i0(!0,be,fe);if(Ie){tr(P,H,Ie,{flushSync:de});return}let je=n.getContext?await n.getContext():new JT,Qe=(fe&&fe.preventScrollReset)===!0;if(Pe&&Dn(Pe.formMethod)){await Pl(P,H,Se,me,je,ye.active,de,Qe,Pe,fe&&fe.unstable_defaultShouldRevalidate);return}he.set(P,{routeId:H,path:Se}),await fo(P,H,Se,me,je,ye.active,de,Qe,Pe)}async function Pl(P,H,J,fe,de,Ee,be,me,ye,Se){Di(),he.delete(P);let Pe=S.fetchers.get(P);fn(P,yD(ye,Pe),{flushSync:be});let Ie=new AbortController,je=Zo(n.history,J,Ie.signal,ye);if(Ee){let Ke=await Ln(fe,new URL(je.url).pathname,je.signal,P);if(Ke.type==="aborted")return;if(Ke.type==="error"){tr(P,H,Ke.error,{flushSync:be});return}else if(Ke.matches)fe=Ke.matches;else{tr(P,H,Mr(404,{pathname:J}),{flushSync:be});return}}let Qe=oh(fe,J);if(!Qe.route.action&&!Qe.route.lazy){let Ke=Mr(405,{method:ye.formMethod,pathname:J,routeId:H});tr(P,H,Ke,{flushSync:be});return}ge.set(P,Ie);let gt=De,Nt=ol(l,c,je,fe,Qe,a,de),Rt=await er(je,Nt,de,P),Ge=Rt[Qe.route.id];if(!Ge){for(let Ke of Nt)if(Rt[Ke.route.id]){Ge=Rt[Ke.route.id];break}}if(je.signal.aborted){ge.get(P)===Ie&&ge.delete(P);return}if(Re.has(P)){if($s(Ge)||mr(Ge)){fn(P,Xi(void 0));return}}else{if($s(Ge))if(ge.delete(P),Ve>gt){fn(P,Xi(void 0));return}else return re.add(P),fn(P,xu(ye)),zt(je,Ge,!1,{fetcherSubmission:ye,preventScrollReset:me});if(mr(Ge)){tr(P,H,Ge.error);return}}let Ct=S.navigation.location||S.location,hn=Zo(n.history,Ct,Ie.signal),It=p||d,Bn=S.navigation.state!=="idle"?$a(It,S.navigation.location,g):S.matches;Xe(Bn,"Didn't find any matches after fetcher action");let An=++De;U.set(P,An);let Fn=xu(ye,Ge.data);S.fetchers.set(P,Fn);let{dsMatches:Rn,revalidatingFetchers:ar}=a0(hn,de,l,c,n.history,S,Bn,ye,Ct,a,!1,Q,ce,Re,he,re,It,g,n.patchRoutesOnNavigation!=null,[Qe.route.id,Ge],Se);ar.filter(Ke=>Ke.key!==P).forEach(Ke=>{let sr=Ke.key,pa=S.fetchers.get(sr),ut=xu(void 0,pa?pa.data:void 0);S.fetchers.set(sr,ut),bt(sr),Ke.controller&&ge.set(sr,Ke.controller)}),Ut({fetchers:new Map(S.fetchers)});let ai=()=>ar.forEach(Ke=>bt(Ke.key));Ie.signal.addEventListener("abort",ai);let{loaderResults:si,fetcherResults:We}=await ha(Rn,ar,hn,de);if(Ie.signal.aborted)return;if(Ie.signal.removeEventListener("abort",ai),U.delete(P),ge.delete(P),ar.forEach(Ke=>ge.delete(Ke.key)),S.fetchers.has(P)){let Ke=Xi(Ge.data);S.fetchers.set(P,Ke)}let Bt=Xf(si);if(Bt)return zt(hn,Bt.result,!1,{preventScrollReset:me});if(Bt=Xf(We),Bt)return re.add(Bt.key),zt(hn,Bt.result,!1,{preventScrollReset:me});let{loaderData:Zt,errors:yt}=h0(S,Bn,si,void 0,ar,We);Es(An),S.navigation.state==="loading"&&An>Ve?(Xe(A,"Expected pending action"),N&&N.abort(),Jn(S.navigation.location,{matches:Bn,loaderData:Zt,errors:yt,fetchers:new Map(S.fetchers)})):(Ut({errors:yt,loaderData:d0(S.loaderData,Zt,Bn,yt),fetchers:new Map(S.fetchers)}),Q=!1)}async function fo(P,H,J,fe,de,Ee,be,me,ye){let Se=S.fetchers.get(P);fn(P,xu(ye,Se?Se.data:void 0),{flushSync:be});let Pe=new AbortController,Ie=Zo(n.history,J,Pe.signal);if(Ee){let Ge=await Ln(fe,new URL(Ie.url).pathname,Ie.signal,P);if(Ge.type==="aborted")return;if(Ge.type==="error"){tr(P,H,Ge.error,{flushSync:be});return}else if(Ge.matches)fe=Ge.matches;else{tr(P,H,Mr(404,{pathname:J}),{flushSync:be});return}}let je=oh(fe,J);ge.set(P,Pe);let Qe=De,gt=ol(l,c,Ie,fe,je,a,de),Rt=(await er(Ie,gt,de,P))[je.route.id];if(ge.get(P)===Pe&&ge.delete(P),!Ie.signal.aborted){if(Re.has(P)){fn(P,Xi(void 0));return}if($s(Rt))if(Ve>Qe){fn(P,Xi(void 0));return}else{re.add(P),await zt(Ie,Rt,!1,{preventScrollReset:me});return}if(mr(Rt)){tr(P,H,Rt.error);return}fn(P,Xi(Rt.data))}}async function zt(P,H,J,{submission:fe,fetcherSubmission:de,preventScrollReset:Ee,replace:be}={}){J||(w==null||w.resolve(),w=null),H.response.headers.has("X-Remix-Revalidate")&&(Q=!0);let me=H.response.headers.get("Location");Xe(me,"Expected a Location header on the redirect Response"),me=c0(me,new URL(P.url),g,n.history);let ye=Qu(S.location,me,{_isRedirect:!0});if(t){let gt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))gt=!0;else if(ry(me)){const Nt=bb(me,!0);gt=Nt.origin!==e.location.origin||Lr(Nt.pathname,g)==null}if(gt){be?e.location.replace(me):e.location.assign(me);return}}N=null;let Se=be===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Pe,formAction:Ie,formEncType:je}=S.navigation;!fe&&!de&&Pe&&Ie&&je&&(fe=g0(S.navigation));let Qe=fe||de;if(KI.has(H.response.status)&&Qe&&Dn(Qe.formMethod))await Mn(Se,ye,{submission:{...Qe,formAction:me},preventScrollReset:Ee||I,enableViewTransition:J?M:void 0});else{let gt=Wp(ye,fe);await Mn(Se,ye,{overrideNavigation:gt,fetcherSubmission:de,preventScrollReset:Ee||I,enableViewTransition:J?M:void 0})}}async function er(P,H,J,fe){var be;let de,Ee={};try{de=await nD(v,P,H,fe,J,!1)}catch(me){return H.filter(ye=>ye.shouldLoad).forEach(ye=>{Ee[ye.route.id]={type:"error",error:me}}),Ee}if(P.signal.aborted)return Ee;if(!Dn(P.method))for(let me of H){if(((be=de[me.route.id])==null?void 0:be.type)==="error")break;!de.hasOwnProperty(me.route.id)&&!S.loaderData.hasOwnProperty(me.route.id)&&(!S.errors||!S.errors.hasOwnProperty(me.route.id))&&me.shouldCallHandler()&&(de[me.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${me.route.id}`)})}for(let[me,ye]of Object.entries(de))if(hD(ye)){let Se=ye.result;Ee[me]={type:"redirect",response:sD(Se,P,me,H,g)}}else Ee[me]=await aD(ye);return Ee}async function ha(P,H,J,fe){let de=er(J,P,fe,null),Ee=Promise.all(H.map(async ye=>{if(ye.matches&&ye.match&&ye.request&&ye.controller){let Pe=(await er(ye.request,ye.matches,fe,ye.key))[ye.match.route.id];return{[ye.key]:Pe}}else return Promise.resolve({[ye.key]:{type:"error",error:Mr(404,{pathname:ye.path})}})})),be=await de,me=(await Ee).reduce((ye,Se)=>Object.assign(ye,Se),{});return{loaderResults:be,fetcherResults:me}}function Di(){Q=!0,he.forEach((P,H)=>{ge.has(H)&&ce.add(H),bt(H)})}function fn(P,H,J={}){S.fetchers.set(P,H),Ut({fetchers:new Map(S.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function tr(P,H,J,fe={}){let de=Ya(S.matches,H);da(P),Ut({errors:{[de.route.id]:J},fetchers:new Map(S.fetchers)},{flushSync:(fe&&fe.flushSync)===!0})}function _s(P){return ve.set(P,(ve.get(P)||0)+1),Re.has(P)&&Re.delete(P),S.fetchers.get(P)||$I}function ho(P,H){bt(P,H==null?void 0:H.reason),fn(P,Xi(null))}function da(P){let H=S.fetchers.get(P);ge.has(P)&&!(H&&H.state==="loading"&&U.has(P))&&bt(P),he.delete(P),U.delete(P),re.delete(P),Re.delete(P),ce.delete(P),S.fetchers.delete(P)}function nr(P){let H=(ve.get(P)||0)-1;H<=0?(ve.delete(P),Re.add(P)):ve.set(P,H),Ut({fetchers:new Map(S.fetchers)})}function bt(P,H){let J=ge.get(P);J&&(J.abort(H),ge.delete(P))}function Vn(P){for(let H of P){let J=_s(H),fe=Xi(J.data);S.fetchers.set(H,fe)}}function Vt(){let P=[],H=!1;for(let J of re){let fe=S.fetchers.get(J);Xe(fe,`Expected fetcher: ${J}`),fe.state==="loading"&&(re.delete(J),P.push(J),H=!0)}return Vn(P),H}function Es(P){let H=[];for(let[J,fe]of U)if(fe<P){let de=S.fetchers.get(J);Xe(de,`Expected fetcher: ${J}`),de.state==="loading"&&(bt(J),U.delete(J),H.push(J))}return Vn(H),H.length>0}function ma(P,H){let J=S.blockers.get(P)||Nu;return Oe.get(P)!==H&&Oe.set(P,H),J}function Ts(P){S.blockers.delete(P),Oe.delete(P)}function Pn(P,H){let J=S.blockers.get(P)||Nu;Xe(J.state==="unblocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="proceeding"||J.state==="blocked"&&H.state==="unblocked"||J.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${J.state} -> ${H.state}`);let fe=new Map(S.blockers);fe.set(P,H),Ut({blockers:fe})}function ri({currentLocation:P,nextLocation:H,historyAction:J}){if(Oe.size===0)return;Oe.size>1&&Kt(!1,"A router only supports one blocker at a time");let fe=Array.from(Oe.entries()),[de,Ee]=fe[fe.length-1],be=S.blockers.get(de);if(!(be&&be.state==="proceeding")&&Ee({currentLocation:P,nextLocation:H,historyAction:J}))return de}function Pt(P){let H=Mr(404,{pathname:P}),J=p||d,{matches:fe,route:de}=Qf(J);return{notFoundMatches:fe,route:de,error:H}}function Tr(P,H,J){if(V=P,L=H,j=J||null,!G&&S.navigation===Xp){G=!0;let fe=mo(S.location,S.matches);fe!=null&&Ut({restoreScrollPosition:fe})}return()=>{V=null,L=null,j=null}}function rr(P,H){return j&&j(P,H.map(fe=>_I(fe,S.loaderData)))||P.key}function ir(P,H){if(V&&L){let J=rr(P,H);V[J]=L()}}function mo(P,H){if(V){let J=rr(P,H),fe=V[J];if(typeof fe=="number")return fe}return null}function Ni(P,H,J){if(n.patchRoutesOnNavigation)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:Pu(H,J,g,!0)}}else return{active:!0,matches:Pu(H,J,g,!0)||[]};return{active:!1,matches:null}}async function Ln(P,H,J,fe){if(!n.patchRoutesOnNavigation)return{type:"success",matches:P};let de=P;for(;;){let Ee=p==null,be=p||d,me=c;try{await n.patchRoutesOnNavigation({signal:J,path:H,matches:de,fetcherKey:fe,patch:(Pe,Ie)=>{J.aborted||s0(Pe,Ie,be,me,l,!1)}})}catch(Pe){return{type:"error",error:Pe,partialMatches:de}}finally{Ee&&!J.aborted&&(d=[...d])}if(J.aborted)return{type:"aborted"};let ye=$a(be,H,g),Se=null;if(ye){if(Object.keys(ye[0].params).length===0)return{type:"success",matches:ye};if(Se=Pu(be,H,g,!0),!(Se&&de.length<Se.length&&ii(de,Se.slice(0,de.length))))return{type:"success",matches:ye}}if(Se||(Se=Pu(be,H,g,!0)),!Se||ii(de,Se))return{type:"success",matches:null};de=Se}}function ii(P,H){return P.length===H.length&&P.every((J,fe)=>J.route.id===H[fe].route.id)}function Ll(P){c={},p=Xu(P,l,void 0,c)}function xi(P,H,J=!1){let fe=p==null;s0(P,H,p||d,c,l,J),fe&&(d=[...d],Ut({}))}return Y={get basename(){return g},get future(){return E},get state(){return S},get routes(){return d},get window(){return e},initialize:At,subscribe:fa,enableScrollRestoration:Tr,navigate:Zn,fetch:ni,revalidate:gs,createHref:P=>n.history.createHref(P),encodeLocation:P=>n.history.encodeLocation(P),getFetcher:_s,resetFetcher:ho,deleteFetcher:nr,dispose:Ii,getBlocker:ma,deleteBlocker:Ts,patchRoutes:xi,_internalFetchControllers:ge,_internalSetRoutes:Ll,_internalSetStateDoNotUseOrYouWillBreakYourApp(P){Ut(P)}},n.unstable_instrumentations&&(Y=UI(Y,n.unstable_instrumentations.map(P=>P.router).filter(Boolean))),Y}function XI(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function _g(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=cd(a||".",ud(c),Lr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=sy(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let v=new URLSearchParams(p.search),E=v.getAll("index");v.delete("index"),E.filter(C=>C).forEach(C=>v.append("index",C));let b=v.toString();p.search=b?`?${b}`:""}}return t!=="/"&&(p.pathname=OI({basename:t,pathname:p.pathname})),Ai(p)}function i0(n,e,t){if(!t||!XI(t))return{path:e};if(t.formMethod&&!pD(t.formMethod))return{path:e,error:Mr(405,{method:t.formMethod})};let a=()=>({path:e,error:Mr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=zb(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Dn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[C,V])=>`${b}${C}=${V}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Dn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}Xe(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Sg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Sg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=f0(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=f0(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Dn(g.formMethod))return{path:e,submission:g};let v=la(e);return n&&v.search&&sy(v.search)&&d.append("index",""),v.search=`?${d}`,{path:Ai(v),submission:g}}function a0(n,e,t,a,s,l,c,d,p,g,v,E,b,C,V,j,L,G,F,K,ee){var ke;let ae=K?mr(K[1])?K[1].error:K[1].data:void 0,Y=s.createURL(l.location),S=s.createURL(p),A;if(v&&l.errors){let Q=Object.keys(l.errors)[0];A=c.findIndex(ce=>ce.route.id===Q)}else if(K&&mr(K[1])){let Q=K[0];A=c.findIndex(ce=>ce.route.id===Q)-1}let w=K?K[1].statusCode:void 0,I=w&&w>=400,N={currentUrl:Y,currentParams:((ke=l.matches[0])==null?void 0:ke.params)||{},nextUrl:S,nextParams:c[0].params,...d,actionResult:ae,actionStatus:w},M=cc(c),x=c.map((Q,ce)=>{let{route:ge}=Q,De=null;if(A!=null&&ce>A?De=!1:ge.lazy?De=!0:iy(ge)?v?De=Eg(ge,l.loaderData,l.errors):WI(l.loaderData,l.matches[ce],Q)&&(De=!0):De=!1,De!==null)return Tg(t,a,n,M,Q,g,e,De);let Ve=!1;typeof ee=="boolean"?Ve=ee:I?Ve=!1:(E||Y.pathname+Y.search===S.pathname+S.search||Y.search!==S.search||JI(l.matches[ce],Q))&&(Ve=!0);let U={...N,defaultShouldRevalidate:Ve},re=Bu(Q,U);return Tg(t,a,n,M,Q,g,e,re,U,ee)}),Ae=[];return V.forEach((Q,ce)=>{if(v||!c.some(Re=>Re.route.id===Q.routeId)||C.has(ce))return;let ge=l.fetchers.get(ce),De=ge&&ge.state!=="idle"&&ge.data===void 0,Ve=$a(L,Q.path,G);if(!Ve){if(F&&De)return;Ae.push({key:ce,routeId:Q.routeId,path:Q.path,matches:null,match:null,request:null,controller:null});return}if(j.has(ce))return;let U=oh(Ve,Q.path),re=new AbortController,he=Zo(s,Q.path,re.signal),ve=null;if(b.has(ce))b.delete(ce),ve=ol(t,a,he,Ve,U,g,e);else if(De)E&&(ve=ol(t,a,he,Ve,U,g,e));else{let Re;typeof ee=="boolean"?Re=ee:I?Re=!1:Re=E;let Oe={...N,defaultShouldRevalidate:Re};Bu(U,Oe)&&(ve=ol(t,a,he,Ve,U,g,e,Oe))}ve&&Ae.push({key:ce,routeId:Q.routeId,path:Q.path,matches:ve,match:U,request:he,controller:re})}),{dsMatches:x,revalidatingFetchers:Ae}}function iy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Eg(n,e,t){if(n.lazy)return!0;if(!iy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function WI(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function JI(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Bu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function s0(n,e,t,a,s,l){let c;if(n){let g=a[n];Xe(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let v=c.find(E=>Pb(g,E));v?p.push({existingRoute:v,newRoute:g}):d.push(g)}),d.length>0){let g=Xu(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:v,newRoute:E}=p[g],b=v,[C]=Xu([E],s,[],{},!0);Object.assign(b,{element:C.element?C.element:b.element,errorElement:C.errorElement?C.errorElement:b.errorElement,hydrateFallbackElement:C.hydrateFallbackElement?C.hydrateFallbackElement:b.hydrateFallbackElement})}}function Pb(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>Pb(t,l))}):!1}var o0=new WeakMap,Lb=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(Xe(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=o0.get(s);c||(c={},o0.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=pI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)Kt(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)Kt(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(s,{[n]:b}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(b=>b===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},l0=new WeakMap;function ZI(n,e,t,a,s){let l=t[n.id];if(Xe(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=l0.get(l);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let E=(async()=>{Xe(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),C={};for(let V in b){let j=b[V];if(j===void 0)continue;let L=yI(V),F=l[V]!==void 0&&V!=="hasErrorBoundary";L?Kt(!L,"Route property "+V+" is not a supported property to be returned from a lazy route function. This property will be ignored."):F?Kt(!F,`Route "${l.id}" has a static property "${V}" defined but its lazy function is also returning a value for this property. The lazy route property "${V}" will be ignored.`):C[V]=j}Object.assign(l,C),Object.assign(l,{...a(l),lazy:void 0})})();return l0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let v of c){if(s&&s.includes(v))continue;let E=Lb({key:v,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),v===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function u0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function eD(n){return n.matches.some(e=>e.route.middleware)?kb(n,()=>u0(n)):u0(n)}function kb(n,e){return tD(n,e,a=>{if(mD(a))throw a;return a},cD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=Ya(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function tD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,v=l.flatMap(b=>b.route.middleware?b.route.middleware.map(C=>[b.route.id,C]):[]);return await Ub({request:c,params:d,context:p,unstable_pattern:g},v,e,t,a,s)}async function Ub(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,v]=p,E,b=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await Ub(n,e,t,a,s,l,c+1)},E.value}catch(C){return E={value:await l(C,g,E)},E.value}};try{let C=await v(n,b),V=C!=null?a(C):void 0;return s(V)?V:E?V??E.value:(E={value:await b()},E.value)}catch(C){return await l(C,g,E)}}function jb(n,e,t,a,s){let l=Lb({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=ZI(a.route,Dn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Tg(n,e,t,a,s,l,c,d,p=null,g){let v=!1,E=jb(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(b){return v=!0,p?typeof g=="boolean"?Bu(s,{...p,defaultShouldRevalidate:g}):typeof b=="boolean"?Bu(s,{...p,defaultShouldRevalidate:b}):Bu(s,p):d},resolve(b){let{lazy:C,loader:V,middleware:j}=s.route,L=v||d||b&&!Dn(t.method)&&(C||V),G=j&&j.length>0&&!V&&!C;return L&&(Dn(t.method)||!G)?rD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:b,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function ol(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:jb(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Tg(n,e,t,cc(a),p,l,c,!0,d))}async function nD(n,e,t,a,s,l){t.some(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware}));let c={request:e,unstable_pattern:cc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let v=c;return kb(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var v,E;return[(v=g._lazyPromises)==null?void 0:v.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function rD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Dn(n.method),v=g?"action":"loader",E=b=>{let C,V=new Promise((G,F)=>C=F);p=()=>C(),n.signal.addEventListener("abort",p);let j=G=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:c},...G!==void 0?[G]:[]),L=(async()=>{try{return{type:"data",result:await(l?l(F=>j(F)):j())}}catch(G){return{type:"error",result:G}}})();return Promise.race([L,V])};try{let b=g?t.route.action:t.route.loader;if(a||s)if(b){let C,[V]=await Promise.all([E(b).catch(j=>{C=j}),a,s]);if(C!==void 0)throw C;d=V}else{await a;let C=g?t.route.action:t.route.loader;if(C)[d]=await Promise.all([E(C),s]);else if(v==="action"){let V=new URL(n.url),j=V.pathname+V.search;throw Mr(405,{method:n.method,pathname:j,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)d=await E(b);else{let C=new URL(n.url),V=C.pathname+C.search;throw Mr(404,{pathname:V})}}catch(b){return{type:"error",result:b}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function iD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function aD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(ay(e)){let p;try{p=await iD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new uc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?p0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:uD(e),statusCode:Wu(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Wu(e)?e.status:void 0}:p0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function sD(n,e,t,a,s){let l=n.headers.get("Location");if(Xe(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!ry(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=_g(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function c0(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(ry(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=Lr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Zo(n,e,t,a){let s=n.createURL(zb(e)).toString(),l={signal:t};if(a&&Dn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Sg(a.formData):l.body=a.formData}return new Request(s,l)}function Sg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function f0(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function oD(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},v=t&&mr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let b=E.route.id,C=e[b];if(Xe(!$s(C),"Cannot handle redirect results in processLoaderData"),mr(C)){let V=C.error;if(v!==void 0&&(V=v,v=void 0),c=c||{},s)c[b]=V;else{let j=Ya(n,b);c[j.route.id]==null&&(c[j.route.id]=V)}a||(l[b]=Vb),p||(p=!0,d=Wu(C.error)?C.error.status:500),C.headers&&(g[b]=C.headers)}else l[b]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(d=C.statusCode),C.headers&&(g[b]=C.headers)}),v!==void 0&&t&&(c={[t[0]]:v},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function h0(n,e,t,a,s,l){let{loaderData:c,errors:d}=oD(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:v,controller:E}=p;if(E&&E.signal.aborted)return;let b=l[g];if(Xe(b,"Did not find corresponding fetcher result"),mr(b)){let C=Ya(n.matches,v==null?void 0:v.route.id);d&&d[C.route.id]||(d={...d,[C.route.id]:b.error}),n.fetchers.delete(g)}else if($s(b))Xe(!1,"Unhandled fetcher revalidation redirect");else{let C=Xi(b.data);n.fetchers.set(g,C)}}),{loaderData:c,errors:d}}function d0(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==Vb).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function m0(n){return n?mr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Ya(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function Qf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Mr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new uc(n||500,c,new Error(d),!0)}function Xf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if($s(s))return{key:a,result:s}}}function zb(n){let e=typeof n=="string"?la(n):n;return Ai({...e,hash:""})}function lD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function uD(n){var e,t;return new uc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function cD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&fD(t))}function fD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function hD(n){return ay(n.result)&&Ob.has(n.result.status)}function mr(n){return n.type==="error"}function $s(n){return(n&&n.type)==="redirect"}function p0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function ay(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function dD(n){return Ob.has(n)}function mD(n){return ay(n)&&dD(n.status)&&n.headers.has("Location")}function pD(n){return GI.has(n.toUpperCase())}function Dn(n){return HI.has(n.toUpperCase())}function sy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function oh(n,e){let t=typeof e=="string"?la(e).search:e.search;if(n[n.length-1].route.index&&sy(t||""))return n[n.length-1];let a=Cb(n);return a[a.length-1]}function g0(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function Wp(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function gD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function xu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function yD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Xi(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function vD(n,e){try{let t=n.sessionStorage.getItem(Mb);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function _D(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(Mb,JSON.stringify(t))}catch(a){Kt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function y0(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var so=z.createContext(null);so.displayName="DataRouter";var fc=z.createContext(null);fc.displayName="DataRouterState";var Bb=z.createContext(!1);function ED(){return z.useContext(Bb)}var oy=z.createContext({isTransitioning:!1});oy.displayName="ViewTransition";var Fb=z.createContext(new Map);Fb.displayName="Fetchers";var TD=z.createContext(null);TD.displayName="Await";var Er=z.createContext(null);Er.displayName="Navigation";var fd=z.createContext(null);fd.displayName="Location";var Ur=z.createContext({outlet:null,matches:[],isDataRoute:!1});Ur.displayName="Route";var ly=z.createContext(null);ly.displayName="RouteError";var Hb="REACT_ROUTER_ERROR",SD="REDIRECT",bD="ROUTE_ERROR_RESPONSE";function wD(n){if(n.startsWith(`${Hb}:${SD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function AD(n){if(n.startsWith(`${Hb}:${bD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new uc(e.status,e.statusText,e.data)}catch{}}function RD(n,{relative:e}={}){Xe(Rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=z.useContext(Er),{hash:s,pathname:l,search:c}=dc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ei([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Rl(){return z.useContext(fd)!=null}function ti(){return Xe(Rl(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(fd).location}var qb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gb(n){z.useContext(Er).static||z.useLayoutEffect(n)}function hc(){let{isDataRoute:n}=z.useContext(Ur);return n?BD():CD()}function CD(){Xe(Rl(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(so),{basename:e,navigator:t}=z.useContext(Er),{matches:a}=z.useContext(Ur),{pathname:s}=ti(),l=JSON.stringify(ud(a)),c=z.useRef(!1);return Gb(()=>{c.current=!0}),z.useCallback((p,g={})=>{if(Kt(c.current,qb),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=cd(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ei([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,s,n])}var ID=z.createContext(null);function DD(n){let e=z.useContext(Ur).outlet;return z.useMemo(()=>e&&z.createElement(ID.Provider,{value:n},e),[e,n])}function hd(){let{matches:n}=z.useContext(Ur),e=n[n.length-1];return e?e.params:{}}function dc(n,{relative:e}={}){let{matches:t}=z.useContext(Ur),{pathname:a}=ti(),s=JSON.stringify(ud(t));return z.useMemo(()=>cd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function ND(n,e,t,a,s){Xe(Rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(Er),{matches:c}=z.useContext(Ur),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let F=E&&E.path||"";$b(g,!E||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let b=ti(),C;C=b;let V=C.pathname||"/",j=V;if(v!=="/"){let F=v.replace(/^\//,"").split("/");j="/"+V.replace(/^\//,"").split("/").slice(F.length).join("/")}let L=$a(n,{pathname:j});return Kt(E||L!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Kt(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),PD(L&&L.map(F=>Object.assign({},F,{params:Object.assign({},p,F.params),pathname:Ei([v,l.encodeLocation?l.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:Ei([v,l.encodeLocation?l.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),c,t,a,s)}function xD(){let n=zD(),e=Wu(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:s},t):null,c)}var OD=z.createElement(xD,null),Kb=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=AD(n.digest);t&&(n=t)}let e=n!==void 0?z.createElement(Ur.Provider,{value:this.props.routeContext},z.createElement(ly.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?z.createElement(MD,{error:n},e):e}};Kb.contextType=Bb;var Jp=new WeakMap;function MD({children:n,error:e}){let{basename:t}=z.useContext(Er);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=wD(e.digest);if(a){let s=Jp.get(e);if(s)throw s;let l=Db(a.location,t);if(Ib&&!Jp.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw Jp.set(e,c),c}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function VD({routeContext:n,match:e,children:t}){let a=z.useContext(so);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Ur.Provider,{value:n},t)}function PD(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);Xe(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:b,errors:C}=t,V=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!C||C[E.route.id]===void 0);if(E.route.lazy||V){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(v,E)=>{var b,C;a(v,{location:t.location,params:((C=(b=t.matches)==null?void 0:b[0])==null?void 0:C.params)??{},unstable_pattern:cc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,b)=>{let C,V=!1,j=null,L=null;t&&(C=c&&E.route.id?c[E.route.id]:void 0,j=E.route.errorElement||OD,d&&(p<0&&b===0?($b("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,L=null):p===b&&(V=!0,L=E.route.hydrateFallbackElement||null)));let G=e.concat(l.slice(0,b+1)),F=()=>{let K;return C?K=j:V?K=L:E.route.Component?K=z.createElement(E.route.Component,null):E.route.element?K=E.route.element:K=v,z.createElement(VD,{match:E,routeContext:{outlet:v,matches:G,isDataRoute:t!=null},children:K})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?z.createElement(Kb,{location:t.location,revalidation:t.revalidation,component:j,error:C,children:F(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:g}):F()},null)}function uy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LD(n){let e=z.useContext(so);return Xe(e,uy(n)),e}function kD(n){let e=z.useContext(fc);return Xe(e,uy(n)),e}function UD(n){let e=z.useContext(Ur);return Xe(e,uy(n)),e}function cy(n){let e=UD(n),t=e.matches[e.matches.length-1];return Xe(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function jD(){return cy("useRouteId")}function zD(){var a;let n=z.useContext(ly),e=kD("useRouteError"),t=cy("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function BD(){let{router:n}=LD("useNavigate"),e=cy("useNavigate"),t=z.useRef(!1);return Gb(()=>{t.current=!0}),z.useCallback(async(s,l={})=>{Kt(t.current,qb),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var v0={};function $b(n,e,t){!e&&!v0[n]&&(v0[n]=!0,Kt(!1,t))}var _0={};function E0(n,e){!n&&!_0[e]&&(_0[e]=!0,console.warn(e))}var FD="useOptimistic",T0=VC[FD],HD=()=>{};function qD(n){return T0?T0(n):[n,HD]}function GD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Kt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:z.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Kt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:z.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Kt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:z.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var KD=["HydrateFallback","hydrateFallbackElement"],$D=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function YD({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=ED()||a;let[l,c]=z.useState(n.state),[d,p]=qD(l),[g,v]=z.useState(),[E,b]=z.useState({isTransitioning:!1}),[C,V]=z.useState(),[j,L]=z.useState(),[G,F]=z.useState(),K=z.useRef(new Map),ee=z.useCallback((A,{deletedFetchers:w,newErrors:I,flushSync:N,viewTransitionOpts:M})=>{I&&t&&Object.values(I).forEach(Ae=>{var ke;return t(Ae,{location:A.location,params:((ke=A.matches[0])==null?void 0:ke.params)??{},unstable_pattern:cc(A.matches)})}),A.fetchers.forEach((Ae,ke)=>{Ae.data!==void 0&&K.current.set(ke,Ae.data)}),w.forEach(Ae=>K.current.delete(Ae)),E0(N===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(E0(M==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!x){e&&N?e(()=>c(A)):a===!1?c(A):z.startTransition(()=>{a===!0&&p(Ae=>S0(Ae,A)),c(A)});return}if(e&&N){e(()=>{j&&(C==null||C.resolve(),j.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let Ae=n.window.document.startViewTransition(()=>{e(()=>c(A))});Ae.finished.finally(()=>{e(()=>{V(void 0),L(void 0),v(void 0),b({isTransitioning:!1})})}),e(()=>L(Ae));return}j?(C==null||C.resolve(),j.skipTransition(),F({state:A,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(v(A),b({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,j,C,a,p,t]);z.useLayoutEffect(()=>n.subscribe(ee),[n,ee]),z.useEffect(()=>{E.isTransitioning&&!E.flushSync&&V(new $D)},[E]),z.useEffect(()=>{if(C&&g&&n.window){let A=g,w=C.promise,I=n.window.document.startViewTransition(async()=>{a===!1?c(A):z.startTransition(()=>{a===!0&&p(N=>S0(N,A)),c(A)}),await w});I.finished.finally(()=>{V(void 0),L(void 0),v(void 0),b({isTransitioning:!1})}),L(I)}},[g,C,n.window,a,p]),z.useEffect(()=>{C&&g&&d.location.key===g.location.key&&C.resolve()},[C,j,d.location,g]),z.useEffect(()=>{!E.isTransitioning&&G&&(v(G.state),b({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}),F(void 0))},[E.isTransitioning,G]);let ae=z.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,w,I)=>n.navigate(A,{state:w,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(A,w,I)=>n.navigate(A,{replace:!0,state:w,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[n]),Y=n.basename||"/",S=z.useMemo(()=>({router:n,navigator:ae,static:!1,basename:Y,onError:t}),[n,ae,Y,t]);return z.createElement(z.Fragment,null,z.createElement(so.Provider,{value:S},z.createElement(fc.Provider,{value:d},z.createElement(Fb.Provider,{value:K.current},z.createElement(oy.Provider,{value:E},z.createElement(WD,{basename:Y,location:d.location,navigationType:d.historyAction,navigator:ae,unstable_useTransitions:a},z.createElement(QD,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function S0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var QD=z.memo(XD);function XD({routes:n,future:e,state:t,onError:a}){return ND(n,void 0,t,a,e)}function es({to:n,replace:e,state:t,relative:a}){Xe(Rl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=z.useContext(Er);Kt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=z.useContext(Ur),{pathname:c}=ti(),d=hc(),p=cd(n,ud(l),c,a==="path"),g=JSON.stringify(p);return z.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function Yb(n){return DD(n.context)}function WD({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){Xe(!Rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=z.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=la(t));let{pathname:g="/",search:v="",hash:E="",state:b=null,key:C="default"}=t,V=z.useMemo(()=>{let j=Lr(g,d);return j==null?null:{location:{pathname:j,search:v,hash:E,state:b,key:C},navigationType:a}},[d,g,v,E,b,C,a]);return Kt(V!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:z.createElement(Er.Provider,{value:p},z.createElement(fd.Provider,{children:e,value:V}))}var lh="get",uh="application/x-www-form-urlencoded";function dd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function JD(n){return dd(n)&&n.tagName.toLowerCase()==="button"}function ZD(n){return dd(n)&&n.tagName.toLowerCase()==="form"}function e2(n){return dd(n)&&n.tagName.toLowerCase()==="input"}function t2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function n2(n,e){return n.button===0&&(!e||e==="_self")&&!t2(n)}var Wf=null;function r2(){if(Wf===null)try{new FormData(document.createElement("form"),0),Wf=!1}catch{Wf=!0}return Wf}var i2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zp(n){return n!=null&&!i2.has(n)?(Kt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uh}"`),null):n}function a2(n,e){let t,a,s,l,c;if(ZD(n)){let d=n.getAttribute("action");a=d?Lr(d,e):null,t=n.getAttribute("method")||lh,s=Zp(n.getAttribute("enctype"))||uh,l=new FormData(n)}else if(JD(n)||e2(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?Lr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||lh,s=Zp(n.getAttribute("formenctype"))||Zp(d.getAttribute("enctype"))||uh,l=new FormData(d,n),!r2()){let{name:g,type:v,value:E}=n;if(v==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(dd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=lh,a=null,s=uh,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function s2(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&Lr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function o2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function u2(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await o2(l,t);return c.links?c.links():[]}return[]}));return d2(a.flat(1).filter(l2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function b0(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var v;return t[g].pathname!==p.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function c2(n,e,{includeHydrateFallback:t}={}){return f2(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function f2(n){return[...new Set(n)]}function h2(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function d2(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(h2(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function Qb(){let n=z.useContext(so);return fy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function m2(){let n=z.useContext(fc);return fy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var hy=z.createContext(void 0);hy.displayName="FrameworkContext";function Xb(){let n=z.useContext(hy);return fy(n,"You must render this element inside a <HydratedRouter> element"),n}function p2(n,e){let t=z.useContext(hy),[a,s]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,b=z.useRef(null);z.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=G=>{G.forEach(F=>{c(F.isIntersecting)})},L=new IntersectionObserver(j,{threshold:.5});return b.current&&L.observe(b.current),()=>{L.disconnect()}}},[n]),z.useEffect(()=>{if(a){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[a]);let C=()=>{s(!0)},V=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Ou(d,C),onBlur:Ou(p,V),onMouseEnter:Ou(g,C),onMouseLeave:Ou(v,V),onTouchStart:Ou(E,C)}]:[!1,b,{}]}function Ou(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function g2({page:n,...e}){let{router:t}=Qb(),a=z.useMemo(()=>$a(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?z.createElement(v2,{page:n,matches:a,...e}):null}function y2(n){let{manifest:e,routeModules:t}=Xb(),[a,s]=z.useState([]);return z.useEffect(()=>{let l=!1;return u2(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function v2({page:n,matches:e,...t}){let a=ti(),{future:s,manifest:l,routeModules:c}=Xb(),{basename:d}=Qb(),{loaderData:p,matches:g}=m2(),v=z.useMemo(()=>b0(n,e,g,l,a,"data"),[n,e,g,l,a]),E=z.useMemo(()=>b0(n,e,g,l,a,"assets"),[n,e,g,l,a]),b=z.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let j=new Set,L=!1;if(e.forEach(F=>{var ee;let K=l.routes[F.route.id];!K||!K.hasLoader||(!v.some(ae=>ae.route.id===F.route.id)&&F.route.id in p&&((ee=c[F.route.id])!=null&&ee.shouldRevalidate)||K.hasClientLoader?L=!0:j.add(F.route.id))}),j.size===0)return[];let G=s2(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return L&&j.size>0&&G.searchParams.set("_routes",e.filter(F=>j.has(F.route.id)).map(F=>F.route.id).join(",")),[G.pathname+G.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,v,e,n,c]),C=z.useMemo(()=>c2(E,l),[E,l]),V=y2(E);return z.createElement(z.Fragment,null,b.map(j=>z.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...t})),C.map(j=>z.createElement("link",{key:j,rel:"modulepreload",href:j,...t})),V.map(({key:j,link:L})=>z.createElement("link",{key:j,nonce:t.nonce,...L,crossOrigin:L.crossOrigin??t.crossOrigin})))}function _2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var E2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{E2&&(window.__reactRouterVersion="7.13.0")}catch{}function T2(n,e){return QI({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:fI({window:e==null?void 0:e.window}),hydrationData:S2(),routes:n,mapRouteProperties:GD,hydrationRouteProperties:KD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function S2(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:b2(n.errors)}),n}function b2(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new uc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var Wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jb=z.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...C},V){let{basename:j,unstable_useTransitions:L}=z.useContext(Er),G=typeof g=="string"&&Wb.test(g),F=Db(g,j);g=F.to;let K=RD(g,{relative:s}),[ee,ae,Y]=p2(a,C),S=C2(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:b,unstable_useTransitions:L});function A(I){e&&e(I),I.defaultPrevented||S(I)}let w=z.createElement("a",{...C,...Y,href:F.absoluteURL||K,onClick:F.isExternal||l?e:A,ref:_2(V,ae),target:p,"data-discover":!G&&t==="render"?"true":void 0});return ee&&!G?z.createElement(z.Fragment,null,w,z.createElement(g2,{page:K})):w});Jb.displayName="Link";var w2=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=dc(c,{relative:g.relative}),b=ti(),C=z.useContext(fc),{navigator:V,basename:j}=z.useContext(Er),L=C!=null&&O2(E)&&d===!0,G=V.encodeLocation?V.encodeLocation(E).pathname:E.pathname,F=b.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(F=F.toLowerCase(),K=K?K.toLowerCase():null,G=G.toLowerCase()),K&&j&&(K=Lr(K,j)||K);const ee=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ae=F===G||!s&&F.startsWith(G)&&F.charAt(ee)==="/",Y=K!=null&&(K===G||!s&&K.startsWith(G)&&K.charAt(G.length)==="/"),S={isActive:ae,isPending:Y,isTransitioning:L},A=ae?e:void 0,w;typeof a=="function"?w=a(S):w=[a,ae?"active":null,Y?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let I=typeof l=="function"?l(S):l;return z.createElement(Jb,{...g,"aria-current":A,className:w,ref:v,style:I,to:c,viewTransition:d},typeof p=="function"?p(S):p)});w2.displayName="NavLink";var A2=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=lh,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...C},V)=>{let{unstable_useTransitions:j}=z.useContext(Er),L=N2(),G=x2(d,{relative:g}),F=c.toLowerCase()==="get"?"get":"post",K=typeof d=="string"&&Wb.test(d),ee=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let Y=ae.nativeEvent.submitter,S=(Y==null?void 0:Y.getAttribute("formmethod"))||c,A=()=>L(Y||ae.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:s,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b});j&&t!==!1?z.startTransition(()=>A()):A()};return z.createElement("form",{ref:V,method:F,action:G,onSubmit:a?p:ee,...C,"data-discover":!K&&n==="render"?"true":void 0})});A2.displayName="Form";function R2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zb(n){let e=z.useContext(so);return Xe(e,R2(n)),e}function C2(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=hc(),v=ti(),E=dc(n,{relative:l});return z.useCallback(b=>{if(n2(b,e)){b.preventDefault();let C=t!==void 0?t:Ai(v)===Ai(E),V=()=>g(n,{replace:C,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?z.startTransition(()=>V()):V()}},[v,g,E,t,a,e,n,s,l,c,d,p])}var I2=0,D2=()=>`__${String(++I2)}__`;function N2(){let{router:n}=Zb("useSubmit"),{basename:e}=z.useContext(Er),t=jD(),a=n.fetch,s=n.navigate;return z.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=a2(l,e);if(c.navigate===!1){let b=c.fetcherKey||D2();await a(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function x2(n,{relative:e}={}){let{basename:t}=z.useContext(Er),a=z.useContext(Ur);Xe(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...dc(n||".",{relative:e})},c=ti();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ei([t,l.pathname])),Ai(l)}function O2(n,{relative:e}={}){let t=z.useContext(oy);Xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Zb("useViewTransitionState"),s=dc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Lr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=Lr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Oh(s.pathname,c)!=null||Oh(s.pathname,l)!=null}var M2=_b();function V2(n){return z.createElement(YD,{flushSync:M2.flushSync,...n})}const P2=z.createContext(void 0),ua=()=>aI(),pt=lI.withTypes(),L2=({children:n})=>{const e=pt(t=>t.auth.loading);return O.jsx(P2.Provider,{value:{isLoading:e},children:n})},k2=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},U2=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,C=g&63;p||(C=64,c||(b=64)),a.push(t[v],t[E],t[b],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ew(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):U2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new j2;const b=l<<2|d>>4;if(a.push(b),g!==64){const C=d<<4&240|g>>2;if(a.push(C),E!==64){const V=g<<6&192|E;a.push(V)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class j2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z2=function(n){const e=ew(n);return tw.encodeByteArray(e,!0)},Mh=function(n){return z2(n).replace(/\./g,"")},nw=function(n){try{return tw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=()=>B2().__FIREBASE_DEFAULTS__,H2=()=>{if(typeof process>"u"||typeof w0>"u")return;const n=w0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&nw(n[1]);return e&&JSON.parse(e)},md=()=>{try{return k2()||F2()||H2()||q2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},rw=n=>{var e,t;return(t=(e=md())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},G2=n=>{const e=rw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},iw=()=>{var n;return(n=md())==null?void 0:n.config},aw=n=>{var e;return(e=md())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Mh(JSON.stringify(t)),Mh(JSON.stringify(c)),""].join(".")}const Fu={};function Y2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?n.emulator.push(e):n.prod.push(e);return n}function Q2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let A0=!1;function ow(n,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Fu[n]===e||Fu[n]||A0)return;Fu[n]=e;function t(b){return`__firebase__banner__${b}`}const a="__firebase__banner",l=Y2().prod.length>0;function c(){const b=document.getElementById(a);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{A0=!0,c()},b}function v(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=Q2(a),C=t("text"),V=document.getElementById(C)||document.createElement("span"),j=t("learnmore"),L=document.getElementById(j)||document.createElement("a"),G=t("preprendIcon"),F=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const K=b.element;d(K),v(L,j);const ee=g();p(F,G),K.append(F,V,L,ee),document.body.appendChild(K)}l?(V.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function W2(){var e;const n=(e=md())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function eN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tN(){const n=On();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nN(){return!W2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rN(){try{return typeof indexedDB=="object"}catch{return!1}}function iN(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN="FirebaseError";class ca extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=aN,Object.setPrototypeOf(this,ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?sN(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ca(s,d,a)}}function sN(n,e){return n.replace(oN,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const oN=/\{\$([^}]+)}/g;function lN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function eo(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(R0(l)&&R0(c)){if(!eo(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function R0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function uN(n,e){const t=new cN(n,e);return t.subscribe.bind(t)}class cN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");fN(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=eg),s.error===void 0&&(s.error=eg),s.complete===void 0&&(s.complete=eg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(n){return n&&n._delegate?n._delegate:n}class to{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new K2;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mN(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:dN(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dN(n){return n===Ks?void 0:n}function mN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new hN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const gN={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},yN=nt.INFO,vN={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},_N=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=vN[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dy{constructor(e){this.name=e,this._logLevel=yN,this._logHandler=_N,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const EN=(n,e)=>e.some(t=>n instanceof t);let C0,I0;function TN(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SN(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lw=new WeakMap,bg=new WeakMap,uw=new WeakMap,tg=new WeakMap,my=new WeakMap;function bN(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ts(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&lw.set(t,n)}).catch(()=>{}),my.set(e,n),e}function wN(n){if(bg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});bg.set(n,e)}let wg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return bg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||uw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ts(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function AN(n){wg=n(wg)}function RN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(ng(this),e,...t);return uw.set(a,e.sort?e.sort():[e]),ts(a)}:SN().includes(n)?function(...e){return n.apply(ng(this),e),ts(lw.get(this))}:function(...e){return ts(n.apply(ng(this),e))}}function CN(n){return typeof n=="function"?RN(n):(n instanceof IDBTransaction&&wN(n),EN(n,TN())?new Proxy(n,wg):n)}function ts(n){if(n instanceof IDBRequest)return bN(n);if(tg.has(n))return tg.get(n);const e=CN(n);return e!==n&&(tg.set(n,e),my.set(e,n)),e}const ng=n=>my.get(n);function IN(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=ts(c);return a&&c.addEventListener("upgradeneeded",p=>{a(ts(c.result),p.oldVersion,p.newVersion,ts(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const DN=["get","getKey","getAll","getAllKeys","count"],NN=["put","add","delete","clear"],rg=new Map;function D0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rg.get(e))return rg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=NN.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||DN.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return rg.set(e,l),l}AN(n=>({...n,get:(e,t,a)=>D0(e,t)||n.get(e,t,a),has:(e,t)=>!!D0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ON(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function ON(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",N0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=new dy("@firebase/app"),MN="@firebase/app-compat",VN="@firebase/analytics-compat",PN="@firebase/analytics",LN="@firebase/app-check-compat",kN="@firebase/app-check",UN="@firebase/auth",jN="@firebase/auth-compat",zN="@firebase/database",BN="@firebase/data-connect",FN="@firebase/database-compat",HN="@firebase/functions",qN="@firebase/functions-compat",GN="@firebase/installations",KN="@firebase/installations-compat",$N="@firebase/messaging",YN="@firebase/messaging-compat",QN="@firebase/performance",XN="@firebase/performance-compat",WN="@firebase/remote-config",JN="@firebase/remote-config-compat",ZN="@firebase/storage",ex="@firebase/storage-compat",tx="@firebase/firestore",nx="@firebase/ai",rx="@firebase/firestore-compat",ix="firebase",ax="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="[DEFAULT]",sx={[Ag]:"fire-core",[MN]:"fire-core-compat",[PN]:"fire-analytics",[VN]:"fire-analytics-compat",[kN]:"fire-app-check",[LN]:"fire-app-check-compat",[UN]:"fire-auth",[jN]:"fire-auth-compat",[zN]:"fire-rtdb",[BN]:"fire-data-connect",[FN]:"fire-rtdb-compat",[HN]:"fire-fn",[qN]:"fire-fn-compat",[GN]:"fire-iid",[KN]:"fire-iid-compat",[$N]:"fire-fcm",[YN]:"fire-fcm-compat",[QN]:"fire-perf",[XN]:"fire-perf-compat",[WN]:"fire-rc",[JN]:"fire-rc-compat",[ZN]:"fire-gcs",[ex]:"fire-gcs-compat",[tx]:"fire-fst",[rx]:"fire-fst-compat",[nx]:"fire-vertex","fire-js":"fire-js",[ix]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,ox=new Map,Cg=new Map;function x0(n,e){try{n.container.addComponent(e)}catch(t){ra.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ml(n){const e=n.name;if(Cg.has(e))return ra.debug(`There were multiple attempts to register component ${e}.`),!1;Cg.set(e,n);for(const t of Vh.values())x0(t,n);for(const t of ox.values())x0(t,n);return!0}function py(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Yr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ns=new mc("app","Firebase",lx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new to("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=ax;function cw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Rg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw ns.create("bad-app-name",{appName:String(s)});if(t||(t=iw()),!t)throw ns.create("no-options");const l=Vh.get(s);if(l){if(eo(t,l.options)&&eo(a,l.config))return l;throw ns.create("duplicate-app",{appName:s})}const c=new pN(s);for(const p of Cg.values())c.addComponent(p);const d=new ux(t,a,c);return Vh.set(s,d),d}function fw(n=Rg){const e=Vh.get(n);if(!e&&n===Rg&&iw())return cw();if(!e)throw ns.create("no-app",{appName:n});return e}function rs(n,e,t){let a=sx[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ra.warn(c.join(" "));return}ml(new to(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="firebase-heartbeat-database",fx=1,Ju="firebase-heartbeat-store";let ig=null;function hw(){return ig||(ig=IN(cx,fx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw ns.create("idb-open",{originalErrorMessage:n.message})})),ig}async function hx(n){try{const t=(await hw()).transaction(Ju),a=await t.objectStore(Ju).get(dw(n));return await t.done,a}catch(e){if(e instanceof ca)ra.warn(e.message);else{const t=ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ra.warn(t.message)}}}async function O0(n,e){try{const a=(await hw()).transaction(Ju,"readwrite");await a.objectStore(Ju).put(e,dw(n)),await a.done}catch(t){if(t instanceof ca)ra.warn(t.message);else{const a=ns.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ra.warn(a.message)}}}function dw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=1024,mx=30;class px{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yx(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=M0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>mx){const c=vx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ra.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=M0(),{heartbeatsToSend:a,unsentEntries:s}=gx(this._heartbeatsCache.heartbeats),l=Mh(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ra.warn(t),""}}}function M0(){return new Date().toISOString().substring(0,10)}function gx(n,e=dx){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),V0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),V0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class yx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rN()?iN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await hx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return O0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function V0(n){return Mh(JSON.stringify({version:2,heartbeats:n})).length}function vx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(n){ml(new to("platform-logger",e=>new xN(e),"PRIVATE")),ml(new to("heartbeat",e=>new px(e),"PRIVATE")),rs(Ag,N0,n),rs(Ag,N0,"esm2020"),rs("fire-js","")}_x("");var P0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,mw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,A){function w(){}w.prototype=A.prototype,S.F=A.prototype,S.prototype=new w,S.prototype.constructor=S,S.D=function(I,N,M){for(var x=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)x[Ae-2]=arguments[Ae];return A.prototype[N].apply(I,x)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,A,w){w||(w=0);const I=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)I[N]=A.charCodeAt(w++)|A.charCodeAt(w++)<<8|A.charCodeAt(w++)<<16|A.charCodeAt(w++)<<24;else for(N=0;N<16;++N)I[N]=A[w++]|A[w++]<<8|A[w++]<<16|A[w++]<<24;A=S.g[0],w=S.g[1],N=S.g[2];let M=S.g[3],x;x=A+(M^w&(N^M))+I[0]+3614090360&4294967295,A=w+(x<<7&4294967295|x>>>25),x=M+(N^A&(w^N))+I[1]+3905402710&4294967295,M=A+(x<<12&4294967295|x>>>20),x=N+(w^M&(A^w))+I[2]+606105819&4294967295,N=M+(x<<17&4294967295|x>>>15),x=w+(A^N&(M^A))+I[3]+3250441966&4294967295,w=N+(x<<22&4294967295|x>>>10),x=A+(M^w&(N^M))+I[4]+4118548399&4294967295,A=w+(x<<7&4294967295|x>>>25),x=M+(N^A&(w^N))+I[5]+1200080426&4294967295,M=A+(x<<12&4294967295|x>>>20),x=N+(w^M&(A^w))+I[6]+2821735955&4294967295,N=M+(x<<17&4294967295|x>>>15),x=w+(A^N&(M^A))+I[7]+4249261313&4294967295,w=N+(x<<22&4294967295|x>>>10),x=A+(M^w&(N^M))+I[8]+1770035416&4294967295,A=w+(x<<7&4294967295|x>>>25),x=M+(N^A&(w^N))+I[9]+2336552879&4294967295,M=A+(x<<12&4294967295|x>>>20),x=N+(w^M&(A^w))+I[10]+4294925233&4294967295,N=M+(x<<17&4294967295|x>>>15),x=w+(A^N&(M^A))+I[11]+2304563134&4294967295,w=N+(x<<22&4294967295|x>>>10),x=A+(M^w&(N^M))+I[12]+1804603682&4294967295,A=w+(x<<7&4294967295|x>>>25),x=M+(N^A&(w^N))+I[13]+4254626195&4294967295,M=A+(x<<12&4294967295|x>>>20),x=N+(w^M&(A^w))+I[14]+2792965006&4294967295,N=M+(x<<17&4294967295|x>>>15),x=w+(A^N&(M^A))+I[15]+1236535329&4294967295,w=N+(x<<22&4294967295|x>>>10),x=A+(N^M&(w^N))+I[1]+4129170786&4294967295,A=w+(x<<5&4294967295|x>>>27),x=M+(w^N&(A^w))+I[6]+3225465664&4294967295,M=A+(x<<9&4294967295|x>>>23),x=N+(A^w&(M^A))+I[11]+643717713&4294967295,N=M+(x<<14&4294967295|x>>>18),x=w+(M^A&(N^M))+I[0]+3921069994&4294967295,w=N+(x<<20&4294967295|x>>>12),x=A+(N^M&(w^N))+I[5]+3593408605&4294967295,A=w+(x<<5&4294967295|x>>>27),x=M+(w^N&(A^w))+I[10]+38016083&4294967295,M=A+(x<<9&4294967295|x>>>23),x=N+(A^w&(M^A))+I[15]+3634488961&4294967295,N=M+(x<<14&4294967295|x>>>18),x=w+(M^A&(N^M))+I[4]+3889429448&4294967295,w=N+(x<<20&4294967295|x>>>12),x=A+(N^M&(w^N))+I[9]+568446438&4294967295,A=w+(x<<5&4294967295|x>>>27),x=M+(w^N&(A^w))+I[14]+3275163606&4294967295,M=A+(x<<9&4294967295|x>>>23),x=N+(A^w&(M^A))+I[3]+4107603335&4294967295,N=M+(x<<14&4294967295|x>>>18),x=w+(M^A&(N^M))+I[8]+1163531501&4294967295,w=N+(x<<20&4294967295|x>>>12),x=A+(N^M&(w^N))+I[13]+2850285829&4294967295,A=w+(x<<5&4294967295|x>>>27),x=M+(w^N&(A^w))+I[2]+4243563512&4294967295,M=A+(x<<9&4294967295|x>>>23),x=N+(A^w&(M^A))+I[7]+1735328473&4294967295,N=M+(x<<14&4294967295|x>>>18),x=w+(M^A&(N^M))+I[12]+2368359562&4294967295,w=N+(x<<20&4294967295|x>>>12),x=A+(w^N^M)+I[5]+4294588738&4294967295,A=w+(x<<4&4294967295|x>>>28),x=M+(A^w^N)+I[8]+2272392833&4294967295,M=A+(x<<11&4294967295|x>>>21),x=N+(M^A^w)+I[11]+1839030562&4294967295,N=M+(x<<16&4294967295|x>>>16),x=w+(N^M^A)+I[14]+4259657740&4294967295,w=N+(x<<23&4294967295|x>>>9),x=A+(w^N^M)+I[1]+2763975236&4294967295,A=w+(x<<4&4294967295|x>>>28),x=M+(A^w^N)+I[4]+1272893353&4294967295,M=A+(x<<11&4294967295|x>>>21),x=N+(M^A^w)+I[7]+4139469664&4294967295,N=M+(x<<16&4294967295|x>>>16),x=w+(N^M^A)+I[10]+3200236656&4294967295,w=N+(x<<23&4294967295|x>>>9),x=A+(w^N^M)+I[13]+681279174&4294967295,A=w+(x<<4&4294967295|x>>>28),x=M+(A^w^N)+I[0]+3936430074&4294967295,M=A+(x<<11&4294967295|x>>>21),x=N+(M^A^w)+I[3]+3572445317&4294967295,N=M+(x<<16&4294967295|x>>>16),x=w+(N^M^A)+I[6]+76029189&4294967295,w=N+(x<<23&4294967295|x>>>9),x=A+(w^N^M)+I[9]+3654602809&4294967295,A=w+(x<<4&4294967295|x>>>28),x=M+(A^w^N)+I[12]+3873151461&4294967295,M=A+(x<<11&4294967295|x>>>21),x=N+(M^A^w)+I[15]+530742520&4294967295,N=M+(x<<16&4294967295|x>>>16),x=w+(N^M^A)+I[2]+3299628645&4294967295,w=N+(x<<23&4294967295|x>>>9),x=A+(N^(w|~M))+I[0]+4096336452&4294967295,A=w+(x<<6&4294967295|x>>>26),x=M+(w^(A|~N))+I[7]+1126891415&4294967295,M=A+(x<<10&4294967295|x>>>22),x=N+(A^(M|~w))+I[14]+2878612391&4294967295,N=M+(x<<15&4294967295|x>>>17),x=w+(M^(N|~A))+I[5]+4237533241&4294967295,w=N+(x<<21&4294967295|x>>>11),x=A+(N^(w|~M))+I[12]+1700485571&4294967295,A=w+(x<<6&4294967295|x>>>26),x=M+(w^(A|~N))+I[3]+2399980690&4294967295,M=A+(x<<10&4294967295|x>>>22),x=N+(A^(M|~w))+I[10]+4293915773&4294967295,N=M+(x<<15&4294967295|x>>>17),x=w+(M^(N|~A))+I[1]+2240044497&4294967295,w=N+(x<<21&4294967295|x>>>11),x=A+(N^(w|~M))+I[8]+1873313359&4294967295,A=w+(x<<6&4294967295|x>>>26),x=M+(w^(A|~N))+I[15]+4264355552&4294967295,M=A+(x<<10&4294967295|x>>>22),x=N+(A^(M|~w))+I[6]+2734768916&4294967295,N=M+(x<<15&4294967295|x>>>17),x=w+(M^(N|~A))+I[13]+1309151649&4294967295,w=N+(x<<21&4294967295|x>>>11),x=A+(N^(w|~M))+I[4]+4149444226&4294967295,A=w+(x<<6&4294967295|x>>>26),x=M+(w^(A|~N))+I[11]+3174756917&4294967295,M=A+(x<<10&4294967295|x>>>22),x=N+(A^(M|~w))+I[2]+718787259&4294967295,N=M+(x<<15&4294967295|x>>>17),x=w+(M^(N|~A))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(N+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+M&4294967295}a.prototype.v=function(S,A){A===void 0&&(A=S.length);const w=A-this.blockSize,I=this.C;let N=this.h,M=0;for(;M<A;){if(N==0)for(;M<=w;)s(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<A;)if(I[N++]=S.charCodeAt(M++),N==this.blockSize){s(this,I),N=0;break}}else for(;M<A;)if(I[N++]=S[M++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=A},a.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var w=S.length-8;w<S.length;++w)S[w]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,w=0;w<4;++w)for(let I=0;I<32;I+=8)S[A++]=this.g[w]>>>I&255;return S};function l(S,A){var w=d;return Object.prototype.hasOwnProperty.call(w,S)?w[S]:w[S]=A(S)}function c(S,A){this.h=A;const w=[];let I=!0;for(let N=S.length-1;N>=0;N--){const M=S[N]|0;I&&M==A||(w[N]=M,I=!1)}this.g=w}var d={};function p(S){return-128<=S&&S<128?l(S,function(A){return new c([A|0],A<0?-1:0)}):new c([S|0],S<0?-1:0)}function g(S){if(isNaN(S)||!isFinite(S))return E;if(S<0)return L(g(-S));const A=[];let w=1;for(let I=0;S>=w;I++)A[I]=S/w|0,w*=4294967296;return new c(A,0)}function v(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return L(v(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=g(Math.pow(A,8));let I=E;for(let M=0;M<S.length;M+=8){var N=Math.min(8,S.length-M);const x=parseInt(S.substring(M,M+N),A);N<8?(N=g(Math.pow(A,N)),I=I.j(N).add(g(x))):(I=I.j(w),I=I.add(g(x)))}return I}var E=p(0),b=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(j(this))return-L(this).m();let S=0,A=1;for(let w=0;w<this.g.length;w++){const I=this.i(w);S+=(I>=0?I:4294967296+I)*A,A*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(V(this))return"0";if(j(this))return"-"+L(this).toString(S);const A=g(Math.pow(S,6));var w=this;let I="";for(;;){const N=ee(w,A).g;w=G(w,N.j(A));let M=((w.g.length>0?w.g[0]:w.h)>>>0).toString(S);if(w=N,V(w))return M+I;for(;M.length<6;)M="0"+M;I=M+I}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function V(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function j(S){return S.h==-1}n.l=function(S){return S=G(this,S),j(S)?-1:V(S)?0:1};function L(S){const A=S.g.length,w=[];for(let I=0;I<A;I++)w[I]=~S.g[I];return new c(w,~S.h).add(b)}n.abs=function(){return j(this)?L(this):this},n.add=function(S){const A=Math.max(this.g.length,S.g.length),w=[];let I=0;for(let N=0;N<=A;N++){let M=I+(this.i(N)&65535)+(S.i(N)&65535),x=(M>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);I=x>>>16,M&=65535,x&=65535,w[N]=x<<16|M}return new c(w,w[w.length-1]&-2147483648?-1:0)};function G(S,A){return S.add(L(A))}n.j=function(S){if(V(this)||V(S))return E;if(j(this))return j(S)?L(this).j(L(S)):L(L(this).j(S));if(j(S))return L(this.j(L(S)));if(this.l(C)<0&&S.l(C)<0)return g(this.m()*S.m());const A=this.g.length+S.g.length,w=[];for(var I=0;I<2*A;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<S.g.length;N++){const M=this.i(I)>>>16,x=this.i(I)&65535,Ae=S.i(N)>>>16,ke=S.i(N)&65535;w[2*I+2*N]+=x*ke,F(w,2*I+2*N),w[2*I+2*N+1]+=M*ke,F(w,2*I+2*N+1),w[2*I+2*N+1]+=x*Ae,F(w,2*I+2*N+1),w[2*I+2*N+2]+=M*Ae,F(w,2*I+2*N+2)}for(S=0;S<A;S++)w[S]=w[2*S+1]<<16|w[2*S];for(S=A;S<2*A;S++)w[S]=0;return new c(w,0)};function F(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function K(S,A){this.g=S,this.h=A}function ee(S,A){if(V(A))throw Error("division by zero");if(V(S))return new K(E,E);if(j(S))return A=ee(L(S),A),new K(L(A.g),L(A.h));if(j(A))return A=ee(S,L(A)),new K(L(A.g),A.h);if(S.g.length>30){if(j(S)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var w=b,I=A;I.l(S)<=0;)w=ae(w),I=ae(I);var N=Y(w,1),M=Y(I,1);for(I=Y(I,2),w=Y(w,2);!V(I);){var x=M.add(I);x.l(S)<=0&&(N=N.add(w),M=x),I=Y(I,1),w=Y(w,1)}return A=G(S,N.j(A)),new K(N,A)}for(N=E;S.l(A)>=0;){for(w=Math.max(1,Math.floor(S.m()/A.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),M=g(w),x=M.j(A);j(x)||x.l(S)>0;)w-=I,M=g(w),x=M.j(A);V(M)&&(M=b),N=N.add(M),S=G(S,x)}return new K(N,S)}n.B=function(S){return ee(this,S).h},n.and=function(S){const A=Math.max(this.g.length,S.g.length),w=[];for(let I=0;I<A;I++)w[I]=this.i(I)&S.i(I);return new c(w,this.h&S.h)},n.or=function(S){const A=Math.max(this.g.length,S.g.length),w=[];for(let I=0;I<A;I++)w[I]=this.i(I)|S.i(I);return new c(w,this.h|S.h)},n.xor=function(S){const A=Math.max(this.g.length,S.g.length),w=[];for(let I=0;I<A;I++)w[I]=this.i(I)^S.i(I);return new c(w,this.h^S.h)};function ae(S){const A=S.g.length+1,w=[];for(let I=0;I<A;I++)w[I]=S.i(I)<<1|S.i(I-1)>>>31;return new c(w,S.h)}function Y(S,A){const w=A>>5;A%=32;const I=S.g.length-w,N=[];for(let M=0;M<I;M++)N[M]=A>0?S.i(M+w)>>>A|S.i(M+w+1)<<32-A:S.i(M+w);return new c(N,S.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,mw=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,is=c}).apply(typeof P0<"u"?P0:typeof self<"u"?self:typeof window<"u"?window:{});var Jf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pw,Lu,gw,ch,Ig,yw,vw,_w;(function(){var n,e=Object.defineProperty;function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jf=="object"&&Jf];for(var y=0;y<f.length;++y){var T=f[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(f,y){if(y)e:{var T=a;f=f.split(".");for(var D=0;D<f.length-1;D++){var $=f[D];if(!($ in T))break e;T=T[$]}f=f[f.length-1],D=T[f],y=y(D),y!=D&&y!=null&&e(T,f,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function p(f,y,T){return f.call.apply(f.bind,arguments)}function g(f,y,T){return g=p,g.apply(null,arguments)}function v(f,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),f.apply(this,D)}}function E(f,y){function T(){}T.prototype=y.prototype,f.Z=y.prototype,f.prototype=new T,f.prototype.constructor=f,f.Ob=function(D,$,te){for(var pe=Array(arguments.length-2),He=2;He<arguments.length;He++)pe[He-2]=arguments[He];return y.prototype[$].apply(D,pe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function C(f){const y=f.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=f[D];return T}return[]}function V(f,y){for(let D=1;D<arguments.length;D++){const $=arguments[D];var T=typeof $;if(T=T!="object"?T:$?Array.isArray($)?"array":T:"null",T=="array"||T=="object"&&typeof $.length=="number"){T=f.length||0;const te=$.length||0;f.length=T+te;for(let pe=0;pe<te;pe++)f[T+pe]=$[pe]}else f.push($)}}class j{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(f){c.setTimeout(()=>{throw f},0)}function G(){var f=S;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class F{constructor(){this.h=this.g=null}add(y,T){const D=K.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var K=new j(()=>new ee,f=>f.reset());class ee{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,Y=!1,S=new F,A=()=>{const f=Promise.resolve(void 0);ae=()=>{f.then(w)}};function w(){for(var f;f=G();){try{f.h.call(f.g)}catch(T){L(T)}var y=K;y.j(f),y.h<100&&(y.h++,f.next=y.g,y.g=f)}Y=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return f})();function x(f){return/^[\s\xa0]*$/.test(f)}function Ae(f,y){N.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,y)}E(Ae,N),Ae.prototype.init=function(f,y){const T=this.type=f.type,D=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget,y||(T=="mouseover"?y=f.fromElement:T=="mouseout"&&(y=f.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ce(f,y,T,D,$){this.listener=f,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=$,this.key=++Q,this.da=this.fa=!1}function ge(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function De(f,y,T){for(const D in f)y.call(T,f[D],D,f)}function Ve(f,y){for(const T in f)y.call(void 0,f[T],T,f)}function U(f){const y={};for(const T in f)y[T]=f[T];return y}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(f,y){let T,D;for(let $=1;$<arguments.length;$++){D=arguments[$];for(T in D)f[T]=D[T];for(let te=0;te<re.length;te++)T=re[te],Object.prototype.hasOwnProperty.call(D,T)&&(f[T]=D[T])}}function ve(f){this.src=f,this.g={},this.h=0}ve.prototype.add=function(f,y,T,D,$){const te=f.toString();f=this.g[te],f||(f=this.g[te]=[],this.h++);const pe=Oe(f,y,D,$);return pe>-1?(y=f[pe],T||(y.fa=!1)):(y=new ce(y,this.src,te,!!D,$),y.fa=T,f.push(y)),y};function Re(f,y){const T=y.type;if(T in f.g){var D=f.g[T],$=Array.prototype.indexOf.call(D,y,void 0),te;(te=$>=0)&&Array.prototype.splice.call(D,$,1),te&&(ge(y),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Oe(f,y,T,D){for(let $=0;$<f.length;++$){const te=f[$];if(!te.da&&te.listener==y&&te.capture==!!T&&te.ha==D)return $}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),St={};function At(f,y,T,D,$){if(Array.isArray(y)){for(let te=0;te<y.length;te++)At(f,y[te],T,D,$);return null}return T=vs(T),f&&f[ke]?f.J(y,T,d(D)?!!D.capture:!1,$):Ii(f,y,T,!1,D,$)}function Ii(f,y,T,D,$,te){if(!y)throw Error("Invalid event type");const pe=d($)?!!$.capture:!!$;let He=Mn(f);if(He||(f[Ye]=He=new ve(f)),T=He.add(y,T,D,pe,te),T.proxy)return T;if(D=fa(),T.proxy=D,D.src=f,D.listener=T,f.addEventListener)M||($=pe),$===void 0&&($=!1),f.addEventListener(y.toString(),D,$);else if(f.attachEvent)f.attachEvent(Zn(y.toString()),D);else if(f.addListener&&f.removeListener)f.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function fa(){function f(T){return y.call(f.src,f.listener,T)}const y=gs;return f}function Ut(f,y,T,D,$){if(Array.isArray(y))for(var te=0;te<y.length;te++)Ut(f,y[te],T,D,$);else D=d(D)?!!D.capture:!!D,T=vs(T),f&&f[ke]?(f=f.i,te=String(y).toString(),te in f.g&&(y=f.g[te],T=Oe(y,T,D,$),T>-1&&(ge(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete f.g[te],f.h--)))):f&&(f=Mn(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Oe(y,T,D,$)),(T=f>-1?y[f]:null)&&Jn(T))}function Jn(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[ke])Re(y.i,f);else{var T=f.type,D=f.proxy;y.removeEventListener?y.removeEventListener(T,D,f.capture):y.detachEvent?y.detachEvent(Zn(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=Mn(y))?(Re(T,f),T.h==0&&(T.src=null,y[Ye]=null)):ge(f)}}}function Zn(f){return f in St?St[f]:St[f]="on"+f}function gs(f,y){if(f.da)f=!0;else{y=new Ae(y,this);const T=f.listener,D=f.ha||f.src;f.fa&&Jn(f),f=T.call(D,y)}return f}function Mn(f){return f=f[Ye],f instanceof ve?f:null}var ys="__closure_events_fn_"+(Math.random()*1e9>>>0);function vs(f){return typeof f=="function"?f:(f[ys]||(f[ys]=function(y){return f.handleEvent(y)}),f[ys])}function jt(){I.call(this),this.i=new ve(this),this.M=this,this.G=null}E(jt,I),jt.prototype[ke]=!0,jt.prototype.removeEventListener=function(f,y,T,D){Ut(this,f,y,T,D)};function $t(f,y){var T,D=f.G;if(D)for(T=[];D;D=D.G)T.push(D);if(f=f.M,D=y.type||y,typeof y=="string")y=new N(y,f);else if(y instanceof N)y.target=y.target||f;else{var $=y;y=new N(D,f),he(y,$)}$=!0;let te,pe;if(T)for(pe=T.length-1;pe>=0;pe--)te=y.g=T[pe],$=ni(te,D,!0,y)&&$;if(te=y.g=f,$=ni(te,D,!0,y)&&$,$=ni(te,D,!1,y)&&$,T)for(pe=0;pe<T.length;pe++)te=y.g=T[pe],$=ni(te,D,!1,y)&&$}jt.prototype.N=function(){if(jt.Z.N.call(this),this.i){var f=this.i;for(const y in f.g){const T=f.g[y];for(let D=0;D<T.length;D++)ge(T[D]);delete f.g[y],f.h--}}this.G=null},jt.prototype.J=function(f,y,T,D){return this.i.add(String(f),y,!1,T,D)},jt.prototype.K=function(f,y,T,D){return this.i.add(String(f),y,!0,T,D)};function ni(f,y,T,D){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();let $=!0;for(let te=0;te<y.length;++te){const pe=y[te];if(pe&&!pe.da&&pe.capture==T){const He=pe.listener,Yt=pe.ha||pe.src;pe.fa&&Re(f.i,pe),$=He.call(Yt,D)!==!1&&$}}return $&&!D.defaultPrevented}function Pl(f,y){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(f,y||0)}function fo(f){f.g=Pl(()=>{f.g=null,f.i&&(f.i=!1,fo(f))},f.l);const y=f.h;f.h=null,f.m.apply(null,y)}class zt extends I{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:fo(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function er(f){I.call(this),this.h=f,this.g={}}E(er,I);var ha=[];function Di(f){De(f.g,function(y,T){this.g.hasOwnProperty(T)&&Jn(y)},f),f.g={}}er.prototype.N=function(){er.Z.N.call(this),Di(this)},er.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fn=c.JSON.stringify,tr=c.JSON.parse,_s=class{stringify(f){return c.JSON.stringify(f,void 0)}parse(f){return c.JSON.parse(f,void 0)}};function ho(){}function da(){}var nr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bt(){N.call(this,"d")}E(bt,N);function Vn(){N.call(this,"c")}E(Vn,N);var Vt={},Es=null;function ma(){return Es=Es||new jt}Vt.Ia="serverreachability";function Ts(f){N.call(this,Vt.Ia,f)}E(Ts,N);function Pn(f){const y=ma();$t(y,new Ts(y))}Vt.STAT_EVENT="statevent";function ri(f,y){N.call(this,Vt.STAT_EVENT,f),this.stat=y}E(ri,N);function Pt(f){const y=ma();$t(y,new ri(y,f))}Vt.Ja="timingevent";function Tr(f,y){N.call(this,Vt.Ja,f),this.size=y}E(Tr,N);function rr(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){f()},y)}function ir(){this.g=!0}ir.prototype.ua=function(){this.g=!1};function mo(f,y,T,D,$,te){f.info(function(){if(f.g)if(te){var pe="",He=te.split("&");for(let ct=0;ct<He.length;ct++){var Yt=He[ct].split("=");if(Yt.length>1){const Lt=Yt[0];Yt=Yt[1];const wr=Lt.split("_");pe=wr.length>=2&&wr[1]=="type"?pe+(Lt+"="+Yt+"&"):pe+(Lt+"=redacted&")}}}else pe=null;else pe=te;return"XMLHTTP REQ ("+D+") [attempt "+$+"]: "+y+`
`+T+`
`+pe})}function Ni(f,y,T,D,$,te,pe){f.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+$+"]: "+y+`
`+T+`
`+te+" "+pe})}function Ln(f,y,T,D){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ll(f,T)+(D?" "+D:"")})}function ii(f,y){f.info(function(){return"TIMEOUT: "+y})}ir.prototype.info=function(){};function Ll(f,y){if(!f.g)return y;if(!y)return null;try{const te=JSON.parse(y);if(te){for(f=0;f<te.length;f++)if(Array.isArray(te[f])){var T=te[f];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var $=D[0];if($!="noop"&&$!="stop"&&$!="close")for(let pe=1;pe<D.length;pe++)D[pe]=""}}}}return fn(te)}catch{return y}}var xi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},P={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},H;function J(){}E(J,ho),J.prototype.g=function(){return new XMLHttpRequest},H=new J;function fe(f){return encodeURIComponent(String(f))}function de(f){var y=1;f=f.split(":");const T=[];for(;y>0&&f.length;)T.push(f.shift()),y--;return f.length&&T.push(f.join(":")),T}function Ee(f,y,T,D){this.j=f,this.i=y,this.l=T,this.S=D||1,this.V=new er(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new be}function be(){this.i=null,this.g="",this.h=!1}var me={},ye={};function Se(f,y,T){f.M=1,f.A=Ss(yt(y)),f.u=T,f.R=!0,Pe(f,null)}function Pe(f,y){f.F=Date.now(),gt(f),f.B=yt(f.A);var T=f.B,D=f.S;Array.isArray(D)||(D=[String(D)]),go(T.i,"t",D),f.C=0,T=f.j.L,f.h=new be,f.g=Bc(f.j,T?y:null,!f.u),f.P>0&&(f.O=new zt(g(f.Y,f,f.g),f.P)),y=f.V,T=f.g,D=f.ba;var $="readystatechange";Array.isArray($)||($&&(ha[0]=$.toString()),$=ha);for(let te=0;te<$.length;te++){const pe=At(T,$[te],D||y.handleEvent,!1,y.h||y);if(!pe)break;y.g[pe.key]=pe}y=f.J?U(f.J):{},f.u?(f.v||(f.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,y)):(f.v="GET",f.g.ea(f.B,f.v,null,y)),Pn(),mo(f.i,f.v,f.B,f.l,f.S,f.u)}Ee.prototype.ba=function(f){f=f.target;const y=this.O;y&&Fr(f)==3?y.j():this.Y(f)},Ee.prototype.Y=function(f){try{if(f==this.g)e:{const He=Fr(this.g),Yt=this.g.ya(),ct=this.g.ca();if(!(He<3)&&(He!=3||this.g&&(this.h.h||this.g.la()||pn(this.g)))){this.K||He!=4||Yt==7||(Yt==8||ct<=0?Pn(3):Pn(2)),Rt(this);var y=this.g.ca();this.X=y;var T=Ie(this);if(this.o=y==200,Ni(this.i,this.v,this.B,this.l,this.S,He,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,$=this.g;if((D=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(D)){var te=D;break t}}te=null}if(f=te)Ln(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,hn(this,f);else{this.o=!1,this.m=3,Pt(12),Ct(this),Ge(this);break e}}if(this.R){f=!0;let Lt;for(;!this.K&&this.C<T.length;)if(Lt=Qe(this,T),Lt==ye){He==4&&(this.m=4,Pt(14),f=!1),Ln(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==me){this.m=4,Pt(15),Ln(this.i,this.l,T,"[Invalid Chunk]"),f=!1;break}else Ln(this.i,this.l,Lt,null),hn(this,Lt);if(je(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),He!=4||T.length!=0||this.h.h||(this.m=1,Pt(16),f=!1),this.o=this.o&&f,!f)Ln(this.i,this.l,T,"[Invalid Chunked Response]"),Ct(this),Ge(this);else if(T.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Gl(pe),pe.P=!0,Pt(11))}}else Ln(this.i,this.l,T,null),hn(this,T);He==4&&Ct(this),this.o&&!this.K&&(He==4?kc(this.j,this):(this.o=!1,gt(this)))}else Mi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Ct(this),Ge(this)}}}catch{}finally{}};function Ie(f){if(!je(f))return f.g.la();const y=pn(f.g);if(y==="")return"";let T="";const D=y.length,$=Fr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ct(f),Ge(f),"";f.h.i=new c.TextDecoder}for(let te=0;te<D;te++)f.h.h=!0,T+=f.h.i.decode(y[te],{stream:!($&&te==D-1)});return y.length=0,f.h.g+=T,f.C=0,f.h.g}function je(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function Qe(f,y){var T=f.C,D=y.indexOf(`
`,T);return D==-1?ye:(T=Number(y.substring(T,D)),isNaN(T)?me:(D+=1,D+T>y.length?ye:(y=y.slice(D,D+T),f.C=D+T,y)))}Ee.prototype.cancel=function(){this.K=!0,Ct(this)};function gt(f){f.T=Date.now()+f.H,Nt(f,f.H)}function Nt(f,y){if(f.D!=null)throw Error("WatchDog timer not null");f.D=rr(g(f.aa,f),y)}function Rt(f){f.D&&(c.clearTimeout(f.D),f.D=null)}Ee.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(ii(this.i,this.B),this.M!=2&&(Pn(),Pt(17)),Ct(this),this.m=2,Ge(this)):Nt(this,this.T-f)};function Ge(f){f.j.I==0||f.K||kc(f.j,f)}function Ct(f){Rt(f);var y=f.O;y&&typeof y.dispose=="function"&&y.dispose(),f.O=null,Di(f.V),f.g&&(y=f.g,f.g=null,y.abort(),y.dispose())}function hn(f,y){try{var T=f.j;if(T.I!=0&&(T.g==f||Rn(T.h,f))){if(!f.L&&Rn(T.h,f)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var $=D;if($[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<f.F)To(T),Sa(T);else break e;Ds(T),Pt(18)}}else T.xa=$[1],0<T.xa-T.K&&$[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=rr(g(T.Va,T),6e3));Fn(T.h)<=1&&T.ta&&(T.ta=void 0)}else hi(T,11)}else if((f.L||T.g==f)&&To(T),!x(y))for($=T.Ba.g.parse(y),y=0;y<$.length;y++){let ct=$[y];const Lt=ct[0];if(!(Lt<=T.K))if(T.K=Lt,ct=ct[1],T.I==2)if(ct[0]=="c"){T.M=ct[1],T.ba=ct[2];const wr=ct[3];wr!=null&&(T.ka=wr,T.j.info("VER="+T.ka));const di=ct[4];di!=null&&(T.za=di,T.j.info("SVER="+T.za));const Hr=ct[5];Hr!=null&&typeof Hr=="number"&&Hr>0&&(D=1.5*Hr,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const qr=f.g;if(qr){const Ns=qr.g?qr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ns){var te=D.h;te.g||Ns.indexOf("spdy")==-1&&Ns.indexOf("quic")==-1&&Ns.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(ar(te,te.h),te.h=null))}if(D.G){const So=qr.g?qr.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(D.wa=So,ut(D.J,D.G,So))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-f.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var pe=f;if(D.na=zc(D,D.L?D.ba:null,D.W),pe.L){ai(D.h,pe);var He=pe,Yt=D.O;Yt&&(He.H=Yt),He.D&&(Rt(He),gt(He)),D.g=pe}else Pc(D);T.i.length>0&&fi(T)}else ct[0]!="stop"&&ct[0]!="close"||hi(T,7);else T.I==3&&(ct[0]=="stop"||ct[0]=="close"?ct[0]=="stop"?hi(T,7):Hl(T):ct[0]!="noop"&&T.l&&T.l.qa(ct),T.A=0)}}Pn(4)}catch{}}var It=class{constructor(f,y){this.g=f,this.map=y}};function Bn(f){this.l=f||10,c.PerformanceNavigationTiming?(f=c.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function An(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Fn(f){return f.h?1:f.g?f.g.size:0}function Rn(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function ar(f,y){f.g?f.g.add(y):f.h=y}function ai(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}Bn.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function si(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let y=f.i;for(const T of f.g.values())y=y.concat(T.G);return y}return C(f.i)}var We=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bt(f,y){if(f){f=f.split("&");for(let T=0;T<f.length;T++){const D=f[T].indexOf("=");let $,te=null;D>=0?($=f[T].substring(0,D),te=f[T].substring(D+1)):$=f[T],y($,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Zt(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;f instanceof Zt?(this.l=f.l,Ke(this,f.j),this.o=f.o,this.g=f.g,sr(this,f.u),this.h=f.h,pa(this,Mc(f.i)),this.m=f.m):f&&(y=String(f).match(We))?(this.l=!1,Ke(this,y[1]||"",!0),this.o=oi(y[2]||""),this.g=oi(y[3]||"",!0),sr(this,y[4]),this.h=oi(y[5]||"",!0),pa(this,y[6]||"",!0),this.m=oi(y[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}Zt.prototype.toString=function(){const f=[];var y=this.j;y&&f.push(bs(y,po,!0),":");var T=this.g;return(T||y=="file")&&(f.push("//"),(y=this.o)&&f.push(bs(y,po,!0),"@"),f.push(fe(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&f.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push(bs(T,T.charAt(0)=="/"?kl:Nc,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",bs(T,xc)),f.join("")},Zt.prototype.resolve=function(f){const y=yt(this);let T=!!f.j;T?Ke(y,f.j):T=!!f.o,T?y.o=f.o:T=!!f.g,T?y.g=f.g:T=f.u!=null;var D=f.h;if(T)sr(y,f.u);else if(T=!!f.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var $=y.h.lastIndexOf("/");$!=-1&&(D=y.h.slice(0,$+1)+D)}if($=D,$==".."||$==".")D="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){D=$.lastIndexOf("/",0)==0,$=$.split("/");const te=[];for(let pe=0;pe<$.length;){const He=$[pe++];He=="."?D&&pe==$.length&&te.push(""):He==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&pe==$.length&&te.push("")):(te.push(He),D=!0)}D=te.join("/")}else D=$}return T?y.h=D:T=f.i.toString()!=="",T?pa(y,Mc(f.i)):T=!!f.m,T&&(y.m=f.m),y};function yt(f){return new Zt(f)}function Ke(f,y,T){f.j=T?oi(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function sr(f,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);f.u=y}else f.u=null}function pa(f,y,T){y instanceof ya?(f.i=y,yo(f.i,f.l)):(T||(y=bs(y,ga)),f.i=new ya(y,f.l))}function ut(f,y,T){f.i.set(y,T)}function Ss(f){return ut(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function oi(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function bs(f,y,T){return typeof f=="string"?(f=encodeURI(f).replace(y,Hn),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Hn(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var po=/[#\/\?@]/g,Nc=/[#\?:]/g,kl=/[#\?]/g,ga=/[#\?@]/g,xc=/#/g;function ya(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function qn(f){f.g||(f.g=new Map,f.h=0,f.i&&Bt(f.i,function(y,T){f.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ya.prototype,n.add=function(f,y){qn(this),this.i=null,f=va(this,f);let T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(y),this.h+=1,this};function Oc(f,y){qn(f),y=va(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function Ul(f,y){return qn(f),y=va(f,y),f.g.has(y)}n.forEach=function(f,y){qn(this),this.g.forEach(function(T,D){T.forEach(function($){f.call(y,$,D,this)},this)},this)};function jl(f,y){qn(f);let T=[];if(typeof y=="string")Ul(f,y)&&(T=T.concat(f.g.get(va(f,y))));else for(f=Array.from(f.g.values()),y=0;y<f.length;y++)T=T.concat(f[y]);return T}n.set=function(f,y){return qn(this),this.i=null,f=va(this,f),Ul(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},n.get=function(f,y){return f?(f=jl(this,f),f.length>0?String(f[0]):y):y};function go(f,y,T){Oc(f,y),T.length>0&&(f.i=null,f.g.set(va(f,y),C(T)),f.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const $=fe(T);T=jl(this,T);for(let te=0;te<T.length;te++){let pe=$;T[te]!==""&&(pe+="="+fe(T[te])),f.push(pe)}}return this.i=f.join("&")};function Mc(f){const y=new ya;return y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),y}function va(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function yo(f,y){y&&!f.j&&(qn(f),f.i=null,f.g.forEach(function(T,D){const $=D.toLowerCase();D!=$&&(Oc(this,D),go(this,$,T))},f)),f.j=y}function zr(f,y){const T=new ir;if(c.Image){const D=new Image;D.onload=v(Sr,T,"TestLoadImage: loaded",!0,y,D),D.onerror=v(Sr,T,"TestLoadImage: error",!1,y,D),D.onabort=v(Sr,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=v(Sr,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=f}else y(!1)}function zl(f,y){const T=new ir,D=new AbortController,$=setTimeout(()=>{D.abort(),Sr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:D.signal}).then(te=>{clearTimeout($),te.ok?Sr(T,"TestPingServer: ok",!0,y):Sr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout($),Sr(T,"TestPingServer: error",!1,y)})}function Sr(f,y,T,D,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),D(T)}catch{}}function _a(){this.g=new _s}function li(f){this.i=f.Sb||null,this.h=f.ab||!1}E(li,ho),li.prototype.g=function(){return new ws(this.i,this.h)};function ws(f,y){jt.call(this),this.H=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(ws,jt),n=ws.prototype,n.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=y,this.readyState=1,Br(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(y.body=f),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Br(this)),this.g&&(this.readyState=3,Br(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vo(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function vo(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}n.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Ea(this):Br(this),this.readyState==3&&vo(this)}},n.Oa=function(f){this.g&&(this.response=this.responseText=f,Ea(this))},n.Na=function(f){this.g&&(this.response=f,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Br(f)}n.setRequestHeader=function(f,y){this.A.append(f,y)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=y.next();return f.join(`\r
`)};function Br(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function br(f){let y="";return De(f,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function As(f,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=br(T),typeof f=="string"?T!=null&&fe(T):ut(f,y,T))}function vt(f){jt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(vt,jt);var ui=/^https?$/i,Bl=["POST","PUT"];n=vt.prototype,n.Fa=function(f){this.H=f},n.ea=function(f,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():H.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(te){Rs(this,te);return}if(f=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var $ in D)T.set($,D[$]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())T.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),$=c.FormData&&f instanceof c.FormData,!(Array.prototype.indexOf.call(Bl,y,void 0)>=0)||D||$||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,pe]of T)this.g.setRequestHeader(te,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(te){Rs(this,te)}};function Rs(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.o=5,Fl(f),Oi(f)}function Fl(f){f.A||(f.A=!0,$t(f,"complete"),$t(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,$t(this,"complete"),$t(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),vt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Cs(this):this.Xa())},n.Xa=function(){Cs(this)};function Cs(f){if(f.h&&typeof l<"u"){if(f.v&&Fr(f)==4)setTimeout(f.Ca.bind(f),0);else if($t(f,"readystatechange"),Fr(f)==4){f.h=!1;try{const te=f.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=te===0){let pe=String(f.D).match(We)[1]||null;!pe&&c.self&&c.self.location&&(pe=c.self.location.protocol.slice(0,-1)),D=!ui.test(pe?pe.toLowerCase():"")}T=D}if(T)$t(f,"complete"),$t(f,"success");else{f.o=6;try{var $=Fr(f)>2?f.g.statusText:""}catch{$=""}f.l=$+" ["+f.ca()+"]",Fl(f)}}finally{Oi(f)}}}}function Oi(f,y){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const T=f.g;f.g=null,y||$t(f,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Fr(f){return f.g?f.g.readyState:0}n.ca=function(){try{return Fr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),tr(y)}};function pn(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Mi(f){const y={};f=(f.g&&Fr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<f.length;D++){if(x(f[D]))continue;var T=de(f[D]);const $=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=y[$]||[];y[$]=te,te.push(T)}Ve(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ci(f,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||y}function Ta(f){this.za=0,this.i=[],this.j=new ir,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ci("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ci("baseRetryDelayMs",5e3,f),this.Za=ci("retryDelaySeedMs",1e4,f),this.Ta=ci("forwardChannelMaxRetries",2,f),this.va=ci("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new Bn(f&&f.concurrentRequestLimit),this.Ba=new _a,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ta.prototype,n.ka=8,n.I=1,n.connect=function(f,y,T,D){Pt(0),this.W=f,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=zc(this,null,this.W),fi(this)};function Hl(f){if(_o(f),f.I==3){var y=f.V++,T=yt(f.J);if(ut(T,"SID",f.M),ut(T,"RID",y),ut(T,"TYPE","terminate"),Is(f,T),y=new Ee(f,f.j,y),y.M=2,y.A=Ss(yt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Bc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),gt(y)}jc(f)}function Sa(f){f.g&&(Gl(f),f.g.cancel(),f.g=null)}function _o(f){Sa(f),f.v&&(c.clearTimeout(f.v),f.v=null),To(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&c.clearTimeout(f.m),f.m=null)}function fi(f){if(!An(f.h)&&!f.m){f.m=!0;var y=f.Ea;ae||A(),Y||(ae(),Y=!0),S.add(y,f),f.D=0}}function Eo(f,y){return Fn(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=y.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=rr(g(f.Ea,f,y),Uc(f,f.D)),f.D++,!0)}n.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const $=new Ee(this,this.j,f);let te=this.o;if(this.U&&(te?(te=U(te),he(te,this.U)):te=this.U),this.u!==null||this.R||($.J=te,te=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Vc(this,$,y),T=yt(this.J),ut(T,"RID",f),ut(T,"CVER",22),this.G&&ut(T,"X-HTTP-Session-Id",this.G),Is(this,T),te&&(this.R?y="headers="+fe(br(te))+"&"+y:this.u&&As(T,this.u,te)),ar(this.h,$),this.Ra&&ut(T,"TYPE","init"),this.S?(ut(T,"$req",y),ut(T,"SID","null"),$.U=!0,Se($,T,null)):Se($,T,y),this.I=2}}else this.I==3&&(f?ql(this,f):this.i.length==0||An(this.h)||ql(this))};function ql(f,y){var T;y?T=y.l:T=f.V++;const D=yt(f.J);ut(D,"SID",f.M),ut(D,"RID",T),ut(D,"AID",f.K),Is(f,D),f.u&&f.o&&As(D,f.u,f.o),T=new Ee(f,f.j,T,f.D+1),f.u===null&&(T.J=f.o),y&&(f.i=y.G.concat(f.i)),y=Vc(f,T,1e3),T.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ar(f.h,T),Se(T,D,y)}function Is(f,y){f.H&&De(f.H,function(T,D){ut(y,D,T)}),f.l&&De({},function(T,D){ut(y,D,T)})}function Vc(f,y,T){T=Math.min(f.i.length,T);const D=f.l?g(f.l.Ka,f.l,f):null;e:{var $=f.i;let He=-1;for(;;){const Yt=["count="+T];He==-1?T>0?(He=$[0].g,Yt.push("ofs="+He)):He=0:Yt.push("ofs="+He);let ct=!0;for(let Lt=0;Lt<T;Lt++){var te=$[Lt].g;const wr=$[Lt].map;if(te-=He,te<0)He=Math.max(0,$[Lt].g-100),ct=!1;else try{te="req"+te+"_"||"";try{var pe=wr instanceof Map?wr:Object.entries(wr);for(const[di,Hr]of pe){let qr=Hr;d(Hr)&&(qr=fn(Hr)),Yt.push(te+di+"="+encodeURIComponent(qr))}}catch(di){throw Yt.push(te+"type="+encodeURIComponent("_badmap")),di}}catch{D&&D(wr)}}if(ct){pe=Yt.join("&");break e}}pe=void 0}return f=f.i.splice(0,T),y.G=f,pe}function Pc(f){if(!f.g&&!f.v){f.Y=1;var y=f.Da;ae||A(),Y||(ae(),Y=!0),S.add(y,f),f.A=0}}function Ds(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=rr(g(f.Da,f),Uc(f,f.A)),f.A++,!0)}n.Da=function(){if(this.v=null,Lc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=rr(g(this.Wa,this),f)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Sa(this),Lc(this))};function Gl(f){f.B!=null&&(c.clearTimeout(f.B),f.B=null)}function Lc(f){f.g=new Ee(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var y=yt(f.na);ut(y,"RID","rpc"),ut(y,"SID",f.M),ut(y,"AID",f.K),ut(y,"CI",f.F?"0":"1"),!f.F&&f.ia&&ut(y,"TO",f.ia),ut(y,"TYPE","xmlhttp"),Is(f,y),f.u&&f.o&&As(y,f.u,f.o),f.O&&(f.g.H=f.O);var T=f.g;f=f.ba,T.M=1,T.A=Ss(yt(y)),T.u=null,T.R=!0,Pe(T,f)}n.Va=function(){this.C!=null&&(this.C=null,Sa(this),Ds(this),Pt(19))};function To(f){f.C!=null&&(c.clearTimeout(f.C),f.C=null)}function kc(f,y){var T=null;if(f.g==y){To(f),Gl(f),f.g=null;var D=2}else if(Rn(f.h,y))T=y.G,ai(f.h,y),D=1;else return;if(f.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var $=f.D;D=ma(),$t(D,new Tr(D,T)),fi(f)}else Pc(f);else if($=y.m,$==3||$==0&&y.X>0||!(D==1&&Eo(f,y)||D==2&&Ds(f)))switch(T&&T.length>0&&(y=f.h,y.i=y.i.concat(T)),$){case 1:hi(f,5);break;case 4:hi(f,10);break;case 3:hi(f,6);break;default:hi(f,2)}}}function Uc(f,y){let T=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(T*=2),T*y}function hi(f,y){if(f.j.info("Error code "+y),y==2){var T=g(f.bb,f),D=f.Ua;const $=!D;D=new Zt(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ke(D,"https"),Ss(D),$?zr(D.toString(),T):zl(D.toString(),T)}else Pt(2);f.I=0,f.l&&f.l.pa(y),jc(f),_o(f)}n.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function jc(f){if(f.I=0,f.ja=[],f.l){const y=si(f.h);(y.length!=0||f.i.length!=0)&&(V(f.ja,y),V(f.ja,f.i),f.h.i.length=0,C(f.i),f.i.length=0),f.l.oa()}}function zc(f,y,T){var D=T instanceof Zt?yt(T):new Zt(T);if(D.g!="")y&&(D.g=y+"."+D.g),sr(D,D.u);else{var $=c.location;D=$.protocol,y=y?y+"."+$.hostname:$.hostname,$=+$.port;const te=new Zt(null);D&&Ke(te,D),y&&(te.g=y),$&&sr(te,$),T&&(te.h=T),D=te}return T=f.G,y=f.wa,T&&y&&ut(D,T,y),ut(D,"VER",f.ka),Is(f,D),D}function Bc(f,y,T){if(y&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Aa&&!f.ma?new vt(new li({ab:T})):new vt(f.ma),y.Fa(f.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fc(){}n=Fc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ba(){}ba.prototype.g=function(f,y){return new kn(f,y)};function kn(f,y){jt.call(this),this.g=new Ta(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(f?f["X-WebChannel-Client-Profile"]=y.sa:f={"X-WebChannel-Client-Profile":y.sa}),this.g.U=f,(f=y&&y.Qb)&&!x(f)&&(this.g.u=f),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Vi(this)}E(kn,jt),kn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){Hl(this.g)},kn.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.v&&(T={},T.__data__=fn(f),f=T);y.i.push(new It(y.Ya++,f)),y.I==3&&fi(y)},kn.prototype.N=function(){this.g.l=null,delete this.j,Hl(this.g),delete this.g,kn.Z.N.call(this)};function Hc(f){bt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(const T in y){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}E(Hc,bt);function qc(){Vn.call(this),this.status=1}E(qc,Vn);function Vi(f){this.g=f}E(Vi,Fc),Vi.prototype.ra=function(){$t(this.g,"a")},Vi.prototype.qa=function(f){$t(this.g,new Hc(f))},Vi.prototype.pa=function(f){$t(this.g,new qc)},Vi.prototype.oa=function(){$t(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,_w=function(){return new ba},vw=function(){return ma()},yw=Vt,Ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,ch=xi,P.COMPLETE="complete",gw=P,da.EventType=nr,nr.OPEN="a",nr.CLOSE="b",nr.ERROR="c",nr.MESSAGE="d",jt.prototype.listen=jt.prototype.J,Lu=da,vt.prototype.listenOnce=vt.prototype.K,vt.prototype.getLastError=vt.prototype.Ha,vt.prototype.getLastErrorCode=vt.prototype.ya,vt.prototype.getStatus=vt.prototype.ca,vt.prototype.getResponseJson=vt.prototype.La,vt.prototype.getResponseText=vt.prototype.la,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Fa,pw=vt}).apply(typeof Jf<"u"?Jf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nn.UNAUTHENTICATED=new Nn(null),Nn.GOOGLE_CREDENTIALS=new Nn("google-credentials-uid"),Nn.FIRST_PARTY=new Nn("first-party-uid"),Nn.MOCK_USER=new Nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl="12.8.0";function Ex(n){Dl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new dy("@firebase/firestore");function el(){return no.logLevel}function Te(n,...e){if(no.logLevel<=nt.DEBUG){const t=e.map(gy);no.debug(`Firestore (${Dl}): ${n}`,...t)}}function ia(n,...e){if(no.logLevel<=nt.ERROR){const t=e.map(gy);no.error(`Firestore (${Dl}): ${n}`,...t)}}function pl(n,...e){if(no.logLevel<=nt.WARN){const t=e.map(gy);no.warn(`Firestore (${Dl}): ${n}`,...t)}}function gy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Ew(n,a,t)}function Ew(n,e,t){let a=`FIRESTORE (${Dl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw ia(a),new Error(a)}function ht(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||Ew(e,s,a)}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ca{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Tx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Nn.UNAUTHENTICATED)))}shutdown(){}}class Sx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bx{constructor(e){this.t=e,this.currentUser=Nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ta;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ta,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ta)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ht(typeof a.accessToken=="string",31837,{l:a}),new Tw(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new Nn(e)}}class wx{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Ax{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new wx(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class L0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const a=l=>{l.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Te("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new L0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new L0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=Cx(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function rt(n,e){return n<e?-1:n>e?1:0}function Dg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return ag(s)===ag(l)?rt(s,l):ag(s)?1:-1}return rt(n.length,e.length)}const Ix=55296,Dx=57343;function ag(n){const e=n.charCodeAt(0);return e>=Ix&&e<=Dx}function gl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="__name__";class vi{constructor(e,t,a){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Le(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return vi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vi?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=vi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return rt(e.length,t.length)}static compareSegments(e,t){const a=vi.isNumericId(e),s=vi.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?vi.extractNumericId(e).compare(vi.extractNumericId(t)):Dg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class Dt extends vi{construct(e,t,a){return new Dt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new _e(oe.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Dt(t)}static emptyPath(){return new Dt([])}}const Nx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sn extends vi{construct(e,t,a){return new Sn(e,t,a)}static isValidIdentifier(e){return Nx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k0}static keyField(){return new Sn([k0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new _e(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new _e(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sn(t)}static emptyPath(){return new Sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(Dt.fromString(e))}static fromName(e){return new xe(Dt.fromString(e).popFirst(5))}static empty(){return new xe(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new Dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n,e,t){if(!t)throw new _e(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function xx(n,e,t,a){if(e===!0&&a===!0)throw new _e(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U0(n){if(!xe.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function j0(n){if(xe.isDocumentKey(n))throw new _e(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pd(n);throw new _e(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n,e){const t={typeString:n};return e&&(t.value=e),t}function gc(n,e){if(!bw(n))throw new _e(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new _e(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=-62135596800,B0=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*B0);return new Mt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<z0)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/B0}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-z0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:on("string",Mt._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Mt(0,0))}static max(){return new ze(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=-1;function Ox(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=ze.fromTimestamp(a===1e9?new Mt(t+1,0):new Mt(t,a));return new os(s,xe.empty(),e)}function Mx(n){return new os(n.readTime,n.key,Zu)}class os{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new os(ze.min(),xe.empty(),Zu)}static max(){return new os(ze.max(),xe.empty(),Zu)}}function Vx(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:rt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Px)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,a)=>{t(e)}))}static reject(e){return new ue(((t,a)=>{a(e)}))}static waitFor(e){return new ue(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=ue.resolve(!1);for(const a of e)t=t.next((s=>s?ue.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new ue(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new ue(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function kx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy=-1;function yd(n){return n==null}function Ph(n){return n===0&&1/n==-1/0}function Ux(n){return typeof n=="number"&&Number.isInteger(n)&&!Ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww="";function jx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=F0(e)),e=zx(n.get(t),e);return F0(e)}function zx(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case ww:t+="";break;default:t+=l}}return t}function F0(n){return n+ww+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Aw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t){this.comparator=e,this.root=t||Tn.EMPTY}insert(e,t){return new Ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zf(this.root,e,this.comparator,!0)}}class Zf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Tn.RED,this.left=s??Tn.EMPTY,this.right=l??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Tn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Tn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new q0(this.data.getIterator())}getIteratorFrom(e){return new q0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class q0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.fields=e,e.sort(Sn.comparator)}static empty(){return new gr([])}unionWith(e){let t=new un(Sn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Rw("Invalid base64 string: "+l):l}})(e);return new bn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new bn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bn.EMPTY_BYTE_STRING=new bn("");const Bx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(n){if(ht(!!n,39018),typeof n=="string"){let e=0;const t=Bx.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Wt(n.seconds),nanos:Wt(n.nanos)}}function Wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function us(n){return typeof n=="string"?bn.fromBase64String(n):bn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="server_timestamp",Iw="__type__",Dw="__previous_value__",Nw="__local_write_time__";function _y(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Iw])==null?void 0:a.stringValue)===Cw}function vd(n){const e=n.mapValue.fields[Dw];return _y(e)?vd(e):e}function ec(n){const e=ls(n.mapValue.fields[Nw].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,a,s,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Lh="(default)";class tc{constructor(e,t){this.projectId=e,this.database=t||Lh}static empty(){return new tc("","")}get isDefaultDatabase(){return this.database===Lh}isEqual(e){return e instanceof tc&&e.projectId===this.projectId&&e.database===this.database}}function Hx(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new _e(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="__type__",qx="__max__",eh={mapValue:{}},Ow="__vector__",kh="value";function cs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_y(n)?4:Kx(n)?9007199254740991:Gx(n)?10:11:Le(28295,{value:n})}function Ri(n,e){if(n===e)return!0;const t=cs(n);if(t!==cs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ec(n).isEqual(ec(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ls(s.timestampValue),d=ls(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return us(s.bytesValue).isEqual(us(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return Wt(s.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(s.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return Wt(s.integerValue)===Wt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Wt(s.doubleValue),d=Wt(l.doubleValue);return c===d?Ph(c)===Ph(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return gl(n.arrayValue.values||[],e.arrayValue.values||[],Ri);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(H0(c)!==H0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Ri(c[p],d[p])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function nc(n,e){return(n.values||[]).find((t=>Ri(t,e)))!==void 0}function yl(n,e){if(n===e)return 0;const t=cs(n),a=cs(e);if(t!==a)return rt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Wt(l.integerValue||l.doubleValue),p=Wt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return G0(n.timestampValue,e.timestampValue);case 4:return G0(ec(n),ec(e));case 5:return Dg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=us(l),p=us(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=rt(d[g],p[g]);if(v!==0)return v}return rt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=rt(Wt(l.latitude),Wt(c.latitude));return d!==0?d:rt(Wt(l.longitude),Wt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return K0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,C,V,j;const d=l.fields||{},p=c.fields||{},g=(b=d[kh])==null?void 0:b.arrayValue,v=(C=p[kh])==null?void 0:C.arrayValue,E=rt(((V=g==null?void 0:g.values)==null?void 0:V.length)||0,((j=v==null?void 0:v.values)==null?void 0:j.length)||0);return E!==0?E:K0(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===eh.mapValue&&c===eh.mapValue)return 0;if(l===eh.mapValue)return 1;if(c===eh.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const b=Dg(p[E],v[E]);if(b!==0)return b;const C=yl(d[p[E]],g[v[E]]);if(C!==0)return C}return rt(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function G0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return rt(n,e);const t=ls(n),a=ls(e),s=rt(t.seconds,a.seconds);return s!==0?s:rt(t.nanos,a.nanos)}function K0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=yl(t[s],a[s]);if(l)return l}return rt(t.length,a.length)}function vl(n){return Ng(n)}function Ng(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ls(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return us(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Ng(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Ng(t.fields[c])}`;return s+"}"})(n.mapValue):Le(61005,{value:n})}function fh(n){switch(cs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vd(n);return e?16+fh(e):16;case 5:return 2*n.stringValue.length;case 6:return us(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+fh(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return ms(a.fields,((l,c)=>{s+=l.length+fh(c)})),s})(n.mapValue);default:throw Le(13486,{value:n})}}function $0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xg(n){return!!n&&"integerValue"in n}function Ey(n){return!!n&&"arrayValue"in n}function Y0(n){return!!n&&"nullValue"in n}function Q0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hh(n){return!!n&&"mapValue"in n}function Gx(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[xw])==null?void 0:a.stringValue)===Ow}function Hu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ms(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Hu(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return{...n}}function Kx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.value=e}static empty(){return new Wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!hh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=Sn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=Hu(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());hh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){ms(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new Wn(Hu(this.value))}}function Mw(n){const e=[];return ms(n.fields,((t,a)=>{const s=new Sn([t]);if(hh(a)){const l=Mw(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new gr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,ze.min(),ze.min(),ze.min(),Wn.empty(),0)}static newFoundDocument(e,t,a,s){return new xn(e,1,t,ze.min(),a,s,0)}static newNoDocument(e,t){return new xn(e,2,t,ze.min(),ze.min(),Wn.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,ze.min(),ze.min(),Wn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,t){this.position=e,this.inclusive=t}}function X0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=xe.comparator(xe.fromName(c.referenceValue),t.key):a=yl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function W0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ri(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,t="asc"){this.field=e,this.dir=t}}function $x(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{}class sn extends Vw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new Qx(e,t,a):t==="array-contains"?new Jx(e,a):t==="in"?new Zx(e,a):t==="not-in"?new eO(e,a):t==="array-contains-any"?new tO(e,a):new sn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new Xx(e,a):new Wx(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(yl(t,this.value)):t!==null&&cs(this.value)===cs(t)&&this.matchesComparison(yl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends Vw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Zr(e,t)}matches(e){return Pw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pw(n){return n.op==="and"}function Lw(n){return Yx(n)&&Pw(n)}function Yx(n){for(const e of n.filters)if(e instanceof Zr)return!1;return!0}function Og(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+vl(n.value);if(Lw(n))return n.filters.map((e=>Og(e))).join(",");{const e=n.filters.map((t=>Og(t))).join(",");return`${n.op}(${e})`}}function kw(n,e){return n instanceof sn?(function(a,s){return s instanceof sn&&a.op===s.op&&a.field.isEqual(s.field)&&Ri(a.value,s.value)})(n,e):n instanceof Zr?(function(a,s){return s instanceof Zr&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&kw(c,s.filters[d])),!0):!1})(n,e):void Le(19439)}function Uw(n){return n instanceof sn?(function(t){return`${t.field.canonicalString()} ${t.op} ${vl(t.value)}`})(n):n instanceof Zr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Uw).join(" ,")+"}"})(n):"Filter"}class Qx extends sn{constructor(e,t,a){super(e,t,a),this.key=xe.fromName(a.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xx extends sn{constructor(e,t){super(e,"in",t),this.keys=jw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Wx extends sn{constructor(e,t){super(e,"not-in",t),this.keys=jw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>xe.fromName(a.referenceValue)))}class Jx extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ey(t)&&nc(t.arrayValue,this.value)}}class Zx extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nc(this.value.arrayValue,t)}}class eO extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(nc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nc(this.value.arrayValue,t)}}class tO extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ey(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>nc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function J0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new nO(n,e,t,a,s,l,c)}function Ty(n){const e=Fe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>Og(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),yd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>vl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>vl(a))).join(",")),e.Te=t}return e.Te}function Sy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$x(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!W0(n.startAt,e.startAt)&&W0(n.endAt,e.endAt)}function Mg(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function rO(n,e,t,a,s,l,c,d){return new yc(n,e,t,a,s,l,c,d)}function _d(n){return new yc(n)}function Z0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function iO(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zw(n){return n.collectionGroup!==null}function qu(n){const e=Fe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new un(Sn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new jh(l,a))})),t.has(Sn.keyField().canonicalString())||e.Ie.push(new jh(Sn.keyField(),a))}return e.Ie}function Ti(n){const e=Fe(n);return e.Ee||(e.Ee=aO(e,qu(n))),e.Ee}function aO(n,e){if(n.limitType==="F")return J0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new jh(s.field,l)}));const t=n.endAt?new Uh(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new Uh(n.startAt.position,n.startAt.inclusive):null;return J0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function Vg(n,e){const t=n.filters.concat([e]);return new yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Pg(n,e,t){return new yc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ed(n,e){return Sy(Ti(n),Ti(e))&&n.limitType===e.limitType}function Bw(n){return`${Ty(Ti(n))}|lt:${n.limitType}`}function tl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>Uw(s))).join(", ")}]`),yd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>vl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>vl(s))).join(",")),`Target(${a})`})(Ti(n))}; limitType=${n.limitType})`}function Td(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):xe.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of qu(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=X0(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,qu(a),s)||a.endAt&&!(function(c,d,p){const g=X0(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,qu(a),s))})(n,e)}function sO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fw(n){return(e,t)=>{let a=!1;for(const s of qu(n)){const l=oO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function oO(n,e,t){const a=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?yl(p,g):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return Aw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new Ft(xe.comparator);function aa(){return lO}const Hw=new Ft(xe.comparator);function ku(...n){let e=Hw;for(const t of n)e=e.insert(t.key,t);return e}function qw(n){let e=Hw;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Ys(){return Gu()}function Gw(){return Gu()}function Gu(){return new oo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const uO=new Ft(xe.comparator),cO=new un(xe.comparator);function it(...n){let e=cO;for(const t of n)e=e.add(t);return e}const fO=new un(rt);function hO(){return fO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ph(e)?"-0":e}}function Kw(n){return{integerValue:""+n}}function dO(n,e){return Ux(e)?Kw(e):by(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(){this._=void 0}}function mO(n,e,t){return n instanceof zh?(function(s,l){const c={fields:{[Iw]:{stringValue:Cw},[Nw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&_y(l)&&(l=vd(l)),l&&(c.fields[Dw]=l),{mapValue:c}})(t,e):n instanceof rc?Yw(n,e):n instanceof ic?Qw(n,e):(function(s,l){const c=$w(s,l),d=eS(c)+eS(s.Ae);return xg(c)&&xg(s.Ae)?Kw(d):by(s.serializer,d)})(n,e)}function pO(n,e,t){return n instanceof rc?Yw(n,e):n instanceof ic?Qw(n,e):t}function $w(n,e){return n instanceof Bh?(function(a){return xg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class zh extends Sd{}class rc extends Sd{constructor(e){super(),this.elements=e}}function Yw(n,e){const t=Xw(e);for(const a of n.elements)t.some((s=>Ri(s,a)))||t.push(a);return{arrayValue:{values:t}}}class ic extends Sd{constructor(e){super(),this.elements=e}}function Qw(n,e){let t=Xw(e);for(const a of n.elements)t=t.filter((s=>!Ri(s,a)));return{arrayValue:{values:t}}}class Bh extends Sd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function eS(n){return Wt(n.integerValue||n.doubleValue)}function Xw(n){return Ey(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof rc&&s instanceof rc||a instanceof ic&&s instanceof ic?gl(a.elements,s.elements,Ri):a instanceof Bh&&s instanceof Bh?Ri(a.Ae,s.Ae):a instanceof zh&&s instanceof zh})(n.transform,e.transform)}class yO{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class bd{}function Ww(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wy(n.key,_r.none()):new vc(n.key,n.data,_r.none());{const t=n.data,a=Wn.empty();let s=new un(Sn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new ps(n.key,a,new gr(s.toArray()),_r.none())}}function vO(n,e,t){n instanceof vc?(function(s,l,c){const d=s.value.clone(),p=nS(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof ps?(function(s,l,c){if(!dh(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=nS(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Jw(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ku(n,e,t,a){return n instanceof vc?(function(l,c,d,p){if(!dh(l.precondition,c))return d;const g=l.value.clone(),v=rS(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof ps?(function(l,c,d,p){if(!dh(l.precondition,c))return d;const g=rS(l.fieldTransforms,p,c),v=c.data;return v.setAll(Jw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return dh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function _O(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=$w(a.transform,s||null);l!=null&&(t===null&&(t=Wn.empty()),t.set(a.field,l))}return t||null}function tS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&gl(a,s,((l,c)=>gO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vc extends bd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ps extends bd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Jw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function nS(n,e,t){const a=new Map;ht(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,pO(c,d,t[s]))}return a}function rS(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,mO(l,c,e))}return a}class wy extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EO extends bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&vO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Ku(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Ku(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Gw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=Ww(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(ze.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),it())}isEqual(e){return this.batchId===e.batchId&&gl(this.mutations,e.mutations,((t,a)=>tS(t,a)))&&gl(this.baseMutations,e.baseMutations,((t,a)=>tS(t,a)))}}class Ay{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){ht(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return uO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Ay(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,st;function wO(n){switch(n){case oe.OK:return Le(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function Zw(n){if(n===void 0)return ia("GRPC error has no .code"),oe.UNKNOWN;switch(n){case an.OK:return oe.OK;case an.CANCELLED:return oe.CANCELLED;case an.UNKNOWN:return oe.UNKNOWN;case an.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case an.INTERNAL:return oe.INTERNAL;case an.UNAVAILABLE:return oe.UNAVAILABLE;case an.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case an.NOT_FOUND:return oe.NOT_FOUND;case an.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case an.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case an.ABORTED:return oe.ABORTED;case an.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case an.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case an.DATA_LOSS:return oe.DATA_LOSS;default:return Le(39323,{code:n})}}(st=an||(an={}))[st.OK=0]="OK",st[st.CANCELLED=1]="CANCELLED",st[st.UNKNOWN=2]="UNKNOWN",st[st.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",st[st.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",st[st.NOT_FOUND=5]="NOT_FOUND",st[st.ALREADY_EXISTS=6]="ALREADY_EXISTS",st[st.PERMISSION_DENIED=7]="PERMISSION_DENIED",st[st.UNAUTHENTICATED=16]="UNAUTHENTICATED",st[st.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",st[st.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",st[st.ABORTED=10]="ABORTED",st[st.OUT_OF_RANGE=11]="OUT_OF_RANGE",st[st.UNIMPLEMENTED=12]="UNIMPLEMENTED",st[st.INTERNAL=13]="INTERNAL",st[st.UNAVAILABLE=14]="UNAVAILABLE",st[st.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new is([4294967295,4294967295],0);function iS(n){const e=AO().encode(n),t=new mw;return t.update(e),new Uint8Array(t.digest())}function aS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new is([t,a],0),new is([s,l],0)]}class Ry{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Uu(`Invalid padding: ${t}`);if(a<0)throw new Uu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Uu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Uu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=is.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(is.fromNumber(a)));return s.compare(RO)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=iS(e),[a,s]=aS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ry(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=iS(e),[a,s]=aS(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Uu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,_c.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new wd(ze.min(),s,new Ft(rt),aa(),it())}}class _c{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new _c(a,t,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class eA{constructor(e,t){this.targetId=e,this.Ce=t}}class tA{constructor(e,t,a=bn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class sS{constructor(){this.ve=0,this.Fe=oS(),this.Me=bn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=it(),t=it(),a=it();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Le(38017,{changeType:l})}})),new _c(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=oS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class CO{constructor(e){this.Ge=e,this.ze=new Map,this.je=aa(),this.He=th(),this.Je=th(),this.Ze=new Ft(rt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Mg(l))if(a===0){const c=new xe(l.path);this.et(t,c,xn.newNoDocument(c,ze.min()))}else ht(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=us(a).toUint8Array()}catch(p){if(p instanceof Rw)return pl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ry(c,s,l)}catch(p){return pl(p instanceof Uu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Mg(d.target)){const p=new xe(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,xn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=it();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new wd(e,t,this.Ze,this.je,a);return this.je=aa(),this.He=th(),this.Je=th(),this.Ze=new Ft(rt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new sS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new un(rt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new un(rt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function th(){return new Ft(xe.comparator)}function oS(){return new Ft(xe.comparator)}const IO={asc:"ASCENDING",desc:"DESCENDING"},DO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NO={and:"AND",or:"OR"};class xO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lg(n,e){return n.useProto3Json||yd(e)?e:{value:e}}function Fh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function OO(n,e){return Fh(n,e.toTimestamp())}function Si(n){return ht(!!n,49232),ze.fromTimestamp((function(t){const a=ls(t);return new Mt(a.seconds,a.nanos)})(n))}function Cy(n,e){return kg(n,e).canonicalString()}function kg(n,e){const t=(function(s){return new Dt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function rA(n){const e=Dt.fromString(n);return ht(lA(e),10190,{key:e.toString()}),e}function Ug(n,e){return Cy(n.databaseId,e.path)}function sg(n,e){const t=rA(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(aA(t))}function iA(n,e){return Cy(n.databaseId,e)}function MO(n){const e=rA(n);return e.length===4?Dt.emptyPath():aA(e)}function jg(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aA(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lS(n,e,t){return{name:Ug(n,e),fields:t.value.mapValue.fields}}function VO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Le(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(ht(v===void 0||typeof v=="string",58123),bn.fromBase64String(v||"")):(ht(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),bn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?oe.UNKNOWN:Zw(g.code);return new _e(v,g.message||"")})(c);t=new tA(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=sg(n,a.document.name),l=Si(a.document.updateTime),c=a.document.createTime?Si(a.document.createTime):ze.min(),d=new Wn({mapValue:{fields:a.document.fields}}),p=xn.newFoundDocument(s,l,c,d),g=a.targetIds||[],v=a.removedTargetIds||[];t=new mh(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=sg(n,a.document),l=a.readTime?Si(a.readTime):ze.min(),c=xn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new mh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=sg(n,a.document),l=a.removedTargetIds||[];t=new mh([],l,s,null)}else{if(!("filter"in e))return Le(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new bO(s,l),d=a.targetId;t=new eA(d,c)}}return t}function PO(n,e){let t;if(e instanceof vc)t={update:lS(n,e.key,e.value)};else if(e instanceof wy)t={delete:Ug(n,e.key)};else if(e instanceof ps)t={update:lS(n,e.key,e.data),updateMask:qO(e.fieldMask)};else{if(!(e instanceof EO))return Le(16599,{dt:e.type});t={verify:Ug(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof zh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof rc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof ic)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bh)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Le(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:OO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Le(27497)})(n,e.precondition)),t}function LO(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Si(s.updateTime):Si(l);return c.isEqual(ze.min())&&(c=Si(l)),new yO(c,s.transformResults||[])})(t,e)))):[]}function kO(n,e){return{documents:[iA(n,e.path)]}}function UO(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=iA(n,s);const l=(function(g){if(g.length!==0)return oA(Zr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(b){return{field:nl(b.field),direction:BO(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Lg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function jO(n){let e=MO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){ht(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const b=sA(E);return b instanceof Zr&&Lw(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(V){return new jh(rl(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,yd(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(E){const b=!!E.before,C=E.values||[];return new Uh(C,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,C=E.values||[];return new Uh(C,b)})(t.endAt)),rO(e,s,c,l,d,"F",p,g)}function zO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=rl(t.unaryFilter.field);return sn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=rl(t.unaryFilter.field);return sn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=rl(t.unaryFilter.field);return sn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=rl(t.unaryFilter.field);return sn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return sn.create(rl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Zr.create(t.compositeFilter.filters.map((a=>sA(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function BO(n){return IO[n]}function FO(n){return DO[n]}function HO(n){return NO[n]}function nl(n){return{fieldPath:n.canonicalString()}}function rl(n){return Sn.fromServerFormat(n.fieldPath)}function oA(n){return n instanceof sn?(function(t){if(t.op==="=="){if(Q0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NAN"}};if(Y0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Q0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NAN"}};if(Y0(t.value))return{unaryFilter:{field:nl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:nl(t.field),op:FO(t.op),value:t.value}}})(n):n instanceof Zr?(function(t){const a=t.getFilters().map((s=>oA(s)));return a.length===1?a[0]:{compositeFilter:{op:HO(t.op),filters:a}}})(n):Le(54877,{filter:n})}function qO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function lA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function uA(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t,a,s,l=ze.min(),c=ze.min(),d=bn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new Za(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Za(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e){this.yt=e}}function KO(n){const e=jO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.Sn=new YO}addToCollectionParentIndex(e,t){return this.Sn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(os.min())}updateCollectionGroup(e,t,a){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class YO{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new un(Dt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new un(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cA=41943040;class Xn{static withCacheSize(e){return new Xn(e,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(cA,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new _l(0)}static ar(){return new _l(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="LruGarbageCollector",QO=1048576;function fS([n,e],[t,a]){const s=rt(n,t);return s===0?rt(e,a):s}class XO{constructor(e){this.Pr=e,this.buffer=new un(fS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();fS(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class WO{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Te(cS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xl(t)?Te(cS,"Ignoring IndexedDB error during garbage collection: ",t):await Nl(t)}await this.Ar(3e5)}))}}class JO{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(gd.ce);const a=new XO(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(uS)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),el()<=nt.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function ZO(n,e){return new JO(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(){this.changes=new oo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?ue.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Ku(a.mutation,s,gr.empty(),Mt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,it()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=it()){const s=Ys();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=ku();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Ys();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,it())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=aa();const c=Gu(),d=(function(){return Gu()})();return t.forEach(((p,g)=>{const v=a.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof ps)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Ku(v.mutation,g,v.mutation.getFieldMask(),Mt.now())):c.set(g.key,gr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new tM(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=Gu();let s=new Ft(((c,d)=>c-d)),l=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=a.get(p)||gr.empty();v=d.applyToLocalView(g,v),a.set(p,v);const E=(s.get(d.batchId)||it()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=Gw();v.forEach((b=>{if(!l.has(b)){const C=Ww(t.get(b),a.get(b));C!==null&&E.set(b,C),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return ue.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return iO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):ue.resolve(Ys());let d=Zu,p=l;return c.next((g=>ue.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{p=p.insert(v,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,it()))).next((v=>({batchId:d,changes:qw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((a=>{let s=ku();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=ku();return this.indexManager.getCollectionParents(e,l).next((d=>ue.forEach(d,(p=>{const g=(function(E,b){return new yc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((v=>{v.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,xn.newInvalidDocument(v)))}));let d=ku();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Ku(v.mutation,g,gr.empty(),Mt.now()),Td(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return ue.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Si(s.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:KO(s.bundledQuery),readTime:Si(s.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(){this.overlays=new Ft(xe.comparator),this.Lr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Ys();return ue.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),ue.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),ue.resolve()}getOverlaysForCollection(e,t,a){const s=Ys(),l=t.length+1,c=new xe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Ft(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let v=l.get(g.largestBatchId);v===null&&(v=Ys(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Ys(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=s)););return ue.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new SO(t,a));let l=this.Lr.get(t);l===void 0&&(l=it(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(){this.sessionToken=bn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.kr=new un(mn.Kr),this.qr=new un(mn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new mn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new mn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new xe(new Dt([])),a=new mn(t,e),s=new mn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new xe(new Dt([])),a=new mn(t,e),s=new mn(t,e+1);let l=it();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new mn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class mn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return xe.comparator(e.key,t.key)||rt(e.Hr,t.Hr)}static Ur(e,t){return rt(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new un(mn.Kr)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new TO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new mn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return ue.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?vy:this.Yn-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new mn(t,0),s=new mn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),ue.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new un(rt);return t.forEach((s=>{const l=new mn(s,0),c=new mn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),ue.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;xe.isDocumentKey(l)||(l=l.child(""));const c=new mn(new xe(l),0);let d=new un(rt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),ue.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ht(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ue.forEach(t.mutations,(s=>{const l=new mn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new mn(t,0),s=this.Jr.firstAfterOrEqual(a);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.ti=e,this.docs=(function(){return new Ft(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return ue.resolve(a?a.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let a=aa();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():xn.newInvalidDocument(s))})),ue.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=aa();const c=t.path,d=new xe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Vx(Mx(v),a)<=0||(s.has(v.key)||Td(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return ue.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Le(9500)}ni(e,t){return ue.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new lM(this)}getSize(e){return ue.resolve(this.size)}}class lM extends eM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),ue.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e){this.persistence=e,this.ri=new oo((t=>Ty(t)),Sy),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.ii=0,this.si=new Iy,this.targetCount=0,this.oi=_l._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),ue.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new _l(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.lr(t),ue.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),ue.waitFor(l).next((()=>s))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return ue.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),ue.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),ue.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return ue.resolve(a)}containsKey(e,t){return ue.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t){this._i={},this.overlays={},this.ai=new gd(0),this.ui=!1,this.ui=!0,this.ci=new aM,this.referenceDelegate=e(this),this.li=new uM(this),this.indexManager=new $O,this.remoteDocumentCache=(function(s){return new oM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new GO(t),this.Pi=new rM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new sM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Te("MemoryPersistence","Starting transaction:",e);const s=new cM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return ue.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class cM extends Lx{constructor(e){super(),this.currentSequenceNumber=e}}class Dy{constructor(e){this.persistence=e,this.Ri=new Iy,this.Ai=null}static Vi(e){return new Dy(e)}get di(){if(this.Ai)return this.Ai;throw Le(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),ue.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.di,(a=>{const s=xe.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,ze.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Hh{constructor(e,t){this.persistence=e,this.fi=new oo((a=>jx(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=ZO(this,t)}static Vi(e,t){return new Hh(e,t)}Ti(){}Ii(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return ue.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?ue.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,ze.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),ue.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=fh(e.data.value)),t}wr(e,t,a){return ue.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return ue.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=it(),s=it();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Ny(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return nN()?8:kx(On())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new fM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(el()<=nt.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",tl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ue.resolve()):(el()<=nt.DEBUG&&Te("QueryEngine","Query:",tl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(el()<=nt.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",tl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):ue.resolve())}gs(e,t){if(Z0(t))return ue.resolve(null);let a=Ti(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Pg(t,null,"F"),a=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=it(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,Pg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return Z0(t)||s.isEqual(ze.min())?ue.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?ue.resolve(null):(el()<=nt.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),tl(t)),this.Ds(e,c,t,Ox(s,Zu)).next((d=>d)))}))}bs(e,t){let a=new un(Fw(e));return t.forEach(((s,l)=>{Td(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return el()<=nt.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",tl(t)),this.fs.getDocumentsMatchingQuery(e,t,os.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="LocalStore",dM=3e8;class mM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Ft(rt),this.Fs=new oo((l=>Ty(l)),Sy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function pM(n,e,t,a){return new mM(n,e,t,a)}async function hA(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=it();for(const g of s){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function gM(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,b=E.keys();let C=ue.resolve();return b.forEach((V=>{C=C.next((()=>v.getEntry(p,V))).next((j=>{const L=g.docVersions.get(V);ht(L!==null,48541),j.version.compareTo(L)<0&&(E.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=it();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function dA(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function yM(n,e){const t=Fe(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const b=s.get(E);if(!b)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let C=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(bn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),s=s.insert(E,C),(function(j,L,G){return j.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=dM?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(b,C,v)&&d.push(t.li.updateTargetData(l,C))}));let p=aa(),g=it();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(vM(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual(ze.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return ue.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function vM(n,e,t){let a=it(),s=it();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=aa();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(ze.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Te(xy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function _M(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=vy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function EM(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,ue.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new Za(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function zg(n,e,t){const a=Fe(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!xl(c))throw c;Te(xy,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function hS(n,e,t){const a=Fe(n);let s=ze.min(),l=it();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Fe(p),b=E.Fs.get(v);return b!==void 0?ue.resolve(E.vs.get(b)):E.li.getTargetData(g,v)})(a,c,Ti(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:ze.min(),t?l:it()))).next((d=>(TM(a,sO(e),d),{documents:d,ks:l})))))}function TM(n,e,t){let a=n.Ms.get(e)||ze.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class dS{constructor(){this.activeTargetIds=hO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SM{constructor(){this.vo=new dS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new dS,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="ConnectivityMonitor";class pS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Te(mS,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Te(mS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nh=null;function Bg(){return nh===null?nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():nh++,"0x"+nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="RestConnection",wM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class AM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===Lh?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=Bg(),d=this.Qo(e,t.toUriEncodedString());Te(og,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),v=Cl(g);return this.zo(e,d,p,a,v).then((E=>(Te(og,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw pl(og,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Dl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=wM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection",Mu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ll extends AM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ll.c_){const e=vw();Mu(e,yw.STAT_EVENT,(t=>{t.stat===Ig.PROXY?Te(In,"STAT_EVENT: detected buffering proxy"):t.stat===Ig.NOPROXY&&Te(In,"STAT_EVENT: detected no buffering proxy")})),ll.c_=!0}}zo(e,t,a,s,l){const c=Bg();return new Promise(((d,p)=>{const g=new pw;g.setWithCredentials(!0),g.listenOnce(gw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ch.NO_ERROR:const E=g.getResponseJson();Te(In,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case ch.TIMEOUT:Te(In,`RPC '${e}' ${c} timed out`),p(new _e(oe.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const b=g.getStatus();if(Te(In,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const V=C==null?void 0:C.error;if(V&&V.status&&V.message){const j=(function(G){const F=G.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(F)>=0?F:oe.UNKNOWN})(V.status);p(new _e(j,V.message))}else p(new _e(oe.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new _e(oe.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Te(In,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);Te(In,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=Bg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Te(In,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,b=!1;const C=new RM({Ho:V=>{b?Te(In,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(E||(Te(In,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Te(In,`RPC '${e}' stream ${s} sending:`,V),v.send(V))},Jo:()=>v.close()});return Mu(v,Lu.EventType.OPEN,(()=>{b||(Te(In,`RPC '${e}' stream ${s} transport opened.`),C.i_())})),Mu(v,Lu.EventType.CLOSE,(()=>{b||(b=!0,Te(In,`RPC '${e}' stream ${s} transport closed`),C.o_(),this.E_(v))})),Mu(v,Lu.EventType.ERROR,(V=>{b||(b=!0,pl(In,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),C.o_(new _e(oe.UNAVAILABLE,"The operation could not be completed")))})),Mu(v,Lu.EventType.MESSAGE,(V=>{var j;if(!b){const L=V.data[0];ht(!!L,16349);const G=L,F=(G==null?void 0:G.error)||((j=G[0])==null?void 0:j.error);if(F){Te(In,`RPC '${e}' stream ${s} received error:`,F);const K=F.status;let ee=(function(S){const A=an[S];if(A!==void 0)return Zw(A)})(K),ae=F.message;ee===void 0&&(ee=oe.INTERNAL,ae="Unknown error status: "+K+" with message "+F.message),b=!0,C.o_(new _e(ee,ae)),v.close()}else Te(In,`RPC '${e}' stream ${s} received:`,L),C.__(L)}})),ll.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return _w()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(n){return new ll(n)}function lg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){return new xO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ll.c_=!1;class mA{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="PersistentStream";class pA{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(ia(t.toString()),ia("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new _e(oe.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(gS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Te(gS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class IM extends pA{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=VO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return ze.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ze.min():c.readTime?Si(c.readTime):ze.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=jg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Mg(p)?{documents:kO(l,p)}:{query:UO(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=nA(l,c.resumeToken);const g=Lg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ze.min())>0){d.readTime=Fh(l,c.snapshotVersion.toTimestamp());const g=Lg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=zO(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=jg(this.serializer),t.removeTarget=e,this.K_(t)}}class DM extends pA{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=LO(e.writeResults,e.commitTime),a=Si(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=jg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>PO(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{}class xM extends NM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,kg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(oe.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,kg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function OM(n,e,t,a){return new xM(n,e,t,a)}class MM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ia(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class VM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{lo(this)&&(Te(ro,"Restarting streams for network reachability change."),await(async function(p){const g=Fe(p);g.Ea.add(4),await Ec(g),g.Va.set("Unknown"),g.Ea.delete(4),await Rd(g)})(this))}))})),this.Va=new MM(a,s)}}async function Rd(n){if(lo(n))for(const e of n.Ra)await e(!0)}async function Ec(n){for(const e of n.Ra)await e(!1)}function gA(n,e){const t=Fe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Py(t)?Vy(t):Ol(t).O_()&&My(t,e))}function Oy(n,e){const t=Fe(n),a=Ol(t);t.Ia.delete(e),a.O_()&&yA(t,e),t.Ia.size===0&&(a.O_()?a.L_():lo(t)&&t.Va.set("Unknown"))}function My(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ol(n).Z_(e)}function yA(n,e){n.da.$e(e),Ol(n).X_(e)}function Vy(n){n.da=new CO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ol(n).start(),n.Va.ua()}function Py(n){return lo(n)&&!Ol(n).x_()&&n.Ia.size>0}function lo(n){return Fe(n).Ea.size===0}function vA(n){n.da=void 0}async function PM(n){n.Va.set("Online")}async function LM(n){n.Ia.forEach(((e,t)=>{My(n,e)}))}async function kM(n,e){vA(n),Py(n)?(n.Va.ha(e),Vy(n)):n.Va.set("Unknown")}async function UM(n,e,t){if(n.Va.set("Online"),e instanceof tA&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Te(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await qh(n,a)}else if(e instanceof mh?n.da.Xe(e):e instanceof eA?n.da.st(e):n.da.tt(e),!t.isEqual(ze.min()))try{const a=await dA(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(bn.EMPTY_BYTE_STRING,v.snapshotVersion)),yA(l,p);const E=new Za(v.target,p,g,v.sequenceNumber);My(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Te(ro,"Failed to raise snapshot:",a),await qh(n,a)}}async function qh(n,e,t){if(!xl(e))throw e;n.Ea.add(1),await Ec(n),n.Va.set("Offline"),t||(t=()=>dA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(ro,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Rd(n)}))}function _A(n,e){return e().catch((t=>qh(n,t,e)))}async function Cd(n){const e=Fe(n),t=fs(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:vy;for(;jM(e);)try{const s=await _M(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,zM(e,s)}catch(s){await qh(e,s)}EA(e)&&TA(e)}function jM(n){return lo(n)&&n.Ta.length<10}function zM(n,e){n.Ta.push(e);const t=fs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function EA(n){return lo(n)&&!fs(n).x_()&&n.Ta.length>0}function TA(n){fs(n).start()}async function BM(n){fs(n).ra()}async function FM(n){const e=fs(n);for(const t of n.Ta)e.ea(t.mutations)}async function HM(n,e,t){const a=n.Ta.shift(),s=Ay.from(a,e,t);await _A(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Cd(n)}async function qM(n,e){e&&fs(n).Y_&&await(async function(a,s){if((function(c){return wO(c)&&c!==oe.ABORTED})(s.code)){const l=a.Ta.shift();fs(a).B_(),await _A(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Cd(a)}})(n,e),EA(n)&&TA(n)}async function yS(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),Te(ro,"RemoteStore received new credentials");const a=lo(t);t.Ea.add(3),await Ec(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rd(t)}async function GM(n,e){const t=Fe(n);e?(t.Ea.delete(2),await Rd(t)):e||(t.Ea.add(2),await Ec(t),t.Va.set("Unknown"))}function Ol(n){return n.ma||(n.ma=(function(t,a,s){const l=Fe(t);return l.sa(),new IM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:PM.bind(null,n),Yo:LM.bind(null,n),t_:kM.bind(null,n),J_:UM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Py(n)?Vy(n):n.Va.set("Unknown")):(await n.ma.stop(),vA(n))}))),n.ma}function fs(n){return n.fa||(n.fa=(function(t,a,s){const l=Fe(t);return l.sa(),new DM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:BM.bind(null,n),t_:qM.bind(null,n),ta:FM.bind(null,n),na:HM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Cd(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(ro,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ta,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new Ly(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ky(n,e){if(ia("AsyncQueue",`${e}: ${n}`),xl(n))return new _e(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{static emptySet(e){return new ul(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||xe.comparator(t.key,a.key):(t,a)=>xe.comparator(t.key,a.key),this.keyedMap=ku(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ul)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new ul;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.ga=new Ft(xe.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class El{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new El(e,t,ul.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class $M{constructor(){this.queries=_S(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Fe(t),l=s.queries;s.queries=_S(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new _e(oe.ABORTED,"Firestore shutting down"))}}function _S(){return new oo((n=>Bw(n)),Ed)}async function Uy(n,e){const t=Fe(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new KM,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=ky(c,`Initialization of query '${tl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&zy(t)}async function jy(n,e){const t=Fe(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function YM(n,e){const t=Fe(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&zy(t)}function QM(n,e,t){const a=Fe(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function zy(n){n.Ca.forEach((e=>{e.next()}))}var Fg,ES;(ES=Fg||(Fg={})).Ma="default",ES.Cache="cache";class By{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new El(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=El.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Fg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.key=e}}class bA{constructor(e){this.key=e}}class XM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=it(),this.mutatedKeys=it(),this.eu=Fw(e),this.tu=new ul(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new vS,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const b=s.get(v),C=Td(this.query,E)?E:null,V=!!b&&this.mutatedKeys.has(b.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let L=!1;b&&C?b.data.isEqual(C.data)?V!==j&&(a.track({type:3,doc:C}),L=!0):this.su(b,C)||(a.track({type:2,doc:C}),L=!0,(p&&this.eu(C,p)>0||g&&this.eu(C,g)<0)&&(d=!0)):!b&&C?(a.track({type:0,doc:C}),L=!0):b&&!C&&(a.track({type:1,doc:b}),L=!0,(p||g)&&(d=!0)),L&&(C?(c=c.add(C),l=j?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(C,V){const j=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Vt:L})}};return j(C)-j(V)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new El(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=it(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new bA(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new SA(a))})),t}cu(e){this.Za=e.ks,this.Ya=it();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return El.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fy="SyncEngine";class WM{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class JM{constructor(e){this.key=e,this.hu=!1}}class ZM{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new oo((d=>Bw(d)),Ed),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ft(xe.comparator),this.Au=new Map,this.Vu=new Iy,this.du={},this.mu=new Map,this.fu=_l.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eV(n,e,t=!0){const a=DA(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await wA(a,e,t,!0),s}async function tV(n,e){const t=DA(n);await wA(t,e,!0,!1)}async function wA(n,e,t,a){const s=await EM(n.localStore,Ti(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await nV(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&gA(n.remoteStore,s),d}async function nV(n,e,t,a,s){n.pu=(E,b,C)=>(async function(j,L,G,F){let K=L.view.ru(G);K.Ss&&(K=await hS(j.localStore,L.query,!1).then((({documents:S})=>L.view.ru(S,K))));const ee=F&&F.targetChanges.get(L.targetId),ae=F&&F.targetMismatches.get(L.targetId)!=null,Y=L.view.applyChanges(K,j.isPrimaryClient,ee,ae);return SS(j,L.targetId,Y.au),Y.snapshot})(n,E,b,C);const l=await hS(n.localStore,e,!0),c=new XM(e,l.ks),d=c.ru(l.documents),p=_c.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);SS(n,t,g.au);const v=new WM(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function rV(n,e,t){const a=Fe(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Ed(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await zg(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&Oy(a.remoteStore,s.targetId),Hg(a,s.targetId)})).catch(Nl)):(Hg(a,s.targetId),await zg(a.localStore,s.targetId,!0))}async function iV(n,e){const t=Fe(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Oy(t.remoteStore,a.targetId))}async function aV(n,e,t){const a=hV(n);try{const s=await(function(c,d){const p=Fe(c),g=Mt.now(),v=d.reduce(((C,V)=>C.add(V.key)),it());let E,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let V=aa(),j=it();return p.xs.getEntries(C,v).next((L=>{V=L,V.forEach(((G,F)=>{F.isValidDocument()||(j=j.add(G))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,V))).next((L=>{E=L;const G=[];for(const F of d){const K=_O(F,E.get(F.key).overlayedDocument);K!=null&&G.push(new ps(F.key,K,Mw(K.value.mapValue),_r.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,G,d)})).next((L=>{b=L;const G=L.applyToLocalDocumentSet(E,j);return p.documentOverlayCache.saveOverlays(C,L.batchId,G)}))})).then((()=>({batchId:b.batchId,changes:qw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new Ft(rt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Tc(a,s.changes),await Cd(a.remoteStore)}catch(s){const l=ky(s,"Failed to persist write");t.reject(l)}}async function AA(n,e){const t=Fe(n);try{const a=await yM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(ht(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?ht(c.hu,14607):s.removedDocuments.size>0&&(ht(c.hu,42227),c.hu=!1))})),await Tc(t,a,e)}catch(a){await Nl(a)}}function TS(n,e,t){const a=Fe(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Fe(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const b of E.ba)b.va(d)&&(g=!0)})),g&&zy(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function sV(n,e,t){const a=Fe(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new Ft(xe.comparator);c=c.insert(l,xn.newNoDocument(l,ze.min()));const d=it().add(l),p=new wd(ze.min(),new Map,new Ft(rt),c,d);await AA(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),Hy(a)}else await zg(a.localStore,e,!1).then((()=>Hg(a,e,t))).catch(Nl)}async function oV(n,e){const t=Fe(n),a=e.batch.batchId;try{const s=await gM(t.localStore,e);CA(t,a,null),RA(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Tc(t,s)}catch(s){await Nl(s)}}async function lV(n,e,t){const a=Fe(n);try{const s=await(function(c,d){const p=Fe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(ht(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);CA(a,e,t),RA(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Tc(a,s)}catch(s){await Nl(s)}}function RA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function CA(n,e,t){const a=Fe(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function Hg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||IA(n,a)}))}function IA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Oy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Hy(n))}function SS(n,e,t){for(const a of t)a instanceof SA?(n.Vu.addReference(a.key,e),uV(n,a)):a instanceof bA?(Te(Fy,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||IA(n,a.key)):Le(19791,{wu:a})}function uV(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Te(Fy,"New document in limbo: "+t),n.Eu.add(a),Hy(n))}function Hy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(Dt.fromString(e)),a=n.fu.next();n.Au.set(a,new JM(t)),n.Ru=n.Ru.insert(t,a),gA(n.remoteStore,new Za(Ti(_d(t.path)),a,"TargetPurposeLimboResolution",gd.ce))}}async function Tc(n,e,t){const a=Fe(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var v;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Ny.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const v=Fe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ue.forEach(g,(b=>ue.forEach(b.Ts,(C=>v.persistence.referenceDelegate.addReference(E,b.targetId,C))).next((()=>ue.forEach(b.Is,(C=>v.persistence.referenceDelegate.removeReference(E,b.targetId,C)))))))))}catch(E){if(!xl(E))throw E;Te(xy,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const C=v.vs.get(b),V=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(V);v.vs=v.vs.insert(b,j)}}})(a.localStore,l))}async function cV(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){Te(Fy,"User change. New user:",e.toKey());const a=await hA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new _e(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Tc(t,a.Ns)}}function fV(n,e){const t=Fe(n),a=t.Au.get(e);if(a&&a.hu)return it().add(a.key);{let s=it();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function DA(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sV.bind(null,e),e.Pu.J_=YM.bind(null,e.eventManager),e.Pu.yu=QM.bind(null,e.eventManager),e}function hV(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lV.bind(null,e),e}class Gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return pM(this.persistence,new hM,e.initialUser,this.serializer)}Cu(e){return new fA(Dy.Vi,this.serializer)}Du(e){return new SM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gh.provider={build:()=>new Gh};class dV extends Gh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof Hh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new WO(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new fA((a=>Hh.Vi(a,t)),this.serializer)}}class qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>TS(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=cV.bind(null,this.syncEngine),await GM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $M})()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),a=CM(e.databaseInfo);return OM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new VM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>TS(this.syncEngine,t,0)),(function(){return pS.v()?new pS:new bM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,v){const E=new ZM(s,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Fe(s);Te(ro,"RemoteStore shutting down."),l.Ea.add(5),await Ec(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}qg.provider={build:()=>new qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ia("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class mV{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=Nn.UNAUTHENTICATED,this.clientId=yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Te(hs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Te(hs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ta;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=ky(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function ug(n,e){n.asyncQueue.verifyOperationInProgress(),Te(hs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await hA(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function bS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await pV(n);Te(hs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>yS(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>yS(e.remoteStore,s))),n._onlineComponents=e}async function pV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(hs,"Using user provided OfflineComponentProvider");try{await ug(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===oe.FAILED_PRECONDITION||s.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;pl("Error using user provided cache. Falling back to memory cache: "+t),await ug(n,new Gh)}}else Te(hs,"Using default OfflineComponentProvider"),await ug(n,new dV(void 0));return n._offlineComponents}async function NA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(hs,"Using user provided OnlineComponentProvider"),await bS(n,n._uninitializedComponentsProvider._online)):(Te(hs,"Using default OnlineComponentProvider"),await bS(n,new qg))),n._onlineComponents}function gV(n){return NA(n).then((e=>e.syncEngine))}async function Kh(n){const e=await NA(n),t=e.eventManager;return t.onListen=eV.bind(null,e.syncEngine),t.onUnlisten=rV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=tV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=iV.bind(null,e.syncEngine),t}function yV(n,e,t,a){const s=new qy(a),l=new By(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>Uy(await Kh(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>jy(await Kh(n),l)))}}function vV(n,e,t={}){const a=new ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new qy({next:b=>{v.Nu(),c.enqueueAndForget((()=>jy(l,E)));const C=b.docs.has(d);!C&&b.fromCache?g.reject(new _e(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&b.fromCache&&p&&p.source==="server"?g.reject(new _e(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new By(_d(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Uy(l,E)})(await Kh(n),n.asyncQueue,e,t,a))),a.promise}function _V(n,e,t={}){const a=new ta;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new qy({next:b=>{v.Nu(),c.enqueueAndForget((()=>jy(l,E))),b.fromCache&&p.source==="server"?g.reject(new _e(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new By(d,v,{includeMetadataChanges:!0,Ka:!0});return Uy(l,E)})(await Kh(n),n.asyncQueue,e,t,a))),a.promise}function EV(n,e){const t=new ta;return n.asyncQueue.enqueueAndForget((async()=>aV(await gV(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="ComponentProvider",wS=new Map;function SV(n,e,t,a,s){return new Fx(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,xA(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA="firestore.googleapis.com",AS=!0;class RS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OA,this.ssl=AS}else this.host=e.host,this.ssl=e.ssl??AS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QO)throw new _e(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xA(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new _e(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Id{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Tx;switch(a.type){case"firstParty":return new Ax(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new _e(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=wS.get(t);a&&(Te(TV,"Removing Datastore"),wS.delete(t),a.terminate())})(this),Promise.resolve()}}function bV(n,e,t,a={}){var g;n=vr(n,Id);const s=Cl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(sw(`https://${d}`),ow("Firestore",!0)),l.host!==OA&&l.host!==d&&pl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!eo(p,c)&&(n._setSettings(p),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=Nn.MOCK_USER;else{v=$2(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new _e(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Nn(b)}n._authCredentials=new Sx(new Tw(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class Gt{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(gc(t,Gt._jsonSchema))return new Gt(e,a||null,new xe(Dt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:on("string",Gt._jsonSchemaVersion),referencePath:on("string")};class as extends uo{constructor(e,t,a){super(e,t,_d(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new xe(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function Gy(n,e,...t){if(n=cn(n),Sw("collection","path",e),n instanceof Id){const a=Dt.fromString(e,...t);return j0(a),new as(n,null,a)}{if(!(n instanceof Gt||n instanceof as))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Dt.fromString(e,...t));return j0(a),new as(n.firestore,null,a)}}function kr(n,e,...t){if(n=cn(n),arguments.length===1&&(e=yy.newId()),Sw("doc","path",e),n instanceof Id){const a=Dt.fromString(e,...t);return U0(a),new Gt(n,null,new xe(a))}{if(!(n instanceof Gt||n instanceof as))throw new _e(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Dt.fromString(e,...t));return U0(a),new Gt(n.firestore,n instanceof as?n.converter:null,new xe(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="AsyncQueue";class IS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mA(this,"async_queue_retry"),this._c=()=>{const a=lg();a&&Te(CS,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=lg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ta;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!xl(e))throw e;Te(CS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ia("INTERNAL UNHANDLED ERROR: ",DS(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Ly.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Le(47125,{Pc:DS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function DS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ds extends Id{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new IS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new IS(e),this._firestoreClient=void 0,await e}}}function wV(n,e){const t=typeof n=="object"?n:fw(),a=typeof n=="string"?n:Lh,s=py(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=G2("firestore");l&&bV(s,...l)}return s}function Sc(n){if(n._terminated)throw new _e(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AV(n),n._firestoreClient}function AV(n){var a,s,l,c;const e=n._freezeSettings(),t=SV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new mV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pr(bn.fromBase64String(e))}catch(t){throw new _e(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pr(bn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gc(e,Pr._jsonSchema))return Pr.fromBase64String(e.bytes)}}Pr._jsonSchemaVersion="firestore/bytes/1.0",Pr._jsonSchema={type:on("string",Pr._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bi._jsonSchemaVersion}}static fromJSON(e){if(gc(e,bi._jsonSchema))return new bi(e.latitude,e.longitude)}}bi._jsonSchemaVersion="firestore/geoPoint/1.0",bi._jsonSchema={type:on("string",bi._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Wr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gc(e,Wr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Wr(e.vectorValues);throw new _e(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Wr._jsonSchemaVersion="firestore/vectorValue/1.0",Wr._jsonSchema={type:on("string",Wr._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^__.*__$/;class CV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}class MA{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{dataSource:n})}}class $y{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $y({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $h(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(VA(this.dataSource)&&RV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class IV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Ad(e)}createContext(e,t,a,s=!1){return new $y({dataSource:e,methodName:t,targetDoc:a,path:Sn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nd(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new IV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PA(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);Yy("Data must be an object, but it was:",c,a);const d=UA(a,c);let p,g;if(l.merge)p=new gr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const b=Tl(e,E,t);if(!c.contains(b))throw new _e(oe.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);BA(v,b)||v.push(b)}p=new gr(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new CV(new Wn(d),p,g)}class xd extends Ky{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}function LA(n,e,t,a){const s=n.createContext(1,e,t);Yy("Data must be an object, but it was:",s,a);const l=[],c=Wn.empty();ms(a,((p,g)=>{const v=zA(e,p,t);g=cn(g);const E=s.childContextForFieldPath(v);if(g instanceof xd)l.push(v);else{const b=bc(g,E);b!=null&&(l.push(v),c.set(v,b))}}));const d=new gr(l);return new MA(c,d,s.fieldTransforms)}function kA(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Tl(e,a,t)],p=[s];if(l.length%2!=0)throw new _e(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Tl(e,l[b])),p.push(l[b+1]);const g=[],v=Wn.empty();for(let b=d.length-1;b>=0;--b)if(!BA(g,d[b])){const C=d[b];let V=p[b];V=cn(V);const j=c.childContextForFieldPath(C);if(V instanceof xd)g.push(C);else{const L=bc(V,j);L!=null&&(g.push(C),v.set(C,L))}}const E=new gr(g);return new MA(v,E,c.fieldTransforms)}function DV(n,e,t,a=!1){return bc(t,n.createContext(a?4:3,e))}function bc(n,e){if(jA(n=cn(n)))return Yy("Unsupported field value:",e,n),UA(n,e);if(n instanceof Ky)return(function(a,s){if(!VA(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=bc(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=cn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return dO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Mt.fromDate(a);return{timestampValue:Fh(s.serializer,l)}}if(a instanceof Mt){const l=new Mt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Fh(s.serializer,l)}}if(a instanceof bi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Pr)return{bytesValue:nA(s.serializer,a._byteString)};if(a instanceof Gt){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Cy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof Wr)return(function(c,d){const p=c instanceof Wr?c.toArray():c;return{mapValue:{fields:{[xw]:{stringValue:Ow},[kh]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return by(d.serializer,v)}))}}}}}})(a,s);if(uA(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${pd(a)}`)})(n,e)}function UA(n,e){const t={};return Aw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(n,((a,s)=>{const l=bc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function jA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof bi||n instanceof Pr||n instanceof Gt||n instanceof Ky||n instanceof Wr||uA(n))}function Yy(n,e,t){if(!jA(t)||!bw(t)){const a=pd(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Tl(n,e,t){if((e=cn(e))instanceof Dd)return e._internalPath;if(typeof e=="string")return zA(n,e);throw $h("Field path arguments must be of type string or ",n,!1,void 0,t)}const NV=new RegExp("[~\\*/\\[\\]]");function zA(n,e,t){if(e.search(NV)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dd(...e.split("."))._internalPath}catch{throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $h(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new _e(oe.INVALID_ARGUMENT,d+n+p)}function BA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{convertValue(e,t="none"){switch(cs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return ms(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[kh].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>Wt(c.doubleValue)));return new Wr(t)}convertGeoPoint(e){return new bi(Wt(e.latitude),Wt(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=vd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(ec(e));default:return null}}convertTimestamp(e){const t=ls(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Dt.fromString(e);ht(lA(a),9688,{name:e});const s=new tc(a.get(1),a.get(3)),l=new xe(a.popFirst(5));return s.isEqual(t)||ia(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends xV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}const NS="@firebase/firestore",xS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Tl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class OV extends FA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class MV extends Xy{}function Wy(n,e,...t){let a=[];e instanceof Xy&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof Jy)).length,d=l.filter((p=>p instanceof Od)).length;if(c>1||c>0&&d>0)throw new _e(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class Od extends MV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Od(e,t,a)}_apply(e){const t=this._parse(e);return qA(e._query,t),new uo(e.firestore,e.converter,Vg(e._query,t))}_parse(e){const t=Nd(e.firestore);return(function(l,c,d,p,g,v,E){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){VS(E,v);const V=[];for(const j of E)V.push(MS(p,l,j));b={arrayValue:{values:V}}}else b=MS(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||VS(E,v),b=DV(d,c,E,v==="in"||v==="not-in");return sn.create(g,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function VV(n,e,t){const a=e,s=Tl("where",n);return Od._create(s,a,t)}class Jy extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jy(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Zr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)qA(c,p),c=Vg(c,p)})(e._query,t),new uo(e.firestore,e.converter,Vg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function MS(n,e,t){if(typeof(t=cn(t))=="string"){if(t==="")throw new _e(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&t.indexOf("/")!==-1)throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Dt.fromString(t));if(!xe.isDocumentKey(a))throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return $0(n,new xe(a))}if(t instanceof Gt)return $0(n,t._key);throw new _e(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pd(t)}.`)}function VS(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qA(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function GA(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class ju{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xs extends FA{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Tl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Xs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xs._jsonSchema={type:on("string",Xs._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class ph extends Xs{data(e={}){return super.data(e)}}class Ws{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ju(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new ph(this._firestore,this._userDataWriter,a.key,a,new ju(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new ph(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ju(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new ph(s._firestore,s._userDataWriter,d.doc.key,d.doc,new ju(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:PV(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ws._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=yy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function PV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws._jsonSchemaVersion="firestore/querySnapshot/1.0",Ws._jsonSchema={type:on("string",Ws._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nd(e)}set(e,t,a){this._verifyNotCommitted();const s=cg(e,this._firestore),l=GA(s.converter,t,a),c=PA(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,_r.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=cg(e,this._firestore);let c;return c=typeof(t=cn(t))=="string"||t instanceof Dd?kA(this._dataReader,"WriteBatch.update",l._key,t,a,s):LA(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cg(e,this._firestore);return this._mutations=this._mutations.concat(new wy(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cg(n,e){if((n=cn(n)).firestore!==e)throw new _e(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){n=vr(n,Gt);const e=vr(n.firestore,ds),t=Sc(e);return vV(t,n._key).then((a=>KA(e,n,a)))}function Zy(n){n=vr(n,uo);const e=vr(n.firestore,ds),t=Sc(e),a=new Qy(e);return HA(n._query),_V(t,n._query).then((s=>new Ws(e,a,n,s)))}function kV(n,e,t){n=vr(n,Gt);const a=vr(n.firestore,ds),s=GA(n.converter,e,t),l=Nd(a);return ev(a,[PA(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,_r.none())])}function Md(n,e,t,...a){n=vr(n,Gt);const s=vr(n.firestore,ds),l=Nd(s);let c;return c=typeof(e=cn(e))=="string"||e instanceof Dd?kA(l,"updateDoc",n._key,e,t,a):LA(l,"updateDoc",n._key,e),ev(s,[c.toMutation(n._key,_r.exists(!0))])}function UV(n,...e){var g,v,E;n=cn(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||OS(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(OS(e[a])){const b=e[a];e[a]=(g=b.next)==null?void 0:g.bind(b),e[a+1]=(v=b.error)==null?void 0:v.bind(b),e[a+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,d;if(n instanceof Gt)c=vr(n.firestore,ds),d=_d(n._key.path),l={next:b=>{e[a]&&e[a](KA(c,n,b))},error:e[a+1],complete:e[a+2]};else{const b=vr(n,uo);c=vr(b.firestore,ds),d=b._query;const C=new Qy(c);l={next:V=>{e[a]&&e[a](new Ws(c,C,b,V))},error:e[a+1],complete:e[a+2]},HA(n._query)}const p=Sc(c);return yV(p,d,s,l)}function ev(n,e){const t=Sc(n);return EV(t,e)}function KA(n,e,t){const a=t.docs.get(e._key),s=new Qy(n);return new Xs(n,s,e._key,a,new ju(t.hasPendingWrites,t.fromCache),e.converter)}function $A(n){return n=vr(n,ds),Sc(n),new LV(n,(e=>ev(n,e)))}(function(e,t=!0){Ex(Il),ml(new to("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new ds(new bx(a.getProvider("auth-internal")),new Rx(c,a.getProvider("app-check-internal")),Hx(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),rs(NS,xS,e),rs(NS,xS,"esm2020")})();var jV="firebase",zV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rs(jV,zV,"app");function YA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BV=YA,QA=new mc("auth","Firebase",YA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new dy("@firebase/auth");function FV(n,...e){Yh.logLevel<=nt.WARN&&Yh.warn(`Auth (${Il}): ${n}`,...e)}function gh(n,...e){Yh.logLevel<=nt.ERROR&&Yh.error(`Auth (${Il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(n,...e){throw nv(n,...e)}function Jr(n,...e){return nv(n,...e)}function tv(n,e,t){const a={...BV(),[e]:t};return new mc("auth","Firebase",a).create(e,{appName:n.name})}function Js(n){return tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ci(n,"argument-error"),tv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return QA.create(n,...e)}function Ue(n,e,...t){if(!n)throw nv(e,...t)}function Zi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gh(e),new Error(e)}function sa(n,e){n||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function qV(){return PS()==="http:"||PS()==="https:"}function PS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qV()||Z2()||"connection"in navigator)?navigator.onLine:!0}function KV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.shortDelay=e,this.longDelay=t,sa(t>e,"Short delay should be less than long delay!"),this.isMobile=X2()||eN()}get(){return GV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){sa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QV=new Ac(3e4,6e4);function iv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ml(n,e,t,a,s={}){return WA(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=pc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return J2()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(g.credentials="include"),XA.fetch()(await JA(n,n.config.apiHost,t,d),g)})}async function WA(n,e,t){n._canInitEmulator=!1;const a={...$V,...e};try{const s=new WV(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw rh(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw rh(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw rh(n,"user-disabled",c);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw tv(n,v,g);Ci(n,v)}}catch(s){if(s instanceof ca)throw s;Ci(n,"network-request-failed",{message:String(s)})}}async function XV(n,e,t,a,s={}){const l=await Ml(n,e,t,a,s);return"mfaPendingCredential"in l&&Ci(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function JA(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?rv(n.config,s):`${n.config.apiScheme}://${s}`;return YV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class WV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Jr(this.auth,"network-request-failed")),QV.get())})}}function rh(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=Jr(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JV(n,e){return Ml(n,"POST","/v1/accounts:delete",e)}async function Qh(n,e){return Ml(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZV(n,e=!1){const t=cn(n),a=await t.getIdToken(e),s=av(a);Ue(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:$u(fg(s.auth_time)),issuedAtTime:$u(fg(s.iat)),expirationTime:$u(fg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function fg(n){return Number(n)*1e3}function av(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const s=nw(t);return s?JSON.parse(s):(gh("Failed to decode base64 JWT payload"),null)}catch(s){return gh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LS(n){const e=av(n);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ac(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ca&&e4(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function e4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$u(this.lastLoginAt),this.creationTime=$u(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n){var E;const e=n.auth,t=await n.getIdToken(),a=await ac(n,Qh(e,{idToken:t}));Ue(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?ZA(s.providerUserInfo):[],c=r4(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Kg(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function n4(n){const e=cn(n);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function r4(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function ZA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(n,e){const t=await WA(n,{},async()=>{const a=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await JA(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&Cl(n.emulatorConfig.host)&&(p.credentials="include"),XA.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function a4(n,e){return Ml(n,"POST","/v2/accounts:revokeToken",iv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const t=LS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await i4(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new cl;return a&&(Ue(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(Ue(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Ue(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cl,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(n,e){Ue(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Xr{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new t4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ac(this,this.stsTokenManager.getToken(this.auth,e));return Ue(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZV(this,e)}reload(){return n4(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Xh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yr(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await ac(this,JV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:C,providerData:V,stsTokenManager:j}=t;Ue(E&&j,e,"internal-error");const L=cl.fromJSON(this.name,j);Ue(typeof E=="string",e,"internal-error"),Ka(a,e.name),Ka(s,e.name),Ue(typeof b=="boolean",e,"internal-error"),Ue(typeof C=="boolean",e,"internal-error"),Ka(l,e.name),Ka(c,e.name),Ka(d,e.name),Ka(p,e.name),Ka(g,e.name),Ka(v,e.name);const G=new Xr({uid:E,auth:e,email:s,emailVerified:b,displayName:a,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:L,createdAt:g,lastLoginAt:v});return V&&Array.isArray(V)&&(G.providerData=V.map(F=>({...F}))),p&&(G._redirectEventId=p),G}static async _fromIdTokenResponse(e,t,a=!1){const s=new cl;s.updateFromServerResponse(t);const l=new Xr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await Xh(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];Ue(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?ZA(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new cl;d.updateFromIdToken(a);const p=new Xr({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Kg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=new Map;function ea(n){sa(n instanceof Function,"Expected a class definition");let e=kS.get(n);return e?(sa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}eR.type="NONE";const US=eR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(n,e,t){return`firebase:${n}:${e}:${t}`}class fl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=yh(this.userKey,s.apiKey,l),this.fullPersistenceKey=yh("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qh(this.auth,{idToken:e}).catch(()=>{});return t?Xr._fromGetAccountInfoResponse(this.auth,t,e):null}return Xr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new fl(ea(US),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||ea(US);const c=yh(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const b=await Qh(e,{idToken:v}).catch(()=>{});if(!b)break;E=await Xr._fromGetAccountInfoResponse(e,b,v)}else E=Xr._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new fl(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new fl(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sR(e))return"Blackberry";if(oR(e))return"Webos";if(nR(e))return"Safari";if((e.includes("chrome/")||rR(e))&&!e.includes("edge/"))return"Chrome";if(aR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function tR(n=On()){return/firefox\//i.test(n)}function nR(n=On()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rR(n=On()){return/crios\//i.test(n)}function iR(n=On()){return/iemobile/i.test(n)}function aR(n=On()){return/android/i.test(n)}function sR(n=On()){return/blackberry/i.test(n)}function oR(n=On()){return/webos/i.test(n)}function sv(n=On()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function s4(n=On()){var e;return sv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function o4(){return tN()&&document.documentMode===10}function lR(n=On()){return sv(n)||aR(n)||oR(n)||sR(n)||/windows phone/i.test(n)||iR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(n,e=[]){let t;switch(n){case"Browser":t=jS(On());break;case"Worker":t=`${jS(On())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Il}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u4(n,e={}){return Ml(n,"GET","/v2/passwordPolicy",iv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=6;class f4{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??c4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zS(this),this.idTokenSubscription=new zS(this),this.beforeStateQueue=new l4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ea(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await fl.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qh(this,{idToken:e}),a=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(Yr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=KV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yr(this.app))return Promise.reject(Js(this));const t=e?cn(e):null;return t&&Ue(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yr(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yr(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ea(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await u4(this),t=new f4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await a4(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ea(e)||this._popupRedirectResolver;Ue(t,this,"argument-error"),this.redirectPersistenceManager=await fl.create(this,[ea(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(Yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&FV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vd(n){return cn(n)}class zS{constructor(e){this.auth=e,this.observer=null,this.addObserver=uN(t=>this.observer=t)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function d4(n){ov=n}function m4(n){return ov.loadJS(n)}function p4(){return ov.gapiScript}function g4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(n,e){const t=py(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(eo(l,e??{}))return s;Ci(s,"already-initialized")}return t.initialize({options:e})}function v4(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(ea);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function _4(n,e,t){const a=Vd(n);Ue(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=cR(e),{host:c,port:d}=E4(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){Ue(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ue(eo(g,a.config.emulator)&&eo(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Cl(c)?(sw(`${l}//${c}${p}`),ow("Auth",!0)):T4()}function cR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function E4(n){const e=cR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:BS(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:BS(c)}}}function BS(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function T4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,t){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n,e){return XV(n,"POST","/v1/accounts:signInWithIdp",iv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4="http://localhost";class io extends fR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new io(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new io(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return hl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,hl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hl(e,t)}buildRequest(){const e={requestUri:S4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa extends Rc{constructor(){super("facebook.com")}static credential(e){return io._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qa.credential(e.oauthAccessToken)}catch{return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return io._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return Ji.credential(t,a)}catch{return null}}}Ji.GOOGLE_SIGN_IN_METHOD="google.com";Ji.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends Rc{constructor(){super("github.com")}static credential(e){return io._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.GITHUB_SIGN_IN_METHOD="github.com";Xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends Rc{constructor(){super("twitter.com")}static credential(e,t){return io._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return Wa.credential(t,a)}catch{return null}}}Wa.TWITTER_SIGN_IN_METHOD="twitter.com";Wa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await Xr._fromIdTokenResponse(e,a,s),c=FS(a);return new Sl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=FS(a);return new Sl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function FS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends ca{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new Wh(e,t,a,s)}}function hR(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(n,l,e,a):l})}async function b4(n,e,t=!1){const a=await ac(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(n,e,t=!1){const{auth:a}=n;if(Yr(a.app))return Promise.reject(Js(a));const s="reauthenticate";try{const l=await ac(n,hR(a,s,e,n),t);Ue(l.idToken,a,"internal-error");const c=av(l.idToken);Ue(c,a,"internal-error");const{sub:d}=c;return Ue(n.uid===d,a,"user-mismatch"),Sl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ci(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(n,e,t=!1){if(Yr(n.app))return Promise.reject(Js(n));const a="signIn",s=await hR(n,a,e),l=await Sl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function R4(n,e,t,a){return cn(n).onIdTokenChanged(e,t,a)}function C4(n,e,t){return cn(n).beforeAuthStateChanged(e,t)}function I4(n,e,t,a){return cn(n).onAuthStateChanged(e,t,a)}const Jh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Jh,"1"),this.storage.removeItem(Jh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=1e3,N4=10;class mR extends dR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);o4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,N4):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},D4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mR.type="LOCAL";const x4=mR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR extends dR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pR.type="SESSION";const gR=pR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new Pd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await O4(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=uv("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function V4(n){wi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function P4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function L4(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function k4(){return yR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firebaseLocalStorageDb",U4=1,Zh="firebaseLocalStorage",_R="fbase_key";class Cc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ld(n,e){return n.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function j4(){const n=indexedDB.deleteDatabase(vR);return new Cc(n).toPromise()}function $g(){const n=indexedDB.open(vR,U4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(Zh,{keyPath:_R})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(Zh)?e(a):(a.close(),await j4(),e(await $g()))})})}async function HS(n,e,t){const a=Ld(n,!0).put({[_R]:e,value:t});return new Cc(a).toPromise()}async function z4(n,e){const t=Ld(n,!1).get(e),a=await new Cc(t).toPromise();return a===void 0?null:a.value}function qS(n,e){const t=Ld(n,!0).delete(e);return new Cc(t).toPromise()}const B4=800,F4=3;class ER{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>F4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pd._getInstance(k4()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await P4(),!this.activeServiceWorker)return;this.sender=new M4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||L4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $g();return await HS(e,Jh,"1"),await qS(e,Jh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>HS(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>z4(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Ld(s,!1).getAll();return new Cc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ER.type="LOCAL";const H4=ER;new Ac(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(n,e){return e?ea(e):(Ue(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv extends fR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function q4(n){return A4(n.auth,new cv(n),n.bypassAuthState)}function G4(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),w4(t,new cv(n),n.bypassAuthState)}async function K4(n){const{auth:e,user:t}=n;return Ue(t,e,"internal-error"),b4(t,new cv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q4;case"linkViaPopup":case"linkViaRedirect":return K4;case"reauthViaPopup":case"reauthViaRedirect":return G4;default:Ci(this.auth,"internal-error")}}resolve(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new Ac(2e3,1e4);async function Y4(n,e,t){if(Yr(n.app))return Promise.reject(Jr(n,"operation-not-supported-in-this-environment"));const a=Vd(n);HV(n,e,lv);const s=TR(a,t);return new Qs(a,"signInViaPopup",e,s).executeNotNull()}class Qs extends SR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Qs.currentPopupAction&&Qs.currentPopupAction.cancel(),Qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){sa(this.filter.length===1,"Popup operations only handle one event");const e=uv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$4.get())};e()}}Qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4="pendingRedirect",vh=new Map;class X4 extends SR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const a=await W4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function W4(n,e){const t=eP(e),a=Z4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function J4(n,e){vh.set(n._key(),e)}function Z4(n){return ea(n._redirectPersistence)}function eP(n){return yh(Q4,n.config.apiKey,n.name)}async function tP(n,e,t=!1){if(Yr(n.app))return Promise.reject(Js(n));const a=Vd(n),s=TR(a,e),c=await new X4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=600*1e3;class rP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!bR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(Jr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nP&&this.cachedEventUids.clear(),this.cachedEventUids.has(GS(e))}saveEventToCache(e){this.cachedEventUids.add(GS(e)),this.lastProcessedEventTime=Date.now()}}function GS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iP(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(n,e={}){return Ml(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oP=/^https?/;async function lP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await aP(n);for(const t of e)try{if(uP(t))return}catch{}Ci(n,"unauthorized-domain")}function uP(n){const e=Gg(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!oP.test(t))return!1;if(sP.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=new Ac(3e4,6e4);function KS(){const n=wi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function fP(n){return new Promise((e,t)=>{var s,l,c;function a(){KS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KS(),t(Jr(n,"network-request-failed"))},timeout:cP.get()})}if((l=(s=wi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=wi().gapi)!=null&&c.load)a();else{const d=g4("iframefcb");return wi()[d]=()=>{gapi.load?a():t(Jr(n,"network-request-failed"))},m4(`${p4()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw _h=null,e})}let _h=null;function hP(n){return _h=_h||fP(n),_h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new Ac(5e3,15e3),mP="__/auth/iframe",pP="emulator/auth/iframe",gP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vP(n){const e=n.config;Ue(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rv(e,pP):`https://${n.config.authDomain}/${mP}`,a={apiKey:e.apiKey,appName:n.name,v:Il},s=yP.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${pc(a).slice(1)}`}async function _P(n){const e=await hP(n),t=wi().gapi;return Ue(t,n,"internal-error"),e.open({where:document.body,url:vP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gP,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=Jr(n,"network-request-failed"),d=wi().setTimeout(()=>{l(c)},dP.get());function p(){wi().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TP=500,SP=600,bP="_blank",wP="http://localhost";class $S{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AP(n,e,t,a=TP,s=SP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...EP,width:a.toString(),height:s.toString(),top:l,left:c},g=On().toLowerCase();t&&(d=rR(g)?bP:t),tR(g)&&(e=e||wP,p.scrollbars="yes");const v=Object.entries(p).reduce((b,[C,V])=>`${b}${C}=${V},`,"");if(s4(g)&&d!=="_self")return RP(e||"",d),new $S(null);const E=window.open(e||"",d,v);Ue(E,n,"popup-blocked");try{E.focus()}catch{}return new $S(E)}function RP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP="__/auth/handler",IP="emulator/auth/handler",DP=encodeURIComponent("fac");async function YS(n,e,t,a,s,l){Ue(n.config.authDomain,n,"auth-domain-config-required"),Ue(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Il,eventId:s};if(e instanceof lv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",lN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Rc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${DP}=${encodeURIComponent(p)}`:"";return`${NP(n)}?${pc(d).slice(1)}${g}`}function NP({config:n}){return n.emulator?rv(n,IP):`https://${n.authDomain}/${CP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="webStorageSupport";class xP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gR,this._completeRedirectFn=tP,this._overrideRedirectResult=J4}async _openPopup(e,t,a,s){var c;sa((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await YS(e,t,a,Gg(),s);return AP(e,l,uv())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await YS(e,t,a,Gg(),s);return V4(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(sa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await _P(e),a=new rP(e);return t.register("authEvent",s=>(Ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hg,{type:hg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[hg];l!==void 0&&t(!!l),Ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lR()||nR()||sv()}}const OP=xP;var QS="@firebase/auth",XS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PP(n){ml(new to("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;Ue(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uR(n)},g=new h4(a,s,l,p);return v4(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ml(new to("auth-internal",e=>{const t=Vd(e.getProvider("auth").getImmediate());return(a=>new MP(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rs(QS,XS,VP(n)),rs(QS,XS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=300,kP=aw("authIdTokenMaxAge")||LP;let WS=null;const UP=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>kP)return;const s=t==null?void 0:t.token;WS!==s&&(WS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jP(n=fw()){const e=py(n,"auth");if(e.isInitialized())return e.getImmediate();const t=y4(n,{popupRedirectResolver:OP,persistence:[H4,x4,gR]}),a=aw("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=UP(l.toString());C4(t,c,()=>c(t.currentUser)),R4(t,d=>c(d))}}const s=rw("auth");return s&&_4(t,`http://${s}`),t}function zP(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}d4({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=Jr("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",zP().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PP("Browser");const BP={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function Jo(n){const e=BP[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const FP={apiKey:Jo("VITE_FIREBASE_API_KEY"),authDomain:Jo("VITE_FIREBASE_AUTH_DOMAIN"),projectId:Jo("VITE_FIREBASE_PROJECT_ID"),storageBucket:Jo("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:Jo("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:Jo("VITE_FIREBASE_APP_ID")},wR=cw(FP),bl=jP(wR),HP=new Ji,wn=wV(wR),AR=z.createContext(void 0),qP=({children:n})=>{const[e,t]=z.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=z.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);z.useEffect(()=>{a(e)},[e,a]);const s=z.useCallback(c=>{t(c),a(c);const d=bl.currentUser;if(d){const p=kr(wn,"users",d.uid);Md(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=z.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return z.useEffect(()=>bl.onAuthStateChanged(async d=>{if(d){const p=kr(wn,"users",d.uid),g=await wc(p);if(g.exists()&&g.data().preferredTheme){const v=g.data().preferredTheme;t(v),a(v)}}}),[a]),O.jsx(AR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},Ic=({container:n=!0})=>{const e=O.jsx("div",{className:"spinner"});return n?O.jsx("div",{className:"spinner-container",children:e}):e},wl=()=>O.jsx("div",{className:"loading-container",children:O.jsx(Ic,{container:!1})}),GP=()=>{const n=pt(a=>a.auth.firebaseUser),e=pt(a=>a.auth.userData);return pt(a=>a.auth.loading)?O.jsx(wl,{}):n?e?e.isApproved?O.jsx(es,{to:"/app/roster",replace:!0}):O.jsx(es,{to:"/guest",replace:!0}):O.jsx(wl,{}):O.jsx(es,{to:"/login",replace:!0})};function En(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var KP=typeof Symbol=="function"&&Symbol.observable||"@@observable",JS=KP,dg=()=>Math.random().toString(36).substring(7).split("").join("."),$P={INIT:`@@redux/INIT${dg()}`,REPLACE:`@@redux/REPLACE${dg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${dg()}`},ed=$P;function fv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function RR(n,e,t){if(typeof n!="function")throw new Error(En(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(En(1));return t(RR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((L,G)=>{c.set(G,L)}))}function v(){if(p)throw new Error(En(3));return s}function E(L){if(typeof L!="function")throw new Error(En(4));if(p)throw new Error(En(5));let G=!0;g();const F=d++;return c.set(F,L),function(){if(G){if(p)throw new Error(En(6));G=!1,g(),c.delete(F),l=null}}}function b(L){if(!fv(L))throw new Error(En(7));if(typeof L.type>"u")throw new Error(En(8));if(typeof L.type!="string")throw new Error(En(17));if(p)throw new Error(En(9));try{p=!0,s=a(s,L)}finally{p=!1}return(l=c).forEach(F=>{F()}),L}function C(L){if(typeof L!="function")throw new Error(En(10));a=L,b({type:ed.REPLACE})}function V(){const L=E;return{subscribe(G){if(typeof G!="object"||G===null)throw new Error(En(11));function F(){const ee=G;ee.next&&ee.next(v())}return F(),{unsubscribe:L(F)}},[JS](){return this}}}return b({type:ed.INIT}),{dispatch:b,subscribe:E,getState:v,replaceReducer:C,[JS]:V}}function YP(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:ed.INIT})>"u")throw new Error(En(12));if(typeof t(void 0,{type:ed.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function QP(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{YP(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let v=0;v<a.length;v++){const E=a[v],b=t[E],C=c[E],V=b(C,d);if(typeof V>"u")throw d&&d.type,new Error(En(14));g[E]=V,p=p||V!==C}return p=p||a.length!==Object.keys(c).length,p?g:c}}function td(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function XP(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(En(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=td(...d)(s.dispatch),{...s,dispatch:l}}}function WP(n){return fv(n)&&"type"in n&&typeof n.type=="string"}var CR=Symbol.for("immer-nothing"),ZS=Symbol.for("immer-draftable"),zn=Symbol.for("immer-state");function Qr(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var yr=Object,Al=yr.getPrototypeOf,nd="constructor",kd="prototype",Yg="configurable",rd="enumerable",Eh="writable",sc="value",oa=n=>!!n&&!!n[zn];function ei(n){var e;return n?IR(n)||jd(n)||!!n[ZS]||!!((e=n[nd])!=null&&e[ZS])||zd(n)||Bd(n):!1}var JP=yr[kd][nd].toString(),eb=new WeakMap;function IR(n){if(!n||!hv(n))return!1;const e=Al(n);if(e===null||e===yr[kd])return!0;const t=yr.hasOwnProperty.call(e,nd)&&e[nd];if(t===Object)return!0;if(!il(t))return!1;let a=eb.get(t);return a===void 0&&(a=Function.toString.call(t),eb.set(t,a)),a===JP}function Ud(n,e,t=!0){Dc(n)===0?(t?Reflect.ownKeys(n):yr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Dc(n){const e=n[zn];return e?e.type_:jd(n)?1:zd(n)?2:Bd(n)?3:0}var tb=(n,e,t=Dc(n))=>t===2?n.has(e):yr[kd].hasOwnProperty.call(n,e),Qg=(n,e,t=Dc(n))=>t===2?n.get(e):n[e],id=(n,e,t,a=Dc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function ZP(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var jd=Array.isArray,zd=n=>n instanceof Map,Bd=n=>n instanceof Set,hv=n=>typeof n=="object",il=n=>typeof n=="function",mg=n=>typeof n=="boolean";function eL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var Wi=n=>n.copy_||n.base_,dv=n=>n.modified_?n.copy_:n.base_;function Xg(n,e){if(zd(n))return new Map(n);if(Bd(n))return new Set(n);if(jd(n))return Array[kd].slice.call(n);const t=IR(n);if(e===!0||e==="class_only"&&!t){const a=yr.getOwnPropertyDescriptors(n);delete a[zn];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[Eh]===!1&&(d[Eh]=!0,d[Yg]=!0),(d.get||d.set)&&(a[c]={[Yg]:!0,[Eh]:!0,[rd]:d[rd],[sc]:n[c]})}return yr.create(Al(n),a)}else{const a=Al(n);if(a!==null&&t)return{...n};const s=yr.create(a);return yr.assign(s,n)}}function mv(n,e=!1){return Fd(n)||oa(n)||!ei(n)||(Dc(n)>1&&yr.defineProperties(n,{set:ih,add:ih,clear:ih,delete:ih}),yr.freeze(n),e&&Ud(n,(t,a)=>{mv(a,!0)},!1)),n}function tL(){Qr(2)}var ih={[sc]:tL};function Fd(n){return n===null||!hv(n)?!0:yr.isFrozen(n)}var ad="MapSet",Wg="Patches",nb="ArrayMethods",DR={};function ao(n){const e=DR[n];return e||Qr(0,n),e}var rb=n=>!!DR[n],oc,NR=()=>oc,nL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:rb(ad)?ao(ad):void 0,arrayMethodsPlugin_:rb(nb)?ao(nb):void 0});function ib(n,e){e&&(n.patchPlugin_=ao(Wg),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function Jg(n){Zg(n),n.drafts_.forEach(rL),n.drafts_=null}function Zg(n){n===oc&&(oc=n.parent_)}var ab=n=>oc=nL(oc,n);function rL(n){const e=n[zn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sb(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[zn].modified_&&(Jg(e),Qr(4)),ei(n)&&(n=ob(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[zn].base_,n,e)}else n=ob(e,t);return iL(e,n,!0),Jg(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==CR?n:void 0}function ob(n,e){if(Fd(e))return e;const t=e[zn];if(!t)return sd(e,n.handledSet_,n);if(!Hd(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);MR(t,n)}return t.copy_}function iL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&mv(e,t)}function xR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Hd=(n,e)=>n.scope_===e,aL=[];function OR(n,e,t,a){const s=Wi(n),l=n.type_;if(a!==void 0&&Qg(s,a,l)===e){id(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;Ud(s,(p,g)=>{if(oa(g)){const v=d.get(g)||[];v.push(p),d.set(g,v)}})}const c=n.draftLocations_.get(e)??aL;for(const d of c)id(s,d,t,l)}function sL(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!Hd(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=dv(l);OR(n,l.draft_??l,c,t),MR(l,s)})}function MR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}xR(n)}}function oL(n,e,t){const{scope_:a}=n;if(oa(t)){const s=t[zn];Hd(s,a)&&s.callbacks_.push(function(){Th(n);const c=dv(s);OR(n,t,c,e)})}else ei(t)&&n.callbacks_.push(function(){const l=Wi(n);n.type_===3?l.has(t)&&sd(t,a.handledSet_,a):Qg(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&sd(Qg(n.copy_,e,n.type_),a.handledSet_,a)})}function sd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||oa(n)||e.has(n)||!ei(n)||Fd(n)||(e.add(n),Ud(n,(a,s)=>{if(oa(s)){const l=s[zn];if(Hd(l,t)){const c=dv(l);id(n,a,c,n.type_),xR(l)}}else ei(s)&&sd(s,e,t)})),n}function lL(n,e){const t=jd(n),a={type_:t?1:0,scope_:e?e.scope_:NR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=od;t&&(s=[a],l=lc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var od={get(n,e){if(e===zn)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=Wi(n);if(!tb(s,e,n.type_))return uL(n,s,e);const l=s[e];if(n.finalized_||!ei(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&eL(e))return l;if(l===pg(n.base_,e)){Th(n);const c=n.type_===1?+e:e,d=ty(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in Wi(n)},ownKeys(n){return Reflect.ownKeys(Wi(n))},set(n,e,t){const a=VR(Wi(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=pg(Wi(n),e),l=s==null?void 0:s[zn];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(ZP(t,s)&&(t!==void 0||tb(n.base_,e,n.type_)))return!0;Th(n),ey(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),oL(n,e,t)),!0},deleteProperty(n,e){return Th(n),pg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),ey(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Wi(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[Eh]:!0,[Yg]:n.type_!==1||e!=="length",[rd]:a[rd],[sc]:t[e]}},defineProperty(){Qr(11)},getPrototypeOf(n){return Al(n.base_)},setPrototypeOf(){Qr(12)}},lc={};for(let n in od){let e=od[n];lc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}lc.deleteProperty=function(n,e){return lc.set.call(this,n,e,void 0)};lc.set=function(n,e,t){return od.set.call(this,n[0],e,t,n[0])};function pg(n,e){const t=n[zn];return(t?Wi(t):n)[e]}function uL(n,e,t){var s;const a=VR(e,t);return a?sc in a?a[sc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function VR(n,e){if(!(e in n))return;let t=Al(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Al(t)}}function ey(n){n.modified_||(n.modified_=!0,n.parent_&&ey(n.parent_))}function Th(n){n.copy_||(n.assigned_=new Map,n.copy_=Xg(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var cL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(il(e)&&!il(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,v=>t.call(this,v,...g))}}il(t)||Qr(6),a!==void 0&&!il(a)&&Qr(7);let s;if(ei(e)){const l=ab(this),c=ty(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?Jg(l):Zg(l)}return ib(l,a),sb(s,l)}else if(!e||!hv(e)){if(s=t(e),s===void 0&&(s=e),s===CR&&(s=void 0),this.autoFreeze_&&mv(s,!0),a){const l=[],c=[];ao(Wg).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else Qr(1,e)},this.produceWithPatches=(e,t)=>{if(il(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},mg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),mg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),mg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){ei(n)||Qr(8),oa(n)&&(n=fL(n));const e=ab(this),t=ty(e,n,void 0);return t[zn].isManual_=!0,Zg(e),t}finishDraft(n,e){const t=n&&n[zn];(!t||!t.isManual_)&&Qr(9);const{scope_:a}=t;return ib(a,e),sb(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=ao(Wg).applyPatches_;return oa(n)?a(n,e):this.produce(n,s=>a(s,e))}};function ty(n,e,t,a){const[s,l]=zd(e)?ao(ad).proxyMap_(e,t):Bd(e)?ao(ad).proxySet_(e,t):lL(e,t);return((t==null?void 0:t.scope_)??NR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?sL(t,l,a):l.callbacks_.push(function(p){var v;(v=p.mapSetPlugin_)==null||v.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function fL(n){return oa(n)||Qr(10,n),PR(n)}function PR(n){if(!ei(n)||Fd(n))return n;const e=n[zn];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=Xg(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=Xg(n,!0);return Ud(t,(s,l)=>{id(t,s,PR(l))},a),e&&(e.finalized_=!1),t}var hL=new cL,LR=hL.produce;function kR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var dL=kR(),mL=kR,pL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?td:td.apply(null,arguments)},gL=n=>n&&typeof n.match=="function";function Yu(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(na(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>WP(a)&&a.type===n,t}var UR=class zu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,zu.prototype)}static get[Symbol.species](){return zu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new zu(...e[0].concat(this)):new zu(...e.concat(this))}};function lb(n){return ei(n)?LR(n,()=>{}):n}function ah(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function yL(n){return typeof n=="boolean"}var vL=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new UR;return t&&(yL(t)?c.push(dL):c.push(mL(t.extraArgument))),c},_L="RTK_autoBatch",ub=n=>e=>{setTimeout(e,n)},EL=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ub(10):n.type==="callback"?n.queueNotification:ub(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(v=>v()))};return Object.assign({},a,{subscribe(v){const E=()=>s&&v(),b=a.subscribe(E);return d.add(v),()=>{b(),d.delete(v)}},dispatch(v){var E;try{return s=!((E=v==null?void 0:v.meta)!=null&&E[_L]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(v)}finally{s=!0}}})},TL=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new UR(n);return a&&s.push(EL(typeof a=="object"?a:void 0)),s};function SL(n){const e=vL(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(fv(t))d=QP(t);else throw new Error(na(1));let p;typeof a=="function"?p=a(e):p=e();let g=td;s&&(g=pL({trace:!1,...typeof s=="object"&&s}));const v=XP(...p),E=TL(v);let b=typeof c=="function"?c(E):E();const C=g(...b);return RR(d,l,C)}function jR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(na(28));if(d in e)throw new Error(na(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function bL(n){return typeof n=="function"}function wL(n,e){let[t,a,s]=jR(e),l;if(bL(n))l=()=>lb(n());else{const d=lb(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:v})=>v(p)).map(({reducer:v})=>v)];return g.filter(v=>!!v).length===0&&(g=[s]),g.reduce((v,E)=>{if(E)if(oa(v)){const C=E(v,p);return C===void 0?v:C}else{if(ei(v))return LR(v,b=>E(b,p));{const b=E(v,p);if(b===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return v},d)}return c.getInitialState=l,c}var AL=(n,e)=>gL(n)?n.match(e):n(e);function RL(...n){return e=>n.some(t=>AL(t,e))}var CL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",IL=(n=21)=>{let e="",t=n;for(;t--;)e+=CL[Math.random()*64|0];return e},DL=["name","message","stack","code"],gg=class{constructor(n,e){kp(this,"_type");this.payload=n,this.meta=e}},cb=class{constructor(n,e){kp(this,"_type");this.payload=n,this.meta=e}},NL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of DL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},fb="External signal was aborted",jr=(()=>{function n(e,t,a){const s=Yu(e+"/fulfilled",(p,g,v,E)=>({payload:p,meta:{...E||{},arg:v,requestId:g,requestStatus:"fulfilled"}})),l=Yu(e+"/pending",(p,g,v)=>({payload:void 0,meta:{...v||{},arg:g,requestId:p,requestStatus:"pending"}})),c=Yu(e+"/rejected",(p,g,v,E,b)=>({payload:E,error:(a&&a.serializeError||NL)(p||"Rejected"),meta:{...b||{},arg:v,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(v,E,b)=>{const C=a!=null&&a.idGenerator?a.idGenerator(p):IL(),V=new AbortController;let j,L;function G(K){L=K,V.abort()}g&&(g.aborted?G(fb):g.addEventListener("abort",()=>G(fb),{once:!0}));const F=(async function(){var ae,Y;let K;try{let S=(ae=a==null?void 0:a.condition)==null?void 0:ae.call(a,p,{getState:E,extra:b});if(OL(S)&&(S=await S),S===!1||V.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((w,I)=>{j=()=>{I({name:"AbortError",message:L||"Aborted"})},V.signal.addEventListener("abort",j,{once:!0})});v(l(C,p,(Y=a==null?void 0:a.getPendingMeta)==null?void 0:Y.call(a,{requestId:C,arg:p},{getState:E,extra:b}))),K=await Promise.race([A,Promise.resolve(t(p,{dispatch:v,getState:E,extra:b,requestId:C,signal:V.signal,abort:G,rejectWithValue:(w,I)=>new gg(w,I),fulfillWithValue:(w,I)=>new cb(w,I)})).then(w=>{if(w instanceof gg)throw w;return w instanceof cb?s(w.payload,C,p,w.meta):s(w,C,p)})])}catch(S){K=S instanceof gg?c(null,C,p,S.payload,S.meta):c(S,C,p)}finally{j&&V.signal.removeEventListener("abort",j)}return a&&!a.dispatchConditionRejection&&c.match(K)&&K.meta.condition||v(K),K})();return Object.assign(F,{abort:G,requestId:C,arg:p,unwrap(){return F.then(xL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:RL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function xL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function OL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var ML=Symbol.for("rtk-slice-createasyncthunk");function VL(n,e){return`${n}/${e}`}function PL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[ML];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(na(11));const d=(typeof s.reducers=="function"?s.reducers(kL()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(ee,ae){const Y=typeof ee=="string"?ee:ee.type;if(!Y)throw new Error(na(12));if(Y in g.sliceCaseReducersByType)throw new Error(na(13));return g.sliceCaseReducersByType[Y]=ae,v},addMatcher(ee,ae){return g.sliceMatchers.push({matcher:ee,reducer:ae}),v},exposeAction(ee,ae){return g.actionCreators[ee]=ae,v},exposeCaseReducer(ee,ae){return g.sliceCaseReducersByName[ee]=ae,v}};p.forEach(ee=>{const ae=d[ee],Y={reducerName:ee,type:VL(l,ee),createNotation:typeof s.reducers=="function"};jL(ae)?BL(Y,ae,v,e):UL(Y,ae,v)});function E(){const[ee={},ae=[],Y=void 0]=typeof s.extraReducers=="function"?jR(s.extraReducers):[s.extraReducers],S={...ee,...g.sliceCaseReducersByType};return wL(s.initialState,A=>{for(let w in S)A.addCase(w,S[w]);for(let w of g.sliceMatchers)A.addMatcher(w.matcher,w.reducer);for(let w of ae)A.addMatcher(w.matcher,w.reducer);Y&&A.addDefaultCase(Y)})}const b=ee=>ee,C=new Map,V=new WeakMap;let j;function L(ee,ae){return j||(j=E()),j(ee,ae)}function G(){return j||(j=E()),j.getInitialState()}function F(ee,ae=!1){function Y(A){let w=A[ee];return typeof w>"u"&&ae&&(w=ah(V,Y,G)),w}function S(A=b){const w=ah(C,ae,()=>new WeakMap);return ah(w,A,()=>{const I={};for(const[N,M]of Object.entries(s.selectors??{}))I[N]=LL(M,A,()=>ah(V,A,G),ae);return I})}return{reducerPath:ee,getSelectors:S,get selectors(){return S(Y)},selectSlice:Y}}const K={name:l,reducer:L,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:G,...F(c),injectInto(ee,{reducerPath:ae,...Y}={}){const S=ae??c;return ee.inject({reducerPath:S,reducer:L},Y),{...K,...F(S,!0)}}};return K}}function LL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var co=PL();function kL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function UL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!zL(a))throw new Error(na(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Yu(n,c):Yu(n))}function jL(n){return n._reducerDefinitionType==="asyncThunk"}function zL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function BL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(na(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:v}=t,E=s(n,l,v);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||sh,pending:d||sh,rejected:p||sh,settled:g||sh})}function sh(){}function na(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const FL={positions:[],loading:!1,error:null,fetched:!1},Zs=jr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=kr(wn,"metadata","positions"),a=await wc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),zR=jr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=kr(wn,"metadata","positions");return await Md(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),HL=co({name:"positions",initialState:FL,reducers:{},extraReducers:n=>{n.addCase(Zs.pending,e=>{e.loading=!0,e.error=null}).addCase(Zs.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(Zs.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(zR.fulfilled,(e,t)=>{e.positions=t.payload})}}),qL=HL.reducer,GL={teams:[],loading:!1,error:null,fetched:!1},dl=jr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=kr(wn,"metadata","teams"),a=await wc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Sh=jr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=kr(wn,"metadata","teams");return await Md(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),BR=co({name:"teams",initialState:GL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(dl.pending,e=>{e.loading=!0,e.error=null}).addCase(dl.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(dl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Sh.pending,e=>{e.error=null}).addCase(Sh.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Sh.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:Zk}=BR.actions,KL=BR.reducer,$L=()=>{const n=ua(),{firebaseUser:e,userData:t,loading:a}=pt(c=>c.auth),{fetched:s}=pt(c=>c.teams),{fetched:l}=pt(c=>c.positions);return z.useEffect(()=>{e&&(s||n(dl()),l||n(Zs()))},[n,e,s,l]),a?O.jsx(wl,{}):e?t?t.isApproved?O.jsx(Yb,{}):O.jsx(es,{to:"/guest",replace:!0}):O.jsx(wl,{}):O.jsx(es,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=n=>{const e=QL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=z.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>z.createElement("svg",{ref:p,...XL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:FR("lucide",s),...!l&&!WL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>z.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=(n,e)=>{const t=z.forwardRef(({className:a,...s},l)=>z.createElement(JL,{ref:l,iconNode:e,className:FR(`lucide-${YL(hb(n))}`,`lucide-${n}`,a),...s}));return t.displayName=hb(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],HR=Vl("chevron-up",ZL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ek=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],qR=Vl("corner-down-right",ek);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],nk=Vl("moon",tk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],ik=Vl("panel-left-close",rk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],sk=Vl("panel-left-open",ak);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],lk=Vl("sun",ok),uk={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[]},GR=co({name:"ui",initialState:uk,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)}}}),{setMobileSidebarOpen:bh,setDesktopSidebarExpanded:ck,toggleTeamExpansion:fk}=GR.actions,hk=GR.reducer,dk=()=>{const n=z.useContext(AR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},pv=({showText:n})=>{const{theme:e,toggleTheme:t}=dk();return O.jsxs("button",{className:"theme-toggle-button",onClick:t,"aria-label":"Toggle theme",children:[e==="dark"?O.jsx(lk,{size:20}):O.jsx(nk,{size:20}),n&&O.jsx("span",{children:"Toggle theme"})]})},mk=({title:n})=>{const e=ua(),{isMobileSidebarOpen:t}=pt(a=>a.ui);return O.jsxs("header",{className:"mobile-header",children:[O.jsxs("div",{className:`mobile-header-pill ${t?"mobile-header-pill-active":""}`,onClick:()=>e(bh(!t)),children:[O.jsx("span",{className:"mobile-header-text",children:n}),O.jsx(HR,{className:`mobile-header-chevron ${t?"rotate":""}`})]}),O.jsx(pv,{})]})};var pr=(n=>(n.ROSTER="roster",n.SETTINGS="settings",n))(pr||{}),sl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(sl||{});const KR=[{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],yg=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],pk=()=>{const n=hc(),t=ti().pathname.includes("/settings")?pr.SETTINGS:pr.ROSTER,a=s=>{n(`/app/${s}`)};return O.jsx("nav",{className:"bottom-nav-container",children:O.jsx("div",{className:"bottom-nav",children:KR.map(s=>O.jsxs("button",{className:`bottom-nav-btn ${t===s.id?"bottom-nav-btn-active":""}`,onClick:()=>a(s.id),children:[O.jsx("span",{children:s.icon}),O.jsx("span",{children:s.label})]},s.id))})})},gk=()=>{var K;const n=hc(),e=ti(),t=hd(),a=ua(),{userData:s}=pt(ee=>ee.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=pt(ee=>ee.ui),{teams:d,fetched:p,loading:g}=pt(ee=>ee.teams),{fetched:v}=pt(ee=>ee.positions),E=e.pathname.includes("/settings")?pr.SETTINGS:pr.ROSTER,{teamName:b,positionName:C,section:V}=t,j=C||V;z.useEffect(()=>{p||a(dl()),v||a(Zs())},[a,p,v]);const L=z.useCallback(ee=>{n(ee)},[n]),G=ee=>{a(fk(ee))},F=()=>{const ee=E===pr.ROSTER?{label:"Roster"}:yg.find(Y=>Y.id===j)||{label:"Settings"},ae=ee?ee.label:"GIG ROSTER";return b&&j?`${b}  ${j}`:b||(j?`${ae}  ${j}`:ae)};return O.jsxs("aside",{className:"side-nav",children:[O.jsxs("div",{className:"sidebar-content",children:[O.jsxs("div",{className:"tablet-sidebar-header",children:[l&&O.jsx("h3",{children:F()}),O.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(ck(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?O.jsx(ik,{size:20}):O.jsx(sk,{size:20})})]}),O.jsxs("nav",{className:"side-menu-list",children:[E===pr.ROSTER&&g&&O.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===pr.ROSTER?(K=s==null?void 0:s.teams)==null?void 0:K.map(ee=>{var A,w;const ae=d.find(I=>I.name===ee);if(!ae)return null;const Y=s.teams.length===1,S=Y||c.includes(ae.name);return O.jsxs("div",{children:[!Y&&O.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>G(ae.name),children:[O.jsxs("div",{children:[ae.emoji," ",l&&ae.name]}),O.jsx("span",{className:"expand-icon",children:S?"":""})]}),S&&((w=(A=ae.positions)==null?void 0:A.filter(I=>!I.parentId))==null?void 0:w.map(I=>{const N=j===I.name&&b===ae.name;return O.jsxs("button",{className:`side-nav-item side-nav-item-sub ${N?"side-nav-item-active":""}`,onClick:()=>{L(`/app/roster/${ae.name}/${I.name}`),a(bh(!1))},style:{borderLeft:N?`4px solid ${I.colour}`:"4px solid transparent",backgroundColor:N?`${I.colour}15`:"transparent",color:N?I.colour:""},children:[O.jsx("span",{className:"side-emoji",children:I.emoji})," ",l&&I.name]},I.name)}))]},ae.name)}):yg.filter(ee=>!ee.adminOnly).map(ee=>O.jsxs("button",{className:`side-nav-item ${j===ee.id?"side-nav-item-active":""}`,onClick:()=>{L(`/app/settings/${ee.id}`),a(bh(!1))},children:[O.jsx("span",{className:"side-emoji",children:ee.icon})," ",l&&ee.label]},ee.id))]})]}),(s==null?void 0:s.isAdmin)&&E===pr.SETTINGS&&O.jsxs("div",{className:"admin-only-section-wrapper",children:[O.jsx("div",{className:"sidenav-menu-subheading",children:l&&O.jsx("h4",{children:"Admin Only"})}),yg.filter(ee=>ee.adminOnly).map(ee=>O.jsxs("button",{className:`side-nav-item ${j===ee.id?"side-nav-item-active":""}`,onClick:()=>{L(`/app/settings/${ee.id}`),a(bh(!1))},children:[O.jsx("span",{className:"side-emoji",children:ee.icon})," ",l&&ee.label]},ee.id))]}),O.jsx("div",{className:"sidebar-footer",children:O.jsx(pv,{showText:l})})]})},yk=()=>{const n=hc(),e=ti(),t=hd(),{userData:a}=pt(V=>V.auth),{teams:s}=pt(V=>V.teams),{isMobileSidebarOpen:l,isDesktopSidebarExpanded:c}=pt(V=>V.ui),d=e.pathname.includes("/settings")?pr.SETTINGS:pr.ROSTER,{teamName:p,positionName:g,section:v}=t,E=g||v||null;z.useEffect(()=>{if(d===pr.ROSTER&&!p&&!E){if(a!=null&&a.teams&&a.teams.length>0&&s.length>0){const V=a.teams[0],j=s.find(L=>L.name===V);j&&j.positions&&j.positions.length>0&&n(`/app/roster/${j.name}/${j.positions[0].name}`,{replace:!0})}}else d===pr.SETTINGS&&!E&&n(`/app/settings/${sl.PROFILE}`,{replace:!0})},[d,p,E,a,s,n]);const b=()=>{const V=KR.find(L=>L.id===d),j=V?V.label:"GIG ROSTER";return p&&E?`${p}  ${E}`:p||(E?`${j}  ${E}`:j)},C=["app-shell",l?"menu-open":"",c?"sidebar-expanded":"sidebar-collapsed"].filter(Boolean).join(" ");return O.jsxs(O.Fragment,{children:[O.jsx(mk,{title:b()}),O.jsxs("div",{className:C,children:[O.jsx(gk,{}),O.jsx("main",{className:"main-content",children:O.jsx("div",{className:"content-container",children:O.jsx(Yb,{})})}),O.jsx(pk,{})]})]})},_i=({children:n,nowrap:e})=>O.jsx("div",{className:`pill-group ${e?"pill-group-nowrap":""}`,children:n}),jn=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=z.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),O.jsxs("div",{className:`pill pill--text ${t?"pill-active":""} ${a?"pill-disabled":""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(v=>!v),l&&l(g))},children:[c,e&&O.jsx(HR,{style:{rotate:d?"90deg":"0"}})]})},$R=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},vk={firebaseUser:null,userData:null,loading:!0,error:null},wh=jr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=kr(wn,"users",n),a=await wc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=bl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await kV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Ah=jr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=kr(wn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=$R(s.teamPositions)),await Md(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),YR=co({name:"auth",initialState:vk,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(wh.pending,e=>{e.loading=!0,e.error=null}).addCase(wh.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(wh.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Ah.pending,e=>{e.error=null}).addCase(Ah.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Ah.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:_k,setUserData:Ek,setLoading:eU,logout:Tk}=YR.actions,Sk=YR.reducer,QR=()=>{const n=ua(),{userData:e,firebaseUser:t}=pt(K=>K.auth),a=pt(K=>K.teams.teams),[s,l]=z.useState((e==null?void 0:e.name)||""),[c,d]=z.useState((e==null?void 0:e.gender)||""),[p,g]=z.useState((e==null?void 0:e.isActive)??!0),[v,E]=z.useState((e==null?void 0:e.teams)||[]),[b,C]=z.useState((e==null?void 0:e.teamPositions)||{}),[V,j]=z.useState("idle"),L=async()=>{if(t){j("saving");try{const K={name:s,gender:c,isActive:p,teams:v,teamPositions:b};await n(Ah({uid:t.uid,data:K})).unwrap(),j("success"),setTimeout(()=>j("idle"),2e3)}catch(K){console.error(K),j("idle")}}},G=K=>{E(ee=>{const ae=ee.includes(K),Y=ae?ee.filter(S=>S!==K):[...ee,K];return C(S=>{const A={...S};return ae?delete A[K]:A[K]||(A[K]=[]),A}),Y})},F=(K,ee)=>{C(ae=>{const Y=ae[K]||[],S=Y.includes(ee)?Y.filter(A=>A!==ee):[...Y,ee];return{...ae,[K]:S}})};return e?O.jsxs("section",{className:"profile-card",children:[O.jsx("div",{className:"profile-readonly",children:O.jsxs("p",{children:[O.jsx("strong",{children:"Email:"})," ",e.email]})}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:"Name"}),O.jsx(_i,{children:O.jsx("input",{type:"text",value:s,onChange:K=>l(K.target.value),className:"form-input form-input-width-auto"})})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:"Gender"}),O.jsx(_i,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(K=>O.jsx(jn,{colour:K.colour,onClick:()=>d(K.value),isActive:c===K.value,children:K.value},K.value))})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:"My Teams"}),O.jsx(_i,{children:a.map(K=>{const ee=v.includes(K.name);return O.jsxs(jn,{onClick:()=>G(K.name),isActive:ee,children:[O.jsx("span",{children:K.emoji})," ",K.name]},K.name)})})]}),v.length>0&&O.jsxs("div",{className:"team-positions-section",children:[O.jsx("label",{className:"section-label",children:"Positions per Team"}),v.map(K=>{var ae,Y;const ee=a.find(S=>S.name===K);return ee?O.jsxs("div",{className:"team-position-group",children:[O.jsxs("div",{className:"team-position-header",children:[ee.emoji," ",ee.name]}),O.jsx(_i,{children:(Y=(ae=ee.positions)==null?void 0:ae.filter(S=>!S.parentId))==null?void 0:Y.map(S=>{var w;const A=(w=b[K])==null?void 0:w.includes(S.name);return O.jsxs(jn,{onClick:()=>F(K,S.name),isActive:A,colour:S.colour,children:[O.jsx("span",{children:S.emoji})," ",S.name]},S.name)})})]},K):null})]}),O.jsxs("div",{className:"form-group",children:[O.jsx("label",{children:"Availability Status"}),O.jsx(jn,{colour:p?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!p),isActive:!0,children:p?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),O.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),O.jsxs("div",{className:"action-container",children:[O.jsx("button",{onClick:L,disabled:V!=="idle",className:`save-button ${V}`,children:V==="saving"?"Saving...":V==="success"?"Done ":"Update Profile"}),O.jsx("button",{onClick:()=>bl.signOut(),className:"logout-btn",children:"Logout"})]})]}):O.jsx("div",{children:"Loading profile..."})},bk=()=>{const{userData:n,firebaseUser:e,loading:t}=pt(a=>a.auth);return t?O.jsx(wl,{}):e?n?n.isApproved?O.jsx(es,{to:"/app",replace:!0}):O.jsxs("div",{className:"guest-container",children:[O.jsxs("header",{className:"guest-header",children:[O.jsx("h2",{className:"brand-title",children:"God is Good"}),O.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),O.jsx("div",{className:"guest-theme-toggle-container",children:O.jsx(pv,{})})]}),O.jsx(QR,{})]}):O.jsx(wl,{}):O.jsx(es,{to:"/login",replace:!0})},wk=()=>{const{firebaseUser:n,loading:e}=pt(a=>a.auth),t=()=>Y4(bl,HP);return e?null:n?O.jsx(es,{to:"/",replace:!0}):O.jsxs("div",{className:"login-container",children:[O.jsxs("header",{className:"login-header",children:[O.jsx("h1",{className:"brand-title",children:"God is Good"}),O.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),O.jsx("div",{className:"login-button-container",children:O.jsxs("button",{onClick:t,className:"login-button google",children:[O.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},Ak={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},Rh=jr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Wy(Gy(wn,"roster")),a=await Zy(t),s={};return a.docs.forEach(l=>{const c=l.data();s[l.id]={...c,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),Ch=jr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=$A(wn);return Object.values(n).forEach(a=>{const s=kr(wn,"roster",a.id),l={...a,updatedAt:new Date};t.set(s,l)}),await t.commit(),n}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),XR=co({name:"roster",initialState:Ak,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],v=l.findIndex(V=>g.includes(V)),E=v>=0?l[v]:null;let b=null;E===null?b=l[0]:v<l.length-1?b=l[v+1]:b=null;const C=g.filter(V=>!l.includes(V));if(b)if(C.length<c)C.push(b);else{n.error=`User already has ${c} assignment(s) in this team.`;return}C.length===0?delete p.teams[a][s]:p.teams[a][s]=C,n.dirtyEntries[t]=p},resetRosterEdits(n){n.dirtyEntries={},n.error=null}},extraReducers:n=>{n.addCase(Rh.pending,e=>{e.loading=!0,e.error=null}).addCase(Rh.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(Rh.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Ch.pending,e=>{e.saving=!0,e.error=null}).addCase(Ch.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(Ch.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:tU,updateLocalAssignment:Rk,resetRosterEdits:Ck}=XR.actions,Ik=XR.reducer,Dk=n=>{const e=[],t=new Date;t.setHours(0,0,0,0);const a=t.getFullYear(),s=new Date(a,11,31);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(v=>l[v]),d=new Date(t);let p=!1;for(;!p;)if(c.includes(d.getDay()))p=!0;else if(d.setDate(d.getDate()+1),d.getFullYear()>a)return[];const g=new Date(d);for(;g.getTime()<=s.getTime();)c.includes(g.getDay())&&e.push(new Date(g)),g.setDate(g.getDate()+1);return e.sort((v,E)=>v.getTime()-E.getTime()),e.map(v=>v.toISOString())},Nk={users:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,error:null},Ih=jr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(C=>C.parentId===e),p=[e,...c.map(C=>C.name)].map(C=>`${n}|${C}`),g=Gy(wn,"users"),v=Wy(g,VV("indexedAssignments","array-contains-any",p)),E=await Zy(v),b=[];return E.forEach(C=>{b.push(C.data())}),b.sort((C,V)=>(C.name||"").localeCompare(V.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Dh=jr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=kr(wn,"metadata","teams"),a=await wc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),xk=co({name:"rosterView",initialState:Nk,reducers:{},extraReducers:n=>{n.addCase(Ih.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Ih.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Ih.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Dh.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Dh.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Dk(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Dh.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),Ok=xk.reducer,Mk=()=>{const n=ua(),{teamName:e,positionName:t}=hd(),{users:a,rosterDates:s,loadingUsers:l,loadingTeam:c,error:d}=pt(w=>w.rosterView),{entries:p,dirtyEntries:g,saving:v,error:E}=pt(w=>w.roster),{teams:b}=pt(w=>w.teams),{positions:C}=pt(w=>w.positions),[V,j]=z.useState(null),L=Object.keys(g).length>0,G=z.useMemo(()=>C.find(w=>w.name===t),[C,t]),F=z.useMemo(()=>{const w=[...a];return G!=null&&G.sortByGender?w.sort((I,N)=>I.gender===N.gender?(I.name||"").localeCompare(N.name||""):I.gender==="Male"?-1:N.gender==="Male"?1:(I.gender||"").localeCompare(N.gender||"")):w},[a,G]);z.useEffect(()=>{n(Rh())},[n]),z.useEffect(()=>{t&&e&&n(Ih({teamName:e,positionName:t}))},[t,e,n]),z.useEffect(()=>{e&&n(Dh(e))},[e,n]);const K=z.useCallback((w,I)=>{if(!e||!t)return!1;const N=w.split("T")[0],M=g[N]||p[N],x=b.find(De=>De.name===e),Ae=(x==null?void 0:x.maxConflict)||1;if(!M||!M.teams[e]||!M.teams[e][I])return!1;const ke=M.teams[e][I],Q=C.filter(De=>De.parentId===t),ce=[t,...Q.map(De=>De.name)];return ke.some(De=>ce.includes(De))?!1:ke.length>=Ae},[e,t,g,p,b,C]),ee=z.useCallback((w,I,N,M)=>{if(!e||!t||K(w,I)){j({row:N,col:M});return}j({row:N,col:M});const x=b.find(ce=>ce.name===e),Ae=(x==null?void 0:x.maxConflict)||1,ke=C.filter(ce=>ce.parentId===t),Q=[t,...ke.map(ce=>ce.name)];n(Rk({date:w.split("T")[0],teamName:e,userIdentifier:I,positionGroupNames:Q,maxConflict:Ae}))},[n,e,t,K,b,C]),ae=z.useCallback(()=>{n(Ch(g))},[n,g]),Y=z.useCallback(()=>{n(Ck())},[n]),S=(w,I)=>{const N=w.split("T")[0],M=g[N]||p[N];if(!M||!e||!M.teams[e]||!M.teams[e][I])return"-";const x=M.teams[e][I];return O.jsx("div",{className:"assigned-positions",children:x.map(Ae=>{const ke=C.find(Q=>Q.name===Ae);return O.jsx("span",{title:Ae,className:"pos-emoji",children:(ke==null?void 0:ke.emoji)||""},Ae)})})};if(z.useEffect(()=>{const w=I=>{if(!V)return;const{row:N,col:M}=V;switch(I.key){case"ArrowUp":I.preventDefault(),N>0&&j({row:N-1,col:M});break;case"ArrowDown":I.preventDefault(),N<s.length-1&&j({row:N+1,col:M});break;case"ArrowLeft":I.preventDefault(),M>0&&j({row:N,col:M-1});break;case"ArrowRight":I.preventDefault(),M<F.length-1&&j({row:N,col:M+1});break;case"Tab":I.preventDefault(),I.shiftKey?N>0&&j({row:N-1,col:M}):N<s.length-1&&j({row:N+1,col:M});break;case" ":{I.preventDefault();const x=s[N],Ae=F[M];Ae!=null&&Ae.email&&ee(x,Ae.email,N,M);break}case"Enter":L&&(I.preventDefault(),ae());break;case"Escape":L&&(I.preventDefault(),Y());break}};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[V,s,F,L,ee,ae,Y]),l||c)return O.jsx(Ic,{});const A=d||E;return A?O.jsxs("div",{className:"roster-table-error",children:["Error: ",A]}):F.length===0?O.jsx("div",{className:"roster-table-loading",children:"No users found for this position."}):O.jsxs("div",{className:"roster-table-wrapper",children:[O.jsx("div",{className:"roster-table-container",children:O.jsxs("table",{className:"roster-table",children:[O.jsx("thead",{children:O.jsxs("tr",{children:[O.jsx("th",{className:"roster-table-header-cell",children:"Date"}),F.map(w=>O.jsxs("th",{className:"roster-table-header-cell",children:[w.name,(G==null?void 0:G.sortByGender)&&O.jsxs("span",{className:"gender-label",children:["(",w.gender==="Male"?"M":w.gender==="Female"?"F":"?",")"]})]},w.email))]})}),O.jsx("tbody",{children:s.map((w,I)=>O.jsxs("tr",{children:[O.jsx("td",{className:"date-cell",children:new Date(w).toLocaleDateString()}),F.map((N,M)=>{const x=(V==null?void 0:V.row)===I&&(V==null?void 0:V.col)===M,Ae=N.email?K(w,N.email):!1;return O.jsx("td",{className:`roster-cell ${Ae?"disabled":"clickable"} ${x?"focused":""}`,onClick:()=>N.email&&ee(w,N.email,I,M),tabIndex:0,onFocus:()=>j({row:I,col:M}),children:N.email&&S(w,N.email)},N.email)})]},w))})]})}),L&&O.jsx("div",{className:"roster-save-footer",children:O.jsxs("div",{className:"save-footer-content",children:[O.jsx("span",{className:"changes-label",children:"You have unsaved changes"}),O.jsxs("div",{className:"save-footer-actions",children:[O.jsx("button",{className:"cancel-btn",onClick:Y,disabled:v,children:"Discard"}),O.jsx("button",{className:"save-btn",onClick:ae,disabled:v,children:v?"Saving...":"Save Roster"})]})]})})]})},Vk=()=>O.jsx("div",{className:"roster-page",style:{height:"100%"},children:O.jsx(Mk,{})}),Pk=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>O.jsx("th",{className:s?"sticky-col":void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),Jt=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>O.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?"sticky-col":""}
`,children:a}),Vr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>O.jsxs(Jt,{isSticky:s,children:[c&&O.jsx(qR,{}),O.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),db=({name:n,value:e,placeholder:t,onChange:a})=>O.jsxs(Jt,{className:"color-picker-group",children:[O.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),O.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),gv=({headers:n,children:e})=>O.jsx("div",{className:"app-table-container",children:O.jsxs("table",{className:"app-table",children:[O.jsx("thead",{children:O.jsx("tr",{children:n.map((t,a)=>O.jsx(Pk,{...t},a))})}),O.jsx("tbody",{children:e})]})}),vg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},Lk=()=>{const n=ua(),{positions:e,fetched:t,loading:a}=pt(L=>L.positions),[s,l]=z.useState(e),[c,d]=z.useState(vg),[p,g]=z.useState("idle");z.useEffect(()=>{t||n(Zs())},[n,t]),z.useEffect(()=>{l(e)},[e]);const v=(L,G,F)=>{const K=[...s];K[L]={...K[L],[G]:F},l(K)},E=(L,G)=>{const F=[...s],K=F[L],ee=K.parentId,ae=Y=>{const S=F[Y];if(!S)return{block:[],startIndex:-1,endIndex:-1};const A=[],w=[S],I=new Set;let N=Y,M=Y,x=0;for(;x<w.length;){const ke=w[x++];I.has(ke.name)||(I.add(ke.name),A.push(ke),F.forEach((Q,ce)=>{Q.parentId===ke.name&&!I.has(Q.name)&&(w.push(Q),N=Math.min(N,ce),M=Math.max(M,ce))}))}return{block:A,startIndex:N,endIndex:M}};if(ee){const Y=F.filter(x=>x.parentId===ee),A=Y.findIndex(x=>x.name===K.name)+(G==="up"?-1:1);if(A<0||A>=Y.length)return;const w=Y[A],I=F.indexOf(K),N=F.indexOf(w);if(I===-1||N===-1)return;const M=[...F];M[I]=w,M[N]=K,l(M)}else{const Y=ae(L),{block:S,startIndex:A,endIndex:w}=Y;if(!S||S.length===0)return;if(G==="up"){if(A===0)return;let I=A-1;for(;I>=0&&F[I].parentId;)I--;if(I<0)return;const N=ae(I),{block:M,startIndex:x}=N;if(!M||M.length===0)return;const Ae=[...F.slice(0,x),...S,...M,...F.slice(w+1)].filter(Boolean);l(Ae)}else{if(w===F.length-1)return;let I=w+1;for(;I<F.length&&F[I].parentId;)I++;if(I>=F.length)return;const N=ae(I),{block:M,startIndex:x}=N;if(!M||M.length===0)return;const Ae=[...F.slice(0,A),...M,...S,...F.slice(x+M.length)].filter(Boolean);l(Ae)}}},b=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(vg)},C=L=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const G=s[L];let F=s.filter((K,ee)=>ee!==L);G.parentId||(F=F.filter(K=>K.parentId!==G.name)),l(F)}},V=async()=>{g("saving");try{const L=s.map(G=>({...G,parentId:G.parentId===void 0?void 0:G.parentId}));await n(zR(L)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(L){console.error("Save Error:",L),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},j=L=>{l(G=>{const F={...vg,parentId:L},K=G.findIndex(Y=>Y.name===L);if(K===-1)return[...G,F];let ee=K;for(;ee+1<G.length&&G[ee+1].parentId===L;)ee++;return[...G.slice(0,ee+1),F,...G.slice(ee+1)]})};return a?O.jsx(Ic,{}):O.jsxs(O.Fragment,{children:[O.jsxs(gv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((L,G)=>O.jsxs("tr",{children:[O.jsx(Jt,{textAlign:"center",children:L.parentId?O.jsx(qR,{}):O.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[O.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(G,"up"),disabled:G===0,children:""}),O.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(G,"down"),disabled:G===s.length-1,children:""})]})}),O.jsx(Vr,{name:`emoji-${G}`,value:L.emoji,onChange:F=>v(G,"emoji",F.target.value)}),O.jsx(Vr,{name:`name-${G}`,value:L.name,onChange:F=>v(G,"name",F.target.value)}),O.jsx(db,{name:`colour-${G}`,value:L.colour,onChange:F=>v(G,"colour",F.target.value)}),O.jsx(Jt,{textAlign:"center",children:O.jsx(jn,{colour:L.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:L.sortByGender,onClick:()=>v(G,"sortByGender",!L.sortByGender),children:L.sortByGender?"YES":"NO"})}),O.jsx(Jt,{textAlign:"center",children:!L.parentId&&O.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>j(L.name),title:"Add Child Position",children:"+"})}),O.jsx(Jt,{textAlign:"center",children:O.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>C(G),children:""})})]},`${L.emoji}-${G}`)),O.jsxs("tr",{className:"pos-row-new",children:[O.jsx("td",{className:"",children:""}),O.jsx(Vr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:L=>d({...c,emoji:L.target.value})}),O.jsx(Vr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:L=>d({...c,name:L.target.value})}),O.jsx(db,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:L=>d({...c,colour:L.target.value})}),O.jsx(Jt,{textAlign:"center",children:O.jsx(jn,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),O.jsx(Jt,{textAlign:"center",children:O.jsx("button",{onClick:b,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),O.jsx("div",{className:"settings-footer",children:O.jsx("button",{className:`save-button ${p}`,onClick:V,disabled:p!=="idle",children:p==="saving"?"Saving...":p==="success"?"Done ":"Save"})})]})},mb={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},pb=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kk=()=>{var ee,ae;const n=ua(),{teams:e,fetched:t,loading:a}=pt(Y=>Y.teams),{positions:s,fetched:l,loading:c}=pt(Y=>Y.positions),[d,p]=z.useState(e),[g,v]=z.useState(mb),[E,b]=z.useState("idle");z.useEffect(()=>{t||n(dl()),l||n(Zs())},[n,t,l]),z.useEffect(()=>{p(e)},[e]);const C=(Y,S,A)=>{const w=[...d];w[Y]={...w[Y],[S]:A},p(w)},V=(Y,S)=>{const A=[...d],w=S==="up"?Y-1:Y+1;if(w<0||w>=A.length)return;const I=A[Y];A[Y]=A[w],A[w]=I,p(A)},j=(Y,S)=>{const A=d.map((w,I)=>{if(I!==Y)return w;const N=w.positions||[],M=N.find(x=>x.name===S.name)?N.filter(x=>x.name!==S.name):[...N,S];return{...w,positions:M}});p(A)},L=(Y,S)=>{const A=d.map((w,I)=>{if(I!==Y)return w;const N=w.preferredDays||[],M=N.includes(S)?N.filter(x=>x!==S):[...N,S];return{...w,preferredDays:M}});p(A)},G=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),v(mb)},F=Y=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((S,A)=>A!==Y))},K=async()=>{b("saving");try{await n(Sh(d)).unwrap(),b("success"),setTimeout(()=>b("idle"),2e3)}catch(Y){console.error("Save Error:",Y),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),b("idle")}};return a||c?O.jsx(Ic,{}):O.jsxs(O.Fragment,{children:[O.jsxs(gv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((Y,S)=>{var A,w;return O.jsxs("tr",{children:[O.jsxs(Jt,{children:[" ",O.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[O.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>V(S,"up"),disabled:S===0,children:""}),O.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>V(S,"down"),disabled:S===d.length-1,children:""})]})]}),O.jsx(Vr,{name:`team-emoji-${S}`,value:Y.emoji,onChange:I=>C(S,"emoji",I.target.value)}),O.jsx(Vr,{name:`team-name-${S}`,value:Y.name,onChange:I=>C(S,"name",I.target.value)}),O.jsx(Vr,{name:`team-maxConflict-${S}`,value:((A=Y.maxConflict)==null?void 0:A.toString())||"1",type:"number",onChange:I=>C(S,"maxConflict",parseInt(I.target.value)||1)}),O.jsx(Jt,{children:O.jsx(_i,{nowrap:!0,children:(w=s==null?void 0:s.filter(I=>!I.parentId))==null?void 0:w.map(I=>{var M;const N=(M=Y.positions)==null?void 0:M.some(x=>x.name===I.name);return O.jsx(jn,{colour:I.colour,isActive:N,onClick:()=>j(S,I),children:I.emoji},I.name)})})}),O.jsx(Jt,{children:O.jsx(_i,{nowrap:!0,children:pb.map(I=>{var M;const N=(M=Y.preferredDays)==null?void 0:M.includes(I);return O.jsx(jn,{isActive:N,onClick:()=>L(S,I),children:I.substring(0,3)},I)})})}),O.jsx(Jt,{children:O.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>F(S),children:""})})]},`${Y.emoji}-${S}`)}),O.jsxs("tr",{className:"team-row-new",children:[O.jsx("td",{className:"",children:""}),O.jsx(Vr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:Y=>v({...g,emoji:Y.target.value})}),O.jsx(Vr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:Y=>v({...g,name:Y.target.value})}),O.jsx(Vr,{name:"new-team-maxConflict",value:((ee=g.maxConflict)==null?void 0:ee.toString())||"1",type:"number",onChange:Y=>v({...g,maxConflict:parseInt(Y.target.value)||1})}),O.jsx(Jt,{children:O.jsx(_i,{nowrap:!0,children:(ae=s==null?void 0:s.filter(Y=>!Y.parentId))==null?void 0:ae.map(Y=>{var A;const S=(A=g.positions)==null?void 0:A.some(w=>w.name===Y.name);return O.jsx(jn,{colour:Y.colour,isActive:S,onClick:()=>v(w=>{const I=w.positions||[],N=I.some(M=>M.name===Y.name)?I.filter(M=>M.name!==Y.name):[...I,Y];return{...w,positions:N}}),children:Y.emoji},`new-${Y.name}`)})})}),O.jsx(Jt,{children:O.jsx(_i,{nowrap:!0,children:pb.map(Y=>{var A;const S=(A=g.preferredDays)==null?void 0:A.includes(Y);return O.jsx(jn,{isActive:S,onClick:()=>v(w=>{const I=w.preferredDays||[],N=I.includes(Y)?I.filter(M=>M!==Y):[...I,Y];return{...w,preferredDays:N}}),children:Y.substring(0,3)},`new-team-${Y}`)})})}),O.jsx(Jt,{children:O.jsx("button",{onClick:G,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),O.jsx("div",{className:"settings-footer",children:O.jsx("button",{className:`save-button ${E}`,onClick:K,disabled:E!=="idle",children:E==="saving"?"Saving...":E==="success"?"Done ":"Save All Team Changes"})})]})},Uk={allUsers:[],loading:!1,saving:!1,error:null},Nh=jr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Gy(wn,"users"),a=Wy(t),s=await Zy(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),xh=jr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=$A(wn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=$R(l.teamPositions)),t.update(kr(wn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),WR=co({name:"userManagement",initialState:Uk,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}}},extraReducers:n=>{n.addCase(Nh.pending,e=>{e.loading=!0,e.error=null}).addCase(Nh.fulfilled,(e,t)=>{e.allUsers=t.payload,e.loading=!1}).addCase(Nh.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(xh.pending,e=>{e.saving=!0,e.error=null}).addCase(xh.fulfilled,e=>{e.saving=!1}).addCase(xh.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:jk,toggleUserTeam:zk,toggleUserTeamPosition:Bk}=WR.actions,Fk=WR.reducer,Hk=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=ua(),s=(p,g)=>{a(jk({id:n.id,field:p,value:g}))},l=p=>{a(zk({userId:n.id,teamName:p}))},c=(p,g)=>{a(Bk({userId:n.id,teamName:p,posName:g}))};return O.jsxs("tr",{children:[O.jsx(Vr,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),O.jsx(Vr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),O.jsx(Jt,{children:O.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[O.jsx("option",{value:"",children:"-"}),O.jsx("option",{value:"Male",children:"Male"}),O.jsx("option",{value:"Female",children:"Female"})]})}),O.jsx(Jt,{children:O.jsx(_i,{children:e.map(p=>{var v;const g=(v=n.teams)==null?void 0:v.includes(p.name);return O.jsxs(jn,{onClick:()=>l(p.name),isActive:g,children:[O.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),O.jsx(Jt,{children:(d=n.teams)==null?void 0:d.map(p=>{var v,E;const g=e.find(b=>b.name===p);return g?O.jsxs("div",{style:{marginBottom:"12px"},children:[O.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),O.jsx(_i,{children:(E=(v=g.positions)==null?void 0:v.filter(b=>!b.parentId))==null?void 0:E.map(b=>{var V,j;const C=(j=(V=n.teamPositions)==null?void 0:V[p])==null?void 0:j.includes(b.name);return O.jsx(jn,{colour:b.colour,isActive:C,onClick:()=>c(p,b.name),children:b.emoji},b.name)})})]},p):null})}),O.jsx(Jt,{children:O.jsx(jn,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),O.jsx(Jt,{children:O.jsx(jn,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),O.jsx(Jt,{children:O.jsx(jn,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},qk=()=>{const n=ua(),{allUsers:e,loading:t,saving:a,error:s}=pt(d=>d.userManagement),l=pt(d=>d.teams.teams);z.useEffect(()=>{n(Nh())},[n]);const c=()=>{n(xh(e))};return t?O.jsx(Ic,{}):s?O.jsxs("div",{children:["Error: ",s]}):O.jsxs(O.Fragment,{children:[O.jsx(gv,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(d=>O.jsx(Hk,{user:d,availableTeams:l,adminEmail:"chris.sm.kang542@gmail.com"},d.id))}),O.jsx("div",{className:"settings-footer",children:O.jsx("button",{className:`save-button ${a?"saving":""}`,onClick:c,disabled:a,children:a?"Saving Changes...":"Save All User Changes"})})]})},Gk=()=>{const{userData:n}=pt(t=>t.auth),{section:e}=hd();return n?O.jsxs("div",{className:"settings-container",children:[e===sl.PROFILE&&O.jsx(QR,{}),e===sl.USER_MANAGEMENT&&(n.isAdmin?O.jsx(qk,{}):O.jsx("p",{children:"Access Denied"})),e===sl.TEAMS&&(n.isAdmin?O.jsx(kk,{}):O.jsx("p",{children:"Access Denied"})),e===sl.POSITIONS&&(n.isAdmin?O.jsx(Lk,{}):O.jsx("p",{children:"Access Denied"}))]}):null},Kk=[{path:"/",element:O.jsx(GP,{})},{path:"/login",element:O.jsx(wk,{})},{path:"/guest",element:O.jsx(bk,{})},{path:"/app",element:O.jsx($L,{}),children:[{path:"",element:O.jsx(yk,{}),children:[{path:"roster/:teamName?/:positionName?",element:O.jsx(Vk,{})},{path:"settings/:section?",element:O.jsx(Gk,{})}]}]}];let gb=!1;const $k=n=>{if(!gb){gb=!0;let e;I4(bl,t=>{if(t){n.dispatch(_k(t)),n.dispatch(wh(t.uid));const a=kr(wn,"users",t.uid);e=UV(a,s=>{if(s.exists()){const l=s.data();n.dispatch(Ek(l))}})}else n.dispatch(Tk()),e&&e()})}return e=>t=>e(t)},Yk=SL({reducer:{auth:Sk,positions:qL,roster:Ik,rosterView:Ok,teams:KL,ui:hk,userManagement:Fk},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser"],ignoredPaths:["auth.firebaseUser"]}}).concat($k)}),Qk=T2(Kk);BC.createRoot(document.getElementById("root")).render(O.jsx(vb.StrictMode,{children:O.jsx(nI,{store:Yk,children:O.jsx(L2,{children:O.jsx(qP,{children:O.jsx(V2,{router:Qk})})})})}));
