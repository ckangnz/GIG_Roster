var PC=Object.defineProperty;var LC=(n,e,t)=>e in n?PC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Fp=(n,e,t)=>LC(n,typeof e!="symbol"?e+"":e,t);function kC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function SS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hp={exports:{}},Nu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function UC(){if(BT)return Nu;BT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Nu.Fragment=e,Nu.jsx=t,Nu.jsxs=t,Nu}var FT;function jC(){return FT||(FT=1,Hp.exports=UC()),Hp.exports}var A=jC(),qp={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT;function zC(){if(HT)return Qe;HT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function C(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,V={};function q(j,re,me){this.props=j,this.context=re,this.refs=V,this.updater=me||U}q.prototype.isReactComponent={},q.prototype.setState=function(j,re){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,re,"setState")},q.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function H(){}H.prototype=q.prototype;function F(j,re,me){this.props=j,this.context=re,this.refs=V,this.updater=me||U}var X=F.prototype=new H;X.constructor=F,B(X,q.prototype),X.isPureReactComponent=!0;var ie=Array.isArray;function Y(){}var S={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(j,re,me){var pe=me.ref;return{$$typeof:n,type:j,key:re,ref:pe!==void 0?pe:null,props:me}}function N(j,re){return I(j.type,re,j.props)}function O(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function M(j){var re={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(me){return re[me]})}var x=/\/+/g;function Ee(j,re){return typeof j=="object"&&j!==null&&j.key!=null?M(""+j.key):re.toString(36)}function De(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Y,Y):(j.status="pending",j.then(function(re){j.status==="pending"&&(j.status="fulfilled",j.value=re)},function(re){j.status==="pending"&&(j.status="rejected",j.reason=re)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function $(j,re,me,pe,be){var Oe=typeof j;(Oe==="undefined"||Oe==="boolean")&&(j=null);var Ke=!1;if(j===null)Ke=!0;else switch(Oe){case"bigint":case"string":case"number":Ke=!0;break;case"object":switch(j.$$typeof){case n:case e:Ke=!0;break;case v:return Ke=j._init,$(Ke(j._payload),re,me,pe,be)}}if(Ke)return be=be(j),Ke=pe===""?"."+Ee(j,0):pe,ie(be)?(me="",Ke!=null&&(me=Ke.replace(x,"$&/")+"/"),$(be,re,me,"",function(qn){return qn})):be!=null&&(O(be)&&(be=N(be,me+(be.key==null||j&&j.key===be.key?"":(""+be.key).replace(x,"$&/")+"/")+Ke)),re.push(be)),1;Ke=0;var We=pe===""?".":pe+":";if(ie(j))for(var rt=0;rt<j.length;rt++)pe=j[rt],Oe=We+Ee(pe,rt),Ke+=$(pe,re,me,Oe,be);else if(rt=C(j),typeof rt=="function")for(j=rt.call(j),rt=0;!(pe=j.next()).done;)pe=pe.value,Oe=We+Ee(pe,rt++),Ke+=$(pe,re,me,Oe,be);else if(Oe==="object"){if(typeof j.then=="function")return $(De(j),re,me,pe,be);throw re=String(j),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Ke}function ue(j,re,me){if(j==null)return j;var pe=[],be=0;return $(j,pe,"","",function(Oe){return re.call(me,Oe,be++)}),pe}function de(j){if(j._status===-1){var re=j._result;re=re(),re.then(function(me){(j._status===0||j._status===-1)&&(j._status=1,j._result=me)},function(me){(j._status===0||j._status===-1)&&(j._status=2,j._result=me)}),j._status===-1&&(j._status=0,j._result=re)}if(j._status===1)return j._result.default;throw j._result}var Ve=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ne={map:ue,forEach:function(j,re,me){ue(j,function(){re.apply(this,arguments)},me)},count:function(j){var re=0;return ue(j,function(){re++}),re},toArray:function(j){return ue(j,function(re){return re})||[]},only:function(j){if(!O(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Qe.Activity=E,Qe.Children=Ne,Qe.Component=q,Qe.Fragment=t,Qe.Profiler=s,Qe.PureComponent=F,Qe.StrictMode=a,Qe.Suspense=p,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return S.H.useMemoCache(j)}},Qe.cache=function(j){return function(){return j.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(j,re,me){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var pe=B({},j.props),be=j.key;if(re!=null)for(Oe in re.key!==void 0&&(be=""+re.key),re)!w.call(re,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&re.ref===void 0||(pe[Oe]=re[Oe]);var Oe=arguments.length-2;if(Oe===1)pe.children=me;else if(1<Oe){for(var Ke=Array(Oe),We=0;We<Oe;We++)Ke[We]=arguments[We+2];pe.children=Ke}return I(j.type,be,pe)},Qe.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Qe.createElement=function(j,re,me){var pe,be={},Oe=null;if(re!=null)for(pe in re.key!==void 0&&(Oe=""+re.key),re)w.call(re,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(be[pe]=re[pe]);var Ke=arguments.length-2;if(Ke===1)be.children=me;else if(1<Ke){for(var We=Array(Ke),rt=0;rt<Ke;rt++)We[rt]=arguments[rt+2];be.children=We}if(j&&j.defaultProps)for(pe in Ke=j.defaultProps,Ke)be[pe]===void 0&&(be[pe]=Ke[pe]);return I(j,Oe,be)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(j){return{$$typeof:d,render:j}},Qe.isValidElement=O,Qe.lazy=function(j){return{$$typeof:v,_payload:{_status:-1,_result:j},_init:de}},Qe.memo=function(j,re){return{$$typeof:g,type:j,compare:re===void 0?null:re}},Qe.startTransition=function(j){var re=S.T,me={};S.T=me;try{var pe=j(),be=S.S;be!==null&&be(me,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(Y,Ve)}catch(Oe){Ve(Oe)}finally{re!==null&&me.types!==null&&(re.types=me.types),S.T=re}},Qe.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},Qe.use=function(j){return S.H.use(j)},Qe.useActionState=function(j,re,me){return S.H.useActionState(j,re,me)},Qe.useCallback=function(j,re){return S.H.useCallback(j,re)},Qe.useContext=function(j){return S.H.useContext(j)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(j,re){return S.H.useDeferredValue(j,re)},Qe.useEffect=function(j,re){return S.H.useEffect(j,re)},Qe.useEffectEvent=function(j){return S.H.useEffectEvent(j)},Qe.useId=function(){return S.H.useId()},Qe.useImperativeHandle=function(j,re,me){return S.H.useImperativeHandle(j,re,me)},Qe.useInsertionEffect=function(j,re){return S.H.useInsertionEffect(j,re)},Qe.useLayoutEffect=function(j,re){return S.H.useLayoutEffect(j,re)},Qe.useMemo=function(j,re){return S.H.useMemo(j,re)},Qe.useOptimistic=function(j,re){return S.H.useOptimistic(j,re)},Qe.useReducer=function(j,re,me){return S.H.useReducer(j,re,me)},Qe.useRef=function(j){return S.H.useRef(j)},Qe.useState=function(j){return S.H.useState(j)},Qe.useSyncExternalStore=function(j,re,me){return S.H.useSyncExternalStore(j,re,me)},Qe.useTransition=function(){return S.H.useTransition()},Qe.version="19.2.4",Qe}var qT;function dd(){return qT||(qT=1,qp.exports=zC()),qp.exports}var P=dd();const AS=SS(P),BC=kC({__proto__:null,default:AS},[P]);var Gp={exports:{}},xu={},$p={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function FC(){return GT||(GT=1,(function(n){function e($,ue){var de=$.length;$.push(ue);e:for(;0<de;){var Ve=de-1>>>1,Ne=$[Ve];if(0<s(Ne,ue))$[Ve]=ue,$[de]=Ne,de=Ve;else break e}}function t($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var ue=$[0],de=$.pop();if(de!==ue){$[0]=de;e:for(var Ve=0,Ne=$.length,j=Ne>>>1;Ve<j;){var re=2*(Ve+1)-1,me=$[re],pe=re+1,be=$[pe];if(0>s(me,de))pe<Ne&&0>s(be,me)?($[Ve]=be,$[pe]=de,Ve=pe):($[Ve]=me,$[re]=de,Ve=re);else if(pe<Ne&&0>s(be,de))$[Ve]=be,$[pe]=de,Ve=pe;else break e}}return ue}function s($,ue){var de=$.sortIndex-ue.sortIndex;return de!==0?de:$.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],v=1,E=null,b=3,C=!1,U=!1,B=!1,V=!1,q=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function X($){for(var ue=t(g);ue!==null;){if(ue.callback===null)a(g);else if(ue.startTime<=$)a(g),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(g)}}function ie($){if(B=!1,X($),!U)if(t(p)!==null)U=!0,Y||(Y=!0,M());else{var ue=t(g);ue!==null&&De(ie,ue.startTime-$)}}var Y=!1,S=-1,w=5,I=-1;function N(){return V?!0:!(n.unstable_now()-I<w)}function O(){if(V=!1,Y){var $=n.unstable_now();I=$;var ue=!0;try{e:{U=!1,B&&(B=!1,H(S),S=-1),C=!0;var de=b;try{t:{for(X($),E=t(p);E!==null&&!(E.expirationTime>$&&N());){var Ve=E.callback;if(typeof Ve=="function"){E.callback=null,b=E.priorityLevel;var Ne=Ve(E.expirationTime<=$);if($=n.unstable_now(),typeof Ne=="function"){E.callback=Ne,X($),ue=!0;break t}E===t(p)&&a(p),X($)}else a(p);E=t(p)}if(E!==null)ue=!0;else{var j=t(g);j!==null&&De(ie,j.startTime-$),ue=!1}}break e}finally{E=null,b=de,C=!1}ue=void 0}}finally{ue?M():Y=!1}}}var M;if(typeof F=="function")M=function(){F(O)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,Ee=x.port2;x.port1.onmessage=O,M=function(){Ee.postMessage(null)}}else M=function(){q(O,0)};function De($,ue){S=q(function(){$(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function($){switch(b){case 1:case 2:case 3:var ue=3;break;default:ue=b}var de=b;b=ue;try{return $()}finally{b=de}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var de=b;b=$;try{return ue()}finally{b=de}},n.unstable_scheduleCallback=function($,ue,de){var Ve=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ve+de:Ve):de=Ve,$){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=de+Ne,$={id:v++,callback:ue,priorityLevel:$,startTime:de,expirationTime:Ne,sortIndex:-1},de>Ve?($.sortIndex=de,e(g,$),t(p)===null&&$===t(g)&&(B?(H(S),S=-1):B=!0,De(ie,de-Ve))):($.sortIndex=Ne,e(p,$),U||C||(U=!0,Y||(Y=!0,M()))),$},n.unstable_shouldYield=N,n.unstable_wrapCallback=function($){var ue=b;return function(){var de=b;b=ue;try{return $.apply(this,arguments)}finally{b=de}}}})(Kp)),Kp}var $T;function HC(){return $T||($T=1,$p.exports=FC()),$p.exports}var Yp={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function qC(){if(KT)return Un;KT=1;var n=dd();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Un.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,v)},Un.flushSync=function(p){var g=c.T,v=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=v,a.d.f()}},Un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Un.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:C}):v==="script"&&a.d.X(p,{crossOrigin:E,integrity:b,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Un.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Un.requestFormReset=function(p){a.d.r(p)},Un.unstable_batchedUpdates=function(p,g){return p(g)},Un.useFormState=function(p,g,v){return c.H.useFormState(p,g,v)},Un.useFormStatus=function(){return c.H.useHostTransitionStatus()},Un.version="19.2.4",Un}var YT;function wS(){if(YT)return Yp.exports;YT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yp.exports=qC(),Yp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function GC(){if(QT)return xu;QT=1;var n=HC(),e=dd(),t=wS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var _=!1,R=f.child;R;){if(R===o){_=!0,o=f,u=m;break}if(R===u){_=!0,u=f,o=m;break}R=R.sibling}if(!_){for(R=m.child;R;){if(R===o){_=!0,o=m,u=f;break}if(R===u){_=!0,u=m,o=f;break}R=R.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),F=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function Ee(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case q:return"Profiler";case V:return"StrictMode";case ie:return"Suspense";case Y:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case U:return"Portal";case F:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case X:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return i=r.displayName||null,i!==null?i:Ee(r.type)||"Memo";case w:i=r._payload,r=r._init;try{return Ee(r(i))}catch{}}return null}var De=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ve=[],Ne=-1;function j(r){return{current:r}}function re(r){0>Ne||(r.current=Ve[Ne],Ve[Ne]=null,Ne--)}function me(r,i){Ne++,Ve[Ne]=r.current,r.current=i}var pe=j(null),be=j(null),Oe=j(null),Ke=j(null);function We(r,i){switch(me(Oe,i),me(be,r),me(pe,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?cT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=cT(i),r=hT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}re(pe),me(pe,r)}function rt(){re(pe),re(be),re(Oe)}function qn(r){r.memoizedState!==null&&me(Ke,r);var i=pe.current,o=hT(i,r.type);i!==o&&(me(be,r),me(pe,o))}function hr(r){be.current===r&&(re(pe),re(be)),Ke.current===r&&(re(Ke),Ru._currentValue=de)}var kt,Rn;function se(r){if(kt===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);kt=i&&i[1]||"",Rn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+kt+r+Rn}var Te=!1;function Le(r,i){if(!r||Te)return"";Te=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var ee=ne}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(ne){ee=ne}r.call(ce.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),_=m[0],R=m[1];if(_&&R){var k=_.split(`
`),J=R.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<J.length&&!J[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===J.length)for(u=k.length-1,f=J.length-1;1<=u&&0<=f&&k[u]!==J[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==J[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==J[f]){var ae=`
`+k[u].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=u&&0<=f);break}}}finally{Te=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?se(o):""}function Pe(r,i){switch(r.tag){case 26:case 27:case 5:return se(r.type);case 16:return se("Lazy");case 13:return r.child!==i&&i!==null?se("Suspense Fallback"):se("Suspense");case 19:return se("SuspenseList");case 0:case 15:return Le(r.type,!1);case 11:return Le(r.type.render,!1);case 1:return Le(r.type,!0);case 31:return se("Activity");default:return""}}function Fe(r){try{var i="",o=null;do i+=Pe(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var je=Object.prototype.hasOwnProperty,ct=n.unstable_scheduleCallback,vt=n.unstable_cancelCallback,Be=n.unstable_shouldYield,Rt=n.unstable_requestPaint,st=n.unstable_now,gn=n.unstable_getCurrentPriorityLevel,Zn=n.unstable_ImmediatePriority,Gn=n.unstable_UserBlockingPriority,Tn=n.unstable_NormalPriority,fr=n.unstable_LowPriority,Ts=n.unstable_IdlePriority,po=n.log,va=n.unstable_setDisableYieldValue,dr=null,Pt=null;function $n(r){if(typeof po=="function"&&va(r),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(dr,r)}catch{}}var $t=Math.clz32?Math.clz32:Ss,bs=Math.log,_a=Math.LN2;function Ss(r){return r>>>=0,r===0?32:31-(bs(r)/_a|0)|0}var Kn=256,di=262144,Kt=4194304;function Or(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function mr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var R=u&134217727;return R!==0?(u=R&~m,u!==0?f=Or(u):(_&=R,_!==0?f=Or(_):o||(o=R&~r,o!==0&&(f=Or(o))))):(R=u&~m,R!==0?f=Or(R):_!==0?f=Or(_):o||(o=u&~r,o!==0&&(f=Or(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function pr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function go(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(){var r=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),r}function Yn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function mi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ul(r,i,o,u,f,m){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var R=r.entanglements,k=r.expirationTimes,J=r.hiddenUpdates;for(o=_&~o;0<o;){var ae=31-$t(o),ce=1<<ae;R[ae]=0,k[ae]=-1;var ee=J[ae];if(ee!==null)for(J[ae]=null,ae=0;ae<ee.length;ae++){var ne=ee[ae];ne!==null&&(ne.lane&=-536870913)}o&=~ce}u!==0&&ji(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(_&~i))}function ji(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-$t(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function L(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-$t(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function G(r,i){var o=i&-i;return o=(o&42)!==0?1:Z(o),(o&(r.suspendedLanes|i))!==0?0:o}function Z(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function fe(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ge(){var r=ue.p;return r!==0?r:(r=window.event,r===void 0?32:VT(r.type))}function Ae(r,i){var o=ue.p;try{return ue.p=r,i()}finally{ue.p=o}}var Ce=Math.random().toString(36).slice(2),ye="__reactFiber$"+Ce,_e="__reactProps$"+Ce,Re="__reactContainer$"+Ce,He="__reactEvents$"+Ce,Me="__reactListeners$"+Ce,$e="__reactHandles$"+Ce,it="__reactResources$"+Ce,Dt="__reactMarker$"+Ce;function Ft(r){delete r[ye],delete r[_e],delete r[He],delete r[Me],delete r[$e]}function Ut(r){var i=r[ye];if(i)return i;for(var o=r.parentNode;o;){if(i=o[Re]||o[ye]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=vT(r);r!==null;){if(o=r[ye])return o;r=vT(r)}return i}r=o,o=r.parentNode}return null}function et(r){if(r=r[ye]||r[Re]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function jt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function bn(r){var i=r[it];return i||(i=r[it]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function zt(r){r[Dt]=!0}var er=new Set,Ln={};function tr(r,i){kn(r,i),kn(r+"Capture",i)}function kn(r,i){for(Ln[r]=i,r=0;r<i.length;r++)er.add(i[r])}var gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pi={},gi={};function ot(r){return je.call(gi,r)?!0:je.call(pi,r)?!1:gr.test(r)?gi[r]=!0:(pi[r]=!0,!1)}function Xt(r,i,o){if(ot(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function ln(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function Nt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function tt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function yr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ea(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,m.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function bt(r){if(!r._valueTracker){var i=yr(r)?"checked":"value";r._valueTracker=Ea(r,i,""+r[i])}}function As(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=yr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function yi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ws=/[\n"\\]/g;function nr(r){return r.replace(ws,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function yo(r,i,o,u,f,m,_,R){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+tt(i)):r.value!==""+tt(i)&&(r.value=""+tt(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?jl(r,_,tt(i)):o!=null?jl(r,_,tt(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+tt(R):r.removeAttribute("name")}function Lc(r,i,o,u,f,m,_,R){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){bt(r);return}o=o!=null?""+tt(o):"",i=i!=null?""+tt(i):o,R||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=R?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),bt(r)}function jl(r,i,o){i==="number"&&yi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ta(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+tt(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function kc(r,i,o){if(i!=null&&(i=""+tt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+tt(o):""}function ba(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(De(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=tt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),bt(r)}function rr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Uc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zl(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Uc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function Bl(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&zl(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&zl(r,m,i[m])}function vo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _o(r){return Sa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Wr(){}var Fl=null;function Mr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Aa=null,vi=null;function Rs(r){var i=et(r);if(i&&(r=i.stateNode)){var o=r[_e]||null;e:switch(r=i.stateNode,i.type){case"input":if(yo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+nr(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[_e]||null;if(!f)throw Error(a(90));yo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&As(u)}break e;case"textarea":kc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ta(r,!!o.multiple,i,!1)}}}var Eo=!1;function wa(r,i,o){if(Eo)return r(i,o);Eo=!0;try{var u=r(i);return u}finally{if(Eo=!1,(Aa!==null||vi!==null)&&(Oh(),Aa&&(i=Aa,r=vi,vi=Aa=null,Rs(i),r)))for(i=0;i<r.length;i++)Rs(r[i])}}function Jr(r,i){var o=r.stateNode;if(o===null)return null;var u=o[_e]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cs=!1;if(Vr)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){Cs=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{Cs=!1}var _i=null,Hl=null,Is=null;function ql(){if(Is)return Is;var r,i=Hl,o=i.length,u,f="value"in _i?_i.value:_i.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===f[m-u];u++);return Is=f.slice(r,1<u?1-u:void 0)}function Ds(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function zi(){return!0}function Zr(){return!1}function Cn(r){function i(o,u,f,m,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(o=r[R],this[R]=o?o(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?zi:Zr,this.isPropagationStopped=Zr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=Cn(Bi),Ra=E({},Bi,{view:0,detail:0}),Gl=Cn(Ra),Ca,To,Ti,bo=E({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ti&&(Ti&&r.type==="mousemove"?(Ca=r.screenX-Ti.screenX,To=r.screenY-Ti.screenY):To=Ca=0,Ti=r),Ca)},movementY:function(r){return"movementY"in r?r.movementY:To}}),$l=Cn(bo),Ns=E({},bo,{dataTransfer:0}),zc=Cn(Ns),Bc=E({},Ra,{relatedTarget:0}),xs=Cn(Bc),Kl=E({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fc=Cn(Kl),So=E({},Bi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Hc=Cn(So),qc=E({},Bi,{data:0}),bi=Cn(qc),Gc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Kc[r])?!!i[r]:!1}function Ia(){return Yc}var Qn=E({},Ra,{key:function(r){if(r.key){var i=Gc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ds(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?$c[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(r){return r.type==="keypress"?Ds(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ds(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Qc=Cn(Qn),Xc=E({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=Cn(Xc),h=E({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),y=Cn(h),T=E({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=Cn(T),Q=E({},bo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),te=Cn(Q),ve=E({},Bi,{newState:0,oldState:0}),Je=Cn(ve),nn=[9,13,27,32],St=Vr&&"CompositionEvent"in window,Yt=null;Vr&&"documentMode"in document&&(Yt=document.documentMode);var Pr=Vr&&"TextEvent"in window&&!Yt,Si=Vr&&(!St||Yt&&8<Yt&&11>=Yt),ei=" ",ti=!1;function Os(r,i){switch(r){case"keyup":return nn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ao(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var wo=!1;function a1(r,i){switch(r){case"compositionend":return Ao(i);case"keypress":return i.which!==32?null:(ti=!0,ei);case"textInput":return r=i.data,r===ei&&ti?null:r;default:return null}}function s1(r,i){if(wo)return r==="compositionend"||!St&&Os(r,i)?(r=ql(),Is=Hl=_i=null,wo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Si&&i.locale!=="ko"?null:i.data;default:return null}}var o1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!o1[r.type]:i==="textarea"}function bv(r,i,o,u){Aa?vi?vi.push(u):vi=[u]:Aa=u,i=jh(i,"onChange"),0<i.length&&(o=new Ei("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Yl=null,Ql=null;function l1(r){iT(r,0)}function Wc(r){var i=jt(r);if(As(i))return r}function Sv(r,i){if(r==="change")return i}var Av=!1;if(Vr){var Qd;if(Vr){var Xd="oninput"in document;if(!Xd){var wv=document.createElement("div");wv.setAttribute("oninput","return;"),Xd=typeof wv.oninput=="function"}Qd=Xd}else Qd=!1;Av=Qd&&(!document.documentMode||9<document.documentMode)}function Rv(){Yl&&(Yl.detachEvent("onpropertychange",Cv),Ql=Yl=null)}function Cv(r){if(r.propertyName==="value"&&Wc(Ql)){var i=[];bv(i,Ql,r,Mr(r)),wa(l1,i)}}function u1(r,i,o){r==="focusin"?(Rv(),Yl=i,Ql=o,Yl.attachEvent("onpropertychange",Cv)):r==="focusout"&&Rv()}function c1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Wc(Ql)}function h1(r,i){if(r==="click")return Wc(i)}function f1(r,i){if(r==="input"||r==="change")return Wc(i)}function d1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var vr=typeof Object.is=="function"?Object.is:d1;function Xl(r,i){if(vr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!je.call(i,f)||!vr(r[f],i[f]))return!1}return!0}function Iv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Dv(r,i){var o=Iv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Iv(o)}}function Nv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Nv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function xv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=yi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=yi(r.document)}return i}function Wd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var m1=Vr&&"documentMode"in document&&11>=document.documentMode,Ro=null,Jd=null,Wl=null,Zd=!1;function Ov(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zd||Ro==null||Ro!==yi(u)||(u=Ro,"selectionStart"in u&&Wd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Wl&&Xl(Wl,u)||(Wl=u,u=jh(Jd,"onSelect"),0<u.length&&(i=new Ei("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Ro)))}function Ms(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Co={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},em={},Mv={};Vr&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Co.animationend.animation,delete Co.animationiteration.animation,delete Co.animationstart.animation),"TransitionEvent"in window||delete Co.transitionend.transition);function Vs(r){if(em[r])return em[r];if(!Co[r])return r;var i=Co[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in Mv)return em[r]=i[o];return r}var Vv=Vs("animationend"),Pv=Vs("animationiteration"),Lv=Vs("animationstart"),p1=Vs("transitionrun"),g1=Vs("transitionstart"),y1=Vs("transitioncancel"),kv=Vs("transitionend"),Uv=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function ni(r,i){Uv.set(r,i),tr(i,[r])}var Jc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Lr=[],Io=0,nm=0;function Zc(){for(var r=Io,i=nm=Io=0;i<r;){var o=Lr[i];Lr[i++]=null;var u=Lr[i];Lr[i++]=null;var f=Lr[i];Lr[i++]=null;var m=Lr[i];if(Lr[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}m!==0&&jv(o,f,m)}}function eh(r,i,o,u){Lr[Io++]=r,Lr[Io++]=i,Lr[Io++]=o,Lr[Io++]=u,nm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function rm(r,i,o,u){return eh(r,i,o,u),th(r)}function Ps(r,i){return eh(r,null,null,i),th(r)}function jv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-$t(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function th(r){if(50<_u)throw _u=0,fp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Do={};function v1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(r,i,o,u){return new v1(r,i,o,u)}function im(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Hi(r,i){var o=r.alternate;return o===null?(o=_r(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function zv(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function nh(r,i,o,u,f,m){var _=0;if(u=r,typeof r=="function")im(r)&&(_=1);else if(typeof r=="string")_=SC(r,o,pe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=_r(31,o,i,f),r.elementType=I,r.lanes=m,r;case B:return Ls(o.children,f,m,i);case V:_=8,f|=24;break;case q:return r=_r(12,o,i,f|2),r.elementType=q,r.lanes=m,r;case ie:return r=_r(13,o,i,f),r.elementType=ie,r.lanes=m,r;case Y:return r=_r(19,o,i,f),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case F:_=10;break e;case H:_=9;break e;case X:_=11;break e;case S:_=14;break e;case w:_=16,u=null;break e}_=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=_r(_,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function Ls(r,i,o,u){return r=_r(7,r,u,i),r.lanes=o,r}function am(r,i,o){return r=_r(6,r,null,i),r.lanes=o,r}function Bv(r){var i=_r(18,null,null,0);return i.stateNode=r,i}function sm(r,i,o){return i=_r(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Fv=new WeakMap;function kr(r,i){if(typeof r=="object"&&r!==null){var o=Fv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Fe(i)},Fv.set(r,i),i)}return{value:r,source:i,stack:Fe(i)}}var No=[],xo=0,rh=null,Jl=0,Ur=[],jr=0,Da=null,Ai=1,wi="";function qi(r,i){No[xo++]=Jl,No[xo++]=rh,rh=r,Jl=i}function Hv(r,i,o){Ur[jr++]=Ai,Ur[jr++]=wi,Ur[jr++]=Da,Da=r;var u=Ai;r=wi;var f=32-$t(u)-1;u&=~(1<<f),o+=1;var m=32-$t(i)+f;if(30<m){var _=f-f%5;m=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Ai=1<<32-$t(i)+f|o<<f|u,wi=m+r}else Ai=1<<m|o<<f|u,wi=r}function om(r){r.return!==null&&(qi(r,1),Hv(r,1,0))}function lm(r){for(;r===rh;)rh=No[--xo],No[xo]=null,Jl=No[--xo],No[xo]=null;for(;r===Da;)Da=Ur[--jr],Ur[jr]=null,wi=Ur[--jr],Ur[jr]=null,Ai=Ur[--jr],Ur[jr]=null}function qv(r,i){Ur[jr++]=Ai,Ur[jr++]=wi,Ur[jr++]=Da,Ai=i.id,wi=i.overflow,Da=r}var In=null,Ht=null,gt=!1,Na=null,zr=!1,um=Error(a(519));function xa(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Zl(kr(i,r)),um}function Gv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[ye]=r,i[_e]=u,o){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(o=0;o<Tu.length;o++)ut(Tu[o],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":ut("invalid",i),Lc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ut("invalid",i);break;case"textarea":ut("invalid",i),ba(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||lT(i.textContent,o)?(u.popover!=null&&(ut("beforetoggle",i),ut("toggle",i)),u.onScroll!=null&&ut("scroll",i),u.onScrollEnd!=null&&ut("scrollend",i),u.onClick!=null&&(i.onclick=Wr),i=!0):i=!1,i||xa(r,!0)}function $v(r){for(In=r.return;In;)switch(In.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:In=In.return}}function Oo(r){if(r!==In)return!1;if(!gt)return $v(r),gt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Cp(r.type,r.memoizedProps)),o=!o),o&&Ht&&xa(r),$v(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=yT(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=yT(r)}else i===27?(i=Ht,Ga(r.type)?(r=Op,Op=null,Ht=r):Ht=i):Ht=In?Fr(r.stateNode.nextSibling):null;return!0}function ks(){Ht=In=null,gt=!1}function cm(){var r=Na;return r!==null&&(or===null?or=r:or.push.apply(or,r),Na=null),r}function Zl(r){Na===null?Na=[r]:Na.push(r)}var hm=j(null),Us=null,Gi=null;function Oa(r,i,o){me(hm,i._currentValue),i._currentValue=o}function $i(r){r._currentValue=hm.current,re(hm)}function fm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function dm(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var R=m;m=f;for(var k=0;k<i.length;k++)if(R.context===i[k]){m.lanes|=o,R=m.alternate,R!==null&&(R.lanes|=o),fm(m.return,o,r),u||(_=null);break e}m=R.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=o,m=_.alternate,m!==null&&(m.lanes|=o),fm(_,o,r),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===r){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function Mo(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var R=f.type;vr(f.pendingProps.value,_.value)||(r!==null?r.push(R):r=[R])}}else if(f===Ke.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Ru):r=[Ru])}f=f.return}r!==null&&dm(i,r,o,u),i.flags|=262144}function ih(r){for(r=r.firstContext;r!==null;){if(!vr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function js(r){Us=r,Gi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Dn(r){return Kv(Us,r)}function ah(r,i){return Us===null&&js(r),Kv(r,i)}function Kv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Gi===null){if(r===null)throw Error(a(308));Gi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Gi=Gi.next=i;return o}var _1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},E1=n.unstable_scheduleCallback,T1=n.unstable_NormalPriority,un={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mm(){return{controller:new _1,data:new Map,refCount:0}}function eu(r){r.refCount--,r.refCount===0&&E1(T1,function(){r.controller.abort()})}var tu=null,pm=0,Vo=0,Po=null;function b1(r,i){if(tu===null){var o=tu=[];pm=0,Vo=vp(),Po={status:"pending",value:void 0,then:function(u){o.push(u)}}}return pm++,i.then(Yv,Yv),i}function Yv(){if(--pm===0&&tu!==null){Po!==null&&(Po.status="fulfilled");var r=tu;tu=null,Vo=0,Po=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function S1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Qv=$.S;$.S=function(r,i){OE=st(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&b1(r,i),Qv!==null&&Qv(r,i)};var zs=j(null);function gm(){var r=zs.current;return r!==null?r:Lt.pooledCache}function sh(r,i){i===null?me(zs,zs.current):me(zs,i.pool)}function Xv(){var r=gm();return r===null?null:{parent:un._currentValue,pool:r}}var Lo=Error(a(460)),ym=Error(a(474)),oh=Error(a(542)),lh={then:function(){}};function Wv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Jv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Wr,Wr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,e_(r),r;default:if(typeof i.status=="string")i.then(Wr,Wr);else{if(r=Lt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,e_(r),r}throw Fs=i,Lo}}function Bs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Fs=o,Lo):o}}var Fs=null;function Zv(){if(Fs===null)throw Error(a(459));var r=Fs;return Fs=null,r}function e_(r){if(r===Lo||r===oh)throw Error(a(483))}var ko=null,nu=0;function uh(r){var i=nu;return nu+=1,ko===null&&(ko=[]),Jv(ko,r,i)}function ru(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function ch(r,i){throw i.$$typeof===b?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function t_(r){function i(K,z){if(r){var W=K.deletions;W===null?(K.deletions=[z],K.flags|=16):W.push(z)}}function o(K,z){if(!r)return null;for(;z!==null;)i(K,z),z=z.sibling;return null}function u(K){for(var z=new Map;K!==null;)K.key!==null?z.set(K.key,K):z.set(K.index,K),K=K.sibling;return z}function f(K,z){return K=Hi(K,z),K.index=0,K.sibling=null,K}function m(K,z,W){return K.index=W,r?(W=K.alternate,W!==null?(W=W.index,W<z?(K.flags|=67108866,z):W):(K.flags|=67108866,z)):(K.flags|=1048576,z)}function _(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function R(K,z,W,oe){return z===null||z.tag!==6?(z=am(W,K.mode,oe),z.return=K,z):(z=f(z,W),z.return=K,z)}function k(K,z,W,oe){var ke=W.type;return ke===B?ae(K,z,W.props.children,oe,W.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===w&&Bs(ke)===z.type)?(z=f(z,W.props),ru(z,W),z.return=K,z):(z=nh(W.type,W.key,W.props,null,K.mode,oe),ru(z,W),z.return=K,z)}function J(K,z,W,oe){return z===null||z.tag!==4||z.stateNode.containerInfo!==W.containerInfo||z.stateNode.implementation!==W.implementation?(z=sm(W,K.mode,oe),z.return=K,z):(z=f(z,W.children||[]),z.return=K,z)}function ae(K,z,W,oe,ke){return z===null||z.tag!==7?(z=Ls(W,K.mode,oe,ke),z.return=K,z):(z=f(z,W),z.return=K,z)}function ce(K,z,W){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=am(""+z,K.mode,W),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return W=nh(z.type,z.key,z.props,null,K.mode,W),ru(W,z),W.return=K,W;case U:return z=sm(z,K.mode,W),z.return=K,z;case w:return z=Bs(z),ce(K,z,W)}if(De(z)||M(z))return z=Ls(z,K.mode,W,null),z.return=K,z;if(typeof z.then=="function")return ce(K,uh(z),W);if(z.$$typeof===F)return ce(K,ah(K,z),W);ch(K,z)}return null}function ee(K,z,W,oe){var ke=z!==null?z.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return ke!==null?null:R(K,z,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case C:return W.key===ke?k(K,z,W,oe):null;case U:return W.key===ke?J(K,z,W,oe):null;case w:return W=Bs(W),ee(K,z,W,oe)}if(De(W)||M(W))return ke!==null?null:ae(K,z,W,oe,null);if(typeof W.then=="function")return ee(K,z,uh(W),oe);if(W.$$typeof===F)return ee(K,z,ah(K,W),oe);ch(K,W)}return null}function ne(K,z,W,oe,ke){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return K=K.get(W)||null,R(z,K,""+oe,ke);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case C:return K=K.get(oe.key===null?W:oe.key)||null,k(z,K,oe,ke);case U:return K=K.get(oe.key===null?W:oe.key)||null,J(z,K,oe,ke);case w:return oe=Bs(oe),ne(K,z,W,oe,ke)}if(De(oe)||M(oe))return K=K.get(W)||null,ae(z,K,oe,ke,null);if(typeof oe.then=="function")return ne(K,z,W,uh(oe),ke);if(oe.$$typeof===F)return ne(K,z,W,ah(z,oe),ke);ch(z,oe)}return null}function Ie(K,z,W,oe){for(var ke=null,Et=null,xe=z,nt=z=0,ft=null;xe!==null&&nt<W.length;nt++){xe.index>nt?(ft=xe,xe=null):ft=xe.sibling;var Tt=ee(K,xe,W[nt],oe);if(Tt===null){xe===null&&(xe=ft);break}r&&xe&&Tt.alternate===null&&i(K,xe),z=m(Tt,z,nt),Et===null?ke=Tt:Et.sibling=Tt,Et=Tt,xe=ft}if(nt===W.length)return o(K,xe),gt&&qi(K,nt),ke;if(xe===null){for(;nt<W.length;nt++)xe=ce(K,W[nt],oe),xe!==null&&(z=m(xe,z,nt),Et===null?ke=xe:Et.sibling=xe,Et=xe);return gt&&qi(K,nt),ke}for(xe=u(xe);nt<W.length;nt++)ft=ne(xe,K,nt,W[nt],oe),ft!==null&&(r&&ft.alternate!==null&&xe.delete(ft.key===null?nt:ft.key),z=m(ft,z,nt),Et===null?ke=ft:Et.sibling=ft,Et=ft);return r&&xe.forEach(function(Xa){return i(K,Xa)}),gt&&qi(K,nt),ke}function ze(K,z,W,oe){if(W==null)throw Error(a(151));for(var ke=null,Et=null,xe=z,nt=z=0,ft=null,Tt=W.next();xe!==null&&!Tt.done;nt++,Tt=W.next()){xe.index>nt?(ft=xe,xe=null):ft=xe.sibling;var Xa=ee(K,xe,Tt.value,oe);if(Xa===null){xe===null&&(xe=ft);break}r&&xe&&Xa.alternate===null&&i(K,xe),z=m(Xa,z,nt),Et===null?ke=Xa:Et.sibling=Xa,Et=Xa,xe=ft}if(Tt.done)return o(K,xe),gt&&qi(K,nt),ke;if(xe===null){for(;!Tt.done;nt++,Tt=W.next())Tt=ce(K,Tt.value,oe),Tt!==null&&(z=m(Tt,z,nt),Et===null?ke=Tt:Et.sibling=Tt,Et=Tt);return gt&&qi(K,nt),ke}for(xe=u(xe);!Tt.done;nt++,Tt=W.next())Tt=ne(xe,K,nt,Tt.value,oe),Tt!==null&&(r&&Tt.alternate!==null&&xe.delete(Tt.key===null?nt:Tt.key),z=m(Tt,z,nt),Et===null?ke=Tt:Et.sibling=Tt,Et=Tt);return r&&xe.forEach(function(VC){return i(K,VC)}),gt&&qi(K,nt),ke}function Vt(K,z,W,oe){if(typeof W=="object"&&W!==null&&W.type===B&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case C:e:{for(var ke=W.key;z!==null;){if(z.key===ke){if(ke=W.type,ke===B){if(z.tag===7){o(K,z.sibling),oe=f(z,W.props.children),oe.return=K,K=oe;break e}}else if(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===w&&Bs(ke)===z.type){o(K,z.sibling),oe=f(z,W.props),ru(oe,W),oe.return=K,K=oe;break e}o(K,z);break}else i(K,z);z=z.sibling}W.type===B?(oe=Ls(W.props.children,K.mode,oe,W.key),oe.return=K,K=oe):(oe=nh(W.type,W.key,W.props,null,K.mode,oe),ru(oe,W),oe.return=K,K=oe)}return _(K);case U:e:{for(ke=W.key;z!==null;){if(z.key===ke)if(z.tag===4&&z.stateNode.containerInfo===W.containerInfo&&z.stateNode.implementation===W.implementation){o(K,z.sibling),oe=f(z,W.children||[]),oe.return=K,K=oe;break e}else{o(K,z);break}else i(K,z);z=z.sibling}oe=sm(W,K.mode,oe),oe.return=K,K=oe}return _(K);case w:return W=Bs(W),Vt(K,z,W,oe)}if(De(W))return Ie(K,z,W,oe);if(M(W)){if(ke=M(W),typeof ke!="function")throw Error(a(150));return W=ke.call(W),ze(K,z,W,oe)}if(typeof W.then=="function")return Vt(K,z,uh(W),oe);if(W.$$typeof===F)return Vt(K,z,ah(K,W),oe);ch(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,z!==null&&z.tag===6?(o(K,z.sibling),oe=f(z,W),oe.return=K,K=oe):(o(K,z),oe=am(W,K.mode,oe),oe.return=K,K=oe),_(K)):o(K,z)}return function(K,z,W,oe){try{nu=0;var ke=Vt(K,z,W,oe);return ko=null,ke}catch(xe){if(xe===Lo||xe===oh)throw xe;var Et=_r(29,xe,null,K.mode);return Et.lanes=oe,Et.return=K,Et}finally{}}}var Hs=t_(!0),n_=t_(!1),Ma=!1;function vm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Va(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Pa(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(At&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=th(r),jv(r,null,o),i}return eh(r,u,i,o),th(r)}function iu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,L(r,o)}}function Em(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Tm=!1;function au(){if(Tm){var r=Po;if(r!==null)throw r}}function su(r,i,o,u){Tm=!1;var f=r.updateQueue;Ma=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var k=R,J=k.next;k.next=null,_===null?m=J:_.next=J,_=k;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,R=ae.lastBaseUpdate,R!==_&&(R===null?ae.firstBaseUpdate=J:R.next=J,ae.lastBaseUpdate=k))}if(m!==null){var ce=f.baseState;_=0,ae=J=k=null,R=m;do{var ee=R.lane&-536870913,ne=ee!==R.lane;if(ne?(ht&ee)===ee:(u&ee)===ee){ee!==0&&ee===Vo&&(Tm=!0),ae!==null&&(ae=ae.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ie=r,ze=R;ee=i;var Vt=o;switch(ze.tag){case 1:if(Ie=ze.payload,typeof Ie=="function"){ce=Ie.call(Vt,ce,ee);break e}ce=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=ze.payload,ee=typeof Ie=="function"?Ie.call(Vt,ce,ee):Ie,ee==null)break e;ce=E({},ce,ee);break e;case 2:Ma=!0}}ee=R.callback,ee!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ae===null?(J=ae=ne,k=ce):ae=ae.next=ne,_|=ee;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);ae===null&&(k=ce),f.baseState=k,f.firstBaseUpdate=J,f.lastBaseUpdate=ae,m===null&&(f.shared.lanes=0),za|=_,r.lanes=_,r.memoizedState=ce}}function r_(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function i_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)r_(o[r],i)}var Uo=j(null),hh=j(0);function a_(r,i){r=ta,me(hh,r),me(Uo,i),ta=r|i.baseLanes}function bm(){me(hh,ta),me(Uo,Uo.current)}function Sm(){ta=hh.current,re(Uo),re(hh)}var Er=j(null),Br=null;function La(r){var i=r.alternate;me(rn,rn.current&1),me(Er,r),Br===null&&(i===null||Uo.current!==null||i.memoizedState!==null)&&(Br=r)}function Am(r){me(rn,rn.current),me(Er,r),Br===null&&(Br=r)}function s_(r){r.tag===22?(me(rn,rn.current),me(Er,r),Br===null&&(Br=r)):ka()}function ka(){me(rn,rn.current),me(Er,Er.current)}function Tr(r){re(Er),Br===r&&(Br=null),re(rn)}var rn=j(0);function fh(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Np(o)||xp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ki=0,Ze=null,Ot=null,cn=null,dh=!1,jo=!1,qs=!1,mh=0,ou=0,zo=null,A1=0;function Zt(){throw Error(a(321))}function wm(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!vr(r[o],i[o]))return!1;return!0}function Rm(r,i,o,u,f,m){return Ki=m,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,$.H=r===null||r.memoizedState===null?H_:Bm,qs=!1,m=o(u,f),qs=!1,jo&&(m=l_(i,o,u,f)),o_(r),m}function o_(r){$.H=cu;var i=Ot!==null&&Ot.next!==null;if(Ki=0,cn=Ot=Ze=null,dh=!1,ou=0,zo=null,i)throw Error(a(300));r===null||hn||(r=r.dependencies,r!==null&&ih(r)&&(hn=!0))}function l_(r,i,o,u){Ze=r;var f=0;do{if(jo&&(zo=null),ou=0,jo=!1,25<=f)throw Error(a(301));if(f+=1,cn=Ot=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}$.H=q_,m=i(o,u)}while(jo);return m}function w1(){var r=$.H,i=r.useState()[0];return i=typeof i.then=="function"?lu(i):i,r=r.useState()[0],(Ot!==null?Ot.memoizedState:null)!==r&&(Ze.flags|=1024),i}function Cm(){var r=mh!==0;return mh=0,r}function Im(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Dm(r){if(dh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}dh=!1}Ki=0,cn=Ot=Ze=null,jo=!1,ou=mh=0,zo=null}function Xn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?Ze.memoizedState=cn=r:cn=cn.next=r,cn}function an(){if(Ot===null){var r=Ze.alternate;r=r!==null?r.memoizedState:null}else r=Ot.next;var i=cn===null?Ze.memoizedState:cn.next;if(i!==null)cn=i,Ot=r;else{if(r===null)throw Ze.alternate===null?Error(a(467)):Error(a(310));Ot=r,r={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},cn===null?Ze.memoizedState=cn=r:cn=cn.next=r}return cn}function ph(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lu(r){var i=ou;return ou+=1,zo===null&&(zo=[]),r=Jv(zo,r,i),i=Ze,(cn===null?i.memoizedState:cn.next)===null&&(i=i.alternate,$.H=i===null||i.memoizedState===null?H_:Bm),r}function gh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return lu(r);if(r.$$typeof===F)return Dn(r)}throw Error(a(438,String(r)))}function Nm(r){var i=null,o=Ze.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=Ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=ph(),Ze.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=N;return i.index++,o}function Yi(r,i){return typeof i=="function"?i(r):i}function yh(r){var i=an();return xm(i,Ot,r)}function xm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var R=_=null,k=null,J=i,ae=!1;do{var ce=J.lane&-536870913;if(ce!==J.lane?(ht&ce)===ce:(Ki&ce)===ce){var ee=J.revertLane;if(ee===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ce===Vo&&(ae=!0);else if((Ki&ee)===ee){J=J.next,ee===Vo&&(ae=!0);continue}else ce={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(R=k=ce,_=m):k=k.next=ce,Ze.lanes|=ee,za|=ee;ce=J.action,qs&&o(m,ce),m=J.hasEagerState?J.eagerState:o(m,ce)}else ee={lane:ce,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},k===null?(R=k=ee,_=m):k=k.next=ee,Ze.lanes|=ce,za|=ce;J=J.next}while(J!==null&&J!==i);if(k===null?_=m:k.next=R,!vr(m,r.memoizedState)&&(hn=!0,ae&&(o=Po,o!==null)))throw o;r.memoizedState=m,r.baseState=_,r.baseQueue=k,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Om(r){var i=an(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do m=r(m,_.action),_=_.next;while(_!==f);vr(m,i.memoizedState)||(hn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function u_(r,i,o){var u=Ze,f=an(),m=gt;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var _=!vr((Ot||f).memoizedState,o);if(_&&(f.memoizedState=o,hn=!0),f=f.queue,Pm(f_.bind(null,u,f,r),[r]),f.getSnapshot!==i||_||cn!==null&&cn.memoizedState.tag&1){if(u.flags|=2048,Bo(9,{destroy:void 0},h_.bind(null,u,f,o,i),null),Lt===null)throw Error(a(349));m||(Ki&127)!==0||c_(u,i,o)}return o}function c_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=Ze.updateQueue,i===null?(i=ph(),Ze.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function h_(r,i,o,u){i.value=o,i.getSnapshot=u,d_(i)&&m_(r)}function f_(r,i,o){return o(function(){d_(i)&&m_(r)})}function d_(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!vr(r,o)}catch{return!0}}function m_(r){var i=Ps(r,2);i!==null&&lr(i,r,2)}function Mm(r){var i=Xn();if(typeof r=="function"){var o=r;if(r=o(),qs){$n(!0);try{o()}finally{$n(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:r},i}function p_(r,i,o,u){return r.baseState=o,xm(r,Ot,typeof u=="function"?u:Yi)}function R1(r,i,o,u,f){if(Eh(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};$.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,g_(i,m)):(m.next=o.next,i.pending=o.next=m)}}function g_(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=$.T,_={};$.T=_;try{var R=o(f,u),k=$.S;k!==null&&k(_,R),y_(r,i,R)}catch(J){Vm(r,i,J)}finally{m!==null&&_.types!==null&&(m.types=_.types),$.T=m}}else try{m=o(f,u),y_(r,i,m)}catch(J){Vm(r,i,J)}}function y_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){v_(r,i,u)},function(u){return Vm(r,i,u)}):v_(r,i,o)}function v_(r,i,o){i.status="fulfilled",i.value=o,__(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,g_(r,o)))}function Vm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,__(i),i=i.next;while(i!==u)}r.action=null}function __(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function E_(r,i){return i}function T_(r,i){if(gt){var o=Lt.formState;if(o!==null){e:{var u=Ze;if(gt){if(Ht){t:{for(var f=Ht,m=zr;f.nodeType!==8;){if(!m){f=null;break t}if(f=Fr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ht=Fr(f.nextSibling),u=f.data==="F!";break e}}xa(u)}u=!1}u&&(i=o[0])}}return o=Xn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:E_,lastRenderedState:i},o.queue=u,o=z_.bind(null,Ze,u),u.dispatch=o,u=Mm(!1),m=zm.bind(null,Ze,!1,u.queue),u=Xn(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=R1.bind(null,Ze,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function b_(r){var i=an();return S_(i,Ot,r)}function S_(r,i,o){if(i=xm(r,i,E_)[0],r=yh(Yi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=lu(i)}catch(_){throw _===Lo?oh:_}else u=i;i=an();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(Ze.flags|=2048,Bo(9,{destroy:void 0},C1.bind(null,f,o),null)),[u,m,r]}function C1(r,i){r.action=i}function A_(r){var i=an(),o=Ot;if(o!==null)return S_(i,o,r);an(),i=i.memoizedState,o=an();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function Bo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=Ze.updateQueue,i===null&&(i=ph(),Ze.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function w_(){return an().memoizedState}function vh(r,i,o,u){var f=Xn();Ze.flags|=r,f.memoizedState=Bo(1|i,{destroy:void 0},o,u===void 0?null:u)}function _h(r,i,o,u){var f=an();u=u===void 0?null:u;var m=f.memoizedState.inst;Ot!==null&&u!==null&&wm(u,Ot.memoizedState.deps)?f.memoizedState=Bo(i,m,o,u):(Ze.flags|=r,f.memoizedState=Bo(1|i,m,o,u))}function R_(r,i){vh(8390656,8,r,i)}function Pm(r,i){_h(2048,8,r,i)}function I1(r){Ze.flags|=4;var i=Ze.updateQueue;if(i===null)i=ph(),Ze.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function C_(r){var i=an().memoizedState;return I1({ref:i,nextImpl:r}),function(){if((At&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function I_(r,i){return _h(4,2,r,i)}function D_(r,i){return _h(4,4,r,i)}function N_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function x_(r,i,o){o=o!=null?o.concat([r]):null,_h(4,4,N_.bind(null,i,r),o)}function Lm(){}function O_(r,i){var o=an();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&wm(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function M_(r,i){var o=an();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&wm(i,u[1]))return u[0];if(u=r(),qs){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,i],u}function km(r,i,o){return o===void 0||(Ki&1073741824)!==0&&(ht&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=VE(),Ze.lanes|=r,za|=r,o)}function V_(r,i,o,u){return vr(o,i)?o:Uo.current!==null?(r=km(r,o,u),vr(r,i)||(hn=!0),r):(Ki&42)===0||(Ki&1073741824)!==0&&(ht&261930)===0?(hn=!0,r.memoizedState=o):(r=VE(),Ze.lanes|=r,za|=r,i)}function P_(r,i,o,u,f){var m=ue.p;ue.p=m!==0&&8>m?m:8;var _=$.T,R={};$.T=R,zm(r,!1,i,o);try{var k=f(),J=$.S;if(J!==null&&J(R,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ae=S1(k,u);uu(r,i,ae,Ar(r))}else uu(r,i,u,Ar(r))}catch(ce){uu(r,i,{then:function(){},status:"rejected",reason:ce},Ar())}finally{ue.p=m,_!==null&&R.types!==null&&(_.types=R.types),$.T=_}}function D1(){}function Um(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=L_(r).queue;P_(r,f,i,de,o===null?D1:function(){return k_(r),o(u)})}function L_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:de},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function k_(r){var i=L_(r);i.next===null&&(i=r.alternate.memoizedState),uu(r,i.next.queue,{},Ar())}function jm(){return Dn(Ru)}function U_(){return an().memoizedState}function j_(){return an().memoizedState}function N1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Ar();r=Va(o);var u=Pa(i,r,o);u!==null&&(lr(u,i,o),iu(u,i,o)),i={cache:mm()},r.payload=i;return}i=i.return}}function x1(r,i,o){var u=Ar();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(r)?B_(i,o):(o=rm(r,i,o,u),o!==null&&(lr(o,r,u),F_(o,i,u)))}function z_(r,i,o){var u=Ar();uu(r,i,o,u)}function uu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(r))B_(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,R=m(_,o);if(f.hasEagerState=!0,f.eagerState=R,vr(R,_))return eh(r,i,f,0),Lt===null&&Zc(),!1}catch{}finally{}if(o=rm(r,i,f,u),o!==null)return lr(o,r,u),F_(o,i,u),!0}return!1}function zm(r,i,o,u){if(u={lane:2,revertLane:vp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Eh(r)){if(i)throw Error(a(479))}else i=rm(r,o,u,2),i!==null&&lr(i,r,2)}function Eh(r){var i=r.alternate;return r===Ze||i!==null&&i===Ze}function B_(r,i){jo=dh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function F_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,L(r,o)}}var cu={readContext:Dn,use:gh,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt};cu.useEffectEvent=Zt;var H_={readContext:Dn,use:gh,useCallback:function(r,i){return Xn().memoizedState=[r,i===void 0?null:i],r},useContext:Dn,useEffect:R_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,vh(4194308,4,N_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return vh(4194308,4,r,i)},useInsertionEffect:function(r,i){vh(4,2,r,i)},useMemo:function(r,i){var o=Xn();i=i===void 0?null:i;var u=r();if(qs){$n(!0);try{r()}finally{$n(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Xn();if(o!==void 0){var f=o(i);if(qs){$n(!0);try{o(i)}finally{$n(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=x1.bind(null,Ze,r),[u.memoizedState,r]},useRef:function(r){var i=Xn();return r={current:r},i.memoizedState=r},useState:function(r){r=Mm(r);var i=r.queue,o=z_.bind(null,Ze,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Lm,useDeferredValue:function(r,i){var o=Xn();return km(o,r,i)},useTransition:function(){var r=Mm(!1);return r=P_.bind(null,Ze,r.queue,!0,!1),Xn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=Ze,f=Xn();if(gt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),Lt===null)throw Error(a(349));(ht&127)!==0||c_(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,R_(f_.bind(null,u,m,r),[r]),u.flags|=2048,Bo(9,{destroy:void 0},h_.bind(null,u,m,o,i),null),o},useId:function(){var r=Xn(),i=Lt.identifierPrefix;if(gt){var o=wi,u=Ai;o=(u&~(1<<32-$t(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=mh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=A1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:jm,useFormState:T_,useActionState:T_,useOptimistic:function(r){var i=Xn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=zm.bind(null,Ze,!0,o),o.dispatch=i,[r,i]},useMemoCache:Nm,useCacheRefresh:function(){return Xn().memoizedState=N1.bind(null,Ze)},useEffectEvent:function(r){var i=Xn(),o={impl:r};return i.memoizedState=o,function(){if((At&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Bm={readContext:Dn,use:gh,useCallback:O_,useContext:Dn,useEffect:Pm,useImperativeHandle:x_,useInsertionEffect:I_,useLayoutEffect:D_,useMemo:M_,useReducer:yh,useRef:w_,useState:function(){return yh(Yi)},useDebugValue:Lm,useDeferredValue:function(r,i){var o=an();return V_(o,Ot.memoizedState,r,i)},useTransition:function(){var r=yh(Yi)[0],i=an().memoizedState;return[typeof r=="boolean"?r:lu(r),i]},useSyncExternalStore:u_,useId:U_,useHostTransitionStatus:jm,useFormState:b_,useActionState:b_,useOptimistic:function(r,i){var o=an();return p_(o,Ot,r,i)},useMemoCache:Nm,useCacheRefresh:j_};Bm.useEffectEvent=C_;var q_={readContext:Dn,use:gh,useCallback:O_,useContext:Dn,useEffect:Pm,useImperativeHandle:x_,useInsertionEffect:I_,useLayoutEffect:D_,useMemo:M_,useReducer:Om,useRef:w_,useState:function(){return Om(Yi)},useDebugValue:Lm,useDeferredValue:function(r,i){var o=an();return Ot===null?km(o,r,i):V_(o,Ot.memoizedState,r,i)},useTransition:function(){var r=Om(Yi)[0],i=an().memoizedState;return[typeof r=="boolean"?r:lu(r),i]},useSyncExternalStore:u_,useId:U_,useHostTransitionStatus:jm,useFormState:A_,useActionState:A_,useOptimistic:function(r,i){var o=an();return Ot!==null?p_(o,Ot,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:j_};q_.useEffectEvent=C_;function Fm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Hm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Ar(),f=Va(u);f.payload=i,o!=null&&(f.callback=o),i=Pa(r,f,u),i!==null&&(lr(i,r,u),iu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Ar(),f=Va(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Pa(r,f,u),i!==null&&(lr(i,r,u),iu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Ar(),u=Va(o);u.tag=2,i!=null&&(u.callback=i),i=Pa(r,u,o),i!==null&&(lr(i,r,o),iu(i,r,o))}};function G_(r,i,o,u,f,m,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,_):i.prototype&&i.prototype.isPureReactComponent?!Xl(o,u)||!Xl(f,m):!0}function $_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Hm.enqueueReplaceState(i,i.state,null)}function Gs(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function K_(r){Jc(r)}function Y_(r){console.error(r)}function Q_(r){Jc(r)}function Th(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function X_(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qm(r,i,o){return o=Va(o),o.tag=3,o.payload={element:null},o.callback=function(){Th(r,i)},o}function W_(r){return r=Va(r),r.tag=3,r}function J_(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){X_(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){X_(i,o,u),typeof f!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var R=u.stack;this.componentDidCatch(u.value,{componentStack:R!==null?R:""})})}function O1(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Mo(i,o,f,!0),o=Er.current,o!==null){switch(o.tag){case 31:case 13:return Br===null?Mh():o.alternate===null&&en===0&&(en=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===lh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),pp(r,u,f)),!1;case 22:return o.flags|=65536,u===lh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),pp(r,u,f)),!1}throw Error(a(435,o.tag))}return pp(r,u,f),Mh(),!1}if(gt)return i=Er.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==um&&(r=Error(a(422),{cause:u}),Zl(kr(r,o)))):(u!==um&&(i=Error(a(423),{cause:u}),Zl(kr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=kr(u,o),f=qm(r.stateNode,u,f),Em(r,f),en!==4&&(en=2)),!1;var m=Error(a(520),{cause:u});if(m=kr(m,o),vu===null?vu=[m]:vu.push(m),en!==4&&(en=2),i===null)return!0;u=kr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=qm(o.stateNode,u,r),Em(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ba===null||!Ba.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=W_(f),J_(f,r,o,u),Em(o,f),!1}o=o.return}while(o!==null);return!1}var Gm=Error(a(461)),hn=!1;function Nn(r,i,o,u){i.child=r===null?n_(i,null,o,u):Hs(i,r.child,o,u)}function Z_(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var _={};for(var R in u)R!=="ref"&&(_[R]=u[R])}else _=u;return js(i),u=Rm(r,i,o,_,m,f),R=Cm(),r!==null&&!hn?(Im(r,i,f),Qi(r,i,f)):(gt&&R&&om(i),i.flags|=1,Nn(r,i,u,f),i.child)}function eE(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!im(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,tE(r,i,m,u,f)):(r=nh(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!Zm(r,f)){var _=m.memoizedProps;if(o=o.compare,o=o!==null?o:Xl,o(_,u)&&r.ref===i.ref)return Qi(r,i,f)}return i.flags|=1,r=Hi(m,u),r.ref=i.ref,r.return=i,i.child=r}function tE(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(Xl(m,u)&&r.ref===i.ref)if(hn=!1,i.pendingProps=u=m,Zm(r,f))(r.flags&131072)!==0&&(hn=!0);else return i.lanes=r.lanes,Qi(r,i,f)}return $m(r,i,o,u,f)}function nE(r,i,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return rE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&sh(i,m!==null?m.cachePool:null),m!==null?a_(i,m):bm(),s_(i);else return u=i.lanes=536870912,rE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(sh(i,m.cachePool),a_(i,m),ka(),i.memoizedState=null):(r!==null&&sh(i,null),bm(),ka());return Nn(r,i,f,o),i.child}function hu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function rE(r,i,o,u,f){var m=gm();return m=m===null?null:{parent:un._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&sh(i,null),bm(),s_(i),r!==null&&Mo(r,i,u,!0),i.childLanes=f,null}function bh(r,i){return i=Ah({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function iE(r,i,o){return Hs(i,r.child,null,o),r=bh(i,i.pendingProps),r.flags|=2,Tr(i),i.memoizedState=null,r}function M1(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(gt){if(u.mode==="hidden")return r=bh(i,u),i.lanes=536870912,hu(null,r);if(Am(i),(r=Ht)?(r=gT(r,zr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Ai,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},o=Bv(r),o.return=i,i.child=o,In=i,Ht=null)):r=null,r===null)throw xa(i);return i.lanes=536870912,null}return bh(i,u)}var m=r.memoizedState;if(m!==null){var _=m.dehydrated;if(Am(i),f)if(i.flags&256)i.flags&=-257,i=iE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(hn||Mo(r,i,o,!1),f=(o&r.childLanes)!==0,hn||f){if(u=Lt,u!==null&&(_=G(u,o),_!==0&&_!==m.retryLane))throw m.retryLane=_,Ps(r,_),lr(u,r,_),Gm;Mh(),i=iE(r,i,o)}else r=m.treeContext,Ht=Fr(_.nextSibling),In=i,gt=!0,Na=null,zr=!1,r!==null&&qv(i,r),i=bh(i,u),i.flags|=4096;return i}return r=Hi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Sh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function $m(r,i,o,u,f){return js(i),o=Rm(r,i,o,u,void 0,f),u=Cm(),r!==null&&!hn?(Im(r,i,f),Qi(r,i,f)):(gt&&u&&om(i),i.flags|=1,Nn(r,i,o,f),i.child)}function aE(r,i,o,u,f,m){return js(i),i.updateQueue=null,o=l_(i,u,o,f),o_(r),u=Cm(),r!==null&&!hn?(Im(r,i,m),Qi(r,i,m)):(gt&&u&&om(i),i.flags|=1,Nn(r,i,o,m),i.child)}function sE(r,i,o,u,f){if(js(i),i.stateNode===null){var m=Do,_=o.contextType;typeof _=="object"&&_!==null&&(m=Dn(_)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Hm,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},vm(i),_=o.contextType,m.context=typeof _=="object"&&_!==null?Dn(_):Do,m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Fm(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&Hm.enqueueReplaceState(m,m.state,null),su(i,u,m,f),au(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var R=i.memoizedProps,k=Gs(o,R);m.props=k;var J=m.context,ae=o.contextType;_=Do,typeof ae=="object"&&ae!==null&&(_=Dn(ae));var ce=o.getDerivedStateFromProps;ae=typeof ce=="function"||typeof m.getSnapshotBeforeUpdate=="function",R=i.pendingProps!==R,ae||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(R||J!==_)&&$_(i,m,u,_),Ma=!1;var ee=i.memoizedState;m.state=ee,su(i,u,m,f),au(),J=i.memoizedState,R||ee!==J||Ma?(typeof ce=="function"&&(Fm(i,o,ce,u),J=i.memoizedState),(k=Ma||G_(i,o,k,u,ee,J,_))?(ae||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=J),m.props=u,m.state=J,m.context=_,u=k):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,_m(r,i),_=i.memoizedProps,ae=Gs(o,_),m.props=ae,ce=i.pendingProps,ee=m.context,J=o.contextType,k=Do,typeof J=="object"&&J!==null&&(k=Dn(J)),R=o.getDerivedStateFromProps,(J=typeof R=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==ce||ee!==k)&&$_(i,m,u,k),Ma=!1,ee=i.memoizedState,m.state=ee,su(i,u,m,f),au();var ne=i.memoizedState;_!==ce||ee!==ne||Ma||r!==null&&r.dependencies!==null&&ih(r.dependencies)?(typeof R=="function"&&(Fm(i,o,R,u),ne=i.memoizedState),(ae=Ma||G_(i,o,ae,u,ee,ne,k)||r!==null&&r.dependencies!==null&&ih(r.dependencies))?(J||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ne,k),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ne,k)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ne),m.props=u,m.state=ne,m.context=k,u=ae):(typeof m.componentDidUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Sh(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Hs(i,r.child,null,f),i.child=Hs(i,null,o,f)):Nn(r,i,o,f),i.memoizedState=m.state,r=i.child):r=Qi(r,i,f),r}function oE(r,i,o,u){return ks(),i.flags|=256,Nn(r,i,o,u),i.child}var Km={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ym(r){return{baseLanes:r,cachePool:Xv()}}function Qm(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Sr),r}function lE(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=r!==null&&r.memoizedState===null?!1:(rn.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(gt){if(f?La(i):ka(),(r=Ht)?(r=gT(r,zr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Ai,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},o=Bv(r),o.return=i,i.child=o,In=i,Ht=null)):r=null,r===null)throw xa(i);return xp(r)?i.lanes=32:i.lanes=536870912,null}var R=u.children;return u=u.fallback,f?(ka(),f=i.mode,R=Ah({mode:"hidden",children:R},f),u=Ls(u,f,o,null),R.return=i,u.return=i,R.sibling=u,i.child=R,u=i.child,u.memoizedState=Ym(o),u.childLanes=Qm(r,_,o),i.memoizedState=Km,hu(null,u)):(La(i),Xm(i,R))}var k=r.memoizedState;if(k!==null&&(R=k.dehydrated,R!==null)){if(m)i.flags&256?(La(i),i.flags&=-257,i=Wm(r,i,o)):i.memoizedState!==null?(ka(),i.child=r.child,i.flags|=128,i=null):(ka(),R=u.fallback,f=i.mode,u=Ah({mode:"visible",children:u.children},f),R=Ls(R,f,o,null),R.flags|=2,u.return=i,R.return=i,u.sibling=R,i.child=u,Hs(i,r.child,null,o),u=i.child,u.memoizedState=Ym(o),u.childLanes=Qm(r,_,o),i.memoizedState=Km,i=hu(null,u));else if(La(i),xp(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var J=_.dgst;_=J,u=Error(a(419)),u.stack="",u.digest=_,Zl({value:u,source:null,stack:null}),i=Wm(r,i,o)}else if(hn||Mo(r,i,o,!1),_=(o&r.childLanes)!==0,hn||_){if(_=Lt,_!==null&&(u=G(_,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,Ps(r,u),lr(_,r,u),Gm;Np(R)||Mh(),i=Wm(r,i,o)}else Np(R)?(i.flags|=192,i.child=r.child,i=null):(r=k.treeContext,Ht=Fr(R.nextSibling),In=i,gt=!0,Na=null,zr=!1,r!==null&&qv(i,r),i=Xm(i,u.children),i.flags|=4096);return i}return f?(ka(),R=u.fallback,f=i.mode,k=r.child,J=k.sibling,u=Hi(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,J!==null?R=Hi(J,R):(R=Ls(R,f,o,null),R.flags|=2),R.return=i,u.return=i,u.sibling=R,i.child=u,hu(null,u),u=i.child,R=r.child.memoizedState,R===null?R=Ym(o):(f=R.cachePool,f!==null?(k=un._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=Xv(),R={baseLanes:R.baseLanes|o,cachePool:f}),u.memoizedState=R,u.childLanes=Qm(r,_,o),i.memoizedState=Km,hu(r.child,u)):(La(i),o=r.child,r=o.sibling,o=Hi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function Xm(r,i){return i=Ah({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ah(r,i){return r=_r(22,r,null,i),r.lanes=0,r}function Wm(r,i,o){return Hs(i,r.child,null,o),r=Xm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function uE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),fm(r.return,i,o)}function Jm(r,i,o,u,f,m){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=m)}function cE(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var _=rn.current,R=(_&2)!==0;if(R?(_=_&1|2,i.flags|=128):_&=1,me(rn,_),Nn(r,i,u,o),u=gt?Jl:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&uE(r,o,i);else if(r.tag===19)uE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&fh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),Jm(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&fh(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Jm(i,!0,o,null,m,u);break;case"together":Jm(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Qi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),za|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Mo(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Hi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Hi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function Zm(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ih(r)))}function V1(r,i,o){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),Oa(i,un,r.memoizedState.cache),ks();break;case 27:case 5:qn(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:Oa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Am(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(La(i),i.flags|=128,null):(o&i.child.childLanes)!==0?lE(r,i,o):(La(i),r=Qi(r,i,o),r!==null?r.sibling:null);La(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Mo(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return cE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),me(rn,rn.current),u)break;return null;case 22:return i.lanes=0,nE(r,i,o,i.pendingProps);case 24:Oa(i,un,r.memoizedState.cache)}return Qi(r,i,o)}function hE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)hn=!0;else{if(!Zm(r,o)&&(i.flags&128)===0)return hn=!1,V1(r,i,o);hn=(r.flags&131072)!==0}else hn=!1,gt&&(i.flags&1048576)!==0&&Hv(i,Jl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Bs(i.elementType),i.type=r,typeof r=="function")im(r)?(u=Gs(r,u),i.tag=1,i=sE(null,i,r,u,o)):(i.tag=0,i=$m(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===X){i.tag=11,i=Z_(null,i,r,u,o);break e}else if(f===S){i.tag=14,i=eE(null,i,r,u,o);break e}}throw i=Ee(r)||r,Error(a(306,i,""))}}return i;case 0:return $m(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=Gs(u,i.pendingProps),sE(r,i,u,f,o);case 3:e:{if(We(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,_m(r,i),su(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Oa(i,un,u),u!==m.cache&&dm(i,[un],o,!0),au(),u=_.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=oE(r,i,u,o);break e}else if(u!==f){f=kr(Error(a(424)),i),Zl(f),i=oE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ht=Fr(r.firstChild),In=i,gt=!0,Na=null,zr=!0,o=n_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(ks(),u===f){i=Qi(r,i,o);break e}Nn(r,i,u,o)}i=i.child}return i;case 26:return Sh(r,i),r===null?(o=bT(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,r=i.pendingProps,u=zh(Oe.current).createElement(o),u[ye]=i,u[_e]=r,xn(u,o,r),zt(u),i.stateNode=u):i.memoizedState=bT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return qn(i),r===null&&gt&&(u=i.stateNode=_T(i.type,i.pendingProps,Oe.current),In=i,zr=!0,f=Ht,Ga(i.type)?(Op=f,Ht=Fr(u.firstChild)):Ht=f),Nn(r,i,i.pendingProps.children,o),Sh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&gt&&((f=u=Ht)&&(u=cC(u,i.type,i.pendingProps,zr),u!==null?(i.stateNode=u,In=i,Ht=Fr(u.firstChild),zr=!1,f=!0):f=!1),f||xa(i)),qn(i),f=i.type,m=i.pendingProps,_=r!==null?r.memoizedProps:null,u=m.children,Cp(f,m)?u=null:_!==null&&Cp(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Rm(r,i,w1,null,null,o),Ru._currentValue=f),Sh(r,i),Nn(r,i,u,o),i.child;case 6:return r===null&&gt&&((r=o=Ht)&&(o=hC(o,i.pendingProps,zr),o!==null?(i.stateNode=o,In=i,Ht=null,r=!0):r=!1),r||xa(i)),null;case 13:return lE(r,i,o);case 4:return We(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Hs(i,null,u,o):Nn(r,i,u,o),i.child;case 11:return Z_(r,i,i.type,i.pendingProps,o);case 7:return Nn(r,i,i.pendingProps,o),i.child;case 8:return Nn(r,i,i.pendingProps.children,o),i.child;case 12:return Nn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Oa(i,i.type,u.value),Nn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,js(i),f=Dn(f),u=u(f),i.flags|=1,Nn(r,i,u,o),i.child;case 14:return eE(r,i,i.type,i.pendingProps,o);case 15:return tE(r,i,i.type,i.pendingProps,o);case 19:return cE(r,i,o);case 31:return M1(r,i,o);case 22:return nE(r,i,o,i.pendingProps);case 24:return js(i),u=Dn(un),r===null?(f=gm(),f===null&&(f=Lt,m=mm(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},vm(i),Oa(i,un,f)):((r.lanes&o)!==0&&(_m(r,i),su(i,null,null,o),au()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Oa(i,un,u)):(u=m.cache,Oa(i,un,u),u!==f.cache&&dm(i,[un],o,!0))),Nn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Xi(r){r.flags|=4}function ep(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(UE())r.flags|=8192;else throw Fs=lh,ym}else r.flags&=-16777217}function fE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!CT(i))if(UE())r.flags|=8192;else throw Fs=lh,ym}function wh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ui():536870912,r.lanes|=i,Go|=i)}function fu(r,i){if(!gt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function qt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function P1(r,i,o){var u=i.pendingProps;switch(lm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),$i(un),rt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Oo(i)?Xi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,cm())),qt(i),null;case 26:var f=i.type,m=i.memoizedState;return r===null?(Xi(i),m!==null?(qt(i),fE(i,m)):(qt(i),ep(i,f,null,u,o))):m?m!==r.memoizedState?(Xi(i),qt(i),fE(i,m)):(qt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Xi(i),qt(i),ep(i,f,r,u,o)),null;case 27:if(hr(i),o=Oe.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}r=pe.current,Oo(i)?Gv(i):(r=_T(f,u,o),i.stateNode=r,Xi(i))}return qt(i),null;case 5:if(hr(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}if(m=pe.current,Oo(i))Gv(i);else{var _=zh(Oe.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}m[ye]=i,m[_e]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(xn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Xi(i)}}return qt(i),ep(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Oe.current,Oo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=In,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[ye]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||lT(r.nodeValue,o)),r||xa(i,!0)}else r=zh(r).createTextNode(u),r[ye]=i,i.stateNode=r}return qt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Oo(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[ye]=i}else ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),r=!1}else o=cm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Tr(i),i):(Tr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return qt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Oo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[ye]=i}else ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),f=!1}else f=cm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Tr(i),i):(Tr(i),null)}return Tr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),wh(i,i.updateQueue),qt(i),null);case 4:return rt(),r===null&&bp(i.stateNode.containerInfo),qt(i),null;case 10:return $i(i.type),qt(i),null;case 19:if(re(rn),u=i.memoizedState,u===null)return qt(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)fu(u,!1);else{if(en!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=fh(r),m!==null){for(i.flags|=128,fu(u,!1),r=m.updateQueue,i.updateQueue=r,wh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)zv(o,r),o=o.sibling;return me(rn,rn.current&1|2),gt&&qi(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&st()>Nh&&(i.flags|=128,f=!0,fu(u,!1),i.lanes=4194304)}else{if(!f)if(r=fh(m),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,wh(i,r),fu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!gt)return qt(i),null}else 2*st()-u.renderingStartTime>Nh&&o!==536870912&&(i.flags|=128,f=!0,fu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=st(),r.sibling=null,o=rn.current,me(rn,f?o&1|2:o&1),gt&&qi(i,u.treeForkCount),r):(qt(i),null);case 22:case 23:return Tr(i),Sm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&wh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&re(zs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),$i(un),qt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function L1(r,i){switch(lm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return $i(un),rt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return hr(i),null;case 31:if(i.memoizedState!==null){if(Tr(i),i.alternate===null)throw Error(a(340));ks()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Tr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));ks()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return re(rn),null;case 4:return rt(),null;case 10:return $i(i.type),null;case 22:case 23:return Tr(i),Sm(),r!==null&&re(zs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return $i(un),null;case 25:return null;default:return null}}function dE(r,i){switch(lm(i),i.tag){case 3:$i(un),rt();break;case 26:case 27:case 5:hr(i);break;case 4:rt();break;case 31:i.memoizedState!==null&&Tr(i);break;case 13:Tr(i);break;case 19:re(rn);break;case 10:$i(i.type);break;case 22:case 23:Tr(i),Sm(),r!==null&&re(zs);break;case 24:$i(un)}}function du(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,_=o.inst;u=m(),_.destroy=u}o=o.next}while(o!==f)}}catch(R){It(i,i.return,R)}}function Ua(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var _=u.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,f=i;var k=o,J=R;try{J()}catch(ae){It(f,k,ae)}}}u=u.next}while(u!==m)}}catch(ae){It(i,i.return,ae)}}function mE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{i_(i,o)}catch(u){It(r,r.return,u)}}}function pE(r,i,o){o.props=Gs(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){It(r,i,u)}}function mu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){It(r,i,f)}}function Ri(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){It(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){It(r,i,f)}else o.current=null}function gE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){It(r,r.return,f)}}function tp(r,i,o){try{var u=r.stateNode;iC(u,r.type,o,i),u[_e]=i}catch(f){It(r,r.return,f)}}function yE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ga(r.type)||r.tag===4}function np(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||yE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ga(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function rp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Wr));else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(rp(r,i,o),r=r.sibling;r!==null;)rp(r,i,o),r=r.sibling}function Rh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Rh(r,i,o),r=r.sibling;r!==null;)Rh(r,i,o),r=r.sibling}function vE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);xn(i,u,o),i[ye]=r,i[_e]=o}catch(m){It(r,r.return,m)}}var Wi=!1,fn=!1,ip=!1,_E=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function k1(r,i){if(r=r.containerInfo,wp=Kh,r=xv(r),Wd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var _=0,R=-1,k=-1,J=0,ae=0,ce=r,ee=null;t:for(;;){for(var ne;ce!==o||f!==0&&ce.nodeType!==3||(R=_+f),ce!==m||u!==0&&ce.nodeType!==3||(k=_+u),ce.nodeType===3&&(_+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)ee=ce,ce=ne;for(;;){if(ce===r)break t;if(ee===o&&++J===f&&(R=_),ee===m&&++ae===u&&(k=_),(ne=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ne}o=R===-1||k===-1?null:{start:R,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Rp={focusedElem:r,selectionRange:o},Kh=!1,Sn=i;Sn!==null;)if(i=Sn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Sn=r;else for(;Sn!==null;){switch(i=Sn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var Ie=Gs(o.type,f);r=u.getSnapshotBeforeUpdate(Ie,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(ze){It(o,o.return,ze)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Dp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Dp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Sn=r;break}Sn=i.return}}function EE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zi(r,o),u&4&&du(5,o);break;case 1:if(Zi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){It(o,o.return,_)}else{var f=Gs(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){It(o,o.return,_)}}u&64&&mE(o),u&512&&mu(o,o.return);break;case 3:if(Zi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{i_(r,i)}catch(_){It(o,o.return,_)}}break;case 27:i===null&&u&4&&vE(o);case 26:case 5:Zi(r,o),i===null&&u&4&&gE(o),u&512&&mu(o,o.return);break;case 12:Zi(r,o);break;case 31:Zi(r,o),u&4&&SE(r,o);break;case 13:Zi(r,o),u&4&&AE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=$1.bind(null,o),fC(r,o))));break;case 22:if(u=o.memoizedState!==null||Wi,!u){i=i!==null&&i.memoizedState!==null||fn,f=Wi;var m=fn;Wi=u,(fn=i)&&!m?ea(r,o,(o.subtreeFlags&8772)!==0):Zi(r,o),Wi=f,fn=m}break;case 30:break;default:Zi(r,o)}}function TE(r){var i=r.alternate;i!==null&&(r.alternate=null,TE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ft(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Qt=null,ir=!1;function Ji(r,i,o){for(o=o.child;o!==null;)bE(r,i,o),o=o.sibling}function bE(r,i,o){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(dr,o)}catch{}switch(o.tag){case 26:fn||Ri(o,i),Ji(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:fn||Ri(o,i);var u=Qt,f=ir;Ga(o.type)&&(Qt=o.stateNode,ir=!1),Ji(r,i,o),Su(o.stateNode),Qt=u,ir=f;break;case 5:fn||Ri(o,i);case 6:if(u=Qt,f=ir,Qt=null,Ji(r,i,o),Qt=u,ir=f,Qt!==null)if(ir)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(o.stateNode)}catch(m){It(o,i,m)}else try{Qt.removeChild(o.stateNode)}catch(m){It(o,i,m)}break;case 18:Qt!==null&&(ir?(r=Qt,mT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Zo(r)):mT(Qt,o.stateNode));break;case 4:u=Qt,f=ir,Qt=o.stateNode.containerInfo,ir=!0,Ji(r,i,o),Qt=u,ir=f;break;case 0:case 11:case 14:case 15:Ua(2,o,i),fn||Ua(4,o,i),Ji(r,i,o);break;case 1:fn||(Ri(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&pE(o,i,u)),Ji(r,i,o);break;case 21:Ji(r,i,o);break;case 22:fn=(u=fn)||o.memoizedState!==null,Ji(r,i,o),fn=u;break;default:Ji(r,i,o)}}function SE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Zo(r)}catch(o){It(i,i.return,o)}}}function AE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Zo(r)}catch(o){It(i,i.return,o)}}function U1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new _E),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new _E),i;default:throw Error(a(435,r.tag))}}function Ch(r,i){var o=U1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=K1.bind(null,r,u);u.then(f,f)}})}function ar(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,_=i,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(Ga(R.type)){Qt=R.stateNode,ir=!1;break e}break;case 5:Qt=R.stateNode,ir=!1;break e;case 3:case 4:Qt=R.stateNode.containerInfo,ir=!0;break e}R=R.return}if(Qt===null)throw Error(a(160));bE(m,_,f),Qt=null,ir=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)wE(i,r),i=i.sibling}var ri=null;function wE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ar(i,r),sr(r),u&4&&(Ua(3,r,r.return),du(3,r),Ua(5,r,r.return));break;case 1:ar(i,r),sr(r),u&512&&(fn||o===null||Ri(o,o.return)),u&64&&Wi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ri;if(ar(i,r),sr(r),u&512&&(fn||o===null||Ri(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Dt]||m[ye]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),xn(m,u,o),m[ye]=r,zt(m),u=m;break e;case"link":var _=wT("link","href",f).get(u+(o.href||""));if(_){for(var R=0;R<_.length;R++)if(m=_[R],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(R,1);break t}}m=f.createElement(u),xn(m,u,o),f.head.appendChild(m);break;case"meta":if(_=wT("meta","content",f).get(u+(o.content||""))){for(R=0;R<_.length;R++)if(m=_[R],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(R,1);break t}}m=f.createElement(u),xn(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[ye]=r,zt(m),u=m}r.stateNode=u}else RT(f,r.type,r.stateNode);else r.stateNode=AT(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?RT(f,r.type,r.stateNode):AT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&tp(r,r.memoizedProps,o.memoizedProps)}break;case 27:ar(i,r),sr(r),u&512&&(fn||o===null||Ri(o,o.return)),o!==null&&u&4&&tp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(ar(i,r),sr(r),u&512&&(fn||o===null||Ri(o,o.return)),r.flags&32){f=r.stateNode;try{rr(f,"")}catch(Ie){It(r,r.return,Ie)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,tp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(ip=!0);break;case 6:if(ar(i,r),sr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ie){It(r,r.return,Ie)}}break;case 3:if(Hh=null,f=ri,ri=Bh(i.containerInfo),ar(i,r),ri=f,sr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Zo(i.containerInfo)}catch(Ie){It(r,r.return,Ie)}ip&&(ip=!1,RE(r));break;case 4:u=ri,ri=Bh(r.stateNode.containerInfo),ar(i,r),sr(r),ri=u;break;case 12:ar(i,r),sr(r);break;case 31:ar(i,r),sr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ch(r,u)));break;case 13:ar(i,r),sr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Dh=st()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ch(r,u)));break;case 22:f=r.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,J=Wi,ae=fn;if(Wi=J||f,fn=ae||k,ar(i,r),fn=ae,Wi=J,sr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||k||Wi||fn||$s(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(m=k.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=k.stateNode;var ce=k.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;R.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ie){It(k,k.return,Ie)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(Ie){It(k,k.return,Ie)}}}else if(i.tag===18){if(o===null){k=i;try{var ne=k.stateNode;f?pT(ne,!0):pT(k.stateNode,!1)}catch(Ie){It(k,k.return,Ie)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Ch(r,o))));break;case 19:ar(i,r),sr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Ch(r,u)));break;case 30:break;case 21:break;default:ar(i,r),sr(r)}}function sr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(yE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=np(r);Rh(r,m,f);break;case 5:var _=o.stateNode;o.flags&32&&(rr(_,""),o.flags&=-33);var R=np(r);Rh(r,R,_);break;case 3:case 4:var k=o.stateNode.containerInfo,J=np(r);rp(r,J,k);break;default:throw Error(a(161))}}catch(ae){It(r,r.return,ae)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function RE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;RE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Zi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)EE(r,i.alternate,i),i=i.sibling}function $s(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ua(4,i,i.return),$s(i);break;case 1:Ri(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&pE(i,i.return,o),$s(i);break;case 27:Su(i.stateNode);case 26:case 5:Ri(i,i.return),$s(i);break;case 22:i.memoizedState===null&&$s(i);break;case 30:$s(i);break;default:$s(i)}r=r.sibling}}function ea(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:ea(f,m,o),du(4,m);break;case 1:if(ea(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(J){It(u,u.return,J)}if(u=m,f=u.updateQueue,f!==null){var R=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)r_(k[f],R)}catch(J){It(u,u.return,J)}}o&&_&64&&mE(m),mu(m,m.return);break;case 27:vE(m);case 26:case 5:ea(f,m,o),o&&u===null&&_&4&&gE(m),mu(m,m.return);break;case 12:ea(f,m,o);break;case 31:ea(f,m,o),o&&_&4&&SE(f,m);break;case 13:ea(f,m,o),o&&_&4&&AE(f,m);break;case 22:m.memoizedState===null&&ea(f,m,o),mu(m,m.return);break;case 30:break;default:ea(f,m,o)}i=i.sibling}}function ap(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&eu(o))}function sp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&eu(r))}function ii(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)CE(r,i,o,u),i=i.sibling}function CE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ii(r,i,o,u),f&2048&&du(9,i);break;case 1:ii(r,i,o,u);break;case 3:ii(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&eu(r)));break;case 12:if(f&2048){ii(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,_=m.id,R=m.onPostCommit;typeof R=="function"&&R(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){It(i,i.return,k)}}else ii(r,i,o,u);break;case 31:ii(r,i,o,u);break;case 13:ii(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?ii(r,i,o,u):pu(r,i):m._visibility&2?ii(r,i,o,u):(m._visibility|=2,Fo(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&ap(_,i);break;case 24:ii(r,i,o,u),f&2048&&sp(i.alternate,i);break;default:ii(r,i,o,u)}}function Fo(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,_=i,R=o,k=u,J=_.flags;switch(_.tag){case 0:case 11:case 15:Fo(m,_,R,k,f),du(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Fo(m,_,R,k,f):pu(m,_):(ae._visibility|=2,Fo(m,_,R,k,f)),f&&J&2048&&ap(_.alternate,_);break;case 24:Fo(m,_,R,k,f),f&&J&2048&&sp(_.alternate,_);break;default:Fo(m,_,R,k,f)}i=i.sibling}}function pu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:pu(o,u),f&2048&&ap(u.alternate,u);break;case 24:pu(o,u),f&2048&&sp(u.alternate,u);break;default:pu(o,u)}i=i.sibling}}var gu=8192;function Ho(r,i,o){if(r.subtreeFlags&gu)for(r=r.child;r!==null;)IE(r,i,o),r=r.sibling}function IE(r,i,o){switch(r.tag){case 26:Ho(r,i,o),r.flags&gu&&r.memoizedState!==null&&AC(o,ri,r.memoizedState,r.memoizedProps);break;case 5:Ho(r,i,o);break;case 3:case 4:var u=ri;ri=Bh(r.stateNode.containerInfo),Ho(r,i,o),ri=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=gu,gu=16777216,Ho(r,i,o),gu=u):Ho(r,i,o));break;default:Ho(r,i,o)}}function DE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function yu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,xE(u,r)}DE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)NE(r),r=r.sibling}function NE(r){switch(r.tag){case 0:case 11:case 15:yu(r),r.flags&2048&&Ua(9,r,r.return);break;case 3:yu(r);break;case 12:yu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Ih(r)):yu(r);break;default:yu(r)}}function Ih(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Sn=u,xE(u,r)}DE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ua(8,i,i.return),Ih(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ih(i));break;default:Ih(i)}r=r.sibling}}function xE(r,i){for(;Sn!==null;){var o=Sn;switch(o.tag){case 0:case 11:case 15:Ua(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:eu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Sn=u;else e:for(o=r;Sn!==null;){u=Sn;var f=u.sibling,m=u.return;if(TE(u),u===o){Sn=null;break e}if(f!==null){f.return=m,Sn=f;break e}Sn=m}}}var j1={getCacheForType:function(r){var i=Dn(un),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Dn(un).controller.signal}},z1=typeof WeakMap=="function"?WeakMap:Map,At=0,Lt=null,lt=null,ht=0,Ct=0,br=null,ja=!1,qo=!1,op=!1,ta=0,en=0,za=0,Ks=0,lp=0,Sr=0,Go=0,vu=null,or=null,up=!1,Dh=0,OE=0,Nh=1/0,xh=null,Ba=null,yn=0,Fa=null,$o=null,na=0,cp=0,hp=null,ME=null,_u=0,fp=null;function Ar(){return(At&2)!==0&&ht!==0?ht&-ht:$.T!==null?vp():ge()}function VE(){if(Sr===0)if((ht&536870912)===0||gt){var r=di;di<<=1,(di&3932160)===0&&(di=262144),Sr=r}else Sr=536870912;return r=Er.current,r!==null&&(r.flags|=32),Sr}function lr(r,i,o){(r===Lt&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(Ko(r,0),Ha(r,ht,Sr,!1)),mi(r,o),((At&2)===0||r!==Lt)&&(r===Lt&&((At&2)===0&&(Ks|=o),en===4&&Ha(r,ht,Sr,!1)),Ci(r))}function PE(r,i,o){if((At&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||pr(r,i),f=u?H1(r,i):mp(r,i,!0),m=u;do{if(f===0){qo&&!u&&Ha(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!B1(o)){f=mp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var R=r;f=vu;var k=R.current.memoizedState.isDehydrated;if(k&&(Ko(R,_).flags|=256),_=mp(R,_,!1),_!==2){if(op&&!k){R.errorRecoveryDisabledLanes|=m,Ks|=m,f=4;break e}m=or,or=f,m!==null&&(or===null?or=m:or.push.apply(or,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){Ko(r,0),Ha(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ha(u,i,Sr,!ja);break e;case 2:or=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Dh+300-st(),10<f)){if(Ha(u,i,Sr,!ja),mr(u,0,!0)!==0)break e;na=i,u.timeoutHandle=fT(LE.bind(null,u,o,or,xh,up,i,Sr,Ks,Go,ja,m,"Throttled",-0,0),f);break e}LE(u,o,or,xh,up,i,Sr,Ks,Go,ja,m,null,-0,0)}}break}while(!0);Ci(r)}function LE(r,i,o,u,f,m,_,R,k,J,ae,ce,ee,ne){if(r.timeoutHandle=-1,ce=i.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wr},IE(i,m,ce);var Ie=(m&62914560)===m?Dh-st():(m&4194048)===m?OE-st():0;if(Ie=wC(ce,Ie),Ie!==null){na=m,r.cancelPendingCommit=Ie(qE.bind(null,r,i,m,o,u,f,_,R,k,ae,ce,null,ee,ne)),Ha(r,m,_,!J);return}}qE(r,i,m,o,u,f,_,R,k)}function B1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!vr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ha(r,i,o,u){i&=~lp,i&=~Ks,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-$t(f),_=1<<m;u[m]=-1,f&=~_}o!==0&&ji(r,o,i)}function Oh(){return(At&6)===0?(Eu(0),!1):!0}function dp(){if(lt!==null){if(Ct===0)var r=lt.return;else r=lt,Gi=Us=null,Dm(r),ko=null,nu=0,r=lt;for(;r!==null;)dE(r.alternate,r),r=r.return;lt=null}}function Ko(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,oC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),na=0,dp(),Lt=r,lt=o=Hi(r.current,null),ht=i,Ct=0,br=null,ja=!1,qo=pr(r,i),op=!1,Go=Sr=lp=Ks=za=en=0,or=vu=null,up=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-$t(u),m=1<<f;i|=r[f],u&=~m}return ta=i,Zc(),o}function kE(r,i){Ze=null,$.H=cu,i===Lo||i===oh?(i=Zv(),Ct=3):i===ym?(i=Zv(),Ct=4):Ct=i===Gm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,br=i,lt===null&&(en=1,Th(r,kr(i,r.current)))}function UE(){var r=Er.current;return r===null?!0:(ht&4194048)===ht?Br===null:(ht&62914560)===ht||(ht&536870912)!==0?r===Br:!1}function jE(){var r=$.H;return $.H=cu,r===null?cu:r}function zE(){var r=$.A;return $.A=j1,r}function Mh(){en=4,ja||(ht&4194048)!==ht&&Er.current!==null||(qo=!0),(za&134217727)===0&&(Ks&134217727)===0||Lt===null||Ha(Lt,ht,Sr,!1)}function mp(r,i,o){var u=At;At|=2;var f=jE(),m=zE();(Lt!==r||ht!==i)&&(xh=null,Ko(r,i)),i=!1;var _=en;e:do try{if(Ct!==0&&lt!==null){var R=lt,k=br;switch(Ct){case 8:dp(),_=6;break e;case 3:case 2:case 9:case 6:Er.current===null&&(i=!0);var J=Ct;if(Ct=0,br=null,Yo(r,R,k,J),o&&qo){_=0;break e}break;default:J=Ct,Ct=0,br=null,Yo(r,R,k,J)}}F1(),_=en;break}catch(ae){kE(r,ae)}while(!0);return i&&r.shellSuspendCounter++,Gi=Us=null,At=u,$.H=f,$.A=m,lt===null&&(Lt=null,ht=0,Zc()),_}function F1(){for(;lt!==null;)BE(lt)}function H1(r,i){var o=At;At|=2;var u=jE(),f=zE();Lt!==r||ht!==i?(xh=null,Nh=st()+500,Ko(r,i)):qo=pr(r,i);e:do try{if(Ct!==0&&lt!==null){i=lt;var m=br;t:switch(Ct){case 1:Ct=0,br=null,Yo(r,i,m,1);break;case 2:case 9:if(Wv(m)){Ct=0,br=null,FE(i);break}i=function(){Ct!==2&&Ct!==9||Lt!==r||(Ct=7),Ci(r)},m.then(i,i);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:Wv(m)?(Ct=0,br=null,FE(i)):(Ct=0,br=null,Yo(r,i,m,7));break;case 5:var _=null;switch(lt.tag){case 26:_=lt.memoizedState;case 5:case 27:var R=lt;if(_?CT(_):R.stateNode.complete){Ct=0,br=null;var k=R.sibling;if(k!==null)lt=k;else{var J=R.return;J!==null?(lt=J,Vh(J)):lt=null}break t}}Ct=0,br=null,Yo(r,i,m,5);break;case 6:Ct=0,br=null,Yo(r,i,m,6);break;case 8:dp(),en=6;break e;default:throw Error(a(462))}}q1();break}catch(ae){kE(r,ae)}while(!0);return Gi=Us=null,$.H=u,$.A=f,At=o,lt!==null?0:(Lt=null,ht=0,Zc(),en)}function q1(){for(;lt!==null&&!Be();)BE(lt)}function BE(r){var i=hE(r.alternate,r,ta);r.memoizedProps=r.pendingProps,i===null?Vh(r):lt=i}function FE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=aE(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=aE(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Dm(i);default:dE(o,i),i=lt=zv(i,ta),i=hE(o,i,ta)}r.memoizedProps=r.pendingProps,i===null?Vh(r):lt=i}function Yo(r,i,o,u){Gi=Us=null,Dm(i),ko=null,nu=0;var f=i.return;try{if(O1(r,f,i,o,ht)){en=1,Th(r,kr(o,r.current)),lt=null;return}}catch(m){if(f!==null)throw lt=f,m;en=1,Th(r,kr(o,r.current)),lt=null;return}i.flags&32768?(gt||u===1?r=!0:qo||(ht&536870912)!==0?r=!1:(ja=r=!0,(u===2||u===9||u===3||u===6)&&(u=Er.current,u!==null&&u.tag===13&&(u.flags|=16384))),HE(i,r)):Vh(i)}function Vh(r){var i=r;do{if((i.flags&32768)!==0){HE(i,ja);return}r=i.return;var o=P1(i.alternate,i,ta);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=r}while(i!==null);en===0&&(en=5)}function HE(r,i){do{var o=L1(r.alternate,r);if(o!==null){o.flags&=32767,lt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){lt=r;return}lt=r=o}while(r!==null);en=6,lt=null}function qE(r,i,o,u,f,m,_,R,k){r.cancelPendingCommit=null;do Ph();while(yn!==0);if((At&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=nm,Ul(r,o,m,_,R,k),r===Lt&&(lt=Lt=null,ht=0),$o=i,Fa=r,na=o,cp=m,hp=f,ME=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,Y1(Tn,function(){return QE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,f=ue.p,ue.p=2,_=At,At|=4;try{k1(r,i,o)}finally{At=_,ue.p=f,$.T=u}}yn=1,GE(),$E(),KE()}}function GE(){if(yn===1){yn=0;var r=Fa,i=$o,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var u=ue.p;ue.p=2;var f=At;At|=4;try{wE(i,r);var m=Rp,_=xv(r.containerInfo),R=m.focusedElem,k=m.selectionRange;if(_!==R&&R&&R.ownerDocument&&Nv(R.ownerDocument.documentElement,R)){if(k!==null&&Wd(R)){var J=k.start,ae=k.end;if(ae===void 0&&(ae=J),"selectionStart"in R)R.selectionStart=J,R.selectionEnd=Math.min(ae,R.value.length);else{var ce=R.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),Ie=R.textContent.length,ze=Math.min(k.start,Ie),Vt=k.end===void 0?ze:Math.min(k.end,Ie);!ne.extend&&ze>Vt&&(_=Vt,Vt=ze,ze=_);var K=Dv(R,ze),z=Dv(R,Vt);if(K&&z&&(ne.rangeCount!==1||ne.anchorNode!==K.node||ne.anchorOffset!==K.offset||ne.focusNode!==z.node||ne.focusOffset!==z.offset)){var W=ce.createRange();W.setStart(K.node,K.offset),ne.removeAllRanges(),ze>Vt?(ne.addRange(W),ne.extend(z.node,z.offset)):(W.setEnd(z.node,z.offset),ne.addRange(W))}}}}for(ce=[],ne=R;ne=ne.parentNode;)ne.nodeType===1&&ce.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ce.length;R++){var oe=ce[R];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Kh=!!wp,Rp=wp=null}finally{At=f,ue.p=u,$.T=o}}r.current=i,yn=2}}function $E(){if(yn===2){yn=0;var r=Fa,i=$o,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var u=ue.p;ue.p=2;var f=At;At|=4;try{EE(r,i.alternate,i)}finally{At=f,ue.p=u,$.T=o}}yn=3}}function KE(){if(yn===4||yn===3){yn=0,Rt();var r=Fa,i=$o,o=na,u=ME;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?yn=5:(yn=0,$o=Fa=null,YE(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ba=null),fe(o),i=i.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(dr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=$.T,f=ue.p,ue.p=2,$.T=null;try{for(var m=r.onRecoverableError,_=0;_<u.length;_++){var R=u[_];m(R.value,{componentStack:R.stack})}}finally{$.T=i,ue.p=f}}(na&3)!==0&&Ph(),Ci(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===fp?_u++:(_u=0,fp=r):_u=0,Eu(0)}}function YE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,eu(i)))}function Ph(){return GE(),$E(),KE(),QE()}function QE(){if(yn!==5)return!1;var r=Fa,i=cp;cp=0;var o=fe(na),u=$.T,f=ue.p;try{ue.p=32>o?32:o,$.T=null,o=hp,hp=null;var m=Fa,_=na;if(yn=0,$o=Fa=null,na=0,(At&6)!==0)throw Error(a(331));var R=At;if(At|=4,NE(m.current),CE(m,m.current,_,o),At=R,Eu(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(dr,m)}catch{}return!0}finally{ue.p=f,$.T=u,YE(r,i)}}function XE(r,i,o){i=kr(o,i),i=qm(r.stateNode,i,2),r=Pa(r,i,2),r!==null&&(mi(r,2),Ci(r))}function It(r,i,o){if(r.tag===3)XE(r,r,o);else for(;i!==null;){if(i.tag===3){XE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ba===null||!Ba.has(u))){r=kr(o,r),o=W_(2),u=Pa(i,o,2),u!==null&&(J_(o,u,i,r),mi(u,2),Ci(u));break}}i=i.return}}function pp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new z1;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(op=!0,f.add(o),r=G1.bind(null,r,i,o),i.then(r,r))}function G1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Lt===r&&(ht&o)===o&&(en===4||en===3&&(ht&62914560)===ht&&300>st()-Dh?(At&2)===0&&Ko(r,0):lp|=o,Go===ht&&(Go=0)),Ci(r)}function WE(r,i){i===0&&(i=Ui()),r=Ps(r,i),r!==null&&(mi(r,i),Ci(r))}function $1(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),WE(r,o)}function K1(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),WE(r,o)}function Y1(r,i){return ct(r,i)}var Lh=null,Qo=null,gp=!1,kh=!1,yp=!1,qa=0;function Ci(r){r!==Qo&&r.next===null&&(Qo===null?Lh=Qo=r:Qo=Qo.next=r),kh=!0,gp||(gp=!0,X1())}function Eu(r,i){if(!yp&&kh){yp=!0;do for(var o=!1,u=Lh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var _=u.suspendedLanes,R=u.pingedLanes;m=(1<<31-$t(42|r)+1)-1,m&=f&~(_&~R),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,tT(u,m))}else m=ht,m=mr(u,u===Lt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||pr(u,m)||(o=!0,tT(u,m));u=u.next}while(o);yp=!1}}function Q1(){JE()}function JE(){kh=gp=!1;var r=0;qa!==0&&sC()&&(r=qa);for(var i=st(),o=null,u=Lh;u!==null;){var f=u.next,m=ZE(u,i);m===0?(u.next=null,o===null?Lh=f:o.next=f,f===null&&(Qo=o)):(o=u,(r!==0||(m&3)!==0)&&(kh=!0)),u=f}yn!==0&&yn!==5||Eu(r),qa!==0&&(qa=0)}function ZE(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var _=31-$t(m),R=1<<_,k=f[_];k===-1?((R&o)===0||(R&u)!==0)&&(f[_]=go(R,i)):k<=i&&(r.expiredLanes|=R),m&=~R}if(i=Lt,o=ht,o=mr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&vt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||pr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&vt(u),fe(o)){case 2:case 8:o=Gn;break;case 32:o=Tn;break;case 268435456:o=Ts;break;default:o=Tn}return u=eT.bind(null,r),o=ct(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&vt(u),r.callbackPriority=2,r.callbackNode=null,2}function eT(r,i){if(yn!==0&&yn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Ph()&&r.callbackNode!==o)return null;var u=ht;return u=mr(r,r===Lt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(PE(r,u,i),ZE(r,st()),r.callbackNode!=null&&r.callbackNode===o?eT.bind(null,r):null)}function tT(r,i){if(Ph())return null;PE(r,i,!0)}function X1(){lC(function(){(At&6)!==0?ct(Zn,Q1):JE()})}function vp(){if(qa===0){var r=Vo;r===0&&(r=Kn,Kn<<=1,(Kn&261888)===0&&(Kn=256)),qa=r}return qa}function nT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:_o(""+r)}function rT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function W1(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=nT((f[_e]||null).action),_=u.submitter;_&&(i=(i=_[_e]||null)?nT(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var R=new Ei("action","action",null,u,f);r.push({event:R,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qa!==0){var k=_?rT(f,_):new FormData(f);Um(o,{pending:!0,data:k,method:f.method,action:m},null,k)}}else typeof m=="function"&&(R.preventDefault(),k=_?rT(f,_):new FormData(f),Um(o,{pending:!0,data:k,method:f.method,action:m},m,k))},currentTarget:f}]})}}for(var _p=0;_p<tm.length;_p++){var Ep=tm[_p],J1=Ep.toLowerCase(),Z1=Ep[0].toUpperCase()+Ep.slice(1);ni(J1,"on"+Z1)}ni(Vv,"onAnimationEnd"),ni(Pv,"onAnimationIteration"),ni(Lv,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(p1,"onTransitionRun"),ni(g1,"onTransitionStart"),ni(y1,"onTransitionCancel"),ni(kv,"onTransitionEnd"),kn("onMouseEnter",["mouseout","mouseover"]),kn("onMouseLeave",["mouseout","mouseover"]),kn("onPointerEnter",["pointerout","pointerover"]),kn("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tu));function iT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var _=u.length-1;0<=_;_--){var R=u[_],k=R.instance,J=R.currentTarget;if(R=R.listener,k!==m&&f.isPropagationStopped())break e;m=R,f.currentTarget=J;try{m(f)}catch(ae){Jc(ae)}f.currentTarget=null,m=k}else for(_=0;_<u.length;_++){if(R=u[_],k=R.instance,J=R.currentTarget,R=R.listener,k!==m&&f.isPropagationStopped())break e;m=R,f.currentTarget=J;try{m(f)}catch(ae){Jc(ae)}f.currentTarget=null,m=k}}}}function ut(r,i){var o=i[He];o===void 0&&(o=i[He]=new Set);var u=r+"__bubble";o.has(u)||(aT(i,r,2,!1),o.add(u))}function Tp(r,i,o){var u=0;i&&(u|=4),aT(o,r,u,i)}var Uh="_reactListening"+Math.random().toString(36).slice(2);function bp(r){if(!r[Uh]){r[Uh]=!0,er.forEach(function(o){o!=="selectionchange"&&(eC.has(o)||Tp(o,!1,r),Tp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Uh]||(i[Uh]=!0,Tp("selectionchange",!1,i))}}function aT(r,i,o,u){switch(VT(i)){case 2:var f=IC;break;case 8:f=DC;break;default:f=kp}o=f.bind(null,i,o,r),f=void 0,!Cs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Sp(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var R=u.stateNode.containerInfo;if(R===f)break;if(_===4)for(_=u.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;R!==null;){if(_=Ut(R),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){u=m=_;continue e}R=R.parentNode}}u=u.return}wa(function(){var J=m,ae=Mr(o),ce=[];e:{var ee=Uv.get(r);if(ee!==void 0){var ne=Ei,Ie=r;switch(r){case"keypress":if(Ds(o)===0)break e;case"keydown":case"keyup":ne=Qc;break;case"focusin":Ie="focus",ne=xs;break;case"focusout":Ie="blur",ne=xs;break;case"beforeblur":case"afterblur":ne=xs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=y;break;case Vv:case Pv:case Lv:ne=Fc;break;case kv:ne=D;break;case"scroll":case"scrollend":ne=Gl;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=Hc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Fi;break;case"toggle":case"beforetoggle":ne=Je}var ze=(i&4)!==0,Vt=!ze&&(r==="scroll"||r==="scrollend"),K=ze?ee!==null?ee+"Capture":null:ee;ze=[];for(var z=J,W;z!==null;){var oe=z;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||K===null||(oe=Jr(z,K),oe!=null&&ze.push(bu(z,oe,W))),Vt)break;z=z.return}0<ze.length&&(ee=new ne(ee,Ie,null,o,ae),ce.push({event:ee,listeners:ze}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",ee&&o!==Fl&&(Ie=o.relatedTarget||o.fromElement)&&(Ut(Ie)||Ie[Re]))break e;if((ne||ee)&&(ee=ae.window===ae?ae:(ee=ae.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(Ie=o.relatedTarget||o.toElement,ne=J,Ie=Ie?Ut(Ie):null,Ie!==null&&(Vt=l(Ie),ze=Ie.tag,Ie!==Vt||ze!==5&&ze!==27&&ze!==6)&&(Ie=null)):(ne=null,Ie=J),ne!==Ie)){if(ze=$l,oe="onMouseLeave",K="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(ze=Fi,oe="onPointerLeave",K="onPointerEnter",z="pointer"),Vt=ne==null?ee:jt(ne),W=Ie==null?ee:jt(Ie),ee=new ze(oe,z+"leave",ne,o,ae),ee.target=Vt,ee.relatedTarget=W,oe=null,Ut(ae)===J&&(ze=new ze(K,z+"enter",Ie,o,ae),ze.target=W,ze.relatedTarget=Vt,oe=ze),Vt=oe,ne&&Ie)t:{for(ze=tC,K=ne,z=Ie,W=0,oe=K;oe;oe=ze(oe))W++;oe=0;for(var ke=z;ke;ke=ze(ke))oe++;for(;0<W-oe;)K=ze(K),W--;for(;0<oe-W;)z=ze(z),oe--;for(;W--;){if(K===z||z!==null&&K===z.alternate){ze=K;break t}K=ze(K),z=ze(z)}ze=null}else ze=null;ne!==null&&sT(ce,ee,ne,ze,!1),Ie!==null&&Vt!==null&&sT(ce,Vt,Ie,ze,!0)}}e:{if(ee=J?jt(J):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var Et=Sv;else if(Tv(ee))if(Av)Et=f1;else{Et=c1;var xe=u1}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?J&&vo(J.elementType)&&(Et=Sv):Et=h1;if(Et&&(Et=Et(r,J))){bv(ce,Et,o,ae);break e}xe&&xe(r,ee,J),r==="focusout"&&J&&ee.type==="number"&&J.memoizedProps.value!=null&&jl(ee,"number",ee.value)}switch(xe=J?jt(J):window,r){case"focusin":(Tv(xe)||xe.contentEditable==="true")&&(Ro=xe,Jd=J,Wl=null);break;case"focusout":Wl=Jd=Ro=null;break;case"mousedown":Zd=!0;break;case"contextmenu":case"mouseup":case"dragend":Zd=!1,Ov(ce,o,ae);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":Ov(ce,o,ae)}var nt;if(St)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else wo?Os(r,o)&&(ft="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(Si&&o.locale!=="ko"&&(wo||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&wo&&(nt=ql()):(_i=ae,Hl="value"in _i?_i.value:_i.textContent,wo=!0)),xe=jh(J,ft),0<xe.length&&(ft=new bi(ft,r,null,o,ae),ce.push({event:ft,listeners:xe}),nt?ft.data=nt:(nt=Ao(o),nt!==null&&(ft.data=nt)))),(nt=Pr?a1(r,o):s1(r,o))&&(ft=jh(J,"onBeforeInput"),0<ft.length&&(xe=new bi("onBeforeInput","beforeinput",null,o,ae),ce.push({event:xe,listeners:ft}),xe.data=nt)),W1(ce,r,J,o,ae)}iT(ce,i)})}function bu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function jh(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Jr(r,o),f!=null&&u.unshift(bu(r,f,m)),f=Jr(r,i),f!=null&&u.push(bu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function tC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function sT(r,i,o,u,f){for(var m=i._reactName,_=[];o!==null&&o!==u;){var R=o,k=R.alternate,J=R.stateNode;if(R=R.tag,k!==null&&k===u)break;R!==5&&R!==26&&R!==27||J===null||(k=J,f?(J=Jr(o,m),J!=null&&_.unshift(bu(o,J,k))):f||(J=Jr(o,m),J!=null&&_.push(bu(o,J,k)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var nC=/\r\n?/g,rC=/\u0000|\uFFFD/g;function oT(r){return(typeof r=="string"?r:""+r).replace(nC,`
`).replace(rC,"")}function lT(r,i){return i=oT(i),oT(r)===i}function Mt(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||rr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&rr(r,""+u);break;case"className":ln(r,"class",u);break;case"tabIndex":ln(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":ln(r,o,u);break;case"style":Bl(r,u,m);break;case"data":if(i!=="object"){ln(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=_o(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Mt(r,i,"name",f.name,f,null),Mt(r,i,"formEncType",f.formEncType,f,null),Mt(r,i,"formMethod",f.formMethod,f,null),Mt(r,i,"formTarget",f.formTarget,f,null)):(Mt(r,i,"encType",f.encType,f,null),Mt(r,i,"method",f.method,f,null),Mt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=_o(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Wr);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=_o(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ut("beforetoggle",r),ut("toggle",r),Xt(r,"popover",u);break;case"xlinkActuate":Nt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=jc.get(o)||o,Xt(r,o,u))}}function Ap(r,i,o,u,f,m){switch(o){case"style":Bl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?rr(r,u):(typeof u=="number"||typeof u=="bigint")&&rr(r,""+u);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ln.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[_e]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Xt(r,o,u)}}}function xn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var _=o[m];if(_!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Mt(r,i,m,_,o,null)}}f&&Mt(r,i,"srcSet",o.srcSet,o,null),u&&Mt(r,i,"src",o.src,o,null);return;case"input":ut("invalid",r);var R=m=_=f=null,k=null,J=null;for(u in o)if(o.hasOwnProperty(u)){var ae=o[u];if(ae!=null)switch(u){case"name":f=ae;break;case"type":_=ae;break;case"checked":k=ae;break;case"defaultChecked":J=ae;break;case"value":m=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,i));break;default:Mt(r,i,u,ae,o,null)}}Lc(r,m,R,k,J,_,f,!1);return;case"select":ut("invalid",r),u=_=m=null;for(f in o)if(o.hasOwnProperty(f)&&(R=o[f],R!=null))switch(f){case"value":m=R;break;case"defaultValue":_=R;break;case"multiple":u=R;default:Mt(r,i,f,R,o,null)}i=m,o=_,r.multiple=!!u,i!=null?Ta(r,!!u,i,!1):o!=null&&Ta(r,!!u,o,!0);return;case"textarea":ut("invalid",r),m=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(R=o[_],R!=null))switch(_){case"value":u=R;break;case"defaultValue":f=R;break;case"children":m=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(a(91));break;default:Mt(r,i,_,R,o,null)}ba(r,u,f,m);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Mt(r,i,k,u,o,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(u=0;u<Tu.length;u++)ut(Tu[u],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in o)if(o.hasOwnProperty(J)&&(u=o[J],u!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Mt(r,i,J,u,o,null)}return;default:if(vo(i)){for(ae in o)o.hasOwnProperty(ae)&&(u=o[ae],u!==void 0&&Ap(r,i,ae,u,o,void 0));return}}for(R in o)o.hasOwnProperty(R)&&(u=o[R],u!=null&&Mt(r,i,R,u,o,null))}function iC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,R=null,k=null,J=null,ae=null;for(ne in o){var ce=o[ne];if(o.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":k=ce;default:u.hasOwnProperty(ne)||Mt(r,i,ne,null,u,ce)}}for(var ee in u){var ne=u[ee];if(ce=o[ee],u.hasOwnProperty(ee)&&(ne!=null||ce!=null))switch(ee){case"type":m=ne;break;case"name":f=ne;break;case"checked":J=ne;break;case"defaultChecked":ae=ne;break;case"value":_=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,i));break;default:ne!==ce&&Mt(r,i,ee,ne,u,ce)}}yo(r,_,R,k,J,ae,m,f);return;case"select":ne=_=R=ee=null;for(m in o)if(k=o[m],o.hasOwnProperty(m)&&k!=null)switch(m){case"value":break;case"multiple":ne=k;default:u.hasOwnProperty(m)||Mt(r,i,m,null,u,k)}for(f in u)if(m=u[f],k=o[f],u.hasOwnProperty(f)&&(m!=null||k!=null))switch(f){case"value":ee=m;break;case"defaultValue":R=m;break;case"multiple":_=m;default:m!==k&&Mt(r,i,f,m,u,k)}i=R,o=_,u=ne,ee!=null?Ta(r,!!o,ee,!1):!!u!=!!o&&(i!=null?Ta(r,!!o,i,!0):Ta(r,!!o,o?[]:"",!1));return;case"textarea":ne=ee=null;for(R in o)if(f=o[R],o.hasOwnProperty(R)&&f!=null&&!u.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Mt(r,i,R,null,u,f)}for(_ in u)if(f=u[_],m=o[_],u.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":ee=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Mt(r,i,_,f,u,m)}kc(r,ee,ne);return;case"option":for(var Ie in o)if(ee=o[Ie],o.hasOwnProperty(Ie)&&ee!=null&&!u.hasOwnProperty(Ie))switch(Ie){case"selected":r.selected=!1;break;default:Mt(r,i,Ie,null,u,ee)}for(k in u)if(ee=u[k],ne=o[k],u.hasOwnProperty(k)&&ee!==ne&&(ee!=null||ne!=null))switch(k){case"selected":r.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:Mt(r,i,k,ee,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in o)ee=o[ze],o.hasOwnProperty(ze)&&ee!=null&&!u.hasOwnProperty(ze)&&Mt(r,i,ze,null,u,ee);for(J in u)if(ee=u[J],ne=o[J],u.hasOwnProperty(J)&&ee!==ne&&(ee!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(a(137,i));break;default:Mt(r,i,J,ee,u,ne)}return;default:if(vo(i)){for(var Vt in o)ee=o[Vt],o.hasOwnProperty(Vt)&&ee!==void 0&&!u.hasOwnProperty(Vt)&&Ap(r,i,Vt,void 0,u,ee);for(ae in u)ee=u[ae],ne=o[ae],!u.hasOwnProperty(ae)||ee===ne||ee===void 0&&ne===void 0||Ap(r,i,ae,ee,u,ne);return}}for(var K in o)ee=o[K],o.hasOwnProperty(K)&&ee!=null&&!u.hasOwnProperty(K)&&Mt(r,i,K,null,u,ee);for(ce in u)ee=u[ce],ne=o[ce],!u.hasOwnProperty(ce)||ee===ne||ee==null&&ne==null||Mt(r,i,ce,ee,u,ne)}function uT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,_=f.initiatorType,R=f.duration;if(m&&R&&uT(_)){for(_=0,R=f.responseEnd,u+=1;u<o.length;u++){var k=o[u],J=k.startTime;if(J>R)break;var ae=k.transferSize,ce=k.initiatorType;ae&&uT(ce)&&(k=k.responseEnd,_+=ae*(k<R?1:(R-J)/(k-J)))}if(--u,i+=8*(m+_)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var wp=null,Rp=null;function zh(r){return r.nodeType===9?r:r.ownerDocument}function cT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Cp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ip=null;function sC(){var r=window.event;return r&&r.type==="popstate"?r===Ip?!1:(Ip=r,!0):(Ip=null,!1)}var fT=typeof setTimeout=="function"?setTimeout:void 0,oC=typeof clearTimeout=="function"?clearTimeout:void 0,dT=typeof Promise=="function"?Promise:void 0,lC=typeof queueMicrotask=="function"?queueMicrotask:typeof dT<"u"?function(r){return dT.resolve(null).then(r).catch(uC)}:fT;function uC(r){setTimeout(function(){throw r})}function Ga(r){return r==="head"}function mT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),Zo(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Su(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Su(o);for(var m=o.firstChild;m;){var _=m.nextSibling,R=m.nodeName;m[Dt]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=_}}else o==="body"&&Su(r.ownerDocument.body);o=f}while(o);Zo(i)}function pT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Dp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dp(o),Ft(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function cC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Dt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Fr(r.nextSibling),r===null)break}return null}function hC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Fr(r.nextSibling),r===null))return null;return r}function gT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Fr(r.nextSibling),r===null))return null;return r}function Np(r){return r.data==="$?"||r.data==="$~"}function xp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function fC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Fr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Op=null;function yT(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Fr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function vT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function _T(r,i,o){switch(i=zh(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Su(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ft(r)}var Hr=new Map,ET=new Set;function Bh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ra=ue.d;ue.d={f:dC,r:mC,D:pC,C:gC,L:yC,m:vC,X:EC,S:_C,M:TC};function dC(){var r=ra.f(),i=Oh();return r||i}function mC(r){var i=et(r);i!==null&&i.tag===5&&i.type==="form"?k_(i):ra.r(r)}var Xo=typeof document>"u"?null:document;function TT(r,i,o){var u=Xo;if(u&&typeof i=="string"&&i){var f=nr(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ET.has(f)||(ET.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),xn(i,"link",r),zt(i),u.head.appendChild(i)))}}function pC(r){ra.D(r),TT("dns-prefetch",r,null)}function gC(r,i){ra.C(r,i),TT("preconnect",r,i)}function yC(r,i,o){ra.L(r,i,o);var u=Xo;if(u&&r&&i){var f='link[rel="preload"][as="'+nr(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+nr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+nr(o.imageSizes)+'"]')):f+='[href="'+nr(r)+'"]';var m=f;switch(i){case"style":m=Wo(r);break;case"script":m=Jo(r)}Hr.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Hr.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Au(m))||i==="script"&&u.querySelector(wu(m))||(i=u.createElement("link"),xn(i,"link",r),zt(i),u.head.appendChild(i)))}}function vC(r,i){ra.m(r,i);var o=Xo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+nr(u)+'"][href="'+nr(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Jo(r)}if(!Hr.has(m)&&(r=E({rel:"modulepreload",href:r},i),Hr.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(wu(m)))return}u=o.createElement("link"),xn(u,"link",r),zt(u),o.head.appendChild(u)}}}function _C(r,i,o){ra.S(r,i,o);var u=Xo;if(u&&r){var f=bn(u).hoistableStyles,m=Wo(r);i=i||"default";var _=f.get(m);if(!_){var R={loading:0,preload:null};if(_=u.querySelector(Au(m)))R.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Hr.get(m))&&Mp(r,o);var k=_=u.createElement("link");zt(k),xn(k,"link",r),k._p=new Promise(function(J,ae){k.onload=J,k.onerror=ae}),k.addEventListener("load",function(){R.loading|=1}),k.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Fh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:R},f.set(m,_)}}}function EC(r,i){ra.X(r,i);var o=Xo;if(o&&r){var u=bn(o).hoistableScripts,f=Jo(r),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(r=E({src:r,async:!0},i),(i=Hr.get(f))&&Vp(r,i),m=o.createElement("script"),zt(m),xn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function TC(r,i){ra.M(r,i);var o=Xo;if(o&&r){var u=bn(o).hoistableScripts,f=Jo(r),m=u.get(f);m||(m=o.querySelector(wu(f)),m||(r=E({src:r,async:!0,type:"module"},i),(i=Hr.get(f))&&Vp(r,i),m=o.createElement("script"),zt(m),xn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function bT(r,i,o,u){var f=(f=Oe.current)?Bh(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Wo(o.href),o=bn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Wo(o.href);var m=bn(f).hoistableStyles,_=m.get(r);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,_),(m=f.querySelector(Au(r)))&&!m._p&&(_.instance=m,_.state.loading=5),Hr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hr.set(r,o),m||bC(f,r,o,_.state))),i&&u===null)throw Error(a(528,""));return _}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Jo(o),o=bn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Wo(r){return'href="'+nr(r)+'"'}function Au(r){return'link[rel="stylesheet"]['+r+"]"}function ST(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function bC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),xn(i,"link",o),zt(i),r.head.appendChild(i))}function Jo(r){return'[src="'+nr(r)+'"]'}function wu(r){return"script[async]"+r}function AT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+nr(o.href)+'"]');if(u)return i.instance=u,zt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),zt(u),xn(u,"style",f),Fh(u,o.precedence,r),i.instance=u;case"stylesheet":f=Wo(o.href);var m=r.querySelector(Au(f));if(m)return i.state.loading|=4,i.instance=m,zt(m),m;u=ST(o),(f=Hr.get(f))&&Mp(u,f),m=(r.ownerDocument||r).createElement("link"),zt(m);var _=m;return _._p=new Promise(function(R,k){_.onload=R,_.onerror=k}),xn(m,"link",u),i.state.loading|=4,Fh(m,o.precedence,r),i.instance=m;case"script":return m=Jo(o.src),(f=r.querySelector(wu(m)))?(i.instance=f,zt(f),f):(u=o,(f=Hr.get(m))&&(u=E({},o),Vp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),zt(f),xn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Fh(u,o.precedence,r));return i.instance}function Fh(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,_=0;_<u.length;_++){var R=u[_];if(R.dataset.precedence===i)m=R;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function Mp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Vp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Hh=null;function wT(r,i,o){if(Hh===null){var u=new Map,f=Hh=new Map;f.set(o,u)}else f=Hh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Dt]||m[ye]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=r+_;var R=u.get(_);R?R.push(m):u.set(_,[m])}}return u}function RT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function SC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function CT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function AC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Wo(u.href),m=i.querySelector(Au(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=qh.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,zt(m);return}m=i.ownerDocument||i,u=ST(u),(f=Hr.get(f))&&Mp(u,f),m=m.createElement("link"),zt(m);var _=m;_._p=new Promise(function(R,k){_.onload=R,_.onerror=k}),xn(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=qh.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Pp=0;function wC(r,i){return r.stylesheets&&r.count===0&&$h(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&$h(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Pp===0&&(Pp=62500*aC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&$h(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Pp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function qh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$h(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Gh=null;function $h(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Gh=new Map,i.forEach(RC,r),Gh=null,qh.call(r))}function RC(r,i){if(!(i.state.loading&4)){var o=Gh.get(r);if(o)var u=o.get(null);else{o=new Map,Gh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=i.instance,_=f.getAttribute("data-precedence"),m=o.get(_)||u,m===u&&o.set(null,f),o.set(_,f),this.count++,u=qh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Ru={$$typeof:F,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function CC(r,i,o,u,f,m,_,R,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yn(0),this.hiddenUpdates=Yn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function IT(r,i,o,u,f,m,_,R,k,J,ae,ce){return r=new CC(r,i,o,_,k,J,ae,ce,R),i=1,m===!0&&(i|=24),m=_r(3,null,null,i),r.current=m,m.stateNode=r,i=mm(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},vm(m),r}function DT(r){return r?(r=Do,r):Do}function NT(r,i,o,u,f,m){f=DT(f),u.context===null?u.context=f:u.pendingContext=f,u=Va(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Pa(r,u,i),o!==null&&(lr(o,r,i),iu(o,r,i))}function xT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Lp(r,i){xT(r,i),(r=r.alternate)&&xT(r,i)}function OT(r){if(r.tag===13||r.tag===31){var i=Ps(r,67108864);i!==null&&lr(i,r,67108864),Lp(r,67108864)}}function MT(r){if(r.tag===13||r.tag===31){var i=Ar();i=Z(i);var o=Ps(r,i);o!==null&&lr(o,r,i),Lp(r,i)}}var Kh=!0;function IC(r,i,o,u){var f=$.T;$.T=null;var m=ue.p;try{ue.p=2,kp(r,i,o,u)}finally{ue.p=m,$.T=f}}function DC(r,i,o,u){var f=$.T;$.T=null;var m=ue.p;try{ue.p=8,kp(r,i,o,u)}finally{ue.p=m,$.T=f}}function kp(r,i,o,u){if(Kh){var f=Up(u);if(f===null)Sp(r,i,u,Yh,o),PT(r,u);else if(xC(f,r,i,o,u))u.stopPropagation();else if(PT(r,u),i&4&&-1<NC.indexOf(r)){for(;f!==null;){var m=et(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Or(m.pendingLanes);if(_!==0){var R=m;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var k=1<<31-$t(_);R.entanglements[1]|=k,_&=~k}Ci(m),(At&6)===0&&(Nh=st()+500,Eu(0))}}break;case 31:case 13:R=Ps(m,2),R!==null&&lr(R,m,2),Oh(),Lp(m,2)}if(m=Up(u),m===null&&Sp(r,i,u,Yh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Sp(r,i,u,null,o)}}function Up(r){return r=Mr(r),jp(r)}var Yh=null;function jp(r){if(Yh=null,r=Ut(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Yh=r,null}function VT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gn()){case Zn:return 2;case Gn:return 8;case Tn:case fr:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var zp=!1,$a=null,Ka=null,Ya=null,Cu=new Map,Iu=new Map,Qa=[],NC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PT(r,i){switch(r){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Cu.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(i.pointerId)}}function Du(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=et(i),i!==null&&OT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function xC(r,i,o,u,f){switch(i){case"focusin":return $a=Du($a,r,i,o,u,f),!0;case"dragenter":return Ka=Du(Ka,r,i,o,u,f),!0;case"mouseover":return Ya=Du(Ya,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Cu.set(m,Du(Cu.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Iu.set(m,Du(Iu.get(m)||null,r,i,o,u,f)),!0}return!1}function LT(r){var i=Ut(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Ae(r.priority,function(){MT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Ae(r.priority,function(){MT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Qh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Up(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Fl=u,o.target.dispatchEvent(u),Fl=null}else return i=et(o),i!==null&&OT(i),r.blockedOn=o,!1;i.shift()}return!0}function kT(r,i,o){Qh(r)&&o.delete(i)}function OC(){zp=!1,$a!==null&&Qh($a)&&($a=null),Ka!==null&&Qh(Ka)&&(Ka=null),Ya!==null&&Qh(Ya)&&(Ya=null),Cu.forEach(kT),Iu.forEach(kT)}function Xh(r,i){r.blockedOn===i&&(r.blockedOn=null,zp||(zp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,OC)))}var Wh=null;function UT(r){Wh!==r&&(Wh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wh===r&&(Wh=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(jp(u||o)===null)continue;break}var m=et(o);m!==null&&(r.splice(i,3),i-=3,Um(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Zo(r){function i(k){return Xh(k,r)}$a!==null&&Xh($a,r),Ka!==null&&Xh(Ka,r),Ya!==null&&Xh(Ya,r),Cu.forEach(i),Iu.forEach(i);for(var o=0;o<Qa.length;o++){var u=Qa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Qa.length&&(o=Qa[0],o.blockedOn===null);)LT(o),o.blockedOn===null&&Qa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],_=f[_e]||null;if(typeof m=="function")_||UT(o);else if(_){var R=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[_e]||null)R=_.formAction;else if(jp(f)!==null)continue}else R=_.action;typeof R=="function"?o[u+1]=R:(o.splice(u,3),u-=3),UT(o)}}}function jT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Bp(r){this._internalRoot=r}Jh.prototype.render=Bp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Ar();NT(o,u,r,i,null,null)},Jh.prototype.unmount=Bp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;NT(r.current,2,null,r,null,null),Oh(),i[Re]=null}};function Jh(r){this._internalRoot=r}Jh.prototype.unstable_scheduleHydration=function(r){if(r){var i=ge();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Qa.length&&i!==0&&i<Qa[o].priority;o++);Qa.splice(o,0,r),o===0&&LT(r)}};var zT=e.version;if(zT!=="19.2.4")throw Error(a(527,zT,"19.2.4"));ue.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var MC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{dr=Zh.inject(MC),Pt=Zh}catch{}}return xu.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=K_,m=Y_,_=Q_;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=IT(r,1,!1,null,null,o,u,null,f,m,_,jT),r[Re]=i.current,bp(r),new Bp(i)},xu.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",m=K_,_=Y_,R=Q_,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),i=IT(r,1,!0,i,o??null,u,f,k,m,_,R,jT),i.context=DT(null),o=i.current,u=Ar(),u=Z(u),f=Va(u),f.callback=null,Pa(o,f,u),o=u,i.current.lanes=o,mi(i,o),Ci(i),r[Re]=i.current,bp(r),new Jh(i)},xu.version="19.2.4",xu}var XT;function $C(){if(XT)return Gp.exports;XT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Gp.exports=GC(),Gp.exports}var KC=$C();const YC=SS(KC);var Qp={exports:{}},Xp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function QC(){if(WT)return Xp;WT=1;var n=dd();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Xp.useSyncExternalStoreWithSelector=function(p,g,v,E,b){var C=s(null);if(C.current===null){var U={hasValue:!1,value:null};C.current=U}else U=C.current;C=c(function(){function V(ie){if(!q){if(q=!0,H=ie,ie=E(ie),b!==void 0&&U.hasValue){var Y=U.value;if(b(Y,ie))return F=Y}return F=ie}if(Y=F,t(H,ie))return Y;var S=E(ie);return b!==void 0&&b(Y,S)?(H=ie,Y):(H=ie,F=S)}var q=!1,H,F,X=v===void 0?null:v;return[function(){return V(g())},X===null?void 0:function(){return V(X())}]},[g,v,E,b]);var B=a(p,C[0],C[1]);return l(function(){U.hasValue=!0,U.value=B},[B]),d(B),B},Xp}var JT;function XC(){return JT||(JT=1,Qp.exports=QC()),Qp.exports}var WC=XC();function JC(n){n()}function ZC(){let n=null,e=null;return{clear(){n=null,e=null},notify(){JC(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var ZT={notify(){},get:()=>[]};function eI(n,e){let t,a=ZT,s=0,l=!1;function c(B){v();const V=a.subscribe(B);let q=!1;return()=>{q||(q=!0,V(),E())}}function d(){a.notify()}function p(){U.onStateChange&&U.onStateChange()}function g(){return l}function v(){s++,t||(t=n.subscribe(p),a=ZC())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=ZT)}function b(){l||(l=!0,v())}function C(){l&&(l=!1,E())}const U={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:b,tryUnsubscribe:C,getListeners:()=>a};return U}var tI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nI=tI(),rI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iI=rI(),aI=()=>nI||iI?P.useLayoutEffect:P.useEffect,sI=aI(),Wp=Symbol.for("react-redux-context"),Jp=typeof globalThis<"u"?globalThis:{};function oI(){if(!P.createContext)return{};const n=Jp[Wp]??(Jp[Wp]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var hs=oI();function lI(n){const{children:e,context:t,serverState:a,store:s}=n,l=P.useMemo(()=>{const p=eI(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=P.useMemo(()=>s.getState(),[s]);sI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||hs;return P.createElement(d.Provider,{value:l},e)}var uI=lI;function oy(n=hs){return function(){return P.useContext(n)}}var RS=oy();function CS(n=hs){const e=n===hs?RS:oy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var cI=CS();function hI(n=hs){const e=n===hs?cI:CS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var fI=hI(),dI=(n,e)=>n===e;function mI(n=hs){const e=n===hs?RS:oy(n),t=(a,s={})=>{const{equalityFn:l=dI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;P.useRef(!0);const v=P.useCallback({[a.name](b){return a(b)}}[a.name],[a]),E=WC.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,v,l);return P.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var pI=mI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var IS=n=>{throw TypeError(n)},gI=(n,e,t)=>e.has(n)||IS("Cannot "+t),Zp=(n,e,t)=>(gI(n,e,"read from private field"),t?t.call(n):e.get(n)),yI=(n,e,t)=>e.has(n)?IS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),e0="popstate";function vI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=ga(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ec("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:Pi(l))}function a(s,l){Wt(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return EI(e,t,a,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Wt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _I(){return Math.random().toString(36).substring(2,10)}function t0(n,e){return{usr:n.state,key:n.key,idx:e}}function ec(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ga(e):e,state:t,key:e&&e.key||a||_I()}}function Pi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ga(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function EI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=v(),q=V==null?null:V-g;g=V,p&&p({action:d,location:B.location,delta:q})}function b(V,q){d="PUSH";let H=ec(B.location,V,q);t&&t(H,V),g=v()+1;let F=t0(H,g),X=B.createHref(H);try{c.pushState(F,"",X)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;s.location.assign(X)}l&&p&&p({action:d,location:B.location,delta:1})}function C(V,q){d="REPLACE";let H=ec(B.location,V,q);t&&t(H,V),g=v();let F=t0(H,g),X=B.createHref(H);c.replaceState(F,"",X),l&&p&&p({action:d,location:B.location,delta:0})}function U(V){return DS(V)}let B={get action(){return d},get location(){return n(s,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(e0,E),p=V,()=>{s.removeEventListener(e0,E),p=null}},createHref(V){return e(s,V)},createURL:U,encodeLocation(V){let q=U(V);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:b,replace:C,go(V){return c.go(V)}};return B}function DS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Pi(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Lu,n0=class{constructor(n){if(yI(this,Lu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Zp(this,Lu).has(n))return Zp(this,Lu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Zp(this,Lu).set(n,e)}};Lu=new WeakMap;var TI=new Set(["lazy","caseSensitive","path","id","index","children"]);function bI(n){return TI.has(n)}var SI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function AI(n){return SI.has(n)}function wI(n){return n.index===!0}function tc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(at(l.index!==!0||!l.children,"Cannot specify children on an index route"),at(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),wI(l)){let g={...l,id:p};return a[p]=r0(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=r0(g,e(g)),l.children&&(g.children=tc(l.children,e,d,a,s)),g}})}function r0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Ja(n,e,t="/"){return ku(n,e,t,!1)}function ku(n,e,t,a){let s=typeof e=="string"?ga(e):e,l=Kr(s.pathname||"/",t);if(l==null)return null;let c=NS(n);CI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=UI(l);d=LI(c[p],g,a)}return d}function RI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function NS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;at(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let E=Ni([a,v.relativePath]),b=t.concat(v);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),NS(c.children,e,b,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:VI(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of xS(c.path))l(c,d,!0,g)}),e}function xS(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=xS(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function CI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:PI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var II=/^:[\w-]+$/,DI=3,NI=2,xI=1,OI=10,MI=-2,i0=n=>n==="*";function VI(n,e){let t=n.split("/"),a=t.length;return t.some(i0)&&(a+=MI),e&&(a+=NI),t.filter(s=>!i0(s)).reduce((s,l)=>s+(II.test(l)?DI:l===""?xI:OI),a)}function PI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function LI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=kf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),b=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=kf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Ni([l,E.pathname]),pathnameBase:BI(Ni([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Ni([l,E.pathnameBase]))}return c}function kf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=kI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:E},b)=>{if(v==="*"){let U=d[b]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const C=d[b];return E&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function kI(n,e=!1,t=!0){Wt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function UI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Kr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function jI({basename:n,pathname:e}){return e==="/"?n:Ni([n,e])}var OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ly=n=>OS.test(n);function zI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?ga(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=a0(t.substring(1),"/"):l=a0(t,e)):l=e,{pathname:l,search:FI(a),hash:HI(s)}}function a0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function eg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function md(n){let e=MS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function pd(n,e,t,a=!1){let s;typeof n=="string"?s=ga(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),eg("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),eg("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),eg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;s.pathname=b.join("/")}d=E>=0?e[E]:"/"}let p=zI(s,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Ni=n=>n.join("/").replace(/\/\/+/g,"/"),BI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,HI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,mc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function nc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function pc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var VS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function PS(n,e){let t=n;if(typeof t!="string"||!OS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(VS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Kr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{Wt(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var rs=Symbol("Uninstrumented");function qI(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=ol(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=ol(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[rs]??l,d=ol(t[s],c,(...p)=>s0(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[rs]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[rs]??s,c=ol(t.middleware,l,(...d)=>s0(d[0]));return c?(c[rs]=l,c):s})),a}function GI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[rs]??n.navigate,s=ol(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Pi(c):".",...o0(n,d??{})}});s&&(s[rs]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[rs]??n.fetch,s=ol(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...o0(n,p??{})}});s&&(s[rs]=a,n.fetch=s)}return n}function ol(n,e,t){return n.length===0?null:async(...a)=>{let s=await LS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function LS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=LS(n,e,t,a-1),l=await c,at(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function s0(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:$I(e),params:{...a},unstable_pattern:s,context:KI(t)}}function o0(n,e){return{currentUrl:Pi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function $I(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function KI(n){if(QI(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var YI=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function QI(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===YI}var kS=["POST","PUT","PATCH","DELETE"],XI=new Set(kS),WI=["GET",...kS],JI=new Set(WI),US=new Set([301,302,303,307,308]),ZI=new Set([307,308]),tg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},eD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ou={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},tD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),jS="remix-router-transitions",zS=Symbol("ResetLoaderData");function nD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";at(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||tD,l=s;if(n.unstable_instrumentations){let L=n.unstable_instrumentations;l=G=>({...s(G),...qI(L.map(Z=>Z.route).filter(Boolean),G)})}let c={},d=tc(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let v=n.dataStrategy||oD,E={...n.future},b=null,C=new Set,U=null,B=null,V=null,q=n.hydrationData!=null,H=Ja(d,n.history.location,g),F=!1,X=null,ie;if(H==null&&!n.patchRoutesOnNavigation){let L=qr(404,{pathname:n.history.location.pathname}),{matches:G,route:Z}=ef(d);ie=!0,H=G,X={[Z.id]:L}}else if(H&&!n.hydrationData&&Ui(H,d,n.history.location.pathname).active&&(H=null),H)if(H.some(L=>L.route.lazy))ie=!1;else if(!H.some(L=>uy(L.route)))ie=!0;else{let L=n.hydrationData?n.hydrationData.loaderData:null,G=n.hydrationData?n.hydrationData.errors:null;if(G){let Z=H.findIndex(fe=>G[fe.route.id]!==void 0);ie=H.slice(0,Z+1).every(fe=>!Ag(fe.route,L,G))}else ie=H.every(Z=>!Ag(Z.route,L,G))}else{ie=!1,H=[];let L=Ui(null,d,n.history.location.pathname);L.active&&L.matches&&(F=!0,H=L.matches)}let Y,S={historyAction:n.history.action,location:n.history.location,matches:H,initialized:ie,navigation:tg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||X,fetchers:new Map,blockers:new Map},w="POP",I=null,N=!1,O,M=!1,x=new Map,Ee=null,De=!1,$=!1,ue=new Set,de=new Map,Ve=0,Ne=-1,j=new Map,re=new Set,me=new Map,pe=new Map,be=new Set,Oe=new Map,Ke,We=null;function rt(){if(b=n.history.listen(({action:L,location:G,delta:Z})=>{if(Ke){Ke(),Ke=void 0;return}Wt(Oe.size===0||Z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let fe=di({currentLocation:S.location,nextLocation:G,historyAction:L});if(fe&&Z!=null){let ge=new Promise(Ae=>{Ke=Ae});n.history.go(Z*-1),Kn(fe,{state:"blocked",location:G,proceed(){Kn(fe,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),ge.then(()=>n.history.go(Z))},reset(){let Ae=new Map(S.blockers);Ae.set(fe,Ou),kt({blockers:Ae})}}),I==null||I.resolve(),I=null;return}return Le(L,G)}),t){wD(e,x);let L=()=>RD(e,x);e.addEventListener("pagehide",L),Ee=()=>e.removeEventListener("pagehide",L)}return S.initialized||Le("POP",S.location,{initialHydration:!0}),Y}function qn(){b&&b(),Ee&&Ee(),C.clear(),O&&O.abort(),S.fetchers.forEach((L,G)=>va(G)),S.blockers.forEach((L,G)=>Ss(G))}function hr(L){return C.add(L),()=>C.delete(L)}function kt(L,G={}){L.matches&&(L.matches=L.matches.map(ge=>{let Ae=c[ge.route.id],Ce=ge.route;return Ce.element!==Ae.element||Ce.errorElement!==Ae.errorElement||Ce.hydrateFallbackElement!==Ae.hydrateFallbackElement?{...ge,route:Ae}:ge})),S={...S,...L};let Z=[],fe=[];S.fetchers.forEach((ge,Ae)=>{ge.state==="idle"&&(be.has(Ae)?Z.push(Ae):fe.push(Ae))}),be.forEach(ge=>{!S.fetchers.has(ge)&&!de.has(ge)&&Z.push(ge)}),[...C].forEach(ge=>ge(S,{deletedFetchers:Z,newErrors:L.errors??null,viewTransitionOpts:G.viewTransitionOpts,flushSync:G.flushSync===!0})),Z.forEach(ge=>va(ge)),fe.forEach(ge=>S.fetchers.delete(ge))}function Rn(L,G,{flushSync:Z}={}){var He,Me;let fe=S.actionData!=null&&S.navigation.formMethod!=null&&zn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((He=L.state)==null?void 0:He._isRedirect)!==!0,ge;G.actionData?Object.keys(G.actionData).length>0?ge=G.actionData:ge=null:fe?ge=S.actionData:ge=null;let Ae=G.loaderData?y0(S.loaderData,G.loaderData,G.matches||[],G.errors):S.loaderData,Ce=S.blockers;Ce.size>0&&(Ce=new Map(Ce),Ce.forEach(($e,it)=>Ce.set(it,Ou)));let ye=De?!1:go(L,G.matches||S.matches),_e=N===!0||S.navigation.formMethod!=null&&zn(S.navigation.formMethod)&&((Me=L.state)==null?void 0:Me._isRedirect)!==!0;p&&(d=p,p=void 0),De||w==="POP"||(w==="PUSH"?n.history.push(L,L.state):w==="REPLACE"&&n.history.replace(L,L.state));let Re;if(w==="POP"){let $e=x.get(S.location.pathname);$e&&$e.has(L.pathname)?Re={currentLocation:S.location,nextLocation:L}:x.has(L.pathname)&&(Re={currentLocation:L,nextLocation:S.location})}else if(M){let $e=x.get(S.location.pathname);$e?$e.add(L.pathname):($e=new Set([L.pathname]),x.set(S.location.pathname,$e)),Re={currentLocation:S.location,nextLocation:L}}kt({...G,actionData:ge,loaderData:Ae,historyAction:w,location:L,initialized:!0,navigation:tg,revalidation:"idle",restoreScrollPosition:ye,preventScrollReset:_e,blockers:Ce},{viewTransitionOpts:Re,flushSync:Z===!0}),w="POP",N=!1,M=!1,De=!1,$=!1,I==null||I.resolve(),I=null,We==null||We.resolve(),We=null}async function se(L,G){if(I==null||I.resolve(),I=null,typeof L=="number"){I||(I=T0());let it=I.promise;return n.history.go(L),it}let Z=Sg(S.location,S.matches,g,L,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:fe,submission:ge,error:Ae}=l0(!1,Z,G),Ce=S.location,ye=ec(S.location,fe,G&&G.state);ye={...ye,...n.history.encodeLocation(ye)};let _e=G&&G.replace!=null?G.replace:void 0,Re="PUSH";_e===!0?Re="REPLACE":_e===!1||ge!=null&&zn(ge.formMethod)&&ge.formAction===S.location.pathname+S.location.search&&(Re="REPLACE");let He=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,Me=(G&&G.flushSync)===!0,$e=di({currentLocation:Ce,nextLocation:ye,historyAction:Re});if($e){Kn($e,{state:"blocked",location:ye,proceed(){Kn($e,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),se(L,G)},reset(){let it=new Map(S.blockers);it.set($e,Ou),kt({blockers:it})}});return}await Le(Re,ye,{submission:ge,pendingError:Ae,preventScrollReset:He,replace:G&&G.replace,enableViewTransition:G&&G.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:G&&G.unstable_defaultShouldRevalidate})}function Te(){We||(We=T0()),Gn(),kt({revalidation:"loading"});let L=We.promise;return S.navigation.state==="submitting"?L:S.navigation.state==="idle"?(Le(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),L):(Le(w||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:M===!0}),L)}async function Le(L,G,Z){O&&O.abort(),O=null,w=L,De=(Z&&Z.startUninterruptedRevalidation)===!0,pr(S.location,S.matches),N=(Z&&Z.preventScrollReset)===!0,M=(Z&&Z.enableViewTransition)===!0;let fe=p||d,ge=Z&&Z.overrideNavigation,Ae=Z!=null&&Z.initialHydration&&S.matches&&S.matches.length>0&&!F?S.matches:Ja(fe,G,g),Ce=(Z&&Z.flushSync)===!0;if(Ae&&S.initialized&&!$&&pD(S.location,G)&&!(Z&&Z.submission&&zn(Z.submission.formMethod))){Rn(G,{matches:Ae},{flushSync:Ce});return}let ye=Ui(Ae,fe,G.pathname);if(ye.active&&ye.matches&&(Ae=ye.matches),!Ae){let{error:Ft,notFoundMatches:Ut,route:et}=Kt(G.pathname);Rn(G,{matches:Ut,loaderData:{},errors:{[et.id]:Ft}},{flushSync:Ce});return}O=new AbortController;let _e=tl(n.history,G,O.signal,Z&&Z.submission),Re=n.getContext?await n.getContext():new n0,He;if(Z&&Z.pendingError)He=[Za(Ae).route.id,{type:"error",error:Z.pendingError}];else if(Z&&Z.submission&&zn(Z.submission.formMethod)){let Ft=await Pe(_e,G,Z.submission,Ae,Re,ye.active,Z&&Z.initialHydration===!0,{replace:Z.replace,flushSync:Ce});if(Ft.shortCircuited)return;if(Ft.pendingActionResult){let[Ut,et]=Ft.pendingActionResult;if(wr(et)&&nc(et.error)&&et.error.status===404){O=null,Rn(G,{matches:Ft.matches,loaderData:{},errors:{[Ut]:et.error}});return}}Ae=Ft.matches||Ae,He=Ft.pendingActionResult,ge=ng(G,Z.submission),Ce=!1,ye.active=!1,_e=tl(n.history,_e.url,_e.signal)}let{shortCircuited:Me,matches:$e,loaderData:it,errors:Dt}=await Fe(_e,G,Ae,Re,ye.active,ge,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,Ce,He,Z&&Z.callSiteDefaultShouldRevalidate);Me||(O=null,Rn(G,{matches:$e||Ae,...v0(He),loaderData:it,errors:Dt}))}async function Pe(L,G,Z,fe,ge,Ae,Ce,ye={}){Gn();let _e=SD(G,Z);if(kt({navigation:_e},{flushSync:ye.flushSync===!0}),Ae){let Me=await Yn(fe,G.pathname,L.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:it,route:Dt}=ef(d);return{matches:it,pendingActionResult:[Dt.id,{type:"error",error:Me.error}]}}let $e=Za(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[$e,{type:"error",error:Me.error}]}}else if(Me.matches)fe=Me.matches;else{let{notFoundMatches:$e,error:it,route:Dt}=Kt(G.pathname);return{matches:$e,pendingActionResult:[Dt.id,{type:"error",error:it}]}}}let Re,He=df(fe,G);if(!He.route.action&&!He.route.lazy)Re={type:"error",error:qr(405,{method:L.method,pathname:G.pathname,routeId:He.route.id})};else{let Me=ul(l,c,L,fe,He,Ce?[]:a,ge),$e=await gn(L,Me,ge,null);if(Re=$e[He.route.id],!Re){for(let it of fe)if($e[it.route.id]){Re=$e[it.route.id];break}}if(L.signal.aborted)return{shortCircuited:!0}}if(Qs(Re)){let Me;return ye&&ye.replace!=null?Me=ye.replace:Me=m0(Re.response.headers.get("Location"),new URL(L.url),g,n.history)===S.location.pathname+S.location.search,await st(L,Re,!0,{submission:Z,replace:Me}),{shortCircuited:!0}}if(wr(Re)){let Me=Za(fe,He.route.id);return(ye&&ye.replace)!==!0&&(w="PUSH"),{matches:fe,pendingActionResult:[Me.route.id,Re,He.route.id]}}return{matches:fe,pendingActionResult:[He.route.id,Re]}}async function Fe(L,G,Z,fe,ge,Ae,Ce,ye,_e,Re,He,Me,$e){let it=Ae||ng(G,Ce),Dt=Ce||ye||E0(it),Ft=!De&&!Re;if(ge){if(Ft){let Xt=je(Me);kt({navigation:it,...Xt!==void 0?{actionData:Xt}:{}},{flushSync:He})}let ot=await Yn(Z,G.pathname,L.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:ln,route:Nt}=ef(d);return{matches:ln,loaderData:{},errors:{[Nt.id]:ot.error}}}let Xt=Za(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[Xt]:ot.error}}}else if(ot.matches)Z=ot.matches;else{let{error:Xt,notFoundMatches:ln,route:Nt}=Kt(G.pathname);return{matches:ln,loaderData:{},errors:{[Nt.id]:Xt}}}}let Ut=p||d,{dsMatches:et,revalidatingFetchers:jt}=u0(L,fe,l,c,n.history,S,Z,Dt,G,Re?[]:a,Re===!0,$,ue,be,me,re,Ut,g,n.patchRoutesOnNavigation!=null,Me,$e);if(Ne=++Ve,!n.dataStrategy&&!et.some(ot=>ot.shouldLoad)&&!et.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&jt.length===0){let ot=$t();return Rn(G,{matches:Z,loaderData:{},errors:Me&&wr(Me[1])?{[Me[0]]:Me[1].error}:null,...v0(Me),...ot?{fetchers:new Map(S.fetchers)}:{}},{flushSync:He}),{shortCircuited:!0}}if(Ft){let ot={};if(!ge){ot.navigation=it;let Xt=je(Me);Xt!==void 0&&(ot.actionData=Xt)}jt.length>0&&(ot.fetchers=ct(jt)),kt(ot,{flushSync:He})}jt.forEach(ot=>{Pt(ot.key),ot.controller&&de.set(ot.key,ot.controller)});let bn=()=>jt.forEach(ot=>Pt(ot.key));O&&O.signal.addEventListener("abort",bn);let{loaderResults:zt,fetcherResults:er}=await Zn(et,jt,L,fe);if(L.signal.aborted)return{shortCircuited:!0};O&&O.signal.removeEventListener("abort",bn),jt.forEach(ot=>de.delete(ot.key));let Ln=tf(zt);if(Ln)return await st(L,Ln.result,!0,{replace:_e}),{shortCircuited:!0};if(Ln=tf(er),Ln)return re.add(Ln.key),await st(L,Ln.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:tr,errors:kn}=g0(S,Z,zt,Me,jt,er);Re&&S.errors&&(kn={...S.errors,...kn});let gr=$t(),pi=bs(Ne),gi=gr||pi||jt.length>0;return{matches:Z,loaderData:tr,errors:kn,...gi?{fetchers:new Map(S.fetchers)}:{}}}function je(L){if(L&&!wr(L[1]))return{[L[0]]:L[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function ct(L){return L.forEach(G=>{let Z=S.fetchers.get(G.key),fe=Mu(void 0,Z?Z.data:void 0);S.fetchers.set(G.key,fe)}),new Map(S.fetchers)}async function vt(L,G,Z,fe){Pt(L);let ge=(fe&&fe.flushSync)===!0,Ae=p||d,Ce=Sg(S.location,S.matches,g,Z,G,fe==null?void 0:fe.relative),ye=Ja(Ae,Ce,g),_e=Ui(ye,Ae,Ce);if(_e.active&&_e.matches&&(ye=_e.matches),!ye){fr(L,G,qr(404,{pathname:Ce}),{flushSync:ge});return}let{path:Re,submission:He,error:Me}=l0(!0,Ce,fe);if(Me){fr(L,G,Me,{flushSync:ge});return}let $e=n.getContext?await n.getContext():new n0,it=(fe&&fe.preventScrollReset)===!0;if(He&&zn(He.formMethod)){await Be(L,G,Re,ye,$e,_e.active,ge,it,He,fe&&fe.unstable_defaultShouldRevalidate);return}me.set(L,{routeId:G,path:Re}),await Rt(L,G,Re,ye,$e,_e.active,ge,it,He)}async function Be(L,G,Z,fe,ge,Ae,Ce,ye,_e,Re){Gn(),me.delete(L);let He=S.fetchers.get(L);Tn(L,AD(_e,He),{flushSync:Ce});let Me=new AbortController,$e=tl(n.history,Z,Me.signal,_e);if(Ae){let tt=await Yn(fe,new URL($e.url).pathname,$e.signal,L);if(tt.type==="aborted")return;if(tt.type==="error"){fr(L,G,tt.error,{flushSync:Ce});return}else if(tt.matches)fe=tt.matches;else{fr(L,G,qr(404,{pathname:Z}),{flushSync:Ce});return}}let it=df(fe,Z);if(!it.route.action&&!it.route.lazy){let tt=qr(405,{method:_e.formMethod,pathname:Z,routeId:G});fr(L,G,tt,{flushSync:Ce});return}de.set(L,Me);let Dt=Ve,Ft=ul(l,c,$e,fe,it,a,ge),Ut=await gn($e,Ft,ge,L),et=Ut[it.route.id];if(!et){for(let tt of Ft)if(Ut[tt.route.id]){et=Ut[tt.route.id];break}}if($e.signal.aborted){de.get(L)===Me&&de.delete(L);return}if(be.has(L)){if(Qs(et)||wr(et)){Tn(L,ia(void 0));return}}else{if(Qs(et))if(de.delete(L),Ne>Dt){Tn(L,ia(void 0));return}else return re.add(L),Tn(L,Mu(_e)),st($e,et,!1,{fetcherSubmission:_e,preventScrollReset:ye});if(wr(et)){fr(L,G,et.error);return}}let jt=S.navigation.location||S.location,bn=tl(n.history,jt,Me.signal),zt=p||d,er=S.navigation.state!=="idle"?Ja(zt,S.navigation.location,g):S.matches;at(er,"Didn't find any matches after fetcher action");let Ln=++Ve;j.set(L,Ln);let tr=Mu(_e,et.data);S.fetchers.set(L,tr);let{dsMatches:kn,revalidatingFetchers:gr}=u0(bn,ge,l,c,n.history,S,er,_e,jt,a,!1,$,ue,be,me,re,zt,g,n.patchRoutesOnNavigation!=null,[it.route.id,et],Re);gr.filter(tt=>tt.key!==L).forEach(tt=>{let yr=tt.key,Ea=S.fetchers.get(yr),bt=Mu(void 0,Ea?Ea.data:void 0);S.fetchers.set(yr,bt),Pt(yr),tt.controller&&de.set(yr,tt.controller)}),kt({fetchers:new Map(S.fetchers)});let pi=()=>gr.forEach(tt=>Pt(tt.key));Me.signal.addEventListener("abort",pi);let{loaderResults:gi,fetcherResults:ot}=await Zn(kn,gr,bn,ge);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",pi),j.delete(L),de.delete(L),gr.forEach(tt=>de.delete(tt.key)),S.fetchers.has(L)){let tt=ia(et.data);S.fetchers.set(L,tt)}let Xt=tf(gi);if(Xt)return st(bn,Xt.result,!1,{preventScrollReset:ye});if(Xt=tf(ot),Xt)return re.add(Xt.key),st(bn,Xt.result,!1,{preventScrollReset:ye});let{loaderData:ln,errors:Nt}=g0(S,er,gi,void 0,gr,ot);bs(Ln),S.navigation.state==="loading"&&Ln>Ne?(at(w,"Expected pending action"),O&&O.abort(),Rn(S.navigation.location,{matches:er,loaderData:ln,errors:Nt,fetchers:new Map(S.fetchers)})):(kt({errors:Nt,loaderData:y0(S.loaderData,ln,er,Nt),fetchers:new Map(S.fetchers)}),$=!1)}async function Rt(L,G,Z,fe,ge,Ae,Ce,ye,_e){let Re=S.fetchers.get(L);Tn(L,Mu(_e,Re?Re.data:void 0),{flushSync:Ce});let He=new AbortController,Me=tl(n.history,Z,He.signal);if(Ae){let et=await Yn(fe,new URL(Me.url).pathname,Me.signal,L);if(et.type==="aborted")return;if(et.type==="error"){fr(L,G,et.error,{flushSync:Ce});return}else if(et.matches)fe=et.matches;else{fr(L,G,qr(404,{pathname:Z}),{flushSync:Ce});return}}let $e=df(fe,Z);de.set(L,He);let it=Ve,Dt=ul(l,c,Me,fe,$e,a,ge),Ut=(await gn(Me,Dt,ge,L))[$e.route.id];if(de.get(L)===He&&de.delete(L),!Me.signal.aborted){if(be.has(L)){Tn(L,ia(void 0));return}if(Qs(Ut))if(Ne>it){Tn(L,ia(void 0));return}else{re.add(L),await st(Me,Ut,!1,{preventScrollReset:ye});return}if(wr(Ut)){fr(L,G,Ut.error);return}Tn(L,ia(Ut.data))}}async function st(L,G,Z,{submission:fe,fetcherSubmission:ge,preventScrollReset:Ae,replace:Ce}={}){Z||(I==null||I.resolve(),I=null),G.response.headers.has("X-Remix-Revalidate")&&($=!0);let ye=G.response.headers.get("Location");at(ye,"Expected a Location header on the redirect Response"),ye=m0(ye,new URL(L.url),g,n.history);let _e=ec(S.location,ye,{_isRedirect:!0});if(t){let Dt=!1;if(G.response.headers.has("X-Remix-Reload-Document"))Dt=!0;else if(ly(ye)){const Ft=DS(ye,!0);Dt=Ft.origin!==e.location.origin||Kr(Ft.pathname,g)==null}if(Dt){Ce?e.location.replace(ye):e.location.assign(ye);return}}O=null;let Re=Ce===!0||G.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:He,formAction:Me,formEncType:$e}=S.navigation;!fe&&!ge&&He&&Me&&$e&&(fe=E0(S.navigation));let it=fe||ge;if(ZI.has(G.response.status)&&it&&zn(it.formMethod))await Le(Re,_e,{submission:{...it,formAction:ye},preventScrollReset:Ae||N,enableViewTransition:Z?M:void 0});else{let Dt=ng(_e,fe);await Le(Re,_e,{overrideNavigation:Dt,fetcherSubmission:ge,preventScrollReset:Ae||N,enableViewTransition:Z?M:void 0})}}async function gn(L,G,Z,fe){var Ce;let ge,Ae={};try{ge=await uD(v,L,G,fe,Z,!1)}catch(ye){return G.filter(_e=>_e.shouldLoad).forEach(_e=>{Ae[_e.route.id]={type:"error",error:ye}}),Ae}if(L.signal.aborted)return Ae;if(!zn(L.method))for(let ye of G){if(((Ce=ge[ye.route.id])==null?void 0:Ce.type)==="error")break;!ge.hasOwnProperty(ye.route.id)&&!S.loaderData.hasOwnProperty(ye.route.id)&&(!S.errors||!S.errors.hasOwnProperty(ye.route.id))&&ye.shouldCallHandler()&&(ge[ye.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${ye.route.id}`)})}for(let[ye,_e]of Object.entries(ge))if(_D(_e)){let Re=_e.result;Ae[ye]={type:"redirect",response:dD(Re,L,ye,G,g)}}else Ae[ye]=await fD(_e);return Ae}async function Zn(L,G,Z,fe){let ge=gn(Z,L,fe,null),Ae=Promise.all(G.map(async _e=>{if(_e.matches&&_e.match&&_e.request&&_e.controller){let He=(await gn(_e.request,_e.matches,fe,_e.key))[_e.match.route.id];return{[_e.key]:He}}else return Promise.resolve({[_e.key]:{type:"error",error:qr(404,{pathname:_e.path})}})})),Ce=await ge,ye=(await Ae).reduce((_e,Re)=>Object.assign(_e,Re),{});return{loaderResults:Ce,fetcherResults:ye}}function Gn(){$=!0,me.forEach((L,G)=>{de.has(G)&&ue.add(G),Pt(G)})}function Tn(L,G,Z={}){S.fetchers.set(L,G),kt({fetchers:new Map(S.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function fr(L,G,Z,fe={}){let ge=Za(S.matches,G);va(L),kt({errors:{[ge.route.id]:Z},fetchers:new Map(S.fetchers)},{flushSync:(fe&&fe.flushSync)===!0})}function Ts(L){return pe.set(L,(pe.get(L)||0)+1),be.has(L)&&be.delete(L),S.fetchers.get(L)||eD}function po(L,G){Pt(L,G==null?void 0:G.reason),Tn(L,ia(null))}function va(L){let G=S.fetchers.get(L);de.has(L)&&!(G&&G.state==="loading"&&j.has(L))&&Pt(L),me.delete(L),j.delete(L),re.delete(L),be.delete(L),ue.delete(L),S.fetchers.delete(L)}function dr(L){let G=(pe.get(L)||0)-1;G<=0?(pe.delete(L),be.add(L)):pe.set(L,G),kt({fetchers:new Map(S.fetchers)})}function Pt(L,G){let Z=de.get(L);Z&&(Z.abort(G),de.delete(L))}function $n(L){for(let G of L){let Z=Ts(G),fe=ia(Z.data);S.fetchers.set(G,fe)}}function $t(){let L=[],G=!1;for(let Z of re){let fe=S.fetchers.get(Z);at(fe,`Expected fetcher: ${Z}`),fe.state==="loading"&&(re.delete(Z),L.push(Z),G=!0)}return $n(L),G}function bs(L){let G=[];for(let[Z,fe]of j)if(fe<L){let ge=S.fetchers.get(Z);at(ge,`Expected fetcher: ${Z}`),ge.state==="loading"&&(Pt(Z),j.delete(Z),G.push(Z))}return $n(G),G.length>0}function _a(L,G){let Z=S.blockers.get(L)||Ou;return Oe.get(L)!==G&&Oe.set(L,G),Z}function Ss(L){S.blockers.delete(L),Oe.delete(L)}function Kn(L,G){let Z=S.blockers.get(L)||Ou;at(Z.state==="unblocked"&&G.state==="blocked"||Z.state==="blocked"&&G.state==="blocked"||Z.state==="blocked"&&G.state==="proceeding"||Z.state==="blocked"&&G.state==="unblocked"||Z.state==="proceeding"&&G.state==="unblocked",`Invalid blocker state transition: ${Z.state} -> ${G.state}`);let fe=new Map(S.blockers);fe.set(L,G),kt({blockers:fe})}function di({currentLocation:L,nextLocation:G,historyAction:Z}){if(Oe.size===0)return;Oe.size>1&&Wt(!1,"A router only supports one blocker at a time");let fe=Array.from(Oe.entries()),[ge,Ae]=fe[fe.length-1],Ce=S.blockers.get(ge);if(!(Ce&&Ce.state==="proceeding")&&Ae({currentLocation:L,nextLocation:G,historyAction:Z}))return ge}function Kt(L){let G=qr(404,{pathname:L}),Z=p||d,{matches:fe,route:ge}=ef(Z);return{notFoundMatches:fe,route:ge,error:G}}function Or(L,G,Z){if(U=L,V=G,B=Z||null,!q&&S.navigation===tg){q=!0;let fe=go(S.location,S.matches);fe!=null&&kt({restoreScrollPosition:fe})}return()=>{U=null,V=null,B=null}}function mr(L,G){return B&&B(L,G.map(fe=>RI(fe,S.loaderData)))||L.key}function pr(L,G){if(U&&V){let Z=mr(L,G);U[Z]=V()}}function go(L,G){if(U){let Z=mr(L,G),fe=U[Z];if(typeof fe=="number")return fe}return null}function Ui(L,G,Z){if(n.patchRoutesOnNavigation)if(L){if(Object.keys(L[0].params).length>0)return{active:!0,matches:ku(G,Z,g,!0)}}else return{active:!0,matches:ku(G,Z,g,!0)||[]};return{active:!1,matches:null}}async function Yn(L,G,Z,fe){if(!n.patchRoutesOnNavigation)return{type:"success",matches:L};let ge=L;for(;;){let Ae=p==null,Ce=p||d,ye=c;try{await n.patchRoutesOnNavigation({signal:Z,path:G,matches:ge,fetcherKey:fe,patch:(He,Me)=>{Z.aborted||c0(He,Me,Ce,ye,l,!1)}})}catch(He){return{type:"error",error:He,partialMatches:ge}}finally{Ae&&!Z.aborted&&(d=[...d])}if(Z.aborted)return{type:"aborted"};let _e=Ja(Ce,G,g),Re=null;if(_e){if(Object.keys(_e[0].params).length===0)return{type:"success",matches:_e};if(Re=ku(Ce,G,g,!0),!(Re&&ge.length<Re.length&&mi(ge,Re.slice(0,ge.length))))return{type:"success",matches:_e}}if(Re||(Re=ku(Ce,G,g,!0)),!Re||mi(ge,Re))return{type:"success",matches:null};ge=Re}}function mi(L,G){return L.length===G.length&&L.every((Z,fe)=>Z.route.id===G[fe].route.id)}function Ul(L){c={},p=tc(L,l,void 0,c)}function ji(L,G,Z=!1){let fe=p==null;c0(L,G,p||d,c,l,Z),fe&&(d=[...d],kt({}))}return Y={get basename(){return g},get future(){return E},get state(){return S},get routes(){return d},get window(){return e},initialize:rt,subscribe:hr,enableScrollRestoration:Or,navigate:se,fetch:vt,revalidate:Te,createHref:L=>n.history.createHref(L),encodeLocation:L=>n.history.encodeLocation(L),getFetcher:Ts,resetFetcher:po,deleteFetcher:dr,dispose:qn,getBlocker:_a,deleteBlocker:Ss,patchRoutes:ji,_internalFetchControllers:de,_internalSetRoutes:Ul,_internalSetStateDoNotUseOrYouWillBreakYourApp(L){kt(L)}},n.unstable_instrumentations&&(Y=GI(Y,n.unstable_instrumentations.map(L=>L.router).filter(Boolean))),Y}function rD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Sg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=pd(a||".",md(c),Kr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=hy(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let v=new URLSearchParams(p.search),E=v.getAll("index");v.delete("index"),E.filter(C=>C).forEach(C=>v.append("index",C));let b=v.toString();p.search=b?`?${b}`:""}}return t!=="/"&&(p.pathname=jI({basename:t,pathname:p.pathname})),Pi(p)}function l0(n,e,t){if(!t||!rD(t))return{path:e};if(t.formMethod&&!bD(t.formMethod))return{path:e,error:qr(405,{method:t.formMethod})};let a=()=>({path:e,error:qr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=$S(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!zn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[C,U])=>`${b}${C}=${U}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!zn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}at(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Rg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Rg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=p0(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=p0(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(zn(g.formMethod))return{path:e,submission:g};let v=ga(e);return n&&v.search&&hy(v.search)&&d.append("index",""),v.search=`?${d}`,{path:Pi(v),submission:g}}function u0(n,e,t,a,s,l,c,d,p,g,v,E,b,C,U,B,V,q,H,F,X){var De;let ie=F?wr(F[1])?F[1].error:F[1].data:void 0,Y=s.createURL(l.location),S=s.createURL(p),w;if(v&&l.errors){let $=Object.keys(l.errors)[0];w=c.findIndex(ue=>ue.route.id===$)}else if(F&&wr(F[1])){let $=F[0];w=c.findIndex(ue=>ue.route.id===$)-1}let I=F?F[1].statusCode:void 0,N=I&&I>=400,O={currentUrl:Y,currentParams:((De=l.matches[0])==null?void 0:De.params)||{},nextUrl:S,nextParams:c[0].params,...d,actionResult:ie,actionStatus:I},M=pc(c),x=c.map(($,ue)=>{let{route:de}=$,Ve=null;if(w!=null&&ue>w?Ve=!1:de.lazy?Ve=!0:uy(de)?v?Ve=Ag(de,l.loaderData,l.errors):iD(l.loaderData,l.matches[ue],$)&&(Ve=!0):Ve=!1,Ve!==null)return wg(t,a,n,M,$,g,e,Ve);let Ne=!1;typeof X=="boolean"?Ne=X:N?Ne=!1:(E||Y.pathname+Y.search===S.pathname+S.search||Y.search!==S.search||aD(l.matches[ue],$))&&(Ne=!0);let j={...O,defaultShouldRevalidate:Ne},re=qu($,j);return wg(t,a,n,M,$,g,e,re,j,X)}),Ee=[];return U.forEach(($,ue)=>{if(v||!c.some(be=>be.route.id===$.routeId)||C.has(ue))return;let de=l.fetchers.get(ue),Ve=de&&de.state!=="idle"&&de.data===void 0,Ne=Ja(V,$.path,q);if(!Ne){if(H&&Ve)return;Ee.push({key:ue,routeId:$.routeId,path:$.path,matches:null,match:null,request:null,controller:null});return}if(B.has(ue))return;let j=df(Ne,$.path),re=new AbortController,me=tl(s,$.path,re.signal),pe=null;if(b.has(ue))b.delete(ue),pe=ul(t,a,me,Ne,j,g,e);else if(Ve)E&&(pe=ul(t,a,me,Ne,j,g,e));else{let be;typeof X=="boolean"?be=X:N?be=!1:be=E;let Oe={...O,defaultShouldRevalidate:be};qu(j,Oe)&&(pe=ul(t,a,me,Ne,j,g,e,Oe))}pe&&Ee.push({key:ue,routeId:$.routeId,path:$.path,matches:pe,match:j,request:me,controller:re})}),{dsMatches:x,revalidatingFetchers:Ee}}function uy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Ag(n,e,t){if(n.lazy)return!0;if(!uy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function iD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function aD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function qu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function c0(n,e,t,a,s,l){let c;if(n){let g=a[n];at(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let v=c.find(E=>BS(g,E));v?p.push({existingRoute:v,newRoute:g}):d.push(g)}),d.length>0){let g=tc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:v,newRoute:E}=p[g],b=v,[C]=tc([E],s,[],{},!0);Object.assign(b,{element:C.element?C.element:b.element,errorElement:C.errorElement?C.errorElement:b.errorElement,hydrateFallbackElement:C.hydrateFallbackElement?C.hydrateFallbackElement:b.hydrateFallbackElement})}}function BS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>BS(t,l))}):!1}var h0=new WeakMap,FS=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(at(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=h0.get(s);c||(c={},h0.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=bI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)Wt(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)Wt(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(s,{[n]:b}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(b=>b===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},f0=new WeakMap;function sD(n,e,t,a,s){let l=t[n.id];if(at(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=f0.get(l);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let E=(async()=>{at(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),C={};for(let U in b){let B=b[U];if(B===void 0)continue;let V=AI(U),H=l[U]!==void 0&&U!=="hasErrorBoundary";V?Wt(!V,"Route property "+U+" is not a supported property to be returned from a lazy route function. This property will be ignored."):H?Wt(!H,`Route "${l.id}" has a static property "${U}" defined but its lazy function is also returning a value for this property. The lazy route property "${U}" will be ignored.`):C[U]=B}Object.assign(l,C),Object.assign(l,{...a(l),lazy:void 0})})();return f0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let v of c){if(s&&s.includes(v))continue;let E=FS({key:v,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),v===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function d0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function oD(n){return n.matches.some(e=>e.route.middleware)?HS(n,()=>d0(n)):d0(n)}function HS(n,e){return lD(n,e,a=>{if(TD(a))throw a;return a},yD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=Za(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function lD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,v=l.flatMap(b=>b.route.middleware?b.route.middleware.map(C=>[b.route.id,C]):[]);return await qS({request:c,params:d,context:p,unstable_pattern:g},v,e,t,a,s)}async function qS(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,v]=p,E,b=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await qS(n,e,t,a,s,l,c+1)},E.value}catch(C){return E={value:await l(C,g,E)},E.value}};try{let C=await v(n,b),U=C!=null?a(C):void 0;return s(U)?U:E?U??E.value:(E={value:await b()},E.value)}catch(C){return await l(C,g,E)}}function GS(n,e,t,a,s){let l=FS({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=sD(a.route,zn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function wg(n,e,t,a,s,l,c,d,p=null,g){let v=!1,E=GS(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(b){return v=!0,p?typeof g=="boolean"?qu(s,{...p,defaultShouldRevalidate:g}):typeof b=="boolean"?qu(s,{...p,defaultShouldRevalidate:b}):qu(s,p):d},resolve(b){let{lazy:C,loader:U,middleware:B}=s.route,V=v||d||b&&!zn(t.method)&&(C||U),q=B&&B.length>0&&!U&&!C;return V&&(zn(t.method)||!q)?cD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:b,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function ul(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:GS(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:wg(n,e,t,pc(a),p,l,c,!0,d))}async function uD(n,e,t,a,s,l){t.some(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware}));let c={request:e,unstable_pattern:pc(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let v=c;return HS(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var v,E;return[(v=g._lazyPromises)==null?void 0:v.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function cD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=zn(n.method),v=g?"action":"loader",E=b=>{let C,U=new Promise((q,H)=>C=H);p=()=>C(),n.signal.addEventListener("abort",p);let B=q=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:c},...q!==void 0?[q]:[]),V=(async()=>{try{return{type:"data",result:await(l?l(H=>B(H)):B())}}catch(q){return{type:"error",result:q}}})();return Promise.race([V,U])};try{let b=g?t.route.action:t.route.loader;if(a||s)if(b){let C,[U]=await Promise.all([E(b).catch(B=>{C=B}),a,s]);if(C!==void 0)throw C;d=U}else{await a;let C=g?t.route.action:t.route.loader;if(C)[d]=await Promise.all([E(C),s]);else if(v==="action"){let U=new URL(n.url),B=U.pathname+U.search;throw qr(405,{method:n.method,pathname:B,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)d=await E(b);else{let C=new URL(n.url),U=C.pathname+C.search;throw qr(404,{pathname:U})}}catch(b){return{type:"error",result:b}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function hD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function fD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(cy(e)){let p;try{p=await hD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new mc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?_0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:gD(e),statusCode:nc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:nc(e)?e.status:void 0}:_0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function dD(n,e,t,a,s){let l=n.headers.get("Location");if(at(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!ly(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Sg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function m0(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(ly(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=Kr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function tl(n,e,t,a){let s=n.createURL($S(e)).toString(),l={signal:t};if(a&&zn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Rg(a.formData):l.body=a.formData}return new Request(s,l)}function Rg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function p0(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function mD(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},v=t&&wr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let b=E.route.id,C=e[b];if(at(!Qs(C),"Cannot handle redirect results in processLoaderData"),wr(C)){let U=C.error;if(v!==void 0&&(U=v,v=void 0),c=c||{},s)c[b]=U;else{let B=Za(n,b);c[B.route.id]==null&&(c[B.route.id]=U)}a||(l[b]=zS),p||(p=!0,d=nc(C.error)?C.error.status:500),C.headers&&(g[b]=C.headers)}else l[b]=C.data,C.statusCode&&C.statusCode!==200&&!p&&(d=C.statusCode),C.headers&&(g[b]=C.headers)}),v!==void 0&&t&&(c={[t[0]]:v},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function g0(n,e,t,a,s,l){let{loaderData:c,errors:d}=mD(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:v,controller:E}=p;if(E&&E.signal.aborted)return;let b=l[g];if(at(b,"Did not find corresponding fetcher result"),wr(b)){let C=Za(n.matches,v==null?void 0:v.route.id);d&&d[C.route.id]||(d={...d,[C.route.id]:b.error}),n.fetchers.delete(g)}else if(Qs(b))at(!1,"Unhandled fetcher revalidation redirect");else{let C=ia(b.data);n.fetchers.set(g,C)}}),{loaderData:c,errors:d}}function y0(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==zS).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function v0(n){return n?wr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Za(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function ef(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new mc(n||500,c,new Error(d),!0)}function tf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(Qs(s))return{key:a,result:s}}}function $S(n){let e=typeof n=="string"?ga(n):n;return Pi({...e,hash:""})}function pD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function gD(n){var e,t;return new mc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function yD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&vD(t))}function vD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function _D(n){return cy(n.result)&&US.has(n.result.status)}function wr(n){return n.type==="error"}function Qs(n){return(n&&n.type)==="redirect"}function _0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function cy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function ED(n){return US.has(n)}function TD(n){return cy(n)&&ED(n.status)&&n.headers.has("Location")}function bD(n){return JI.has(n.toUpperCase())}function zn(n){return XI.has(n.toUpperCase())}function hy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function df(n,e){let t=typeof e=="string"?ga(e).search:e.search;if(n[n.length-1].route.index&&hy(t||""))return n[n.length-1];let a=MS(n);return a[a.length-1]}function E0(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function ng(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Mu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function AD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ia(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function wD(n,e){try{let t=n.sessionStorage.getItem(jS);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function RD(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(jS,JSON.stringify(t))}catch(a){Wt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function T0(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var lo=P.createContext(null);lo.displayName="DataRouter";var gc=P.createContext(null);gc.displayName="DataRouterState";var KS=P.createContext(!1);function CD(){return P.useContext(KS)}var fy=P.createContext({isTransitioning:!1});fy.displayName="ViewTransition";var YS=P.createContext(new Map);YS.displayName="Fetchers";var ID=P.createContext(null);ID.displayName="Await";var Nr=P.createContext(null);Nr.displayName="Navigation";var gd=P.createContext(null);gd.displayName="Location";var Qr=P.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var dy=P.createContext(null);dy.displayName="RouteError";var QS="REACT_ROUTER_ERROR",DD="REDIRECT",ND="ROUTE_ERROR_RESPONSE";function xD(n){if(n.startsWith(`${QS}:${DD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function OD(n){if(n.startsWith(`${QS}:${ND}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new mc(e.status,e.statusText,e.data)}catch{}}function MD(n,{relative:e}={}){at(Il(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(Nr),{hash:s,pathname:l,search:c}=yc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ni([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Il(){return P.useContext(gd)!=null}function Xr(){return at(Il(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(gd).location}var XS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WS(n){P.useContext(Nr).static||P.useLayoutEffect(n)}function uo(){let{isDataRoute:n}=P.useContext(Qr);return n?YD():VD()}function VD(){at(Il(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(lo),{basename:e,navigator:t}=P.useContext(Nr),{matches:a}=P.useContext(Qr),{pathname:s}=Xr(),l=JSON.stringify(md(a)),c=P.useRef(!1);return WS(()=>{c.current=!0}),P.useCallback((p,g={})=>{if(Wt(c.current,XS),!c.current)return;if(typeof p=="number"){t.go(p);return}let v=pd(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ni([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,s,n])}var PD=P.createContext(null);function LD(n){let e=P.useContext(Qr).outlet;return P.useMemo(()=>e&&P.createElement(PD.Provider,{value:n},e),[e,n])}function yd(){let{matches:n}=P.useContext(Qr),e=n[n.length-1];return e?e.params:{}}function yc(n,{relative:e}={}){let{matches:t}=P.useContext(Qr),{pathname:a}=Xr(),s=JSON.stringify(md(t));return P.useMemo(()=>pd(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function kD(n,e,t,a,s){at(Il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(Nr),{matches:c}=P.useContext(Qr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let H=E&&E.path||"";ZS(g,!E||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let b=Xr(),C;C=b;let U=C.pathname||"/",B=U;if(v!=="/"){let H=v.replace(/^\//,"").split("/");B="/"+U.replace(/^\//,"").split("/").slice(H.length).join("/")}let V=Ja(n,{pathname:B});return Wt(E||V!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Wt(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),FD(V&&V.map(H=>Object.assign({},H,{params:Object.assign({},p,H.params),pathname:Ni([v,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?v:Ni([v,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,a,s)}function UD(){let n=KD(),e=nc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var jD=P.createElement(UD,null),JS=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=OD(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(Qr.Provider,{value:this.props.routeContext},P.createElement(dy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(zD,{error:n},e):e}};JS.contextType=KS;var rg=new WeakMap;function zD({children:n,error:e}){let{basename:t}=P.useContext(Nr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=xD(e.digest);if(a){let s=rg.get(e);if(s)throw s;let l=PS(a.location,t);if(VS&&!rg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw rg.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function BD({routeContext:n,match:e,children:t}){let a=P.useContext(lo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Qr.Provider,{value:n},t)}function FD(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);at(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,p=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=v),E.route.id){let{loaderData:b,errors:C}=t,U=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!C||C[E.route.id]===void 0);if(E.route.lazy||U){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(v,E)=>{var b,C;a(v,{location:t.location,params:((C=(b=t.matches)==null?void 0:b[0])==null?void 0:C.params)??{},unstable_pattern:pc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,b)=>{let C,U=!1,B=null,V=null;t&&(C=c&&E.route.id?c[E.route.id]:void 0,B=E.route.errorElement||jD,d&&(p<0&&b===0?(ZS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,V=null):p===b&&(U=!0,V=E.route.hydrateFallbackElement||null)));let q=e.concat(l.slice(0,b+1)),H=()=>{let F;return C?F=B:U?F=V:E.route.Component?F=P.createElement(E.route.Component,null):E.route.element?F=E.route.element:F=v,P.createElement(BD,{match:E,routeContext:{outlet:v,matches:q,isDataRoute:t!=null},children:F})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?P.createElement(JS,{location:t.location,revalidation:t.revalidation,component:B,error:C,children:H(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:g}):H()},null)}function my(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HD(n){let e=P.useContext(lo);return at(e,my(n)),e}function qD(n){let e=P.useContext(gc);return at(e,my(n)),e}function GD(n){let e=P.useContext(Qr);return at(e,my(n)),e}function py(n){let e=GD(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function $D(){return py("useRouteId")}function KD(){var a;let n=P.useContext(dy),e=qD("useRouteError"),t=py("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function YD(){let{router:n}=HD("useNavigate"),e=py("useNavigate"),t=P.useRef(!1);return WS(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{Wt(t.current,XS),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var b0={};function ZS(n,e,t){!e&&!b0[n]&&(b0[n]=!0,Wt(!1,t))}var S0={};function A0(n,e){!n&&!S0[e]&&(S0[e]=!0,console.warn(e))}var QD="useOptimistic",w0=BC[QD],XD=()=>{};function WD(n){return w0?w0(n):[n,XD]}function JD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Wt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Wt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Wt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var ZD=["HydrateFallback","hydrateFallbackElement"],eN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function tN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=CD()||a;let[l,c]=P.useState(n.state),[d,p]=WD(l),[g,v]=P.useState(),[E,b]=P.useState({isTransitioning:!1}),[C,U]=P.useState(),[B,V]=P.useState(),[q,H]=P.useState(),F=P.useRef(new Map),X=P.useCallback((w,{deletedFetchers:I,newErrors:N,flushSync:O,viewTransitionOpts:M})=>{N&&t&&Object.values(N).forEach(Ee=>{var De;return t(Ee,{location:w.location,params:((De=w.matches[0])==null?void 0:De.params)??{},unstable_pattern:pc(w.matches)})}),w.fetchers.forEach((Ee,De)=>{Ee.data!==void 0&&F.current.set(De,Ee.data)}),I.forEach(Ee=>F.current.delete(Ee)),A0(O===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(A0(M==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!x){e&&O?e(()=>c(w)):a===!1?c(w):P.startTransition(()=>{a===!0&&p(Ee=>R0(Ee,w)),c(w)});return}if(e&&O){e(()=>{B&&(C==null||C.resolve(),B.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let Ee=n.window.document.startViewTransition(()=>{e(()=>c(w))});Ee.finished.finally(()=>{e(()=>{U(void 0),V(void 0),v(void 0),b({isTransitioning:!1})})}),e(()=>V(Ee));return}B?(C==null||C.resolve(),B.skipTransition(),H({state:w,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(v(w),b({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,B,C,a,p,t]);P.useLayoutEffect(()=>n.subscribe(X),[n,X]),P.useEffect(()=>{E.isTransitioning&&!E.flushSync&&U(new eN)},[E]),P.useEffect(()=>{if(C&&g&&n.window){let w=g,I=C.promise,N=n.window.document.startViewTransition(async()=>{a===!1?c(w):P.startTransition(()=>{a===!0&&p(O=>R0(O,w)),c(w)}),await I});N.finished.finally(()=>{U(void 0),V(void 0),v(void 0),b({isTransitioning:!1})}),V(N)}},[g,C,n.window,a,p]),P.useEffect(()=>{C&&g&&d.location.key===g.location.key&&C.resolve()},[C,B,d.location,g]),P.useEffect(()=>{!E.isTransitioning&&q&&(v(q.state),b({isTransitioning:!0,flushSync:!1,currentLocation:q.currentLocation,nextLocation:q.nextLocation}),H(void 0))},[E.isTransitioning,q]);let ie=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,I,N)=>n.navigate(w,{state:I,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(w,I,N)=>n.navigate(w,{replace:!0,state:I,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),Y=n.basename||"/",S=P.useMemo(()=>({router:n,navigator:ie,static:!1,basename:Y,onError:t}),[n,ie,Y,t]);return P.createElement(P.Fragment,null,P.createElement(lo.Provider,{value:S},P.createElement(gc.Provider,{value:d},P.createElement(YS.Provider,{value:F.current},P.createElement(fy.Provider,{value:E},P.createElement(iN,{basename:Y,location:d.location,navigationType:d.historyAction,navigator:ie,unstable_useTransitions:a},P.createElement(nN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function R0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var nN=P.memo(rN);function rN({routes:n,future:e,state:t,onError:a}){return kD(n,void 0,t,a,e)}function as({to:n,replace:e,state:t,relative:a}){at(Il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(Nr);Wt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Qr),{pathname:c}=Xr(),d=uo(),p=pd(n,md(l),c,a==="path"),g=JSON.stringify(p);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function eA(n){return LD(n.context)}function iN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){at(!Il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=ga(t));let{pathname:g="/",search:v="",hash:E="",state:b=null,key:C="default"}=t,U=P.useMemo(()=>{let B=Kr(g,d);return B==null?null:{location:{pathname:B,search:v,hash:E,state:b,key:C},navigationType:a}},[d,g,v,E,b,C,a]);return Wt(U!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:P.createElement(Nr.Provider,{value:p},P.createElement(gd.Provider,{children:e,value:U}))}var mf="get",pf="application/x-www-form-urlencoded";function vd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function aN(n){return vd(n)&&n.tagName.toLowerCase()==="button"}function sN(n){return vd(n)&&n.tagName.toLowerCase()==="form"}function oN(n){return vd(n)&&n.tagName.toLowerCase()==="input"}function lN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uN(n,e){return n.button===0&&(!e||e==="_self")&&!lN(n)}function Cg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function cN(n,e){let t=Cg(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var nf=null;function hN(){if(nf===null)try{new FormData(document.createElement("form"),0),nf=!1}catch{nf=!0}return nf}var fN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ig(n){return n!=null&&!fN.has(n)?(Wt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pf}"`),null):n}function dN(n,e){let t,a,s,l,c;if(sN(n)){let d=n.getAttribute("action");a=d?Kr(d,e):null,t=n.getAttribute("method")||mf,s=ig(n.getAttribute("enctype"))||pf,l=new FormData(n)}else if(aN(n)||oN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?Kr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||mf,s=ig(n.getAttribute("formenctype"))||ig(d.getAttribute("enctype"))||pf,l=new FormData(d,n),!hN()){let{name:g,type:v,value:E}=n;if(v==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(vd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=mf,a=null,s=pf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mN(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&Kr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function pN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await pN(l,t);return c.links?c.links():[]}return[]}));return TN(a.flat(1).filter(gN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function C0(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var v;return t[g].pathname!==p.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function vN(n,e,{includeHydrateFallback:t}={}){return _N(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function _N(n){return[...new Set(n)]}function EN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function TN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(EN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function tA(){let n=P.useContext(lo);return gy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function bN(){let n=P.useContext(gc);return gy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var yy=P.createContext(void 0);yy.displayName="FrameworkContext";function nA(){let n=P.useContext(yy);return gy(n,"You must render this element inside a <HydratedRouter> element"),n}function SN(n,e){let t=P.useContext(yy),[a,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,b=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=q=>{q.forEach(H=>{c(H.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return b.current&&V.observe(b.current),()=>{V.disconnect()}}},[n]),P.useEffect(()=>{if(a){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[a]);let C=()=>{s(!0)},U=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:Vu(d,C),onBlur:Vu(p,U),onMouseEnter:Vu(g,C),onMouseLeave:Vu(v,U),onTouchStart:Vu(E,C)}]:[!1,b,{}]}function Vu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function AN({page:n,...e}){let{router:t}=tA(),a=P.useMemo(()=>Ja(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(RN,{page:n,matches:a,...e}):null}function wN(n){let{manifest:e,routeModules:t}=nA(),[a,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return yN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function RN({page:n,matches:e,...t}){let a=Xr(),{future:s,manifest:l,routeModules:c}=nA(),{basename:d}=tA(),{loaderData:p,matches:g}=bN(),v=P.useMemo(()=>C0(n,e,g,l,a,"data"),[n,e,g,l,a]),E=P.useMemo(()=>C0(n,e,g,l,a,"assets"),[n,e,g,l,a]),b=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let B=new Set,V=!1;if(e.forEach(H=>{var X;let F=l.routes[H.route.id];!F||!F.hasLoader||(!v.some(ie=>ie.route.id===H.route.id)&&H.route.id in p&&((X=c[H.route.id])!=null&&X.shouldRevalidate)||F.hasClientLoader?V=!0:B.add(H.route.id))}),B.size===0)return[];let q=mN(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return V&&B.size>0&&q.searchParams.set("_routes",e.filter(H=>B.has(H.route.id)).map(H=>H.route.id).join(",")),[q.pathname+q.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,v,e,n,c]),C=P.useMemo(()=>vN(E,l),[E,l]),U=wN(E);return P.createElement(P.Fragment,null,b.map(B=>P.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),C.map(B=>P.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),U.map(({key:B,link:V})=>P.createElement("link",{key:B,nonce:t.nonce,...V,crossOrigin:V.crossOrigin??t.crossOrigin})))}function CN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IN&&(window.__reactRouterVersion="7.13.0")}catch{}function DN(n,e){return nD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:vI({window:e==null?void 0:e.window}),hydrationData:NN(),routes:n,mapRouteProperties:JD,hydrationRouteProperties:ZD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function NN(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:xN(n.errors)}),n}function xN(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new mc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var rA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...C},U){let{basename:B,unstable_useTransitions:V}=P.useContext(Nr),q=typeof g=="string"&&rA.test(g),H=PS(g,B);g=H.to;let F=MD(g,{relative:s}),[X,ie,Y]=SN(a,C),S=PN(g,{replace:c,state:d,target:p,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:b,unstable_useTransitions:V});function w(N){e&&e(N),N.defaultPrevented||S(N)}let I=P.createElement("a",{...C,...Y,href:H.absoluteURL||F,onClick:H.isExternal||l?e:w,ref:CN(U,ie),target:p,"data-discover":!q&&t==="render"?"true":void 0});return X&&!q?P.createElement(P.Fragment,null,I,P.createElement(AN,{page:F})):I});iA.displayName="Link";var ON=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},v){let E=yc(c,{relative:g.relative}),b=Xr(),C=P.useContext(gc),{navigator:U,basename:B}=P.useContext(Nr),V=C!=null&&BN(E)&&d===!0,q=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,H=b.pathname,F=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(H=H.toLowerCase(),F=F?F.toLowerCase():null,q=q.toLowerCase()),F&&B&&(F=Kr(F,B)||F);const X=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let ie=H===q||!s&&H.startsWith(q)&&H.charAt(X)==="/",Y=F!=null&&(F===q||!s&&F.startsWith(q)&&F.charAt(q.length)==="/"),S={isActive:ie,isPending:Y,isTransitioning:V},w=ie?e:void 0,I;typeof a=="function"?I=a(S):I=[a,ie?"active":null,Y?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(S):l;return P.createElement(iA,{...g,"aria-current":w,className:I,ref:v,style:N,to:c,viewTransition:d},typeof p=="function"?p(S):p)});ON.displayName="NavLink";var MN=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=mf,action:d,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...C},U)=>{let{unstable_useTransitions:B}=P.useContext(Nr),V=jN(),q=zN(d,{relative:g}),H=c.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&rA.test(d),X=ie=>{if(p&&p(ie),ie.defaultPrevented)return;ie.preventDefault();let Y=ie.nativeEvent.submitter,S=(Y==null?void 0:Y.getAttribute("formmethod"))||c,w=()=>V(Y||ie.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:s,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b});B&&t!==!1?P.startTransition(()=>w()):w()};return P.createElement("form",{ref:U,method:H,action:q,onSubmit:a?p:X,...C,"data-discover":!F&&n==="render"?"true":void 0})});MN.displayName="Form";function VN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aA(n){let e=P.useContext(lo);return at(e,VN(n)),e}function PN(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=uo(),v=Xr(),E=yc(n,{relative:l});return P.useCallback(b=>{if(uN(b,e)){b.preventDefault();let C=t!==void 0?t:Pi(v)===Pi(E),U=()=>g(n,{replace:C,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?P.startTransition(()=>U()):U()}},[v,g,E,t,a,e,n,s,l,c,d,p])}function LN(n){Wt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Cg(n)),t=P.useRef(!1),a=Xr(),s=P.useMemo(()=>cN(a.search,t.current?null:e.current),[a.search]),l=uo(),c=P.useCallback((d,p)=>{const g=Cg(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,p)},[l,s]);return[s,c]}var kN=0,UN=()=>`__${String(++kN)}__`;function jN(){let{router:n}=aA("useSubmit"),{basename:e}=P.useContext(Nr),t=$D(),a=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:v,body:E}=dN(l,e);if(c.navigate===!1){let b=c.fetcherKey||UN();await a(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function zN(n,{relative:e}={}){let{basename:t}=P.useContext(Nr),a=P.useContext(Qr);at(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...yc(n||".",{relative:e})},c=Xr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(v=>v==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ni([t,l.pathname])),Pi(l)}function BN(n,{relative:e}={}){let t=P.useContext(fy);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=aA("useViewTransitionState"),s=yc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Kr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=Kr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return kf(s.pathname,c)!=null||kf(s.pathname,l)!=null}var FN=wS();function HN(n){return P.createElement(tN,{flushSync:FN.flushSync,...n})}const qN=P.createContext(void 0),fi=()=>fI(),yt=pI.withTypes(),GN=({children:n})=>{const e=yt(t=>t.auth.loading);return A.jsx(qN.Provider,{value:{isLoading:e},children:n})},$N=()=>{};var I0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},KN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},oA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,C=g&63;p||(C=64,c||(b=64)),a.push(t[v],t[E],t[b],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(sA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new YN;const b=l<<2|d>>4;if(a.push(b),g!==64){const C=d<<4&240|g>>2;if(a.push(C),E!==64){const U=g<<6&192|E;a.push(U)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class YN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QN=function(n){const e=sA(n);return oA.encodeByteArray(e,!0)},Uf=function(n){return QN(n).replace(/\./g,"")},lA=function(n){try{return oA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=()=>XN().__FIREBASE_DEFAULTS__,JN=()=>{if(typeof process>"u"||typeof I0>"u")return;const n=I0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ZN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&lA(n[1]);return e&&JSON.parse(e)},_d=()=>{try{return $N()||WN()||JN()||ZN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},uA=n=>{var e,t;return(t=(e=_d())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ex=n=>{const e=uA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},cA=()=>{var n;return(n=_d())==null?void 0:n.config},hA=n=>{var e;return(e=_d())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Uf(JSON.stringify(t)),Uf(JSON.stringify(c)),""].join(".")}const Gu={};function rx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Gu))Gu[e]?n.emulator.push(e):n.prod.push(e);return n}function ix(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let D0=!1;function dA(n,e){if(typeof window>"u"||typeof document>"u"||!Dl(window.location.host)||Gu[n]===e||Gu[n]||D0)return;Gu[n]=e;function t(b){return`__firebase__banner__${b}`}const a="__firebase__banner",l=rx().prod.length>0;function c(){const b=document.getElementById(a);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{D0=!0,c()},b}function v(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=ix(a),C=t("text"),U=document.getElementById(C)||document.createElement("span"),B=t("learnmore"),V=document.getElementById(B)||document.createElement("a"),q=t("preprendIcon"),H=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const F=b.element;d(F),v(V,B);const X=g();p(H,q),F.append(H,U,V,X),document.body.appendChild(F)}l?(U.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ax(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Hn())}function sx(){var e;const n=(e=_d())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ox(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ux(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cx(){const n=Hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function hx(){return!sx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fx(){try{return typeof indexedDB=="object"}catch{return!1}}function dx(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="FirebaseError";class ya extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=mx,Object.setPrototypeOf(this,ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vc.prototype.create)}}class vc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?px(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ya(s,d,a)}}function px(n,e){return n.replace(gx,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const gx=/\{\$([^}]+)}/g;function yx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function no(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(N0(l)&&N0(c)){if(!no(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function N0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function vx(n,e){const t=new _x(n,e);return t.subscribe.bind(t)}class _x{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");Ex(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=ag),s.error===void 0&&(s.error=ag),s.complete===void 0&&(s.complete=ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ex(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ag(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n){return n&&n._delegate?n._delegate:n}class ro{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new tx;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sx(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:bx(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bx(n){return n===Ys?void 0:n}function Sx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const wx={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Rx=dt.INFO,Cx={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Ix=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=Cx[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vy{constructor(e){this.name=e,this._logLevel=Rx,this._logHandler=Ix,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const Dx=(n,e)=>e.some(t=>n instanceof t);let x0,O0;function Nx(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xx(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mA=new WeakMap,Ig=new WeakMap,pA=new WeakMap,sg=new WeakMap,_y=new WeakMap;function Ox(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ss(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&mA.set(t,n)}).catch(()=>{}),_y.set(e,n),e}function Mx(n){if(Ig.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ig.set(n,e)}let Dg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ss(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Vx(n){Dg=n(Dg)}function Px(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(og(this),e,...t);return pA.set(a,e.sort?e.sort():[e]),ss(a)}:xx().includes(n)?function(...e){return n.apply(og(this),e),ss(mA.get(this))}:function(...e){return ss(n.apply(og(this),e))}}function Lx(n){return typeof n=="function"?Px(n):(n instanceof IDBTransaction&&Mx(n),Dx(n,Nx())?new Proxy(n,Dg):n)}function ss(n){if(n instanceof IDBRequest)return Ox(n);if(sg.has(n))return sg.get(n);const e=Lx(n);return e!==n&&(sg.set(n,e),_y.set(e,n)),e}const og=n=>_y.get(n);function kx(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=ss(c);return a&&c.addEventListener("upgradeneeded",p=>{a(ss(c.result),p.oldVersion,p.newVersion,ss(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const Ux=["get","getKey","getAll","getAllKeys","count"],jx=["put","add","delete","clear"],lg=new Map;function M0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=jx.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||Ux.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return lg.set(e,l),l}Vx(n=>({...n,get:(e,t,a)=>M0(e,t)||n.get(e,t,a),has:(e,t)=>!!M0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Bx(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function Bx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",V0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new vy("@firebase/app"),Fx="@firebase/app-compat",Hx="@firebase/analytics-compat",qx="@firebase/analytics",Gx="@firebase/app-check-compat",$x="@firebase/app-check",Kx="@firebase/auth",Yx="@firebase/auth-compat",Qx="@firebase/database",Xx="@firebase/data-connect",Wx="@firebase/database-compat",Jx="@firebase/functions",Zx="@firebase/functions-compat",e2="@firebase/installations",t2="@firebase/installations-compat",n2="@firebase/messaging",r2="@firebase/messaging-compat",i2="@firebase/performance",a2="@firebase/performance-compat",s2="@firebase/remote-config",o2="@firebase/remote-config-compat",l2="@firebase/storage",u2="@firebase/storage-compat",c2="@firebase/firestore",h2="@firebase/ai",f2="@firebase/firestore-compat",d2="firebase",m2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg="[DEFAULT]",p2={[Ng]:"fire-core",[Fx]:"fire-core-compat",[qx]:"fire-analytics",[Hx]:"fire-analytics-compat",[$x]:"fire-app-check",[Gx]:"fire-app-check-compat",[Kx]:"fire-auth",[Yx]:"fire-auth-compat",[Qx]:"fire-rtdb",[Xx]:"fire-data-connect",[Wx]:"fire-rtdb-compat",[Jx]:"fire-fn",[Zx]:"fire-fn-compat",[e2]:"fire-iid",[t2]:"fire-iid-compat",[n2]:"fire-fcm",[r2]:"fire-fcm-compat",[i2]:"fire-perf",[a2]:"fire-perf-compat",[s2]:"fire-rc",[o2]:"fire-rc-compat",[l2]:"fire-gcs",[u2]:"fire-gcs-compat",[c2]:"fire-fst",[f2]:"fire-fst-compat",[h2]:"fire-vertex","fire-js":"fire-js",[d2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map,g2=new Map,Og=new Map;function P0(n,e){try{n.container.addComponent(e)}catch(t){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gl(n){const e=n.name;if(Og.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;Og.set(e,n);for(const t of jf.values())P0(t,n);for(const t of g2.values())P0(t,n);return!0}function Ey(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ai(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new vc("app","Firebase",y2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=m2;function gA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:xg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw os.create("bad-app-name",{appName:String(s)});if(t||(t=cA()),!t)throw os.create("no-options");const l=jf.get(s);if(l){if(no(t,l.options)&&no(a,l.config))return l;throw os.create("duplicate-app",{appName:s})}const c=new Ax(s);for(const p of Og.values())c.addComponent(p);const d=new v2(t,a,c);return jf.set(s,d),d}function yA(n=xg){const e=jf.get(n);if(!e&&n===xg&&cA())return gA();if(!e)throw os.create("no-app",{appName:n});return e}function ls(n,e,t){let a=p2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(c.join(" "));return}gl(new ro(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="firebase-heartbeat-database",E2=1,rc="firebase-heartbeat-store";let ug=null;function vA(){return ug||(ug=kx(_2,E2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rc)}catch(t){console.warn(t)}}}}).catch(n=>{throw os.create("idb-open",{originalErrorMessage:n.message})})),ug}async function T2(n){try{const t=(await vA()).transaction(rc),a=await t.objectStore(rc).get(_A(n));return await t.done,a}catch(e){if(e instanceof ya)ha.warn(e.message);else{const t=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ha.warn(t.message)}}}async function L0(n,e){try{const a=(await vA()).transaction(rc,"readwrite");await a.objectStore(rc).put(e,_A(n)),await a.done}catch(t){if(t instanceof ya)ha.warn(t.message);else{const a=os.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ha.warn(a.message)}}}function _A(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=1024,S2=30;class A2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new R2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=k0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>S2){const c=C2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ha.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=k0(),{heartbeatsToSend:a,unsentEntries:s}=w2(this._heartbeatsCache.heartbeats),l=Uf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ha.warn(t),""}}}function k0(){return new Date().toISOString().substring(0,10)}function w2(n,e=b2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),U0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),U0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class R2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fx()?dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await T2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return L0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return L0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function U0(n){return Uf(JSON.stringify({version:2,heartbeats:n})).length}function C2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(n){gl(new ro("platform-logger",e=>new zx(e),"PRIVATE")),gl(new ro("heartbeat",e=>new A2(e),"PRIVATE")),ls(Ng,V0,n),ls(Ng,V0,"esm2020"),ls("fire-js","")}I2("");var j0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var us,EA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function I(){}I.prototype=w.prototype,S.F=w.prototype,S.prototype=new I,S.prototype.constructor=S,S.D=function(N,O,M){for(var x=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)x[Ee-2]=arguments[Ee];return w.prototype[O].apply(N,x)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,I){I||(I=0);const N=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)N[O]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(O=0;O<16;++O)N[O]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=S.g[0],I=S.g[1],O=S.g[2];let M=S.g[3],x;x=w+(M^I&(O^M))+N[0]+3614090360&4294967295,w=I+(x<<7&4294967295|x>>>25),x=M+(O^w&(I^O))+N[1]+3905402710&4294967295,M=w+(x<<12&4294967295|x>>>20),x=O+(I^M&(w^I))+N[2]+606105819&4294967295,O=M+(x<<17&4294967295|x>>>15),x=I+(w^O&(M^w))+N[3]+3250441966&4294967295,I=O+(x<<22&4294967295|x>>>10),x=w+(M^I&(O^M))+N[4]+4118548399&4294967295,w=I+(x<<7&4294967295|x>>>25),x=M+(O^w&(I^O))+N[5]+1200080426&4294967295,M=w+(x<<12&4294967295|x>>>20),x=O+(I^M&(w^I))+N[6]+2821735955&4294967295,O=M+(x<<17&4294967295|x>>>15),x=I+(w^O&(M^w))+N[7]+4249261313&4294967295,I=O+(x<<22&4294967295|x>>>10),x=w+(M^I&(O^M))+N[8]+1770035416&4294967295,w=I+(x<<7&4294967295|x>>>25),x=M+(O^w&(I^O))+N[9]+2336552879&4294967295,M=w+(x<<12&4294967295|x>>>20),x=O+(I^M&(w^I))+N[10]+4294925233&4294967295,O=M+(x<<17&4294967295|x>>>15),x=I+(w^O&(M^w))+N[11]+2304563134&4294967295,I=O+(x<<22&4294967295|x>>>10),x=w+(M^I&(O^M))+N[12]+1804603682&4294967295,w=I+(x<<7&4294967295|x>>>25),x=M+(O^w&(I^O))+N[13]+4254626195&4294967295,M=w+(x<<12&4294967295|x>>>20),x=O+(I^M&(w^I))+N[14]+2792965006&4294967295,O=M+(x<<17&4294967295|x>>>15),x=I+(w^O&(M^w))+N[15]+1236535329&4294967295,I=O+(x<<22&4294967295|x>>>10),x=w+(O^M&(I^O))+N[1]+4129170786&4294967295,w=I+(x<<5&4294967295|x>>>27),x=M+(I^O&(w^I))+N[6]+3225465664&4294967295,M=w+(x<<9&4294967295|x>>>23),x=O+(w^I&(M^w))+N[11]+643717713&4294967295,O=M+(x<<14&4294967295|x>>>18),x=I+(M^w&(O^M))+N[0]+3921069994&4294967295,I=O+(x<<20&4294967295|x>>>12),x=w+(O^M&(I^O))+N[5]+3593408605&4294967295,w=I+(x<<5&4294967295|x>>>27),x=M+(I^O&(w^I))+N[10]+38016083&4294967295,M=w+(x<<9&4294967295|x>>>23),x=O+(w^I&(M^w))+N[15]+3634488961&4294967295,O=M+(x<<14&4294967295|x>>>18),x=I+(M^w&(O^M))+N[4]+3889429448&4294967295,I=O+(x<<20&4294967295|x>>>12),x=w+(O^M&(I^O))+N[9]+568446438&4294967295,w=I+(x<<5&4294967295|x>>>27),x=M+(I^O&(w^I))+N[14]+3275163606&4294967295,M=w+(x<<9&4294967295|x>>>23),x=O+(w^I&(M^w))+N[3]+4107603335&4294967295,O=M+(x<<14&4294967295|x>>>18),x=I+(M^w&(O^M))+N[8]+1163531501&4294967295,I=O+(x<<20&4294967295|x>>>12),x=w+(O^M&(I^O))+N[13]+2850285829&4294967295,w=I+(x<<5&4294967295|x>>>27),x=M+(I^O&(w^I))+N[2]+4243563512&4294967295,M=w+(x<<9&4294967295|x>>>23),x=O+(w^I&(M^w))+N[7]+1735328473&4294967295,O=M+(x<<14&4294967295|x>>>18),x=I+(M^w&(O^M))+N[12]+2368359562&4294967295,I=O+(x<<20&4294967295|x>>>12),x=w+(I^O^M)+N[5]+4294588738&4294967295,w=I+(x<<4&4294967295|x>>>28),x=M+(w^I^O)+N[8]+2272392833&4294967295,M=w+(x<<11&4294967295|x>>>21),x=O+(M^w^I)+N[11]+1839030562&4294967295,O=M+(x<<16&4294967295|x>>>16),x=I+(O^M^w)+N[14]+4259657740&4294967295,I=O+(x<<23&4294967295|x>>>9),x=w+(I^O^M)+N[1]+2763975236&4294967295,w=I+(x<<4&4294967295|x>>>28),x=M+(w^I^O)+N[4]+1272893353&4294967295,M=w+(x<<11&4294967295|x>>>21),x=O+(M^w^I)+N[7]+4139469664&4294967295,O=M+(x<<16&4294967295|x>>>16),x=I+(O^M^w)+N[10]+3200236656&4294967295,I=O+(x<<23&4294967295|x>>>9),x=w+(I^O^M)+N[13]+681279174&4294967295,w=I+(x<<4&4294967295|x>>>28),x=M+(w^I^O)+N[0]+3936430074&4294967295,M=w+(x<<11&4294967295|x>>>21),x=O+(M^w^I)+N[3]+3572445317&4294967295,O=M+(x<<16&4294967295|x>>>16),x=I+(O^M^w)+N[6]+76029189&4294967295,I=O+(x<<23&4294967295|x>>>9),x=w+(I^O^M)+N[9]+3654602809&4294967295,w=I+(x<<4&4294967295|x>>>28),x=M+(w^I^O)+N[12]+3873151461&4294967295,M=w+(x<<11&4294967295|x>>>21),x=O+(M^w^I)+N[15]+530742520&4294967295,O=M+(x<<16&4294967295|x>>>16),x=I+(O^M^w)+N[2]+3299628645&4294967295,I=O+(x<<23&4294967295|x>>>9),x=w+(O^(I|~M))+N[0]+4096336452&4294967295,w=I+(x<<6&4294967295|x>>>26),x=M+(I^(w|~O))+N[7]+1126891415&4294967295,M=w+(x<<10&4294967295|x>>>22),x=O+(w^(M|~I))+N[14]+2878612391&4294967295,O=M+(x<<15&4294967295|x>>>17),x=I+(M^(O|~w))+N[5]+4237533241&4294967295,I=O+(x<<21&4294967295|x>>>11),x=w+(O^(I|~M))+N[12]+1700485571&4294967295,w=I+(x<<6&4294967295|x>>>26),x=M+(I^(w|~O))+N[3]+2399980690&4294967295,M=w+(x<<10&4294967295|x>>>22),x=O+(w^(M|~I))+N[10]+4293915773&4294967295,O=M+(x<<15&4294967295|x>>>17),x=I+(M^(O|~w))+N[1]+2240044497&4294967295,I=O+(x<<21&4294967295|x>>>11),x=w+(O^(I|~M))+N[8]+1873313359&4294967295,w=I+(x<<6&4294967295|x>>>26),x=M+(I^(w|~O))+N[15]+4264355552&4294967295,M=w+(x<<10&4294967295|x>>>22),x=O+(w^(M|~I))+N[6]+2734768916&4294967295,O=M+(x<<15&4294967295|x>>>17),x=I+(M^(O|~w))+N[13]+1309151649&4294967295,I=O+(x<<21&4294967295|x>>>11),x=w+(O^(I|~M))+N[4]+4149444226&4294967295,w=I+(x<<6&4294967295|x>>>26),x=M+(I^(w|~O))+N[11]+3174756917&4294967295,M=w+(x<<10&4294967295|x>>>22),x=O+(w^(M|~I))+N[2]+718787259&4294967295,O=M+(x<<15&4294967295|x>>>17),x=I+(M^(O|~w))+N[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(O+(x<<21&4294967295|x>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+M&4294967295}a.prototype.v=function(S,w){w===void 0&&(w=S.length);const I=w-this.blockSize,N=this.C;let O=this.h,M=0;for(;M<w;){if(O==0)for(;M<=I;)s(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<w;)if(N[O++]=S.charCodeAt(M++),O==this.blockSize){s(this,N),O=0;break}}else for(;M<w;)if(N[O++]=S[M++],O==this.blockSize){s(this,N),O=0;break}}this.h=O,this.o+=w},a.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var I=S.length-8;I<S.length;++I)S[I]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,I=0;I<4;++I)for(let N=0;N<32;N+=8)S[w++]=this.g[I]>>>N&255;return S};function l(S,w){var I=d;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=w(S)}function c(S,w){this.h=w;const I=[];let N=!0;for(let O=S.length-1;O>=0;O--){const M=S[O]|0;N&&M==w||(I[O]=M,N=!1)}this.g=I}var d={};function p(S){return-128<=S&&S<128?l(S,function(w){return new c([w|0],w<0?-1:0)}):new c([S|0],S<0?-1:0)}function g(S){if(isNaN(S)||!isFinite(S))return E;if(S<0)return V(g(-S));const w=[];let I=1;for(let N=0;S>=I;N++)w[N]=S/I|0,I*=4294967296;return new c(w,0)}function v(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return V(v(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let N=E;for(let M=0;M<S.length;M+=8){var O=Math.min(8,S.length-M);const x=parseInt(S.substring(M,M+O),w);O<8?(O=g(Math.pow(w,O)),N=N.j(O).add(g(x))):(N=N.j(I),N=N.add(g(x)))}return N}var E=p(0),b=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-V(this).m();let S=0,w=1;for(let I=0;I<this.g.length;I++){const N=this.i(I);S+=(N>=0?N:4294967296+N)*w,w*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(U(this))return"0";if(B(this))return"-"+V(this).toString(S);const w=g(Math.pow(S,6));var I=this;let N="";for(;;){const O=X(I,w).g;I=q(I,O.j(w));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(S);if(I=O,U(I))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function U(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function B(S){return S.h==-1}n.l=function(S){return S=q(this,S),B(S)?-1:U(S)?0:1};function V(S){const w=S.g.length,I=[];for(let N=0;N<w;N++)I[N]=~S.g[N];return new c(I,~S.h).add(b)}n.abs=function(){return B(this)?V(this):this},n.add=function(S){const w=Math.max(this.g.length,S.g.length),I=[];let N=0;for(let O=0;O<=w;O++){let M=N+(this.i(O)&65535)+(S.i(O)&65535),x=(M>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);N=x>>>16,M&=65535,x&=65535,I[O]=x<<16|M}return new c(I,I[I.length-1]&-2147483648?-1:0)};function q(S,w){return S.add(V(w))}n.j=function(S){if(U(this)||U(S))return E;if(B(this))return B(S)?V(this).j(V(S)):V(V(this).j(S));if(B(S))return V(this.j(V(S)));if(this.l(C)<0&&S.l(C)<0)return g(this.m()*S.m());const w=this.g.length+S.g.length,I=[];for(var N=0;N<2*w;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(let O=0;O<S.g.length;O++){const M=this.i(N)>>>16,x=this.i(N)&65535,Ee=S.i(O)>>>16,De=S.i(O)&65535;I[2*N+2*O]+=x*De,H(I,2*N+2*O),I[2*N+2*O+1]+=M*De,H(I,2*N+2*O+1),I[2*N+2*O+1]+=x*Ee,H(I,2*N+2*O+1),I[2*N+2*O+2]+=M*Ee,H(I,2*N+2*O+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new c(I,0)};function H(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function F(S,w){this.g=S,this.h=w}function X(S,w){if(U(w))throw Error("division by zero");if(U(S))return new F(E,E);if(B(S))return w=X(V(S),w),new F(V(w.g),V(w.h));if(B(w))return w=X(S,V(w)),new F(V(w.g),w.h);if(S.g.length>30){if(B(S)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,N=w;N.l(S)<=0;)I=ie(I),N=ie(N);var O=Y(I,1),M=Y(N,1);for(N=Y(N,2),I=Y(I,2);!U(N);){var x=M.add(N);x.l(S)<=0&&(O=O.add(I),M=x),N=Y(N,1),I=Y(I,1)}return w=q(S,O.j(w)),new F(O,w)}for(O=E;S.l(w)>=0;){for(I=Math.max(1,Math.floor(S.m()/w.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=g(I),x=M.j(w);B(x)||x.l(S)>0;)I-=N,M=g(I),x=M.j(w);U(M)&&(M=b),O=O.add(M),S=q(S,x)}return new F(O,S)}n.B=function(S){return X(this,S).h},n.and=function(S){const w=Math.max(this.g.length,S.g.length),I=[];for(let N=0;N<w;N++)I[N]=this.i(N)&S.i(N);return new c(I,this.h&S.h)},n.or=function(S){const w=Math.max(this.g.length,S.g.length),I=[];for(let N=0;N<w;N++)I[N]=this.i(N)|S.i(N);return new c(I,this.h|S.h)},n.xor=function(S){const w=Math.max(this.g.length,S.g.length),I=[];for(let N=0;N<w;N++)I[N]=this.i(N)^S.i(N);return new c(I,this.h^S.h)};function ie(S){const w=S.g.length+1,I=[];for(let N=0;N<w;N++)I[N]=S.i(N)<<1|S.i(N-1)>>>31;return new c(I,S.h)}function Y(S,w){const I=w>>5;w%=32;const N=S.g.length-I,O=[];for(let M=0;M<N;M++)O[M]=w>0?S.i(M+I)>>>w|S.i(M+I+1)<<32-w:S.i(M+I);return new c(O,S.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,EA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,us=c}).apply(typeof j0<"u"?j0:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TA,Uu,bA,gf,Mg,SA,AA,wA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var Q=h[D];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],D=T[h],y=y(D),y!=D&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,Q,te){for(var ve=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)ve[Je-2]=arguments[Je];return y.prototype[Q].apply(D,ve)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=h[D];return T}return[]}function U(h,y){for(let D=1;D<arguments.length;D++){const Q=arguments[D];var T=typeof Q;if(T=T!="object"?T:Q?Array.isArray(Q)?"array":T:"null",T=="array"||T=="object"&&typeof Q.length=="number"){T=h.length||0;const te=Q.length||0;h.length=T+te;for(let ve=0;ve<te;ve++)h[T+ve]=Q[ve]}else h.push(Q)}}class B{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(h){c.setTimeout(()=>{throw h},0)}function q(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class H{constructor(){this.h=this.g=null}add(y,T){const D=F.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var F=new B(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,Y=!1,S=new H,w=()=>{const h=Promise.resolve(void 0);ie=()=>{h.then(I)}};function I(){for(var h;h=q();){try{h.h.call(h.g)}catch(T){V(T)}var y=F;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Y=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function Ee(h,y){O.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(Ee,O),Ee.prototype.init=function(h,y){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),$=0;function ue(h,y,T,D,Q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=Q,this.key=++$,this.da=this.fa=!1}function de(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ve(h,y,T){for(const D in h)y.call(T,h[D],D,h)}function Ne(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function j(h){const y={};for(const T in h)y[T]=h[T];return y}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function me(h,y){let T,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(T in D)h[T]=D[T];for(let te=0;te<re.length;te++)T=re[te],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function pe(h){this.src=h,this.g={},this.h=0}pe.prototype.add=function(h,y,T,D,Q){const te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);const ve=Oe(h,y,D,Q);return ve>-1?(y=h[ve],T||(y.fa=!1)):(y=new ue(y,this.src,te,!!D,Q),y.fa=T,h.push(y)),y};function be(h,y){const T=y.type;if(T in h.g){var D=h.g[T],Q=Array.prototype.indexOf.call(D,y,void 0),te;(te=Q>=0)&&Array.prototype.splice.call(D,Q,1),te&&(de(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Oe(h,y,T,D){for(let Q=0;Q<h.length;++Q){const te=h[Q];if(!te.da&&te.listener==y&&te.capture==!!T&&te.ha==D)return Q}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),We={};function rt(h,y,T,D,Q){if(Array.isArray(y)){for(let te=0;te<y.length;te++)rt(h,y[te],T,D,Q);return null}return T=Fe(T),h&&h[De]?h.J(y,T,d(D)?!!D.capture:!1,Q):qn(h,y,T,!1,D,Q)}function qn(h,y,T,D,Q,te){if(!y)throw Error("Invalid event type");const ve=d(Q)?!!Q.capture:!!Q;let Je=Le(h);if(Je||(h[Ke]=Je=new pe(h)),T=Je.add(y,T,D,ve,te),T.proxy)return T;if(D=hr(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)M||(Q=ve),Q===void 0&&(Q=!1),h.addEventListener(y.toString(),D,Q);else if(h.attachEvent)h.attachEvent(se(y.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function hr(){function h(T){return y.call(h.src,h.listener,T)}const y=Te;return h}function kt(h,y,T,D,Q){if(Array.isArray(y))for(var te=0;te<y.length;te++)kt(h,y[te],T,D,Q);else D=d(D)?!!D.capture:!!D,T=Fe(T),h&&h[De]?(h=h.i,te=String(y).toString(),te in h.g&&(y=h.g[te],T=Oe(y,T,D,Q),T>-1&&(de(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[te],h.h--)))):h&&(h=Le(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Oe(y,T,D,Q)),(T=h>-1?y[h]:null)&&Rn(T))}function Rn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[De])be(y.i,h);else{var T=h.type,D=h.proxy;y.removeEventListener?y.removeEventListener(T,D,h.capture):y.detachEvent?y.detachEvent(se(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=Le(y))?(be(T,h),T.h==0&&(T.src=null,y[Ke]=null)):de(h)}}}function se(h){return h in We?We[h]:We[h]="on"+h}function Te(h,y){if(h.da)h=!0;else{y=new Ee(y,this);const T=h.listener,D=h.ha||h.src;h.fa&&Rn(h),h=T.call(D,y)}return h}function Le(h){return h=h[Ke],h instanceof pe?h:null}var Pe="__closure_events_fn_"+(Math.random()*1e9>>>0);function Fe(h){return typeof h=="function"?h:(h[Pe]||(h[Pe]=function(y){return h.handleEvent(y)}),h[Pe])}function je(){N.call(this),this.i=new pe(this),this.M=this,this.G=null}E(je,N),je.prototype[De]=!0,je.prototype.removeEventListener=function(h,y,T,D){kt(this,h,y,T,D)};function ct(h,y){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=y.type||y,typeof y=="string")y=new O(y,h);else if(y instanceof O)y.target=y.target||h;else{var Q=y;y=new O(D,h),me(y,Q)}Q=!0;let te,ve;if(T)for(ve=T.length-1;ve>=0;ve--)te=y.g=T[ve],Q=vt(te,D,!0,y)&&Q;if(te=y.g=h,Q=vt(te,D,!0,y)&&Q,Q=vt(te,D,!1,y)&&Q,T)for(ve=0;ve<T.length;ve++)te=y.g=T[ve],Q=vt(te,D,!1,y)&&Q}je.prototype.N=function(){if(je.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let D=0;D<T.length;D++)de(T[D]);delete h.g[y],h.h--}}this.G=null},je.prototype.J=function(h,y,T,D){return this.i.add(String(h),y,!1,T,D)},je.prototype.K=function(h,y,T,D){return this.i.add(String(h),y,!0,T,D)};function vt(h,y,T,D){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let Q=!0;for(let te=0;te<y.length;++te){const ve=y[te];if(ve&&!ve.da&&ve.capture==T){const Je=ve.listener,nn=ve.ha||ve.src;ve.fa&&be(h.i,ve),Q=Je.call(nn,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function Be(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Rt(h){h.g=Be(()=>{h.g=null,h.i&&(h.i=!1,Rt(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class st extends N{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gn(h){N.call(this),this.h=h,this.g={}}E(gn,N);var Zn=[];function Gn(h){Ve(h.g,function(y,T){this.g.hasOwnProperty(T)&&Rn(y)},h),h.g={}}gn.prototype.N=function(){gn.Z.N.call(this),Gn(this)},gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=c.JSON.stringify,fr=c.JSON.parse,Ts=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function po(){}function va(){}var dr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){O.call(this,"d")}E(Pt,O);function $n(){O.call(this,"c")}E($n,O);var $t={},bs=null;function _a(){return bs=bs||new je}$t.Ia="serverreachability";function Ss(h){O.call(this,$t.Ia,h)}E(Ss,O);function Kn(h){const y=_a();ct(y,new Ss(y))}$t.STAT_EVENT="statevent";function di(h,y){O.call(this,$t.STAT_EVENT,h),this.stat=y}E(di,O);function Kt(h){const y=_a();ct(y,new di(y,h))}$t.Ja="timingevent";function Or(h,y){O.call(this,$t.Ja,h),this.size=y}E(Or,O);function mr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function go(h,y,T,D,Q,te){h.info(function(){if(h.g)if(te){var ve="",Je=te.split("&");for(let St=0;St<Je.length;St++){var nn=Je[St].split("=");if(nn.length>1){const Yt=nn[0];nn=nn[1];const Pr=Yt.split("_");ve=Pr.length>=2&&Pr[1]=="type"?ve+(Yt+"="+nn+"&"):ve+(Yt+"=redacted&")}}}else ve=null;else ve=te;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+y+`
`+T+`
`+ve})}function Ui(h,y,T,D,Q,te,ve){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+y+`
`+T+`
`+te+" "+ve})}function Yn(h,y,T,D){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ul(h,T)+(D?" "+D:"")})}function mi(h,y){h.info(function(){return"TIMEOUT: "+y})}pr.prototype.info=function(){};function Ul(h,y){if(!h.g)return y;if(!y)return null;try{const te=JSON.parse(y);if(te){for(h=0;h<te.length;h++)if(Array.isArray(te[h])){var T=te[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var Q=D[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let ve=1;ve<D.length;ve++)D[ve]=""}}}}return Tn(te)}catch{return y}}var ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},L={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},G;function Z(){}E(Z,po),Z.prototype.g=function(){return new XMLHttpRequest},G=new Z;function fe(h){return encodeURIComponent(String(h))}function ge(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Ae(h,y,T,D){this.j=h,this.i=y,this.l=T,this.S=D||1,this.V=new gn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ce}function Ce(){this.i=null,this.g="",this.h=!1}var ye={},_e={};function Re(h,y,T){h.M=1,h.A=As(Nt(y)),h.u=T,h.R=!0,He(h,null)}function He(h,y){h.F=Date.now(),Dt(h),h.B=Nt(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),vo(T.i,"t",D),h.C=0,T=h.j.L,h.h=new Ce,h.g=Kc(h.j,T?y:null,!h.u),h.P>0&&(h.O=new st(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,D=h.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Zn[0]=Q.toString()),Q=Zn);for(let te=0;te<Q.length;te++){const ve=rt(T,Q[te],D||y.handleEvent,!1,y.h||y);if(!ve)break;y.g[ve.key]=ve}y=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Kn(),go(h.i,h.v,h.B,h.l,h.S,h.u)}Ae.prototype.ba=function(h){h=h.target;const y=this.O;y&&Zr(h)==3?y.j():this.Y(h)},Ae.prototype.Y=function(h){try{if(h==this.g)e:{const Je=Zr(this.g),nn=this.g.ya(),St=this.g.ca();if(!(Je<3)&&(Je!=3||this.g&&(this.h.h||this.g.la()||Cn(this.g)))){this.K||Je!=4||nn==7||(nn==8||St<=0?Kn(3):Kn(2)),Ut(this);var y=this.g.ca();this.X=y;var T=Me(this);if(this.o=y==200,Ui(this.i,this.v,this.B,this.l,this.S,Je,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Q=this.g;if((D=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(D)){var te=D;break t}}te=null}if(h=te)Yn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bn(this,h);else{this.o=!1,this.m=3,Kt(12),jt(this),et(this);break e}}if(this.R){h=!0;let Yt;for(;!this.K&&this.C<T.length;)if(Yt=it(this,T),Yt==_e){Je==4&&(this.m=4,Kt(14),h=!1),Yn(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==ye){this.m=4,Kt(15),Yn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Yn(this.i,this.l,Yt,null),bn(this,Yt);if($e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Je!=4||T.length!=0||this.h.h||(this.m=1,Kt(16),h=!1),this.o=this.o&&h,!h)Yn(this.i,this.l,T,"[Invalid Chunked Response]"),jt(this),et(this);else if(T.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Kl(ve),ve.P=!0,Kt(11))}}else Yn(this.i,this.l,T,null),bn(this,T);Je==4&&jt(this),this.o&&!this.K&&(Je==4?Hc(this.j,this):(this.o=!1,Dt(this)))}else Bi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),jt(this),et(this)}}}catch{}finally{}};function Me(h){if(!$e(h))return h.g.la();const y=Cn(h.g);if(y==="")return"";let T="";const D=y.length,Q=Zr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return jt(h),et(h),"";h.h.i=new c.TextDecoder}for(let te=0;te<D;te++)h.h.h=!0,T+=h.h.i.decode(y[te],{stream:!(Q&&te==D-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function $e(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function it(h,y){var T=h.C,D=y.indexOf(`
`,T);return D==-1?_e:(T=Number(y.substring(T,D)),isNaN(T)?ye:(D+=1,D+T>y.length?_e:(y=y.slice(D,D+T),h.C=D+T,y)))}Ae.prototype.cancel=function(){this.K=!0,jt(this)};function Dt(h){h.T=Date.now()+h.H,Ft(h,h.H)}function Ft(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=mr(g(h.aa,h),y)}function Ut(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ae.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(mi(this.i,this.B),this.M!=2&&(Kn(),Kt(17)),jt(this),this.m=2,et(this)):Ft(this,this.T-h)};function et(h){h.j.I==0||h.K||Hc(h.j,h)}function jt(h){Ut(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Gn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function bn(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||kn(T.h,h))){if(!h.L&&kn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)So(T),Ca(T);else break e;xs(T),Kt(18)}}else T.xa=Q[1],0<T.xa-T.K&&Q[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=mr(g(T.Va,T),6e3));tr(T.h)<=1&&T.ta&&(T.ta=void 0)}else bi(T,11)}else if((h.L||T.g==h)&&So(T),!x(y))for(Q=T.Ba.g.parse(y),y=0;y<Q.length;y++){let St=Q[y];const Yt=St[0];if(!(Yt<=T.K))if(T.K=Yt,St=St[1],T.I==2)if(St[0]=="c"){T.M=St[1],T.ba=St[2];const Pr=St[3];Pr!=null&&(T.ka=Pr,T.j.info("VER="+T.ka));const Si=St[4];Si!=null&&(T.za=Si,T.j.info("SVER="+T.za));const ei=St[5];ei!=null&&typeof ei=="number"&&ei>0&&(D=1.5*ei,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ti=h.g;if(ti){const Os=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Os){var te=D.h;te.g||Os.indexOf("spdy")==-1&&Os.indexOf("quic")==-1&&Os.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(gr(te,te.h),te.h=null))}if(D.G){const Ao=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(D.wa=Ao,bt(D.J,D.G,Ao))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var ve=h;if(D.na=$c(D,D.L?D.ba:null,D.W),ve.L){pi(D.h,ve);var Je=ve,nn=D.O;nn&&(Je.H=nn),Je.D&&(Ut(Je),Dt(Je)),D.g=ve}else Bc(D);T.i.length>0&&Ti(T)}else St[0]!="stop"&&St[0]!="close"||bi(T,7);else T.I==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?bi(T,7):Gl(T):St[0]!="noop"&&T.l&&T.l.qa(St),T.A=0)}}Kn(4)}catch{}}var zt=class{constructor(h,y){this.g=h,this.map=y}};function er(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ln(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function tr(h){return h.h?1:h.g?h.g.size:0}function kn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function gr(h,y){h.g?h.g.add(y):h.h=y}function pi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}er.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return C(h.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let Q,te=null;D>=0?(Q=h[T].substring(0,D),te=h[T].substring(D+1)):Q=h[T],y(Q,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ln(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof ln?(this.l=h.l,tt(this,h.j),this.o=h.o,this.g=h.g,yr(this,h.u),this.h=h.h,Ea(this,jc(h.i)),this.m=h.m):h&&(y=String(h).match(ot))?(this.l=!1,tt(this,y[1]||"",!0),this.o=yi(y[2]||""),this.g=yi(y[3]||"",!0),yr(this,y[4]),this.h=yi(y[5]||"",!0),Ea(this,y[6]||"",!0),this.m=yi(y[7]||"")):(this.l=!1,this.i=new ba(null,this.l))}ln.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(ws(y,yo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ws(y,yo,!0),"@"),h.push(fe(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(ws(T,T.charAt(0)=="/"?jl:Lc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",ws(T,kc)),h.join("")},ln.prototype.resolve=function(h){const y=Nt(this);let T=!!h.j;T?tt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var D=h.h;if(T)yr(y,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Q=y.h.lastIndexOf("/");Q!=-1&&(D=y.h.slice(0,Q+1)+D)}if(Q=D,Q==".."||Q==".")D="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){D=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const te=[];for(let ve=0;ve<Q.length;){const Je=Q[ve++];Je=="."?D&&ve==Q.length&&te.push(""):Je==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&ve==Q.length&&te.push("")):(te.push(Je),D=!0)}D=te.join("/")}else D=Q}return T?y.h=D:T=h.i.toString()!=="",T?Ea(y,jc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function Nt(h){return new ln(h)}function tt(h,y,T){h.j=T?yi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function yr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ea(h,y,T){y instanceof ba?(h.i=y,_o(h.i,h.l)):(T||(y=ws(y,Ta)),h.i=new ba(y,h.l))}function bt(h,y,T){h.i.set(y,T)}function As(h){return bt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function yi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ws(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,nr),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function nr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yo=/[#\/\?@]/g,Lc=/[#\?:]/g,jl=/[#\?]/g,Ta=/[#\?@]/g,kc=/#/g;function ba(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function rr(h){h.g||(h.g=new Map,h.h=0,h.i&&Xt(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ba.prototype,n.add=function(h,y){rr(this),this.i=null,h=Sa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Uc(h,y){rr(h),y=Sa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function zl(h,y){return rr(h),y=Sa(h,y),h.g.has(y)}n.forEach=function(h,y){rr(this),this.g.forEach(function(T,D){T.forEach(function(Q){h.call(y,Q,D,this)},this)},this)};function Bl(h,y){rr(h);let T=[];if(typeof y=="string")zl(h,y)&&(T=T.concat(h.g.get(Sa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return rr(this),this.i=null,h=Sa(this,h),zl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=Bl(this,h),h.length>0?String(h[0]):y):y};function vo(h,y,T){Uc(h,y),T.length>0&&(h.i=null,h.g.set(Sa(h,y),C(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const Q=fe(T);T=Bl(this,T);for(let te=0;te<T.length;te++){let ve=Q;T[te]!==""&&(ve+="="+fe(T[te])),h.push(ve)}}return this.i=h.join("&")};function jc(h){const y=new ba;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Sa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function _o(h,y){y&&!h.j&&(rr(h),h.i=null,h.g.forEach(function(T,D){const Q=D.toLowerCase();D!=Q&&(Uc(this,D),vo(this,Q,T))},h)),h.j=y}function Wr(h,y){const T=new pr;if(c.Image){const D=new Image;D.onload=v(Mr,T,"TestLoadImage: loaded",!0,y,D),D.onerror=v(Mr,T,"TestLoadImage: error",!1,y,D),D.onabort=v(Mr,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=v(Mr,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else y(!1)}function Fl(h,y){const T=new pr,D=new AbortController,Q=setTimeout(()=>{D.abort(),Mr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:D.signal}).then(te=>{clearTimeout(Q),te.ok?Mr(T,"TestPingServer: ok",!0,y):Mr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(Q),Mr(T,"TestPingServer: error",!1,y)})}function Mr(h,y,T,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(T)}catch{}}function Aa(){this.g=new Ts}function vi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(vi,po),vi.prototype.g=function(){return new Rs(this.i,this.h)};function Rs(h,y){je.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Rs,je),n=Rs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Jr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Eo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Eo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?wa(this):Jr(this),this.readyState==3&&Eo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,wa(this))},n.Na=function(h){this.g&&(this.response=h,wa(this))},n.ga=function(){this.g&&wa(this)};function wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Jr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Jr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vr(h){let y="";return Ve(h,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function Cs(h,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Vr(T),typeof h=="string"?T!=null&&fe(T):bt(h,y,T))}function xt(h){je.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(xt,je);var _i=/^https?$/i,Hl=["POST","PUT"];n=xt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():G.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(te){Is(this,te);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)T.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())T.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(te=>te.toLowerCase()=="content-type"),Q=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Hl,y,void 0)>=0)||D||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ve]of T)this.g.setRequestHeader(te,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(te){Is(this,te)}};function Is(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,ql(h),zi(h)}function ql(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ct(this,"complete"),ct(this,"abort"),zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ds(this):this.Xa())},n.Xa=function(){Ds(this)};function Ds(h){if(h.h&&typeof l<"u"){if(h.v&&Zr(h)==4)setTimeout(h.Ca.bind(h),0);else if(ct(h,"readystatechange"),Zr(h)==4){h.h=!1;try{const te=h.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=te===0){let ve=String(h.D).match(ot)[1]||null;!ve&&c.self&&c.self.location&&(ve=c.self.location.protocol.slice(0,-1)),D=!_i.test(ve?ve.toLowerCase():"")}T=D}if(T)ct(h,"complete"),ct(h,"success");else{h.o=6;try{var Q=Zr(h)>2?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.ca()+"]",ql(h)}}finally{zi(h)}}}}function zi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||ct(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),fr(y)}};function Cn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(h){const y={};h=(h.g&&Zr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(x(h[D]))continue;var T=ge(h[D]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const te=y[Q]||[];y[Q]=te,te.push(T)}Ne(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ra(h){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,h),this.Za=Ei("retryDelaySeedMs",1e4,h),this.Ta=Ei("forwardChannelMaxRetries",2,h),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new er(h&&h.concurrentRequestLimit),this.Ba=new Aa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,D){Kt(0),this.W=h,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=$c(this,null,this.W),Ti(this)};function Gl(h){if(To(h),h.I==3){var y=h.V++,T=Nt(h.J);if(bt(T,"SID",h.M),bt(T,"RID",y),bt(T,"TYPE","terminate"),Ns(h,T),y=new Ae(h,h.j,y),y.M=2,y.A=As(Nt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Kc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Dt(y)}Gc(h)}function Ca(h){h.g&&(Kl(h),h.g.cancel(),h.g=null)}function To(h){Ca(h),h.v&&(c.clearTimeout(h.v),h.v=null),So(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ti(h){if(!Ln(h.h)&&!h.m){h.m=!0;var y=h.Ea;ie||w(),Y||(ie(),Y=!0),S.add(y,h),h.D=0}}function bo(h,y){return tr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=mr(g(h.Ea,h,y),qc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Q=new Ae(this,this.j,h);let te=this.o;if(this.U&&(te?(te=j(te),me(te,this.U)):te=this.U),this.u!==null||this.R||(Q.J=te,te=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=zc(this,Q,y),T=Nt(this.J),bt(T,"RID",h),bt(T,"CVER",22),this.G&&bt(T,"X-HTTP-Session-Id",this.G),Ns(this,T),te&&(this.R?y="headers="+fe(Vr(te))+"&"+y:this.u&&Cs(T,this.u,te)),gr(this.h,Q),this.Ra&&bt(T,"TYPE","init"),this.S?(bt(T,"$req",y),bt(T,"SID","null"),Q.U=!0,Re(Q,T,null)):Re(Q,T,y),this.I=2}}else this.I==3&&(h?$l(this,h):this.i.length==0||Ln(this.h)||$l(this))};function $l(h,y){var T;y?T=y.l:T=h.V++;const D=Nt(h.J);bt(D,"SID",h.M),bt(D,"RID",T),bt(D,"AID",h.K),Ns(h,D),h.u&&h.o&&Cs(D,h.u,h.o),T=new Ae(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=zc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),gr(h.h,T),Re(T,D,y)}function Ns(h,y){h.H&&Ve(h.H,function(T,D){bt(y,D,T)}),h.l&&Ve({},function(T,D){bt(y,D,T)})}function zc(h,y,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var Q=h.i;let Je=-1;for(;;){const nn=["count="+T];Je==-1?T>0?(Je=Q[0].g,nn.push("ofs="+Je)):Je=0:nn.push("ofs="+Je);let St=!0;for(let Yt=0;Yt<T;Yt++){var te=Q[Yt].g;const Pr=Q[Yt].map;if(te-=Je,te<0)Je=Math.max(0,Q[Yt].g-100),St=!1;else try{te="req"+te+"_"||"";try{var ve=Pr instanceof Map?Pr:Object.entries(Pr);for(const[Si,ei]of ve){let ti=ei;d(ei)&&(ti=Tn(ei)),nn.push(te+Si+"="+encodeURIComponent(ti))}}catch(Si){throw nn.push(te+"type="+encodeURIComponent("_badmap")),Si}}catch{D&&D(Pr)}}if(St){ve=nn.join("&");break e}}ve=void 0}return h=h.i.splice(0,T),y.G=h,ve}function Bc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;ie||w(),Y||(ie(),Y=!0),S.add(y,h),h.A=0}}function xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=mr(g(h.Da,h),qc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Fc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=mr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),Ca(this),Fc(this))};function Kl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Fc(h){h.g=new Ae(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=Nt(h.na);bt(y,"RID","rpc"),bt(y,"SID",h.M),bt(y,"AID",h.K),bt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&bt(y,"TO",h.ia),bt(y,"TYPE","xmlhttp"),Ns(h,y),h.u&&h.o&&Cs(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=As(Nt(y)),T.u=null,T.R=!0,He(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Ca(this),xs(this),Kt(19))};function So(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Hc(h,y){var T=null;if(h.g==y){So(h),Kl(h),h.g=null;var D=2}else if(kn(h.h,y))T=y.G,pi(h.h,y),D=1;else return;if(h.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var Q=h.D;D=_a(),ct(D,new Or(D,T)),Ti(h)}else Bc(h);else if(Q=y.m,Q==3||Q==0&&y.X>0||!(D==1&&bo(h,y)||D==2&&xs(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),Q){case 1:bi(h,5);break;case 4:bi(h,10);break;case 3:bi(h,6);break;default:bi(h,2)}}}function qc(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function bi(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),D=h.Ua;const Q=!D;D=new ln(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||tt(D,"https"),As(D),Q?Wr(D.toString(),T):Fl(D.toString(),T)}else Kt(2);h.I=0,h.l&&h.l.pa(y),Gc(h),To(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Gc(h){if(h.I=0,h.ja=[],h.l){const y=gi(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ja,y),U(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function $c(h,y,T){var D=T instanceof ln?Nt(T):new ln(T);if(D.g!="")y&&(D.g=y+"."+D.g),yr(D,D.u);else{var Q=c.location;D=Q.protocol,y=y?y+"."+Q.hostname:Q.hostname,Q=+Q.port;const te=new ln(null);D&&tt(te,D),y&&(te.g=y),Q&&yr(te,Q),T&&(te.h=T),D=te}return T=h.G,y=h.wa,T&&y&&bt(D,T,y),bt(D,"VER",h.ka),Ns(h,D),D}function Kc(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new xt(new vi({ab:T})):new xt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yc(){}n=Yc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ia(){}Ia.prototype.g=function(h,y){return new Qn(h,y)};function Qn(h,y){je.call(this),this.g=new Ra(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!x(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!x(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Fi(this)}E(Qn,je),Qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){Gl(this.g)},Qn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=Tn(h),h=T);y.i.push(new zt(y.Ya++,h)),y.I==3&&Ti(y)},Qn.prototype.N=function(){this.g.l=null,delete this.j,Gl(this.g),delete this.g,Qn.Z.N.call(this)};function Qc(h){Pt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Qc,Pt);function Xc(){$n.call(this),this.status=1}E(Xc,$n);function Fi(h){this.g=h}E(Fi,Yc),Fi.prototype.ra=function(){ct(this.g,"a")},Fi.prototype.qa=function(h){ct(this.g,new Qc(h))},Fi.prototype.pa=function(h){ct(this.g,new Xc)},Fi.prototype.oa=function(){ct(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,wA=function(){return new Ia},AA=function(){return _a()},SA=$t,Mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,gf=ji,L.COMPLETE="complete",bA=L,va.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",je.prototype.listen=je.prototype.J,Uu=va,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,TA=xt}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl="12.8.0";function D2(n){xl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new vy("@firebase/firestore");function nl(){return io.logLevel}function we(n,...e){if(io.logLevel<=dt.DEBUG){const t=e.map(Ty);io.debug(`Firestore (${xl}): ${n}`,...t)}}function fa(n,...e){if(io.logLevel<=dt.ERROR){const t=e.map(Ty);io.error(`Firestore (${xl}): ${n}`,...t)}}function yl(n,...e){if(io.logLevel<=dt.WARN){const t=e.map(Ty);io.warn(`Firestore (${xl}): ${n}`,...t)}}function Ty(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,RA(n,a,t)}function RA(n,e,t){let a=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw fa(a),new Error(a)}function wt(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||RA(e,s,a)}function Xe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends ya{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class x2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class O2{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ua,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ua)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(wt(typeof a.accessToken=="string",31837,{l:a}),new CA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class M2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class V2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new M2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const a=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=L2(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function mt(n,e){return n<e?-1:n>e?1:0}function Vg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return cg(s)===cg(l)?mt(s,l):cg(s)?1:-1}return mt(n.length,e.length)}const k2=55296,U2=57343;function cg(n){const e=n.charCodeAt(0);return e>=k2&&e<=U2}function vl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class Ii{constructor(e,t,a){t===void 0?t=0:t>e.length&&qe(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&qe(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=Ii.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const a=Ii.isNumericId(e),s=Ii.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?Ii.extractNumericId(e).compare(Ii.extractNumericId(t)):Vg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return us.fromString(e.substring(4,e.length-2))}}class Bt extends Ii{construct(e,t,a){return new Bt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Se(le.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Bt(t)}static emptyPath(){return new Bt([])}}const j2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Ii{construct(e,t,a){return new Vn(e,t,a)}static isValidIdentifier(e){return j2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new Vn([B0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Se(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Se(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Se(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Se(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(t)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Bt.fromString(e))}static fromName(e){return new Ue(Bt.fromString(e).popFirst(5))}static empty(){return new Ue(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(n,e,t){if(!t)throw new Se(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function z2(n,e,t,a){if(e===!0&&a===!0)throw new Se(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function F0(n){if(!Ue.isDocumentKey(n))throw new Se(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function H0(n){if(Ue.isDocumentKey(n))throw new Se(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function DA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ed(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe(12329,{type:typeof n})}function Ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ed(n);throw new Se(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ec(n,e){if(!DA(n))throw new Se(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Se(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,G0=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*G0);return new Gt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q0)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G0}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:pn("string",Gt._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Gt(0,0))}static max(){return new Ye(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=-1;function B2(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Ye.fromTimestamp(a===1e9?new Gt(t+1,0):new Gt(t,a));return new fs(s,Ue.empty(),e)}function F2(n){return new fs(n.readTime,n.key,ic)}class fs{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new fs(Ye.min(),Ue.empty(),ic)}static max(){return new fs(Ye.max(),Ue.empty(),ic)}}function H2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ue.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class G2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==q2)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):he.reject(t)}static resolve(e){return new he(((t,a)=>{t(e)}))}static reject(e){return new he(((t,a)=>{a(e)}))}static waitFor(e){return new he(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=he.resolve(!1);for(const a of e)t=t.next((s=>s?he.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new he(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((v=>{c[g]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new he(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function $2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ml(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Td.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-1;function bd(n){return n==null}function zf(n){return n===0&&1/n==-1/0}function K2(n){return typeof n=="number"&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="";function Y2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$0(e)),e=Q2(n.get(t),e);return $0(e)}function Q2(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case NA:t+="";break;default:t+=l}}return t}function $0(n){return n+NA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _s(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new Jt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new af(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new af(this.root,e,this.comparator,!1)}getReverseIterator(){return new af(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new af(this.root,e,this.comparator,!0)}}class af{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Mn.RED,this.left=s??Mn.EMPTY,this.right=l??Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Mn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Mn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qe(27949);return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1;Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw qe(57766)}get value(){throw qe(16141)}get color(){throw qe(16727)}get left(){throw qe(29726)}get right(){throw qe(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new Rr([])}unionWith(e){let t=new vn(Vn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new OA("Invalid base64 string: "+l):l}})(e);return new Pn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Pn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pn.EMPTY_BYTE_STRING=new Pn("");const X2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ds(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=X2.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:sn(n.seconds),nanos:sn(n.nanos)}}function sn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ms(n){return typeof n=="string"?Pn.fromBase64String(n):Pn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="server_timestamp",VA="__type__",PA="__previous_value__",LA="__local_write_time__";function Ay(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[VA])==null?void 0:a.stringValue)===MA}function Sd(n){const e=n.mapValue.fields[PA];return Ay(e)?Sd(e):e}function ac(n){const e=ds(n.mapValue.fields[LA].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,t,a,s,l,c,d,p,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Bf="(default)";class sc{constructor(e,t){this.projectId=e,this.database=t||Bf}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database===Bf}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}function J2(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Se(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="__type__",Z2="__max__",sf={mapValue:{}},UA="__vector__",Ff="value";function ps(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ay(n)?4:tO(n)?9007199254740991:eO(n)?10:11:qe(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=ps(n);if(t!==ps(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ac(n).isEqual(ac(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ds(s.timestampValue),d=ds(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return ms(s.bytesValue).isEqual(ms(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return sn(s.geoPointValue.latitude)===sn(l.geoPointValue.latitude)&&sn(s.geoPointValue.longitude)===sn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return sn(s.integerValue)===sn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=sn(s.doubleValue),d=sn(l.doubleValue);return c===d?zf(c)===zf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return vl(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(K0(c)!==K0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Li(c[p],d[p])))return!1;return!0})(n,e);default:return qe(52216,{left:n})}}function oc(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function _l(n,e){if(n===e)return 0;const t=ps(n),a=ps(e);if(t!==a)return mt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=sn(l.integerValue||l.doubleValue),p=sn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Q0(n.timestampValue,e.timestampValue);case 4:return Q0(ac(n),ac(e));case 5:return Vg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ms(l),p=ms(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const v=mt(d[g],p[g]);if(v!==0)return v}return mt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=mt(sn(l.latitude),sn(c.latitude));return d!==0?d:mt(sn(l.longitude),sn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return X0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,C,U,B;const d=l.fields||{},p=c.fields||{},g=(b=d[Ff])==null?void 0:b.arrayValue,v=(C=p[Ff])==null?void 0:C.arrayValue,E=mt(((U=g==null?void 0:g.values)==null?void 0:U.length)||0,((B=v==null?void 0:v.values)==null?void 0:B.length)||0);return E!==0?E:X0(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===sf.mapValue&&c===sf.mapValue)return 0;if(l===sf.mapValue)return 1;if(c===sf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let E=0;E<p.length&&E<v.length;++E){const b=Vg(p[E],v[E]);if(b!==0)return b;const C=_l(d[p[E]],g[v[E]]);if(C!==0)return C}return mt(p.length,v.length)})(n.mapValue,e.mapValue);default:throw qe(23264,{he:t})}}function Q0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=ds(n),a=ds(e),s=mt(t.seconds,a.seconds);return s!==0?s:mt(t.nanos,a.nanos)}function X0(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=_l(t[s],a[s]);if(l)return l}return mt(t.length,a.length)}function El(n){return Pg(n)}function Pg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ds(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ms(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ue.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Pg(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Pg(t.fields[c])}`;return s+"}"})(n.mapValue):qe(61005,{value:n})}function yf(n){switch(ps(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sd(n);return e?16+yf(e):16;case 5:return 2*n.stringValue.length;case 6:return ms(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+yf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return _s(a.fields,((l,c)=>{s+=l.length+yf(c)})),s})(n.mapValue);default:throw qe(13486,{value:n})}}function W0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lg(n){return!!n&&"integerValue"in n}function wy(n){return!!n&&"arrayValue"in n}function J0(n){return!!n&&"nullValue"in n}function Z0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vf(n){return!!n&&"mapValue"in n}function eO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[kA])==null?void 0:a.stringValue)===UA}function $u(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return _s(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=$u(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=$u(n.arrayValue.values[t]);return e}return{...n}}function tO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Z2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.value=e}static empty(){return new cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!vf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$u(t)}setAll(e){let t=Vn.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=$u(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());vf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];vf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){_s(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new cr($u(this.value))}}function jA(n){const e=[];return _s(n.fields,((t,a)=>{const s=new Vn([t]);if(vf(a)){const l=jA(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Fn(e,0,Ye.min(),Ye.min(),Ye.min(),cr.empty(),0)}static newFoundDocument(e,t,a,s){return new Fn(e,1,t,Ye.min(),a,s,0)}static newNoDocument(e,t){return new Fn(e,2,t,Ye.min(),Ye.min(),cr.empty(),0)}static newUnknownDocument(e,t){return new Fn(e,3,t,Ye.min(),Ye.min(),cr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function eb(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Ue.comparator(Ue.fromName(c.referenceValue),t.key):a=_l(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function tb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t="asc"){this.field=e,this.dir=t}}function nO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{}class mn extends zA{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new iO(e,t,a):t==="array-contains"?new oO(e,a):t==="in"?new lO(e,a):t==="not-in"?new uO(e,a):t==="array-contains-any"?new cO(e,a):new mn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new aO(e,a):new sO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(_l(t,this.value)):t!==null&&ps(this.value)===ps(t)&&this.matchesComparison(_l(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends zA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ci(e,t)}matches(e){return BA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function BA(n){return n.op==="and"}function FA(n){return rO(n)&&BA(n)}function rO(n){for(const e of n.filters)if(e instanceof ci)return!1;return!0}function kg(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+El(n.value);if(FA(n))return n.filters.map((e=>kg(e))).join(",");{const e=n.filters.map((t=>kg(t))).join(",");return`${n.op}(${e})`}}function HA(n,e){return n instanceof mn?(function(a,s){return s instanceof mn&&a.op===s.op&&a.field.isEqual(s.field)&&Li(a.value,s.value)})(n,e):n instanceof ci?(function(a,s){return s instanceof ci&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&HA(c,s.filters[d])),!0):!1})(n,e):void qe(19439)}function qA(n){return n instanceof mn?(function(t){return`${t.field.canonicalString()} ${t.op} ${El(t.value)}`})(n):n instanceof ci?(function(t){return t.op.toString()+" {"+t.getFilters().map(qA).join(" ,")+"}"})(n):"Filter"}class iO extends mn{constructor(e,t,a){super(e,t,a),this.key=Ue.fromName(a.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.matchesComparison(t)}}class aO extends mn{constructor(e,t){super(e,"in",t),this.keys=GA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sO extends mn{constructor(e,t){super(e,"not-in",t),this.keys=GA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function GA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Ue.fromName(a.referenceValue)))}class oO extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wy(t)&&oc(t.arrayValue,this.value)}}class lO extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}}class uO extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oc(this.value.arrayValue,t)}}class cO extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>oc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function nb(n,e=null,t=[],a=[],s=null,l=null,c=null){return new hO(n,e,t,a,s,l,c)}function Ry(n){const e=Xe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>kg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>El(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>El(a))).join(",")),e.Te=t}return e.Te}function Cy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!HA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tb(n.startAt,e.startAt)&&tb(n.endAt,e.endAt)}function Ug(n){return Ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function fO(n,e,t,a,s,l,c,d){return new Tc(n,e,t,a,s,l,c,d)}function Ad(n){return new Tc(n)}function rb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dO(n){return Ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function $A(n){return n.collectionGroup!==null}function Ku(n){const e=Xe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new vn(Vn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new qf(l,a))})),t.has(Vn.keyField().canonicalString())||e.Ie.push(new qf(Vn.keyField(),a))}return e.Ie}function xi(n){const e=Xe(n);return e.Ee||(e.Ee=mO(e,Ku(n))),e.Ee}function mO(n,e){if(n.limitType==="F")return nb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new qf(s.field,l)}));const t=n.endAt?new Hf(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new Hf(n.startAt.position,n.startAt.inclusive):null;return nb(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function jg(n,e){const t=n.filters.concat([e]);return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zg(n,e,t){return new Tc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wd(n,e){return Cy(xi(n),xi(e))&&n.limitType===e.limitType}function KA(n){return`${Ry(xi(n))}|lt:${n.limitType}`}function rl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>qA(s))).join(", ")}]`),bd(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>El(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>El(s))).join(",")),`Target(${a})`})(xi(n))}; limitType=${n.limitType})`}function Rd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Ue.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of Ku(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=eb(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,Ku(a),s)||a.endAt&&!(function(c,d,p){const g=eb(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,Ku(a),s))})(n,e)}function pO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YA(n){return(e,t)=>{let a=!1;for(const s of Ku(n)){const l=gO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function gO(n,e,t){const a=n.field.isKeyField()?Ue.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?_l(p,g):qe(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return qe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new Jt(Ue.comparator);function da(){return yO}const QA=new Jt(Ue.comparator);function ju(...n){let e=QA;for(const t of n)e=e.insert(t.key,t);return e}function XA(n){let e=QA;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Xs(){return Yu()}function WA(){return Yu()}function Yu(){return new co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const vO=new Jt(Ue.comparator),_O=new vn(Ue.comparator);function pt(...n){let e=_O;for(const t of n)e=e.add(t);return e}const EO=new vn(mt);function TO(){return EO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function JA(n){return{integerValue:""+n}}function bO(n,e){return K2(e)?JA(e):Iy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function SO(n,e,t){return n instanceof Gf?(function(s,l){const c={fields:{[VA]:{stringValue:MA},[LA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ay(l)&&(l=Sd(l)),l&&(c.fields[PA]=l),{mapValue:c}})(t,e):n instanceof lc?ew(n,e):n instanceof uc?tw(n,e):(function(s,l){const c=ZA(s,l),d=ib(c)+ib(s.Ae);return Lg(c)&&Lg(s.Ae)?JA(d):Iy(s.serializer,d)})(n,e)}function AO(n,e,t){return n instanceof lc?ew(n,e):n instanceof uc?tw(n,e):t}function ZA(n,e){return n instanceof $f?(function(a){return Lg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class Gf extends Cd{}class lc extends Cd{constructor(e){super(),this.elements=e}}function ew(n,e){const t=nw(e);for(const a of n.elements)t.some((s=>Li(s,a)))||t.push(a);return{arrayValue:{values:t}}}class uc extends Cd{constructor(e){super(),this.elements=e}}function tw(n,e){let t=nw(e);for(const a of n.elements)t=t.filter((s=>!Li(s,a)));return{arrayValue:{values:t}}}class $f extends Cd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ib(n){return sn(n.integerValue||n.doubleValue)}function nw(n){return wy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function wO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof lc&&s instanceof lc||a instanceof uc&&s instanceof uc?vl(a.elements,s.elements,Li):a instanceof $f&&s instanceof $f?Li(a.Ae,s.Ae):a instanceof Gf&&s instanceof Gf})(n.transform,e.transform)}class RO{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _f(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Id{}function rw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Dy(n.key,Dr.none()):new bc(n.key,n.data,Dr.none());{const t=n.data,a=cr.empty();let s=new vn(Vn.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Es(n.key,a,new Rr(s.toArray()),Dr.none())}}function CO(n,e,t){n instanceof bc?(function(s,l,c){const d=s.value.clone(),p=sb(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Es?(function(s,l,c){if(!_f(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=sb(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(iw(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Qu(n,e,t,a){return n instanceof bc?(function(l,c,d,p){if(!_f(l.precondition,c))return d;const g=l.value.clone(),v=ob(l.fieldTransforms,p,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Es?(function(l,c,d,p){if(!_f(l.precondition,c))return d;const g=ob(l.fieldTransforms,p,c),v=c.data;return v.setAll(iw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return _f(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function IO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=ZA(a.transform,s||null);l!=null&&(t===null&&(t=cr.empty()),t.set(a.field,l))}return t||null}function ab(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&vl(a,s,((l,c)=>wO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bc extends Id{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Es extends Id{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function iw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function sb(n,e,t){const a=new Map;wt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,AO(c,d,t[s]))}return a}function ob(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,SO(l,c,e))}return a}class Dy extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DO extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&CO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Qu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Qu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=WA();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=rw(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(Ye.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,((t,a)=>ab(t,a)))&&vl(this.baseMutations,e.baseMutations,((t,a)=>ab(t,a)))}}class Ny{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){wt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return vO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Ny(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,_t;function MO(n){switch(n){case le.OK:return qe(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return qe(15467,{code:n})}}function aw(n){if(n===void 0)return fa("GRPC error has no .code"),le.UNKNOWN;switch(n){case dn.OK:return le.OK;case dn.CANCELLED:return le.CANCELLED;case dn.UNKNOWN:return le.UNKNOWN;case dn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case dn.INTERNAL:return le.INTERNAL;case dn.UNAVAILABLE:return le.UNAVAILABLE;case dn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case dn.NOT_FOUND:return le.NOT_FOUND;case dn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case dn.ABORTED:return le.ABORTED;case dn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case dn.DATA_LOSS:return le.DATA_LOSS;default:return qe(39323,{code:n})}}(_t=dn||(dn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=new us([4294967295,4294967295],0);function lb(n){const e=VO().encode(n),t=new EA;return t.update(e),new Uint8Array(t.digest())}function ub(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new us([t,a],0),new us([s,l],0)]}class xy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new zu(`Invalid padding: ${t}`);if(a<0)throw new zu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new zu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new zu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=us.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(us.fromNumber(a)));return s.compare(PO)===1&&(s=new us([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lb(e),[a,s]=ub(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new xy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=lb(e),[a,s]=ub(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class zu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Dd(Ye.min(),s,new Jt(mt),da(),pt())}}class Sc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Sc(a,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class sw{constructor(e,t){this.targetId=e,this.Ce=t}}class ow{constructor(e,t,a=Pn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class cb{constructor(){this.ve=0,this.Fe=hb(),this.Me=Pn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),a=pt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:qe(38017,{changeType:l})}})),new Sc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=hb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class LO{constructor(e){this.Ge=e,this.ze=new Map,this.je=da(),this.He=of(),this.Je=of(),this.Ze=new Jt(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:qe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Ug(l))if(a===0){const c=new Ue(l.path);this.et(t,c,Fn.newNoDocument(c,Ye.min()))}else wt(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=ms(a).toUint8Array()}catch(p){if(p instanceof OA)return yl("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new xy(c,s,l)}catch(p){return yl(p instanceof zu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Ug(d.target)){const p=new Ue(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Fn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=pt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Dd(e,t,this.Ze,this.je,a);return this.je=da(),this.He=of(),this.Je=of(),this.Ze=new Jt(mt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new cb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new vn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new vn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function of(){return new Jt(Ue.comparator)}function hb(){return new Jt(Ue.comparator)}const kO={asc:"ASCENDING",desc:"DESCENDING"},UO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jO={and:"AND",or:"OR"};class zO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bg(n,e){return n.useProto3Json||bd(e)?e:{value:e}}function Kf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function BO(n,e){return Kf(n,e.toTimestamp())}function Oi(n){return wt(!!n,49232),Ye.fromTimestamp((function(t){const a=ds(t);return new Gt(a.seconds,a.nanos)})(n))}function Oy(n,e){return Fg(n,e).canonicalString()}function Fg(n,e){const t=(function(s){return new Bt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function uw(n){const e=Bt.fromString(n);return wt(mw(e),10190,{key:e.toString()}),e}function Hg(n,e){return Oy(n.databaseId,e.path)}function hg(n,e){const t=uw(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(hw(t))}function cw(n,e){return Oy(n.databaseId,e)}function FO(n){const e=uw(n);return e.length===4?Bt.emptyPath():hw(e)}function qg(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hw(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fb(n,e,t){return{name:Hg(n,e),fields:t.value.mapValue.fields}}function HO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:qe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(wt(v===void 0||typeof v=="string",58123),Pn.fromBase64String(v||"")):(wt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Pn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?le.UNKNOWN:aw(g.code);return new Se(v,g.message||"")})(c);t=new ow(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=hg(n,a.document.name),l=Oi(a.document.updateTime),c=a.document.createTime?Oi(a.document.createTime):Ye.min(),d=new cr({mapValue:{fields:a.document.fields}}),p=Fn.newFoundDocument(s,l,c,d),g=a.targetIds||[],v=a.removedTargetIds||[];t=new Ef(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=hg(n,a.document),l=a.readTime?Oi(a.readTime):Ye.min(),c=Fn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Ef([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=hg(n,a.document),l=a.removedTargetIds||[];t=new Ef([],l,s,null)}else{if(!("filter"in e))return qe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new OO(s,l),d=a.targetId;t=new sw(d,c)}}return t}function qO(n,e){let t;if(e instanceof bc)t={update:fb(n,e.key,e.value)};else if(e instanceof Dy)t={delete:Hg(n,e.key)};else if(e instanceof Es)t={update:fb(n,e.key,e.data),updateMask:ZO(e.fieldMask)};else{if(!(e instanceof DO))return qe(16599,{dt:e.type});t={verify:Hg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof Gf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof lc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof $f)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw qe(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:BO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:qe(27497)})(n,e.precondition)),t}function GO(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Oi(s.updateTime):Oi(l);return c.isEqual(Ye.min())&&(c=Oi(l)),new RO(c,s.transformResults||[])})(t,e)))):[]}function $O(n,e){return{documents:[cw(n,e.path)]}}function KO(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=cw(n,s);const l=(function(g){if(g.length!==0)return dw(ci.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(b){return{field:il(b.field),direction:XO(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Bg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function YO(n){let e=FO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){wt(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const b=fw(E);return b instanceof ci&&FA(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(U){return new qf(al(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,bd(b)?null:b})(t.limit));let p=null;t.startAt&&(p=(function(E){const b=!!E.before,C=E.values||[];return new Hf(C,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,C=E.values||[];return new Hf(C,b)})(t.endAt)),fO(e,s,c,l,d,"F",p,g)}function QO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=al(t.unaryFilter.field);return mn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=al(t.unaryFilter.field);return mn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=al(t.unaryFilter.field);return mn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=al(t.unaryFilter.field);return mn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qe(61313);default:return qe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return mn.create(al(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qe(58110);default:return qe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ci.create(t.compositeFilter.filters.map((a=>fw(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return qe(1026)}})(t.compositeFilter.op))})(n):qe(30097,{filter:n})}function XO(n){return kO[n]}function WO(n){return UO[n]}function JO(n){return jO[n]}function il(n){return{fieldPath:n.canonicalString()}}function al(n){return Vn.fromServerFormat(n.fieldPath)}function dw(n){return n instanceof mn?(function(t){if(t.op==="=="){if(Z0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NAN"}};if(J0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NAN"}};if(J0(t.value))return{unaryFilter:{field:il(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(t.field),op:WO(t.op),value:t.value}}})(n):n instanceof ci?(function(t){const a=t.getFilters().map((s=>dw(s)));return a.length===1?a[0]:{compositeFilter:{op:JO(t.op),filters:a}}})(n):qe(54877,{filter:n})}function ZO(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function mw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function pw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,a,s,l=Ye.min(),c=Ye.min(),d=Pn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.yt=e}}function tM(n){const e=YO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(){this.Sn=new rM}addToCollectionParentIndex(e,t){return this.Sn.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}deleteAllFieldIndexes(e){return he.resolve()}createTargetIndexes(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getIndexType(e,t){return he.resolve(0)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}getMinOffset(e,t){return he.resolve(fs.min())}getMinOffsetFromCollectionGroup(e,t){return he.resolve(fs.min())}updateCollectionGroup(e,t,a){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class rM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new vn(Bt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new vn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gw=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(gw,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Tl(0)}static ar(){return new Tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="LruGarbageCollector",iM=1048576;function pb([n,e],[t,a]){const s=mt(n,t);return s===0?mt(e,a):s}class aM{constructor(e){this.Pr=e,this.buffer=new vn(pb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();pb(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){we(mb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ml(t)?we(mb,"Ignoring IndexedDB error during garbage collection: ",t):await Ol(t)}await this.Ar(3e5)}))}}class oM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return he.resolve(Td.ce);const a=new aM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(db)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),db):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),nl()<=dt.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function lM(n,e){return new oM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.changes=new co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?he.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Qu(a.mutation,s,Rr.empty(),Gt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,pt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=pt()){const s=Xs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=ju();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Xs();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,pt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=da();const c=Yu(),d=(function(){return Yu()})();return t.forEach(((p,g)=>{const v=a.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof Es)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),Qu(v.mutation,g,v.mutation.getFieldMask(),Gt.now())):c.set(g.key,Rr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new cM(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=Yu();let s=new Jt(((c,d)=>c-d)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let v=a.get(p)||Rr.empty();v=d.applyToLocalView(g,v),a.set(p,v);const E=(s.get(d.batchId)||pt()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,v=p.value,E=WA();v.forEach((b=>{if(!l.has(b)){const C=rw(t.get(b),a.get(b));C!==null&&E.set(b,C),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return he.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return dO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$A(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):he.resolve(Xs());let d=ic,p=l;return c.next((g=>he.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?he.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{p=p.insert(v,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,pt()))).next((v=>({batchId:d,changes:XA(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ue(t)).next((a=>{let s=ju();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=ju();return this.indexManager.getCollectionParents(e,l).next((d=>he.forEach(d,(p=>{const g=(function(E,b){return new Tc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((v=>{v.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Fn.newInvalidDocument(v)))}));let d=ju();return c.forEach(((p,g)=>{const v=l.get(p);v!==void 0&&Qu(v.mutation,g,Rr.empty(),Gt.now()),Rd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return he.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Oi(s.createTime)}})(t)),he.resolve()}getNamedQuery(e,t){return he.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:tM(s.bundledQuery),readTime:Oi(s.readTime)}})(t)),he.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.overlays=new Jt(Ue.comparator),this.Lr=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Xs();return he.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),he.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),he.resolve()}getOverlaysForCollection(e,t,a){const s=Xs(),l=t.length+1,c=new Ue(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return he.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new Jt(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let v=l.get(g.largestBatchId);v===null&&(v=Xs(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Xs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=s)););return he.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new xO(t,a));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.sessionToken=Pn.EMPTY_BYTE_STRING}getSessionToken(e){return he.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,he.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.kr=new vn(An.Kr),this.qr=new vn(An.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new An(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new An(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Ue(new Bt([])),a=new An(t,e),s=new An(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ue(new Bt([])),a=new An(t,e),s=new An(t,e+1);let l=pt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new An(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class An{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ue.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||Ue.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new vn(An.Kr)}checkEmpty(e){return he.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new NO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new An(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return he.resolve(c)}lookupMutationBatch(e,t){return he.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return he.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(this.mutationQueue.length===0?Sy:this.Yn-1)}getAllMutationBatches(e){return he.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new An(t,0),s=new An(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),he.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new vn(mt);return t.forEach((s=>{const l=new An(s,0),c=new An(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),he.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Ue.isDocumentKey(l)||(l=l.child(""));const c=new An(new Ue(l),0);let d=new vn(mt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),he.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){wt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return he.forEach(t.mutations,(s=>{const l=new An(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new An(t,0),s=this.Jr.firstAfterOrEqual(a);return he.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,he.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.ti=e,this.docs=(function(){return new Jt(Ue.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return he.resolve(a?a.document.mutableCopy():Fn.newInvalidDocument(t))}getEntries(e,t){let a=da();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():Fn.newInvalidDocument(s))})),he.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=da();const c=t.path,d=new Ue(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||H2(F2(v),a)<=0||(s.has(v.key)||Rd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return he.resolve(l)}getAllFromCollectionGroup(e,t,a,s){qe(9500)}ni(e,t){return he.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new yM(this)}getSize(e){return he.resolve(this.size)}}class yM extends uM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),he.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.persistence=e,this.ri=new co((t=>Ry(t)),Cy),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.ii=0,this.si=new My,this.targetCount=0,this.oi=Tl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),he.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Tl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.lr(t),he.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),he.waitFor(l).next((()=>s))}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return he.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),he.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),he.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),he.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return he.resolve(a)}containsKey(e,t){return he.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t){this._i={},this.overlays={},this.ai=new Td(0),this.ui=!1,this.ui=!0,this.ci=new mM,this.referenceDelegate=e(this),this.li=new vM(this),this.indexManager=new nM,this.remoteDocumentCache=(function(s){return new gM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new eM(t),this.Pi=new fM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new pM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){we("MemoryPersistence","Starting transaction:",e);const s=new _M(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return he.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class _M extends G2{constructor(e){super(),this.currentSequenceNumber=e}}class Vy{constructor(e){this.persistence=e,this.Ri=new My,this.Ai=null}static Vi(e){return new Vy(e)}get di(){if(this.Ai)return this.Ai;throw qe(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),he.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),he.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.di,(a=>{const s=Ue.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Ye.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return he.or([()=>he.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Yf{constructor(e,t){this.persistence=e,this.fi=new co((a=>Y2(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=lM(this,t)}static Vi(e,t){return new Yf(e,t)}Ti(){}Ii(e){return he.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return he.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?he.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Ye.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),he.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),he.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),he.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),he.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yf(e.data.value)),t}wr(e,t,a){return he.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return he.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=pt(),s=pt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Py(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return hx()?8:$2(Hn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new EM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(nl()<=dt.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",rl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),he.resolve()):(nl()<=dt.DEBUG&&we("QueryEngine","Query:",rl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(nl()<=dt.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",rl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(t))):he.resolve())}gs(e,t){if(rb(t))return he.resolve(null);let a=xi(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=zg(t,null,"F"),a=xi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=pt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,zg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return rb(t)||s.isEqual(Ye.min())?he.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?he.resolve(null):(nl()<=dt.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rl(t)),this.Ds(e,c,t,B2(s,ic)).next((d=>d)))}))}bs(e,t){let a=new vn(YA(e));return t.forEach(((s,l)=>{Rd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return nl()<=dt.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",rl(t)),this.fs.getDocumentsMatchingQuery(e,t,fs.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="LocalStore",bM=3e8;class SM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Jt(mt),this.Fs=new co((l=>Ry(l)),Cy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function AM(n,e,t,a){return new SM(n,e,t,a)}async function vw(n,e){const t=Xe(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=pt();for(const g of s){c.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function wM(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,v){const E=g.batch,b=E.keys();let C=he.resolve();return b.forEach((U=>{C=C.next((()=>v.getEntry(p,U))).next((B=>{const V=g.docVersions.get(U);wt(V!==null,48541),B.version.compareTo(V)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),v.addEntry(B)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=pt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function _w(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function RM(n,e){const t=Xe(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const b=s.get(E);if(!b)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let C=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(Pn.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),s=s.insert(E,C),(function(B,V,q){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=bM?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(b,C,v)&&d.push(t.li.updateTargetData(l,C))}));let p=da(),g=pt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(CM(l,c,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual(Ye.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return he.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function CM(n,e,t){let a=pt(),s=pt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=da();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(Ye.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):we(Ly,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function IM(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Sy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function DM(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,he.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new is(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function Gg(n,e,t){const a=Xe(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ml(c))throw c;we(Ly,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function gb(n,e,t){const a=Xe(n);let s=Ye.min(),l=pt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,v){const E=Xe(p),b=E.Fs.get(v);return b!==void 0?he.resolve(E.vs.get(b)):E.li.getTargetData(g,v)})(a,c,xi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Ye.min(),t?l:pt()))).next((d=>(NM(a,pO(e),d),{documents:d,ks:l})))))}function NM(n,e,t){let a=n.Ms.get(e)||Ye.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class yb{constructor(){this.activeTargetIds=TO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xM{constructor(){this.vo=new yb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yb,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb="ConnectivityMonitor";class _b{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){we(vb,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){we(vb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf=null;function $g(){return lf===null?lf=(function(){return 268435456+Math.round(2147483648*Math.random())})():lf++,"0x"+lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg="RestConnection",MM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class VM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===Bf?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=$g(),d=this.Qo(e,t.toUriEncodedString());we(fg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),v=Dl(g);return this.zo(e,d,p,a,v).then((E=>(we(fg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw yl(fg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=MM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="WebChannelConnection",Pu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class cl extends VM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!cl.c_){const e=AA();Pu(e,SA.STAT_EVENT,(t=>{t.stat===Mg.PROXY?we(jn,"STAT_EVENT: detected buffering proxy"):t.stat===Mg.NOPROXY&&we(jn,"STAT_EVENT: detected no buffering proxy")})),cl.c_=!0}}zo(e,t,a,s,l){const c=$g();return new Promise(((d,p)=>{const g=new TA;g.setWithCredentials(!0),g.listenOnce(bA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case gf.NO_ERROR:const E=g.getResponseJson();we(jn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case gf.TIMEOUT:we(jn,`RPC '${e}' ${c} timed out`),p(new Se(le.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const b=g.getStatus();if(we(jn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const U=C==null?void 0:C.error;if(U&&U.status&&U.message){const B=(function(q){const H=q.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN})(U.status);p(new Se(B,U.message))}else p(new Se(le.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Se(le.UNAVAILABLE,"Connection failed."));break;default:qe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{we(jn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);we(jn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=$g(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");we(jn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,b=!1;const C=new PM({Ho:U=>{b?we(jn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(E||(we(jn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),we(jn,`RPC '${e}' stream ${s} sending:`,U),v.send(U))},Jo:()=>v.close()});return Pu(v,Uu.EventType.OPEN,(()=>{b||(we(jn,`RPC '${e}' stream ${s} transport opened.`),C.i_())})),Pu(v,Uu.EventType.CLOSE,(()=>{b||(b=!0,we(jn,`RPC '${e}' stream ${s} transport closed`),C.o_(),this.E_(v))})),Pu(v,Uu.EventType.ERROR,(U=>{b||(b=!0,yl(jn,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),C.o_(new Se(le.UNAVAILABLE,"The operation could not be completed")))})),Pu(v,Uu.EventType.MESSAGE,(U=>{var B;if(!b){const V=U.data[0];wt(!!V,16349);const q=V,H=(q==null?void 0:q.error)||((B=q[0])==null?void 0:B.error);if(H){we(jn,`RPC '${e}' stream ${s} received error:`,H);const F=H.status;let X=(function(S){const w=dn[S];if(w!==void 0)return aw(w)})(F),ie=H.message;X===void 0&&(X=le.INTERNAL,ie="Unknown error status: "+F+" with message "+H.message),b=!0,C.o_(new Se(X,ie)),v.close()}else we(jn,`RPC '${e}' stream ${s} received:`,V),C.__(V)}})),cl.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return wA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){return new cl(n)}function dg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){return new zO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cl.c_=!1;class Ew{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&we("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="PersistentStream";class Tw{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ew(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(fa(t.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Se(le.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Eb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(we(Eb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class kM extends Tw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=HO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Ye.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ye.min():c.readTime?Oi(c.readTime):Ye.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=qg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Ug(p)?{documents:$O(l,p)}:{query:KO(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=lw(l,c.resumeToken);const g=Bg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ye.min())>0){d.readTime=Kf(l,c.snapshotVersion.toTimestamp());const g=Bg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=QO(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=qg(this.serializer),t.removeTarget=e,this.K_(t)}}class UM extends Tw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=GO(e.writeResults,e.commitTime),a=Oi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=qg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>qO(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{}class zM extends jM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Fg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Se(le.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Fg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Se(le.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function BM(n,e,t,a){return new zM(n,e,t,a)}class FM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fa(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao="RemoteStore";class HM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{ho(this)&&(we(ao,"Restarting streams for network reachability change."),await(async function(p){const g=Xe(p);g.Ea.add(4),await Ac(g),g.Va.set("Unknown"),g.Ea.delete(4),await xd(g)})(this))}))})),this.Va=new FM(a,s)}}async function xd(n){if(ho(n))for(const e of n.Ra)await e(!0)}async function Ac(n){for(const e of n.Ra)await e(!1)}function bw(n,e){const t=Xe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zy(t)?jy(t):Vl(t).O_()&&Uy(t,e))}function ky(n,e){const t=Xe(n),a=Vl(t);t.Ia.delete(e),a.O_()&&Sw(t,e),t.Ia.size===0&&(a.O_()?a.L_():ho(t)&&t.Va.set("Unknown"))}function Uy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ye.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vl(n).Z_(e)}function Sw(n,e){n.da.$e(e),Vl(n).X_(e)}function jy(n){n.da=new LO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Vl(n).start(),n.Va.ua()}function zy(n){return ho(n)&&!Vl(n).x_()&&n.Ia.size>0}function ho(n){return Xe(n).Ea.size===0}function Aw(n){n.da=void 0}async function qM(n){n.Va.set("Online")}async function GM(n){n.Ia.forEach(((e,t)=>{Uy(n,e)}))}async function $M(n,e){Aw(n),zy(n)?(n.Va.ha(e),jy(n)):n.Va.set("Unknown")}async function KM(n,e,t){if(n.Va.set("Online"),e instanceof ow&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){we(ao,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Qf(n,a)}else if(e instanceof Ef?n.da.Xe(e):e instanceof sw?n.da.st(e):n.da.tt(e),!t.isEqual(Ye.min()))try{const a=await _w(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Pn.EMPTY_BYTE_STRING,v.snapshotVersion)),Sw(l,p);const E=new is(v.target,p,g,v.sequenceNumber);Uy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){we(ao,"Failed to raise snapshot:",a),await Qf(n,a)}}async function Qf(n,e,t){if(!Ml(e))throw e;n.Ea.add(1),await Ac(n),n.Va.set("Offline"),t||(t=()=>_w(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(ao,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await xd(n)}))}function ww(n,e){return e().catch((t=>Qf(n,t,e)))}async function Od(n){const e=Xe(n),t=gs(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sy;for(;YM(e);)try{const s=await IM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,QM(e,s)}catch(s){await Qf(e,s)}Rw(e)&&Cw(e)}function YM(n){return ho(n)&&n.Ta.length<10}function QM(n,e){n.Ta.push(e);const t=gs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Rw(n){return ho(n)&&!gs(n).x_()&&n.Ta.length>0}function Cw(n){gs(n).start()}async function XM(n){gs(n).ra()}async function WM(n){const e=gs(n);for(const t of n.Ta)e.ea(t.mutations)}async function JM(n,e,t){const a=n.Ta.shift(),s=Ny.from(a,e,t);await ww(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Od(n)}async function ZM(n,e){e&&gs(n).Y_&&await(async function(a,s){if((function(c){return MO(c)&&c!==le.ABORTED})(s.code)){const l=a.Ta.shift();gs(a).B_(),await ww(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Od(a)}})(n,e),Rw(n)&&Cw(n)}async function Tb(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),we(ao,"RemoteStore received new credentials");const a=ho(t);t.Ea.add(3),await Ac(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await xd(t)}async function eV(n,e){const t=Xe(n);e?(t.Ea.delete(2),await xd(t)):e||(t.Ea.add(2),await Ac(t),t.Va.set("Unknown"))}function Vl(n){return n.ma||(n.ma=(function(t,a,s){const l=Xe(t);return l.sa(),new kM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:qM.bind(null,n),Yo:GM.bind(null,n),t_:$M.bind(null,n),J_:KM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),zy(n)?jy(n):n.Va.set("Unknown")):(await n.ma.stop(),Aw(n))}))),n.ma}function gs(n){return n.fa||(n.fa=(function(t,a,s){const l=Xe(t);return l.sa(),new UM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:XM.bind(null,n),t_:ZM.bind(null,n),ta:WM.bind(null,n),na:JM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Od(n)):(await n.fa.stop(),n.Ta.length>0&&(we(ao,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new By(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Se(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fy(n,e){if(fa("AsyncQueue",`${e}: ${n}`),Ml(n))return new Se(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{static emptySet(e){return new hl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Ue.comparator(t.key,a.key):(t,a)=>Ue.comparator(t.key,a.key),this.keyedMap=ju(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new hl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(){this.ga=new Jt(Ue.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class bl{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new bl(e,t,hl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class nV{constructor(){this.queries=Sb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Xe(t),l=s.queries;s.queries=Sb(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Se(le.ABORTED,"Firestore shutting down"))}}function Sb(){return new co((n=>KA(n)),wd)}async function Hy(n,e){const t=Xe(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new tV,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=Fy(c,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Gy(t)}async function qy(n,e){const t=Xe(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function rV(n,e){const t=Xe(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&Gy(t)}function iV(n,e,t){const a=Xe(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function Gy(n){n.Ca.forEach((e=>{e.next()}))}var Kg,Ab;(Ab=Kg||(Kg={})).Ma="default",Ab.Cache="cache";class $y{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new bl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.key=e}}class Dw{constructor(e){this.key=e}}class aV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=YA(e),this.tu=new hl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new bb,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const b=s.get(v),C=Rd(this.query,E)?E:null,U=!!b&&this.mutatedKeys.has(b.key),B=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let V=!1;b&&C?b.data.isEqual(C.data)?U!==B&&(a.track({type:3,doc:C}),V=!0):this.su(b,C)||(a.track({type:2,doc:C}),V=!0,(p&&this.eu(C,p)>0||g&&this.eu(C,g)<0)&&(d=!0)):!b&&C?(a.track({type:0,doc:C}),V=!0):b&&!C&&(a.track({type:1,doc:b}),V=!0,(p||g)&&(d=!0)),V&&(C?(c=c.add(C),l=B?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(C,U){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe(20277,{Vt:V})}};return B(C)-B(U)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new bl(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bb,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new Dw(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Iw(a))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Ky="SyncEngine";class sV{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class oV{constructor(e){this.key=e,this.hu=!1}}class lV{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new co((d=>KA(d)),wd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Jt(Ue.comparator),this.Au=new Map,this.Vu=new My,this.du={},this.mu=new Map,this.fu=Tl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uV(n,e,t=!0){const a=Pw(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await Nw(a,e,t,!0),s}async function cV(n,e){const t=Pw(n);await Nw(t,e,!0,!1)}async function Nw(n,e,t,a){const s=await DM(n.localStore,xi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await hV(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&bw(n.remoteStore,s),d}async function hV(n,e,t,a,s){n.pu=(E,b,C)=>(async function(B,V,q,H){let F=V.view.ru(q);F.Ss&&(F=await gb(B.localStore,V.query,!1).then((({documents:S})=>V.view.ru(S,F))));const X=H&&H.targetChanges.get(V.targetId),ie=H&&H.targetMismatches.get(V.targetId)!=null,Y=V.view.applyChanges(F,B.isPrimaryClient,X,ie);return Rb(B,V.targetId,Y.au),Y.snapshot})(n,E,b,C);const l=await gb(n.localStore,e,!0),c=new aV(e,l.ks),d=c.ru(l.documents),p=Sc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);Rb(n,t,g.au);const v=new sV(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function fV(n,e,t){const a=Xe(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!wd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await Gg(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&ky(a.remoteStore,s.targetId),Yg(a,s.targetId)})).catch(Ol)):(Yg(a,s.targetId),await Gg(a.localStore,s.targetId,!0))}async function dV(n,e){const t=Xe(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),ky(t.remoteStore,a.targetId))}async function mV(n,e,t){const a=TV(n);try{const s=await(function(c,d){const p=Xe(c),g=Gt.now(),v=d.reduce(((C,U)=>C.add(U.key)),pt());let E,b;return p.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let U=da(),B=pt();return p.xs.getEntries(C,v).next((V=>{U=V,U.forEach(((q,H)=>{H.isValidDocument()||(B=B.add(q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(C,U))).next((V=>{E=V;const q=[];for(const H of d){const F=IO(H,E.get(H.key).overlayedDocument);F!=null&&q.push(new Es(H.key,F,jA(F.value.mapValue),Dr.exists(!0)))}return p.mutationQueue.addMutationBatch(C,g,q,d)})).next((V=>{b=V;const q=V.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(C,V.batchId,q)}))})).then((()=>({batchId:b.batchId,changes:XA(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new Jt(mt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await wc(a,s.changes),await Od(a.remoteStore)}catch(s){const l=Fy(s,"Failed to persist write");t.reject(l)}}async function xw(n,e){const t=Xe(n);try{const a=await RM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(wt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?wt(c.hu,14607):s.removedDocuments.size>0&&(wt(c.hu,42227),c.hu=!1))})),await wc(t,a,e)}catch(a){await Ol(a)}}function wb(n,e,t){const a=Xe(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Xe(c);p.onlineState=d;let g=!1;p.queries.forEach(((v,E)=>{for(const b of E.ba)b.va(d)&&(g=!0)})),g&&Gy(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function pV(n,e,t){const a=Xe(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new Jt(Ue.comparator);c=c.insert(l,Fn.newNoDocument(l,Ye.min()));const d=pt().add(l),p=new Dd(Ye.min(),new Map,new Jt(mt),c,d);await xw(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),Yy(a)}else await Gg(a.localStore,e,!1).then((()=>Yg(a,e,t))).catch(Ol)}async function gV(n,e){const t=Xe(n),a=e.batch.batchId;try{const s=await wM(t.localStore,e);Mw(t,a,null),Ow(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await wc(t,s)}catch(s){await Ol(s)}}async function yV(n,e,t){const a=Xe(n);try{const s=await(function(c,d){const p=Xe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(wt(E!==null,37113),v=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);Mw(a,e,t),Ow(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await wc(a,s)}catch(s){await Ol(s)}}function Ow(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Mw(n,e,t){const a=Xe(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function Yg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||Vw(n,a)}))}function Vw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(ky(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Yy(n))}function Rb(n,e,t){for(const a of t)a instanceof Iw?(n.Vu.addReference(a.key,e),vV(n,a)):a instanceof Dw?(we(Ky,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||Vw(n,a.key)):qe(19791,{wu:a})}function vV(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(we(Ky,"New document in limbo: "+t),n.Eu.add(a),Yy(n))}function Yy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ue(Bt.fromString(e)),a=n.fu.next();n.Au.set(a,new oV(t)),n.Ru=n.Ru.insert(t,a),bw(n.remoteStore,new is(xi(Ad(t.path)),a,"TargetPurposeLimboResolution",Td.ce))}}async function wc(n,e,t){const a=Xe(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var v;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Py.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const v=Xe(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>he.forEach(g,(b=>he.forEach(b.Ts,(C=>v.persistence.referenceDelegate.addReference(E,b.targetId,C))).next((()=>he.forEach(b.Is,(C=>v.persistence.referenceDelegate.removeReference(E,b.targetId,C)))))))))}catch(E){if(!Ml(E))throw E;we(Ly,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const C=v.vs.get(b),U=C.snapshotVersion,B=C.withLastLimboFreeSnapshotVersion(U);v.vs=v.vs.insert(b,B)}}})(a.localStore,l))}async function _V(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){we(Ky,"User change. New user:",e.toKey());const a=await vw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Se(le.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await wc(t,a.Ns)}}function EV(n,e){const t=Xe(n),a=t.Au.get(e);if(a&&a.hu)return pt().add(a.key);{let s=pt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function Pw(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pV.bind(null,e),e.Pu.J_=rV.bind(null,e.eventManager),e.Pu.yu=iV.bind(null,e.eventManager),e}function TV(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yV.bind(null,e),e}class Xf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AM(this.persistence,new TM,e.initialUser,this.serializer)}Cu(e){return new yw(Vy.Vi,this.serializer)}Du(e){return new xM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xf.provider={build:()=>new Xf};class bV extends Xf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof Yf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new sM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new yw((a=>Yf.Vi(a,t)),this.serializer)}}class Qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>wb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=_V.bind(null,this.syncEngine),await eV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nV})()}createDatastore(e){const t=Nd(e.databaseInfo.databaseId),a=LM(e.databaseInfo);return BM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new HM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>wb(this.syncEngine,t,0)),(function(){return _b.v()?new _b:new OM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,v){const E=new lV(s,l,c,d,p,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Xe(s);we(ao,"RemoteStore shutting down."),l.Ea.add(5),await Ac(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Qg.provider={build:()=>new Qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class SV{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=Bn.UNAUTHENTICATED,this.clientId=by.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{we(ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(we(ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Fy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function mg(n,e){n.asyncQueue.verifyOperationInProgress(),we(ys,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await vw(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Cb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await AV(n);we(ys,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>Tb(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>Tb(e.remoteStore,s))),n._onlineComponents=e}async function AV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(ys,"Using user provided OfflineComponentProvider");try{await mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===le.FAILED_PRECONDITION||s.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;yl("Error using user provided cache. Falling back to memory cache: "+t),await mg(n,new Xf)}}else we(ys,"Using default OfflineComponentProvider"),await mg(n,new bV(void 0));return n._offlineComponents}async function Lw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(ys,"Using user provided OnlineComponentProvider"),await Cb(n,n._uninitializedComponentsProvider._online)):(we(ys,"Using default OnlineComponentProvider"),await Cb(n,new Qg))),n._onlineComponents}function wV(n){return Lw(n).then((e=>e.syncEngine))}async function Wf(n){const e=await Lw(n),t=e.eventManager;return t.onListen=uV.bind(null,e.syncEngine),t.onUnlisten=fV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dV.bind(null,e.syncEngine),t}function RV(n,e,t,a){const s=new Qy(a),l=new $y(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>Hy(await Wf(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>qy(await Wf(n),l)))}}function CV(n,e,t={}){const a=new ua;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Qy({next:b=>{v.Nu(),c.enqueueAndForget((()=>qy(l,E)));const C=b.docs.has(d);!C&&b.fromCache?g.reject(new Se(le.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&b.fromCache&&p&&p.source==="server"?g.reject(new Se(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new $y(Ad(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Hy(l,E)})(await Wf(n),n.asyncQueue,e,t,a))),a.promise}function IV(n,e,t={}){const a=new ua;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const v=new Qy({next:b=>{v.Nu(),c.enqueueAndForget((()=>qy(l,E))),b.fromCache&&p.source==="server"?g.reject(new Se(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new $y(d,v,{includeMetadataChanges:!0,Ka:!0});return Hy(l,E)})(await Wf(n),n.asyncQueue,e,t,a))),a.promise}function DV(n,e){const t=new ua;return n.asyncQueue.enqueueAndForget((async()=>mV(await wV(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="ComponentProvider",Ib=new Map;function xV(n,e,t,a,s){return new W2(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,kw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firestore.googleapis.com",Db=!0;class Nb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Se(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uw,this.ssl=Db}else this.host=e.host,this.ssl=e.ssl??Db;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iM)throw new Se(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Se(le.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Se(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Se(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new N2;switch(a.type){case"firstParty":return new V2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Se(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Ib.get(t);a&&(we(NV,"Removing Datastore"),Ib.delete(t),a.terminate())})(this),Promise.resolve()}}function OV(n,e,t,a={}){var g;n=Ir(n,Md);const s=Dl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(fA(`https://${d}`),dA("Firestore",!0)),l.host!==Uw&&l.host!==d&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!no(p,c)&&(n._setSettings(p),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=Bn.MOCK_USER;else{v=nx(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new Se(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Bn(b)}n._authCredentials=new x2(new CA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new fo(this.firestore,e,this._query)}}class tn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}toJSON(){return{type:tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Ec(t,tn._jsonSchema))return new tn(e,a||null,new Ue(Bt.fromString(t.referencePath)))}}tn._jsonSchemaVersion="firestore/documentReference/1.0",tn._jsonSchema={type:pn("string",tn._jsonSchemaVersion),referencePath:pn("string")};class cs extends fo{constructor(e,t,a){super(e,t,Ad(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new Ue(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Rc(n,e,...t){if(n=_n(n),IA("collection","path",e),n instanceof Md){const a=Bt.fromString(e,...t);return H0(a),new cs(n,null,a)}{if(!(n instanceof tn||n instanceof cs))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Bt.fromString(e,...t));return H0(a),new cs(n.firestore,null,a)}}function Yr(n,e,...t){if(n=_n(n),arguments.length===1&&(e=by.newId()),IA("doc","path",e),n instanceof Md){const a=Bt.fromString(e,...t);return F0(a),new tn(n,null,new Ue(a))}{if(!(n instanceof tn||n instanceof cs))throw new Se(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Bt.fromString(e,...t));return F0(a),new tn(n.firestore,n instanceof cs?n.converter:null,new Ue(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="AsyncQueue";class Ob{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ew(this,"async_queue_retry"),this._c=()=>{const a=dg();a&&we(xb,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=dg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ua;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ml(e))throw e;we(xb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,fa("INTERNAL UNHANDLED ERROR: ",Mb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=By.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&qe(47125,{Pc:Mb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Mb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vs extends Md{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new Ob,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ob(e),this._firestoreClient=void 0,await e}}}function MV(n,e){const t=typeof n=="object"?n:yA(),a=typeof n=="string"?n:Bf,s=Ey(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=ex("firestore");l&&OV(s,...l)}return s}function Cc(n){if(n._terminated)throw new Se(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VV(n),n._firestoreClient}function VV(n){var a,s,l,c;const e=n._freezeSettings(),t=xV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new SV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(Pn.fromBase64String(e))}catch(t){throw new Se(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $r(Pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:pn("string",$r._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Se(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mi._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,Mi._jsonSchema))return new Mi(e.latitude,e.longitude)}}Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:pn("string",Mi._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new li(e.vectorValues);throw new Se(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:pn("string",li._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=/^__.*__$/;class LV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Es(e,this.data,this.fieldMask,t,this.fieldTransforms):new bc(e,this.data,t,this.fieldTransforms)}}class jw{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Es(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe(40011,{dataSource:n})}}class Wy{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Wy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Jf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(zw(this.dataSource)&&PV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class kV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Nd(e)}createContext(e,t,a,s=!1){return new Wy({dataSource:e,methodName:t,targetDoc:a,path:Vn.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pd(n){const e=n._freezeSettings(),t=Nd(n._databaseId);return new kV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bw(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);Jy("Data must be an object, but it was:",c,a);const d=qw(a,c);let p,g;if(l.merge)p=new Rr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const b=Sl(e,E,t);if(!c.contains(b))throw new Se(le.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Kw(v,b)||v.push(b)}p=new Rr(v),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new LV(new cr(d),p,g)}class Ld extends Xy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}function Fw(n,e,t,a){const s=n.createContext(1,e,t);Jy("Data must be an object, but it was:",s,a);const l=[],c=cr.empty();_s(a,((p,g)=>{const v=$w(e,p,t);g=_n(g);const E=s.childContextForFieldPath(v);if(g instanceof Ld)l.push(v);else{const b=Ic(g,E);b!=null&&(l.push(v),c.set(v,b))}}));const d=new Rr(l);return new jw(c,d,s.fieldTransforms)}function Hw(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Sl(e,a,t)],p=[s];if(l.length%2!=0)throw new Se(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Sl(e,l[b])),p.push(l[b+1]);const g=[],v=cr.empty();for(let b=d.length-1;b>=0;--b)if(!Kw(g,d[b])){const C=d[b];let U=p[b];U=_n(U);const B=c.childContextForFieldPath(C);if(U instanceof Ld)g.push(C);else{const V=Ic(U,B);V!=null&&(g.push(C),v.set(C,V))}}const E=new Rr(g);return new jw(v,E,c.fieldTransforms)}function UV(n,e,t,a=!1){return Ic(t,n.createContext(a?4:3,e))}function Ic(n,e){if(Gw(n=_n(n)))return Jy("Unsupported field value:",e,n),qw(n,e);if(n instanceof Xy)return(function(a,s){if(!zw(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=Ic(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=_n(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return bO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Gt.fromDate(a);return{timestampValue:Kf(s.serializer,l)}}if(a instanceof Gt){const l=new Gt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Kf(s.serializer,l)}}if(a instanceof Mi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof $r)return{bytesValue:lw(s.serializer,a._byteString)};if(a instanceof tn){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Oy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof li)return(function(c,d){const p=c instanceof li?c.toArray():c;return{mapValue:{fields:{[kA]:{stringValue:UA},[Ff]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Iy(d.serializer,v)}))}}}}}})(a,s);if(pw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Ed(a)}`)})(n,e)}function qw(n,e){const t={};return xA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(n,((a,s)=>{const l=Ic(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function Gw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof Mi||n instanceof $r||n instanceof tn||n instanceof Xy||n instanceof li||pw(n))}function Jy(n,e,t){if(!Gw(t)||!DA(t)){const a=Ed(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Sl(n,e,t){if((e=_n(e))instanceof Vd)return e._internalPath;if(typeof e=="string")return $w(n,e);throw Jf("Field path arguments must be of type string or ",n,!1,void 0,t)}const jV=new RegExp("[~\\*/\\[\\]]");function $w(n,e,t){if(e.search(jV)>=0)throw Jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Vd(...e.split("."))._internalPath}catch{throw Jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jf(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Se(le.INVALID_ARGUMENT,d+n+p)}function Kw(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{convertValue(e,t="none"){switch(ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return _s(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[Ff].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>sn(c.doubleValue)));return new li(t)}convertGeoPoint(e){return new Mi(sn(e.latitude),sn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Sd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(ac(e));default:return null}}convertTimestamp(e){const t=ds(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Bt.fromString(e);wt(mw(a),9688,{name:e});const s=new sc(a.get(1),a.get(3)),l=new Ue(a.popFirst(5));return s.isEqual(t)||fa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy extends zV{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,t)}}const Vb="@firebase/firestore",Pb="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Sl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class BV extends Yw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Se(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ev{}class FV extends ev{}function Dc(n,e,...t){let a=[];e instanceof ev&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof nv)).length,d=l.filter((p=>p instanceof kd)).length;if(c>1||c>0&&d>0)throw new Se(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class kd extends FV{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new kd(e,t,a)}_apply(e){const t=this._parse(e);return Xw(e._query,t),new fo(e.firestore,e.converter,jg(e._query,t))}_parse(e){const t=Pd(e.firestore);return(function(l,c,d,p,g,v,E){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Se(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Ub(E,v);const U=[];for(const B of E)U.push(kb(p,l,B));b={arrayValue:{values:U}}}else b=kb(p,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Ub(E,v),b=UV(d,c,E,v==="in"||v==="not-in");return mn.create(g,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function tv(n,e,t){const a=e,s=Sl("where",n);return kd._create(s,a,t)}class nv extends ev{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nv(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)Xw(c,p),c=jg(c,p)})(e._query,t),new fo(e.firestore,e.converter,jg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function kb(n,e,t){if(typeof(t=_n(t))=="string"){if(t==="")throw new Se(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$A(e)&&t.indexOf("/")!==-1)throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Bt.fromString(t));if(!Ue.isDocumentKey(a))throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return W0(n,new Ue(a))}if(t instanceof tn)return W0(n,t._key);throw new Se(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function Ub(n,e){if(!Array.isArray(n)||n.length===0)throw new Se(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Xw(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Se(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Se(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Ww(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class Bu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Js extends Yw{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Sl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Js._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Js._jsonSchemaVersion="firestore/documentSnapshot/1.0",Js._jsonSchema={type:pn("string",Js._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class Tf extends Js{data(e={}){return super.data(e)}}class Zs{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Bu(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Tf(this._firestore,this._userDataWriter,a.key,a,new Bu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new Tf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Bu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Tf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new Bu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:HV(d.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Se(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=by.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs._jsonSchemaVersion="firestore/querySnapshot/1.0",Zs._jsonSchema={type:pn("string",Zs._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pd(e)}set(e,t,a){this._verifyNotCommitted();const s=pg(e,this._firestore),l=Ww(s.converter,t,a),c=Bw(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Dr.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=pg(e,this._firestore);let c;return c=typeof(t=_n(t))=="string"||t instanceof Vd?Hw(this._dataReader,"WriteBatch.update",l._key,t,a,s):Fw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pg(e,this._firestore);return this._mutations=this._mutations.concat(new Dy(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pg(n,e){if((n=_n(n)).firestore!==e)throw new Se(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(n){n=Ir(n,tn);const e=Ir(n.firestore,vs),t=Cc(e);return CV(t,n._key).then((a=>Jw(e,n,a)))}function xc(n){n=Ir(n,fo);const e=Ir(n.firestore,vs),t=Cc(e),a=new Zy(e);return Qw(n._query),IV(t,n._query).then((s=>new Zs(e,a,n,s)))}function GV(n,e,t){n=Ir(n,tn);const a=Ir(n.firestore,vs),s=Ww(n.converter,e,t),l=Pd(a);return rv(a,[Bw(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Dr.none())])}function Ud(n,e,t,...a){n=Ir(n,tn);const s=Ir(n.firestore,vs),l=Pd(s);let c;return c=typeof(e=_n(e))=="string"||e instanceof Vd?Hw(l,"updateDoc",n._key,e,t,a):Fw(l,"updateDoc",n._key,e),rv(s,[c.toMutation(n._key,Dr.exists(!0))])}function $V(n,...e){var g,v,E;n=_n(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Lb(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Lb(e[a])){const b=e[a];e[a]=(g=b.next)==null?void 0:g.bind(b),e[a+1]=(v=b.error)==null?void 0:v.bind(b),e[a+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,d;if(n instanceof tn)c=Ir(n.firestore,vs),d=Ad(n._key.path),l={next:b=>{e[a]&&e[a](Jw(c,n,b))},error:e[a+1],complete:e[a+2]};else{const b=Ir(n,fo);c=Ir(b.firestore,vs),d=b._query;const C=new Zy(c);l={next:U=>{e[a]&&e[a](new Zs(c,C,b,U))},error:e[a+1],complete:e[a+2]},Qw(n._query)}const p=Cc(c);return RV(p,d,s,l)}function rv(n,e){const t=Cc(n);return DV(t,e)}function Jw(n,e,t){const a=t.docs.get(e._key),s=new Zy(n);return new Js(n,s,e._key,a,new Bu(t.hasPendingWrites,t.fromCache),e.converter)}function Zw(n){return n=Ir(n,vs),Cc(n),new qV(n,(e=>rv(n,e)))}(function(e,t=!0){D2(Nl),gl(new ro("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new vs(new O2(a.getProvider("auth-internal")),new P2(c,a.getProvider("app-check-internal")),J2(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),ls(Vb,Pb,e),ls(Vb,Pb,"esm2020")})();var KV="firebase",YV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(KV,YV,"app");function eR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QV=eR,tR=new vc("auth","Firebase",eR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=new vy("@firebase/auth");function XV(n,...e){Zf.logLevel<=dt.WARN&&Zf.warn(`Auth (${Nl}): ${n}`,...e)}function bf(n,...e){Zf.logLevel<=dt.ERROR&&Zf.error(`Auth (${Nl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,...e){throw av(n,...e)}function ui(n,...e){return av(n,...e)}function iv(n,e,t){const a={...QV(),[e]:t};return new vc("auth","Firebase",a).create(e,{appName:n.name})}function eo(n){return iv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&ki(n,"argument-error"),iv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function av(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return tR.create(n,...e)}function Ge(n,e,...t){if(!n)throw av(e,...t)}function oa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw bf(e),new Error(e)}function ma(n,e){n||oa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function JV(){return jb()==="http:"||jb()==="https:"}function jb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JV()||lx()||"connection"in navigator)?navigator.onLine:!0}function eP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ma(t>e,"Short delay should be less than long delay!"),this.isMobile=ax()||ux()}get(){return ZV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){ma(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rP=new Oc(3e4,6e4);function ov(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Pl(n,e,t,a,s={}){return rR(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=_c({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return ox()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Dl(n.emulatorConfig.host)&&(g.credentials="include"),nR.fetch()(await iR(n,n.config.apiHost,t,d),g)})}async function rR(n,e,t){n._canInitEmulator=!1;const a={...tP,...e};try{const s=new aP(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw uf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw uf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw uf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw uf(n,"user-disabled",c);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw iv(n,v,g);ki(n,v)}}catch(s){if(s instanceof ya)throw s;ki(n,"network-request-failed",{message:String(s)})}}async function iP(n,e,t,a,s={}){const l=await Pl(n,e,t,a,s);return"mfaPendingCredential"in l&&ki(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function iR(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?sv(n.config,s):`${n.config.apiScheme}://${s}`;return nP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class aP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(ui(this.auth,"network-request-failed")),rP.get())})}}function uf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=ui(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(n,e){return Pl(n,"POST","/v1/accounts:delete",e)}async function ed(n,e){return Pl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oP(n,e=!1){const t=_n(n),a=await t.getIdToken(e),s=lv(a);Ge(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:Xu(gg(s.auth_time)),issuedAtTime:Xu(gg(s.iat)),expirationTime:Xu(gg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function gg(n){return Number(n)*1e3}function lv(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const s=lA(t);return s?JSON.parse(s):(bf("Failed to decode base64 JWT payload"),null)}catch(s){return bf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zb(n){const e=lv(n);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ya&&lP(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function lP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(n){var E;const e=n.auth,t=await n.getIdToken(),a=await cc(n,ed(e,{idToken:t}));Ge(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?aR(s.providerUserInfo):[],c=hP(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function cP(n){const e=_n(n);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hP(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function aR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(n,e){const t=await rR(n,{},async()=>{const a=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await iR(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&Dl(n.emulatorConfig.host)&&(p.credentials="include"),nR.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dP(n,e){return Pl(n,"POST","/v2/accounts:revokeToken",ov(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const t=zb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await fP(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new fl;return a&&(Ge(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&(Ge(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(Ge(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fl,this.toJSON())}_performRefresh(){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n,e){Ge(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new uP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await cc(this,this.stsTokenManager.getToken(this.auth,e));return Ge(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oP(this,e)}reload(){return cP(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await td(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(eo(this.auth));const e=await this.getIdToken();return await cc(this,sP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:C,providerData:U,stsTokenManager:B}=t;Ge(E&&B,e,"internal-error");const V=fl.fromJSON(this.name,B);Ge(typeof E=="string",e,"internal-error"),Wa(a,e.name),Wa(s,e.name),Ge(typeof b=="boolean",e,"internal-error"),Ge(typeof C=="boolean",e,"internal-error"),Wa(l,e.name),Wa(c,e.name),Wa(d,e.name),Wa(p,e.name),Wa(g,e.name),Wa(v,e.name);const q=new oi({uid:E,auth:e,email:s,emailVerified:b,displayName:a,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:v});return U&&Array.isArray(U)&&(q.providerData=U.map(H=>({...H}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,t,a=!1){const s=new fl;s.updateFromServerResponse(t);const l=new oi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await td(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];Ge(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?aR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new fl;d.updateFromIdToken(a);const p=new oi({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Wg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Map;function la(n){ma(n instanceof Function,"Expected a class definition");let e=Bb.get(n);return e?(ma(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Bb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}sR.type="NONE";const Fb=sR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n,e,t){return`firebase:${n}:${e}:${t}`}class dl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Sf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Sf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await ed(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new dl(la(Fb),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||la(Fb);const c=Sf(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const b=await ed(e,{idToken:v}).catch(()=>{});if(!b)break;E=await oi._fromGetAccountInfoResponse(e,b,v)}else E=oi._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new dl(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new dl(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fR(e))return"Blackberry";if(dR(e))return"Webos";if(lR(e))return"Safari";if((e.includes("chrome/")||uR(e))&&!e.includes("edge/"))return"Chrome";if(hR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function oR(n=Hn()){return/firefox\//i.test(n)}function lR(n=Hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uR(n=Hn()){return/crios\//i.test(n)}function cR(n=Hn()){return/iemobile/i.test(n)}function hR(n=Hn()){return/android/i.test(n)}function fR(n=Hn()){return/blackberry/i.test(n)}function dR(n=Hn()){return/webos/i.test(n)}function uv(n=Hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mP(n=Hn()){var e;return uv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function pP(){return cx()&&document.documentMode===10}function mR(n=Hn()){return uv(n)||hR(n)||dR(n)||fR(n)||/windows phone/i.test(n)||cR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(n,e=[]){let t;switch(n){case"Browser":t=Hb(Hn());break;case"Worker":t=`${Hb(Hn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yP(n,e={}){return Pl(n,"GET","/v2/passwordPolicy",ov(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=6;class _P{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??vP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qb(this),this.idTokenSubscription=new qb(this),this.beforeStateQueue=new gP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=la(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await dl.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await ed(this,{idToken:e}),a=await oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(eo(this));const t=e?_n(e):null;return t&&Ge(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yP(this),t=new _P(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await dP(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&la(e)||this._popupRedirectResolver;Ge(t,this,"argument-error"),this.redirectPersistenceManager=await dl.create(this,[la(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&XV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jd(n){return _n(n)}class qb{constructor(e){this.auth=e,this.observer=null,this.addObserver=vx(t=>this.observer=t)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TP(n){cv=n}function bP(n){return cv.loadJS(n)}function SP(){return cv.gapiScript}function AP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(n,e){const t=Ey(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(no(l,e??{}))return s;ki(s,"already-initialized")}return t.initialize({options:e})}function RP(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(la);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function CP(n,e,t){const a=jd(n);Ge(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=gR(e),{host:c,port:d}=IP(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){Ge(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ge(no(g,a.config.emulator)&&no(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Dl(c)?(fA(`${l}//${c}${p}`),dA("Auth",!0)):DP()}function gR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IP(n){const e=gR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:Gb(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:Gb(c)}}}function Gb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,t){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(n,e){return iP(n,"POST","/v1/accounts:signInWithIdp",ov(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="http://localhost";class so extends yR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new so(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ml(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,ml(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ml(e,t)}buildRequest(){const e={requestUri:NP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=_c(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc extends hv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Mc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return so._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return sa.credential(t,a)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Mc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Mc{constructor(){super("twitter.com")}static credential(e,t){return so._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ns.credential(t,a)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await oi._fromIdTokenResponse(e,a,s),c=$b(a);return new Al({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=$b(a);return new Al({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function $b(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends ya{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,nd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new nd(e,t,a,s)}}function vR(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?nd._fromErrorAndOperation(n,l,e,a):l})}async function xP(n,e,t=!1){const a=await cc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Al._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(n,e,t=!1){const{auth:a}=n;if(ai(a.app))return Promise.reject(eo(a));const s="reauthenticate";try{const l=await cc(n,vR(a,s,e,n),t);Ge(l.idToken,a,"internal-error");const c=lv(l.idToken);Ge(c,a,"internal-error");const{sub:d}=c;return Ge(n.uid===d,a,"user-mismatch"),Al._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&ki(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MP(n,e,t=!1){if(ai(n.app))return Promise.reject(eo(n));const a="signIn",s=await vR(n,a,e),l=await Al._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function VP(n,e,t,a){return _n(n).onIdTokenChanged(e,t,a)}function PP(n,e,t){return _n(n).beforeAuthStateChanged(e,t)}function LP(n,e,t,a){return _n(n).onAuthStateChanged(e,t,a)}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=1e3,UP=10;class ER extends _R{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);pP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UP):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},kP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ER.type="LOCAL";const jP=ER;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR extends _R{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TR.type="SESSION";const bR=TR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new zd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await zP(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=fv("",20);s.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function FP(n){Vi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function HP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function GP(){return SR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebaseLocalStorageDb",$P=1,id="firebaseLocalStorage",wR="fbase_key";class Vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bd(n,e){return n.transaction([id],e?"readwrite":"readonly").objectStore(id)}function KP(){const n=indexedDB.deleteDatabase(AR);return new Vc(n).toPromise()}function Jg(){const n=indexedDB.open(AR,$P);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(id,{keyPath:wR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(id)?e(a):(a.close(),await KP(),e(await Jg()))})})}async function Kb(n,e,t){const a=Bd(n,!0).put({[wR]:e,value:t});return new Vc(a).toPromise()}async function YP(n,e){const t=Bd(n,!1).get(e),a=await new Vc(t).toPromise();return a===void 0?null:a.value}function Yb(n,e){const t=Bd(n,!0).delete(e);return new Vc(t).toPromise()}const QP=800,XP=3;class RR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>XP)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(GP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await HP(),!this.activeServiceWorker)return;this.sender=new BP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jg();return await Kb(e,rd,"1"),await Yb(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Kb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>YP(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Yb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Bd(s,!1).getAll();return new Vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RR.type="LOCAL";const WP=RR;new Oc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n,e){return e?la(e):(Ge(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends yR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ml(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ml(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ml(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JP(n){return MP(n.auth,new dv(n),n.bypassAuthState)}function ZP(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),OP(t,new dv(n),n.bypassAuthState)}async function e4(n){const{auth:e,user:t}=n;return Ge(t,e,"internal-error"),xP(t,new dv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JP;case"linkViaPopup":case"linkViaRedirect":return e4;case"reauthViaPopup":case"reauthViaRedirect":return ZP;default:ki(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new Oc(2e3,1e4);async function n4(n,e,t){if(ai(n.app))return Promise.reject(ui(n,"operation-not-supported-in-this-environment"));const a=jd(n);WV(n,e,hv);const s=CR(a,t);return new Ws(a,"signInViaPopup",e,s).executeNotNull()}class Ws extends IR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,t4.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="pendingRedirect",Af=new Map;class i4 extends IR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Af.get(this.auth._key());if(!e){try{const a=await a4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Af.set(this.auth._key(),e)}return this.bypassAuthState||Af.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function a4(n,e){const t=l4(e),a=o4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function s4(n,e){Af.set(n._key(),e)}function o4(n){return la(n._redirectPersistence)}function l4(n){return Sf(r4,n.config.apiKey,n.name)}async function u4(n,e,t=!1){if(ai(n.app))return Promise.reject(eo(n));const a=jd(n),s=CR(a,e),c=await new i4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=600*1e3;class h4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!DR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=c4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qb(e))}saveEventToCache(e){this.cachedEventUids.add(Qb(e)),this.lastProcessedEventTime=Date.now()}}function Qb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d4(n,e={}){return Pl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,p4=/^https?/;async function g4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await d4(n);for(const t of e)try{if(y4(t))return}catch{}ki(n,"unauthorized-domain")}function y4(n){const e=Xg(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!p4.test(t))return!1;if(m4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new Oc(3e4,6e4);function Xb(){const n=Vi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function _4(n){return new Promise((e,t)=>{var s,l,c;function a(){Xb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xb(),t(ui(n,"network-request-failed"))},timeout:v4.get()})}if((l=(s=Vi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Vi().gapi)!=null&&c.load)a();else{const d=AP("iframefcb");return Vi()[d]=()=>{gapi.load?a():t(ui(n,"network-request-failed"))},bP(`${SP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw wf=null,e})}let wf=null;function E4(n){return wf=wf||_4(n),wf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=new Oc(5e3,15e3),b4="__/auth/iframe",S4="emulator/auth/iframe",A4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R4(n){const e=n.config;Ge(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?sv(e,S4):`https://${n.config.authDomain}/${b4}`,a={apiKey:e.apiKey,appName:n.name,v:Nl},s=w4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${_c(a).slice(1)}`}async function C4(n){const e=await E4(n),t=Vi().gapi;return Ge(t,n,"internal-error"),e.open({where:document.body,url:R4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:A4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=ui(n,"network-request-failed"),d=Vi().setTimeout(()=>{l(c)},T4.get());function p(){Vi().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},D4=500,N4=600,x4="_blank",O4="http://localhost";class Wb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function M4(n,e,t,a=D4,s=N4){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...I4,width:a.toString(),height:s.toString(),top:l,left:c},g=Hn().toLowerCase();t&&(d=uR(g)?x4:t),oR(g)&&(e=e||O4,p.scrollbars="yes");const v=Object.entries(p).reduce((b,[C,U])=>`${b}${C}=${U},`,"");if(mP(g)&&d!=="_self")return V4(e||"",d),new Wb(null);const E=window.open(e||"",d,v);Ge(E,n,"popup-blocked");try{E.focus()}catch{}return new Wb(E)}function V4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P4="__/auth/handler",L4="emulator/auth/handler",k4=encodeURIComponent("fac");async function Jb(n,e,t,a,s,l){Ge(n.config.authDomain,n,"auth-domain-config-required"),Ge(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Nl,eventId:s};if(e instanceof hv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",yx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof Mc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const p=await n._getAppCheckToken(),g=p?`#${k4}=${encodeURIComponent(p)}`:"";return`${U4(n)}?${_c(d).slice(1)}${g}`}function U4({config:n}){return n.emulator?sv(n,L4):`https://${n.authDomain}/${P4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="webStorageSupport";class j4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bR,this._completeRedirectFn=u4,this._overrideRedirectResult=s4}async _openPopup(e,t,a,s){var c;ma((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await Jb(e,t,a,Xg(),s);return M4(e,l,fv())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await Jb(e,t,a,Xg(),s);return FP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ma(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await C4(e),a=new h4(e);return t.register("authEvent",s=>(Ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yg,{type:yg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[yg];l!==void 0&&t(!!l),ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=g4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mR()||lR()||uv()}}const z4=j4;var Zb="@firebase/auth",eS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H4(n){gl(new ro("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;Ge(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pR(n)},g=new EP(a,s,l,p);return RP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),gl(new ro("auth-internal",e=>{const t=jd(e.getProvider("auth").getImmediate());return(a=>new B4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(Zb,eS,F4(n)),ls(Zb,eS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4=300,G4=hA("authIdTokenMaxAge")||q4;let tS=null;const $4=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>G4)return;const s=t==null?void 0:t.token;tS!==s&&(tS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K4(n=yA()){const e=Ey(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wP(n,{popupRedirectResolver:z4,persistence:[WP,jP,bR]}),a=hA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=$4(l.toString());PP(t,c,()=>c(t.currentUser)),VP(t,d=>c(d))}}const s=uA("auth");return s&&CP(t,`http://${s}`),t}function Y4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}TP({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=ui("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",Y4().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H4("Browser");const Q4={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function el(n){const e=Q4[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const X4={apiKey:el("VITE_FIREBASE_API_KEY"),authDomain:el("VITE_FIREBASE_AUTH_DOMAIN"),projectId:el("VITE_FIREBASE_PROJECT_ID"),storageBucket:el("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:el("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:el("VITE_FIREBASE_APP_ID")},NR=gA(X4),wl=K4(NR),W4=new sa,En=MV(NR),xR=P.createContext(void 0),J4=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{a(e)},[e,a]);const s=P.useCallback(c=>{t(c),a(c);const d=wl.currentUser;if(d){const p=Yr(En,"users",d.uid);Ud(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>wl.onAuthStateChanged(async d=>{if(d){const p=Yr(En,"users",d.uid),g=await Nc(p);if(g.exists()&&g.data().preferredTheme){const v=g.data().preferredTheme;t(v),a(v)}}}),[a]),A.jsx(xR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},Ll=({container:n=!0})=>{const e=A.jsx("div",{className:"spinner"});return n?A.jsx("div",{className:"spinner-container",children:e}):e},Rl=()=>A.jsx("div",{className:"loading-container",children:A.jsx(Ll,{container:!1})}),Z4=()=>{const n=yt(a=>a.auth.firebaseUser),e=yt(a=>a.auth.userData);return yt(a=>a.auth.loading)?A.jsx(Rl,{}):n?e?e.isApproved?A.jsx(as,{to:"/app/dashboard",replace:!0}):A.jsx(as,{to:"/guest",replace:!0}):A.jsx(Rl,{}):A.jsx(as,{to:"/login",replace:!0})};function On(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var eL=typeof Symbol=="function"&&Symbol.observable||"@@observable",nS=eL,vg=()=>Math.random().toString(36).substring(7).split("").join("."),tL={INIT:`@@redux/INIT${vg()}`,REPLACE:`@@redux/REPLACE${vg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vg()}`},ad=tL;function mv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function OR(n,e,t){if(typeof n!="function")throw new Error(On(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(On(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(On(1));return t(OR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((V,q)=>{c.set(q,V)}))}function v(){if(p)throw new Error(On(3));return s}function E(V){if(typeof V!="function")throw new Error(On(4));if(p)throw new Error(On(5));let q=!0;g();const H=d++;return c.set(H,V),function(){if(q){if(p)throw new Error(On(6));q=!1,g(),c.delete(H),l=null}}}function b(V){if(!mv(V))throw new Error(On(7));if(typeof V.type>"u")throw new Error(On(8));if(typeof V.type!="string")throw new Error(On(17));if(p)throw new Error(On(9));try{p=!0,s=a(s,V)}finally{p=!1}return(l=c).forEach(H=>{H()}),V}function C(V){if(typeof V!="function")throw new Error(On(10));a=V,b({type:ad.REPLACE})}function U(){const V=E;return{subscribe(q){if(typeof q!="object"||q===null)throw new Error(On(11));function H(){const X=q;X.next&&X.next(v())}return H(),{unsubscribe:V(H)}},[nS](){return this}}}return b({type:ad.INIT}),{dispatch:b,subscribe:E,getState:v,replaceReducer:C,[nS]:U}}function nL(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:ad.INIT})>"u")throw new Error(On(12));if(typeof t(void 0,{type:ad.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(On(13))})}function rL(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{nL(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let v=0;v<a.length;v++){const E=a[v],b=t[E],C=c[E],U=b(C,d);if(typeof U>"u")throw d&&d.type,new Error(On(14));g[E]=U,p=p||U!==C}return p=p||a.length!==Object.keys(c).length,p?g:c}}function sd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function iL(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(On(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=sd(...d)(s.dispatch),{...s,dispatch:l}}}function aL(n){return mv(n)&&"type"in n&&typeof n.type=="string"}var MR=Symbol.for("immer-nothing"),rS=Symbol.for("immer-draftable"),Jn=Symbol.for("immer-state");function si(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Cr=Object,Cl=Cr.getPrototypeOf,od="constructor",Fd="prototype",Zg="configurable",ld="enumerable",Rf="writable",hc="value",pa=n=>!!n&&!!n[Jn];function hi(n){var e;return n?VR(n)||qd(n)||!!n[rS]||!!((e=n[od])!=null&&e[rS])||Gd(n)||$d(n):!1}var sL=Cr[Fd][od].toString(),iS=new WeakMap;function VR(n){if(!n||!pv(n))return!1;const e=Cl(n);if(e===null||e===Cr[Fd])return!0;const t=Cr.hasOwnProperty.call(e,od)&&e[od];if(t===Object)return!0;if(!sl(t))return!1;let a=iS.get(t);return a===void 0&&(a=Function.toString.call(t),iS.set(t,a)),a===sL}function Hd(n,e,t=!0){Pc(n)===0?(t?Reflect.ownKeys(n):Cr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Pc(n){const e=n[Jn];return e?e.type_:qd(n)?1:Gd(n)?2:$d(n)?3:0}var aS=(n,e,t=Pc(n))=>t===2?n.has(e):Cr[Fd].hasOwnProperty.call(n,e),ey=(n,e,t=Pc(n))=>t===2?n.get(e):n[e],ud=(n,e,t,a=Pc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function oL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var qd=Array.isArray,Gd=n=>n instanceof Map,$d=n=>n instanceof Set,pv=n=>typeof n=="object",sl=n=>typeof n=="function",_g=n=>typeof n=="boolean";function lL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var aa=n=>n.copy_||n.base_,gv=n=>n.modified_?n.copy_:n.base_;function ty(n,e){if(Gd(n))return new Map(n);if($d(n))return new Set(n);if(qd(n))return Array[Fd].slice.call(n);const t=VR(n);if(e===!0||e==="class_only"&&!t){const a=Cr.getOwnPropertyDescriptors(n);delete a[Jn];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[Rf]===!1&&(d[Rf]=!0,d[Zg]=!0),(d.get||d.set)&&(a[c]={[Zg]:!0,[Rf]:!0,[ld]:d[ld],[hc]:n[c]})}return Cr.create(Cl(n),a)}else{const a=Cl(n);if(a!==null&&t)return{...n};const s=Cr.create(a);return Cr.assign(s,n)}}function yv(n,e=!1){return Kd(n)||pa(n)||!hi(n)||(Pc(n)>1&&Cr.defineProperties(n,{set:cf,add:cf,clear:cf,delete:cf}),Cr.freeze(n),e&&Hd(n,(t,a)=>{yv(a,!0)},!1)),n}function uL(){si(2)}var cf={[hc]:uL};function Kd(n){return n===null||!pv(n)?!0:Cr.isFrozen(n)}var cd="MapSet",ny="Patches",sS="ArrayMethods",PR={};function oo(n){const e=PR[n];return e||si(0,n),e}var oS=n=>!!PR[n],fc,LR=()=>fc,cL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:oS(cd)?oo(cd):void 0,arrayMethodsPlugin_:oS(sS)?oo(sS):void 0});function lS(n,e){e&&(n.patchPlugin_=oo(ny),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function ry(n){iy(n),n.drafts_.forEach(hL),n.drafts_=null}function iy(n){n===fc&&(fc=n.parent_)}var uS=n=>fc=cL(fc,n);function hL(n){const e=n[Jn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function cS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[Jn].modified_&&(ry(e),si(4)),hi(n)&&(n=hS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[Jn].base_,n,e)}else n=hS(e,t);return fL(e,n,!0),ry(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==MR?n:void 0}function hS(n,e){if(Kd(e))return e;const t=e[Jn];if(!t)return hd(e,n.handledSet_,n);if(!Yd(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);jR(t,n)}return t.copy_}function fL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&yv(e,t)}function kR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Yd=(n,e)=>n.scope_===e,dL=[];function UR(n,e,t,a){const s=aa(n),l=n.type_;if(a!==void 0&&ey(s,a,l)===e){ud(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;Hd(s,(p,g)=>{if(pa(g)){const v=d.get(g)||[];v.push(p),d.set(g,v)}})}const c=n.draftLocations_.get(e)??dL;for(const d of c)ud(s,d,t,l)}function mL(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!Yd(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=gv(l);UR(n,l.draft_??l,c,t),jR(l,s)})}function jR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}kR(n)}}function pL(n,e,t){const{scope_:a}=n;if(pa(t)){const s=t[Jn];Yd(s,a)&&s.callbacks_.push(function(){Cf(n);const c=gv(s);UR(n,t,c,e)})}else hi(t)&&n.callbacks_.push(function(){const l=aa(n);n.type_===3?l.has(t)&&hd(t,a.handledSet_,a):ey(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&hd(ey(n.copy_,e,n.type_),a.handledSet_,a)})}function hd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||pa(n)||e.has(n)||!hi(n)||Kd(n)||(e.add(n),Hd(n,(a,s)=>{if(pa(s)){const l=s[Jn];if(Yd(l,t)){const c=gv(l);ud(n,a,c,n.type_),kR(l)}}else hi(s)&&hd(s,e,t)})),n}function gL(n,e){const t=qd(n),a={type_:t?1:0,scope_:e?e.scope_:LR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=fd;t&&(s=[a],l=dc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var fd={get(n,e){if(e===Jn)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=aa(n);if(!aS(s,e,n.type_))return yL(n,s,e);const l=s[e];if(n.finalized_||!hi(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&lL(e))return l;if(l===Eg(n.base_,e)){Cf(n);const c=n.type_===1?+e:e,d=sy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in aa(n)},ownKeys(n){return Reflect.ownKeys(aa(n))},set(n,e,t){const a=zR(aa(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Eg(aa(n),e),l=s==null?void 0:s[Jn];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(oL(t,s)&&(t!==void 0||aS(n.base_,e,n.type_)))return!0;Cf(n),ay(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),pL(n,e,t)),!0},deleteProperty(n,e){return Cf(n),Eg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),ay(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=aa(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[Rf]:!0,[Zg]:n.type_!==1||e!=="length",[ld]:a[ld],[hc]:t[e]}},defineProperty(){si(11)},getPrototypeOf(n){return Cl(n.base_)},setPrototypeOf(){si(12)}},dc={};for(let n in fd){let e=fd[n];dc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}dc.deleteProperty=function(n,e){return dc.set.call(this,n,e,void 0)};dc.set=function(n,e,t){return fd.set.call(this,n[0],e,t,n[0])};function Eg(n,e){const t=n[Jn];return(t?aa(t):n)[e]}function yL(n,e,t){var s;const a=zR(e,t);return a?hc in a?a[hc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function zR(n,e){if(!(e in n))return;let t=Cl(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Cl(t)}}function ay(n){n.modified_||(n.modified_=!0,n.parent_&&ay(n.parent_))}function Cf(n){n.copy_||(n.assigned_=new Map,n.copy_=ty(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var vL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(sl(e)&&!sl(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,v=>t.call(this,v,...g))}}sl(t)||si(6),a!==void 0&&!sl(a)&&si(7);let s;if(hi(e)){const l=uS(this),c=sy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?ry(l):iy(l)}return lS(l,a),cS(s,l)}else if(!e||!pv(e)){if(s=t(e),s===void 0&&(s=e),s===MR&&(s=void 0),this.autoFreeze_&&yv(s,!0),a){const l=[],c=[];oo(ny).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else si(1,e)},this.produceWithPatches=(e,t)=>{if(sl(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},_g(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),_g(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),_g(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){hi(n)||si(8),pa(n)&&(n=_L(n));const e=uS(this),t=sy(e,n,void 0);return t[Jn].isManual_=!0,iy(e),t}finishDraft(n,e){const t=n&&n[Jn];(!t||!t.isManual_)&&si(9);const{scope_:a}=t;return lS(a,e),cS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=oo(ny).applyPatches_;return pa(n)?a(n,e):this.produce(n,s=>a(s,e))}};function sy(n,e,t,a){const[s,l]=Gd(e)?oo(cd).proxyMap_(e,t):$d(e)?oo(cd).proxySet_(e,t):gL(e,t);return((t==null?void 0:t.scope_)??LR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?mL(t,l,a):l.callbacks_.push(function(p){var v;(v=p.mapSetPlugin_)==null||v.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function _L(n){return pa(n)||si(10,n),BR(n)}function BR(n){if(!hi(n)||Kd(n))return n;const e=n[Jn];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ty(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=ty(n,!0);return Hd(t,(s,l)=>{ud(t,s,BR(l))},a),e&&(e.finalized_=!1),t}var EL=new vL,FR=EL.produce;function HR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var TL=HR(),bL=HR,SL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sd:sd.apply(null,arguments)},AL=n=>n&&typeof n.match=="function";function Wu(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ca(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>aL(a)&&a.type===n,t}var qR=class Fu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Fu.prototype)}static get[Symbol.species](){return Fu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Fu(...e[0].concat(this)):new Fu(...e.concat(this))}};function fS(n){return hi(n)?FR(n,()=>{}):n}function hf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function wL(n){return typeof n=="boolean"}var RL=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new qR;return t&&(wL(t)?c.push(TL):c.push(bL(t.extraArgument))),c},CL="RTK_autoBatch",dS=n=>e=>{setTimeout(e,n)},IL=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:dS(10):n.type==="callback"?n.queueNotification:dS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(v=>v()))};return Object.assign({},a,{subscribe(v){const E=()=>s&&v(),b=a.subscribe(E);return d.add(v),()=>{b(),d.delete(v)}},dispatch(v){var E;try{return s=!((E=v==null?void 0:v.meta)!=null&&E[CL]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(v)}finally{s=!0}}})},DL=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new qR(n);return a&&s.push(IL(typeof a=="object"?a:void 0)),s};function NL(n){const e=RL(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(mv(t))d=rL(t);else throw new Error(ca(1));let p;typeof a=="function"?p=a(e):p=e();let g=sd;s&&(g=SL({trace:!1,...typeof s=="object"&&s}));const v=iL(...p),E=DL(v);let b=typeof c=="function"?c(E):E();const C=g(...b);return OR(d,l,C)}function GR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ca(28));if(d in e)throw new Error(ca(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function xL(n){return typeof n=="function"}function OL(n,e){let[t,a,s]=GR(e),l;if(xL(n))l=()=>fS(n());else{const d=fS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:v})=>v(p)).map(({reducer:v})=>v)];return g.filter(v=>!!v).length===0&&(g=[s]),g.reduce((v,E)=>{if(E)if(pa(v)){const C=E(v,p);return C===void 0?v:C}else{if(hi(v))return FR(v,b=>E(b,p));{const b=E(v,p);if(b===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return v},d)}return c.getInitialState=l,c}var ML=(n,e)=>AL(n)?n.match(e):n(e);function VL(...n){return e=>n.some(t=>ML(t,e))}var PL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",LL=(n=21)=>{let e="",t=n;for(;t--;)e+=PL[Math.random()*64|0];return e},kL=["name","message","stack","code"],Tg=class{constructor(n,e){Fp(this,"_type");this.payload=n,this.meta=e}},mS=class{constructor(n,e){Fp(this,"_type");this.payload=n,this.meta=e}},UL=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of kL)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},pS="External signal was aborted",xr=(()=>{function n(e,t,a){const s=Wu(e+"/fulfilled",(p,g,v,E)=>({payload:p,meta:{...E||{},arg:v,requestId:g,requestStatus:"fulfilled"}})),l=Wu(e+"/pending",(p,g,v)=>({payload:void 0,meta:{...v||{},arg:g,requestId:p,requestStatus:"pending"}})),c=Wu(e+"/rejected",(p,g,v,E,b)=>({payload:E,error:(a&&a.serializeError||UL)(p||"Rejected"),meta:{...b||{},arg:v,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(v,E,b)=>{const C=a!=null&&a.idGenerator?a.idGenerator(p):LL(),U=new AbortController;let B,V;function q(F){V=F,U.abort()}g&&(g.aborted?q(pS):g.addEventListener("abort",()=>q(pS),{once:!0}));const H=(async function(){var ie,Y;let F;try{let S=(ie=a==null?void 0:a.condition)==null?void 0:ie.call(a,p,{getState:E,extra:b});if(zL(S)&&(S=await S),S===!1||U.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const w=new Promise((I,N)=>{B=()=>{N({name:"AbortError",message:V||"Aborted"})},U.signal.addEventListener("abort",B,{once:!0})});v(l(C,p,(Y=a==null?void 0:a.getPendingMeta)==null?void 0:Y.call(a,{requestId:C,arg:p},{getState:E,extra:b}))),F=await Promise.race([w,Promise.resolve(t(p,{dispatch:v,getState:E,extra:b,requestId:C,signal:U.signal,abort:q,rejectWithValue:(I,N)=>new Tg(I,N),fulfillWithValue:(I,N)=>new mS(I,N)})).then(I=>{if(I instanceof Tg)throw I;return I instanceof mS?s(I.payload,C,p,I.meta):s(I,C,p)})])}catch(S){F=S instanceof Tg?c(null,C,p,S.payload,S.meta):c(S,C,p)}finally{B&&U.signal.removeEventListener("abort",B)}return a&&!a.dispatchConditionRejection&&c.match(F)&&F.meta.condition||v(F),F})();return Object.assign(H,{abort:q,requestId:C,arg:p,unwrap(){return H.then(jL)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:VL(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function jL(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function zL(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var BL=Symbol.for("rtk-slice-createasyncthunk");function FL(n,e){return`${n}/${e}`}function HL({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[BL];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ca(11));const d=(typeof s.reducers=="function"?s.reducers(GL()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(X,ie){const Y=typeof X=="string"?X:X.type;if(!Y)throw new Error(ca(12));if(Y in g.sliceCaseReducersByType)throw new Error(ca(13));return g.sliceCaseReducersByType[Y]=ie,v},addMatcher(X,ie){return g.sliceMatchers.push({matcher:X,reducer:ie}),v},exposeAction(X,ie){return g.actionCreators[X]=ie,v},exposeCaseReducer(X,ie){return g.sliceCaseReducersByName[X]=ie,v}};p.forEach(X=>{const ie=d[X],Y={reducerName:X,type:FL(l,X),createNotation:typeof s.reducers=="function"};KL(ie)?QL(Y,ie,v,e):$L(Y,ie,v)});function E(){const[X={},ie=[],Y=void 0]=typeof s.extraReducers=="function"?GR(s.extraReducers):[s.extraReducers],S={...X,...g.sliceCaseReducersByType};return OL(s.initialState,w=>{for(let I in S)w.addCase(I,S[I]);for(let I of g.sliceMatchers)w.addMatcher(I.matcher,I.reducer);for(let I of ie)w.addMatcher(I.matcher,I.reducer);Y&&w.addDefaultCase(Y)})}const b=X=>X,C=new Map,U=new WeakMap;let B;function V(X,ie){return B||(B=E()),B(X,ie)}function q(){return B||(B=E()),B.getInitialState()}function H(X,ie=!1){function Y(w){let I=w[X];return typeof I>"u"&&ie&&(I=hf(U,Y,q)),I}function S(w=b){const I=hf(C,ie,()=>new WeakMap);return hf(I,w,()=>{const N={};for(const[O,M]of Object.entries(s.selectors??{}))N[O]=qL(M,w,()=>hf(U,w,q),ie);return N})}return{reducerPath:X,getSelectors:S,get selectors(){return S(Y)},selectSlice:Y}}const F={name:l,reducer:V,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:q,...H(c),injectInto(X,{reducerPath:ie,...Y}={}){const S=ie??c;return X.inject({reducerPath:S,reducer:V},Y),{...F,...H(S,!0)}}};return F}}function qL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var mo=HL();function GL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function $L({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!YL(a))throw new Error(ca(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Wu(n,c):Wu(n))}function KL(n){return n._reducerDefinitionType==="asyncThunk"}function YL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function QL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ca(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:v}=t,E=s(n,l,v);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||ff,pending:d||ff,rejected:p||ff,settled:g||ff})}function ff(){}function ca(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const XL={positions:[],loading:!1,error:null,fetched:!1},to=xr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Yr(En,"metadata","positions"),a=await Nc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),$R=xr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Yr(En,"metadata","positions");return await Ud(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),WL=mo({name:"positions",initialState:XL,reducers:{},extraReducers:n=>{n.addCase(to.pending,e=>{e.loading=!0,e.error=null}).addCase(to.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(to.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase($R.fulfilled,(e,t)=>{e.positions=t.payload})}}),JL=WL.reducer,ZL={teams:[],loading:!1,error:null,fetched:!1},pl=xr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Yr(En,"metadata","teams"),a=await Nc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),If=xr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Yr(En,"metadata","teams");return await Ud(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),KR=mo({name:"teams",initialState:ZL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(pl.pending,e=>{e.loading=!0,e.error=null}).addCase(pl.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(pl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(If.pending,e=>{e.error=null}).addCase(If.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(If.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:dU}=KR.actions,ek=KR.reducer,tk=()=>{const n=fi(),{firebaseUser:e,userData:t,loading:a}=yt(c=>c.auth),{fetched:s}=yt(c=>c.teams),{fetched:l}=yt(c=>c.positions);return P.useEffect(()=>{e&&(s||n(pl()),l||n(to()))},[n,e,s,l]),a?A.jsx(Rl,{}):e?t?t.isApproved?A.jsx(eA,{}):A.jsx(as,{to:"/guest",replace:!0}):A.jsx(Rl,{}):A.jsx(as,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gS=n=>{const e=rk(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ik={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>P.createElement("svg",{ref:p,...ik,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:YR("lucide",s),...!l&&!ak(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>P.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=(n,e)=>{const t=P.forwardRef(({className:a,...s},l)=>P.createElement(sk,{ref:l,iconNode:e,className:YR(`lucide-${nk(gS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=gS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],QR=kl("chevron-up",ok);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],XR=kl("corner-down-right",lk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],ck=kl("moon",uk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],fk=kl("panel-left-close",hk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],mk=kl("panel-left-open",dk);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gk=kl("sun",pk),yk=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},vk={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:yk(),lastVisitedPaths:{}},WR=mo({name:"ui",initialState:vk,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:Hu,setDesktopSidebarExpanded:_k,setLastVisitedPath:Ek,toggleTeamExpansion:Tk,toggleUserVisibility:bk}=WR.actions,Sk=WR.reducer,Ak=()=>{const n=P.useContext(xR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},vv=({showText:n})=>{const{theme:e,toggleTheme:t}=Ak();return A.jsxs("button",{className:"theme-toggle-button",onClick:t,"aria-label":"Toggle theme",children:[e==="dark"?A.jsx(gk,{size:20}):A.jsx(ck,{size:20}),n&&A.jsx("span",{children:"Toggle theme"})]})},wk=({title:n})=>{const e=fi(),{isMobileSidebarOpen:t}=yt(a=>a.ui);return A.jsxs("header",{className:"mobile-header",children:[A.jsxs("div",{className:`mobile-header-pill ${t?"mobile-header-pill-active":""}`,onClick:()=>e(Hu(!t)),children:[A.jsx("span",{className:"mobile-header-text",children:n}),A.jsx(QR,{className:`mobile-header-chevron ${t?"rotate":""}`})]}),A.jsx(vv,{})]})};var wn=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(wn||{}),ll=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(ll||{});const _v=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],yS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],Rk=()=>{const n=uo(),e=Xr(),{lastVisitedPaths:t}=yt(l=>l.ui),a=e.pathname.includes("/settings")?wn.SETTINGS:e.pathname.includes("/dashboard")?wn.DASHBOARD:wn.ROSTER,s=l=>{if(a===l)return;const c=t[l];n(c||`/app/${l}`)};return A.jsx("nav",{className:"bottom-nav-container",children:A.jsx("div",{className:"bottom-nav",children:_v.map(l=>A.jsxs("button",{className:`bottom-nav-btn ${a===l.id?"bottom-nav-btn-active":""}`,onClick:()=>s(l.id),children:[A.jsx("span",{children:l.icon}),A.jsx("span",{children:l.label})]},l.id))})})},Ck=()=>{var F;const n=uo(),e=Xr(),t=yd(),a=fi(),{userData:s}=yt(X=>X.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=yt(X=>X.ui),{teams:d,fetched:p,loading:g}=yt(X=>X.teams),{fetched:v}=yt(X=>X.positions),E=e.pathname.includes("/settings")?wn.SETTINGS:e.pathname.includes("/dashboard")?wn.DASHBOARD:wn.ROSTER,{teamName:b,positionName:C,section:U}=t,B=C||U;P.useEffect(()=>{p||a(pl()),v||a(to())},[a,p,v]);const V=P.useCallback(X=>{n(X)},[n]),q=X=>{a(Tk(X))},H=()=>{const X=_v.find(Y=>Y.id===E),ie=X?X.label:"GIG ROSTER";return b&&B?`${b}  ${B}`:b||(B?`${ie}  ${B}`:ie)};return A.jsxs("aside",{className:"side-nav",children:[A.jsxs("div",{className:"sidebar-content",children:[A.jsxs("div",{className:"tablet-sidebar-header",children:[l&&A.jsx("h3",{children:H()}),A.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(_k(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?A.jsx(fk,{size:20}):A.jsx(mk,{size:20})})]}),A.jsxs("nav",{className:"side-menu-list",children:[E===wn.ROSTER&&g&&A.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===wn.ROSTER?(F=s==null?void 0:s.teams)==null?void 0:F.map(X=>{var w,I;const ie=d.find(N=>N.name===X);if(!ie)return null;const Y=s.teams.length===1,S=Y||c.includes(ie.name);return A.jsxs("div",{children:[!Y&&A.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>q(ie.name),children:[A.jsxs("div",{children:[ie.emoji," ",l&&ie.name]}),A.jsx("span",{className:"expand-icon",children:S?"":""})]}),S&&A.jsxs("div",{className:"side-nav-sub-items",children:[(I=(w=ie.positions)==null?void 0:w.filter(N=>!N.parentId))==null?void 0:I.map(N=>{const O=B===N.name&&b===ie.name;return A.jsxs("button",{className:`side-nav-item side-nav-item-sub ${O?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${ie.name}/${N.name}`),a(Hu(!1))},style:{borderLeft:O?`4px solid ${N.colour}`:"4px solid transparent",backgroundColor:O?`${N.colour}15`:"transparent",color:O?N.colour:""},children:[A.jsx("span",{className:"side-emoji",children:N.emoji})," ",l&&N.name]},N.name)}),A.jsxs("button",{className:`side-nav-item side-nav-item-sub ${B==="Absence"&&b===ie.name?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${ie.name}/Absence`),a(Hu(!1))},style:{borderLeft:B==="Absence"&&b===ie.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:B==="Absence"&&b===ie.name?"var(--background-toggle-off-transparent)":"transparent"},children:[A.jsx("span",{className:"side-emoji",children:""})," ",l&&"Absence"]})]})]},ie.name)}):yS.filter(X=>!X.adminOnly).map(X=>A.jsxs("button",{className:`side-nav-item ${B===X.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${X.id}`),a(Hu(!1))},children:[A.jsx("span",{className:"side-emoji",children:X.icon})," ",l&&X.label]},X.id))]})]}),(s==null?void 0:s.isAdmin)&&E===wn.SETTINGS&&A.jsxs("div",{className:"admin-only-section-wrapper",children:[A.jsx("div",{className:"sidenav-menu-subheading",children:l&&A.jsx("h4",{children:"Admin Only"})}),yS.filter(X=>X.adminOnly).map(X=>A.jsxs("button",{className:`side-nav-item ${B===X.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${X.id}`),a(Hu(!1))},children:[A.jsx("span",{className:"side-emoji",children:X.icon})," ",l&&X.label]},X.id))]}),A.jsx("div",{className:"sidebar-footer",children:A.jsx(vv,{showText:l})})]})},Ik=()=>{const n=fi(),e=uo(),t=Xr(),a=yd(),{userData:s}=yt(V=>V.auth),{teams:l}=yt(V=>V.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:p}=yt(V=>V.ui),g=t.pathname.includes("/settings")?wn.SETTINGS:t.pathname.includes("/dashboard")?wn.DASHBOARD:wn.ROSTER,{teamName:v,positionName:E,section:b}=a,C=E||b||null;P.useEffect(()=>{if(t.pathname.startsWith("/app/")&&t.pathname!=="/app"&&t.pathname!=="/app/"){const V=t.pathname+t.search;n(Ek({tabId:g,path:V}))}},[t.pathname,t.search,g,n]),P.useEffect(()=>{if(t.pathname==="/app"||t.pathname==="/app/"){const V=p[wn.DASHBOARD];e(V||"/app/dashboard",{replace:!0})}else if(g===wn.ROSTER&&!v&&!C){const V=p[wn.ROSTER];if(V)e(V,{replace:!0});else if(s!=null&&s.teams&&s.teams.length>0&&l.length>0){const q=s.teams[0],H=l.find(F=>F.name===q);H&&H.positions&&H.positions.length>0&&e(`/app/roster/${H.name}/${H.positions[0].name}`,{replace:!0})}}else if(g===wn.SETTINGS&&!C){const V=p[wn.SETTINGS];e(V||`/app/settings/${ll.PROFILE}`,{replace:!0})}},[g,v,C,s,l,e,t.pathname,p]);const U=()=>{const V=_v.find(H=>H.id===g),q=V?V.label:"GIG ROSTER";return v&&C?`${v}  ${C}`:v||(C?`${q}  ${C}`:q)},B=["app-shell",c?"menu-open":"",d?"sidebar-expanded":"sidebar-collapsed"].filter(Boolean).join(" ");return A.jsxs(A.Fragment,{children:[A.jsx(wk,{title:U()}),A.jsxs("div",{className:B,children:[A.jsx(Ck,{}),A.jsx("main",{className:"main-content",children:A.jsx("div",{className:"content-container",children:A.jsx(eA,{})})}),A.jsx(Rk,{})]})]})},Dk={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},Ju=xr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Dc(Rc(En,"roster")),a=await xc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),Zu=xr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=Zw(En),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Yr(En,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),JR=mo({name:"roster",initialState:Dk,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],v=l.findIndex(U=>g.includes(U)),E=v>=0?l[v]:null;let b=null;E===null?b=l[0]:v<l.length-1?b=l[v+1]:b=null;const C=g.filter(U=>!l.includes(U));if(b)if(C.length<c)C.push(b);else{n.error=`User already has ${c} assignment(s) in this team.`;return}C.length===0?delete p.teams[a][s]:p.teams[a][s]=C,n.dirtyEntries[t]=p},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((p=d.absence[a])==null?void 0:p.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(Ju.pending,e=>{e.loading=!0,e.error=null}).addCase(Ju.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(Ju.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Zu.pending,e=>{e.saving=!0,e.error=null}).addCase(Zu.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(Zu.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:mU,updateLocalAssignment:Nk,updateLocalEventName:xk,resetRosterEdits:ZR,updateLocalAbsence:vS}=JR.actions,Ok=JR.reducer,Df=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,p={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(C=>p[C]);let v;c===l?v=new Date(s):v=new Date(c,0,1),v.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const b=new Date(v);for(;b.getTime()<=E.getTime();)g.includes(b.getDay())&&a.push(new Date(b)),b.setDate(b.getDate()+1);return a.sort((C,U)=>C.getTime()-U.getTime()),a.map(C=>C.toISOString())},Mk=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(p=>l[p]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const p=new Date(s);if(p.setFullYear(p.getFullYear()-1),d<p)break}return a.map(p=>p.toISOString()).sort()},Vk={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Nf=xr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Rc(En,"users"),a=Dc(t,tv("teams","array-contains",n)),s=await xc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),xf=xr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(C=>C.parentId===e),p=[e,...c.map(C=>C.name)].map(C=>`${n}|${C}`),g=Rc(En,"users"),v=Dc(g,tv("indexedAssignments","array-contains-any",p)),E=await xc(v),b=[];return E.forEach(C=>{b.push(C.data())}),b.sort((C,U)=>(C.name||"").localeCompare(U.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Of=xr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Yr(En,"metadata","teams"),a=await Nc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),e1=mo({name:"rosterView",initialState:Vk,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=Mk(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Df(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Df(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(xf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(xf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(xf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Nf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Nf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Nf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Of.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Of.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Df(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Of.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:Pk,resetToUpcomingDates:Lk,loadNextYearDates:kk}=e1.actions,Uk=e1.reducer,jk=()=>{const n=fi(),[e,t]=LN(),a=e.get("date"),{userData:s}=yt(M=>M.auth),{teams:l}=yt(M=>M.teams),{entries:c,dirtyEntries:d,loading:p,saving:g}=yt(M=>M.roster),{positions:v}=yt(M=>M.positions),[E,b]=P.useState([]),[C,U]=P.useState(!1),[B,V]=P.useState(0),q=P.useRef(null),H=Object.keys(d).length>0;P.useEffect(()=>{n(Ju())},[n]);const F=P.useMemo(()=>{if(!(s!=null&&s.teams)||l.length===0)return[];const M=l.filter(Ee=>s.teams.includes(Ee.name)),x=new Set;return M.forEach(Ee=>{Df(Ee.preferredDays).forEach($=>x.add($))}),Array.from(x).sort().filter(Ee=>{const De=Ee.split("T")[0],$=c[De]||d[De];return $?M.some(ue=>{var Ve;const de=((Ve=$.teams)==null?void 0:Ve[ue.name])||{};return Object.values(de).some(Ne=>Ne.length>0)}):!1})},[s,l,c,d]);P.useEffect(()=>{if(a&&F.length>0&&q.current){const M=F.findIndex(x=>x.startsWith(a));M>=0&&setTimeout(()=>{if(q.current){const x=q.current,Ee=x.offsetWidth;x.scrollTo({left:Ee*M,behavior:"auto"}),V(M)}},100)}},[a,F]),P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){U(!0);try{const x=Rc(En,"users"),Ee=Dc(x,tv("teams","array-contains-any",s.teams)),De=await xc(Ee),$=[];De.forEach(ue=>$.push(ue.data())),b($)}catch(x){console.error("Error fetching users for dashboard:",x)}finally{U(!1)}}})()},[s==null?void 0:s.teams]);const X=P.useCallback(M=>{if(!M||!(s!=null&&s.teams)||l.length===0)return null;const x=M.split("T")[0],Ee=d[x]||c[x],ue=l.filter(de=>s.teams.includes(de.name)).map(de=>{var me;const Ve=((me=Ee==null?void 0:Ee.teams)==null?void 0:me[de.name])||{},Ne=[],j=de.positions.map(pe=>pe.name);let re=0;return j.forEach(pe=>{const be=v.find(We=>We.name===pe),Oe=[];Object.entries(Ve).forEach(([We,rt])=>{if(rt.includes(pe)){const qn=E.find(hr=>hr.email===We);qn?Oe.push(qn):Oe.push({email:We,name:We}),re++}});const Ke=[...Oe].sort((We,rt)=>be!=null&&be.sortByGender&&We.gender!==rt.gender?We.gender==="Male"?-1:rt.gender==="Male"?1:(We.gender||"").localeCompare(rt.gender||""):(We.name||"").localeCompare(rt.name||""));Ne.push({posName:pe,emoji:(be==null?void 0:be.emoji)||"",names:Ke.map(We=>We.name||We.email||"Unknown")})}),{teamName:de.name,teamEmoji:de.emoji,positions:Ne,hasAssignments:re>0}}).filter(de=>de.hasAssignments);return ue.length>0?ue:null},[c,d,s,l,v,E]),ie=(M,x,Ee,De)=>{let ue=`${new Date(M).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})} - ${Ee} ${x}
`;De.forEach(de=>{const Ve=de.names.length>0?de.names.join(", "):"-";ue+=`${de.emoji}: ${Ve}
`}),navigator.clipboard.writeText(ue).then(()=>{})},Y=()=>{if(!q.current)return;const M=q.current,x=Math.round(M.scrollLeft/M.offsetWidth);if(x!==B){V(x);const Ee=F[x];Ee&&t({date:Ee.split("T")[0]},{replace:!0})}},S=(M,x)=>{n(xk({date:M.split("T")[0],eventName:x}))},w=()=>{n(Zu(d))},I=()=>{n(ZR())};if(p||C)return A.jsx(Ll,{});if(F.length===0)return A.jsxs("div",{className:"dashboard-empty",children:[A.jsx("h2",{children:"No upcoming events found"}),A.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const N=M=>new Date(M).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric"}),O=(M,x=!1)=>{const Ee=X(M);return Ee?A.jsx("div",{className:"team-cards-container",children:Ee.map(De=>A.jsxs("div",{className:"team-event-card",children:[A.jsxs("div",{className:"team-event-header",children:[A.jsxs("h3",{children:[A.jsx("span",{className:"team-card-emoji",children:De.teamEmoji}),A.jsx("span",{className:"team-card-name",children:De.teamName})]}),!x&&A.jsx("button",{className:"copy-roster-btn",onClick:()=>ie(M,De.teamName,De.teamEmoji,De.positions),title:"Copy to clipboard",children:" Copy"})]}),A.jsx("div",{className:"team-event-details",children:De.positions.map($=>A.jsxs("div",{className:"pos-assignment-row",children:[A.jsx("span",{className:"pos-emoji-label",title:$.posName,children:$.emoji}),A.jsx("span",{className:`assigned-names ${$.names.length===0?"unassigned":""}`,children:$.names.length>0?$.names.join(", "):"Unassigned"})]},$.posName))})]},De.teamName))}):null};return A.jsxs("div",{className:"dashboard-container",children:[A.jsx("div",{className:"dashboard-header",children:A.jsx("h1",{children:"Upcoming Events"})}),A.jsx("div",{className:"carousel-outer-wrapper",children:A.jsx("div",{className:"events-carousel-track",ref:q,onScroll:Y,children:F.map((M,x)=>{const Ee=M.split("T")[0],De=d[Ee]||c[Ee],$=(De==null?void 0:De.eventName)||"";return A.jsxs("div",{className:`event-card-wrapper ${x===B?"active":"peek"}`,children:[A.jsx("div",{className:"event-name-container",children:A.jsx("input",{type:"text",className:"dashboard-event-name-input",placeholder:"Event name (e.g. Easter Sunday)",value:$,onChange:ue=>S(M,ue.target.value),disabled:x!==B})}),A.jsx("div",{className:"event-card-date",children:N(M)}),O(M,x!==B)]},M)})})}),A.jsxs("div",{className:"carousel-pagination",children:[B+1," / ",F.length]}),H&&A.jsx("div",{className:"roster-save-footer",children:A.jsxs("div",{className:"save-footer-content",children:[A.jsx("span",{className:"changes-label",children:"Unsaved event labels"}),A.jsxs("div",{className:"save-footer-actions",children:[A.jsx("button",{className:"cancel-btn",onClick:I,disabled:g,children:"Discard"}),A.jsx("button",{className:"save-btn",onClick:w,disabled:g,children:g?"Saving...":"Save Changes"})]})]})})]})},Di=({children:n,nowrap:e})=>A.jsx("div",{className:`pill-group ${e?"pill-group-nowrap":""}`,children:n}),Wn=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),A.jsxs("div",{className:`pill pill--text ${t?"pill-active":""} ${a?"pill-disabled":""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(v=>!v),l&&l(g))},children:[c,e&&A.jsx(QR,{style:{rotate:d?"90deg":"0"}})]})},t1=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},zk={firebaseUser:null,userData:null,loading:!0,error:null},Mf=xr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Yr(En,"users",n),a=await Nc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=wl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await GV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Vf=xr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Yr(En,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=t1(s.teamPositions)),await Ud(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),n1=mo({name:"auth",initialState:zk,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(Mf.pending,e=>{e.loading=!0,e.error=null}).addCase(Mf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(Mf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Vf.pending,e=>{e.error=null}).addCase(Vf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Vf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:Bk,setUserData:Fk,setLoading:pU,logout:Hk}=n1.actions,qk=n1.reducer,r1=()=>{const n=fi(),{userData:e,firebaseUser:t}=yt(F=>F.auth),a=yt(F=>F.teams.teams),[s,l]=P.useState((e==null?void 0:e.name)||""),[c,d]=P.useState((e==null?void 0:e.gender)||""),[p,g]=P.useState((e==null?void 0:e.isActive)??!0),[v,E]=P.useState((e==null?void 0:e.teams)||[]),[b,C]=P.useState((e==null?void 0:e.teamPositions)||{}),[U,B]=P.useState("idle"),V=async()=>{if(t){B("saving");try{const F={name:s,gender:c,isActive:p,teams:v,teamPositions:b};await n(Vf({uid:t.uid,data:F})).unwrap(),B("success"),setTimeout(()=>B("idle"),2e3)}catch(F){console.error(F),B("idle")}}},q=F=>{E(X=>{const ie=X.includes(F),Y=ie?X.filter(S=>S!==F):[...X,F];return C(S=>{const w={...S};return ie?delete w[F]:w[F]||(w[F]=[]),w}),Y})},H=(F,X)=>{C(ie=>{const Y=ie[F]||[],S=Y.includes(X)?Y.filter(w=>w!==X):[...Y,X];return{...ie,[F]:S}})};return e?A.jsxs("section",{className:"profile-card",children:[A.jsx("div",{className:"profile-readonly",children:A.jsxs("p",{children:[A.jsx("strong",{children:"Email:"})," ",e.email]})}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Name"}),A.jsx(Di,{children:A.jsx("input",{type:"text",value:s,onChange:F=>l(F.target.value),className:"form-input form-input-width-auto"})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Gender"}),A.jsx(Di,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(F=>A.jsx(Wn,{colour:F.colour,onClick:()=>d(F.value),isActive:c===F.value,children:F.value},F.value))})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"My Teams"}),A.jsx(Di,{children:a.map(F=>{const X=v.includes(F.name);return A.jsxs(Wn,{onClick:()=>q(F.name),isActive:X,children:[A.jsx("span",{children:F.emoji})," ",F.name]},F.name)})})]}),v.length>0&&A.jsxs("div",{className:"team-positions-section",children:[A.jsx("label",{className:"section-label",children:"Positions per Team"}),v.map(F=>{var ie,Y;const X=a.find(S=>S.name===F);return X?A.jsxs("div",{className:"team-position-group",children:[A.jsxs("div",{className:"team-position-header",children:[X.emoji," ",X.name]}),A.jsx(Di,{children:(Y=(ie=X.positions)==null?void 0:ie.filter(S=>!S.parentId))==null?void 0:Y.map(S=>{var I;const w=(I=b[F])==null?void 0:I.includes(S.name);return A.jsxs(Wn,{onClick:()=>H(F,S.name),isActive:w,colour:S.colour,children:[A.jsx("span",{children:S.emoji})," ",S.name]},S.name)})})]},F):null})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Availability Status"}),A.jsx(Wn,{colour:p?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!p),isActive:!0,children:p?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),A.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),A.jsxs("div",{className:"action-container",children:[A.jsx("button",{onClick:V,disabled:U!=="idle",className:`save-button ${U}`,children:U==="saving"?"Saving...":U==="success"?"Done ":"Update Profile"}),A.jsx("button",{onClick:()=>wl.signOut(),className:"logout-btn",children:"Logout"})]})]}):A.jsx("div",{children:"Loading profile..."})},Gk=()=>{const{userData:n,firebaseUser:e,loading:t}=yt(a=>a.auth);return t?A.jsx(Rl,{}):e?n?n.isApproved?A.jsx(as,{to:"/app",replace:!0}):A.jsxs("div",{className:"guest-container",children:[A.jsxs("header",{className:"guest-header",children:[A.jsx("h2",{className:"brand-title",children:"God is Good"}),A.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),A.jsx("div",{className:"guest-theme-toggle-container",children:A.jsx(vv,{})})]}),A.jsx(r1,{})]}):A.jsx(Rl,{}):A.jsx(as,{to:"/login",replace:!0})},$k=()=>{const{firebaseUser:n,loading:e}=yt(a=>a.auth),t=()=>n4(wl,W4);return e?null:n?A.jsx(as,{to:"/",replace:!0}):A.jsxs("div",{className:"login-container",children:[A.jsxs("header",{className:"login-header",children:[A.jsx("h1",{className:"brand-title",children:"God is Good"}),A.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),A.jsx("div",{className:"login-button-container",children:A.jsxs("button",{onClick:t,className:"login-button google",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},Kk=()=>{const n=fi(),e=uo(),{teamName:t,positionName:a}=yd(),{users:s,allTeamUsers:l,rosterDates:c,currentTeamData:d,loadingUsers:p,loadingTeam:g,loadingAllTeamUsers:v,error:E}=yt(se=>se.rosterView),{entries:b,dirtyEntries:C,saving:U,error:B}=yt(se=>se.roster),{teams:V}=yt(se=>se.teams),{positions:q}=yt(se=>se.positions),{hiddenUsers:H}=yt(se=>se.ui),[F,X]=P.useState(null),[ie,Y]=P.useState(null),S=Object.keys(C).length>0,w=P.useMemo(()=>q.find(se=>se.name===a),[q,a]),I=P.useMemo(()=>d?d.positions.filter(se=>se.name!==a):[],[d,a]),N=P.useMemo(()=>{var se;return!t||!a?[]:((se=H[t])==null?void 0:se[a])||[]},[H,t,a]),O=P.useMemo(()=>{const se=s.filter(Te=>Te.email&&!N.includes(Te.email));return w!=null&&w.sortByGender?se.sort((Te,Le)=>Te.gender===Le.gender?(Te.name||"").localeCompare(Le.name||""):Te.gender==="Male"?-1:Le.gender==="Male"?1:(Te.gender||"").localeCompare(Le.gender||"")):se},[s,w,N]),M=P.useMemo(()=>{if(!(w!=null&&w.sortByGender)||O.length===0)return-1;const se=O.findIndex(Te=>Te.gender==="Female");return se>0&&se<O.length?se:-1},[w,O]),x=se=>{!t||!a||n(bk({teamName:t,positionName:a,userEmail:se}))},Ee=()=>{n(Pk())},De=()=>{n(Lk())},$=()=>{n(kk())},ue=se=>{const Te=se.split("T")[0];de(se)&&e(`/app/dashboard?date=${Te}`)},de=P.useCallback(se=>{const Te=se.split("T")[0],Le=C[Te]||b[Te];return Le?Object.values(Le.teams).some(Pe=>Object.values(Pe).some(Fe=>Fe.length>0)):!1},[b,C]),Ve=P.useCallback(se=>{if(!ie||!t)return[];const Te=se.split("T")[0],Le=C[Te]||b[Te];return!Le||!Le.teams[t]?[]:Object.entries(Le.teams[t]).filter(([,Pe])=>Pe.includes(ie)).map(([Pe])=>{const Fe=l.find(je=>je.email===Pe);return(Fe==null?void 0:Fe.name)||Pe})},[ie,t,C,b,l]);P.useEffect(()=>{n(Ju())},[n]),P.useEffect(()=>{a&&t&&a!=="Absence"&&n(xf({teamName:t,positionName:a}))},[a,t,n]),P.useEffect(()=>{t&&(n(Of(t)),n(Nf(t)))},[t,n]);const Ne=P.useCallback((se,Te)=>{const Le=se.split("T")[0],Pe=C[Le]||b[Le];return!!(Pe&&Pe.absence&&Pe.absence[Te])},[C,b]),j=P.useCallback((se,Te)=>{var Fe,je;const Le=se.split("T")[0],Pe=C[Le]||b[Le];return((je=(Fe=Pe==null?void 0:Pe.absence)==null?void 0:Fe[Te])==null?void 0:je.reason)||""},[C,b]),re=P.useCallback((se,Te)=>{if(!t||!a||a==="Absence")return!1;if(Ne(se,Te))return!0;const Le=se.split("T")[0],Pe=C[Le]||b[Le],Fe=V.find(st=>st.name===t),je=(Fe==null?void 0:Fe.maxConflict)||1;if(!Pe||!Pe.teams[t]||!Pe.teams[t][Te])return!1;const ct=Pe.teams[t][Te],vt=q.filter(st=>st.parentId===a),Be=[a,...vt.map(st=>st.name)];return ct.some(st=>Be.includes(st))?!1:ct.length>=je},[t,a,Ne,C,b,V,q]),me=P.useCallback((se,Te,Le,Pe)=>{if(!t||!a||a==="Absence"||re(se,Te)){X({row:Le,col:Pe,table:"roster"});return}X({row:Le,col:Pe,table:"roster"});const Fe=V.find(Be=>Be.name===t),je=(Fe==null?void 0:Fe.maxConflict)||1,ct=q.filter(Be=>Be.parentId===a),vt=[a,...ct.map(Be=>Be.name)];n(Nk({date:se.split("T")[0],teamName:t,userIdentifier:Te,positionGroupNames:vt,maxConflict:je}))},[n,t,a,re,V,q]),pe=P.useCallback((se,Te,Le,Pe)=>{X({row:Le,col:Pe,table:"absence"});const Fe=Ne(se,Te);n(vS({date:se.split("T")[0],userIdentifier:Te,isAbsent:!Fe}))},[n,Ne]),be=P.useCallback((se,Te,Le)=>{n(vS({date:se.split("T")[0],userIdentifier:Te,reason:Le,isAbsent:!0}))},[n]),Oe=P.useCallback(()=>{n(Zu(C))},[n,C]),Ke=P.useCallback(()=>{n(ZR()),X(null)},[n]),We=(se,Te)=>{var ct;const Le=se.split("T")[0],Pe=C[Le]||b[Le];if(!Pe||!t)return"-";const Fe=((ct=Pe.teams[t])==null?void 0:ct[Te])||[],je=[];return Object.entries(Pe.teams).forEach(([vt,Be])=>{vt!==t&&Be[Te]&&je.push({team:vt,positions:Be[Te]})}),Fe.length===0&&je.length===0?"-":A.jsxs("div",{className:"assigned-positions",children:[Fe.map(vt=>{const Be=q.find(Rt=>Rt.name===vt);return A.jsx("span",{title:`${t}: ${vt}`,className:"pos-emoji",children:(Be==null?void 0:Be.emoji)||""},vt)}),je.map(vt=>vt.positions.map(Be=>{const Rt=q.find(st=>st.name===Be);return A.jsx("span",{title:`${vt.team}: ${Be}`,className:"pos-emoji other-team-emoji",children:(Rt==null?void 0:Rt.emoji)||""},`${vt.team}-${Be}`)}))]})};P.useEffect(()=>{const se=Te=>{const Le=Te.target;if(Le.tagName==="INPUT"||Le.tagName==="TEXTAREA"||!F)return;const{row:Pe,col:Fe,table:je}=F,ct=c,vt=je==="roster"?O:l;switch(Te.key){case"ArrowUp":Te.preventDefault(),Pe>0&&X({row:Pe-1,col:Fe,table:je});break;case"ArrowDown":Te.preventDefault(),Pe<ct.length-1&&X({row:Pe+1,col:Fe,table:je});break;case"ArrowLeft":Te.preventDefault(),Fe>0&&X({row:Pe,col:Fe-1,table:je});break;case"ArrowRight":Te.preventDefault(),Fe<vt.length-1&&X({row:Pe,col:Fe+1,table:je});break;case"Tab":Te.preventDefault(),Te.shiftKey?Pe>0&&X({row:Pe-1,col:Fe,table:je}):Pe<ct.length-1&&X({row:Pe+1,col:Fe,table:je});break;case" ":{Te.preventDefault();const Be=c[Pe],Rt=vt[Fe];Rt!=null&&Rt.email&&(je==="roster"?me(Be,Rt.email,Pe,Fe):pe(Be,Rt.email,Pe,Fe));break}case"Enter":S&&(Te.preventDefault(),Oe());break;case"Escape":S&&(Te.preventDefault(),Ke());break}};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[F,c,O,l,S,me,pe,Oe,Ke]);const rt=P.useMemo(()=>new Date().toISOString().split("T")[0],[]),qn=P.useMemo(()=>c.length===0?!1:c[0].split("T")[0]<rt,[c,rt]),hr=P.useCallback(se=>{const Te=se.split("T")[0];return Te<rt?"past-date":Te===rt?"today-date":"future-date"},[rt]);if(p||g||v)return A.jsx(Ll,{});const kt=E||B;if(kt)return A.jsxs("div",{className:"roster-table-error",children:["Error: ",kt]});const Rn=a==="Absence";return!Rn&&O.length===0?A.jsx("div",{className:"roster-table-loading",children:"No users found for this position."}):A.jsxs("div",{className:"roster-table-wrapper",children:[!Rn&&N.length>0&&A.jsxs("div",{className:"hidden-members-bar",children:[A.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),A.jsx("div",{className:"hidden-members-list",children:N.map(se=>{const Te=s.find(Le=>Le.email===se);return A.jsxs("button",{className:"unhide-pill",onClick:()=>x(se),title:"Click to unhide",children:[(Te==null?void 0:Te.name)||se," ",A.jsx("span",{children:"+"})]},se)})})]}),Rn?A.jsxs("div",{className:"roster-section absence-section",children:[A.jsx("div",{className:"roster-table-container",children:A.jsxs("table",{className:"roster-table absence-table",children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:A.jsxs("div",{className:"date-header-content",children:["Date",A.jsxs("div",{className:"date-header-actions",children:[A.jsx("button",{className:"load-prev-btn",onClick:Ee,title:"Load 5 previous dates",children:""}),qn&&A.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:De,title:"Hide previous dates",children:""})]})]})}),l.map(se=>A.jsx("th",{className:"roster-table-header-cell sticky-header",children:se.name},se.email)),A.jsx("th",{className:"gender-divider-cell sticky-header"}),A.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:A.jsxs("select",{className:"peek-selector",value:ie||"",onChange:se=>Y(se.target.value||null),children:[A.jsx("option",{value:"",children:"Peek Position..."}),I.map(se=>A.jsxs("option",{value:se.name,children:[se.emoji," ",se.name]},se.name))]})})]})}),A.jsx("tbody",{children:c.map((se,Te)=>{const Le=se.split("T")[0],Pe=C[Le]||b[Le],Fe=Pe==null?void 0:Pe.eventName,je=hr(se),ct=je==="today-date",vt=de(se);return A.jsxs("tr",{className:`${je} ${vt?"":"no-data"} ${Fe?"special-event-row":""}`,children:[A.jsx("td",{className:`date-cell sticky-col ${vt?"clickable":""}`,onClick:()=>ue(se),title:Fe,children:A.jsxs("div",{className:"date-cell-content",children:[new Date(se).toLocaleDateString(),ct&&A.jsx("span",{className:"today-badge",children:"TODAY"}),Fe&&A.jsx("span",{className:"special-event-dot"})]})}),l.map((Be,Rt)=>{const st=(F==null?void 0:F.row)===Te&&(F==null?void 0:F.col)===Rt&&(F==null?void 0:F.table)==="absence",gn=Be.email?Ne(se,Be.email):!1,Zn=Be.email?j(se,Be.email):"";return A.jsx("td",{className:`roster-cell clickable absence-roster-cell ${st?"focused":""} ${gn?"absent-cell":""}`,onClick:()=>{Be.email&&pe(se,Be.email,Te,Rt)},tabIndex:0,onFocus:()=>X({row:Te,col:Rt,table:"absence"}),title:Zn,children:gn?A.jsxs("div",{className:"absence-input-container",children:[A.jsx("input",{type:"text",className:"absence-reason-input",value:Zn,placeholder:"Reason...",maxLength:20,autoFocus:st,onClick:Gn=>Gn.stopPropagation(),onChange:Gn=>{Be.email&&be(se,Be.email,Gn.target.value)}}),A.jsx("button",{className:"remove-absence-btn",onClick:Gn=>{Gn.stopPropagation(),Be.email&&pe(se,Be.email,Te,Rt)},title:"Mark as present",children:""})]}):"-"},Be.email)}),A.jsx("td",{className:"gender-divider-cell"}),A.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Ve(se).join(", ")||"-"})]},se)})})]})}),A.jsx("div",{className:"load-more-footer",children:A.jsx("button",{className:"load-next-year-btn",onClick:$,children:"Load Next Year "})})]}):A.jsxs("div",{className:"roster-section",children:[A.jsx("div",{className:"roster-table-container",children:A.jsxs("table",{className:"roster-table",children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:A.jsxs("div",{className:"date-header-content",children:["Date",A.jsxs("div",{className:"date-header-actions",children:[A.jsx("button",{className:"load-prev-btn",onClick:Ee,title:"Load 5 previous dates",children:""}),qn&&A.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:De,title:"Hide previous dates",children:""})]})]})}),O.map((se,Te)=>A.jsxs(P.Fragment,{children:[M===Te&&A.jsx("th",{className:"gender-divider-cell sticky-header"}),A.jsxs("th",{className:"roster-table-header-cell sticky-header clickable-header",onClick:()=>se.email&&x(se.email),title:"Click to hide member",children:[se.name,(w==null?void 0:w.sortByGender)&&A.jsxs("span",{className:"gender-label",children:["(",se.gender==="Male"?"M":se.gender==="Female"?"F":"?",")"]})]})]},se.email)),A.jsx("th",{className:"gender-divider-cell sticky-header"}),A.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:A.jsxs("select",{className:"peek-selector",value:ie||"",onChange:se=>Y(se.target.value||null),children:[A.jsx("option",{value:"",children:"Peek Position..."}),I.map(se=>A.jsxs("option",{value:se.name,children:[se.emoji," ",se.name]},se.name))]})})]})}),A.jsx("tbody",{children:c.map((se,Te)=>{const Le=se.split("T")[0],Pe=C[Le]||b[Le],Fe=Pe==null?void 0:Pe.eventName,je=hr(se),ct=je==="today-date",vt=de(se);return A.jsxs("tr",{className:`${je} ${vt?"":"no-data"} ${Fe?"special-event-row":""}`,children:[A.jsx("td",{className:`date-cell sticky-col ${vt?"clickable":""}`,onClick:()=>ue(se),title:Fe,children:A.jsxs("div",{className:"date-cell-content",children:[new Date(se).toLocaleDateString(),ct&&A.jsx("span",{className:"today-badge",children:"TODAY"}),Fe&&A.jsx("span",{className:"special-event-dot"})]})}),O.map((Be,Rt)=>{const st=(F==null?void 0:F.row)===Te&&(F==null?void 0:F.col)===Rt&&(F==null?void 0:F.table)==="roster",gn=Be.email?re(se,Be.email):!1,Zn=Be.email?Ne(se,Be.email):!1;return A.jsxs(P.Fragment,{children:[M===Rt&&A.jsx("td",{className:"gender-divider-cell"}),A.jsx("td",{className:`roster-cell ${gn?"disabled":"clickable"} ${st?"focused":""} ${Zn?"absent-strike":""}`,onClick:()=>{Be.email&&!gn&&me(se,Be.email,Te,Rt)},tabIndex:0,onFocus:()=>X({row:Te,col:Rt,table:"roster"}),children:Be.email&&(Zn?A.jsx("span",{title:j(se,Be.email),children:""}):We(se,Be.email))})]},Be.email)}),A.jsx("td",{className:"gender-divider-cell"}),A.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Ve(se).join(", ")||"-"})]},se)})})]})}),A.jsx("div",{className:"load-more-footer",children:A.jsx("button",{className:"load-next-year-btn",onClick:$,children:"Load Next Year "})})]}),S&&A.jsx("div",{className:"roster-save-footer",children:A.jsxs("div",{className:"save-footer-content",children:[A.jsx("span",{className:"changes-label",children:"You have unsaved changes"}),A.jsxs("div",{className:"save-footer-actions",children:[A.jsx("button",{className:"cancel-btn",onClick:Ke,disabled:U,children:"Discard"}),A.jsx("button",{className:"save-btn",onClick:Oe,disabled:U,children:U?"Saving...":"Save Roster"})]})]})})]})},Yk=()=>A.jsx("div",{className:"roster-page",style:{height:"100%"},children:A.jsx(Kk,{})}),Qk=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>A.jsx("th",{className:s?"sticky-col":void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),on=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>A.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?"sticky-col":""}
`,children:a}),Gr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>A.jsxs(on,{isSticky:s,children:[c&&A.jsx(XR,{}),A.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),_S=({name:n,value:e,placeholder:t,onChange:a})=>A.jsxs(on,{className:"color-picker-group",children:[A.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),A.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),Ev=({headers:n,children:e})=>A.jsx("div",{className:"app-table-container",children:A.jsxs("table",{className:"app-table",children:[A.jsx("thead",{children:A.jsx("tr",{children:n.map((t,a)=>A.jsx(Qk,{...t},a))})}),A.jsx("tbody",{children:e})]})}),bg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},Xk=()=>{const n=fi(),{positions:e,fetched:t,loading:a}=yt(V=>V.positions),[s,l]=P.useState(e),[c,d]=P.useState(bg),[p,g]=P.useState("idle");P.useEffect(()=>{t||n(to())},[n,t]),P.useEffect(()=>{l(e)},[e]);const v=(V,q,H)=>{const F=[...s];F[V]={...F[V],[q]:H},l(F)},E=(V,q)=>{const H=[...s],F=H[V],X=F.parentId,ie=Y=>{const S=H[Y];if(!S)return{block:[],startIndex:-1,endIndex:-1};const w=[],I=[S],N=new Set;let O=Y,M=Y,x=0;for(;x<I.length;){const De=I[x++];N.has(De.name)||(N.add(De.name),w.push(De),H.forEach(($,ue)=>{$.parentId===De.name&&!N.has($.name)&&(I.push($),O=Math.min(O,ue),M=Math.max(M,ue))}))}return{block:w,startIndex:O,endIndex:M}};if(X){const Y=H.filter(x=>x.parentId===X),w=Y.findIndex(x=>x.name===F.name)+(q==="up"?-1:1);if(w<0||w>=Y.length)return;const I=Y[w],N=H.indexOf(F),O=H.indexOf(I);if(N===-1||O===-1)return;const M=[...H];M[N]=I,M[O]=F,l(M)}else{const Y=ie(V),{block:S,startIndex:w,endIndex:I}=Y;if(!S||S.length===0)return;if(q==="up"){if(w===0)return;let N=w-1;for(;N>=0&&H[N].parentId;)N--;if(N<0)return;const O=ie(N),{block:M,startIndex:x}=O;if(!M||M.length===0)return;const Ee=[...H.slice(0,x),...S,...M,...H.slice(I+1)].filter(Boolean);l(Ee)}else{if(I===H.length-1)return;let N=I+1;for(;N<H.length&&H[N].parentId;)N++;if(N>=H.length)return;const O=ie(N),{block:M,startIndex:x}=O;if(!M||M.length===0)return;const Ee=[...H.slice(0,w),...M,...S,...H.slice(x+M.length)].filter(Boolean);l(Ee)}}},b=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(bg)},C=V=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const q=s[V];let H=s.filter((F,X)=>X!==V);q.parentId||(H=H.filter(F=>F.parentId!==q.name)),l(H)}},U=async()=>{g("saving");try{const V=s.map(q=>({...q,parentId:q.parentId===void 0?void 0:q.parentId}));await n($R(V)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(V){console.error("Save Error:",V),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},B=V=>{l(q=>{const H={...bg,parentId:V},F=q.findIndex(Y=>Y.name===V);if(F===-1)return[...q,H];let X=F;for(;X+1<q.length&&q[X+1].parentId===V;)X++;return[...q.slice(0,X+1),H,...q.slice(X+1)]})};return a?A.jsx(Ll,{}):A.jsxs(A.Fragment,{children:[A.jsxs(Ev,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((V,q)=>A.jsxs("tr",{children:[A.jsx(on,{textAlign:"center",children:V.parentId?A.jsx(XR,{}):A.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(q,"up"),disabled:q===0,children:""}),A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(q,"down"),disabled:q===s.length-1,children:""})]})}),A.jsx(Gr,{name:`emoji-${q}`,value:V.emoji,onChange:H=>v(q,"emoji",H.target.value)}),A.jsx(Gr,{name:`name-${q}`,value:V.name,onChange:H=>v(q,"name",H.target.value)}),A.jsx(_S,{name:`colour-${q}`,value:V.colour,onChange:H=>v(q,"colour",H.target.value)}),A.jsx(on,{textAlign:"center",children:A.jsx(Wn,{colour:V.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:V.sortByGender,onClick:()=>v(q,"sortByGender",!V.sortByGender),children:V.sortByGender?"YES":"NO"})}),A.jsx(on,{textAlign:"center",children:!V.parentId&&A.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>B(V.name),title:"Add Child Position",children:"+"})}),A.jsx(on,{textAlign:"center",children:A.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>C(q),children:""})})]},`${V.emoji}-${q}`)),A.jsxs("tr",{className:"pos-row-new",children:[A.jsx("td",{className:"",children:""}),A.jsx(Gr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:V=>d({...c,emoji:V.target.value})}),A.jsx(Gr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:V=>d({...c,name:V.target.value})}),A.jsx(_S,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:V=>d({...c,colour:V.target.value})}),A.jsx(on,{textAlign:"center",children:A.jsx(Wn,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),A.jsx(on,{textAlign:"center",children:A.jsx("button",{onClick:b,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),A.jsx("div",{className:"settings-footer",children:A.jsx("button",{className:`save-button ${p}`,onClick:U,disabled:p!=="idle",children:p==="saving"?"Saving...":p==="success"?"Done ":"Save"})})]})},ES={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},TS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Wk=()=>{var X,ie;const n=fi(),{teams:e,fetched:t,loading:a}=yt(Y=>Y.teams),{positions:s,fetched:l,loading:c}=yt(Y=>Y.positions),[d,p]=P.useState(e),[g,v]=P.useState(ES),[E,b]=P.useState("idle");P.useEffect(()=>{t||n(pl()),l||n(to())},[n,t,l]),P.useEffect(()=>{p(e)},[e]);const C=(Y,S,w)=>{const I=[...d];I[Y]={...I[Y],[S]:w},p(I)},U=(Y,S)=>{const w=[...d],I=S==="up"?Y-1:Y+1;if(I<0||I>=w.length)return;const N=w[Y];w[Y]=w[I],w[I]=N,p(w)},B=(Y,S)=>{const w=d.map((I,N)=>{if(N!==Y)return I;const O=I.positions||[],M=O.find(x=>x.name===S.name)?O.filter(x=>x.name!==S.name):[...O,S];return{...I,positions:M}});p(w)},V=(Y,S)=>{const w=d.map((I,N)=>{if(N!==Y)return I;const O=I.preferredDays||[],M=O.includes(S)?O.filter(x=>x!==S):[...O,S];return{...I,preferredDays:M}});p(w)},q=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),v(ES)},H=Y=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((S,w)=>w!==Y))},F=async()=>{b("saving");try{await n(If(d)).unwrap(),b("success"),setTimeout(()=>b("idle"),2e3)}catch(Y){console.error("Save Error:",Y),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),b("idle")}};return a||c?A.jsx(Ll,{}):A.jsxs(A.Fragment,{children:[A.jsxs(Ev,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((Y,S)=>{var w,I;return A.jsxs("tr",{children:[A.jsxs(on,{children:[" ",A.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>U(S,"up"),disabled:S===0,children:""}),A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>U(S,"down"),disabled:S===d.length-1,children:""})]})]}),A.jsx(Gr,{name:`team-emoji-${S}`,value:Y.emoji,onChange:N=>C(S,"emoji",N.target.value)}),A.jsx(Gr,{name:`team-name-${S}`,value:Y.name,onChange:N=>C(S,"name",N.target.value)}),A.jsx(Gr,{name:`team-maxConflict-${S}`,value:((w=Y.maxConflict)==null?void 0:w.toString())||"1",type:"number",onChange:N=>C(S,"maxConflict",parseInt(N.target.value)||1)}),A.jsx(on,{children:A.jsx(Di,{nowrap:!0,children:(I=s==null?void 0:s.filter(N=>!N.parentId))==null?void 0:I.map(N=>{var M;const O=(M=Y.positions)==null?void 0:M.some(x=>x.name===N.name);return A.jsx(Wn,{colour:N.colour,isActive:O,onClick:()=>B(S,N),children:N.emoji},N.name)})})}),A.jsx(on,{children:A.jsx(Di,{nowrap:!0,children:TS.map(N=>{var M;const O=(M=Y.preferredDays)==null?void 0:M.includes(N);return A.jsx(Wn,{isActive:O,onClick:()=>V(S,N),children:N.substring(0,3)},N)})})}),A.jsx(on,{children:A.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>H(S),children:""})})]},`${Y.emoji}-${S}`)}),A.jsxs("tr",{className:"team-row-new",children:[A.jsx("td",{className:"",children:""}),A.jsx(Gr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:Y=>v({...g,emoji:Y.target.value})}),A.jsx(Gr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:Y=>v({...g,name:Y.target.value})}),A.jsx(Gr,{name:"new-team-maxConflict",value:((X=g.maxConflict)==null?void 0:X.toString())||"1",type:"number",onChange:Y=>v({...g,maxConflict:parseInt(Y.target.value)||1})}),A.jsx(on,{children:A.jsx(Di,{nowrap:!0,children:(ie=s==null?void 0:s.filter(Y=>!Y.parentId))==null?void 0:ie.map(Y=>{var w;const S=(w=g.positions)==null?void 0:w.some(I=>I.name===Y.name);return A.jsx(Wn,{colour:Y.colour,isActive:S,onClick:()=>v(I=>{const N=I.positions||[],O=N.some(M=>M.name===Y.name)?N.filter(M=>M.name!==Y.name):[...N,Y];return{...I,positions:O}}),children:Y.emoji},`new-${Y.name}`)})})}),A.jsx(on,{children:A.jsx(Di,{nowrap:!0,children:TS.map(Y=>{var w;const S=(w=g.preferredDays)==null?void 0:w.includes(Y);return A.jsx(Wn,{isActive:S,onClick:()=>v(I=>{const N=I.preferredDays||[],O=N.includes(Y)?N.filter(M=>M!==Y):[...N,Y];return{...I,preferredDays:O}}),children:Y.substring(0,3)},`new-team-${Y}`)})})}),A.jsx(on,{children:A.jsx("button",{onClick:q,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),A.jsx("div",{className:"settings-footer",children:A.jsx("button",{className:`save-button ${E}`,onClick:F,disabled:E!=="idle",children:E==="saving"?"Saving...":E==="success"?"Done ":"Save All Team Changes"})})]})},Jk={allUsers:[],loading:!1,saving:!1,error:null},Pf=xr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Rc(En,"users"),a=Dc(t),s=await xc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),Lf=xr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=Zw(En);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=t1(l.teamPositions)),t.update(Yr(En,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),i1=mo({name:"userManagement",initialState:Jk,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}}},extraReducers:n=>{n.addCase(Pf.pending,e=>{e.loading=!0,e.error=null}).addCase(Pf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.loading=!1}).addCase(Pf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Lf.pending,e=>{e.saving=!0,e.error=null}).addCase(Lf.fulfilled,e=>{e.saving=!1}).addCase(Lf.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:Zk,toggleUserTeam:eU,toggleUserTeamPosition:tU}=i1.actions,nU=i1.reducer,rU=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=fi(),s=(p,g)=>{a(Zk({id:n.id,field:p,value:g}))},l=p=>{a(eU({userId:n.id,teamName:p}))},c=(p,g)=>{a(tU({userId:n.id,teamName:p,posName:g}))};return A.jsxs("tr",{children:[A.jsx(Gr,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),A.jsx(Gr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),A.jsx(on,{children:A.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[A.jsx("option",{value:"",children:"-"}),A.jsx("option",{value:"Male",children:"Male"}),A.jsx("option",{value:"Female",children:"Female"})]})}),A.jsx(on,{children:A.jsx(Di,{children:e.map(p=>{var v;const g=(v=n.teams)==null?void 0:v.includes(p.name);return A.jsxs(Wn,{onClick:()=>l(p.name),isActive:g,children:[A.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),A.jsx(on,{children:(d=n.teams)==null?void 0:d.map(p=>{var v,E;const g=e.find(b=>b.name===p);return g?A.jsxs("div",{style:{marginBottom:"12px"},children:[A.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),A.jsx(Di,{children:(E=(v=g.positions)==null?void 0:v.filter(b=>!b.parentId))==null?void 0:E.map(b=>{var U,B;const C=(B=(U=n.teamPositions)==null?void 0:U[p])==null?void 0:B.includes(b.name);return A.jsx(Wn,{colour:b.colour,isActive:C,onClick:()=>c(p,b.name),children:b.emoji},b.name)})})]},p):null})}),A.jsx(on,{children:A.jsx(Wn,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),A.jsx(on,{children:A.jsx(Wn,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),A.jsx(on,{children:A.jsx(Wn,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},iU=()=>{const n=fi(),{allUsers:e,loading:t,saving:a,error:s}=yt(d=>d.userManagement),l=yt(d=>d.teams.teams);P.useEffect(()=>{n(Pf())},[n]);const c=()=>{n(Lf(e))};return t?A.jsx(Ll,{}):s?A.jsxs("div",{children:["Error: ",s]}):A.jsxs(A.Fragment,{children:[A.jsx(Ev,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(d=>A.jsx(rU,{user:d,availableTeams:l,adminEmail:"chris.sm.kang542@gmail.com"},d.id))}),A.jsx("div",{className:"settings-footer",children:A.jsx("button",{className:`save-button ${a?"saving":""}`,onClick:c,disabled:a,children:a?"Saving Changes...":"Save All User Changes"})})]})},aU=()=>{const{userData:n}=yt(t=>t.auth),{section:e}=yd();return n?A.jsxs("div",{className:"settings-container",children:[e===ll.PROFILE&&A.jsx(r1,{}),e===ll.USER_MANAGEMENT&&(n.isAdmin?A.jsx(iU,{}):A.jsx("p",{children:"Access Denied"})),e===ll.TEAMS&&(n.isAdmin?A.jsx(Wk,{}):A.jsx("p",{children:"Access Denied"})),e===ll.POSITIONS&&(n.isAdmin?A.jsx(Xk,{}):A.jsx("p",{children:"Access Denied"}))]}):null},sU=[{path:"/",element:A.jsx(Z4,{})},{path:"/login",element:A.jsx($k,{})},{path:"/guest",element:A.jsx(Gk,{})},{path:"/app",element:A.jsx(tk,{}),children:[{path:"",element:A.jsx(Ik,{}),children:[{path:"dashboard",element:A.jsx(jk,{})},{path:"roster/:teamName?/:positionName?",element:A.jsx(Yk,{})},{path:"settings/:section?",element:A.jsx(aU,{})}]}]}];let bS=!1;const oU=n=>{if(!bS){bS=!0;let e;LP(wl,t=>{if(t){n.dispatch(Bk(t)),n.dispatch(Mf(t.uid));const a=Yr(En,"users",t.uid);e=$V(a,s=>{if(s.exists()){const l=s.data();n.dispatch(Fk(l))}})}else n.dispatch(Hk()),e&&e()})}return e=>t=>e(t)},lU=NL({reducer:{auth:qk,positions:JL,roster:Ok,rosterView:Uk,teams:ek,ui:Sk,userManagement:nU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(oU)}),uU=DN(sU);YC.createRoot(document.getElementById("root")).render(A.jsx(AS.StrictMode,{children:A.jsx(uI,{store:lU,children:A.jsx(GN,{children:A.jsx(J4,{children:A.jsx(HN,{router:uU})})})})}));
