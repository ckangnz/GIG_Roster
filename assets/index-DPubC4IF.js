var QI=Object.defineProperty;var XI=(n,e,t)=>e in n?QI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var kg=(n,e,t)=>XI(n,typeof e!="symbol"?e+"":e,t);function WI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(n,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function RA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vg={exports:{}},uu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function JI(){if(Bb)return uu;Bb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:l}}return uu.Fragment=e,uu.jsx=t,uu.jsxs=t,uu}var Hb;function ZI(){return Hb||(Hb=1,Vg.exports=JI()),Vg.exports}var E=ZI(),Lg={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function ex(){if(Fb)return Ke;Fb=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function w(j){return j===null||typeof j!="object"?null:(j=b&&j[b]||j["@@iterator"],typeof j=="function"?j:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,N={};function L(j,W,oe){this.props=j,this.context=W,this.refs=N,this.updater=oe||M}L.prototype.isReactComponent={},L.prototype.setState=function(j,W){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,W,"setState")},L.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function V(){}V.prototype=L.prototype;function U(j,W,oe){this.props=j,this.context=W,this.refs=N,this.updater=oe||M}var q=U.prototype=new V;q.constructor=U,z(q,L.prototype),q.isPureReactComponent=!0;var Y=Array.isArray;function Q(){}var A={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function R(j,W,oe){var me=oe.ref;return{$$typeof:n,type:j,key:W,ref:me!==void 0?me:null,props:oe}}function k(j,W){return R(j.type,W,j.props)}function P(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function F(j){var W={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(oe){return W[oe]})}var x=/\/+/g;function ue(j,W){return typeof j=="object"&&j!==null&&j.key!=null?F(""+j.key):W.toString(36)}function ye(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Q,Q):(j.status="pending",j.then(function(W){j.status==="pending"&&(j.status="fulfilled",j.value=W)},function(W){j.status==="pending"&&(j.status="rejected",j.reason=W)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function $(j,W,oe,me,_e){var Ae=typeof j;(Ae==="undefined"||Ae==="boolean")&&(j=null);var Oe=!1;if(j===null)Oe=!0;else switch(Ae){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(j.$$typeof){case n:case e:Oe=!0;break;case y:return Oe=j._init,$(Oe(j._payload),W,oe,me,_e)}}if(Oe)return _e=_e(j),Oe=me===""?"."+ue(j,0):me,Y(_e)?(oe="",Oe!=null&&(oe=Oe.replace(x,"$&/")+"/"),$(_e,W,oe,"",function(Tn){return Tn})):_e!=null&&(P(_e)&&(_e=k(_e,oe+(_e.key==null||j&&j.key===_e.key?"":(""+_e.key).replace(x,"$&/")+"/")+Oe)),W.push(_e)),1;Oe=0;var qe=me===""?".":me+":";if(Y(j))for(var nt=0;nt<j.length;nt++)me=j[nt],Ae=qe+ue(me,nt),Oe+=$(me,W,oe,Ae,_e);else if(nt=w(j),typeof nt=="function")for(j=nt.call(j),nt=0;!(me=j.next()).done;)me=me.value,Ae=qe+ue(me,nt++),Oe+=$(me,W,oe,Ae,_e);else if(Ae==="object"){if(typeof j.then=="function")return $(ye(j),W,oe,me,_e);throw W=String(j),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function he(j,W,oe){if(j==null)return j;var me=[],_e=0;return $(j,me,"","",function(Ae){return W.call(oe,Ae,_e++)}),me}function ge(j){if(j._status===-1){var W=j._result;W=W(),W.then(function(oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=oe)},function(oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=oe)}),j._status===-1&&(j._status=0,j._result=W)}if(j._status===1)return j._result.default;throw j._result}var ke=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},de={map:he,forEach:function(j,W,oe){he(j,function(){W.apply(this,arguments)},oe)},count:function(j){var W=0;return he(j,function(){W++}),W},toArray:function(j){return he(j,function(W){return W})||[]},only:function(j){if(!P(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Ke.Activity=v,Ke.Children=de,Ke.Component=L,Ke.Fragment=t,Ke.Profiler=a,Ke.PureComponent=U,Ke.StrictMode=i,Ke.Suspense=m,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(j){return A.H.useMemoCache(j)}},Ke.cache=function(j){return function(){return j.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(j,W,oe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var me=z({},j.props),_e=j.key;if(W!=null)for(Ae in W.key!==void 0&&(_e=""+W.key),W)!C.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(me[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)me.children=oe;else if(1<Ae){for(var Oe=Array(Ae),qe=0;qe<Ae;qe++)Oe[qe]=arguments[qe+2];me.children=Oe}return R(j.type,_e,me)},Ke.createContext=function(j){return j={$$typeof:u,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},Ke.createElement=function(j,W,oe){var me,_e={},Ae=null;if(W!=null)for(me in W.key!==void 0&&(Ae=""+W.key),W)C.call(W,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(_e[me]=W[me]);var Oe=arguments.length-2;if(Oe===1)_e.children=oe;else if(1<Oe){for(var qe=Array(Oe),nt=0;nt<Oe;nt++)qe[nt]=arguments[nt+2];_e.children=qe}if(j&&j.defaultProps)for(me in Oe=j.defaultProps,Oe)_e[me]===void 0&&(_e[me]=Oe[me]);return R(j,Ae,_e)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(j){return{$$typeof:f,render:j}},Ke.isValidElement=P,Ke.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:ge}},Ke.memo=function(j,W){return{$$typeof:p,type:j,compare:W===void 0?null:W}},Ke.startTransition=function(j){var W=A.T,oe={};A.T=oe;try{var me=j(),_e=A.S;_e!==null&&_e(oe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(Q,ke)}catch(Ae){ke(Ae)}finally{W!==null&&oe.types!==null&&(W.types=oe.types),A.T=W}},Ke.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ke.use=function(j){return A.H.use(j)},Ke.useActionState=function(j,W,oe){return A.H.useActionState(j,W,oe)},Ke.useCallback=function(j,W){return A.H.useCallback(j,W)},Ke.useContext=function(j){return A.H.useContext(j)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(j,W){return A.H.useDeferredValue(j,W)},Ke.useEffect=function(j,W){return A.H.useEffect(j,W)},Ke.useEffectEvent=function(j){return A.H.useEffectEvent(j)},Ke.useId=function(){return A.H.useId()},Ke.useImperativeHandle=function(j,W,oe){return A.H.useImperativeHandle(j,W,oe)},Ke.useInsertionEffect=function(j,W){return A.H.useInsertionEffect(j,W)},Ke.useLayoutEffect=function(j,W){return A.H.useLayoutEffect(j,W)},Ke.useMemo=function(j,W){return A.H.useMemo(j,W)},Ke.useOptimistic=function(j,W){return A.H.useOptimistic(j,W)},Ke.useReducer=function(j,W,oe){return A.H.useReducer(j,W,oe)},Ke.useRef=function(j){return A.H.useRef(j)},Ke.useState=function(j){return A.H.useState(j)},Ke.useSyncExternalStore=function(j,W,oe){return A.H.useSyncExternalStore(j,W,oe)},Ke.useTransition=function(){return A.H.useTransition()},Ke.version="19.2.4",Ke}var qb;function Zd(){return qb||(qb=1,Lg.exports=ex()),Lg.exports}var O=Zd();const IA=RA(O),tx=WI({__proto__:null,default:IA},[O]);var jg={exports:{}},hu={},Ug={exports:{}},zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb;function nx(){return Gb||(Gb=1,(function(n){function e($,he){var ge=$.length;$.push(he);e:for(;0<ge;){var ke=ge-1>>>1,de=$[ke];if(0<a(de,he))$[ke]=he,$[ge]=de,ge=ke;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var he=$[0],ge=$.pop();if(ge!==he){$[0]=ge;e:for(var ke=0,de=$.length,j=de>>>1;ke<j;){var W=2*(ke+1)-1,oe=$[W],me=W+1,_e=$[me];if(0>a(oe,ge))me<de&&0>a(_e,oe)?($[ke]=_e,$[me]=ge,ke=me):($[ke]=oe,$[W]=ge,ke=W);else if(me<de&&0>a(_e,ge))$[ke]=_e,$[me]=ge,ke=me;else break e}}return he}function a($,he){var ge=$.sortIndex-he.sortIndex;return ge!==0?ge:$.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var m=[],p=[],y=1,v=null,b=3,w=!1,M=!1,z=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function q($){for(var he=t(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=$)i(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(p)}}function Y($){if(z=!1,q($),!M)if(t(m)!==null)M=!0,Q||(Q=!0,F());else{var he=t(p);he!==null&&ye(Y,he.startTime-$)}}var Q=!1,A=-1,C=5,R=-1;function k(){return N?!0:!(n.unstable_now()-R<C)}function P(){if(N=!1,Q){var $=n.unstable_now();R=$;var he=!0;try{e:{M=!1,z&&(z=!1,V(A),A=-1),w=!0;var ge=b;try{t:{for(q($),v=t(m);v!==null&&!(v.expirationTime>$&&k());){var ke=v.callback;if(typeof ke=="function"){v.callback=null,b=v.priorityLevel;var de=ke(v.expirationTime<=$);if($=n.unstable_now(),typeof de=="function"){v.callback=de,q($),he=!0;break t}v===t(m)&&i(m),q($)}else i(m);v=t(m)}if(v!==null)he=!0;else{var j=t(p);j!==null&&ye(Y,j.startTime-$),he=!1}}break e}finally{v=null,b=ge,w=!1}he=void 0}}finally{he?F():Q=!1}}}var F;if(typeof U=="function")F=function(){U(P)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,ue=x.port2;x.port1.onmessage=P,F=function(){ue.postMessage(null)}}else F=function(){L(P,0)};function ye($,he){A=L(function(){$(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function($){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var ge=b;b=he;try{return $()}finally{b=ge}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function($,he){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ge=b;b=$;try{return he()}finally{b=ge}},n.unstable_scheduleCallback=function($,he,ge){var ke=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ke+ge:ke):ge=ke,$){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ge+de,$={id:y++,callback:he,priorityLevel:$,startTime:ge,expirationTime:de,sortIndex:-1},ge>ke?($.sortIndex=ge,e(p,$),t(m)===null&&$===t(p)&&(z?(V(A),A=-1):z=!0,ye(Y,ge-ke))):($.sortIndex=de,e(m,$),M||w||(M=!0,Q||(Q=!0,F()))),$},n.unstable_shouldYield=k,n.unstable_wrapCallback=function($){var he=b;return function(){var ge=b;b=he;try{return $.apply(this,arguments)}finally{b=ge}}}})(zg)),zg}var $b;function rx(){return $b||($b=1,Ug.exports=nx()),Ug.exports}var Bg={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kb;function ix(){if(Kb)return $n;Kb=1;var n=Zd();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$n.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,y)},$n.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},$n.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},$n.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},$n.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,w=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:w}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:w,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},$n.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},$n.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},$n.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},$n.requestFormReset=function(m){i.d.r(m)},$n.unstable_batchedUpdates=function(m,p){return m(p)},$n.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},$n.useFormStatus=function(){return u.H.useHostTransitionStatus()},$n.version="19.2.4",$n}var Yb;function xA(){if(Yb)return Bg.exports;Yb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bg.exports=ix(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qb;function sx(){if(Qb)return hu;Qb=1;var n=rx(),e=Zd(),t=xA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,c=s;;){var d=o.return;if(d===null)break;var g=d.alternate;if(g===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===o)return m(d),r;if(g===c)return m(d),s;g=g.sibling}throw Error(i(188))}if(o.return!==c.return)o=d,c=g;else{for(var T=!1,I=d.child;I;){if(I===o){T=!0,o=d,c=g;break}if(I===c){T=!0,c=d,o=g;break}I=I.sibling}if(!T){for(I=g.child;I;){if(I===o){T=!0,o=g,c=d;break}if(I===c){T=!0,c=g,o=d;break}I=I.sibling}if(!T)throw Error(i(189))}}if(o.alternate!==c)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function y(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=y(r),s!==null)return s;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=P&&r[P]||r["@@iterator"],typeof r=="function"?r:null)}var x=Symbol.for("react.client.reference");function ue(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===x?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case z:return"Fragment";case L:return"Profiler";case N:return"StrictMode";case Y:return"Suspense";case Q:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case M:return"Portal";case U:return r.displayName||"Context";case V:return(r._context.displayName||"Context")+".Consumer";case q:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case A:return s=r.displayName||null,s!==null?s:ue(r.type)||"Memo";case C:s=r._payload,r=r._init;try{return ue(r(s))}catch{}}return null}var ye=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ke=[],de=-1;function j(r){return{current:r}}function W(r){0>de||(r.current=ke[de],ke[de]=null,de--)}function oe(r,s){de++,ke[de]=r.current,r.current=s}var me=j(null),_e=j(null),Ae=j(null),Oe=j(null);function qe(r,s){switch(oe(Ae,s),oe(_e,r),oe(me,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?ub(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=ub(s),r=hb(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}W(me),oe(me,r)}function nt(){W(me),W(_e),W(Ae)}function Tn(r){r.memoizedState!==null&&oe(Oe,r);var s=me.current,o=hb(s,r.type);s!==o&&(oe(_e,r),oe(me,o))}function Sr(r){_e.current===r&&(W(me),W(_e)),Oe.current===r&&(W(Oe),au._currentValue=ge)}var Et,en;function bn(r){if(Et===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Et=s&&s[1]||"",en=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+r+en}var oi=!1;function Ee(r,s){if(!r||oi)return"";oi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ie){var ne=ie}Reflect.construct(r,[],ce)}else{try{ce.call()}catch(ie){ne=ie}r.call(ce.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(ce=r())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],I=g[1];if(T&&I){var H=T.split(`
`),ee=I.split(`
`);for(d=c=0;c<H.length&&!H[c].includes("DetermineComponentFrameRoot");)c++;for(;d<ee.length&&!ee[d].includes("DetermineComponentFrameRoot");)d++;if(c===H.length||d===ee.length)for(c=H.length-1,d=ee.length-1;1<=c&&0<=d&&H[c]!==ee[d];)d--;for(;1<=c&&0<=d;c--,d--)if(H[c]!==ee[d]){if(c!==1||d!==1)do if(c--,d--,0>d||H[c]!==ee[d]){var se=`
`+H[c].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=c&&0<=d);break}}}finally{oi=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?bn(o):""}function Ue(r,s){switch(r.tag){case 26:case 27:case 5:return bn(r.type);case 16:return bn("Lazy");case 13:return r.child!==s&&s!==null?bn("Suspense Fallback"):bn("Suspense");case 19:return bn("SuspenseList");case 0:case 15:return Ee(r.type,!1);case 11:return Ee(r.type.render,!1);case 1:return Ee(r.type,!0);case 31:return bn("Activity");default:return""}}function Xe(r){try{var s="",o=null;do s+=Ue(r,o),o=r,r=r.return;while(r);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var He=Object.prototype.hasOwnProperty,at=n.unstable_scheduleCallback,qt=n.unstable_cancelCallback,zr=n.unstable_shouldYield,hn=n.unstable_requestPaint,rt=n.unstable_now,Sn=n.unstable_getCurrentPriorityLevel,On=n.unstable_ImmediatePriority,Br=n.unstable_UserBlockingPriority,an=n.unstable_NormalPriority,Fn=n.unstable_LowPriority,Zn=n.unstable_IdlePriority,zo=n.log,Vs=n.unstable_setDisableYieldValue,Ar=null,Pt=null;function er(r){if(typeof zo=="function"&&Vs(r),Pt&&typeof Pt.setStrictMode=="function")try{Pt.setStrictMode(Ar,r)}catch{}}var Gt=Math.clz32?Math.clz32:qa,Fa=Math.log,Ls=Math.LN2;function qa(r){return r>>>=0,r===0?32:31-(Fa(r)/Ls|0)|0}var tr=256,Si=262144,$t=4194304;function Hr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function wr(r,s,o){var c=r.pendingLanes;if(c===0)return 0;var d=0,g=r.suspendedLanes,T=r.pingedLanes;r=r.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?d=Hr(c):(T&=I,T!==0?d=Hr(T):o||(o=I&~r,o!==0&&(d=Hr(o))))):(I=c&~g,I!==0?d=Hr(I):T!==0?d=Hr(T):o||(o=c&~r,o!==0&&(d=Hr(o)))),d===0?0:s!==0&&s!==d&&(s&g)===0&&(g=d&-d,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:d}function Cr(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Bo(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yi(){var r=$t;return $t<<=1,($t&62914560)===0&&($t=4194304),r}function nr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Ai(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function _c(r,s,o,c,d,g){var T=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var I=r.entanglements,H=r.expirationTimes,ee=r.hiddenUpdates;for(o=T&~o;0<o;){var se=31-Gt(o),ce=1<<se;I[se]=0,H[se]=-1;var ne=ee[se];if(ne!==null)for(ee[se]=null,se=0;se<ne.length;se++){var ie=ne[se];ie!==null&&(ie.lane&=-536870913)}o&=~ce}c!==0&&Qi(r,c,0),g!==0&&d===0&&r.tag!==0&&(r.suspendedLanes|=g&~(T&~s))}function Qi(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-Gt(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|o&261930}function B(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var c=31-Gt(o),d=1<<c;d&s|r[c]&s&&(r[c]|=s),o&=~d}}function K(r,s){var o=s&-s;return o=(o&42)!==0?1:te(o),(o&(r.suspendedLanes|s))!==0?0:o}function te(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function pe(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ve(){var r=he.p;return r!==0?r:(r=window.event,r===void 0?32:Pb(r.type))}function Ce(r,s){var o=he.p;try{return he.p=r,s()}finally{he.p=o}}var xe=Math.random().toString(36).slice(2),Te="__reactFiber$"+xe,Se="__reactProps$"+xe,Ie="__reactContainer$"+xe,ze="__reactEvents$"+xe,Me="__reactListeners$"+xe,Ge="__reactHandles$"+xe,it="__reactResources$"+xe,It="__reactMarker$"+xe;function zt(r){delete r[Te],delete r[Se],delete r[ze],delete r[Me],delete r[Ge]}function Vt(r){var s=r[Te];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Ie]||o[Te]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=_b(r);r!==null;){if(o=r[Te])return o;r=_b(r)}return s}r=o,o=r.parentNode}return null}function Ze(r){if(r=r[Te]||r[Ie]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Lt(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Rn(r){var s=r[it];return s||(s=r[it]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function jt(r){r[It]=!0}var cr=new Set,qn={};function ur(r,s){Gn(r,s),Gn(r+"Capture",s)}function Gn(r,s){for(qn[r]=s,r=0;r<s.length;r++)cr.add(s[r])}var Rr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wi={},Ci={};function ot(r){return He.call(Ci,r)?!0:He.call(wi,r)?!1:Rr.test(r)?Ci[r]=!0:(wi[r]=!0,!1)}function Xt(r,s,o){if(ot(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function fn(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function xt(r,s,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+c)}}function et(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ir(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function js(r,s,o){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,g=c.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return d.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(r,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Tt(r){if(!r._valueTracker){var s=Ir(r)?"checked":"value";r._valueTracker=js(r,s,""+r[s])}}function Ga(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return r&&(c=Ir(r)?r.checked?"true":"false":r.value),r=c,r!==o?(s.setValue(r),!0):!1}function Ri(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var $a=/[\n"\\]/g;function hr(r){return r.replace($a,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ho(r,s,o,c,d,g,T,I){r.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?r.type=T:r.removeAttribute("type"),s!=null?T==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+et(s)):r.value!==""+et(s)&&(r.value=""+et(s)):T!=="submit"&&T!=="reset"||r.removeAttribute("value"),s!=null?vc(r,T,et(s)):o!=null?vc(r,T,et(o)):c!=null&&r.removeAttribute("value"),d==null&&g!=null&&(r.defaultChecked=!!g),d!=null&&(r.checked=d&&typeof d!="function"&&typeof d!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+et(I):r.removeAttribute("name")}function vh(r,s,o,c,d,g,T,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Tt(r);return}o=o!=null?""+et(o):"",s=s!=null?""+et(s):o,I||s===r.value||(r.value=s),r.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=I?r.checked:!!c,r.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(r.name=T),Tt(r)}function vc(r,s,o){s==="number"&&Ri(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Us(r,s,o,c){if(r=r.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<r.length;o++)d=s.hasOwnProperty("$"+r[o].value),r[o].selected!==d&&(r[o].selected=d),d&&c&&(r[o].defaultSelected=!0)}else{for(o=""+et(o),s=null,d=0;d<r.length;d++){if(r[d].value===o){r[d].selected=!0,c&&(r[d].defaultSelected=!0);return}s!==null||r[d].disabled||(s=r[d])}s!==null&&(s.selected=!0)}}function Eh(r,s,o){if(s!=null&&(s=""+et(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+et(o):""}function zs(r,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(i(92));if(ye(c)){if(1<c.length)throw Error(i(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=et(s),r.defaultValue=o,c=r.textContent,c===o&&c!==""&&c!==null&&(r.value=c),Tt(r)}function fr(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Th=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ec(r,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,o):typeof o!="number"||o===0||Th.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Tc(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&o[d]!==c&&Ec(r,d,c)}else for(var g in s)s.hasOwnProperty(g)&&Ec(r,g,s[g])}function Fo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(r){return Bs.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function li(){}var bc=null;function Fr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Hs=null,Ii=null;function Ka(r){var s=Ze(r);if(s&&(r=s.stateNode)){var o=r[Se]||null;e:switch(r=s.stateNode,s.type){case"input":if(Ho(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+hr(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==r&&c.form===r.form){var d=c[Se]||null;if(!d)throw Error(i(90));Ho(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===r.form&&Ga(c)}break e;case"textarea":Eh(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Us(r,!!o.multiple,s,!1)}}}var Go=!1;function Fs(r,s,o){if(Go)return r(s,o);Go=!0;try{var c=r(s);return c}finally{if(Go=!1,(Hs!==null||Ii!==null)&&(gf(),Hs&&(s=Hs,r=Ii,Ii=Hs=null,Ka(s),r)))for(s=0;s<r.length;s++)Ka(r[s])}}function ci(r,s){var o=r.stateNode;if(o===null)return null;var c=o[Se]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(qr)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{Ya=!1}var xi=null,Sc=null,Qa=null;function Ac(){if(Qa)return Qa;var r,s=Sc,o=s.length,c,d="value"in xi?xi.value:xi.textContent,g=d.length;for(r=0;r<o&&s[r]===d[r];r++);var T=o-r;for(c=1;c<=T&&s[o-c]===d[g-c];c++);return Qa=d.slice(r,1<c?1-c:void 0)}function Xa(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Xi(){return!0}function ui(){return!1}function Mn(r){function s(o,c,d,g,T){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(o=r[I],this[I]=o?o(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Xi:ui,this.isPropagationStopped=ui,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),s}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=Mn(Wi),qs=v({},Wi,{view:0,detail:0}),wc=Mn(qs),Gs,$o,Di,Ko=v({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$s,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Di&&(Di&&r.type==="mousemove"?(Gs=r.screenX-Di.screenX,$o=r.screenY-Di.screenY):$o=Gs=0,Di=r),Gs)},movementY:function(r){return"movementY"in r?r.movementY:$o}}),Cc=Mn(Ko),Wa=v({},Ko,{dataTransfer:0}),Sh=Mn(Wa),Ah=v({},qs,{relatedTarget:0}),Ja=Mn(Ah),Rc=v({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),wh=Mn(Rc),Yo=v({},Wi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ch=Mn(Yo),Rh=v({},Wi,{data:0}),Oi=Mn(Rh),Ih={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Dh(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Nh[r])?!!s[r]:!1}function $s(){return Dh}var rr=v({},qs,{key:function(r){if(r.key){var s=Ih[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Xa(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?xh[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$s,charCode:function(r){return r.type==="keypress"?Xa(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Xa(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Oh=Mn(rr),Mh=v({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ji=Mn(Mh),h=v({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$s}),_=Mn(h),S=v({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=Mn(S),J=v({},Ko,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=Mn(J),be=v({},Wi,{newState:0,oldState:0}),We=Mn(be),on=[9,13,27,32],bt=qr&&"CompositionEvent"in window,Kt=null;qr&&"documentMode"in document&&(Kt=document.documentMode);var Gr=qr&&"TextEvent"in window&&!Kt,Mi=qr&&(!bt||Kt&&8<Kt&&11>=Kt),hi=" ",fi=!1;function Za(r,s){switch(r){case"keyup":return on.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qo(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Xo=!1;function vR(r,s){switch(r){case"compositionend":return Qo(s);case"keypress":return s.which!==32?null:(fi=!0,hi);case"textInput":return r=s.data,r===hi&&fi?null:r;default:return null}}function ER(r,s){if(Xo)return r==="compositionend"||!bt&&Za(r,s)?(r=Ac(),Qa=Sc=xi=null,Xo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Mi&&s.locale!=="ko"?null:s.data;default:return null}}var TR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tv(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!TR[r.type]:s==="textarea"}function bv(r,s,o,c){Hs?Ii?Ii.push(c):Ii=[c]:Hs=c,s=Sf(s,"onChange"),0<s.length&&(o=new Ni("onChange","change",null,o,c),r.push({event:o,listeners:s}))}var Ic=null,xc=null;function bR(r){ib(r,0)}function Ph(r){var s=Lt(r);if(Ga(s))return r}function Sv(r,s){if(r==="change")return s}var Av=!1;if(qr){var Hm;if(qr){var Fm="oninput"in document;if(!Fm){var wv=document.createElement("div");wv.setAttribute("oninput","return;"),Fm=typeof wv.oninput=="function"}Hm=Fm}else Hm=!1;Av=Hm&&(!document.documentMode||9<document.documentMode)}function Cv(){Ic&&(Ic.detachEvent("onpropertychange",Rv),xc=Ic=null)}function Rv(r){if(r.propertyName==="value"&&Ph(xc)){var s=[];bv(s,xc,r,Fr(r)),Fs(bR,s)}}function SR(r,s,o){r==="focusin"?(Cv(),Ic=s,xc=o,Ic.attachEvent("onpropertychange",Rv)):r==="focusout"&&Cv()}function AR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Ph(xc)}function wR(r,s){if(r==="click")return Ph(s)}function CR(r,s){if(r==="input"||r==="change")return Ph(s)}function RR(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var xr=typeof Object.is=="function"?Object.is:RR;function Nc(r,s){if(xr(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!He.call(s,d)||!xr(r[d],s[d]))return!1}return!0}function Iv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xv(r,s){var o=Iv(r);r=0;for(var c;o;){if(o.nodeType===3){if(c=r+o.textContent.length,r<=s&&c>=s)return{node:o,offset:s-r};r=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Iv(o)}}function Nv(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Nv(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Dv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ri(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Ri(r.document)}return s}function qm(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var IR=qr&&"documentMode"in document&&11>=document.documentMode,Wo=null,Gm=null,Dc=null,$m=!1;function Ov(r,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;$m||Wo==null||Wo!==Ri(c)||(c=Wo,"selectionStart"in c&&qm(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Dc&&Nc(Dc,c)||(Dc=c,c=Sf(Gm,"onSelect"),0<c.length&&(s=new Ni("onSelect","select",null,s,o),r.push({event:s,listeners:c}),s.target=Wo)))}function eo(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var Jo={animationend:eo("Animation","AnimationEnd"),animationiteration:eo("Animation","AnimationIteration"),animationstart:eo("Animation","AnimationStart"),transitionrun:eo("Transition","TransitionRun"),transitionstart:eo("Transition","TransitionStart"),transitioncancel:eo("Transition","TransitionCancel"),transitionend:eo("Transition","TransitionEnd")},Km={},Mv={};qr&&(Mv=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function to(r){if(Km[r])return Km[r];if(!Jo[r])return r;var s=Jo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in Mv)return Km[r]=s[o];return r}var Pv=to("animationend"),kv=to("animationiteration"),Vv=to("animationstart"),xR=to("transitionrun"),NR=to("transitionstart"),DR=to("transitioncancel"),Lv=to("transitionend"),jv=new Map,Ym="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ym.push("scrollEnd");function di(r,s){jv.set(r,s),ur(s,[r])}var kh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},$r=[],Zo=0,Qm=0;function Vh(){for(var r=Zo,s=Qm=Zo=0;s<r;){var o=$r[s];$r[s++]=null;var c=$r[s];$r[s++]=null;var d=$r[s];$r[s++]=null;var g=$r[s];if($r[s++]=null,c!==null&&d!==null){var T=c.pending;T===null?d.next=d:(d.next=T.next,T.next=d),c.pending=d}g!==0&&Uv(o,d,g)}}function Lh(r,s,o,c){$r[Zo++]=r,$r[Zo++]=s,$r[Zo++]=o,$r[Zo++]=c,Qm|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function Xm(r,s,o,c){return Lh(r,s,o,c),jh(r)}function no(r,s){return Lh(r,null,null,s),jh(r)}function Uv(r,s,o){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o);for(var d=!1,g=r.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(d=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,d&&s!==null&&(d=31-Gt(o),r=g.hiddenUpdates,c=r[d],c===null?r[d]=[s]:c.push(s),s.lane=o|536870912),g):null}function jh(r){if(50<Zc)throw Zc=0,sg=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var el={};function OR(r,s,o,c){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(r,s,o,c){return new OR(r,s,o,c)}function Wm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Zi(r,s){var o=r.alternate;return o===null?(o=Nr(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function zv(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function Uh(r,s,o,c,d,g){var T=0;if(c=r,typeof r=="function")Wm(r)&&(T=1);else if(typeof r=="string")T=LI(r,o,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Nr(31,o,s,d),r.elementType=R,r.lanes=g,r;case z:return ro(o.children,d,g,s);case N:T=8,d|=24;break;case L:return r=Nr(12,o,s,d|2),r.elementType=L,r.lanes=g,r;case Y:return r=Nr(13,o,s,d),r.elementType=Y,r.lanes=g,r;case Q:return r=Nr(19,o,s,d),r.elementType=Q,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case U:T=10;break e;case V:T=9;break e;case q:T=11;break e;case A:T=14;break e;case C:T=16,c=null;break e}T=29,o=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=Nr(T,o,s,d),s.elementType=r,s.type=c,s.lanes=g,s}function ro(r,s,o,c){return r=Nr(7,r,c,s),r.lanes=o,r}function Jm(r,s,o){return r=Nr(6,r,null,s),r.lanes=o,r}function Bv(r){var s=Nr(18,null,null,0);return s.stateNode=r,s}function Zm(r,s,o){return s=Nr(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Hv=new WeakMap;function Kr(r,s){if(typeof r=="object"&&r!==null){var o=Hv.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Xe(s)},Hv.set(r,s),s)}return{value:r,source:s,stack:Xe(s)}}var tl=[],nl=0,zh=null,Oc=0,Yr=[],Qr=0,Ks=null,Pi=1,ki="";function es(r,s){tl[nl++]=Oc,tl[nl++]=zh,zh=r,Oc=s}function Fv(r,s,o){Yr[Qr++]=Pi,Yr[Qr++]=ki,Yr[Qr++]=Ks,Ks=r;var c=Pi;r=ki;var d=32-Gt(c)-1;c&=~(1<<d),o+=1;var g=32-Gt(s)+d;if(30<g){var T=d-d%5;g=(c&(1<<T)-1).toString(32),c>>=T,d-=T,Pi=1<<32-Gt(s)+d|o<<d|c,ki=g+r}else Pi=1<<g|o<<d|c,ki=r}function ep(r){r.return!==null&&(es(r,1),Fv(r,1,0))}function tp(r){for(;r===zh;)zh=tl[--nl],tl[nl]=null,Oc=tl[--nl],tl[nl]=null;for(;r===Ks;)Ks=Yr[--Qr],Yr[Qr]=null,ki=Yr[--Qr],Yr[Qr]=null,Pi=Yr[--Qr],Yr[Qr]=null}function qv(r,s){Yr[Qr++]=Pi,Yr[Qr++]=ki,Yr[Qr++]=Ks,Pi=s.id,ki=s.overflow,Ks=r}var Pn=null,Bt=null,pt=!1,Ys=null,Xr=!1,np=Error(i(519));function Qs(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mc(Kr(s,r)),np}function Gv(r){var s=r.stateNode,o=r.type,c=r.memoizedProps;switch(s[Te]=r,s[Se]=c,o){case"dialog":ct("cancel",s),ct("close",s);break;case"iframe":case"object":case"embed":ct("load",s);break;case"video":case"audio":for(o=0;o<tu.length;o++)ct(tu[o],s);break;case"source":ct("error",s);break;case"img":case"image":case"link":ct("error",s),ct("load",s);break;case"details":ct("toggle",s);break;case"input":ct("invalid",s),vh(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ct("invalid",s);break;case"textarea":ct("invalid",s),zs(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||lb(s.textContent,o)?(c.popover!=null&&(ct("beforetoggle",s),ct("toggle",s)),c.onScroll!=null&&ct("scroll",s),c.onScrollEnd!=null&&ct("scrollend",s),c.onClick!=null&&(s.onclick=li),s=!0):s=!1,s||Qs(r,!0)}function $v(r){for(Pn=r.return;Pn;)switch(Pn.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:Pn=Pn.return}}function rl(r){if(r!==Pn)return!1;if(!pt)return $v(r),pt=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Eg(r.type,r.memoizedProps)),o=!o),o&&Bt&&Qs(r),$v(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Bt=yb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Bt=yb(r)}else s===27?(s=Bt,ca(r.type)?(r=wg,wg=null,Bt=r):Bt=s):Bt=Pn?Jr(r.stateNode.nextSibling):null;return!0}function io(){Bt=Pn=null,pt=!1}function rp(){var r=Ys;return r!==null&&(gr===null?gr=r:gr.push.apply(gr,r),Ys=null),r}function Mc(r){Ys===null?Ys=[r]:Ys.push(r)}var ip=j(null),so=null,ts=null;function Xs(r,s,o){oe(ip,s._currentValue),s._currentValue=o}function ns(r){r._currentValue=ip.current,W(ip)}function sp(r,s,o){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===o)break;r=r.return}}function ap(r,s,o,c){var d=r.child;for(d!==null&&(d.return=r);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var I=g;g=d;for(var H=0;H<s.length;H++)if(I.context===s[H]){g.lanes|=o,I=g.alternate,I!==null&&(I.lanes|=o),sp(g.return,o,r),c||(T=null);break e}g=I.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(i(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),sp(T,o,r),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===r){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function il(r,s,o,c){r=null;for(var d=s,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var I=d.type;xr(d.pendingProps.value,T.value)||(r!==null?r.push(I):r=[I])}}else if(d===Oe.current){if(T=d.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(r!==null?r.push(au):r=[au])}d=d.return}r!==null&&ap(s,r,o,c),s.flags|=262144}function Bh(r){for(r=r.firstContext;r!==null;){if(!xr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ao(r){so=r,ts=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function kn(r){return Kv(so,r)}function Hh(r,s){return so===null&&ao(r),Kv(r,s)}function Kv(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},ts===null){if(r===null)throw Error(i(308));ts=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else ts=ts.next=s;return o}var MR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},PR=n.unstable_scheduleCallback,kR=n.unstable_NormalPriority,dn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function op(){return{controller:new MR,data:new Map,refCount:0}}function Pc(r){r.refCount--,r.refCount===0&&PR(kR,function(){r.controller.abort()})}var kc=null,lp=0,sl=0,al=null;function VR(r,s){if(kc===null){var o=kc=[];lp=0,sl=hg(),al={status:"pending",value:void 0,then:function(c){o.push(c)}}}return lp++,s.then(Yv,Yv),s}function Yv(){if(--lp===0&&kc!==null){al!==null&&(al.status="fulfilled");var r=kc;kc=null,sl=0,al=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function LR(r,s){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var Qv=$.S;$.S=function(r,s){OT=rt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&VR(r,s),Qv!==null&&Qv(r,s)};var oo=j(null);function cp(){var r=oo.current;return r!==null?r:kt.pooledCache}function Fh(r,s){s===null?oe(oo,oo.current):oe(oo,s.pool)}function Xv(){var r=cp();return r===null?null:{parent:dn._currentValue,pool:r}}var ol=Error(i(460)),up=Error(i(474)),qh=Error(i(542)),Gh={then:function(){}};function Wv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Jv(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(li,li),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,eE(r),r;default:if(typeof s.status=="string")s.then(li,li);else{if(r=kt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,eE(r),r}throw co=s,ol}}function lo(r){try{var s=r._init;return s(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(co=o,ol):o}}var co=null;function Zv(){if(co===null)throw Error(i(459));var r=co;return co=null,r}function eE(r){if(r===ol||r===qh)throw Error(i(483))}var ll=null,Vc=0;function $h(r){var s=Vc;return Vc+=1,ll===null&&(ll=[]),Jv(ll,r,s)}function Lc(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Kh(r,s){throw s.$$typeof===b?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function tE(r){function s(X,G){if(r){var Z=X.deletions;Z===null?(X.deletions=[G],X.flags|=16):Z.push(G)}}function o(X,G){if(!r)return null;for(;G!==null;)s(X,G),G=G.sibling;return null}function c(X){for(var G=new Map;X!==null;)X.key!==null?G.set(X.key,X):G.set(X.index,X),X=X.sibling;return G}function d(X,G){return X=Zi(X,G),X.index=0,X.sibling=null,X}function g(X,G,Z){return X.index=Z,r?(Z=X.alternate,Z!==null?(Z=Z.index,Z<G?(X.flags|=67108866,G):Z):(X.flags|=67108866,G)):(X.flags|=1048576,G)}function T(X){return r&&X.alternate===null&&(X.flags|=67108866),X}function I(X,G,Z,ae){return G===null||G.tag!==6?(G=Jm(Z,X.mode,ae),G.return=X,G):(G=d(G,Z),G.return=X,G)}function H(X,G,Z,ae){var Ve=Z.type;return Ve===z?se(X,G,Z.props.children,ae,Z.key):G!==null&&(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===C&&lo(Ve)===G.type)?(G=d(G,Z.props),Lc(G,Z),G.return=X,G):(G=Uh(Z.type,Z.key,Z.props,null,X.mode,ae),Lc(G,Z),G.return=X,G)}function ee(X,G,Z,ae){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=Zm(Z,X.mode,ae),G.return=X,G):(G=d(G,Z.children||[]),G.return=X,G)}function se(X,G,Z,ae,Ve){return G===null||G.tag!==7?(G=ro(Z,X.mode,ae,Ve),G.return=X,G):(G=d(G,Z),G.return=X,G)}function ce(X,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Jm(""+G,X.mode,Z),G.return=X,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return Z=Uh(G.type,G.key,G.props,null,X.mode,Z),Lc(Z,G),Z.return=X,Z;case M:return G=Zm(G,X.mode,Z),G.return=X,G;case C:return G=lo(G),ce(X,G,Z)}if(ye(G)||F(G))return G=ro(G,X.mode,Z,null),G.return=X,G;if(typeof G.then=="function")return ce(X,$h(G),Z);if(G.$$typeof===U)return ce(X,Hh(X,G),Z);Kh(X,G)}return null}function ne(X,G,Z,ae){var Ve=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ve!==null?null:I(X,G,""+Z,ae);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:return Z.key===Ve?H(X,G,Z,ae):null;case M:return Z.key===Ve?ee(X,G,Z,ae):null;case C:return Z=lo(Z),ne(X,G,Z,ae)}if(ye(Z)||F(Z))return Ve!==null?null:se(X,G,Z,ae,null);if(typeof Z.then=="function")return ne(X,G,$h(Z),ae);if(Z.$$typeof===U)return ne(X,G,Hh(X,Z),ae);Kh(X,Z)}return null}function ie(X,G,Z,ae,Ve){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return X=X.get(Z)||null,I(G,X,""+ae,Ve);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case w:return X=X.get(ae.key===null?Z:ae.key)||null,H(G,X,ae,Ve);case M:return X=X.get(ae.key===null?Z:ae.key)||null,ee(G,X,ae,Ve);case C:return ae=lo(ae),ie(X,G,Z,ae,Ve)}if(ye(ae)||F(ae))return X=X.get(Z)||null,se(G,X,ae,Ve,null);if(typeof ae.then=="function")return ie(X,G,Z,$h(ae),Ve);if(ae.$$typeof===U)return ie(X,G,Z,Hh(G,ae),Ve);Kh(G,ae)}return null}function Ne(X,G,Z,ae){for(var Ve=null,yt=null,De=G,tt=G=0,ht=null;De!==null&&tt<Z.length;tt++){De.index>tt?(ht=De,De=null):ht=De.sibling;var _t=ne(X,De,Z[tt],ae);if(_t===null){De===null&&(De=ht);break}r&&De&&_t.alternate===null&&s(X,De),G=g(_t,G,tt),yt===null?Ve=_t:yt.sibling=_t,yt=_t,De=ht}if(tt===Z.length)return o(X,De),pt&&es(X,tt),Ve;if(De===null){for(;tt<Z.length;tt++)De=ce(X,Z[tt],ae),De!==null&&(G=g(De,G,tt),yt===null?Ve=De:yt.sibling=De,yt=De);return pt&&es(X,tt),Ve}for(De=c(De);tt<Z.length;tt++)ht=ie(De,X,tt,Z[tt],ae),ht!==null&&(r&&ht.alternate!==null&&De.delete(ht.key===null?tt:ht.key),G=g(ht,G,tt),yt===null?Ve=ht:yt.sibling=ht,yt=ht);return r&&De.forEach(function(ma){return s(X,ma)}),pt&&es(X,tt),Ve}function je(X,G,Z,ae){if(Z==null)throw Error(i(151));for(var Ve=null,yt=null,De=G,tt=G=0,ht=null,_t=Z.next();De!==null&&!_t.done;tt++,_t=Z.next()){De.index>tt?(ht=De,De=null):ht=De.sibling;var ma=ne(X,De,_t.value,ae);if(ma===null){De===null&&(De=ht);break}r&&De&&ma.alternate===null&&s(X,De),G=g(ma,G,tt),yt===null?Ve=ma:yt.sibling=ma,yt=ma,De=ht}if(_t.done)return o(X,De),pt&&es(X,tt),Ve;if(De===null){for(;!_t.done;tt++,_t=Z.next())_t=ce(X,_t.value,ae),_t!==null&&(G=g(_t,G,tt),yt===null?Ve=_t:yt.sibling=_t,yt=_t);return pt&&es(X,tt),Ve}for(De=c(De);!_t.done;tt++,_t=Z.next())_t=ie(De,X,tt,_t.value,ae),_t!==null&&(r&&_t.alternate!==null&&De.delete(_t.key===null?tt:_t.key),G=g(_t,G,tt),yt===null?Ve=_t:yt.sibling=_t,yt=_t);return r&&De.forEach(function(YI){return s(X,YI)}),pt&&es(X,tt),Ve}function Mt(X,G,Z,ae){if(typeof Z=="object"&&Z!==null&&Z.type===z&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case w:e:{for(var Ve=Z.key;G!==null;){if(G.key===Ve){if(Ve=Z.type,Ve===z){if(G.tag===7){o(X,G.sibling),ae=d(G,Z.props.children),ae.return=X,X=ae;break e}}else if(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===C&&lo(Ve)===G.type){o(X,G.sibling),ae=d(G,Z.props),Lc(ae,Z),ae.return=X,X=ae;break e}o(X,G);break}else s(X,G);G=G.sibling}Z.type===z?(ae=ro(Z.props.children,X.mode,ae,Z.key),ae.return=X,X=ae):(ae=Uh(Z.type,Z.key,Z.props,null,X.mode,ae),Lc(ae,Z),ae.return=X,X=ae)}return T(X);case M:e:{for(Ve=Z.key;G!==null;){if(G.key===Ve)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){o(X,G.sibling),ae=d(G,Z.children||[]),ae.return=X,X=ae;break e}else{o(X,G);break}else s(X,G);G=G.sibling}ae=Zm(Z,X.mode,ae),ae.return=X,X=ae}return T(X);case C:return Z=lo(Z),Mt(X,G,Z,ae)}if(ye(Z))return Ne(X,G,Z,ae);if(F(Z)){if(Ve=F(Z),typeof Ve!="function")throw Error(i(150));return Z=Ve.call(Z),je(X,G,Z,ae)}if(typeof Z.then=="function")return Mt(X,G,$h(Z),ae);if(Z.$$typeof===U)return Mt(X,G,Hh(X,Z),ae);Kh(X,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,G!==null&&G.tag===6?(o(X,G.sibling),ae=d(G,Z),ae.return=X,X=ae):(o(X,G),ae=Jm(Z,X.mode,ae),ae.return=X,X=ae),T(X)):o(X,G)}return function(X,G,Z,ae){try{Vc=0;var Ve=Mt(X,G,Z,ae);return ll=null,Ve}catch(De){if(De===ol||De===qh)throw De;var yt=Nr(29,De,null,X.mode);return yt.lanes=ae,yt.return=X,yt}finally{}}}var uo=tE(!0),nE=tE(!1),Ws=!1;function hp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Js(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Zs(r,s,o){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(St&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=jh(r),Uv(r,null,o),s}return Lh(r,c,s,o),jh(r)}function jc(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,B(r,o)}}function dp(r,s){var o=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?d=g=s:g=g.next=s}else d=g=s;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var mp=!1;function Uc(){if(mp){var r=al;if(r!==null)throw r}}function zc(r,s,o,c){mp=!1;var d=r.updateQueue;Ws=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,I=d.shared.pending;if(I!==null){d.shared.pending=null;var H=I,ee=H.next;H.next=null,T===null?g=ee:T.next=ee,T=H;var se=r.alternate;se!==null&&(se=se.updateQueue,I=se.lastBaseUpdate,I!==T&&(I===null?se.firstBaseUpdate=ee:I.next=ee,se.lastBaseUpdate=H))}if(g!==null){var ce=d.baseState;T=0,se=ee=H=null,I=g;do{var ne=I.lane&-536870913,ie=ne!==I.lane;if(ie?(ut&ne)===ne:(c&ne)===ne){ne!==0&&ne===sl&&(mp=!0),se!==null&&(se=se.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=r,je=I;ne=s;var Mt=o;switch(je.tag){case 1:if(Ne=je.payload,typeof Ne=="function"){ce=Ne.call(Mt,ce,ne);break e}ce=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=je.payload,ne=typeof Ne=="function"?Ne.call(Mt,ce,ne):Ne,ne==null)break e;ce=v({},ce,ne);break e;case 2:Ws=!0}}ne=I.callback,ne!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=d.callbacks,ie===null?d.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:I.tag,payload:I.payload,callback:I.callback,next:null},se===null?(ee=se=ie,H=ce):se=se.next=ie,T|=ne;if(I=I.next,I===null){if(I=d.shared.pending,I===null)break;ie=I,I=ie.next,ie.next=null,d.lastBaseUpdate=ie,d.shared.pending=null}}while(!0);se===null&&(H=ce),d.baseState=H,d.firstBaseUpdate=ee,d.lastBaseUpdate=se,g===null&&(d.shared.lanes=0),ia|=T,r.lanes=T,r.memoizedState=ce}}function rE(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function iE(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)rE(o[r],s)}var cl=j(null),Yh=j(0);function sE(r,s){r=hs,oe(Yh,r),oe(cl,s),hs=r|s.baseLanes}function pp(){oe(Yh,hs),oe(cl,cl.current)}function gp(){hs=Yh.current,W(cl),W(Yh)}var Dr=j(null),Wr=null;function ea(r){var s=r.alternate;oe(ln,ln.current&1),oe(Dr,r),Wr===null&&(s===null||cl.current!==null||s.memoizedState!==null)&&(Wr=r)}function yp(r){oe(ln,ln.current),oe(Dr,r),Wr===null&&(Wr=r)}function aE(r){r.tag===22?(oe(ln,ln.current),oe(Dr,r),Wr===null&&(Wr=r)):ta()}function ta(){oe(ln,ln.current),oe(Dr,Dr.current)}function Or(r){W(Dr),Wr===r&&(Wr=null),W(ln)}var ln=j(0);function Qh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Sg(o)||Ag(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var rs=0,Je=null,Dt=null,mn=null,Xh=!1,ul=!1,ho=!1,Wh=0,Bc=0,hl=null,jR=0;function tn(){throw Error(i(321))}function _p(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!xr(r[o],s[o]))return!1;return!0}function vp(r,s,o,c,d,g){return rs=g,Je=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=r===null||r.memoizedState===null?FE:Pp,ho=!1,g=o(c,d),ho=!1,ul&&(g=lE(s,o,c,d)),oE(r),g}function oE(r){$.H=qc;var s=Dt!==null&&Dt.next!==null;if(rs=0,mn=Dt=Je=null,Xh=!1,Bc=0,hl=null,s)throw Error(i(300));r===null||pn||(r=r.dependencies,r!==null&&Bh(r)&&(pn=!0))}function lE(r,s,o,c){Je=r;var d=0;do{if(ul&&(hl=null),Bc=0,ul=!1,25<=d)throw Error(i(301));if(d+=1,mn=Dt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=qE,g=s(o,c)}while(ul);return g}function UR(){var r=$.H,s=r.useState()[0];return s=typeof s.then=="function"?Hc(s):s,r=r.useState()[0],(Dt!==null?Dt.memoizedState:null)!==r&&(Je.flags|=1024),s}function Ep(){var r=Wh!==0;return Wh=0,r}function Tp(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function bp(r){if(Xh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xh=!1}rs=0,mn=Dt=Je=null,ul=!1,Bc=Wh=0,hl=null}function ir(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?Je.memoizedState=mn=r:mn=mn.next=r,mn}function cn(){if(Dt===null){var r=Je.alternate;r=r!==null?r.memoizedState:null}else r=Dt.next;var s=mn===null?Je.memoizedState:mn.next;if(s!==null)mn=s,Dt=r;else{if(r===null)throw Je.alternate===null?Error(i(467)):Error(i(310));Dt=r,r={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},mn===null?Je.memoizedState=mn=r:mn=mn.next=r}return mn}function Jh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hc(r){var s=Bc;return Bc+=1,hl===null&&(hl=[]),r=Jv(hl,r,s),s=Je,(mn===null?s.memoizedState:mn.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?FE:Pp),r}function Zh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Hc(r);if(r.$$typeof===U)return kn(r)}throw Error(i(438,String(r)))}function Sp(r){var s=null,o=Je.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Je.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Jh(),Je.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),c=0;c<r;c++)o[c]=k;return s.index++,o}function is(r,s){return typeof s=="function"?s(r):s}function ef(r){var s=cn();return Ap(s,Dt,r)}function Ap(r,s,o){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=o;var d=r.baseQueue,g=c.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}s.baseQueue=d=g,c.pending=null}if(g=r.baseState,d===null)r.memoizedState=g;else{s=d.next;var I=T=null,H=null,ee=s,se=!1;do{var ce=ee.lane&-536870913;if(ce!==ee.lane?(ut&ce)===ce:(rs&ce)===ce){var ne=ee.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),ce===sl&&(se=!0);else if((rs&ne)===ne){ee=ee.next,ne===sl&&(se=!0);continue}else ce={lane:0,revertLane:ee.revertLane,gesture:null,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(I=H=ce,T=g):H=H.next=ce,Je.lanes|=ne,ia|=ne;ce=ee.action,ho&&o(g,ce),g=ee.hasEagerState?ee.eagerState:o(g,ce)}else ne={lane:ce,revertLane:ee.revertLane,gesture:ee.gesture,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null},H===null?(I=H=ne,T=g):H=H.next=ne,Je.lanes|=ce,ia|=ce;ee=ee.next}while(ee!==null&&ee!==s);if(H===null?T=g:H.next=I,!xr(g,r.memoizedState)&&(pn=!0,se&&(o=al,o!==null)))throw o;r.memoizedState=g,r.baseState=T,r.baseQueue=H,c.lastRenderedState=g}return d===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function wp(r){var s=cn(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var c=o.dispatch,d=o.pending,g=s.memoizedState;if(d!==null){o.pending=null;var T=d=d.next;do g=r(g,T.action),T=T.next;while(T!==d);xr(g,s.memoizedState)||(pn=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function cE(r,s,o){var c=Je,d=cn(),g=pt;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var T=!xr((Dt||d).memoizedState,o);if(T&&(d.memoizedState=o,pn=!0),d=d.queue,Ip(fE.bind(null,c,d,r),[r]),d.getSnapshot!==s||T||mn!==null&&mn.memoizedState.tag&1){if(c.flags|=2048,fl(9,{destroy:void 0},hE.bind(null,c,d,o,s),null),kt===null)throw Error(i(349));g||(rs&127)!==0||uE(c,s,o)}return o}function uE(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Je.updateQueue,s===null?(s=Jh(),Je.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function hE(r,s,o,c){s.value=o,s.getSnapshot=c,dE(s)&&mE(r)}function fE(r,s,o){return o(function(){dE(s)&&mE(r)})}function dE(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!xr(r,o)}catch{return!0}}function mE(r){var s=no(r,2);s!==null&&yr(s,r,2)}function Cp(r){var s=ir();if(typeof r=="function"){var o=r;if(r=o(),ho){er(!0);try{o()}finally{er(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:r},s}function pE(r,s,o,c){return r.baseState=o,Ap(r,Dt,typeof c=="function"?c:is)}function zR(r,s,o,c,d){if(rf(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:d,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};$.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,gE(s,g)):(g.next=o.next,s.pending=o.next=g)}}function gE(r,s){var o=s.action,c=s.payload,d=r.state;if(s.isTransition){var g=$.T,T={};$.T=T;try{var I=o(d,c),H=$.S;H!==null&&H(T,I),yE(r,s,I)}catch(ee){Rp(r,s,ee)}finally{g!==null&&T.types!==null&&(g.types=T.types),$.T=g}}else try{g=o(d,c),yE(r,s,g)}catch(ee){Rp(r,s,ee)}}function yE(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){_E(r,s,c)},function(c){return Rp(r,s,c)}):_E(r,s,o)}function _E(r,s,o){s.status="fulfilled",s.value=o,vE(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,gE(r,o)))}function Rp(r,s,o){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,vE(s),s=s.next;while(s!==c)}r.action=null}function vE(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function EE(r,s){return s}function TE(r,s){if(pt){var o=kt.formState;if(o!==null){e:{var c=Je;if(pt){if(Bt){t:{for(var d=Bt,g=Xr;d.nodeType!==8;){if(!g){d=null;break t}if(d=Jr(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Bt=Jr(d.nextSibling),c=d.data==="F!";break e}}Qs(c)}c=!1}c&&(s=o[0])}}return o=ir(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:EE,lastRenderedState:s},o.queue=c,o=zE.bind(null,Je,c),c.dispatch=o,c=Cp(!1),g=Mp.bind(null,Je,!1,c.queue),c=ir(),d={state:s,dispatch:null,action:r,pending:null},c.queue=d,o=zR.bind(null,Je,d,g,o),d.dispatch=o,c.memoizedState=r,[s,o,!1]}function bE(r){var s=cn();return SE(s,Dt,r)}function SE(r,s,o){if(s=Ap(r,s,EE)[0],r=ef(is)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Hc(s)}catch(T){throw T===ol?qh:T}else c=s;s=cn();var d=s.queue,g=d.dispatch;return o!==s.memoizedState&&(Je.flags|=2048,fl(9,{destroy:void 0},BR.bind(null,d,o),null)),[c,g,r]}function BR(r,s){r.action=s}function AE(r){var s=cn(),o=Dt;if(o!==null)return SE(s,o,r);cn(),s=s.memoizedState,o=cn();var c=o.queue.dispatch;return o.memoizedState=r,[s,c,!1]}function fl(r,s,o,c){return r={tag:r,create:o,deps:c,inst:s,next:null},s=Je.updateQueue,s===null&&(s=Jh(),Je.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(c=o.next,o.next=r,r.next=c,s.lastEffect=r),r}function wE(){return cn().memoizedState}function tf(r,s,o,c){var d=ir();Je.flags|=r,d.memoizedState=fl(1|s,{destroy:void 0},o,c===void 0?null:c)}function nf(r,s,o,c){var d=cn();c=c===void 0?null:c;var g=d.memoizedState.inst;Dt!==null&&c!==null&&_p(c,Dt.memoizedState.deps)?d.memoizedState=fl(s,g,o,c):(Je.flags|=r,d.memoizedState=fl(1|s,g,o,c))}function CE(r,s){tf(8390656,8,r,s)}function Ip(r,s){nf(2048,8,r,s)}function HR(r){Je.flags|=4;var s=Je.updateQueue;if(s===null)s=Jh(),Je.updateQueue=s,s.events=[r];else{var o=s.events;o===null?s.events=[r]:o.push(r)}}function RE(r){var s=cn().memoizedState;return HR({ref:s,nextImpl:r}),function(){if((St&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function IE(r,s){return nf(4,2,r,s)}function xE(r,s){return nf(4,4,r,s)}function NE(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function DE(r,s,o){o=o!=null?o.concat([r]):null,nf(4,4,NE.bind(null,s,r),o)}function xp(){}function OE(r,s){var o=cn();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&_p(s,c[1])?c[0]:(o.memoizedState=[r,s],r)}function ME(r,s){var o=cn();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&_p(s,c[1]))return c[0];if(c=r(),ho){er(!0);try{r()}finally{er(!1)}}return o.memoizedState=[c,s],c}function Np(r,s,o){return o===void 0||(rs&1073741824)!==0&&(ut&261930)===0?r.memoizedState=s:(r.memoizedState=o,r=PT(),Je.lanes|=r,ia|=r,o)}function PE(r,s,o,c){return xr(o,s)?o:cl.current!==null?(r=Np(r,o,c),xr(r,s)||(pn=!0),r):(rs&42)===0||(rs&1073741824)!==0&&(ut&261930)===0?(pn=!0,r.memoizedState=o):(r=PT(),Je.lanes|=r,ia|=r,s)}function kE(r,s,o,c,d){var g=he.p;he.p=g!==0&&8>g?g:8;var T=$.T,I={};$.T=I,Mp(r,!1,s,o);try{var H=d(),ee=$.S;if(ee!==null&&ee(I,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var se=LR(H,c);Fc(r,s,se,kr(r))}else Fc(r,s,c,kr(r))}catch(ce){Fc(r,s,{then:function(){},status:"rejected",reason:ce},kr())}finally{he.p=g,T!==null&&I.types!==null&&(T.types=I.types),$.T=T}}function FR(){}function Dp(r,s,o,c){if(r.tag!==5)throw Error(i(476));var d=VE(r).queue;kE(r,d,s,ge,o===null?FR:function(){return LE(r),o(c)})}function VE(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:ge},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function LE(r){var s=VE(r);s.next===null&&(s=r.alternate.memoizedState),Fc(r,s.next.queue,{},kr())}function Op(){return kn(au)}function jE(){return cn().memoizedState}function UE(){return cn().memoizedState}function qR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=kr();r=Js(o);var c=Zs(s,r,o);c!==null&&(yr(c,s,o),jc(c,s,o)),s={cache:op()},r.payload=s;return}s=s.return}}function GR(r,s,o){var c=kr();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},rf(r)?BE(s,o):(o=Xm(r,s,o,c),o!==null&&(yr(o,r,c),HE(o,s,c)))}function zE(r,s,o){var c=kr();Fc(r,s,o,c)}function Fc(r,s,o,c){var d={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(rf(r))BE(s,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,I=g(T,o);if(d.hasEagerState=!0,d.eagerState=I,xr(I,T))return Lh(r,s,d,0),kt===null&&Vh(),!1}catch{}finally{}if(o=Xm(r,s,d,c),o!==null)return yr(o,r,c),HE(o,s,c),!0}return!1}function Mp(r,s,o,c){if(c={lane:2,revertLane:hg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rf(r)){if(s)throw Error(i(479))}else s=Xm(r,o,c,2),s!==null&&yr(s,r,2)}function rf(r){var s=r.alternate;return r===Je||s!==null&&s===Je}function BE(r,s){ul=Xh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function HE(r,s,o){if((o&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,o|=c,s.lanes=o,B(r,o)}}var qc={readContext:kn,use:Zh,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};qc.useEffectEvent=tn;var FE={readContext:kn,use:Zh,useCallback:function(r,s){return ir().memoizedState=[r,s===void 0?null:s],r},useContext:kn,useEffect:CE,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,tf(4194308,4,NE.bind(null,s,r),o)},useLayoutEffect:function(r,s){return tf(4194308,4,r,s)},useInsertionEffect:function(r,s){tf(4,2,r,s)},useMemo:function(r,s){var o=ir();s=s===void 0?null:s;var c=r();if(ho){er(!0);try{r()}finally{er(!1)}}return o.memoizedState=[c,s],c},useReducer:function(r,s,o){var c=ir();if(o!==void 0){var d=o(s);if(ho){er(!0);try{o(s)}finally{er(!1)}}}else d=s;return c.memoizedState=c.baseState=d,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:d},c.queue=r,r=r.dispatch=GR.bind(null,Je,r),[c.memoizedState,r]},useRef:function(r){var s=ir();return r={current:r},s.memoizedState=r},useState:function(r){r=Cp(r);var s=r.queue,o=zE.bind(null,Je,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:xp,useDeferredValue:function(r,s){var o=ir();return Np(o,r,s)},useTransition:function(){var r=Cp(!1);return r=kE.bind(null,Je,r.queue,!0,!1),ir().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var c=Je,d=ir();if(pt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),kt===null)throw Error(i(349));(ut&127)!==0||uE(c,s,o)}d.memoizedState=o;var g={value:o,getSnapshot:s};return d.queue=g,CE(fE.bind(null,c,g,r),[r]),c.flags|=2048,fl(9,{destroy:void 0},hE.bind(null,c,g,o,s),null),o},useId:function(){var r=ir(),s=kt.identifierPrefix;if(pt){var o=ki,c=Pi;o=(c&~(1<<32-Gt(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Wh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=jR++,s="_"+s+"r_"+o.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:Op,useFormState:TE,useActionState:TE,useOptimistic:function(r){var s=ir();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Mp.bind(null,Je,!0,o),o.dispatch=s,[r,s]},useMemoCache:Sp,useCacheRefresh:function(){return ir().memoizedState=qR.bind(null,Je)},useEffectEvent:function(r){var s=ir(),o={impl:r};return s.memoizedState=o,function(){if((St&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Pp={readContext:kn,use:Zh,useCallback:OE,useContext:kn,useEffect:Ip,useImperativeHandle:DE,useInsertionEffect:IE,useLayoutEffect:xE,useMemo:ME,useReducer:ef,useRef:wE,useState:function(){return ef(is)},useDebugValue:xp,useDeferredValue:function(r,s){var o=cn();return PE(o,Dt.memoizedState,r,s)},useTransition:function(){var r=ef(is)[0],s=cn().memoizedState;return[typeof r=="boolean"?r:Hc(r),s]},useSyncExternalStore:cE,useId:jE,useHostTransitionStatus:Op,useFormState:bE,useActionState:bE,useOptimistic:function(r,s){var o=cn();return pE(o,Dt,r,s)},useMemoCache:Sp,useCacheRefresh:UE};Pp.useEffectEvent=RE;var qE={readContext:kn,use:Zh,useCallback:OE,useContext:kn,useEffect:Ip,useImperativeHandle:DE,useInsertionEffect:IE,useLayoutEffect:xE,useMemo:ME,useReducer:wp,useRef:wE,useState:function(){return wp(is)},useDebugValue:xp,useDeferredValue:function(r,s){var o=cn();return Dt===null?Np(o,r,s):PE(o,Dt.memoizedState,r,s)},useTransition:function(){var r=wp(is)[0],s=cn().memoizedState;return[typeof r=="boolean"?r:Hc(r),s]},useSyncExternalStore:cE,useId:jE,useHostTransitionStatus:Op,useFormState:AE,useActionState:AE,useOptimistic:function(r,s){var o=cn();return Dt!==null?pE(o,Dt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Sp,useCacheRefresh:UE};qE.useEffectEvent=RE;function kp(r,s,o,c){s=r.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Vp={enqueueSetState:function(r,s,o){r=r._reactInternals;var c=kr(),d=Js(c);d.payload=s,o!=null&&(d.callback=o),s=Zs(r,d,c),s!==null&&(yr(s,r,c),jc(s,r,c))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var c=kr(),d=Js(c);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=Zs(r,d,c),s!==null&&(yr(s,r,c),jc(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=kr(),c=Js(o);c.tag=2,s!=null&&(c.callback=s),s=Zs(r,c,o),s!==null&&(yr(s,r,o),jc(s,r,o))}};function GE(r,s,o,c,d,g,T){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!Nc(o,c)||!Nc(d,g):!0}function $E(r,s,o,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==r&&Vp.enqueueReplaceState(s,s.state,null)}function fo(r,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(r=r.defaultProps){o===s&&(o=v({},o));for(var d in r)o[d]===void 0&&(o[d]=r[d])}return o}function KE(r){kh(r)}function YE(r){console.error(r)}function QE(r){kh(r)}function sf(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function XE(r,s,o){try{var c=r.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Lp(r,s,o){return o=Js(o),o.tag=3,o.payload={element:null},o.callback=function(){sf(r,s)},o}function WE(r){return r=Js(r),r.tag=3,r}function JE(r,s,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var g=c.value;r.payload=function(){return d(g)},r.callback=function(){XE(s,o,c)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(r.callback=function(){XE(s,o,c),typeof d!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function $R(r,s,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&il(s,o,d,!0),o=Dr.current,o!==null){switch(o.tag){case 31:case 13:return Wr===null?yf():o.alternate===null&&nn===0&&(nn=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===Gh?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),lg(r,c,d)),!1;case 22:return o.flags|=65536,c===Gh?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),lg(r,c,d)),!1}throw Error(i(435,o.tag))}return lg(r,c,d),yf(),!1}if(pt)return s=Dr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==np&&(r=Error(i(422),{cause:c}),Mc(Kr(r,o)))):(c!==np&&(s=Error(i(423),{cause:c}),Mc(Kr(s,o))),r=r.current.alternate,r.flags|=65536,d&=-d,r.lanes|=d,c=Kr(c,o),d=Lp(r.stateNode,c,d),dp(r,d),nn!==4&&(nn=2)),!1;var g=Error(i(520),{cause:c});if(g=Kr(g,o),Jc===null?Jc=[g]:Jc.push(g),nn!==4&&(nn=2),s===null)return!0;c=Kr(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=d&-d,o.lanes|=r,r=Lp(o.stateNode,c,r),dp(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(sa===null||!sa.has(g))))return o.flags|=65536,d&=-d,o.lanes|=d,d=WE(d),JE(d,r,o,c),dp(o,d),!1}o=o.return}while(o!==null);return!1}var jp=Error(i(461)),pn=!1;function Vn(r,s,o,c){s.child=r===null?nE(s,null,o,c):uo(s,r.child,o,c)}function ZE(r,s,o,c,d){o=o.render;var g=s.ref;if("ref"in c){var T={};for(var I in c)I!=="ref"&&(T[I]=c[I])}else T=c;return ao(s),c=vp(r,s,o,T,g,d),I=Ep(),r!==null&&!pn?(Tp(r,s,d),ss(r,s,d)):(pt&&I&&ep(s),s.flags|=1,Vn(r,s,c,d),s.child)}function eT(r,s,o,c,d){if(r===null){var g=o.type;return typeof g=="function"&&!Wm(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,tT(r,s,g,c,d)):(r=Uh(o.type,null,c,s,s.mode,d),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!$p(r,d)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:Nc,o(T,c)&&r.ref===s.ref)return ss(r,s,d)}return s.flags|=1,r=Zi(g,c),r.ref=s.ref,r.return=s,s.child=r}function tT(r,s,o,c,d){if(r!==null){var g=r.memoizedProps;if(Nc(g,c)&&r.ref===s.ref)if(pn=!1,s.pendingProps=c=g,$p(r,d))(r.flags&131072)!==0&&(pn=!0);else return s.lanes=r.lanes,ss(r,s,d)}return Up(r,s,o,c,d)}function nT(r,s,o,c){var d=c.children,g=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,r!==null){for(c=s.child=r.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~g}else c=0,s.child=null;return rT(r,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Fh(s,g!==null?g.cachePool:null),g!==null?sE(s,g):pp(),aE(s);else return c=s.lanes=536870912,rT(r,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Fh(s,g.cachePool),sE(s,g),ta(),s.memoizedState=null):(r!==null&&Fh(s,null),pp(),ta());return Vn(r,s,d,o),s.child}function Gc(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function rT(r,s,o,c,d){var g=cp();return g=g===null?null:{parent:dn._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},r!==null&&Fh(s,null),pp(),aE(s),r!==null&&il(r,s,c,!0),s.childLanes=d,null}function af(r,s){return s=lf({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function iT(r,s,o){return uo(s,r.child,null,o),r=af(s,s.pendingProps),r.flags|=2,Or(s),s.memoizedState=null,r}function KR(r,s,o){var c=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(pt){if(c.mode==="hidden")return r=af(s,c),s.lanes=536870912,Gc(null,r);if(yp(s),(r=Bt)?(r=gb(r,Xr),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ks!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},o=Bv(r),o.return=s,s.child=o,Pn=s,Bt=null)):r=null,r===null)throw Qs(s);return s.lanes=536870912,null}return af(s,c)}var g=r.memoizedState;if(g!==null){var T=g.dehydrated;if(yp(s),d)if(s.flags&256)s.flags&=-257,s=iT(r,s,o);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(pn||il(r,s,o,!1),d=(o&r.childLanes)!==0,pn||d){if(c=kt,c!==null&&(T=K(c,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,no(r,T),yr(c,r,T),jp;yf(),s=iT(r,s,o)}else r=g.treeContext,Bt=Jr(T.nextSibling),Pn=s,pt=!0,Ys=null,Xr=!1,r!==null&&qv(s,r),s=af(s,c),s.flags|=4096;return s}return r=Zi(r.child,{mode:c.mode,children:c.children}),r.ref=s.ref,s.child=r,r.return=s,r}function of(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Up(r,s,o,c,d){return ao(s),o=vp(r,s,o,c,void 0,d),c=Ep(),r!==null&&!pn?(Tp(r,s,d),ss(r,s,d)):(pt&&c&&ep(s),s.flags|=1,Vn(r,s,o,d),s.child)}function sT(r,s,o,c,d,g){return ao(s),s.updateQueue=null,o=lE(s,c,o,d),oE(r),c=Ep(),r!==null&&!pn?(Tp(r,s,g),ss(r,s,g)):(pt&&c&&ep(s),s.flags|=1,Vn(r,s,o,g),s.child)}function aT(r,s,o,c,d){if(ao(s),s.stateNode===null){var g=el,T=o.contextType;typeof T=="object"&&T!==null&&(g=kn(T)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Vp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},hp(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?kn(T):el,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(kp(s,o,T,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Vp.enqueueReplaceState(g,g.state,null),zc(s,c,g,d),Uc(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var I=s.memoizedProps,H=fo(o,I);g.props=H;var ee=g.context,se=o.contextType;T=el,typeof se=="object"&&se!==null&&(T=kn(se));var ce=o.getDerivedStateFromProps;se=typeof ce=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||ee!==T)&&$E(s,g,c,T),Ws=!1;var ne=s.memoizedState;g.state=ne,zc(s,c,g,d),Uc(),ee=s.memoizedState,I||ne!==ee||Ws?(typeof ce=="function"&&(kp(s,o,ce,c),ee=s.memoizedState),(H=Ws||GE(s,o,H,c,ne,ee,T))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=ee),g.props=c,g.state=ee,g.context=T,c=H):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,fp(r,s),T=s.memoizedProps,se=fo(o,T),g.props=se,ce=s.pendingProps,ne=g.context,ee=o.contextType,H=el,typeof ee=="object"&&ee!==null&&(H=kn(ee)),I=o.getDerivedStateFromProps,(ee=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ce||ne!==H)&&$E(s,g,c,H),Ws=!1,ne=s.memoizedState,g.state=ne,zc(s,c,g,d),Uc();var ie=s.memoizedState;T!==ce||ne!==ie||Ws||r!==null&&r.dependencies!==null&&Bh(r.dependencies)?(typeof I=="function"&&(kp(s,o,I,c),ie=s.memoizedState),(se=Ws||GE(s,o,se,c,ne,ie,H)||r!==null&&r.dependencies!==null&&Bh(r.dependencies))?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,ie,H),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,ie,H)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=ie),g.props=c,g.state=ie,g.context=H,c=se):(typeof g.componentDidUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===r.memoizedProps&&ne===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,of(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=uo(s,r.child,null,d),s.child=uo(s,null,o,d)):Vn(r,s,o,d),s.memoizedState=g.state,r=s.child):r=ss(r,s,d),r}function oT(r,s,o,c){return io(),s.flags|=256,Vn(r,s,o,c),s.child}var zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bp(r){return{baseLanes:r,cachePool:Xv()}}function Hp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Pr),r}function lT(r,s,o){var c=s.pendingProps,d=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=r!==null&&r.memoizedState===null?!1:(ln.current&2)!==0),T&&(d=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,r===null){if(pt){if(d?ea(s):ta(),(r=Bt)?(r=gb(r,Xr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:Ks!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},o=Bv(r),o.return=s,s.child=o,Pn=s,Bt=null)):r=null,r===null)throw Qs(s);return Ag(r)?s.lanes=32:s.lanes=536870912,null}var I=c.children;return c=c.fallback,d?(ta(),d=s.mode,I=lf({mode:"hidden",children:I},d),c=ro(c,d,o,null),I.return=s,c.return=s,I.sibling=c,s.child=I,c=s.child,c.memoizedState=Bp(o),c.childLanes=Hp(r,T,o),s.memoizedState=zp,Gc(null,c)):(ea(s),Fp(s,I))}var H=r.memoizedState;if(H!==null&&(I=H.dehydrated,I!==null)){if(g)s.flags&256?(ea(s),s.flags&=-257,s=qp(r,s,o)):s.memoizedState!==null?(ta(),s.child=r.child,s.flags|=128,s=null):(ta(),I=c.fallback,d=s.mode,c=lf({mode:"visible",children:c.children},d),I=ro(I,d,o,null),I.flags|=2,c.return=s,I.return=s,c.sibling=I,s.child=c,uo(s,r.child,null,o),c=s.child,c.memoizedState=Bp(o),c.childLanes=Hp(r,T,o),s.memoizedState=zp,s=Gc(null,c));else if(ea(s),Ag(I)){if(T=I.nextSibling&&I.nextSibling.dataset,T)var ee=T.dgst;T=ee,c=Error(i(419)),c.stack="",c.digest=T,Mc({value:c,source:null,stack:null}),s=qp(r,s,o)}else if(pn||il(r,s,o,!1),T=(o&r.childLanes)!==0,pn||T){if(T=kt,T!==null&&(c=K(T,o),c!==0&&c!==H.retryLane))throw H.retryLane=c,no(r,c),yr(T,r,c),jp;Sg(I)||yf(),s=qp(r,s,o)}else Sg(I)?(s.flags|=192,s.child=r.child,s=null):(r=H.treeContext,Bt=Jr(I.nextSibling),Pn=s,pt=!0,Ys=null,Xr=!1,r!==null&&qv(s,r),s=Fp(s,c.children),s.flags|=4096);return s}return d?(ta(),I=c.fallback,d=s.mode,H=r.child,ee=H.sibling,c=Zi(H,{mode:"hidden",children:c.children}),c.subtreeFlags=H.subtreeFlags&65011712,ee!==null?I=Zi(ee,I):(I=ro(I,d,o,null),I.flags|=2),I.return=s,c.return=s,c.sibling=I,s.child=c,Gc(null,c),c=s.child,I=r.child.memoizedState,I===null?I=Bp(o):(d=I.cachePool,d!==null?(H=dn._currentValue,d=d.parent!==H?{parent:H,pool:H}:d):d=Xv(),I={baseLanes:I.baseLanes|o,cachePool:d}),c.memoizedState=I,c.childLanes=Hp(r,T,o),s.memoizedState=zp,Gc(r.child,c)):(ea(s),o=r.child,r=o.sibling,o=Zi(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,r!==null&&(T=s.deletions,T===null?(s.deletions=[r],s.flags|=16):T.push(r)),s.child=o,s.memoizedState=null,o)}function Fp(r,s){return s=lf({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function lf(r,s){return r=Nr(22,r,null,s),r.lanes=0,r}function qp(r,s,o){return uo(s,r.child,null,o),r=Fp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function cT(r,s,o){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),sp(r.return,s,o)}function Gp(r,s,o,c,d,g){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d,treeForkCount:g}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=c,T.tail=o,T.tailMode=d,T.treeForkCount=g)}function uT(r,s,o){var c=s.pendingProps,d=c.revealOrder,g=c.tail;c=c.children;var T=ln.current,I=(T&2)!==0;if(I?(T=T&1|2,s.flags|=128):T&=1,oe(ln,T),Vn(r,s,c,o),c=pt?Oc:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&cT(r,o,s);else if(r.tag===19)cT(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)r=o.alternate,r!==null&&Qh(r)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),Gp(s,!1,d,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(r=d.alternate,r!==null&&Qh(r)===null){s.child=d;break}r=d.sibling,d.sibling=o,o=d,d=r}Gp(s,!0,o,null,g,c);break;case"together":Gp(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function ss(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),ia|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(il(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=Zi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=Zi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function $p(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Bh(r)))}function YR(r,s,o){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),Xs(s,dn,r.memoizedState.cache),io();break;case 27:case 5:Tn(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:Xs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,yp(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(ea(s),s.flags|=128,null):(o&s.child.childLanes)!==0?lT(r,s,o):(ea(s),r=ss(r,s,o),r!==null?r.sibling:null);ea(s);break;case 19:var d=(r.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(il(r,s,o,!1),c=(o&s.childLanes)!==0),d){if(c)return uT(r,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(ln,ln.current),c)break;return null;case 22:return s.lanes=0,nT(r,s,o,s.pendingProps);case 24:Xs(s,dn,r.memoizedState.cache)}return ss(r,s,o)}function hT(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)pn=!0;else{if(!$p(r,o)&&(s.flags&128)===0)return pn=!1,YR(r,s,o);pn=(r.flags&131072)!==0}else pn=!1,pt&&(s.flags&1048576)!==0&&Fv(s,Oc,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(r=lo(s.elementType),s.type=r,typeof r=="function")Wm(r)?(c=fo(r,c),s.tag=1,s=aT(null,s,r,c,o)):(s.tag=0,s=Up(null,s,r,c,o));else{if(r!=null){var d=r.$$typeof;if(d===q){s.tag=11,s=ZE(null,s,r,c,o);break e}else if(d===A){s.tag=14,s=eT(null,s,r,c,o);break e}}throw s=ue(r)||r,Error(i(306,s,""))}}return s;case 0:return Up(r,s,s.type,s.pendingProps,o);case 1:return c=s.type,d=fo(c,s.pendingProps),aT(r,s,c,d,o);case 3:e:{if(qe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;d=g.element,fp(r,s),zc(s,c,null,o);var T=s.memoizedState;if(c=T.cache,Xs(s,dn,c),c!==g.cache&&ap(s,[dn],o,!0),Uc(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=oT(r,s,c,o);break e}else if(c!==d){d=Kr(Error(i(424)),s),Mc(d),s=oT(r,s,c,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Bt=Jr(r.firstChild),Pn=s,pt=!0,Ys=null,Xr=!0,o=nE(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(io(),c===d){s=ss(r,s,o);break e}Vn(r,s,c,o)}s=s.child}return s;case 26:return of(r,s),r===null?(o=bb(s.type,null,s.pendingProps,null))?s.memoizedState=o:pt||(o=s.type,r=s.pendingProps,c=Af(Ae.current).createElement(o),c[Te]=s,c[Se]=r,Ln(c,o,r),jt(c),s.stateNode=c):s.memoizedState=bb(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Tn(s),r===null&&pt&&(c=s.stateNode=vb(s.type,s.pendingProps,Ae.current),Pn=s,Xr=!0,d=Bt,ca(s.type)?(wg=d,Bt=Jr(c.firstChild)):Bt=d),Vn(r,s,s.pendingProps.children,o),of(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&pt&&((d=c=Bt)&&(c=AI(c,s.type,s.pendingProps,Xr),c!==null?(s.stateNode=c,Pn=s,Bt=Jr(c.firstChild),Xr=!1,d=!0):d=!1),d||Qs(s)),Tn(s),d=s.type,g=s.pendingProps,T=r!==null?r.memoizedProps:null,c=g.children,Eg(d,g)?c=null:T!==null&&Eg(d,T)&&(s.flags|=32),s.memoizedState!==null&&(d=vp(r,s,UR,null,null,o),au._currentValue=d),of(r,s),Vn(r,s,c,o),s.child;case 6:return r===null&&pt&&((r=o=Bt)&&(o=wI(o,s.pendingProps,Xr),o!==null?(s.stateNode=o,Pn=s,Bt=null,r=!0):r=!1),r||Qs(s)),null;case 13:return lT(r,s,o);case 4:return qe(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=uo(s,null,c,o):Vn(r,s,c,o),s.child;case 11:return ZE(r,s,s.type,s.pendingProps,o);case 7:return Vn(r,s,s.pendingProps,o),s.child;case 8:return Vn(r,s,s.pendingProps.children,o),s.child;case 12:return Vn(r,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,Xs(s,s.type,c.value),Vn(r,s,c.children,o),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,ao(s),d=kn(d),c=c(d),s.flags|=1,Vn(r,s,c,o),s.child;case 14:return eT(r,s,s.type,s.pendingProps,o);case 15:return tT(r,s,s.type,s.pendingProps,o);case 19:return uT(r,s,o);case 31:return KR(r,s,o);case 22:return nT(r,s,o,s.pendingProps);case 24:return ao(s),c=kn(dn),r===null?(d=cp(),d===null&&(d=kt,g=op(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=o),d=g),s.memoizedState={parent:c,cache:d},hp(s),Xs(s,dn,d)):((r.lanes&o)!==0&&(fp(r,s),zc(s,null,null,o),Uc()),d=r.memoizedState,g=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Xs(s,dn,c)):(c=g.cache,Xs(s,dn,c),c!==d.cache&&ap(s,[dn],o,!0))),Vn(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function as(r){r.flags|=4}function Kp(r,s,o,c,d){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(d&335544128)===d)if(r.stateNode.complete)r.flags|=8192;else if(jT())r.flags|=8192;else throw co=Gh,up}else r.flags&=-16777217}function fT(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Rb(s))if(jT())r.flags|=8192;else throw co=Gh,up}function cf(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Yi():536870912,r.lanes|=s,gl|=s)}function $c(r,s){if(!pt)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function Ht(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,c=0;if(s)for(var d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=c,r.childLanes=o,s}function QR(r,s,o){var c=s.pendingProps;switch(tp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(s),null;case 1:return Ht(s),null;case 3:return o=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ns(dn),nt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(rl(s)?as(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,rp())),Ht(s),null;case 26:var d=s.type,g=s.memoizedState;return r===null?(as(s),g!==null?(Ht(s),fT(s,g)):(Ht(s),Kp(s,d,null,c,o))):g?g!==r.memoizedState?(as(s),Ht(s),fT(s,g)):(Ht(s),s.flags&=-16777217):(r=r.memoizedProps,r!==c&&as(s),Ht(s),Kp(s,d,r,c,o)),null;case 27:if(Sr(s),o=Ae.current,d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ht(s),null}r=me.current,rl(s)?Gv(s):(r=vb(d,c,o),s.stateNode=r,as(s))}return Ht(s),null;case 5:if(Sr(s),d=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&as(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Ht(s),null}if(g=me.current,rl(s))Gv(s);else{var T=Af(Ae.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?T.createElement("select",{is:c.is}):T.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?T.createElement(d,{is:c.is}):T.createElement(d)}}g[Te]=s,g[Se]=c;e:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break e;for(;T.sibling===null;){if(T.return===null||T.return===s)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=g;e:switch(Ln(g,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&as(s)}}return Ht(s),Kp(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,o),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&as(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=Ae.current,rl(s)){if(r=s.stateNode,o=s.memoizedProps,c=null,d=Pn,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}r[Te]=s,r=!!(r.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||lb(r.nodeValue,o)),r||Qs(s,!0)}else r=Af(r).createTextNode(c),r[Te]=s,s.stateNode=r}return Ht(s),null;case 31:if(o=s.memoizedState,r===null||r.memoizedState!==null){if(c=rl(s),o!==null){if(r===null){if(!c)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[Te]=s}else io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),r=!1}else o=rp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return s.flags&256?(Or(s),s):(Or(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ht(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(d=rl(s),c!==null&&c.dehydrated!==null){if(r===null){if(!d)throw Error(i(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Te]=s}else io(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ht(s),d=!1}else d=rp(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Or(s),s):(Or(s),null)}return Or(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,r=r!==null&&r.memoizedState!==null,o&&(c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==d&&(c.flags|=2048)),o!==r&&o&&(s.child.flags|=8192),cf(s,s.updateQueue),Ht(s),null);case 4:return nt(),r===null&&pg(s.stateNode.containerInfo),Ht(s),null;case 10:return ns(s.type),Ht(s),null;case 19:if(W(ln),c=s.memoizedState,c===null)return Ht(s),null;if(d=(s.flags&128)!==0,g=c.rendering,g===null)if(d)$c(c,!1);else{if(nn!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=Qh(r),g!==null){for(s.flags|=128,$c(c,!1),r=g.updateQueue,s.updateQueue=r,cf(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)zv(o,r),o=o.sibling;return oe(ln,ln.current&1|2),pt&&es(s,c.treeForkCount),s.child}r=r.sibling}c.tail!==null&&rt()>mf&&(s.flags|=128,d=!0,$c(c,!1),s.lanes=4194304)}else{if(!d)if(r=Qh(g),r!==null){if(s.flags|=128,d=!0,r=r.updateQueue,s.updateQueue=r,cf(s,r),$c(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!pt)return Ht(s),null}else 2*rt()-c.renderingStartTime>mf&&o!==536870912&&(s.flags|=128,d=!0,$c(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(r=c.last,r!==null?r.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=rt(),r.sibling=null,o=ln.current,oe(ln,d?o&1|2:o&1),pt&&es(s,c.treeForkCount),r):(Ht(s),null);case 22:case 23:return Or(s),gp(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(Ht(s),s.subtreeFlags&6&&(s.flags|=8192)):Ht(s),o=s.updateQueue,o!==null&&cf(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),r!==null&&W(oo),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ns(dn),Ht(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function XR(r,s){switch(tp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ns(dn),nt(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Sr(s),null;case 31:if(s.memoizedState!==null){if(Or(s),s.alternate===null)throw Error(i(340));io()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(Or(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));io()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return W(ln),null;case 4:return nt(),null;case 10:return ns(s.type),null;case 22:case 23:return Or(s),gp(),r!==null&&W(oo),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ns(dn),null;case 25:return null;default:return null}}function dT(r,s){switch(tp(s),s.tag){case 3:ns(dn),nt();break;case 26:case 27:case 5:Sr(s);break;case 4:nt();break;case 31:s.memoizedState!==null&&Or(s);break;case 13:Or(s);break;case 19:W(ln);break;case 10:ns(s.type);break;case 22:case 23:Or(s),gp(),r!==null&&W(oo);break;case 24:ns(dn)}}function Kc(r,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&r)===r){c=void 0;var g=o.create,T=o.inst;c=g(),T.destroy=c}o=o.next}while(o!==d)}}catch(I){Rt(s,s.return,I)}}function na(r,s,o){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&r)===r){var T=c.inst,I=T.destroy;if(I!==void 0){T.destroy=void 0,d=s;var H=o,ee=I;try{ee()}catch(se){Rt(d,H,se)}}}c=c.next}while(c!==g)}}catch(se){Rt(s,s.return,se)}}function mT(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{iE(s,o)}catch(c){Rt(r,r.return,c)}}}function pT(r,s,o){o.props=fo(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(c){Rt(r,s,c)}}function Yc(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof o=="function"?r.refCleanup=o(c):o.current=c}}catch(d){Rt(r,s,d)}}function Vi(r,s){var o=r.ref,c=r.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){Rt(r,s,d)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){Rt(r,s,d)}else o.current=null}function gT(r){var s=r.type,o=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){Rt(r,r.return,d)}}function Yp(r,s,o){try{var c=r.stateNode;_I(c,r.type,o,s),c[Se]=s}catch(d){Rt(r,r.return,d)}}function yT(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ca(r.type)||r.tag===4}function Qp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||yT(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ca(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Xp(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=li));else if(c!==4&&(c===27&&ca(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Xp(r,s,o),r=r.sibling;r!==null;)Xp(r,s,o),r=r.sibling}function uf(r,s,o){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(c!==4&&(c===27&&ca(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(uf(r,s,o),r=r.sibling;r!==null;)uf(r,s,o),r=r.sibling}function _T(r){var s=r.stateNode,o=r.memoizedProps;try{for(var c=r.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Ln(s,c,o),s[Te]=r,s[Se]=o}catch(g){Rt(r,r.return,g)}}var os=!1,gn=!1,Wp=!1,vT=typeof WeakSet=="function"?WeakSet:Set,In=null;function WR(r,s){if(r=r.containerInfo,_g=Df,r=Dv(r),qm(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var T=0,I=-1,H=-1,ee=0,se=0,ce=r,ne=null;t:for(;;){for(var ie;ce!==o||d!==0&&ce.nodeType!==3||(I=T+d),ce!==g||c!==0&&ce.nodeType!==3||(H=T+c),ce.nodeType===3&&(T+=ce.nodeValue.length),(ie=ce.firstChild)!==null;)ne=ce,ce=ie;for(;;){if(ce===r)break t;if(ne===o&&++ee===d&&(I=T),ne===g&&++se===c&&(H=T),(ie=ce.nextSibling)!==null)break;ce=ne,ne=ce.parentNode}ce=ie}o=I===-1||H===-1?null:{start:I,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(vg={focusedElem:r,selectionRange:o},Df=!1,In=s;In!==null;)if(s=In,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,In=r;else for(;In!==null;){switch(s=In,g=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)d=r[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,d=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ne=fo(o.type,d);r=c.getSnapshotBeforeUpdate(Ne,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(je){Rt(o,o.return,je)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)bg(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,In=r;break}In=s.return}}function ET(r,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:cs(r,o),c&4&&Kc(5,o);break;case 1:if(cs(r,o),c&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(T){Rt(o,o.return,T)}else{var d=fo(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(d,s,r.__reactInternalSnapshotBeforeUpdate)}catch(T){Rt(o,o.return,T)}}c&64&&mT(o),c&512&&Yc(o,o.return);break;case 3:if(cs(r,o),c&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{iE(r,s)}catch(T){Rt(o,o.return,T)}}break;case 27:s===null&&c&4&&_T(o);case 26:case 5:cs(r,o),s===null&&c&4&&gT(o),c&512&&Yc(o,o.return);break;case 12:cs(r,o);break;case 31:cs(r,o),c&4&&ST(r,o);break;case 13:cs(r,o),c&4&&AT(r,o),c&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=aI.bind(null,o),CI(r,o))));break;case 22:if(c=o.memoizedState!==null||os,!c){s=s!==null&&s.memoizedState!==null||gn,d=os;var g=gn;os=c,(gn=s)&&!g?us(r,o,(o.subtreeFlags&8772)!==0):cs(r,o),os=d,gn=g}break;case 30:break;default:cs(r,o)}}function TT(r){var s=r.alternate;s!==null&&(r.alternate=null,TT(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&zt(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Yt=null,dr=!1;function ls(r,s,o){for(o=o.child;o!==null;)bT(r,s,o),o=o.sibling}function bT(r,s,o){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(Ar,o)}catch{}switch(o.tag){case 26:gn||Vi(o,s),ls(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:gn||Vi(o,s);var c=Yt,d=dr;ca(o.type)&&(Yt=o.stateNode,dr=!1),ls(r,s,o),ru(o.stateNode),Yt=c,dr=d;break;case 5:gn||Vi(o,s);case 6:if(c=Yt,d=dr,Yt=null,ls(r,s,o),Yt=c,dr=d,Yt!==null)if(dr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(o.stateNode)}catch(g){Rt(o,s,g)}else try{Yt.removeChild(o.stateNode)}catch(g){Rt(o,s,g)}break;case 18:Yt!==null&&(dr?(r=Yt,mb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Al(r)):mb(Yt,o.stateNode));break;case 4:c=Yt,d=dr,Yt=o.stateNode.containerInfo,dr=!0,ls(r,s,o),Yt=c,dr=d;break;case 0:case 11:case 14:case 15:na(2,o,s),gn||na(4,o,s),ls(r,s,o);break;case 1:gn||(Vi(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&pT(o,s,c)),ls(r,s,o);break;case 21:ls(r,s,o);break;case 22:gn=(c=gn)||o.memoizedState!==null,ls(r,s,o),gn=c;break;default:ls(r,s,o)}}function ST(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Al(r)}catch(o){Rt(s,s.return,o)}}}function AT(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Al(r)}catch(o){Rt(s,s.return,o)}}function JR(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new vT),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new vT),s;default:throw Error(i(435,r.tag))}}function hf(r,s){var o=JR(r);s.forEach(function(c){if(!o.has(c)){o.add(c);var d=oI.bind(null,r,c);c.then(d,d)}})}function mr(r,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],g=r,T=s,I=T;e:for(;I!==null;){switch(I.tag){case 27:if(ca(I.type)){Yt=I.stateNode,dr=!1;break e}break;case 5:Yt=I.stateNode,dr=!1;break e;case 3:case 4:Yt=I.stateNode.containerInfo,dr=!0;break e}I=I.return}if(Yt===null)throw Error(i(160));bT(g,T,d),Yt=null,dr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wT(s,r),s=s.sibling}var mi=null;function wT(r,s){var o=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:mr(s,r),pr(r),c&4&&(na(3,r,r.return),Kc(3,r),na(5,r,r.return));break;case 1:mr(s,r),pr(r),c&512&&(gn||o===null||Vi(o,o.return)),c&64&&os&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=mi;if(mr(s,r),pr(r),c&512&&(gn||o===null||Vi(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=r.memoizedState,o===null)if(c===null)if(r.stateNode===null){e:{c=r.type,o=r.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":g=d.getElementsByTagName("title")[0],(!g||g[It]||g[Te]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(c),d.head.insertBefore(g,d.querySelector("head > title"))),Ln(g,c,o),g[Te]=r,jt(g),c=g;break e;case"link":var T=wb("link","href",d).get(c+(o.href||""));if(T){for(var I=0;I<T.length;I++)if(g=T[I],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(I,1);break t}}g=d.createElement(c),Ln(g,c,o),d.head.appendChild(g);break;case"meta":if(T=wb("meta","content",d).get(c+(o.content||""))){for(I=0;I<T.length;I++)if(g=T[I],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(I,1);break t}}g=d.createElement(c),Ln(g,c,o),d.head.appendChild(g);break;default:throw Error(i(468,c))}g[Te]=r,jt(g),c=g}r.stateNode=c}else Cb(d,r.type,r.stateNode);else r.stateNode=Ab(d,c,r.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?Cb(d,r.type,r.stateNode):Ab(d,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Yp(r,r.memoizedProps,o.memoizedProps)}break;case 27:mr(s,r),pr(r),c&512&&(gn||o===null||Vi(o,o.return)),o!==null&&c&4&&Yp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(mr(s,r),pr(r),c&512&&(gn||o===null||Vi(o,o.return)),r.flags&32){d=r.stateNode;try{fr(d,"")}catch(Ne){Rt(r,r.return,Ne)}}c&4&&r.stateNode!=null&&(d=r.memoizedProps,Yp(r,d,o!==null?o.memoizedProps:d)),c&1024&&(Wp=!0);break;case 6:if(mr(s,r),pr(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,o=r.stateNode;try{o.nodeValue=c}catch(Ne){Rt(r,r.return,Ne)}}break;case 3:if(Rf=null,d=mi,mi=wf(s.containerInfo),mr(s,r),mi=d,pr(r),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Al(s.containerInfo)}catch(Ne){Rt(r,r.return,Ne)}Wp&&(Wp=!1,CT(r));break;case 4:c=mi,mi=wf(r.stateNode.containerInfo),mr(s,r),pr(r),mi=c;break;case 12:mr(s,r),pr(r);break;case 31:mr(s,r),pr(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 13:mr(s,r),pr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(df=rt()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 22:d=r.memoizedState!==null;var H=o!==null&&o.memoizedState!==null,ee=os,se=gn;if(os=ee||d,gn=se||H,mr(s,r),gn=se,os=ee,pr(r),c&8192)e:for(s=r.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||H||os||gn||mo(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){H=o=s;try{if(g=H.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{I=H.stateNode;var ce=H.memoizedProps.style,ne=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;I.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(Ne){Rt(H,H.return,Ne)}}}else if(s.tag===6){if(o===null){H=s;try{H.stateNode.nodeValue=d?"":H.memoizedProps}catch(Ne){Rt(H,H.return,Ne)}}}else if(s.tag===18){if(o===null){H=s;try{var ie=H.stateNode;d?pb(ie,!0):pb(H.stateNode,!1)}catch(Ne){Rt(H,H.return,Ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,hf(r,o))));break;case 19:mr(s,r),pr(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,hf(r,c)));break;case 30:break;case 21:break;default:mr(s,r),pr(r)}}function pr(r){var s=r.flags;if(s&2){try{for(var o,c=r.return;c!==null;){if(yT(c)){o=c;break}c=c.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var d=o.stateNode,g=Qp(r);uf(r,g,d);break;case 5:var T=o.stateNode;o.flags&32&&(fr(T,""),o.flags&=-33);var I=Qp(r);uf(r,I,T);break;case 3:case 4:var H=o.stateNode.containerInfo,ee=Qp(r);Xp(r,ee,H);break;default:throw Error(i(161))}}catch(se){Rt(r,r.return,se)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function CT(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;CT(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function cs(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ET(r,s.alternate,s),s=s.sibling}function mo(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:na(4,s,s.return),mo(s);break;case 1:Vi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&pT(s,s.return,o),mo(s);break;case 27:ru(s.stateNode);case 26:case 5:Vi(s,s.return),mo(s);break;case 22:s.memoizedState===null&&mo(s);break;case 30:mo(s);break;default:mo(s)}r=r.sibling}}function us(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=r,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:us(d,g,o),Kc(4,g);break;case 1:if(us(d,g,o),c=g,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ee){Rt(c,c.return,ee)}if(c=g,d=c.updateQueue,d!==null){var I=c.stateNode;try{var H=d.shared.hiddenCallbacks;if(H!==null)for(d.shared.hiddenCallbacks=null,d=0;d<H.length;d++)rE(H[d],I)}catch(ee){Rt(c,c.return,ee)}}o&&T&64&&mT(g),Yc(g,g.return);break;case 27:_T(g);case 26:case 5:us(d,g,o),o&&c===null&&T&4&&gT(g),Yc(g,g.return);break;case 12:us(d,g,o);break;case 31:us(d,g,o),o&&T&4&&ST(d,g);break;case 13:us(d,g,o),o&&T&4&&AT(d,g);break;case 22:g.memoizedState===null&&us(d,g,o),Yc(g,g.return);break;case 30:break;default:us(d,g,o)}s=s.sibling}}function Jp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Pc(o))}function Zp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Pc(r))}function pi(r,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)RT(r,s,o,c),s=s.sibling}function RT(r,s,o,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:pi(r,s,o,c),d&2048&&Kc(9,s);break;case 1:pi(r,s,o,c);break;case 3:pi(r,s,o,c),d&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Pc(r)));break;case 12:if(d&2048){pi(r,s,o,c),r=s.stateNode;try{var g=s.memoizedProps,T=g.id,I=g.onPostCommit;typeof I=="function"&&I(T,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(H){Rt(s,s.return,H)}}else pi(r,s,o,c);break;case 31:pi(r,s,o,c);break;case 13:pi(r,s,o,c);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?pi(r,s,o,c):Qc(r,s):g._visibility&2?pi(r,s,o,c):(g._visibility|=2,dl(r,s,o,c,(s.subtreeFlags&10256)!==0||!1)),d&2048&&Jp(T,s);break;case 24:pi(r,s,o,c),d&2048&&Zp(s.alternate,s);break;default:pi(r,s,o,c)}}function dl(r,s,o,c,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=r,T=s,I=o,H=c,ee=T.flags;switch(T.tag){case 0:case 11:case 15:dl(g,T,I,H,d),Kc(8,T);break;case 23:break;case 22:var se=T.stateNode;T.memoizedState!==null?se._visibility&2?dl(g,T,I,H,d):Qc(g,T):(se._visibility|=2,dl(g,T,I,H,d)),d&&ee&2048&&Jp(T.alternate,T);break;case 24:dl(g,T,I,H,d),d&&ee&2048&&Zp(T.alternate,T);break;default:dl(g,T,I,H,d)}s=s.sibling}}function Qc(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,c=s,d=c.flags;switch(c.tag){case 22:Qc(o,c),d&2048&&Jp(c.alternate,c);break;case 24:Qc(o,c),d&2048&&Zp(c.alternate,c);break;default:Qc(o,c)}s=s.sibling}}var Xc=8192;function ml(r,s,o){if(r.subtreeFlags&Xc)for(r=r.child;r!==null;)IT(r,s,o),r=r.sibling}function IT(r,s,o){switch(r.tag){case 26:ml(r,s,o),r.flags&Xc&&r.memoizedState!==null&&jI(o,mi,r.memoizedState,r.memoizedProps);break;case 5:ml(r,s,o);break;case 3:case 4:var c=mi;mi=wf(r.stateNode.containerInfo),ml(r,s,o),mi=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=Xc,Xc=16777216,ml(r,s,o),Xc=c):ml(r,s,o));break;default:ml(r,s,o)}}function xT(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function Wc(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];In=c,DT(c,r)}xT(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)NT(r),r=r.sibling}function NT(r){switch(r.tag){case 0:case 11:case 15:Wc(r),r.flags&2048&&na(9,r,r.return);break;case 3:Wc(r);break;case 12:Wc(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,ff(r)):Wc(r);break;default:Wc(r)}}function ff(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];In=c,DT(c,r)}xT(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:na(8,s,s.return),ff(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,ff(s));break;default:ff(s)}r=r.sibling}}function DT(r,s){for(;In!==null;){var o=In;switch(o.tag){case 0:case 11:case 15:na(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Pc(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,In=c;else e:for(o=r;In!==null;){c=In;var d=c.sibling,g=c.return;if(TT(c),c===o){In=null;break e}if(d!==null){d.return=g,In=d;break e}In=g}}}var ZR={getCacheForType:function(r){var s=kn(dn),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o},cacheSignal:function(){return kn(dn).controller.signal}},eI=typeof WeakMap=="function"?WeakMap:Map,St=0,kt=null,lt=null,ut=0,Ct=0,Mr=null,ra=!1,pl=!1,eg=!1,hs=0,nn=0,ia=0,po=0,tg=0,Pr=0,gl=0,Jc=null,gr=null,ng=!1,df=0,OT=0,mf=1/0,pf=null,sa=null,An=0,aa=null,yl=null,fs=0,rg=0,ig=null,MT=null,Zc=0,sg=null;function kr(){return(St&2)!==0&&ut!==0?ut&-ut:$.T!==null?hg():ve()}function PT(){if(Pr===0)if((ut&536870912)===0||pt){var r=Si;Si<<=1,(Si&3932160)===0&&(Si=262144),Pr=r}else Pr=536870912;return r=Dr.current,r!==null&&(r.flags|=32),Pr}function yr(r,s,o){(r===kt&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(_l(r,0),oa(r,ut,Pr,!1)),Ai(r,o),((St&2)===0||r!==kt)&&(r===kt&&((St&2)===0&&(po|=o),nn===4&&oa(r,ut,Pr,!1)),Li(r))}function kT(r,s,o){if((St&6)!==0)throw Error(i(327));var c=!o&&(s&127)===0&&(s&r.expiredLanes)===0||Cr(r,s),d=c?rI(r,s):og(r,s,!0),g=c;do{if(d===0){pl&&!c&&oa(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!tI(o)){d=og(r,s,!1),g=!1;continue}if(d===2){if(g=s,r.errorRecoveryDisabledLanes&g)var T=0;else T=r.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var I=r;d=Jc;var H=I.current.memoizedState.isDehydrated;if(H&&(_l(I,T).flags|=256),T=og(I,T,!1),T!==2){if(eg&&!H){I.errorRecoveryDisabledLanes|=g,po|=g,d=4;break e}g=gr,gr=d,g!==null&&(gr===null?gr=g:gr.push.apply(gr,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){_l(r,0),oa(r,s,0,!0);break}e:{switch(c=r,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:oa(c,s,Pr,!ra);break e;case 2:gr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(d=df+300-rt(),10<d)){if(oa(c,s,Pr,!ra),wr(c,0,!0)!==0)break e;fs=s,c.timeoutHandle=fb(VT.bind(null,c,o,gr,pf,ng,s,Pr,po,gl,ra,g,"Throttled",-0,0),d);break e}VT(c,o,gr,pf,ng,s,Pr,po,gl,ra,g,null,-0,0)}}break}while(!0);Li(r)}function VT(r,s,o,c,d,g,T,I,H,ee,se,ce,ne,ie){if(r.timeoutHandle=-1,ce=s.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},IT(s,g,ce);var Ne=(g&62914560)===g?df-rt():(g&4194048)===g?OT-rt():0;if(Ne=UI(ce,Ne),Ne!==null){fs=g,r.cancelPendingCommit=Ne(qT.bind(null,r,s,g,o,c,d,T,I,H,se,ce,null,ne,ie)),oa(r,g,T,!ee);return}}qT(r,s,g,o,c,d,T,I,H)}function tI(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],g=d.getSnapshot;d=d.value;try{if(!xr(g(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function oa(r,s,o,c){s&=~tg,s&=~po,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var d=s;0<d;){var g=31-Gt(d),T=1<<g;c[g]=-1,d&=~T}o!==0&&Qi(r,o,s)}function gf(){return(St&6)===0?(eu(0),!1):!0}function ag(){if(lt!==null){if(Ct===0)var r=lt.return;else r=lt,ts=so=null,bp(r),ll=null,Vc=0,r=lt;for(;r!==null;)dT(r.alternate,r),r=r.return;lt=null}}function _l(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,TI(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),fs=0,ag(),kt=r,lt=o=Zi(r.current,null),ut=s,Ct=0,Mr=null,ra=!1,pl=Cr(r,s),eg=!1,gl=Pr=tg=po=ia=nn=0,gr=Jc=null,ng=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var d=31-Gt(c),g=1<<d;s|=r[d],c&=~g}return hs=s,Vh(),o}function LT(r,s){Je=null,$.H=qc,s===ol||s===qh?(s=Zv(),Ct=3):s===up?(s=Zv(),Ct=4):Ct=s===jp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mr=s,lt===null&&(nn=1,sf(r,Kr(s,r.current)))}function jT(){var r=Dr.current;return r===null?!0:(ut&4194048)===ut?Wr===null:(ut&62914560)===ut||(ut&536870912)!==0?r===Wr:!1}function UT(){var r=$.H;return $.H=qc,r===null?qc:r}function zT(){var r=$.A;return $.A=ZR,r}function yf(){nn=4,ra||(ut&4194048)!==ut&&Dr.current!==null||(pl=!0),(ia&134217727)===0&&(po&134217727)===0||kt===null||oa(kt,ut,Pr,!1)}function og(r,s,o){var c=St;St|=2;var d=UT(),g=zT();(kt!==r||ut!==s)&&(pf=null,_l(r,s)),s=!1;var T=nn;e:do try{if(Ct!==0&&lt!==null){var I=lt,H=Mr;switch(Ct){case 8:ag(),T=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(s=!0);var ee=Ct;if(Ct=0,Mr=null,vl(r,I,H,ee),o&&pl){T=0;break e}break;default:ee=Ct,Ct=0,Mr=null,vl(r,I,H,ee)}}nI(),T=nn;break}catch(se){LT(r,se)}while(!0);return s&&r.shellSuspendCounter++,ts=so=null,St=c,$.H=d,$.A=g,lt===null&&(kt=null,ut=0,Vh()),T}function nI(){for(;lt!==null;)BT(lt)}function rI(r,s){var o=St;St|=2;var c=UT(),d=zT();kt!==r||ut!==s?(pf=null,mf=rt()+500,_l(r,s)):pl=Cr(r,s);e:do try{if(Ct!==0&&lt!==null){s=lt;var g=Mr;t:switch(Ct){case 1:Ct=0,Mr=null,vl(r,s,g,1);break;case 2:case 9:if(Wv(g)){Ct=0,Mr=null,HT(s);break}s=function(){Ct!==2&&Ct!==9||kt!==r||(Ct=7),Li(r)},g.then(s,s);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:Wv(g)?(Ct=0,Mr=null,HT(s)):(Ct=0,Mr=null,vl(r,s,g,7));break;case 5:var T=null;switch(lt.tag){case 26:T=lt.memoizedState;case 5:case 27:var I=lt;if(T?Rb(T):I.stateNode.complete){Ct=0,Mr=null;var H=I.sibling;if(H!==null)lt=H;else{var ee=I.return;ee!==null?(lt=ee,_f(ee)):lt=null}break t}}Ct=0,Mr=null,vl(r,s,g,5);break;case 6:Ct=0,Mr=null,vl(r,s,g,6);break;case 8:ag(),nn=6;break e;default:throw Error(i(462))}}iI();break}catch(se){LT(r,se)}while(!0);return ts=so=null,$.H=c,$.A=d,St=o,lt!==null?0:(kt=null,ut=0,Vh(),nn)}function iI(){for(;lt!==null&&!zr();)BT(lt)}function BT(r){var s=hT(r.alternate,r,hs);r.memoizedProps=r.pendingProps,s===null?_f(r):lt=s}function HT(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=sT(o,s,s.pendingProps,s.type,void 0,ut);break;case 11:s=sT(o,s,s.pendingProps,s.type.render,s.ref,ut);break;case 5:bp(s);default:dT(o,s),s=lt=zv(s,hs),s=hT(o,s,hs)}r.memoizedProps=r.pendingProps,s===null?_f(r):lt=s}function vl(r,s,o,c){ts=so=null,bp(s),ll=null,Vc=0;var d=s.return;try{if($R(r,d,s,o,ut)){nn=1,sf(r,Kr(o,r.current)),lt=null;return}}catch(g){if(d!==null)throw lt=d,g;nn=1,sf(r,Kr(o,r.current)),lt=null;return}s.flags&32768?(pt||c===1?r=!0:pl||(ut&536870912)!==0?r=!1:(ra=r=!0,(c===2||c===9||c===3||c===6)&&(c=Dr.current,c!==null&&c.tag===13&&(c.flags|=16384))),FT(s,r)):_f(s)}function _f(r){var s=r;do{if((s.flags&32768)!==0){FT(s,ra);return}r=s.return;var o=QR(s.alternate,s,hs);if(o!==null){lt=o;return}if(s=s.sibling,s!==null){lt=s;return}lt=s=r}while(s!==null);nn===0&&(nn=5)}function FT(r,s){do{var o=XR(r.alternate,r);if(o!==null){o.flags&=32767,lt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){lt=r;return}lt=r=o}while(r!==null);nn=6,lt=null}function qT(r,s,o,c,d,g,T,I,H){r.cancelPendingCommit=null;do vf();while(An!==0);if((St&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Qm,_c(r,o,g,T,I,H),r===kt&&(lt=kt=null,ut=0),yl=s,aa=r,fs=o,rg=g,ig=d,MT=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,lI(an,function(){return QT(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,d=he.p,he.p=2,T=St,St|=4;try{WR(r,s,o)}finally{St=T,he.p=d,$.T=c}}An=1,GT(),$T(),KT()}}function GT(){if(An===1){An=0;var r=aa,s=yl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var c=he.p;he.p=2;var d=St;St|=4;try{wT(s,r);var g=vg,T=Dv(r.containerInfo),I=g.focusedElem,H=g.selectionRange;if(T!==I&&I&&I.ownerDocument&&Nv(I.ownerDocument.documentElement,I)){if(H!==null&&qm(I)){var ee=H.start,se=H.end;if(se===void 0&&(se=ee),"selectionStart"in I)I.selectionStart=ee,I.selectionEnd=Math.min(se,I.value.length);else{var ce=I.ownerDocument||document,ne=ce&&ce.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),Ne=I.textContent.length,je=Math.min(H.start,Ne),Mt=H.end===void 0?je:Math.min(H.end,Ne);!ie.extend&&je>Mt&&(T=Mt,Mt=je,je=T);var X=xv(I,je),G=xv(I,Mt);if(X&&G&&(ie.rangeCount!==1||ie.anchorNode!==X.node||ie.anchorOffset!==X.offset||ie.focusNode!==G.node||ie.focusOffset!==G.offset)){var Z=ce.createRange();Z.setStart(X.node,X.offset),ie.removeAllRanges(),je>Mt?(ie.addRange(Z),ie.extend(G.node,G.offset)):(Z.setEnd(G.node,G.offset),ie.addRange(Z))}}}}for(ce=[],ie=I;ie=ie.parentNode;)ie.nodeType===1&&ce.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ce.length;I++){var ae=ce[I];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Df=!!_g,vg=_g=null}finally{St=d,he.p=c,$.T=o}}r.current=s,An=2}}function $T(){if(An===2){An=0;var r=aa,s=yl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var c=he.p;he.p=2;var d=St;St|=4;try{ET(r,s.alternate,s)}finally{St=d,he.p=c,$.T=o}}An=3}}function KT(){if(An===4||An===3){An=0,hn();var r=aa,s=yl,o=fs,c=MT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?An=5:(An=0,yl=aa=null,YT(r,r.pendingLanes));var d=r.pendingLanes;if(d===0&&(sa=null),pe(o),s=s.stateNode,Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(Ar,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=$.T,d=he.p,he.p=2,$.T=null;try{for(var g=r.onRecoverableError,T=0;T<c.length;T++){var I=c[T];g(I.value,{componentStack:I.stack})}}finally{$.T=s,he.p=d}}(fs&3)!==0&&vf(),Li(r),d=r.pendingLanes,(o&261930)!==0&&(d&42)!==0?r===sg?Zc++:(Zc=0,sg=r):Zc=0,eu(0)}}function YT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Pc(s)))}function vf(){return GT(),$T(),KT(),QT()}function QT(){if(An!==5)return!1;var r=aa,s=rg;rg=0;var o=pe(fs),c=$.T,d=he.p;try{he.p=32>o?32:o,$.T=null,o=ig,ig=null;var g=aa,T=fs;if(An=0,yl=aa=null,fs=0,(St&6)!==0)throw Error(i(331));var I=St;if(St|=4,NT(g.current),RT(g,g.current,T,o),St=I,eu(0,!1),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(Ar,g)}catch{}return!0}finally{he.p=d,$.T=c,YT(r,s)}}function XT(r,s,o){s=Kr(o,s),s=Lp(r.stateNode,s,2),r=Zs(r,s,2),r!==null&&(Ai(r,2),Li(r))}function Rt(r,s,o){if(r.tag===3)XT(r,r,o);else for(;s!==null;){if(s.tag===3){XT(s,r,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(sa===null||!sa.has(c))){r=Kr(o,r),o=WE(2),c=Zs(s,o,2),c!==null&&(JE(o,c,s,r),Ai(c,2),Li(c));break}}s=s.return}}function lg(r,s,o){var c=r.pingCache;if(c===null){c=r.pingCache=new eI;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(o)||(eg=!0,d.add(o),r=sI.bind(null,r,s,o),s.then(r,r))}function sI(r,s,o){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,kt===r&&(ut&o)===o&&(nn===4||nn===3&&(ut&62914560)===ut&&300>rt()-df?(St&2)===0&&_l(r,0):tg|=o,gl===ut&&(gl=0)),Li(r)}function WT(r,s){s===0&&(s=Yi()),r=no(r,s),r!==null&&(Ai(r,s),Li(r))}function aI(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),WT(r,o)}function oI(r,s){var o=0;switch(r.tag){case 31:case 13:var c=r.stateNode,d=r.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),WT(r,o)}function lI(r,s){return at(r,s)}var Ef=null,El=null,cg=!1,Tf=!1,ug=!1,la=0;function Li(r){r!==El&&r.next===null&&(El===null?Ef=El=r:El=El.next=r),Tf=!0,cg||(cg=!0,uI())}function eu(r,s){if(!ug&&Tf){ug=!0;do for(var o=!1,c=Ef;c!==null;){if(r!==0){var d=c.pendingLanes;if(d===0)var g=0;else{var T=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-Gt(42|r)+1)-1,g&=d&~(T&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,tb(c,g))}else g=ut,g=wr(c,c===kt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Cr(c,g)||(o=!0,tb(c,g));c=c.next}while(o);ug=!1}}function cI(){JT()}function JT(){Tf=cg=!1;var r=0;la!==0&&EI()&&(r=la);for(var s=rt(),o=null,c=Ef;c!==null;){var d=c.next,g=ZT(c,s);g===0?(c.next=null,o===null?Ef=d:o.next=d,d===null&&(El=o)):(o=c,(r!==0||(g&3)!==0)&&(Tf=!0)),c=d}An!==0&&An!==5||eu(r),la!==0&&(la=0)}function ZT(r,s){for(var o=r.suspendedLanes,c=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var T=31-Gt(g),I=1<<T,H=d[T];H===-1?((I&o)===0||(I&c)!==0)&&(d[T]=Bo(I,s)):H<=s&&(r.expiredLanes|=I),g&=~I}if(s=kt,o=ut,o=wr(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,o===0||r===s&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&qt(c),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Cr(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(c!==null&&qt(c),pe(o)){case 2:case 8:o=Br;break;case 32:o=an;break;case 268435456:o=Zn;break;default:o=an}return c=eb.bind(null,r),o=at(o,c),r.callbackPriority=s,r.callbackNode=o,s}return c!==null&&c!==null&&qt(c),r.callbackPriority=2,r.callbackNode=null,2}function eb(r,s){if(An!==0&&An!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(vf()&&r.callbackNode!==o)return null;var c=ut;return c=wr(r,r===kt?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(kT(r,c,s),ZT(r,rt()),r.callbackNode!=null&&r.callbackNode===o?eb.bind(null,r):null)}function tb(r,s){if(vf())return null;kT(r,s,!0)}function uI(){bI(function(){(St&6)!==0?at(On,cI):JT()})}function hg(){if(la===0){var r=sl;r===0&&(r=tr,tr<<=1,(tr&261888)===0&&(tr=256)),la=r}return la}function nb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:qo(""+r)}function rb(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function hI(r,s,o,c,d){if(s==="submit"&&o&&o.stateNode===d){var g=nb((d[Se]||null).action),T=c.submitter;T&&(s=(s=T[Se]||null)?nb(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var I=new Ni("action","action",null,c,d);r.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(la!==0){var H=T?rb(d,T):new FormData(d);Dp(o,{pending:!0,data:H,method:d.method,action:g},null,H)}}else typeof g=="function"&&(I.preventDefault(),H=T?rb(d,T):new FormData(d),Dp(o,{pending:!0,data:H,method:d.method,action:g},g,H))},currentTarget:d}]})}}for(var fg=0;fg<Ym.length;fg++){var dg=Ym[fg],fI=dg.toLowerCase(),dI=dg[0].toUpperCase()+dg.slice(1);di(fI,"on"+dI)}di(Pv,"onAnimationEnd"),di(kv,"onAnimationIteration"),di(Vv,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di(xR,"onTransitionRun"),di(NR,"onTransitionStart"),di(DR,"onTransitionCancel"),di(Lv,"onTransitionEnd"),Gn("onMouseEnter",["mouseout","mouseover"]),Gn("onMouseLeave",["mouseout","mouseover"]),Gn("onPointerEnter",["pointerout","pointerover"]),Gn("onPointerLeave",["pointerout","pointerover"]),ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tu));function ib(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var c=r[o],d=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var I=c[T],H=I.instance,ee=I.currentTarget;if(I=I.listener,H!==g&&d.isPropagationStopped())break e;g=I,d.currentTarget=ee;try{g(d)}catch(se){kh(se)}d.currentTarget=null,g=H}else for(T=0;T<c.length;T++){if(I=c[T],H=I.instance,ee=I.currentTarget,I=I.listener,H!==g&&d.isPropagationStopped())break e;g=I,d.currentTarget=ee;try{g(d)}catch(se){kh(se)}d.currentTarget=null,g=H}}}}function ct(r,s){var o=s[ze];o===void 0&&(o=s[ze]=new Set);var c=r+"__bubble";o.has(c)||(sb(s,r,2,!1),o.add(c))}function mg(r,s,o){var c=0;s&&(c|=4),sb(o,r,c,s)}var bf="_reactListening"+Math.random().toString(36).slice(2);function pg(r){if(!r[bf]){r[bf]=!0,cr.forEach(function(o){o!=="selectionchange"&&(mI.has(o)||mg(o,!1,r),mg(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[bf]||(s[bf]=!0,mg("selectionchange",!1,s))}}function sb(r,s,o,c){switch(Pb(s)){case 2:var d=HI;break;case 8:d=FI;break;default:d=Ng}o=d.bind(null,s,o,r),d=void 0,!Ya||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?r.addEventListener(s,o,{capture:!0,passive:d}):r.addEventListener(s,o,!0):d!==void 0?r.addEventListener(s,o,{passive:d}):r.addEventListener(s,o,!1)}function gg(r,s,o,c,d){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var I=c.stateNode.containerInfo;if(I===d)break;if(T===4)for(T=c.return;T!==null;){var H=T.tag;if((H===3||H===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;I!==null;){if(T=Vt(I),T===null)return;if(H=T.tag,H===5||H===6||H===26||H===27){c=g=T;continue e}I=I.parentNode}}c=c.return}Fs(function(){var ee=g,se=Fr(o),ce=[];e:{var ne=jv.get(r);if(ne!==void 0){var ie=Ni,Ne=r;switch(r){case"keypress":if(Xa(o)===0)break e;case"keydown":case"keyup":ie=Oh;break;case"focusin":Ne="focus",ie=Ja;break;case"focusout":Ne="blur",ie=Ja;break;case"beforeblur":case"afterblur":ie=Ja;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Sh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=_;break;case Pv:case kv:case Vv:ie=wh;break;case Lv:ie=D;break;case"scroll":case"scrollend":ie=wc;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=Ch;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Ji;break;case"toggle":case"beforetoggle":ie=We}var je=(s&4)!==0,Mt=!je&&(r==="scroll"||r==="scrollend"),X=je?ne!==null?ne+"Capture":null:ne;je=[];for(var G=ee,Z;G!==null;){var ae=G;if(Z=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Z===null||X===null||(ae=ci(G,X),ae!=null&&je.push(nu(G,ae,Z))),Mt)break;G=G.return}0<je.length&&(ne=new ie(ne,Ne,null,o,se),ce.push({event:ne,listeners:je}))}}if((s&7)===0){e:{if(ne=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",ne&&o!==bc&&(Ne=o.relatedTarget||o.fromElement)&&(Vt(Ne)||Ne[Ie]))break e;if((ie||ne)&&(ne=se.window===se?se:(ne=se.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(Ne=o.relatedTarget||o.toElement,ie=ee,Ne=Ne?Vt(Ne):null,Ne!==null&&(Mt=l(Ne),je=Ne.tag,Ne!==Mt||je!==5&&je!==27&&je!==6)&&(Ne=null)):(ie=null,Ne=ee),ie!==Ne)){if(je=Cc,ae="onMouseLeave",X="onMouseEnter",G="mouse",(r==="pointerout"||r==="pointerover")&&(je=Ji,ae="onPointerLeave",X="onPointerEnter",G="pointer"),Mt=ie==null?ne:Lt(ie),Z=Ne==null?ne:Lt(Ne),ne=new je(ae,G+"leave",ie,o,se),ne.target=Mt,ne.relatedTarget=Z,ae=null,Vt(se)===ee&&(je=new je(X,G+"enter",Ne,o,se),je.target=Z,je.relatedTarget=Mt,ae=je),Mt=ae,ie&&Ne)t:{for(je=pI,X=ie,G=Ne,Z=0,ae=X;ae;ae=je(ae))Z++;ae=0;for(var Ve=G;Ve;Ve=je(Ve))ae++;for(;0<Z-ae;)X=je(X),Z--;for(;0<ae-Z;)G=je(G),ae--;for(;Z--;){if(X===G||G!==null&&X===G.alternate){je=X;break t}X=je(X),G=je(G)}je=null}else je=null;ie!==null&&ab(ce,ne,ie,je,!1),Ne!==null&&Mt!==null&&ab(ce,Mt,Ne,je,!0)}}e:{if(ne=ee?Lt(ee):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var yt=Sv;else if(Tv(ne))if(Av)yt=CR;else{yt=AR;var De=SR}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?ee&&Fo(ee.elementType)&&(yt=Sv):yt=wR;if(yt&&(yt=yt(r,ee))){bv(ce,yt,o,se);break e}De&&De(r,ne,ee),r==="focusout"&&ee&&ne.type==="number"&&ee.memoizedProps.value!=null&&vc(ne,"number",ne.value)}switch(De=ee?Lt(ee):window,r){case"focusin":(Tv(De)||De.contentEditable==="true")&&(Wo=De,Gm=ee,Dc=null);break;case"focusout":Dc=Gm=Wo=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Ov(ce,o,se);break;case"selectionchange":if(IR)break;case"keydown":case"keyup":Ov(ce,o,se)}var tt;if(bt)e:{switch(r){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Xo?Za(r,o)&&(ht="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ht="onCompositionStart");ht&&(Mi&&o.locale!=="ko"&&(Xo||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Xo&&(tt=Ac()):(xi=se,Sc="value"in xi?xi.value:xi.textContent,Xo=!0)),De=Sf(ee,ht),0<De.length&&(ht=new Oi(ht,r,null,o,se),ce.push({event:ht,listeners:De}),tt?ht.data=tt:(tt=Qo(o),tt!==null&&(ht.data=tt)))),(tt=Gr?vR(r,o):ER(r,o))&&(ht=Sf(ee,"onBeforeInput"),0<ht.length&&(De=new Oi("onBeforeInput","beforeinput",null,o,se),ce.push({event:De,listeners:ht}),De.data=tt)),hI(ce,r,ee,o,se)}ib(ce,s)})}function nu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function Sf(r,s){for(var o=s+"Capture",c=[];r!==null;){var d=r,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=ci(r,o),d!=null&&c.unshift(nu(r,d,g)),d=ci(r,s),d!=null&&c.push(nu(r,d,g))),r.tag===3)return c;r=r.return}return[]}function pI(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ab(r,s,o,c,d){for(var g=s._reactName,T=[];o!==null&&o!==c;){var I=o,H=I.alternate,ee=I.stateNode;if(I=I.tag,H!==null&&H===c)break;I!==5&&I!==26&&I!==27||ee===null||(H=ee,d?(ee=ci(o,g),ee!=null&&T.unshift(nu(o,ee,H))):d||(ee=ci(o,g),ee!=null&&T.push(nu(o,ee,H)))),o=o.return}T.length!==0&&r.push({event:s,listeners:T})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function ob(r){return(typeof r=="string"?r:""+r).replace(gI,`
`).replace(yI,"")}function lb(r,s){return s=ob(s),ob(r)===s}function Ot(r,s,o,c,d,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||fr(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&fr(r,""+c);break;case"className":fn(r,"class",c);break;case"tabIndex":fn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(r,o,c);break;case"style":Tc(r,c,g);break;case"data":if(s!=="object"){fn(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=qo(""+c),r.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Ot(r,s,"name",d.name,d,null),Ot(r,s,"formEncType",d.formEncType,d,null),Ot(r,s,"formMethod",d.formMethod,d,null),Ot(r,s,"formTarget",d.formTarget,d,null)):(Ot(r,s,"encType",d.encType,d,null),Ot(r,s,"method",d.method,d,null),Ot(r,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(o);break}c=qo(""+c),r.setAttribute(o,c);break;case"onClick":c!=null&&(r.onclick=li);break;case"onScroll":c!=null&&ct("scroll",r);break;case"onScrollEnd":c!=null&&ct("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}o=qo(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""+c):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":c===!0?r.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(o,c):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(o,c):r.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(o):r.setAttribute(o,c);break;case"popover":ct("beforetoggle",r),ct("toggle",r),Xt(r,"popover",c);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Xt(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=bh.get(o)||o,Xt(r,o,c))}}function yg(r,s,o,c,d,g){switch(o){case"style":Tc(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof c=="string"?fr(r,c):(typeof c=="number"||typeof c=="bigint")&&fr(r,""+c);break;case"onScroll":c!=null&&ct("scroll",r);break;case"onScrollEnd":c!=null&&ct("scrollend",r);break;case"onClick":c!=null&&(r.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),g=r[Se]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,d),typeof c=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,c,d);break e}o in r?r[o]=c:c===!0?r.setAttribute(o,""):Xt(r,o,c)}}}function Ln(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",r),ct("load",r);var c=!1,d=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ot(r,s,g,T,o,null)}}d&&Ot(r,s,"srcSet",o.srcSet,o,null),c&&Ot(r,s,"src",o.src,o,null);return;case"input":ct("invalid",r);var I=g=T=d=null,H=null,ee=null;for(c in o)if(o.hasOwnProperty(c)){var se=o[c];if(se!=null)switch(c){case"name":d=se;break;case"type":T=se;break;case"checked":H=se;break;case"defaultChecked":ee=se;break;case"value":g=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,s));break;default:Ot(r,s,c,se,o,null)}}vh(r,g,I,H,ee,T,d,!1);return;case"select":ct("invalid",r),c=T=g=null;for(d in o)if(o.hasOwnProperty(d)&&(I=o[d],I!=null))switch(d){case"value":g=I;break;case"defaultValue":T=I;break;case"multiple":c=I;default:Ot(r,s,d,I,o,null)}s=g,o=T,r.multiple=!!c,s!=null?Us(r,!!c,s,!1):o!=null&&Us(r,!!c,o,!0);return;case"textarea":ct("invalid",r),g=d=c=null;for(T in o)if(o.hasOwnProperty(T)&&(I=o[T],I!=null))switch(T){case"value":c=I;break;case"defaultValue":d=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:Ot(r,s,T,I,o,null)}zs(r,c,d,g);return;case"option":for(H in o)if(o.hasOwnProperty(H)&&(c=o[H],c!=null))switch(H){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ot(r,s,H,c,o,null)}return;case"dialog":ct("beforetoggle",r),ct("toggle",r),ct("cancel",r),ct("close",r);break;case"iframe":case"object":ct("load",r);break;case"video":case"audio":for(c=0;c<tu.length;c++)ct(tu[c],r);break;case"image":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"embed":case"source":case"link":ct("error",r),ct("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ee in o)if(o.hasOwnProperty(ee)&&(c=o[ee],c!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ot(r,s,ee,c,o,null)}return;default:if(Fo(s)){for(se in o)o.hasOwnProperty(se)&&(c=o[se],c!==void 0&&yg(r,s,se,c,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(c=o[I],c!=null&&Ot(r,s,I,c,o,null))}function _I(r,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,I=null,H=null,ee=null,se=null;for(ie in o){var ce=o[ie];if(o.hasOwnProperty(ie)&&ce!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=ce;default:c.hasOwnProperty(ie)||Ot(r,s,ie,null,c,ce)}}for(var ne in c){var ie=c[ne];if(ce=o[ne],c.hasOwnProperty(ne)&&(ie!=null||ce!=null))switch(ne){case"type":g=ie;break;case"name":d=ie;break;case"checked":ee=ie;break;case"defaultChecked":se=ie;break;case"value":T=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,s));break;default:ie!==ce&&Ot(r,s,ne,ie,c,ce)}}Ho(r,T,I,H,ee,se,g,d);return;case"select":ie=T=I=ne=null;for(g in o)if(H=o[g],o.hasOwnProperty(g)&&H!=null)switch(g){case"value":break;case"multiple":ie=H;default:c.hasOwnProperty(g)||Ot(r,s,g,null,c,H)}for(d in c)if(g=c[d],H=o[d],c.hasOwnProperty(d)&&(g!=null||H!=null))switch(d){case"value":ne=g;break;case"defaultValue":I=g;break;case"multiple":T=g;default:g!==H&&Ot(r,s,d,g,c,H)}s=I,o=T,c=ie,ne!=null?Us(r,!!o,ne,!1):!!c!=!!o&&(s!=null?Us(r,!!o,s,!0):Us(r,!!o,o?[]:"",!1));return;case"textarea":ie=ne=null;for(I in o)if(d=o[I],o.hasOwnProperty(I)&&d!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Ot(r,s,I,null,c,d)}for(T in c)if(d=c[T],g=o[T],c.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":ne=d;break;case"defaultValue":ie=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&Ot(r,s,T,d,c,g)}Eh(r,ne,ie);return;case"option":for(var Ne in o)if(ne=o[Ne],o.hasOwnProperty(Ne)&&ne!=null&&!c.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:Ot(r,s,Ne,null,c,ne)}for(H in c)if(ne=c[H],ie=o[H],c.hasOwnProperty(H)&&ne!==ie&&(ne!=null||ie!=null))switch(H){case"selected":r.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Ot(r,s,H,ne,c,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in o)ne=o[je],o.hasOwnProperty(je)&&ne!=null&&!c.hasOwnProperty(je)&&Ot(r,s,je,null,c,ne);for(ee in c)if(ne=c[ee],ie=o[ee],c.hasOwnProperty(ee)&&ne!==ie&&(ne!=null||ie!=null))switch(ee){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,s));break;default:Ot(r,s,ee,ne,c,ie)}return;default:if(Fo(s)){for(var Mt in o)ne=o[Mt],o.hasOwnProperty(Mt)&&ne!==void 0&&!c.hasOwnProperty(Mt)&&yg(r,s,Mt,void 0,c,ne);for(se in c)ne=c[se],ie=o[se],!c.hasOwnProperty(se)||ne===ie||ne===void 0&&ie===void 0||yg(r,s,se,ne,c,ie);return}}for(var X in o)ne=o[X],o.hasOwnProperty(X)&&ne!=null&&!c.hasOwnProperty(X)&&Ot(r,s,X,null,c,ne);for(ce in c)ne=c[ce],ie=o[ce],!c.hasOwnProperty(ce)||ne===ie||ne==null&&ie==null||Ot(r,s,ce,ne,c,ie)}function cb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vI(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var d=o[c],g=d.transferSize,T=d.initiatorType,I=d.duration;if(g&&I&&cb(T)){for(T=0,I=d.responseEnd,c+=1;c<o.length;c++){var H=o[c],ee=H.startTime;if(ee>I)break;var se=H.transferSize,ce=H.initiatorType;se&&cb(ce)&&(H=H.responseEnd,T+=se*(H<I?1:(I-ee)/(H-ee)))}if(--c,s+=8*(g+T)/(d.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _g=null,vg=null;function Af(r){return r.nodeType===9?r:r.ownerDocument}function ub(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hb(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Eg(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Tg=null;function EI(){var r=window.event;return r&&r.type==="popstate"?r===Tg?!1:(Tg=r,!0):(Tg=null,!1)}var fb=typeof setTimeout=="function"?setTimeout:void 0,TI=typeof clearTimeout=="function"?clearTimeout:void 0,db=typeof Promise=="function"?Promise:void 0,bI=typeof queueMicrotask=="function"?queueMicrotask:typeof db<"u"?function(r){return db.resolve(null).then(r).catch(SI)}:fb;function SI(r){setTimeout(function(){throw r})}function ca(r){return r==="head"}function mb(r,s){var o=s,c=0;do{var d=o.nextSibling;if(r.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(c===0){r.removeChild(d),Al(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")ru(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,ru(o);for(var g=o.firstChild;g;){var T=g.nextSibling,I=g.nodeName;g[It]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&ru(r.ownerDocument.body);o=d}while(o);Al(s)}function pb(r,s){var o=r;r=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=c}while(o)}function bg(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":bg(o),zt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function AI(r,s,o,c){for(;r.nodeType===1;){var d=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[It])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==d.rel||r.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||r.getAttribute("title")!==(d.title==null?null:d.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(d.src==null?null:d.src)||r.getAttribute("type")!==(d.type==null?null:d.type)||r.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=Jr(r.nextSibling),r===null)break}return null}function wI(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Jr(r.nextSibling),r===null))return null;return r}function gb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Jr(r.nextSibling),r===null))return null;return r}function Sg(r){return r.data==="$?"||r.data==="$~"}function Ag(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function CI(r,s){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Jr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var wg=null;function yb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(s===0)return Jr(r.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}r=r.nextSibling}return null}function _b(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return r;s--}else o!=="/$"&&o!=="/&"||s++}r=r.previousSibling}return null}function vb(r,s,o){switch(s=Af(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function ru(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);zt(r)}var Zr=new Map,Eb=new Set;function wf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ds=he.d;he.d={f:RI,r:II,D:xI,C:NI,L:DI,m:OI,X:PI,S:MI,M:kI};function RI(){var r=ds.f(),s=gf();return r||s}function II(r){var s=Ze(r);s!==null&&s.tag===5&&s.type==="form"?LE(s):ds.r(r)}var Tl=typeof document>"u"?null:document;function Tb(r,s,o){var c=Tl;if(c&&typeof s=="string"&&s){var d=hr(s);d='link[rel="'+r+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Eb.has(d)||(Eb.add(d),r={rel:r,crossOrigin:o,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),Ln(s,"link",r),jt(s),c.head.appendChild(s)))}}function xI(r){ds.D(r),Tb("dns-prefetch",r,null)}function NI(r,s){ds.C(r,s),Tb("preconnect",r,s)}function DI(r,s,o){ds.L(r,s,o);var c=Tl;if(c&&r&&s){var d='link[rel="preload"][as="'+hr(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+hr(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+hr(o.imageSizes)+'"]')):d+='[href="'+hr(r)+'"]';var g=d;switch(s){case"style":g=bl(r);break;case"script":g=Sl(r)}Zr.has(g)||(r=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Zr.set(g,r),c.querySelector(d)!==null||s==="style"&&c.querySelector(iu(g))||s==="script"&&c.querySelector(su(g))||(s=c.createElement("link"),Ln(s,"link",r),jt(s),c.head.appendChild(s)))}}function OI(r,s){ds.m(r,s);var o=Tl;if(o&&r){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+hr(c)+'"][href="'+hr(r)+'"]',g=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Sl(r)}if(!Zr.has(g)&&(r=v({rel:"modulepreload",href:r},s),Zr.set(g,r),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(su(g)))return}c=o.createElement("link"),Ln(c,"link",r),jt(c),o.head.appendChild(c)}}}function MI(r,s,o){ds.S(r,s,o);var c=Tl;if(c&&r){var d=Rn(c).hoistableStyles,g=bl(r);s=s||"default";var T=d.get(g);if(!T){var I={loading:0,preload:null};if(T=c.querySelector(iu(g)))I.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Zr.get(g))&&Cg(r,o);var H=T=c.createElement("link");jt(H),Ln(H,"link",r),H._p=new Promise(function(ee,se){H.onload=ee,H.onerror=se}),H.addEventListener("load",function(){I.loading|=1}),H.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Cf(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:I},d.set(g,T)}}}function PI(r,s){ds.X(r,s);var o=Tl;if(o&&r){var c=Rn(o).hoistableScripts,d=Sl(r),g=c.get(d);g||(g=o.querySelector(su(d)),g||(r=v({src:r,async:!0},s),(s=Zr.get(d))&&Rg(r,s),g=o.createElement("script"),jt(g),Ln(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function kI(r,s){ds.M(r,s);var o=Tl;if(o&&r){var c=Rn(o).hoistableScripts,d=Sl(r),g=c.get(d);g||(g=o.querySelector(su(d)),g||(r=v({src:r,async:!0,type:"module"},s),(s=Zr.get(d))&&Rg(r,s),g=o.createElement("script"),jt(g),Ln(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(d,g))}}function bb(r,s,o,c){var d=(d=Ae.current)?wf(d):null;if(!d)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=bl(o.href),o=Rn(d).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=bl(o.href);var g=Rn(d).hoistableStyles,T=g.get(r);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,T),(g=d.querySelector(iu(r)))&&!g._p&&(T.instance=g,T.state.loading=5),Zr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Zr.set(r,o),g||VI(d,r,o,T.state))),s&&c===null)throw Error(i(528,""));return T}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Sl(o),o=Rn(d).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function bl(r){return'href="'+hr(r)+'"'}function iu(r){return'link[rel="stylesheet"]['+r+"]"}function Sb(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function VI(r,s,o,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Ln(s,"link",o),jt(s),r.head.appendChild(s))}function Sl(r){return'[src="'+hr(r)+'"]'}function su(r){return"script[async]"+r}function Ab(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+hr(o.href)+'"]');if(c)return s.instance=c,jt(c),c;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),jt(c),Ln(c,"style",d),Cf(c,o.precedence,r),s.instance=c;case"stylesheet":d=bl(o.href);var g=r.querySelector(iu(d));if(g)return s.state.loading|=4,s.instance=g,jt(g),g;c=Sb(o),(d=Zr.get(d))&&Cg(c,d),g=(r.ownerDocument||r).createElement("link"),jt(g);var T=g;return T._p=new Promise(function(I,H){T.onload=I,T.onerror=H}),Ln(g,"link",c),s.state.loading|=4,Cf(g,o.precedence,r),s.instance=g;case"script":return g=Sl(o.src),(d=r.querySelector(su(g)))?(s.instance=d,jt(d),d):(c=o,(d=Zr.get(g))&&(c=v({},o),Rg(c,d)),r=r.ownerDocument||r,d=r.createElement("script"),jt(d),Ln(d,"link",c),r.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Cf(c,o.precedence,r));return s.instance}function Cf(r,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,g=d,T=0;T<c.length;T++){var I=c[T];if(I.dataset.precedence===s)g=I;else if(g!==d)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Cg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Rg(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Rf=null;function wb(r,s,o){if(Rf===null){var c=new Map,d=Rf=new Map;d.set(o,c)}else d=Rf,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(r))return c;for(c.set(r,null),o=o.getElementsByTagName(r),d=0;d<o.length;d++){var g=o[d];if(!(g[It]||g[Te]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=r+T;var I=c.get(T);I?I.push(g):c.set(T,[g])}}return c}function Cb(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function LI(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Rb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function jI(r,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=bl(c.href),g=s.querySelector(iu(d));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=If.bind(r),s.then(r,r)),o.state.loading|=4,o.instance=g,jt(g);return}g=s.ownerDocument||s,c=Sb(c),(d=Zr.get(d))&&Cg(c,d),g=g.createElement("link"),jt(g);var T=g;T._p=new Promise(function(I,H){T.onload=I,T.onerror=H}),Ln(g,"link",c),o.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=If.bind(r),s.addEventListener("load",o),s.addEventListener("error",o))}}var Ig=0;function UI(r,s){return r.stylesheets&&r.count===0&&Nf(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var c=setTimeout(function(){if(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+s);0<r.imgBytes&&Ig===0&&(Ig=62500*vI());var d=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Nf(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>Ig?50:800)+s);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function If(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xf=null;function Nf(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xf=new Map,s.forEach(zI,r),xf=null,If.call(r))}function zI(r,s){if(!(s.state.loading&4)){var o=xf.get(r);if(o)var c=o.get(null);else{o=new Map,xf.set(r,o);for(var d=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),c=T)}c&&o.set(null,c)}d=s.instance,T=d.getAttribute("data-precedence"),g=o.get(T)||c,g===c&&o.set(null,d),o.set(T,d),this.count++,c=If.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),g?g.parentNode.insertBefore(d,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(d,r.firstChild)),s.state.loading|=4}}var au={$$typeof:U,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function BI(r,s,o,c,d,g,T,I,H){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Ib(r,s,o,c,d,g,T,I,H,ee,se,ce){return r=new BI(r,s,o,T,H,ee,se,ce,I),s=1,g===!0&&(s|=24),g=Nr(3,null,null,s),r.current=g,g.stateNode=r,s=op(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},hp(g),r}function xb(r){return r?(r=el,r):el}function Nb(r,s,o,c,d,g){d=xb(d),c.context===null?c.context=d:c.pendingContext=d,c=Js(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Zs(r,c,s),o!==null&&(yr(o,r,s),jc(o,r,s))}function Db(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function xg(r,s){Db(r,s),(r=r.alternate)&&Db(r,s)}function Ob(r){if(r.tag===13||r.tag===31){var s=no(r,67108864);s!==null&&yr(s,r,67108864),xg(r,67108864)}}function Mb(r){if(r.tag===13||r.tag===31){var s=kr();s=te(s);var o=no(r,s);o!==null&&yr(o,r,s),xg(r,s)}}var Df=!0;function HI(r,s,o,c){var d=$.T;$.T=null;var g=he.p;try{he.p=2,Ng(r,s,o,c)}finally{he.p=g,$.T=d}}function FI(r,s,o,c){var d=$.T;$.T=null;var g=he.p;try{he.p=8,Ng(r,s,o,c)}finally{he.p=g,$.T=d}}function Ng(r,s,o,c){if(Df){var d=Dg(c);if(d===null)gg(r,s,c,Of,o),kb(r,c);else if(GI(d,r,s,o,c))c.stopPropagation();else if(kb(r,c),s&4&&-1<qI.indexOf(r)){for(;d!==null;){var g=Ze(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=Hr(g.pendingLanes);if(T!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;T;){var H=1<<31-Gt(T);I.entanglements[1]|=H,T&=~H}Li(g),(St&6)===0&&(mf=rt()+500,eu(0))}}break;case 31:case 13:I=no(g,2),I!==null&&yr(I,g,2),gf(),xg(g,2)}if(g=Dg(c),g===null&&gg(r,s,c,Of,o),g===d)break;d=g}d!==null&&c.stopPropagation()}else gg(r,s,c,null,o)}}function Dg(r){return r=Fr(r),Og(r)}var Of=null;function Og(r){if(Of=null,r=Vt(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=u(s),r!==null)return r;r=null}else if(o===31){if(r=f(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Of=r,null}function Pb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sn()){case On:return 2;case Br:return 8;case an:case Fn:return 32;case Zn:return 268435456;default:return 32}default:return 32}}var Mg=!1,ua=null,ha=null,fa=null,ou=new Map,lu=new Map,da=[],qI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kb(r,s){switch(r){case"focusin":case"focusout":ua=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":ou.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(s.pointerId)}}function cu(r,s,o,c,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[d]},s!==null&&(s=Ze(s),s!==null&&Ob(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),r)}function GI(r,s,o,c,d){switch(s){case"focusin":return ua=cu(ua,r,s,o,c,d),!0;case"dragenter":return ha=cu(ha,r,s,o,c,d),!0;case"mouseover":return fa=cu(fa,r,s,o,c,d),!0;case"pointerover":var g=d.pointerId;return ou.set(g,cu(ou.get(g)||null,r,s,o,c,d)),!0;case"gotpointercapture":return g=d.pointerId,lu.set(g,cu(lu.get(g)||null,r,s,o,c,d)),!0}return!1}function Vb(r){var s=Vt(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){r.blockedOn=s,Ce(r.priority,function(){Mb(o)});return}}else if(s===31){if(s=f(o),s!==null){r.blockedOn=s,Ce(r.priority,function(){Mb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mf(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Dg(r.nativeEvent);if(o===null){o=r.nativeEvent;var c=new o.constructor(o.type,o);bc=c,o.target.dispatchEvent(c),bc=null}else return s=Ze(o),s!==null&&Ob(s),r.blockedOn=o,!1;s.shift()}return!0}function Lb(r,s,o){Mf(r)&&o.delete(s)}function $I(){Mg=!1,ua!==null&&Mf(ua)&&(ua=null),ha!==null&&Mf(ha)&&(ha=null),fa!==null&&Mf(fa)&&(fa=null),ou.forEach(Lb),lu.forEach(Lb)}function Pf(r,s){r.blockedOn===s&&(r.blockedOn=null,Mg||(Mg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$I)))}var kf=null;function jb(r){kf!==r&&(kf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kf===r&&(kf=null);for(var s=0;s<r.length;s+=3){var o=r[s],c=r[s+1],d=r[s+2];if(typeof c!="function"){if(Og(c||o)===null)continue;break}var g=Ze(o);g!==null&&(r.splice(s,3),s-=3,Dp(g,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function Al(r){function s(H){return Pf(H,r)}ua!==null&&Pf(ua,r),ha!==null&&Pf(ha,r),fa!==null&&Pf(fa,r),ou.forEach(s),lu.forEach(s);for(var o=0;o<da.length;o++){var c=da[o];c.blockedOn===r&&(c.blockedOn=null)}for(;0<da.length&&(o=da[0],o.blockedOn===null);)Vb(o),o.blockedOn===null&&da.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],g=o[c+1],T=d[Se]||null;if(typeof g=="function")T||jb(o);else if(T){var I=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[Se]||null)I=T.formAction;else if(Og(d)!==null)continue}else I=T.action;typeof I=="function"?o[c+1]=I:(o.splice(c,3),c-=3),jb(o)}}}function Ub(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Pg(r){this._internalRoot=r}Vf.prototype.render=Pg.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,c=kr();Nb(o,c,r,s,null,null)},Vf.prototype.unmount=Pg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Nb(r.current,2,null,r,null,null),gf(),s[Ie]=null}};function Vf(r){this._internalRoot=r}Vf.prototype.unstable_scheduleHydration=function(r){if(r){var s=ve();r={blockedOn:null,target:r,priority:s};for(var o=0;o<da.length&&s!==0&&s<da[o].priority;o++);da.splice(o,0,r),o===0&&Vb(r)}};var zb=e.version;if(zb!=="19.2.4")throw Error(i(527,zb,"19.2.4"));he.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var KI={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lf.isDisabled&&Lf.supportsFiber)try{Ar=Lf.inject(KI),Pt=Lf}catch{}}return hu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,c="",d=KE,g=YE,T=QE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=Ib(r,1,!1,null,null,o,c,null,d,g,T,Ub),r[Ie]=s.current,pg(r),new Pg(s)},hu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var c=!1,d="",g=KE,T=YE,I=QE,H=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(H=o.formState)),s=Ib(r,1,!0,s,o??null,c,d,H,g,T,I,Ub),s.context=xb(null),o=s.current,c=kr(),c=te(c),d=Js(c),d.callback=null,Zs(o,d,c),o=c,s.current.lanes=o,Ai(s,o),Li(s),r[Ie]=s.current,pg(r),new Vf(s)},hu.version="19.2.4",hu}var Xb;function ax(){if(Xb)return jg.exports;Xb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jg.exports=sx(),jg.exports}var ox=ax();const lx=RA(ox);var Hg={exports:{}},Fg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb;function cx(){if(Wb)return Fg;Wb=1;var n=Zd();function e(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,a=n.useRef,l=n.useEffect,u=n.useMemo,f=n.useDebugValue;return Fg.useSyncExternalStoreWithSelector=function(m,p,y,v,b){var w=a(null);if(w.current===null){var M={hasValue:!1,value:null};w.current=M}else M=w.current;w=u(function(){function N(Y){if(!L){if(L=!0,V=Y,Y=v(Y),b!==void 0&&M.hasValue){var Q=M.value;if(b(Q,Y))return U=Q}return U=Y}if(Q=U,t(V,Y))return Q;var A=v(Y);return b!==void 0&&b(Q,A)?(V=Y,Q):(V=Y,U=A)}var L=!1,V,U,q=y===void 0?null:y;return[function(){return N(p())},q===null?void 0:function(){return N(q())}]},[p,y,v,b]);var z=i(m,w[0],w[1]);return l(function(){M.hasValue=!0,M.value=z},[z]),f(z),z},Fg}var Jb;function ux(){return Jb||(Jb=1,Hg.exports=cx()),Hg.exports}var hx=ux();function fx(n){n()}function dx(){let n=null,e=null;return{clear(){n=null,e=null},notify(){fx(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const a=e={callback:t,next:null,prev:e};return a.prev?a.prev.next=a:n=a,function(){!i||n===null||(i=!1,a.next?a.next.prev=a.prev:e=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}var Zb={notify(){},get:()=>[]};function mx(n,e){let t,i=Zb,a=0,l=!1;function u(z){y();const N=i.subscribe(z);let L=!1;return()=>{L||(L=!0,N(),v())}}function f(){i.notify()}function m(){M.onStateChange&&M.onStateChange()}function p(){return l}function y(){a++,t||(t=n.subscribe(m),i=dx())}function v(){a--,t&&a===0&&(t(),t=void 0,i.clear(),i=Zb)}function b(){l||(l=!0,y())}function w(){l&&(l=!1,v())}const M={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:m,isSubscribed:p,trySubscribe:b,tryUnsubscribe:w,getListeners:()=>i};return M}var px=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gx=px(),yx=()=>typeof navigator<"u"&&navigator.product==="ReactNative",_x=yx(),vx=()=>gx||_x?O.useLayoutEffect:O.useEffect,Ex=vx(),qg=Symbol.for("react-redux-context"),Gg=typeof globalThis<"u"?globalThis:{};function Tx(){if(!O.createContext)return{};const n=Gg[qg]??(Gg[qg]=new Map);let e=n.get(O.createContext);return e||(e=O.createContext(null),n.set(O.createContext,e)),e}var Da=Tx();function bx(n){const{children:e,context:t,serverState:i,store:a}=n,l=O.useMemo(()=>{const m=mx(a);return{store:a,subscription:m,getServerState:i?()=>i:void 0}},[a,i]),u=O.useMemo(()=>a.getState(),[a]);Ex(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),u!==a.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,u]);const f=t||Da;return O.createElement(f.Provider,{value:l},e)}var Sx=bx;function o_(n=Da){return function(){return O.useContext(n)}}var NA=o_();function DA(n=Da){const e=n===Da?NA:o_(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var Ax=DA();function wx(n=Da){const e=n===Da?Ax:DA(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var Cx=wx(),Rx=(n,e)=>n===e;function Ix(n=Da){const e=n===Da?NA:o_(n),t=(i,a={})=>{const{equalityFn:l=Rx}=typeof a=="function"?{equalityFn:a}:a,u=e(),{store:f,subscription:m,getServerState:p}=u;O.useRef(!0);const y=O.useCallback({[i.name](b){return i(b)}}[i.name],[i]),v=hx.useSyncExternalStoreWithSelector(m.addNestedSub,f.getState,p||f.getState,y,l);return O.useDebugValue(v),v};return Object.assign(t,{withTypes:()=>t}),t}var xx=Ix();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var OA=n=>{throw TypeError(n)},Nx=(n,e,t)=>e.has(n)||OA("Cannot "+t),$g=(n,e,t)=>(Nx(n,e,"read from private field"),t?t.call(n):e.get(n)),Dx=(n,e,t)=>e.has(n)?OA("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),e0="popstate";function Ox(n={}){function e(a,l){let{pathname:u="/",search:f="",hash:m=""}=Ms(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),ku("",{pathname:u,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let m=a.location.href,p=m.indexOf("#");f=p===-1?m:m.slice(0,p)}return f+"#"+(typeof l=="string"?l:Gi(l))}function i(a,l){Jt(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return Px(e,t,i,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Jt(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mx(){return Math.random().toString(36).substring(2,10)}function t0(n,e){return{usr:n.state,key:n.key,idx:e}}function ku(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ms(e):e,state:t,key:e&&e.key||i||Mx()}}function Gi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ms(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function Px(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,u=a.history,f="POP",m=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function v(){f="POP";let N=y(),L=N==null?null:N-p;p=N,m&&m({action:f,location:z.location,delta:L})}function b(N,L){f="PUSH";let V=ku(z.location,N,L);t&&t(V,N),p=y()+1;let U=t0(V,p),q=z.createHref(V);try{u.pushState(U,"",q)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;a.location.assign(q)}l&&m&&m({action:f,location:z.location,delta:1})}function w(N,L){f="REPLACE";let V=ku(z.location,N,L);t&&t(V,N),p=y();let U=t0(V,p),q=z.createHref(V);u.replaceState(U,"",q),l&&m&&m({action:f,location:z.location,delta:0})}function M(N){return MA(N)}let z={get action(){return f},get location(){return n(a,u)},listen(N){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(e0,v),m=N,()=>{a.removeEventListener(e0,v),m=null}},createHref(N){return e(a,N)},createURL:M,encodeLocation(N){let L=M(N);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:b,replace:w,go(N){return u.go(N)}};return z}function MA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Gi(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}var _u,n0=class{constructor(n){if(Dx(this,_u,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if($g(this,_u).has(n))return $g(this,_u).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){$g(this,_u).set(n,e)}};_u=new WeakMap;var kx=new Set(["lazy","caseSensitive","path","id","index","children"]);function Vx(n){return kx.has(n)}var Lx=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function jx(n){return Lx.has(n)}function Ux(n){return n.index===!0}function Vu(n,e,t=[],i={},a=!1){return n.map((l,u)=>{let f=[...t,String(u)],m=typeof l.id=="string"?l.id:f.join("-");if(st(l.index!==!0||!l.children,"Cannot specify children on an index route"),st(a||!i[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),Ux(l)){let p={...l,id:m};return i[m]=r0(p,e(p)),p}else{let p={...l,id:m,children:void 0};return i[m]=r0(p,e(p)),l.children&&(p.children=Vu(l.children,e,f,i,a)),p}})}function r0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function _a(n,e,t="/"){return vu(n,e,t,!1)}function vu(n,e,t,i){let a=typeof e=="string"?Ms(e):e,l=ii(a.pathname||"/",t);if(l==null)return null;let u=PA(n);Bx(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let p=Jx(l);f=Xx(u[m],p,i)}return f}function zx(n,e){let{route:t,pathname:i,params:a}=n;return{id:t.id,pathname:i,params:a,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function PA(n,e=[],t=[],i="",a=!1){let l=(u,f,m=a,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(i)&&m)return;st(y.relativePath.startsWith(i),`Absolute route path "${y.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(i.length)}let v=zi([i,y.relativePath]),b=t.concat(y);u.children&&u.children.length>0&&(st(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),PA(u.children,e,b,v,m)),!(u.path==null&&!u.index)&&e.push({path:v,score:Yx(v,u.index),routesMeta:b})};return n.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))l(u,f);else for(let p of kA(u.path))l(u,f,!0,p)}),e}function kA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let u=kA(i.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...u),f.map(m=>n.startsWith("/")&&m===""?"/":m)}function Bx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Qx(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var Hx=/^:[\w-]+$/,Fx=3,qx=2,Gx=1,$x=10,Kx=-2,i0=n=>n==="*";function Yx(n,e){let t=n.split("/"),i=t.length;return t.some(i0)&&(i+=Kx),e&&(i+=qx),t.filter(a=>!i0(a)).reduce((a,l)=>a+(Hx.test(l)?Fx:l===""?Gx:$x),i)}function Qx(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function Xx(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",u=[];for(let f=0;f<i.length;++f){let m=i[f],p=f===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=Sd({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},y),b=m.route;if(!v&&p&&t&&!i[i.length-1].route.index&&(v=Sd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:zi([l,v.pathname]),pathnameBase:tN(zi([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=zi([l,v.pathnameBase]))}return u}function Sd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=Wx(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:v},b)=>{if(y==="*"){let M=f[b]||"";u=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const w=f[b];return v&&!w?p[y]=void 0:p[y]=(w||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:n}}function Wx(n,e=!1,t=!0){Jt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(i.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function Jx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function Zx({basename:n,pathname:e}){return e==="/"?n:zi([n,e])}var VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,l_=n=>VA.test(n);function eN(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?Ms(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=s0(t.substring(1),"/"):l=s0(t,e)):l=e,{pathname:l,search:nN(i),hash:rN(a)}}function s0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Kg(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function em(n){let e=LA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function tm(n,e,t,i=!1){let a;typeof n=="string"?a=Ms(n):(a={...n},st(!a.pathname||!a.pathname.includes("?"),Kg("?","pathname","search",a)),st(!a.pathname||!a.pathname.includes("#"),Kg("#","pathname","hash",a)),st(!a.search||!a.search.includes("#"),Kg("#","search","hash",a)));let l=n===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}f=v>=0?e[v]:"/"}let m=eN(a,f),p=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||y)&&(m.pathname+="/"),m}var zi=n=>n.join("/").replace(/\/\/+/g,"/"),tN=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,rN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Ju=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Lu(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Zu(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function UA(n,e){let t=n;if(typeof t!="string"||!VA.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(jA)try{let l=new URL(window.location.href),u=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=ii(u.pathname,e);u.origin===l.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{Jt(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}var Sa=Symbol("Uninstrumented");function iN(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(a=>a({id:e.id,index:e.index,path:e.path,instrument(l){let u=Object.keys(t);for(let f of u)l[f]&&t[f].push(l[f])}}));let i={};if(typeof e.lazy=="function"&&t.lazy.length>0){let a=Ll(t.lazy,e.lazy,()=>{});a&&(i.lazy=a)}if(typeof e.lazy=="object"){let a=e.lazy;["middleware","loader","action"].forEach(l=>{let u=a[l],f=t[`lazy.${l}`];if(typeof u=="function"&&f.length>0){let m=Ll(f,u,()=>{});m&&(i.lazy=Object.assign(i.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(a=>{let l=e[a];if(typeof l=="function"&&t[a].length>0){let u=l[Sa]??l,f=Ll(t[a],u,(...m)=>a0(m[0]));f&&(a==="loader"&&u.hydrate===!0&&(f.hydrate=!0),f[Sa]=u,i[a]=f)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(i.middleware=e.middleware.map(a=>{let l=a[Sa]??a,u=Ll(t.middleware,l,(...f)=>a0(f[0]));return u?(u[Sa]=l,u):a})),i}function sN(n,e){let t={navigate:[],fetch:[]};if(e.forEach(i=>i({instrument(a){let l=Object.keys(a);for(let u of l)a[u]&&t[u].push(a[u])}})),t.navigate.length>0){let i=n.navigate[Sa]??n.navigate,a=Ll(t.navigate,i,(...l)=>{let[u,f]=l;return{to:typeof u=="number"||typeof u=="string"?u:u?Gi(u):".",...o0(n,f??{})}});a&&(a[Sa]=i,n.navigate=a)}if(t.fetch.length>0){let i=n.fetch[Sa]??n.fetch,a=Ll(t.fetch,i,(...l)=>{let[u,,f,m]=l;return{href:f??".",fetcherKey:u,...o0(n,m??{})}});a&&(a[Sa]=i,n.fetch=a)}return n}function Ll(n,e,t){return n.length===0?null:async(...i)=>{let a=await zA(n,t(...i),()=>e(...i),n.length-1);if(a.type==="error")throw a.value;return a.value}}async function zA(n,e,t,i){let a=n[i],l;if(a){let u,f=async()=>(u?console.error("You cannot call instrumented handlers more than once"):u=zA(n,e,t,i-1),l=await u,st(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await a(f,e)}catch(m){console.error("An instrumentation function threw an error:",m)}u||await f(),await u}else try{l={type:"success",value:await t()}}catch(u){l={type:"error",value:u}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function a0(n){let{request:e,context:t,params:i,unstable_pattern:a}=n;return{request:aN(e),params:{...i},unstable_pattern:a,context:oN(t)}}function o0(n,e){return{currentUrl:Gi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function aN(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function oN(n){if(cN(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var lN=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cN(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===lN}var BA=["POST","PUT","PATCH","DELETE"],uN=new Set(BA),hN=["GET",...BA],fN=new Set(hN),HA=new Set([301,302,303,307,308]),dN=new Set([307,308]),Yg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},mN={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},pN=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),FA="remix-router-transitions",qA=Symbol("ResetLoaderData");function gN(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";st(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let i=n.hydrationRouteProperties||[],a=n.mapRouteProperties||pN,l=a;if(n.unstable_instrumentations){let B=n.unstable_instrumentations;l=K=>({...a(K),...iN(B.map(te=>te.route).filter(Boolean),K)})}let u={},f=Vu(n.routes,l,void 0,u),m,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||TN,v={...n.future},b=null,w=new Set,M=null,z=null,N=null,L=n.hydrationData!=null,V=_a(f,n.history.location,p),U=!1,q=null,Y;if(V==null&&!n.patchRoutesOnNavigation){let B=ti(404,{pathname:n.history.location.pathname}),{matches:K,route:te}=jf(f);Y=!0,V=K,q={[te.id]:B}}else if(V&&!n.hydrationData&&Yi(V,f,n.history.location.pathname).active&&(V=null),V)if(V.some(B=>B.route.lazy))Y=!1;else if(!V.some(B=>c_(B.route)))Y=!0;else{let B=n.hydrationData?n.hydrationData.loaderData:null,K=n.hydrationData?n.hydrationData.errors:null;if(K){let te=V.findIndex(pe=>K[pe.route.id]!==void 0);Y=V.slice(0,te+1).every(pe=>!by(pe.route,B,K))}else Y=V.every(te=>!by(te.route,B,K))}else{Y=!1,V=[];let B=Yi(null,f,n.history.location.pathname);B.active&&B.matches&&(U=!0,V=B.matches)}let Q,A={historyAction:n.history.action,location:n.history.location,matches:V,initialized:Y,navigation:Yg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||q,fetchers:new Map,blockers:new Map},C="POP",R=null,k=!1,P,F=!1,x=new Map,ue=null,ye=!1,$=!1,he=new Set,ge=new Map,ke=0,de=-1,j=new Map,W=new Set,oe=new Map,me=new Map,_e=new Set,Ae=new Map,Oe,qe=null;function nt(){if(b=n.history.listen(({action:B,location:K,delta:te})=>{if(Oe){Oe(),Oe=void 0;return}Jt(Ae.size===0||te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let pe=Si({currentLocation:A.location,nextLocation:K,historyAction:B});if(pe&&te!=null){let ve=new Promise(Ce=>{Oe=Ce});n.history.go(te*-1),tr(pe,{state:"blocked",location:K,proceed(){tr(pe,{state:"proceeding",proceed:void 0,reset:void 0,location:K}),ve.then(()=>n.history.go(te))},reset(){let Ce=new Map(A.blockers);Ce.set(pe,fu),Et({blockers:Ce})}}),R==null||R.resolve(),R=null;return}return Ee(B,K)}),t){UN(e,x);let B=()=>zN(e,x);e.addEventListener("pagehide",B),ue=()=>e.removeEventListener("pagehide",B)}return A.initialized||Ee("POP",A.location,{initialHydration:!0}),Q}function Tn(){b&&b(),ue&&ue(),w.clear(),P&&P.abort(),A.fetchers.forEach((B,K)=>Vs(K)),A.blockers.forEach((B,K)=>qa(K))}function Sr(B){return w.add(B),()=>w.delete(B)}function Et(B,K={}){B.matches&&(B.matches=B.matches.map(ve=>{let Ce=u[ve.route.id],xe=ve.route;return xe.element!==Ce.element||xe.errorElement!==Ce.errorElement||xe.hydrateFallbackElement!==Ce.hydrateFallbackElement?{...ve,route:Ce}:ve})),A={...A,...B};let te=[],pe=[];A.fetchers.forEach((ve,Ce)=>{ve.state==="idle"&&(_e.has(Ce)?te.push(Ce):pe.push(Ce))}),_e.forEach(ve=>{!A.fetchers.has(ve)&&!ge.has(ve)&&te.push(ve)}),[...w].forEach(ve=>ve(A,{deletedFetchers:te,newErrors:B.errors??null,viewTransitionOpts:K.viewTransitionOpts,flushSync:K.flushSync===!0})),te.forEach(ve=>Vs(ve)),pe.forEach(ve=>A.fetchers.delete(ve))}function en(B,K,{flushSync:te}={}){var ze,Me;let pe=A.actionData!=null&&A.navigation.formMethod!=null&&Yn(A.navigation.formMethod)&&A.navigation.state==="loading"&&((ze=B.state)==null?void 0:ze._isRedirect)!==!0,ve;K.actionData?Object.keys(K.actionData).length>0?ve=K.actionData:ve=null:pe?ve=A.actionData:ve=null;let Ce=K.loaderData?y0(A.loaderData,K.loaderData,K.matches||[],K.errors):A.loaderData,xe=A.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Ge,it)=>xe.set(it,fu)));let Te=ye?!1:Bo(B,K.matches||A.matches),Se=k===!0||A.navigation.formMethod!=null&&Yn(A.navigation.formMethod)&&((Me=B.state)==null?void 0:Me._isRedirect)!==!0;m&&(f=m,m=void 0),ye||C==="POP"||(C==="PUSH"?n.history.push(B,B.state):C==="REPLACE"&&n.history.replace(B,B.state));let Ie;if(C==="POP"){let Ge=x.get(A.location.pathname);Ge&&Ge.has(B.pathname)?Ie={currentLocation:A.location,nextLocation:B}:x.has(B.pathname)&&(Ie={currentLocation:B,nextLocation:A.location})}else if(F){let Ge=x.get(A.location.pathname);Ge?Ge.add(B.pathname):(Ge=new Set([B.pathname]),x.set(A.location.pathname,Ge)),Ie={currentLocation:A.location,nextLocation:B}}Et({...K,actionData:ve,loaderData:Ce,historyAction:C,location:B,initialized:!0,navigation:Yg,revalidation:"idle",restoreScrollPosition:Te,preventScrollReset:Se,blockers:xe},{viewTransitionOpts:Ie,flushSync:te===!0}),C="POP",k=!1,F=!1,ye=!1,$=!1,R==null||R.resolve(),R=null,qe==null||qe.resolve(),qe=null}async function bn(B,K){if(R==null||R.resolve(),R=null,typeof B=="number"){R||(R=T0());let it=R.promise;return n.history.go(B),it}let te=Ty(A.location,A.matches,p,B,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:pe,submission:ve,error:Ce}=l0(!1,te,K),xe=A.location,Te=ku(A.location,pe,K&&K.state);Te={...Te,...n.history.encodeLocation(Te)};let Se=K&&K.replace!=null?K.replace:void 0,Ie="PUSH";Se===!0?Ie="REPLACE":Se===!1||ve!=null&&Yn(ve.formMethod)&&ve.formAction===A.location.pathname+A.location.search&&(Ie="REPLACE");let ze=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,Me=(K&&K.flushSync)===!0,Ge=Si({currentLocation:xe,nextLocation:Te,historyAction:Ie});if(Ge){tr(Ge,{state:"blocked",location:Te,proceed(){tr(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),bn(B,K)},reset(){let it=new Map(A.blockers);it.set(Ge,fu),Et({blockers:it})}});return}await Ee(Ie,Te,{submission:ve,pendingError:Ce,preventScrollReset:ze,replace:K&&K.replace,enableViewTransition:K&&K.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:K&&K.unstable_defaultShouldRevalidate})}function oi(){qe||(qe=T0()),Br(),Et({revalidation:"loading"});let B=qe.promise;return A.navigation.state==="submitting"?B:A.navigation.state==="idle"?(Ee(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),B):(Ee(C||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:F===!0}),B)}async function Ee(B,K,te){P&&P.abort(),P=null,C=B,ye=(te&&te.startUninterruptedRevalidation)===!0,Cr(A.location,A.matches),k=(te&&te.preventScrollReset)===!0,F=(te&&te.enableViewTransition)===!0;let pe=m||f,ve=te&&te.overrideNavigation,Ce=te!=null&&te.initialHydration&&A.matches&&A.matches.length>0&&!U?A.matches:_a(pe,K,p),xe=(te&&te.flushSync)===!0;if(Ce&&A.initialized&&!$&&xN(A.location,K)&&!(te&&te.submission&&Yn(te.submission.formMethod))){en(K,{matches:Ce},{flushSync:xe});return}let Te=Yi(Ce,pe,K.pathname);if(Te.active&&Te.matches&&(Ce=Te.matches),!Ce){let{error:zt,notFoundMatches:Vt,route:Ze}=$t(K.pathname);en(K,{matches:Vt,loaderData:{},errors:{[Ze.id]:zt}},{flushSync:xe});return}P=new AbortController;let Se=Nl(n.history,K,P.signal,te&&te.submission),Ie=n.getContext?await n.getContext():new n0,ze;if(te&&te.pendingError)ze=[va(Ce).route.id,{type:"error",error:te.pendingError}];else if(te&&te.submission&&Yn(te.submission.formMethod)){let zt=await Ue(Se,K,te.submission,Ce,Ie,Te.active,te&&te.initialHydration===!0,{replace:te.replace,flushSync:xe});if(zt.shortCircuited)return;if(zt.pendingActionResult){let[Vt,Ze]=zt.pendingActionResult;if(Vr(Ze)&&Lu(Ze.error)&&Ze.error.status===404){P=null,en(K,{matches:zt.matches,loaderData:{},errors:{[Vt]:Ze.error}});return}}Ce=zt.matches||Ce,ze=zt.pendingActionResult,ve=Qg(K,te.submission),xe=!1,Te.active=!1,Se=Nl(n.history,Se.url,Se.signal)}let{shortCircuited:Me,matches:Ge,loaderData:it,errors:It}=await Xe(Se,K,Ce,Ie,Te.active,ve,te&&te.submission,te&&te.fetcherSubmission,te&&te.replace,te&&te.initialHydration===!0,xe,ze,te&&te.callSiteDefaultShouldRevalidate);Me||(P=null,en(K,{matches:Ge||Ce,..._0(ze),loaderData:it,errors:It}))}async function Ue(B,K,te,pe,ve,Ce,xe,Te={}){Br();let Se=LN(K,te);if(Et({navigation:Se},{flushSync:Te.flushSync===!0}),Ce){let Me=await nr(pe,K.pathname,B.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:it,route:It}=jf(f);return{matches:it,pendingActionResult:[It.id,{type:"error",error:Me.error}]}}let Ge=va(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[Ge,{type:"error",error:Me.error}]}}else if(Me.matches)pe=Me.matches;else{let{notFoundMatches:Ge,error:it,route:It}=$t(K.pathname);return{matches:Ge,pendingActionResult:[It.id,{type:"error",error:it}]}}}let Ie,ze=Zf(pe,K);if(!ze.route.action&&!ze.route.lazy)Ie={type:"error",error:ti(405,{method:B.method,pathname:K.pathname,routeId:ze.route.id})};else{let Me=zl(l,u,B,pe,ze,xe?[]:i,ve),Ge=await Sn(B,Me,ve,null);if(Ie=Ge[ze.route.id],!Ie){for(let it of pe)if(Ge[it.route.id]){Ie=Ge[it.route.id];break}}if(B.signal.aborted)return{shortCircuited:!0}}if(Eo(Ie)){let Me;return Te&&Te.replace!=null?Me=Te.replace:Me=m0(Ie.response.headers.get("Location"),new URL(B.url),p,n.history)===A.location.pathname+A.location.search,await rt(B,Ie,!0,{submission:te,replace:Me}),{shortCircuited:!0}}if(Vr(Ie)){let Me=va(pe,ze.route.id);return(Te&&Te.replace)!==!0&&(C="PUSH"),{matches:pe,pendingActionResult:[Me.route.id,Ie,ze.route.id]}}return{matches:pe,pendingActionResult:[ze.route.id,Ie]}}async function Xe(B,K,te,pe,ve,Ce,xe,Te,Se,Ie,ze,Me,Ge){let it=Ce||Qg(K,xe),It=xe||Te||E0(it),zt=!ye&&!Ie;if(ve){if(zt){let Xt=He(Me);Et({navigation:it,...Xt!==void 0?{actionData:Xt}:{}},{flushSync:ze})}let ot=await nr(te,K.pathname,B.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:fn,route:xt}=jf(f);return{matches:fn,loaderData:{},errors:{[xt.id]:ot.error}}}let Xt=va(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[Xt]:ot.error}}}else if(ot.matches)te=ot.matches;else{let{error:Xt,notFoundMatches:fn,route:xt}=$t(K.pathname);return{matches:fn,loaderData:{},errors:{[xt.id]:Xt}}}}let Vt=m||f,{dsMatches:Ze,revalidatingFetchers:Lt}=c0(B,pe,l,u,n.history,A,te,It,K,Ie?[]:i,Ie===!0,$,he,_e,oe,W,Vt,p,n.patchRoutesOnNavigation!=null,Me,Ge);if(de=++ke,!n.dataStrategy&&!Ze.some(ot=>ot.shouldLoad)&&!Ze.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&Lt.length===0){let ot=Gt();return en(K,{matches:te,loaderData:{},errors:Me&&Vr(Me[1])?{[Me[0]]:Me[1].error}:null,..._0(Me),...ot?{fetchers:new Map(A.fetchers)}:{}},{flushSync:ze}),{shortCircuited:!0}}if(zt){let ot={};if(!ve){ot.navigation=it;let Xt=He(Me);Xt!==void 0&&(ot.actionData=Xt)}Lt.length>0&&(ot.fetchers=at(Lt)),Et(ot,{flushSync:ze})}Lt.forEach(ot=>{Pt(ot.key),ot.controller&&ge.set(ot.key,ot.controller)});let Rn=()=>Lt.forEach(ot=>Pt(ot.key));P&&P.signal.addEventListener("abort",Rn);let{loaderResults:jt,fetcherResults:cr}=await On(Ze,Lt,B,pe);if(B.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",Rn),Lt.forEach(ot=>ge.delete(ot.key));let qn=Uf(jt);if(qn)return await rt(B,qn.result,!0,{replace:Se}),{shortCircuited:!0};if(qn=Uf(cr),qn)return W.add(qn.key),await rt(B,qn.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:ur,errors:Gn}=g0(A,te,jt,Me,Lt,cr);Ie&&A.errors&&(Gn={...A.errors,...Gn});let Rr=Gt(),wi=Fa(de),Ci=Rr||wi||Lt.length>0;return{matches:te,loaderData:ur,errors:Gn,...Ci?{fetchers:new Map(A.fetchers)}:{}}}function He(B){if(B&&!Vr(B[1]))return{[B[0]]:B[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function at(B){return B.forEach(K=>{let te=A.fetchers.get(K.key),pe=du(void 0,te?te.data:void 0);A.fetchers.set(K.key,pe)}),new Map(A.fetchers)}async function qt(B,K,te,pe){Pt(B);let ve=(pe&&pe.flushSync)===!0,Ce=m||f,xe=Ty(A.location,A.matches,p,te,K,pe==null?void 0:pe.relative),Te=_a(Ce,xe,p),Se=Yi(Te,Ce,xe);if(Se.active&&Se.matches&&(Te=Se.matches),!Te){Fn(B,K,ti(404,{pathname:xe}),{flushSync:ve});return}let{path:Ie,submission:ze,error:Me}=l0(!0,xe,pe);if(Me){Fn(B,K,Me,{flushSync:ve});return}let Ge=n.getContext?await n.getContext():new n0,it=(pe&&pe.preventScrollReset)===!0;if(ze&&Yn(ze.formMethod)){await zr(B,K,Ie,Te,Ge,Se.active,ve,it,ze,pe&&pe.unstable_defaultShouldRevalidate);return}oe.set(B,{routeId:K,path:Ie}),await hn(B,K,Ie,Te,Ge,Se.active,ve,it,ze)}async function zr(B,K,te,pe,ve,Ce,xe,Te,Se,Ie){Br(),oe.delete(B);let ze=A.fetchers.get(B);an(B,jN(Se,ze),{flushSync:xe});let Me=new AbortController,Ge=Nl(n.history,te,Me.signal,Se);if(Ce){let et=await nr(pe,new URL(Ge.url).pathname,Ge.signal,B);if(et.type==="aborted")return;if(et.type==="error"){Fn(B,K,et.error,{flushSync:xe});return}else if(et.matches)pe=et.matches;else{Fn(B,K,ti(404,{pathname:te}),{flushSync:xe});return}}let it=Zf(pe,te);if(!it.route.action&&!it.route.lazy){let et=ti(405,{method:Se.formMethod,pathname:te,routeId:K});Fn(B,K,et,{flushSync:xe});return}ge.set(B,Me);let It=ke,zt=zl(l,u,Ge,pe,it,i,ve),Vt=await Sn(Ge,zt,ve,B),Ze=Vt[it.route.id];if(!Ze){for(let et of zt)if(Vt[et.route.id]){Ze=Vt[et.route.id];break}}if(Ge.signal.aborted){ge.get(B)===Me&&ge.delete(B);return}if(_e.has(B)){if(Eo(Ze)||Vr(Ze)){an(B,gs(void 0));return}}else{if(Eo(Ze))if(ge.delete(B),de>It){an(B,gs(void 0));return}else return W.add(B),an(B,du(Se)),rt(Ge,Ze,!1,{fetcherSubmission:Se,preventScrollReset:Te});if(Vr(Ze)){Fn(B,K,Ze.error);return}}let Lt=A.navigation.location||A.location,Rn=Nl(n.history,Lt,Me.signal),jt=m||f,cr=A.navigation.state!=="idle"?_a(jt,A.navigation.location,p):A.matches;st(cr,"Didn't find any matches after fetcher action");let qn=++ke;j.set(B,qn);let ur=du(Se,Ze.data);A.fetchers.set(B,ur);let{dsMatches:Gn,revalidatingFetchers:Rr}=c0(Rn,ve,l,u,n.history,A,cr,Se,Lt,i,!1,$,he,_e,oe,W,jt,p,n.patchRoutesOnNavigation!=null,[it.route.id,Ze],Ie);Rr.filter(et=>et.key!==B).forEach(et=>{let Ir=et.key,js=A.fetchers.get(Ir),Tt=du(void 0,js?js.data:void 0);A.fetchers.set(Ir,Tt),Pt(Ir),et.controller&&ge.set(Ir,et.controller)}),Et({fetchers:new Map(A.fetchers)});let wi=()=>Rr.forEach(et=>Pt(et.key));Me.signal.addEventListener("abort",wi);let{loaderResults:Ci,fetcherResults:ot}=await On(Gn,Rr,Rn,ve);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",wi),j.delete(B),ge.delete(B),Rr.forEach(et=>ge.delete(et.key)),A.fetchers.has(B)){let et=gs(Ze.data);A.fetchers.set(B,et)}let Xt=Uf(Ci);if(Xt)return rt(Rn,Xt.result,!1,{preventScrollReset:Te});if(Xt=Uf(ot),Xt)return W.add(Xt.key),rt(Rn,Xt.result,!1,{preventScrollReset:Te});let{loaderData:fn,errors:xt}=g0(A,cr,Ci,void 0,Rr,ot);Fa(qn),A.navigation.state==="loading"&&qn>de?(st(C,"Expected pending action"),P&&P.abort(),en(A.navigation.location,{matches:cr,loaderData:fn,errors:xt,fetchers:new Map(A.fetchers)})):(Et({errors:xt,loaderData:y0(A.loaderData,fn,cr,xt),fetchers:new Map(A.fetchers)}),$=!1)}async function hn(B,K,te,pe,ve,Ce,xe,Te,Se){let Ie=A.fetchers.get(B);an(B,du(Se,Ie?Ie.data:void 0),{flushSync:xe});let ze=new AbortController,Me=Nl(n.history,te,ze.signal);if(Ce){let Ze=await nr(pe,new URL(Me.url).pathname,Me.signal,B);if(Ze.type==="aborted")return;if(Ze.type==="error"){Fn(B,K,Ze.error,{flushSync:xe});return}else if(Ze.matches)pe=Ze.matches;else{Fn(B,K,ti(404,{pathname:te}),{flushSync:xe});return}}let Ge=Zf(pe,te);ge.set(B,ze);let it=ke,It=zl(l,u,Me,pe,Ge,i,ve),Vt=(await Sn(Me,It,ve,B))[Ge.route.id];if(ge.get(B)===ze&&ge.delete(B),!Me.signal.aborted){if(_e.has(B)){an(B,gs(void 0));return}if(Eo(Vt))if(de>it){an(B,gs(void 0));return}else{W.add(B),await rt(Me,Vt,!1,{preventScrollReset:Te});return}if(Vr(Vt)){Fn(B,K,Vt.error);return}an(B,gs(Vt.data))}}async function rt(B,K,te,{submission:pe,fetcherSubmission:ve,preventScrollReset:Ce,replace:xe}={}){te||(R==null||R.resolve(),R=null),K.response.headers.has("X-Remix-Revalidate")&&($=!0);let Te=K.response.headers.get("Location");st(Te,"Expected a Location header on the redirect Response"),Te=m0(Te,new URL(B.url),p,n.history);let Se=ku(A.location,Te,{_isRedirect:!0});if(t){let It=!1;if(K.response.headers.has("X-Remix-Reload-Document"))It=!0;else if(l_(Te)){const zt=MA(Te,!0);It=zt.origin!==e.location.origin||ii(zt.pathname,p)==null}if(It){xe?e.location.replace(Te):e.location.assign(Te);return}}P=null;let Ie=xe===!0||K.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ze,formAction:Me,formEncType:Ge}=A.navigation;!pe&&!ve&&ze&&Me&&Ge&&(pe=E0(A.navigation));let it=pe||ve;if(dN.has(K.response.status)&&it&&Yn(it.formMethod))await Ee(Ie,Se,{submission:{...it,formAction:Te},preventScrollReset:Ce||k,enableViewTransition:te?F:void 0});else{let It=Qg(Se,pe);await Ee(Ie,Se,{overrideNavigation:It,fetcherSubmission:ve,preventScrollReset:Ce||k,enableViewTransition:te?F:void 0})}}async function Sn(B,K,te,pe){var xe;let ve,Ce={};try{ve=await SN(y,B,K,pe,te,!1)}catch(Te){return K.filter(Se=>Se.shouldLoad).forEach(Se=>{Ce[Se.route.id]={type:"error",error:Te}}),Ce}if(B.signal.aborted)return Ce;if(!Yn(B.method))for(let Te of K){if(((xe=ve[Te.route.id])==null?void 0:xe.type)==="error")break;!ve.hasOwnProperty(Te.route.id)&&!A.loaderData.hasOwnProperty(Te.route.id)&&(!A.errors||!A.errors.hasOwnProperty(Te.route.id))&&Te.shouldCallHandler()&&(ve[Te.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Te.route.id}`)})}for(let[Te,Se]of Object.entries(ve))if(MN(Se)){let Ie=Se.result;Ce[Te]={type:"redirect",response:RN(Ie,B,Te,K,p)}}else Ce[Te]=await CN(Se);return Ce}async function On(B,K,te,pe){let ve=Sn(te,B,pe,null),Ce=Promise.all(K.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let ze=(await Sn(Se.request,Se.matches,pe,Se.key))[Se.match.route.id];return{[Se.key]:ze}}else return Promise.resolve({[Se.key]:{type:"error",error:ti(404,{pathname:Se.path})}})})),xe=await ve,Te=(await Ce).reduce((Se,Ie)=>Object.assign(Se,Ie),{});return{loaderResults:xe,fetcherResults:Te}}function Br(){$=!0,oe.forEach((B,K)=>{ge.has(K)&&he.add(K),Pt(K)})}function an(B,K,te={}){A.fetchers.set(B,K),Et({fetchers:new Map(A.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Fn(B,K,te,pe={}){let ve=va(A.matches,K);Vs(B),Et({errors:{[ve.route.id]:te},fetchers:new Map(A.fetchers)},{flushSync:(pe&&pe.flushSync)===!0})}function Zn(B){return me.set(B,(me.get(B)||0)+1),_e.has(B)&&_e.delete(B),A.fetchers.get(B)||mN}function zo(B,K){Pt(B,K==null?void 0:K.reason),an(B,gs(null))}function Vs(B){let K=A.fetchers.get(B);ge.has(B)&&!(K&&K.state==="loading"&&j.has(B))&&Pt(B),oe.delete(B),j.delete(B),W.delete(B),_e.delete(B),he.delete(B),A.fetchers.delete(B)}function Ar(B){let K=(me.get(B)||0)-1;K<=0?(me.delete(B),_e.add(B)):me.set(B,K),Et({fetchers:new Map(A.fetchers)})}function Pt(B,K){let te=ge.get(B);te&&(te.abort(K),ge.delete(B))}function er(B){for(let K of B){let te=Zn(K),pe=gs(te.data);A.fetchers.set(K,pe)}}function Gt(){let B=[],K=!1;for(let te of W){let pe=A.fetchers.get(te);st(pe,`Expected fetcher: ${te}`),pe.state==="loading"&&(W.delete(te),B.push(te),K=!0)}return er(B),K}function Fa(B){let K=[];for(let[te,pe]of j)if(pe<B){let ve=A.fetchers.get(te);st(ve,`Expected fetcher: ${te}`),ve.state==="loading"&&(Pt(te),j.delete(te),K.push(te))}return er(K),K.length>0}function Ls(B,K){let te=A.blockers.get(B)||fu;return Ae.get(B)!==K&&Ae.set(B,K),te}function qa(B){A.blockers.delete(B),Ae.delete(B)}function tr(B,K){let te=A.blockers.get(B)||fu;st(te.state==="unblocked"&&K.state==="blocked"||te.state==="blocked"&&K.state==="blocked"||te.state==="blocked"&&K.state==="proceeding"||te.state==="blocked"&&K.state==="unblocked"||te.state==="proceeding"&&K.state==="unblocked",`Invalid blocker state transition: ${te.state} -> ${K.state}`);let pe=new Map(A.blockers);pe.set(B,K),Et({blockers:pe})}function Si({currentLocation:B,nextLocation:K,historyAction:te}){if(Ae.size===0)return;Ae.size>1&&Jt(!1,"A router only supports one blocker at a time");let pe=Array.from(Ae.entries()),[ve,Ce]=pe[pe.length-1],xe=A.blockers.get(ve);if(!(xe&&xe.state==="proceeding")&&Ce({currentLocation:B,nextLocation:K,historyAction:te}))return ve}function $t(B){let K=ti(404,{pathname:B}),te=m||f,{matches:pe,route:ve}=jf(te);return{notFoundMatches:pe,route:ve,error:K}}function Hr(B,K,te){if(M=B,N=K,z=te||null,!L&&A.navigation===Yg){L=!0;let pe=Bo(A.location,A.matches);pe!=null&&Et({restoreScrollPosition:pe})}return()=>{M=null,N=null,z=null}}function wr(B,K){return z&&z(B,K.map(pe=>zx(pe,A.loaderData)))||B.key}function Cr(B,K){if(M&&N){let te=wr(B,K);M[te]=N()}}function Bo(B,K){if(M){let te=wr(B,K),pe=M[te];if(typeof pe=="number")return pe}return null}function Yi(B,K,te){if(n.patchRoutesOnNavigation)if(B){if(Object.keys(B[0].params).length>0)return{active:!0,matches:vu(K,te,p,!0)}}else return{active:!0,matches:vu(K,te,p,!0)||[]};return{active:!1,matches:null}}async function nr(B,K,te,pe){if(!n.patchRoutesOnNavigation)return{type:"success",matches:B};let ve=B;for(;;){let Ce=m==null,xe=m||f,Te=u;try{await n.patchRoutesOnNavigation({signal:te,path:K,matches:ve,fetcherKey:pe,patch:(ze,Me)=>{te.aborted||u0(ze,Me,xe,Te,l,!1)}})}catch(ze){return{type:"error",error:ze,partialMatches:ve}}finally{Ce&&!te.aborted&&(f=[...f])}if(te.aborted)return{type:"aborted"};let Se=_a(xe,K,p),Ie=null;if(Se){if(Object.keys(Se[0].params).length===0)return{type:"success",matches:Se};if(Ie=vu(xe,K,p,!0),!(Ie&&ve.length<Ie.length&&Ai(ve,Ie.slice(0,ve.length))))return{type:"success",matches:Se}}if(Ie||(Ie=vu(xe,K,p,!0)),!Ie||Ai(ve,Ie))return{type:"success",matches:null};ve=Ie}}function Ai(B,K){return B.length===K.length&&B.every((te,pe)=>te.route.id===K[pe].route.id)}function _c(B){u={},m=Vu(B,l,void 0,u)}function Qi(B,K,te=!1){let pe=m==null;u0(B,K,m||f,u,l,te),pe&&(f=[...f],Et({}))}return Q={get basename(){return p},get future(){return v},get state(){return A},get routes(){return f},get window(){return e},initialize:nt,subscribe:Sr,enableScrollRestoration:Hr,navigate:bn,fetch:qt,revalidate:oi,createHref:B=>n.history.createHref(B),encodeLocation:B=>n.history.encodeLocation(B),getFetcher:Zn,resetFetcher:zo,deleteFetcher:Ar,dispose:Tn,getBlocker:Ls,deleteBlocker:qa,patchRoutes:Qi,_internalFetchControllers:ge,_internalSetRoutes:_c,_internalSetStateDoNotUseOrYouWillBreakYourApp(B){Et(B)}},n.unstable_instrumentations&&(Q=sN(Q,n.unstable_instrumentations.map(B=>B.router).filter(Boolean))),Q}function yN(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ty(n,e,t,i,a,l){let u,f;if(a){u=[];for(let p of e)if(u.push(p),p.route.id===a){f=p;break}}else u=e,f=e[e.length-1];let m=tm(i||".",em(u),ii(n.pathname,t)||n.pathname,l==="path");if(i==null&&(m.search=n.search,m.hash=n.hash),(i==null||i===""||i===".")&&f){let p=h_(m.search);if(f.route.index&&!p)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!f.route.index&&p){let y=new URLSearchParams(m.search),v=y.getAll("index");y.delete("index"),v.filter(w=>w).forEach(w=>y.append("index",w));let b=y.toString();m.search=b?`?${b}`:""}}return t!=="/"&&(m.pathname=Zx({basename:t,pathname:m.pathname})),Gi(m)}function l0(n,e,t){if(!t||!yN(t))return{path:e};if(t.formMethod&&!VN(t.formMethod))return{path:e,error:ti(405,{method:t.formMethod})};let i=()=>({path:e,error:ti(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),u=XA(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Yn(l))return i();let v=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[w,M])=>`${b}${w}=${M}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:void 0,text:v}}}else if(t.formEncType==="application/json"){if(!Yn(l))return i();try{let v=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:u,formEncType:t.formEncType,formData:void 0,json:v,text:void 0}}}catch{return i()}}}st(typeof FormData=="function","FormData is not available in this environment");let f,m;if(t.formData)f=Ay(t.formData),m=t.formData;else if(t.body instanceof FormData)f=Ay(t.body),m=t.body;else if(t.body instanceof URLSearchParams)f=t.body,m=p0(f);else if(t.body==null)f=new URLSearchParams,m=new FormData;else try{f=new URLSearchParams(t.body),m=p0(f)}catch{return i()}let p={formMethod:l,formAction:u,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Yn(p.formMethod))return{path:e,submission:p};let y=Ms(e);return n&&y.search&&h_(y.search)&&f.append("index",""),y.search=`?${f}`,{path:Gi(y),submission:p}}function c0(n,e,t,i,a,l,u,f,m,p,y,v,b,w,M,z,N,L,V,U,q){var ye;let Y=U?Vr(U[1])?U[1].error:U[1].data:void 0,Q=a.createURL(l.location),A=a.createURL(m),C;if(y&&l.errors){let $=Object.keys(l.errors)[0];C=u.findIndex(he=>he.route.id===$)}else if(U&&Vr(U[1])){let $=U[0];C=u.findIndex(he=>he.route.id===$)-1}let R=U?U[1].statusCode:void 0,k=R&&R>=400,P={currentUrl:Q,currentParams:((ye=l.matches[0])==null?void 0:ye.params)||{},nextUrl:A,nextParams:u[0].params,...f,actionResult:Y,actionStatus:R},F=Zu(u),x=u.map(($,he)=>{let{route:ge}=$,ke=null;if(C!=null&&he>C?ke=!1:ge.lazy?ke=!0:c_(ge)?y?ke=by(ge,l.loaderData,l.errors):_N(l.loaderData,l.matches[he],$)&&(ke=!0):ke=!1,ke!==null)return Sy(t,i,n,F,$,p,e,ke);let de=!1;typeof q=="boolean"?de=q:k?de=!1:(v||Q.pathname+Q.search===A.pathname+A.search||Q.search!==A.search||vN(l.matches[he],$))&&(de=!0);let j={...P,defaultShouldRevalidate:de},W=wu($,j);return Sy(t,i,n,F,$,p,e,W,j,q)}),ue=[];return M.forEach(($,he)=>{if(y||!u.some(_e=>_e.route.id===$.routeId)||w.has(he))return;let ge=l.fetchers.get(he),ke=ge&&ge.state!=="idle"&&ge.data===void 0,de=_a(N,$.path,L);if(!de){if(V&&ke)return;ue.push({key:he,routeId:$.routeId,path:$.path,matches:null,match:null,request:null,controller:null});return}if(z.has(he))return;let j=Zf(de,$.path),W=new AbortController,oe=Nl(a,$.path,W.signal),me=null;if(b.has(he))b.delete(he),me=zl(t,i,oe,de,j,p,e);else if(ke)v&&(me=zl(t,i,oe,de,j,p,e));else{let _e;typeof q=="boolean"?_e=q:k?_e=!1:_e=v;let Ae={...P,defaultShouldRevalidate:_e};wu(j,Ae)&&(me=zl(t,i,oe,de,j,p,e,Ae))}me&&ue.push({key:he,routeId:$.routeId,path:$.path,matches:me,match:j,request:oe,controller:W})}),{dsMatches:x,revalidatingFetchers:ue}}function c_(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function by(n,e,t){if(n.lazy)return!0;if(!c_(n))return!1;let i=e!=null&&n.id in e,a=t!=null&&t[n.id]!==void 0;return!i&&a?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!a}function _N(n,e,t){let i=!e||t.route.id!==e.route.id,a=!n.hasOwnProperty(t.route.id);return i||a}function vN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function wu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function u0(n,e,t,i,a,l){let u;if(n){let p=i[n];st(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),u=p.children}else u=t;let f=[],m=[];if(e.forEach(p=>{let y=u.find(v=>GA(p,v));y?m.push({existingRoute:y,newRoute:p}):f.push(p)}),f.length>0){let p=Vu(f,a,[n||"_","patch",String((u==null?void 0:u.length)||"0")],i);u.push(...p)}if(l&&m.length>0)for(let p=0;p<m.length;p++){let{existingRoute:y,newRoute:v}=m[p],b=y,[w]=Vu([v],a,[],{},!0);Object.assign(b,{element:w.element?w.element:b.element,errorElement:w.errorElement?w.errorElement:b.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:b.hydrateFallbackElement})}}function GA(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var a;return(a=e.children)==null?void 0:a.some(l=>GA(t,l))}):!1}var h0=new WeakMap,$A=({key:n,route:e,manifest:t,mapRouteProperties:i})=>{let a=t[e.id];if(st(a,"No route found in manifest"),!a.lazy||typeof a.lazy!="object")return;let l=a.lazy[n];if(!l)return;let u=h0.get(a);u||(u={},h0.set(a,u));let f=u[n];if(f)return f;let m=(async()=>{let p=Vx(n),v=a[n]!==void 0&&n!=="hasErrorBoundary";if(p)Jt(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),u[n]=Promise.resolve();else if(v)Jt(!1,`Route "${a.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(a,{[n]:b}),Object.assign(a,i(a)))}typeof a.lazy=="object"&&(a.lazy[n]=void 0,Object.values(a.lazy).every(b=>b===void 0)&&(a.lazy=void 0))})();return u[n]=m,m},f0=new WeakMap;function EN(n,e,t,i,a){let l=t[n.id];if(st(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=f0.get(l);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let v=(async()=>{st(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),w={};for(let M in b){let z=b[M];if(z===void 0)continue;let N=jx(M),V=l[M]!==void 0&&M!=="hasErrorBoundary";N?Jt(!N,"Route property "+M+" is not a supported property to be returned from a lazy route function. This property will be ignored."):V?Jt(!V,`Route "${l.id}" has a static property "${M}" defined but its lazy function is also returning a value for this property. The lazy route property "${M}" will be ignored.`):w[M]=z}Object.assign(l,w),Object.assign(l,{...i(l),lazy:void 0})})();return f0.set(l,v),v.catch(()=>{}),{lazyRoutePromise:v,lazyHandlerPromise:v}}let u=Object.keys(n.lazy),f=[],m;for(let y of u){if(a&&a.includes(y))continue;let v=$A({key:y,route:n,manifest:t,mapRouteProperties:i});v&&(f.push(v),y===e&&(m=v))}let p=f.length>0?Promise.all(f).then(()=>{}):void 0;return p==null||p.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:m}}async function d0(n){let e=n.matches.filter(a=>a.shouldLoad),t={};return(await Promise.all(e.map(a=>a.resolve()))).forEach((a,l)=>{t[e[l].route.id]=a}),t}async function TN(n){return n.matches.some(e=>e.route.middleware)?KA(n,()=>d0(n)):d0(n)}function KA(n,e){return bN(n,e,i=>{if(kN(i))throw i;return i},DN,t);function t(i,a,l){if(l)return Promise.resolve(Object.assign(l.value,{[a]:{type:"error",result:i}}));{let{matches:u}=n,f=Math.min(Math.max(u.findIndex(p=>p.route.id===a),0),Math.max(u.findIndex(p=>p.shouldCallHandler()),0)),m=va(u,u[f].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:i}})}}}async function bN(n,e,t,i,a){let{matches:l,request:u,params:f,context:m,unstable_pattern:p}=n,y=l.flatMap(b=>b.route.middleware?b.route.middleware.map(w=>[b.route.id,w]):[]);return await YA({request:u,params:f,context:m,unstable_pattern:p},y,e,t,i,a)}async function YA(n,e,t,i,a,l,u=0){let{request:f}=n;if(f.signal.aborted)throw f.signal.reason??new Error(`Request aborted: ${f.method} ${f.url}`);let m=e[u];if(!m)return await t();let[p,y]=m,v,b=async()=>{if(v)throw new Error("You may only call `next()` once per middleware");try{return v={value:await YA(n,e,t,i,a,l,u+1)},v.value}catch(w){return v={value:await l(w,p,v)},v.value}};try{let w=await y(n,b),M=w!=null?i(w):void 0;return a(M)?M:v?M??v.value:(v={value:await b()},v.value)}catch(w){return await l(w,p,v)}}function QA(n,e,t,i,a){let l=$A({key:"middleware",route:i.route,manifest:e,mapRouteProperties:n}),u=EN(i.route,Yn(t.method)?"action":"loader",e,n,a);return{middleware:l,route:u.lazyRoutePromise,handler:u.lazyHandlerPromise}}function Sy(n,e,t,i,a,l,u,f,m=null,p){let y=!1,v=QA(n,e,t,a,l);return{...a,_lazyPromises:v,shouldLoad:f,shouldRevalidateArgs:m,shouldCallHandler(b){return y=!0,m?typeof p=="boolean"?wu(a,{...m,defaultShouldRevalidate:p}):typeof b=="boolean"?wu(a,{...m,defaultShouldRevalidate:b}):wu(a,m):f},resolve(b){let{lazy:w,loader:M,middleware:z}=a.route,N=y||f||b&&!Yn(t.method)&&(w||M),L=z&&z.length>0&&!M&&!w;return N&&(Yn(t.method)||!L)?AN({request:t,unstable_pattern:i,match:a,lazyHandlerPromise:v==null?void 0:v.handler,lazyRoutePromise:v==null?void 0:v.route,handlerOverride:b,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function zl(n,e,t,i,a,l,u,f=null){return i.map(m=>m.route.id!==a.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:f,shouldCallHandler:()=>!1,_lazyPromises:QA(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Sy(n,e,t,Zu(i),m,l,u,!0,f))}async function SN(n,e,t,i,a,l){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let u={request:e,unstable_pattern:Zu(t),params:t[0].params,context:a,matches:t},m=await n({...u,fetcherKey:i,runClientMiddleware:p=>{let y=u;return KA(y,()=>p({...y,fetcherKey:i,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,v;return[(y=p._lazyPromises)==null?void 0:y.handler,(v=p._lazyPromises)==null?void 0:v.route]}))}catch{}return m}async function AN({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:i,lazyRoutePromise:a,handlerOverride:l,scopedContext:u}){let f,m,p=Yn(n.method),y=p?"action":"loader",v=b=>{let w,M=new Promise((L,V)=>w=V);m=()=>w(),n.signal.addEventListener("abort",m);let z=L=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:u},...L!==void 0?[L]:[]),N=(async()=>{try{return{type:"data",result:await(l?l(V=>z(V)):z())}}catch(L){return{type:"error",result:L}}})();return Promise.race([N,M])};try{let b=p?t.route.action:t.route.loader;if(i||a)if(b){let w,[M]=await Promise.all([v(b).catch(z=>{w=z}),i,a]);if(w!==void 0)throw w;f=M}else{await i;let w=p?t.route.action:t.route.loader;if(w)[f]=await Promise.all([v(w),a]);else if(y==="action"){let M=new URL(n.url),z=M.pathname+M.search;throw ti(405,{method:n.method,pathname:z,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)f=await v(b);else{let w=new URL(n.url),M=w.pathname+w.search;throw ti(404,{pathname:M})}}catch(b){return{type:"error",result:b}}finally{m&&n.signal.removeEventListener("abort",m)}return f}async function wN(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function CN(n){var i,a,l,u,f;let{result:e,type:t}=n;if(u_(e)){let m;try{m=await wN(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Ju(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?v0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(i=e.init)==null?void 0:i.status,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:NN(e),statusCode:Lu(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Lu(e)?e.status:void 0}:v0(e)?{type:"data",data:e.data,statusCode:(u=e.init)==null?void 0:u.status,headers:(f=e.init)!=null&&f.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function RN(n,e,t,i,a){let l=n.headers.get("Location");if(st(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!l_(l)){let u=i.slice(0,i.findIndex(f=>f.route.id===t)+1);l=Ty(new URL(e.url),u,a,l),n.headers.set("Location",l)}return n}function m0(n,e,t,i){let a=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(l_(n)){let l=n,u=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(a.includes(u.protocol))throw new Error("Invalid redirect location");let f=ii(u.pathname,t)!=null;if(u.origin===e.origin&&f)return u.pathname+u.search+u.hash}try{let l=i.createURL(n);if(a.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function Nl(n,e,t,i){let a=n.createURL(XA(e)).toString(),l={signal:t};if(i&&Yn(i.formMethod)){let{formMethod:u,formEncType:f}=i;l.method=u.toUpperCase(),f==="application/json"?(l.headers=new Headers({"Content-Type":f}),l.body=JSON.stringify(i.json)):f==="text/plain"?l.body=i.text:f==="application/x-www-form-urlencoded"&&i.formData?l.body=Ay(i.formData):l.body=i.formData}return new Request(a,l)}function Ay(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function p0(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function IN(n,e,t,i=!1,a=!1){let l={},u=null,f,m=!1,p={},y=t&&Vr(t[1])?t[1].error:void 0;return n.forEach(v=>{if(!(v.route.id in e))return;let b=v.route.id,w=e[b];if(st(!Eo(w),"Cannot handle redirect results in processLoaderData"),Vr(w)){let M=w.error;if(y!==void 0&&(M=y,y=void 0),u=u||{},a)u[b]=M;else{let z=va(n,b);u[z.route.id]==null&&(u[z.route.id]=M)}i||(l[b]=qA),m||(m=!0,f=Lu(w.error)?w.error.status:500),w.headers&&(p[b]=w.headers)}else l[b]=w.data,w.statusCode&&w.statusCode!==200&&!m&&(f=w.statusCode),w.headers&&(p[b]=w.headers)}),y!==void 0&&t&&(u={[t[0]]:y},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:u,statusCode:f||200,loaderHeaders:p}}function g0(n,e,t,i,a,l){let{loaderData:u,errors:f}=IN(e,t,i);return a.filter(m=>!m.matches||m.matches.some(p=>p.shouldLoad)).forEach(m=>{let{key:p,match:y,controller:v}=m;if(v&&v.signal.aborted)return;let b=l[p];if(st(b,"Did not find corresponding fetcher result"),Vr(b)){let w=va(n.matches,y==null?void 0:y.route.id);f&&f[w.route.id]||(f={...f,[w.route.id]:b.error}),n.fetchers.delete(p)}else if(Eo(b))st(!1,"Unhandled fetcher revalidation redirect");else{let w=gs(b.data);n.fetchers.set(p,w)}}),{loaderData:u,errors:f}}function y0(n,e,t,i){let a=Object.entries(e).filter(([,l])=>l!==qA).reduce((l,[u,f])=>(l[u]=f,l),{});for(let l of t){let u=l.route.id;if(!e.hasOwnProperty(u)&&n.hasOwnProperty(u)&&l.route.loader&&(a[u]=n[u]),i&&i.hasOwnProperty(u))break}return a}function _0(n){return n?Vr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function va(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function jf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ti(n,{pathname:e,routeId:t,method:i,type:a,message:l}={}){let u="Unknown Server Error",f="Unknown @remix-run/router error";return n===400?(u="Bad Request",i&&e&&t?f=`You made a ${i} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:a==="invalid-body"&&(f="Unable to encode submission body")):n===403?(u="Forbidden",f=`Route "${t}" does not match URL "${e}"`):n===404?(u="Not Found",f=`No route matches URL "${e}"`):n===405&&(u="Method Not Allowed",i&&e&&t?f=`You made a ${i.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:i&&(f=`Invalid request method "${i.toUpperCase()}"`)),new Ju(n||500,u,new Error(f),!0)}function Uf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,a]=e[t];if(Eo(a))return{key:i,result:a}}}function XA(n){let e=typeof n=="string"?Ms(n):n;return Gi({...e,hash:""})}function xN(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function NN(n){var e,t;return new Ju(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function DN(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&ON(t))}function ON(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function MN(n){return u_(n.result)&&HA.has(n.result.status)}function Vr(n){return n.type==="error"}function Eo(n){return(n&&n.type)==="redirect"}function v0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function u_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function PN(n){return HA.has(n)}function kN(n){return u_(n)&&PN(n.status)&&n.headers.has("Location")}function VN(n){return fN.has(n.toUpperCase())}function Yn(n){return uN.has(n.toUpperCase())}function h_(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Zf(n,e){let t=typeof e=="string"?Ms(e).search:e.search;if(n[n.length-1].route.index&&h_(t||""))return n[n.length-1];let i=LA(n);return i[i.length-1]}function E0(n){let{formMethod:e,formAction:t,formEncType:i,text:a,formData:l,json:u}=n;if(!(!e||!t||!i)){if(a!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:a};if(l!=null)return{formMethod:e,formAction:t,formEncType:i,formData:l,json:void 0,text:void 0};if(u!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:u,text:void 0}}}function Qg(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LN(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function du(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function jN(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function gs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function UN(n,e){try{let t=n.sessionStorage.getItem(FA);if(t){let i=JSON.parse(t);for(let[a,l]of Object.entries(i||{}))l&&Array.isArray(l)&&e.set(a,new Set(l||[]))}}catch{}}function zN(n,e){if(e.size>0){let t={};for(let[i,a]of e)t[i]=[...a];try{n.sessionStorage.setItem(FA,JSON.stringify(t))}catch(i){Jt(!1,`Failed to save applied view transitions in sessionStorage (${i}).`)}}}function T0(){let n,e,t=new Promise((i,a)=>{n=async l=>{i(l);try{await t}catch{}},e=async l=>{a(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Po=O.createContext(null);Po.displayName="DataRouter";var eh=O.createContext(null);eh.displayName="DataRouterState";var WA=O.createContext(!1);function BN(){return O.useContext(WA)}var f_=O.createContext({isTransitioning:!1});f_.displayName="ViewTransition";var JA=O.createContext(new Map);JA.displayName="Fetchers";var HN=O.createContext(null);HN.displayName="Await";var Ur=O.createContext(null);Ur.displayName="Navigation";var nm=O.createContext(null);nm.displayName="Location";var si=O.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var d_=O.createContext(null);d_.displayName="RouteError";var ZA="REACT_ROUTER_ERROR",FN="REDIRECT",qN="ROUTE_ERROR_RESPONSE";function GN(n){if(n.startsWith(`${ZA}:${FN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function $N(n){if(n.startsWith(`${ZA}:${qN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ju(e.status,e.statusText,e.data)}catch{}}function KN(n,{relative:e}={}){st(oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=O.useContext(Ur),{hash:a,pathname:l,search:u}=th(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:zi([t,l])),i.createHref({pathname:f,search:u,hash:a})}function oc(){return O.useContext(nm)!=null}function ai(){return st(oc(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(nm).location}var ew="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tw(n){O.useContext(Ur).static||O.useLayoutEffect(n)}function ko(){let{isDataRoute:n}=O.useContext(si);return n?lD():YN()}function YN(){st(oc(),"useNavigate() may be used only in the context of a <Router> component.");let n=O.useContext(Po),{basename:e,navigator:t}=O.useContext(Ur),{matches:i}=O.useContext(si),{pathname:a}=ai(),l=JSON.stringify(em(i)),u=O.useRef(!1);return tw(()=>{u.current=!0}),O.useCallback((m,p={})=>{if(Jt(u.current,ew),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=tm(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:zi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,n])}var QN=O.createContext(null);function XN(n){let e=O.useContext(si).outlet;return O.useMemo(()=>e&&O.createElement(QN.Provider,{value:n},e),[e,n])}function Ps(){let{matches:n}=O.useContext(si),e=n[n.length-1];return e?e.params:{}}function th(n,{relative:e}={}){let{matches:t}=O.useContext(si),{pathname:i}=ai(),a=JSON.stringify(em(t));return O.useMemo(()=>tm(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function WN(n,e,t,i,a){st(oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=O.useContext(Ur),{matches:u}=O.useContext(si),f=u[u.length-1],m=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let V=v&&v.path||"";rw(p,!v||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let b=ai(),w;w=b;let M=w.pathname||"/",z=M;if(y!=="/"){let V=y.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(V.length).join("/")}let N=_a(n,{pathname:z});return Jt(v||N!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Jt(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),nD(N&&N.map(V=>Object.assign({},V,{params:Object.assign({},m,V.params),pathname:zi([y,l.encodeLocation?l.encodeLocation(V.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?y:zi([y,l.encodeLocation?l.encodeLocation(V.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathnameBase])})),u,t,i,a)}function JN(){let n=oD(),e=Lu(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:l},"ErrorBoundary")," or"," ",O.createElement("code",{style:l},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),t?O.createElement("pre",{style:a},t):null,u)}var ZN=O.createElement(JN,null),nw=class extends O.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=$N(n.digest);t&&(n=t)}let e=n!==void 0?O.createElement(si.Provider,{value:this.props.routeContext},O.createElement(d_.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?O.createElement(eD,{error:n},e):e}};nw.contextType=WA;var Xg=new WeakMap;function eD({children:n,error:e}){let{basename:t}=O.useContext(Ur);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=GN(e.digest);if(i){let a=Xg.get(e);if(a)throw a;let l=UA(i.location,t);if(jA&&!Xg.get(e))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Xg.set(e,u),u}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function tD({routeContext:n,match:e,children:t}){let i=O.useContext(Po);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),O.createElement(si.Provider,{value:n},t)}function nD(n,e=[],t=null,i=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,u=t==null?void 0:t.errors;if(u!=null){let y=l.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);st(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:b,errors:w}=t,M=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||M){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let p=t&&i?(y,v)=>{var b,w;i(y,{location:t.location,params:((w=(b=t.matches)==null?void 0:b[0])==null?void 0:w.params)??{},unstable_pattern:Zu(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,b)=>{let w,M=!1,z=null,N=null;t&&(w=u&&v.route.id?u[v.route.id]:void 0,z=v.route.errorElement||ZN,f&&(m<0&&b===0?(rw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,N=null):m===b&&(M=!0,N=v.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,b+1)),V=()=>{let U;return w?U=z:M?U=N:v.route.Component?U=O.createElement(v.route.Component,null):v.route.element?U=v.route.element:U=y,O.createElement(tD,{match:v,routeContext:{outlet:y,matches:L,isDataRoute:t!=null},children:U})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?O.createElement(nw,{location:t.location,revalidation:t.revalidation,component:z,error:w,children:V(),routeContext:{outlet:null,matches:L,isDataRoute:!0},onError:p}):V()},null)}function m_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rD(n){let e=O.useContext(Po);return st(e,m_(n)),e}function iD(n){let e=O.useContext(eh);return st(e,m_(n)),e}function sD(n){let e=O.useContext(si);return st(e,m_(n)),e}function p_(n){let e=sD(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function aD(){return p_("useRouteId")}function oD(){var i;let n=O.useContext(d_),e=iD("useRouteError"),t=p_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function lD(){let{router:n}=rD("useNavigate"),e=p_("useNavigate"),t=O.useRef(!1);return tw(()=>{t.current=!0}),O.useCallback(async(a,l={})=>{Jt(t.current,ew),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var b0={};function rw(n,e,t){!e&&!b0[n]&&(b0[n]=!0,Jt(!1,t))}var S0={};function A0(n,e){!n&&!S0[e]&&(S0[e]=!0,console.warn(e))}var cD="useOptimistic",w0=tx[cD],uD=()=>{};function hD(n){return w0?w0(n):[n,uD]}function fD(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&Jt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:O.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&Jt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:O.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&Jt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:O.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var dD=["HydrateFallback","hydrateFallbackElement"],mD=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function pD({router:n,flushSync:e,onError:t,unstable_useTransitions:i}){i=BN()||i;let[l,u]=O.useState(n.state),[f,m]=hD(l),[p,y]=O.useState(),[v,b]=O.useState({isTransitioning:!1}),[w,M]=O.useState(),[z,N]=O.useState(),[L,V]=O.useState(),U=O.useRef(new Map),q=O.useCallback((C,{deletedFetchers:R,newErrors:k,flushSync:P,viewTransitionOpts:F})=>{k&&t&&Object.values(k).forEach(ue=>{var ye;return t(ue,{location:C.location,params:((ye=C.matches[0])==null?void 0:ye.params)??{},unstable_pattern:Zu(C.matches)})}),C.fetchers.forEach((ue,ye)=>{ue.data!==void 0&&U.current.set(ye,ue.data)}),R.forEach(ue=>U.current.delete(ue)),A0(P===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let x=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(A0(F==null||x,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!F||!x){e&&P?e(()=>u(C)):i===!1?u(C):O.startTransition(()=>{i===!0&&m(ue=>C0(ue,C)),u(C)});return}if(e&&P){e(()=>{z&&(w==null||w.resolve(),z.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let ue=n.window.document.startViewTransition(()=>{e(()=>u(C))});ue.finished.finally(()=>{e(()=>{M(void 0),N(void 0),y(void 0),b({isTransitioning:!1})})}),e(()=>N(ue));return}z?(w==null||w.resolve(),z.skipTransition(),V({state:C,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(y(C),b({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[n.window,e,z,w,i,m,t]);O.useLayoutEffect(()=>n.subscribe(q),[n,q]),O.useEffect(()=>{v.isTransitioning&&!v.flushSync&&M(new mD)},[v]),O.useEffect(()=>{if(w&&p&&n.window){let C=p,R=w.promise,k=n.window.document.startViewTransition(async()=>{i===!1?u(C):O.startTransition(()=>{i===!0&&m(P=>C0(P,C)),u(C)}),await R});k.finished.finally(()=>{M(void 0),N(void 0),y(void 0),b({isTransitioning:!1})}),N(k)}},[p,w,n.window,i,m]),O.useEffect(()=>{w&&p&&f.location.key===p.location.key&&w.resolve()},[w,z,f.location,p]),O.useEffect(()=>{!v.isTransitioning&&L&&(y(L.state),b({isTransitioning:!0,flushSync:!1,currentLocation:L.currentLocation,nextLocation:L.nextLocation}),V(void 0))},[v.isTransitioning,L]);let Y=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:C=>n.navigate(C),push:(C,R,k)=>n.navigate(C,{state:R,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(C,R,k)=>n.navigate(C,{replace:!0,state:R,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[n]),Q=n.basename||"/",A=O.useMemo(()=>({router:n,navigator:Y,static:!1,basename:Q,onError:t}),[n,Y,Q,t]);return O.createElement(O.Fragment,null,O.createElement(Po.Provider,{value:A},O.createElement(eh.Provider,{value:f},O.createElement(JA.Provider,{value:U.current},O.createElement(f_.Provider,{value:v},O.createElement(_D,{basename:Q,location:f.location,navigationType:f.historyAction,navigator:Y,unstable_useTransitions:i},O.createElement(gD,{routes:n.routes,future:n.future,state:f,onError:t})))))),null)}function C0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var gD=O.memo(yD);function yD({routes:n,future:e,state:t,onError:i}){return WN(n,void 0,t,i,e)}function wa({to:n,replace:e,state:t,relative:i}){st(oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=O.useContext(Ur);Jt(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=O.useContext(si),{pathname:u}=ai(),f=ko(),m=tm(n,em(l),u,i==="path"),p=JSON.stringify(m);return O.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:i})},[f,p,i,e,t]),null}function iw(n){return XN(n.context)}function _D({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){st(!oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[f,a,l,u]);typeof t=="string"&&(t=Ms(t));let{pathname:p="/",search:y="",hash:v="",state:b=null,key:w="default"}=t,M=O.useMemo(()=>{let z=ii(p,f);return z==null?null:{location:{pathname:z,search:y,hash:v,state:b,key:w},navigationType:i}},[f,p,y,v,b,w,i]);return Jt(M!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:O.createElement(Ur.Provider,{value:m},O.createElement(nm.Provider,{children:e,value:M}))}var ed="get",td="application/x-www-form-urlencoded";function rm(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function vD(n){return rm(n)&&n.tagName.toLowerCase()==="button"}function ED(n){return rm(n)&&n.tagName.toLowerCase()==="form"}function TD(n){return rm(n)&&n.tagName.toLowerCase()==="input"}function bD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function SD(n,e){return n.button===0&&(!e||e==="_self")&&!bD(n)}function wy(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(Array.isArray(i)?i.map(a=>[t,a]):[[t,i]])},[]))}function AD(n,e){let t=wy(n);return e&&e.forEach((i,a)=>{t.has(a)||e.getAll(a).forEach(l=>{t.append(a,l)})}),t}var zf=null;function wD(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var CD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wg(n){return n!=null&&!CD.has(n)?(Jt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${td}"`),null):n}function RD(n,e){let t,i,a,l,u;if(ED(n)){let f=n.getAttribute("action");i=f?ii(f,e):null,t=n.getAttribute("method")||ed,a=Wg(n.getAttribute("enctype"))||td,l=new FormData(n)}else if(vD(n)||TD(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||f.getAttribute("action");if(i=m?ii(m,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||ed,a=Wg(n.getAttribute("formenctype"))||Wg(f.getAttribute("enctype"))||td,l=new FormData(f,n),!wD()){let{name:p,type:y,value:v}=n;if(y==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,v)}}else{if(rm(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ed,i=null,a=td,u=n}return l&&a==="text/plain"&&(u=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function g_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ID(n,e,t,i){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&ii(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function xD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ND(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function DD(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await xD(l,t);return u.links?u.links():[]}return[]}));return kD(i.flat(1).filter(ND).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function R0(n,e,t,i,a,l){let u=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,f=(m,p)=>{var y;return t[p].pathname!==m.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,p)=>u(m,p)||f(m,p)):l==="data"?e.filter((m,p)=>{var v;let y=i.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,p)||f(m,p))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function OD(n,e,{includeHydrateFallback:t}={}){return MD(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function MD(n){return[...new Set(n)]}function PD(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function kD(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(PD(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function sw(){let n=O.useContext(Po);return g_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function VD(){let n=O.useContext(eh);return g_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var y_=O.createContext(void 0);y_.displayName="FrameworkContext";function aw(){let n=O.useContext(y_);return g_(n,"You must render this element inside a <HydratedRouter> element"),n}function LD(n,e){let t=O.useContext(y_),[i,a]=O.useState(!1),[l,u]=O.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,b=O.useRef(null);O.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let z=L=>{L.forEach(V=>{u(V.isIntersecting)})},N=new IntersectionObserver(z,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[n]),O.useEffect(()=>{if(i){let z=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(z)}}},[i]);let w=()=>{a(!0)},M=()=>{a(!1),u(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:mu(f,w),onBlur:mu(m,M),onMouseEnter:mu(p,w),onMouseLeave:mu(y,M),onTouchStart:mu(v,w)}]:[!1,b,{}]}function mu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jD({page:n,...e}){let{router:t}=sw(),i=O.useMemo(()=>_a(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?O.createElement(zD,{page:n,matches:i,...e}):null}function UD(n){let{manifest:e,routeModules:t}=aw(),[i,a]=O.useState([]);return O.useEffect(()=>{let l=!1;return DD(n,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[n,e,t]),i}function zD({page:n,matches:e,...t}){let i=ai(),{future:a,manifest:l,routeModules:u}=aw(),{basename:f}=sw(),{loaderData:m,matches:p}=VD(),y=O.useMemo(()=>R0(n,e,p,l,i,"data"),[n,e,p,l,i]),v=O.useMemo(()=>R0(n,e,p,l,i,"assets"),[n,e,p,l,i]),b=O.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let z=new Set,N=!1;if(e.forEach(V=>{var q;let U=l.routes[V.route.id];!U||!U.hasLoader||(!y.some(Y=>Y.route.id===V.route.id)&&V.route.id in m&&((q=u[V.route.id])!=null&&q.shouldRevalidate)||U.hasClientLoader?N=!0:z.add(V.route.id))}),z.size===0)return[];let L=ID(n,f,a.unstable_trailingSlashAwareDataRequests,"data");return N&&z.size>0&&L.searchParams.set("_routes",e.filter(V=>z.has(V.route.id)).map(V=>V.route.id).join(",")),[L.pathname+L.search]},[f,a.unstable_trailingSlashAwareDataRequests,m,i,l,y,e,n,u]),w=O.useMemo(()=>OD(v,l),[v,l]),M=UD(v);return O.createElement(O.Fragment,null,b.map(z=>O.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),w.map(z=>O.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),M.map(({key:z,link:N})=>O.createElement("link",{key:z,nonce:t.nonce,...N,crossOrigin:N.crossOrigin??t.crossOrigin})))}function BD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var HD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{HD&&(window.__reactRouterVersion="7.13.0")}catch{}function FD(n,e){return gN({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Ox({window:e==null?void 0:e.window}),hydrationData:qD(),routes:n,mapRouteProperties:fD,hydrationRouteProperties:dD,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function qD(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:GD(n.errors)}),n}function GD(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,a]of e)if(a&&a.__type==="RouteErrorResponse")t[i]=new Ju(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let l=window[a.__subType];if(typeof l=="function")try{let u=new l(a.message);u.stack="",t[i]=u}catch{}}if(t[i]==null){let l=new Error(a.message);l.stack="",t[i]=l}}else t[i]=a;return t}var ow=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lw=O.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:u,state:f,target:m,to:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...w},M){let{basename:z,unstable_useTransitions:N}=O.useContext(Ur),L=typeof p=="string"&&ow.test(p),V=UA(p,z);p=V.to;let U=KN(p,{relative:a}),[q,Y,Q]=LD(i,w),A=QD(p,{replace:u,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:N});function C(k){e&&e(k),k.defaultPrevented||A(k)}let R=O.createElement("a",{...w,...Q,href:V.absoluteURL||U,onClick:V.isExternal||l?e:C,ref:BD(M,Y),target:m,"data-discover":!L&&t==="render"?"true":void 0});return q&&!L?O.createElement(O.Fragment,null,R,O.createElement(jD,{page:U})):R});lw.displayName="Link";var $D=O.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:u,viewTransition:f,children:m,...p},y){let v=th(u,{relative:p.relative}),b=ai(),w=O.useContext(eh),{navigator:M,basename:z}=O.useContext(Ur),N=w!=null&&t2(v)&&f===!0,L=M.encodeLocation?M.encodeLocation(v).pathname:v.pathname,V=b.pathname,U=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(V=V.toLowerCase(),U=U?U.toLowerCase():null,L=L.toLowerCase()),U&&z&&(U=ii(U,z)||U);const q=L!=="/"&&L.endsWith("/")?L.length-1:L.length;let Y=V===L||!a&&V.startsWith(L)&&V.charAt(q)==="/",Q=U!=null&&(U===L||!a&&U.startsWith(L)&&U.charAt(L.length)==="/"),A={isActive:Y,isPending:Q,isTransitioning:N},C=Y?e:void 0,R;typeof i=="function"?R=i(A):R=[i,Y?"active":null,Q?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(A):l;return O.createElement(lw,{...p,"aria-current":C,className:R,ref:y,style:k,to:u,viewTransition:f},typeof m=="function"?m(A):m)});$D.displayName="NavLink";var KD=O.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:u=ed,action:f,onSubmit:m,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...w},M)=>{let{unstable_useTransitions:z}=O.useContext(Ur),N=ZD(),L=e2(f,{relative:p}),V=u.toLowerCase()==="get"?"get":"post",U=typeof f=="string"&&ow.test(f),q=Y=>{if(m&&m(Y),Y.defaultPrevented)return;Y.preventDefault();let Q=Y.nativeEvent.submitter,A=(Q==null?void 0:Q.getAttribute("formmethod"))||u,C=()=>N(Q||Y.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b});z&&t!==!1?O.startTransition(()=>C()):C()};return O.createElement("form",{ref:M,method:V,action:L,onSubmit:i?m:q,...w,"data-discover":!U&&n==="render"?"true":void 0})});KD.displayName="Form";function YD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cw(n){let e=O.useContext(Po);return st(e,YD(n)),e}function QD(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let p=ko(),y=ai(),v=th(n,{relative:l});return O.useCallback(b=>{if(SD(b,e)){b.preventDefault();let w=t!==void 0?t:Gi(y)===Gi(v),M=()=>p(n,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f});m?O.startTransition(()=>M()):M()}},[y,p,v,t,i,e,n,a,l,u,f,m])}function XD(n){Jt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=O.useRef(wy(n)),t=O.useRef(!1),i=ai(),a=O.useMemo(()=>AD(i.search,t.current?null:e.current),[i.search]),l=ko(),u=O.useCallback((f,m)=>{const p=wy(typeof f=="function"?f(new URLSearchParams(a)):f);t.current=!0,l("?"+p,m)},[l,a]);return[a,u]}var WD=0,JD=()=>`__${String(++WD)}__`;function ZD(){let{router:n}=cw("useSubmit"),{basename:e}=O.useContext(Ur),t=aD(),i=n.fetch,a=n.navigate;return O.useCallback(async(l,u={})=>{let{action:f,method:m,encType:p,formData:y,body:v}=RD(l,e);if(u.navigate===!1){let b=u.fetcherKey||JD();await i(b,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||p,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,a,e,t])}function e2(n,{relative:e}={}){let{basename:t}=O.useContext(Ur),i=O.useContext(si);st(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...th(n||".",{relative:e})},u=ai();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:zi([t,l.pathname])),Gi(l)}function t2(n,{relative:e}={}){let t=O.useContext(f_);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=cw("useViewTransitionState"),a=th(n,{relative:e});if(!t.isTransitioning)return!1;let l=ii(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=ii(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Sd(a.pathname,u)!=null||Sd(a.pathname,l)!=null}var uw=xA();function n2(n){return O.createElement(pD,{flushSync:uw.flushSync,...n})}const r2=O.createContext(void 0),Dn=()=>Cx(),Pe=xx.withTypes(),i2=({children:n})=>{const e=Pe(t=>t.auth.loading);return E.jsx(r2.Provider,{value:{isLoading:e},children:n})},s2=()=>{};var I0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},a2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],u=n[t++],f=n[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},fw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],u=a+1<n.length,f=u?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let b=(f&15)<<2|p>>6,w=p&63;m||(w=64,u||(b=64)),i.push(t[y],t[v],t[b],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):a2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],f=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||f==null||p==null||v==null)throw new o2;const b=l<<2|f>>4;if(i.push(b),p!==64){const w=f<<4&240|p>>2;if(i.push(w),v!==64){const M=p<<6&192|v;i.push(M)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class o2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l2=function(n){const e=hw(n);return fw.encodeByteArray(e,!0)},Ad=function(n){return l2(n).replace(/\./g,"")},dw=function(n){try{return fw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=()=>c2().__FIREBASE_DEFAULTS__,h2=()=>{if(typeof process>"u"||typeof I0>"u")return;const n=I0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},f2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dw(n[1]);return e&&JSON.parse(e)},im=()=>{try{return s2()||u2()||h2()||f2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mw=n=>{var e,t;return(t=(e=im())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},d2=n=>{const e=mw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},pw=()=>{var n;return(n=im())==null?void 0:n.config},gw=n=>{var e;return(e=im())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function yw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ad(JSON.stringify(t)),Ad(JSON.stringify(u)),""].join(".")}const Cu={};function g2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Cu))Cu[e]?n.emulator.push(e):n.prod.push(e);return n}function y2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let x0=!1;function _w(n,e){if(typeof window>"u"||typeof document>"u"||!lc(window.location.host)||Cu[n]===e||Cu[n]||x0)return;Cu[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=g2().prod.length>0;function u(){const b=document.getElementById(i);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{x0=!0,u()},b}function y(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=y2(i),w=t("text"),M=document.getElementById(w)||document.createElement("span"),z=t("learnmore"),N=document.getElementById(z)||document.createElement("a"),L=t("preprendIcon"),V=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const U=b.element;f(U),y(N,z);const q=p();m(V,L),U.append(V,M,N,q),document.body.appendChild(U)}l?(M.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function v2(){var e;const n=(e=im())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function E2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function T2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function b2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S2(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function A2(){return!v2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w2(){try{return typeof indexedDB=="object"}catch{return!1}}function C2(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2="FirebaseError";class ks extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=R2,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nh.prototype.create)}}class nh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?I2(l,i):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new ks(a,f,i)}}function I2(n,e){return n.replace(x2,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const x2=/\{\$([^}]+)}/g;function N2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ro(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],u=e[a];if(N0(l)&&N0(u)){if(!Ro(l,u))return!1}else if(l!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function N0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function D2(n,e){const t=new O2(n,e);return t.subscribe.bind(t)}class O2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");M2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Jg),a.error===void 0&&(a.error=Jg),a.complete===void 0&&(a.complete=Jg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M2(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Jg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n){return n&&n._delegate?n._delegate:n}class Io{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new m2;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V2(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&u.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:k2(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function k2(n){return n===_o?void 0:n}function V2(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ft||(ft={}));const j2={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},U2=ft.INFO,z2={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},B2=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=z2[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class __{constructor(e){this.name=e,this._logLevel=U2,this._logHandler=B2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?j2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const H2=(n,e)=>e.some(t=>n instanceof t);let D0,O0;function F2(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function q2(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vw=new WeakMap,Cy=new WeakMap,Ew=new WeakMap,Zg=new WeakMap,v_=new WeakMap;function G2(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(Ca(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&vw.set(t,n)}).catch(()=>{}),v_.set(e,n),e}function $2(n){if(Cy.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Cy.set(n,e)}let Ry={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Cy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Ew.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ca(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function K2(n){Ry=n(Ry)}function Y2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ey(this),e,...t);return Ew.set(i,e.sort?e.sort():[e]),Ca(i)}:q2().includes(n)?function(...e){return n.apply(ey(this),e),Ca(vw.get(this))}:function(...e){return Ca(n.apply(ey(this),e))}}function Q2(n){return typeof n=="function"?Y2(n):(n instanceof IDBTransaction&&$2(n),H2(n,F2())?new Proxy(n,Ry):n)}function Ca(n){if(n instanceof IDBRequest)return G2(n);if(Zg.has(n))return Zg.get(n);const e=Q2(n);return e!==n&&(Zg.set(n,e),v_.set(e,n)),e}const ey=n=>v_.get(n);function X2(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const u=indexedDB.open(n,e),f=Ca(u);return i&&u.addEventListener("upgradeneeded",m=>{i(Ca(u.result),m.oldVersion,m.newVersion,Ca(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const W2=["get","getKey","getAll","getAllKeys","count"],J2=["put","add","delete","clear"],ty=new Map;function M0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ty.get(e))return ty.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=J2.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||W2.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&m.done]))[0]};return ty.set(e,l),l}K2(n=>({...n,get:(e,t,i)=>M0(e,t)||n.get(e,t,i),has:(e,t)=>!!M0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(eO(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function eO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Iy="@firebase/app",P0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new __("@firebase/app"),tO="@firebase/app-compat",nO="@firebase/analytics-compat",rO="@firebase/analytics",iO="@firebase/app-check-compat",sO="@firebase/app-check",aO="@firebase/auth",oO="@firebase/auth-compat",lO="@firebase/database",cO="@firebase/data-connect",uO="@firebase/database-compat",hO="@firebase/functions",fO="@firebase/functions-compat",dO="@firebase/installations",mO="@firebase/installations-compat",pO="@firebase/messaging",gO="@firebase/messaging-compat",yO="@firebase/performance",_O="@firebase/performance-compat",vO="@firebase/remote-config",EO="@firebase/remote-config-compat",TO="@firebase/storage",bO="@firebase/storage-compat",SO="@firebase/firestore",AO="@firebase/ai",wO="@firebase/firestore-compat",CO="firebase",RO="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy="[DEFAULT]",IO={[Iy]:"fire-core",[tO]:"fire-core-compat",[rO]:"fire-analytics",[nO]:"fire-analytics-compat",[sO]:"fire-app-check",[iO]:"fire-app-check-compat",[aO]:"fire-auth",[oO]:"fire-auth-compat",[lO]:"fire-rtdb",[cO]:"fire-data-connect",[uO]:"fire-rtdb-compat",[hO]:"fire-fn",[fO]:"fire-fn-compat",[dO]:"fire-iid",[mO]:"fire-iid-compat",[pO]:"fire-fcm",[gO]:"fire-fcm-compat",[yO]:"fire-perf",[_O]:"fire-perf-compat",[vO]:"fire-rc",[EO]:"fire-rc-compat",[TO]:"fire-gcs",[bO]:"fire-gcs-compat",[SO]:"fire-fst",[wO]:"fire-fst-compat",[AO]:"fire-vertex","fire-js":"fire-js",[CO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new Map,xO=new Map,Ny=new Map;function k0(n,e){try{n.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Xl(n){const e=n.name;if(Ny.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Ny.set(e,n);for(const t of wd.values())k0(t,n);for(const t of xO.values())k0(t,n);return!0}function E_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function gi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ra=new nh("app","Firebase",NO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=RO;function Tw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:xy,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ra.create("bad-app-name",{appName:String(a)});if(t||(t=pw()),!t)throw Ra.create("no-options");const l=wd.get(a);if(l){if(Ro(t,l.options)&&Ro(i,l.config))return l;throw Ra.create("duplicate-app",{appName:a})}const u=new L2(a);for(const m of Ny.values())u.addComponent(m);const f=new DO(t,i,u);return wd.set(a,f),f}function bw(n=xy){const e=wd.get(n);if(!e&&n===xy&&pw())return Tw();if(!e)throw Ra.create("no-app",{appName:n});return e}function Ia(n,e,t){let i=IO[n]??n;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const u=[`Unable to register library "${i}" with version "${e}":`];a&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(u.join(" "));return}Xl(new Io(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO="firebase-heartbeat-database",MO=1,ju="firebase-heartbeat-store";let ny=null;function Sw(){return ny||(ny=X2(OO,MO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ra.create("idb-open",{originalErrorMessage:n.message})})),ny}async function PO(n){try{const t=(await Sw()).transaction(ju),i=await t.objectStore(ju).get(Aw(n));return await t.done,i}catch(e){if(e instanceof ks)Cs.warn(e.message);else{const t=Ra.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cs.warn(t.message)}}}async function V0(n,e){try{const i=(await Sw()).transaction(ju,"readwrite");await i.objectStore(ju).put(e,Aw(n)),await i.done}catch(t){if(t instanceof ks)Cs.warn(t.message);else{const i=Ra.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Cs.warn(i.message)}}}function Aw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=1024,VO=30;class LO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new UO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=L0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>VO){const u=zO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Cs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=L0(),{heartbeatsToSend:i,unsentEntries:a}=jO(this._heartbeatsCache.heartbeats),l=Ad(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Cs.warn(t),""}}}function L0(){return new Date().toISOString().substring(0,10)}function jO(n,e=kO){const t=[];let i=n.slice();for(const a of n){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),j0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),j0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class UO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return w2()?C2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await PO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return V0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return V0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function j0(n){return Ad(JSON.stringify({version:2,heartbeats:n})).length}function zO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(n){Xl(new Io("platform-logger",e=>new Z2(e),"PRIVATE")),Xl(new Io("heartbeat",e=>new LO(e),"PRIVATE")),Ia(Iy,P0,n),Ia(Iy,P0,"esm2020"),Ia("fire-js","")}BO("");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xa,ww;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,C){function R(){}R.prototype=C.prototype,A.F=C.prototype,A.prototype=new R,A.prototype.constructor=A,A.D=function(k,P,F){for(var x=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)x[ue-2]=arguments[ue];return C.prototype[P].apply(k,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(A,C,R){R||(R=0);const k=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)k[P]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(P=0;P<16;++P)k[P]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=A.g[0],R=A.g[1],P=A.g[2];let F=A.g[3],x;x=C+(F^R&(P^F))+k[0]+3614090360&4294967295,C=R+(x<<7&4294967295|x>>>25),x=F+(P^C&(R^P))+k[1]+3905402710&4294967295,F=C+(x<<12&4294967295|x>>>20),x=P+(R^F&(C^R))+k[2]+606105819&4294967295,P=F+(x<<17&4294967295|x>>>15),x=R+(C^P&(F^C))+k[3]+3250441966&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(F^R&(P^F))+k[4]+4118548399&4294967295,C=R+(x<<7&4294967295|x>>>25),x=F+(P^C&(R^P))+k[5]+1200080426&4294967295,F=C+(x<<12&4294967295|x>>>20),x=P+(R^F&(C^R))+k[6]+2821735955&4294967295,P=F+(x<<17&4294967295|x>>>15),x=R+(C^P&(F^C))+k[7]+4249261313&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(F^R&(P^F))+k[8]+1770035416&4294967295,C=R+(x<<7&4294967295|x>>>25),x=F+(P^C&(R^P))+k[9]+2336552879&4294967295,F=C+(x<<12&4294967295|x>>>20),x=P+(R^F&(C^R))+k[10]+4294925233&4294967295,P=F+(x<<17&4294967295|x>>>15),x=R+(C^P&(F^C))+k[11]+2304563134&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(F^R&(P^F))+k[12]+1804603682&4294967295,C=R+(x<<7&4294967295|x>>>25),x=F+(P^C&(R^P))+k[13]+4254626195&4294967295,F=C+(x<<12&4294967295|x>>>20),x=P+(R^F&(C^R))+k[14]+2792965006&4294967295,P=F+(x<<17&4294967295|x>>>15),x=R+(C^P&(F^C))+k[15]+1236535329&4294967295,R=P+(x<<22&4294967295|x>>>10),x=C+(P^F&(R^P))+k[1]+4129170786&4294967295,C=R+(x<<5&4294967295|x>>>27),x=F+(R^P&(C^R))+k[6]+3225465664&4294967295,F=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(F^C))+k[11]+643717713&4294967295,P=F+(x<<14&4294967295|x>>>18),x=R+(F^C&(P^F))+k[0]+3921069994&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(P^F&(R^P))+k[5]+3593408605&4294967295,C=R+(x<<5&4294967295|x>>>27),x=F+(R^P&(C^R))+k[10]+38016083&4294967295,F=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(F^C))+k[15]+3634488961&4294967295,P=F+(x<<14&4294967295|x>>>18),x=R+(F^C&(P^F))+k[4]+3889429448&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(P^F&(R^P))+k[9]+568446438&4294967295,C=R+(x<<5&4294967295|x>>>27),x=F+(R^P&(C^R))+k[14]+3275163606&4294967295,F=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(F^C))+k[3]+4107603335&4294967295,P=F+(x<<14&4294967295|x>>>18),x=R+(F^C&(P^F))+k[8]+1163531501&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(P^F&(R^P))+k[13]+2850285829&4294967295,C=R+(x<<5&4294967295|x>>>27),x=F+(R^P&(C^R))+k[2]+4243563512&4294967295,F=C+(x<<9&4294967295|x>>>23),x=P+(C^R&(F^C))+k[7]+1735328473&4294967295,P=F+(x<<14&4294967295|x>>>18),x=R+(F^C&(P^F))+k[12]+2368359562&4294967295,R=P+(x<<20&4294967295|x>>>12),x=C+(R^P^F)+k[5]+4294588738&4294967295,C=R+(x<<4&4294967295|x>>>28),x=F+(C^R^P)+k[8]+2272392833&4294967295,F=C+(x<<11&4294967295|x>>>21),x=P+(F^C^R)+k[11]+1839030562&4294967295,P=F+(x<<16&4294967295|x>>>16),x=R+(P^F^C)+k[14]+4259657740&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(R^P^F)+k[1]+2763975236&4294967295,C=R+(x<<4&4294967295|x>>>28),x=F+(C^R^P)+k[4]+1272893353&4294967295,F=C+(x<<11&4294967295|x>>>21),x=P+(F^C^R)+k[7]+4139469664&4294967295,P=F+(x<<16&4294967295|x>>>16),x=R+(P^F^C)+k[10]+3200236656&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(R^P^F)+k[13]+681279174&4294967295,C=R+(x<<4&4294967295|x>>>28),x=F+(C^R^P)+k[0]+3936430074&4294967295,F=C+(x<<11&4294967295|x>>>21),x=P+(F^C^R)+k[3]+3572445317&4294967295,P=F+(x<<16&4294967295|x>>>16),x=R+(P^F^C)+k[6]+76029189&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(R^P^F)+k[9]+3654602809&4294967295,C=R+(x<<4&4294967295|x>>>28),x=F+(C^R^P)+k[12]+3873151461&4294967295,F=C+(x<<11&4294967295|x>>>21),x=P+(F^C^R)+k[15]+530742520&4294967295,P=F+(x<<16&4294967295|x>>>16),x=R+(P^F^C)+k[2]+3299628645&4294967295,R=P+(x<<23&4294967295|x>>>9),x=C+(P^(R|~F))+k[0]+4096336452&4294967295,C=R+(x<<6&4294967295|x>>>26),x=F+(R^(C|~P))+k[7]+1126891415&4294967295,F=C+(x<<10&4294967295|x>>>22),x=P+(C^(F|~R))+k[14]+2878612391&4294967295,P=F+(x<<15&4294967295|x>>>17),x=R+(F^(P|~C))+k[5]+4237533241&4294967295,R=P+(x<<21&4294967295|x>>>11),x=C+(P^(R|~F))+k[12]+1700485571&4294967295,C=R+(x<<6&4294967295|x>>>26),x=F+(R^(C|~P))+k[3]+2399980690&4294967295,F=C+(x<<10&4294967295|x>>>22),x=P+(C^(F|~R))+k[10]+4293915773&4294967295,P=F+(x<<15&4294967295|x>>>17),x=R+(F^(P|~C))+k[1]+2240044497&4294967295,R=P+(x<<21&4294967295|x>>>11),x=C+(P^(R|~F))+k[8]+1873313359&4294967295,C=R+(x<<6&4294967295|x>>>26),x=F+(R^(C|~P))+k[15]+4264355552&4294967295,F=C+(x<<10&4294967295|x>>>22),x=P+(C^(F|~R))+k[6]+2734768916&4294967295,P=F+(x<<15&4294967295|x>>>17),x=R+(F^(P|~C))+k[13]+1309151649&4294967295,R=P+(x<<21&4294967295|x>>>11),x=C+(P^(R|~F))+k[4]+4149444226&4294967295,C=R+(x<<6&4294967295|x>>>26),x=F+(R^(C|~P))+k[11]+3174756917&4294967295,F=C+(x<<10&4294967295|x>>>22),x=P+(C^(F|~R))+k[2]+718787259&4294967295,P=F+(x<<15&4294967295|x>>>17),x=R+(F^(P|~C))+k[9]+3951481745&4294967295,A.g[0]=A.g[0]+C&4294967295,A.g[1]=A.g[1]+(P+(x<<21&4294967295|x>>>11))&4294967295,A.g[2]=A.g[2]+P&4294967295,A.g[3]=A.g[3]+F&4294967295}i.prototype.v=function(A,C){C===void 0&&(C=A.length);const R=C-this.blockSize,k=this.C;let P=this.h,F=0;for(;F<C;){if(P==0)for(;F<=R;)a(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<C;)if(k[P++]=A.charCodeAt(F++),P==this.blockSize){a(this,k),P=0;break}}else for(;F<C;)if(k[P++]=A[F++],P==this.blockSize){a(this,k),P=0;break}}this.h=P,this.o+=C},i.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var C=1;C<A.length-8;++C)A[C]=0;C=this.o*8;for(var R=A.length-8;R<A.length;++R)A[R]=C&255,C/=256;for(this.v(A),A=Array(16),C=0,R=0;R<4;++R)for(let k=0;k<32;k+=8)A[C++]=this.g[R]>>>k&255;return A};function l(A,C){var R=f;return Object.prototype.hasOwnProperty.call(R,A)?R[A]:R[A]=C(A)}function u(A,C){this.h=C;const R=[];let k=!0;for(let P=A.length-1;P>=0;P--){const F=A[P]|0;k&&F==C||(R[P]=F,k=!1)}this.g=R}var f={};function m(A){return-128<=A&&A<128?l(A,function(C){return new u([C|0],C<0?-1:0)}):new u([A|0],A<0?-1:0)}function p(A){if(isNaN(A)||!isFinite(A))return v;if(A<0)return N(p(-A));const C=[];let R=1;for(let k=0;A>=R;k++)C[k]=A/R|0,R*=4294967296;return new u(C,0)}function y(A,C){if(A.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(A.charAt(0)=="-")return N(y(A.substring(1),C));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(C,8));let k=v;for(let F=0;F<A.length;F+=8){var P=Math.min(8,A.length-F);const x=parseInt(A.substring(F,F+P),C);P<8?(P=p(Math.pow(C,P)),k=k.j(P).add(p(x))):(k=k.j(R),k=k.add(p(x)))}return k}var v=m(0),b=m(1),w=m(16777216);n=u.prototype,n.m=function(){if(z(this))return-N(this).m();let A=0,C=1;for(let R=0;R<this.g.length;R++){const k=this.i(R);A+=(k>=0?k:4294967296+k)*C,C*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(M(this))return"0";if(z(this))return"-"+N(this).toString(A);const C=p(Math.pow(A,6));var R=this;let k="";for(;;){const P=q(R,C).g;R=L(R,P.j(C));let F=((R.g.length>0?R.g[0]:R.h)>>>0).toString(A);if(R=P,M(R))return F+k;for(;F.length<6;)F="0"+F;k=F+k}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function M(A){if(A.h!=0)return!1;for(let C=0;C<A.g.length;C++)if(A.g[C]!=0)return!1;return!0}function z(A){return A.h==-1}n.l=function(A){return A=L(this,A),z(A)?-1:M(A)?0:1};function N(A){const C=A.g.length,R=[];for(let k=0;k<C;k++)R[k]=~A.g[k];return new u(R,~A.h).add(b)}n.abs=function(){return z(this)?N(this):this},n.add=function(A){const C=Math.max(this.g.length,A.g.length),R=[];let k=0;for(let P=0;P<=C;P++){let F=k+(this.i(P)&65535)+(A.i(P)&65535),x=(F>>>16)+(this.i(P)>>>16)+(A.i(P)>>>16);k=x>>>16,F&=65535,x&=65535,R[P]=x<<16|F}return new u(R,R[R.length-1]&-2147483648?-1:0)};function L(A,C){return A.add(N(C))}n.j=function(A){if(M(this)||M(A))return v;if(z(this))return z(A)?N(this).j(N(A)):N(N(this).j(A));if(z(A))return N(this.j(N(A)));if(this.l(w)<0&&A.l(w)<0)return p(this.m()*A.m());const C=this.g.length+A.g.length,R=[];for(var k=0;k<2*C;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(let P=0;P<A.g.length;P++){const F=this.i(k)>>>16,x=this.i(k)&65535,ue=A.i(P)>>>16,ye=A.i(P)&65535;R[2*k+2*P]+=x*ye,V(R,2*k+2*P),R[2*k+2*P+1]+=F*ye,V(R,2*k+2*P+1),R[2*k+2*P+1]+=x*ue,V(R,2*k+2*P+1),R[2*k+2*P+2]+=F*ue,V(R,2*k+2*P+2)}for(A=0;A<C;A++)R[A]=R[2*A+1]<<16|R[2*A];for(A=C;A<2*C;A++)R[A]=0;return new u(R,0)};function V(A,C){for(;(A[C]&65535)!=A[C];)A[C+1]+=A[C]>>>16,A[C]&=65535,C++}function U(A,C){this.g=A,this.h=C}function q(A,C){if(M(C))throw Error("division by zero");if(M(A))return new U(v,v);if(z(A))return C=q(N(A),C),new U(N(C.g),N(C.h));if(z(C))return C=q(A,N(C)),new U(N(C.g),C.h);if(A.g.length>30){if(z(A)||z(C))throw Error("slowDivide_ only works with positive integers.");for(var R=b,k=C;k.l(A)<=0;)R=Y(R),k=Y(k);var P=Q(R,1),F=Q(k,1);for(k=Q(k,2),R=Q(R,2);!M(k);){var x=F.add(k);x.l(A)<=0&&(P=P.add(R),F=x),k=Q(k,1),R=Q(R,1)}return C=L(A,P.j(C)),new U(P,C)}for(P=v;A.l(C)>=0;){for(R=Math.max(1,Math.floor(A.m()/C.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),F=p(R),x=F.j(C);z(x)||x.l(A)>0;)R-=k,F=p(R),x=F.j(C);M(F)&&(F=b),P=P.add(F),A=L(A,x)}return new U(P,A)}n.B=function(A){return q(this,A).h},n.and=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let k=0;k<C;k++)R[k]=this.i(k)&A.i(k);return new u(R,this.h&A.h)},n.or=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let k=0;k<C;k++)R[k]=this.i(k)|A.i(k);return new u(R,this.h|A.h)},n.xor=function(A){const C=Math.max(this.g.length,A.g.length),R=[];for(let k=0;k<C;k++)R[k]=this.i(k)^A.i(k);return new u(R,this.h^A.h)};function Y(A){const C=A.g.length+1,R=[];for(let k=0;k<C;k++)R[k]=A.i(k)<<1|A.i(k-1)>>>31;return new u(R,A.h)}function Q(A,C){const R=C>>5;C%=32;const k=A.g.length-R,P=[];for(let F=0;F<k;F++)P[F]=C>0?A.i(F+R)>>>C|A.i(F+R+1)<<32-C:A.i(F+R);return new u(P,A.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ww=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,xa=u}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var Bf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cw,Eu,Rw,nd,Dy,Iw,xw,Nw;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bf=="object"&&Bf];for(var _=0;_<h.length;++_){var S=h[_];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function a(h,_){if(_)e:{var S=i;h=h.split(".");for(var D=0;D<h.length-1;D++){var J=h[D];if(!(J in S))break e;S=S[J]}h=h[h.length-1],D=S[h],_=_(D),_!=D&&_!=null&&e(S,h,{configurable:!0,writable:!0,value:_})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(_){var S=[],D;for(D in _)Object.prototype.hasOwnProperty.call(_,D)&&S.push([D,_[D]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function m(h,_,S){return h.call.apply(h.bind,arguments)}function p(h,_,S){return p=m,p.apply(null,arguments)}function y(h,_){var S=Array.prototype.slice.call(arguments,1);return function(){var D=S.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function v(h,_){function S(){}S.prototype=_.prototype,h.Z=_.prototype,h.prototype=new S,h.prototype.constructor=h,h.Ob=function(D,J,re){for(var be=Array(arguments.length-2),We=2;We<arguments.length;We++)be[We-2]=arguments[We];return _.prototype[J].apply(D,be)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function w(h){const _=h.length;if(_>0){const S=Array(_);for(let D=0;D<_;D++)S[D]=h[D];return S}return[]}function M(h,_){for(let D=1;D<arguments.length;D++){const J=arguments[D];var S=typeof J;if(S=S!="object"?S:J?Array.isArray(J)?"array":S:"null",S=="array"||S=="object"&&typeof J.length=="number"){S=h.length||0;const re=J.length||0;h.length=S+re;for(let be=0;be<re;be++)h[S+be]=J[be]}else h.push(J)}}class z{constructor(_,S){this.i=_,this.j=S,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function N(h){u.setTimeout(()=>{throw h},0)}function L(){var h=A;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class V{constructor(){this.h=this.g=null}add(_,S){const D=U.get();D.set(_,S),this.h?this.h.next=D:this.g=D,this.h=D}}var U=new z(()=>new q,h=>h.reset());class q{constructor(){this.next=this.g=this.h=null}set(_,S){this.h=_,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Q=!1,A=new V,C=()=>{const h=Promise.resolve(void 0);Y=()=>{h.then(R)}};function R(){for(var h;h=L();){try{h.h.call(h.g)}catch(S){N(S)}var _=U;_.j(h),_.h<100&&(_.h++,h.next=_.g,_.g=h)}Q=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};u.addEventListener("test",S,_),u.removeEventListener("test",S,_)}catch{}return h})();function x(h){return/^[\s\xa0]*$/.test(h)}function ue(h,_){P.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,_)}v(ue,P),ue.prototype.init=function(h,_){const S=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget,_||(S=="mouseover"?_=h.fromElement:S=="mouseout"&&(_=h.toElement)),this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),$=0;function he(h,_,S,D,J){this.listener=h,this.proxy=null,this.src=_,this.type=S,this.capture=!!D,this.ha=J,this.key=++$,this.da=this.fa=!1}function ge(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function ke(h,_,S){for(const D in h)_.call(S,h[D],D,h)}function de(h,_){for(const S in h)_.call(void 0,h[S],S,h)}function j(h){const _={};for(const S in h)_[S]=h[S];return _}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,_){let S,D;for(let J=1;J<arguments.length;J++){D=arguments[J];for(S in D)h[S]=D[S];for(let re=0;re<W.length;re++)S=W[re],Object.prototype.hasOwnProperty.call(D,S)&&(h[S]=D[S])}}function me(h){this.src=h,this.g={},this.h=0}me.prototype.add=function(h,_,S,D,J){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const be=Ae(h,_,D,J);return be>-1?(_=h[be],S||(_.fa=!1)):(_=new he(_,this.src,re,!!D,J),_.fa=S,h.push(_)),_};function _e(h,_){const S=_.type;if(S in h.g){var D=h.g[S],J=Array.prototype.indexOf.call(D,_,void 0),re;(re=J>=0)&&Array.prototype.splice.call(D,J,1),re&&(ge(_),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Ae(h,_,S,D){for(let J=0;J<h.length;++J){const re=h[J];if(!re.da&&re.listener==_&&re.capture==!!S&&re.ha==D)return J}return-1}var Oe="closure_lm_"+(Math.random()*1e6|0),qe={};function nt(h,_,S,D,J){if(Array.isArray(_)){for(let re=0;re<_.length;re++)nt(h,_[re],S,D,J);return null}return S=Xe(S),h&&h[ye]?h.J(_,S,f(D)?!!D.capture:!1,J):Tn(h,_,S,!1,D,J)}function Tn(h,_,S,D,J,re){if(!_)throw Error("Invalid event type");const be=f(J)?!!J.capture:!!J;let We=Ee(h);if(We||(h[Oe]=We=new me(h)),S=We.add(_,S,D,be,re),S.proxy)return S;if(D=Sr(),S.proxy=D,D.src=h,D.listener=S,h.addEventListener)F||(J=be),J===void 0&&(J=!1),h.addEventListener(_.toString(),D,J);else if(h.attachEvent)h.attachEvent(bn(_.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Sr(){function h(S){return _.call(h.src,h.listener,S)}const _=oi;return h}function Et(h,_,S,D,J){if(Array.isArray(_))for(var re=0;re<_.length;re++)Et(h,_[re],S,D,J);else D=f(D)?!!D.capture:!!D,S=Xe(S),h&&h[ye]?(h=h.i,re=String(_).toString(),re in h.g&&(_=h.g[re],S=Ae(_,S,D,J),S>-1&&(ge(_[S]),Array.prototype.splice.call(_,S,1),_.length==0&&(delete h.g[re],h.h--)))):h&&(h=Ee(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ae(_,S,D,J)),(S=h>-1?_[h]:null)&&en(S))}function en(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[ye])_e(_.i,h);else{var S=h.type,D=h.proxy;_.removeEventListener?_.removeEventListener(S,D,h.capture):_.detachEvent?_.detachEvent(bn(S),D):_.addListener&&_.removeListener&&_.removeListener(D),(S=Ee(_))?(_e(S,h),S.h==0&&(S.src=null,_[Oe]=null)):ge(h)}}}function bn(h){return h in qe?qe[h]:qe[h]="on"+h}function oi(h,_){if(h.da)h=!0;else{_=new ue(_,this);const S=h.listener,D=h.ha||h.src;h.fa&&en(h),h=S.call(D,_)}return h}function Ee(h){return h=h[Oe],h instanceof me?h:null}var Ue="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xe(h){return typeof h=="function"?h:(h[Ue]||(h[Ue]=function(_){return h.handleEvent(_)}),h[Ue])}function He(){k.call(this),this.i=new me(this),this.M=this,this.G=null}v(He,k),He.prototype[ye]=!0,He.prototype.removeEventListener=function(h,_,S,D){Et(this,h,_,S,D)};function at(h,_){var S,D=h.G;if(D)for(S=[];D;D=D.G)S.push(D);if(h=h.M,D=_.type||_,typeof _=="string")_=new P(_,h);else if(_ instanceof P)_.target=_.target||h;else{var J=_;_=new P(D,h),oe(_,J)}J=!0;let re,be;if(S)for(be=S.length-1;be>=0;be--)re=_.g=S[be],J=qt(re,D,!0,_)&&J;if(re=_.g=h,J=qt(re,D,!0,_)&&J,J=qt(re,D,!1,_)&&J,S)for(be=0;be<S.length;be++)re=_.g=S[be],J=qt(re,D,!1,_)&&J}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var h=this.i;for(const _ in h.g){const S=h.g[_];for(let D=0;D<S.length;D++)ge(S[D]);delete h.g[_],h.h--}}this.G=null},He.prototype.J=function(h,_,S,D){return this.i.add(String(h),_,!1,S,D)},He.prototype.K=function(h,_,S,D){return this.i.add(String(h),_,!0,S,D)};function qt(h,_,S,D){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();let J=!0;for(let re=0;re<_.length;++re){const be=_[re];if(be&&!be.da&&be.capture==S){const We=be.listener,on=be.ha||be.src;be.fa&&_e(h.i,be),J=We.call(on,D)!==!1&&J}}return J&&!D.defaultPrevented}function zr(h,_){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:u.setTimeout(h,_||0)}function hn(h){h.g=zr(()=>{h.g=null,h.i&&(h.i=!1,hn(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class rt extends k{constructor(_,S){super(),this.m=_,this.l=S,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:hn(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(h){k.call(this),this.h=h,this.g={}}v(Sn,k);var On=[];function Br(h){ke(h.g,function(_,S){this.g.hasOwnProperty(S)&&en(_)},h),h.g={}}Sn.prototype.N=function(){Sn.Z.N.call(this),Br(this)},Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=u.JSON.stringify,Fn=u.JSON.parse,Zn=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function zo(){}function Vs(){}var Ar={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){P.call(this,"d")}v(Pt,P);function er(){P.call(this,"c")}v(er,P);var Gt={},Fa=null;function Ls(){return Fa=Fa||new He}Gt.Ia="serverreachability";function qa(h){P.call(this,Gt.Ia,h)}v(qa,P);function tr(h){const _=Ls();at(_,new qa(_))}Gt.STAT_EVENT="statevent";function Si(h,_){P.call(this,Gt.STAT_EVENT,h),this.stat=_}v(Si,P);function $t(h){const _=Ls();at(_,new Si(_,h))}Gt.Ja="timingevent";function Hr(h,_){P.call(this,Gt.Ja,h),this.size=_}v(Hr,P);function wr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function Cr(){this.g=!0}Cr.prototype.ua=function(){this.g=!1};function Bo(h,_,S,D,J,re){h.info(function(){if(h.g)if(re){var be="",We=re.split("&");for(let bt=0;bt<We.length;bt++){var on=We[bt].split("=");if(on.length>1){const Kt=on[0];on=on[1];const Gr=Kt.split("_");be=Gr.length>=2&&Gr[1]=="type"?be+(Kt+"="+on+"&"):be+(Kt+"=redacted&")}}}else be=null;else be=re;return"XMLHTTP REQ ("+D+") [attempt "+J+"]: "+_+`
`+S+`
`+be})}function Yi(h,_,S,D,J,re,be){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+J+"]: "+_+`
`+S+`
`+re+" "+be})}function nr(h,_,S,D){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+_c(h,S)+(D?" "+D:"")})}function Ai(h,_){h.info(function(){return"TIMEOUT: "+_})}Cr.prototype.info=function(){};function _c(h,_){if(!h.g)return _;if(!_)return null;try{const re=JSON.parse(_);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var S=re[h];if(!(S.length<2)){var D=S[1];if(Array.isArray(D)&&!(D.length<1)){var J=D[0];if(J!="noop"&&J!="stop"&&J!="close")for(let be=1;be<D.length;be++)D[be]=""}}}}return an(re)}catch{return _}}var Qi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},B={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},K;function te(){}v(te,zo),te.prototype.g=function(){return new XMLHttpRequest},K=new te;function pe(h){return encodeURIComponent(String(h))}function ve(h){var _=1;h=h.split(":");const S=[];for(;_>0&&h.length;)S.push(h.shift()),_--;return h.length&&S.push(h.join(":")),S}function Ce(h,_,S,D){this.j=h,this.i=_,this.l=S,this.S=D||1,this.V=new Sn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var Te={},Se={};function Ie(h,_,S){h.M=1,h.A=Ga(xt(_)),h.u=S,h.R=!0,ze(h,null)}function ze(h,_){h.F=Date.now(),It(h),h.B=xt(h.A);var S=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),Fo(S.i,"t",D),h.C=0,S=h.j.L,h.h=new xe,h.g=Nh(h.j,S?_:null,!h.u),h.P>0&&(h.O=new rt(p(h.Y,h,h.g),h.P)),_=h.V,S=h.g,D=h.ba;var J="readystatechange";Array.isArray(J)||(J&&(On[0]=J.toString()),J=On);for(let re=0;re<J.length;re++){const be=nt(S,J[re],D||_.handleEvent,!1,_.h||_);if(!be)break;_.g[be.key]=be}_=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,_)):(h.v="GET",h.g.ea(h.B,h.v,null,_)),tr(),Bo(h.i,h.v,h.B,h.l,h.S,h.u)}Ce.prototype.ba=function(h){h=h.target;const _=this.O;_&&ui(h)==3?_.j():this.Y(h)},Ce.prototype.Y=function(h){try{if(h==this.g)e:{const We=ui(this.g),on=this.g.ya(),bt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Mn(this.g)))){this.K||We!=4||on==7||(on==8||bt<=0?tr(3):tr(2)),Vt(this);var _=this.g.ca();this.X=_;var S=Me(this);if(this.o=_==200,Yi(this.i,this.v,this.B,this.l,this.S,We,_),this.o){if(this.U&&!this.L){t:{if(this.g){var D,J=this.g;if((D=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(D)){var re=D;break t}}re=null}if(h=re)nr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rn(this,h);else{this.o=!1,this.m=3,$t(12),Lt(this),Ze(this);break e}}if(this.R){h=!0;let Kt;for(;!this.K&&this.C<S.length;)if(Kt=it(this,S),Kt==Se){We==4&&(this.m=4,$t(14),h=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Te){this.m=4,$t(15),nr(this.i,this.l,S,"[Invalid Chunk]"),h=!1;break}else nr(this.i,this.l,Kt,null),Rn(this,Kt);if(Ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||S.length!=0||this.h.h||(this.m=1,$t(16),h=!1),this.o=this.o&&h,!h)nr(this.i,this.l,S,"[Invalid Chunked Response]"),Lt(this),Ze(this);else if(S.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Rc(be),be.P=!0,$t(11))}}else nr(this.i,this.l,S,null),Rn(this,S);We==4&&Lt(this),this.o&&!this.K&&(We==4?Ch(this.j,this):(this.o=!1,It(this)))}else Wi(this.g),_==400&&S.indexOf("Unknown SID")>0?(this.m=3,$t(12)):(this.m=0,$t(13)),Lt(this),Ze(this)}}}catch{}finally{}};function Me(h){if(!Ge(h))return h.g.la();const _=Mn(h.g);if(_==="")return"";let S="";const D=_.length,J=ui(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Lt(h),Ze(h),"";h.h.i=new u.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,S+=h.h.i.decode(_[re],{stream:!(J&&re==D-1)});return _.length=0,h.h.g+=S,h.C=0,h.h.g}function Ge(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function it(h,_){var S=h.C,D=_.indexOf(`
`,S);return D==-1?Se:(S=Number(_.substring(S,D)),isNaN(S)?Te:(D+=1,D+S>_.length?Se:(_=_.slice(D,D+S),h.C=D+S,_)))}Ce.prototype.cancel=function(){this.K=!0,Lt(this)};function It(h){h.T=Date.now()+h.H,zt(h,h.H)}function zt(h,_){if(h.D!=null)throw Error("WatchDog timer not null");h.D=wr(p(h.aa,h),_)}function Vt(h){h.D&&(u.clearTimeout(h.D),h.D=null)}Ce.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Ai(this.i,this.B),this.M!=2&&(tr(),$t(17)),Lt(this),this.m=2,Ze(this)):zt(this,this.T-h)};function Ze(h){h.j.I==0||h.K||Ch(h.j,h)}function Lt(h){Vt(h);var _=h.O;_&&typeof _.dispose=="function"&&_.dispose(),h.O=null,Br(h.V),h.g&&(_=h.g,h.g=null,_.abort(),_.dispose())}function Rn(h,_){try{var S=h.j;if(S.I!=0&&(S.g==h||Gn(S.h,h))){if(!h.L&&Gn(S.h,h)&&S.I==3){try{var D=S.Ba.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var J=D;if(J[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<h.F)Yo(S),Gs(S);else break e;Ja(S),$t(18)}}else S.xa=J[1],0<S.xa-S.K&&J[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=wr(p(S.Va,S),6e3));ur(S.h)<=1&&S.ta&&(S.ta=void 0)}else Oi(S,11)}else if((h.L||S.g==h)&&Yo(S),!x(_))for(J=S.Ba.g.parse(_),_=0;_<J.length;_++){let bt=J[_];const Kt=bt[0];if(!(Kt<=S.K))if(S.K=Kt,bt=bt[1],S.I==2)if(bt[0]=="c"){S.M=bt[1],S.ba=bt[2];const Gr=bt[3];Gr!=null&&(S.ka=Gr,S.j.info("VER="+S.ka));const Mi=bt[4];Mi!=null&&(S.za=Mi,S.j.info("SVER="+S.za));const hi=bt[5];hi!=null&&typeof hi=="number"&&hi>0&&(D=1.5*hi,S.O=D,S.j.info("backChannelRequestTimeoutMs_="+D)),D=S;const fi=h.g;if(fi){const Za=fi.g?fi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Za){var re=D.h;re.g||Za.indexOf("spdy")==-1&&Za.indexOf("quic")==-1&&Za.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(Rr(re,re.h),re.h=null))}if(D.G){const Qo=fi.g?fi.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(D.wa=Qo,Tt(D.J,D.G,Qo))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-h.F,S.j.info("Handshake RTT: "+S.T+"ms")),D=S;var be=h;if(D.na=xh(D,D.L?D.ba:null,D.W),be.L){wi(D.h,be);var We=be,on=D.O;on&&(We.H=on),We.D&&(Vt(We),It(We)),D.g=be}else Ah(D);S.i.length>0&&Di(S)}else bt[0]!="stop"&&bt[0]!="close"||Oi(S,7);else S.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?Oi(S,7):wc(S):bt[0]!="noop"&&S.l&&S.l.qa(bt),S.A=0)}}tr(4)}catch{}}var jt=class{constructor(h,_){this.g=h,this.map=_}};function cr(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ur(h){return h.h?1:h.g?h.g.size:0}function Gn(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Rr(h,_){h.g?h.g.add(_):h.h=_}function wi(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}cr.prototype.cancel=function(){if(this.i=Ci(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ci(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const S of h.g.values())_=_.concat(S.G);return _}return w(h.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(h,_){if(h){h=h.split("&");for(let S=0;S<h.length;S++){const D=h[S].indexOf("=");let J,re=null;D>=0?(J=h[S].substring(0,D),re=h[S].substring(D+1)):J=h[S],_(J,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function fn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;h instanceof fn?(this.l=h.l,et(this,h.j),this.o=h.o,this.g=h.g,Ir(this,h.u),this.h=h.h,js(this,bh(h.i)),this.m=h.m):h&&(_=String(h).match(ot))?(this.l=!1,et(this,_[1]||"",!0),this.o=Ri(_[2]||""),this.g=Ri(_[3]||"",!0),Ir(this,_[4]),this.h=Ri(_[5]||"",!0),js(this,_[6]||"",!0),this.m=Ri(_[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}fn.prototype.toString=function(){const h=[];var _=this.j;_&&h.push($a(_,Ho,!0),":");var S=this.g;return(S||_=="file")&&(h.push("//"),(_=this.o)&&h.push($a(_,Ho,!0),"@"),h.push(pe(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&h.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push($a(S,S.charAt(0)=="/"?vc:vh,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",$a(S,Eh)),h.join("")},fn.prototype.resolve=function(h){const _=xt(this);let S=!!h.j;S?et(_,h.j):S=!!h.o,S?_.o=h.o:S=!!h.g,S?_.g=h.g:S=h.u!=null;var D=h.h;if(S)Ir(_,h.u);else if(S=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var J=_.h.lastIndexOf("/");J!=-1&&(D=_.h.slice(0,J+1)+D)}if(J=D,J==".."||J==".")D="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){D=J.lastIndexOf("/",0)==0,J=J.split("/");const re=[];for(let be=0;be<J.length;){const We=J[be++];We=="."?D&&be==J.length&&re.push(""):We==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&be==J.length&&re.push("")):(re.push(We),D=!0)}D=re.join("/")}else D=J}return S?_.h=D:S=h.i.toString()!=="",S?js(_,bh(h.i)):S=!!h.m,S&&(_.m=h.m),_};function xt(h){return new fn(h)}function et(h,_,S){h.j=S?Ri(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Ir(h,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);h.u=_}else h.u=null}function js(h,_,S){_ instanceof zs?(h.i=_,qo(h.i,h.l)):(S||(_=$a(_,Us)),h.i=new zs(_,h.l))}function Tt(h,_,S){h.i.set(_,S)}function Ga(h){return Tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function Ri(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function $a(h,_,S){return typeof h=="string"?(h=encodeURI(h).replace(_,hr),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function hr(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ho=/[#\/\?@]/g,vh=/[#\?:]/g,vc=/[#\?]/g,Us=/[#\?@]/g,Eh=/#/g;function zs(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function fr(h){h.g||(h.g=new Map,h.h=0,h.i&&Xt(h.i,function(_,S){h.add(decodeURIComponent(_.replace(/\+/g," ")),S)}))}n=zs.prototype,n.add=function(h,_){fr(this),this.i=null,h=Bs(this,h);let S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(_),this.h+=1,this};function Th(h,_){fr(h),_=Bs(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Ec(h,_){return fr(h),_=Bs(h,_),h.g.has(_)}n.forEach=function(h,_){fr(this),this.g.forEach(function(S,D){S.forEach(function(J){h.call(_,J,D,this)},this)},this)};function Tc(h,_){fr(h);let S=[];if(typeof _=="string")Ec(h,_)&&(S=S.concat(h.g.get(Bs(h,_))));else for(h=Array.from(h.g.values()),_=0;_<h.length;_++)S=S.concat(h[_]);return S}n.set=function(h,_){return fr(this),this.i=null,h=Bs(this,h),Ec(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=Tc(this,h),h.length>0?String(h[0]):_):_};function Fo(h,_,S){Th(h,_),S.length>0&&(h.i=null,h.g.set(Bs(h,_),w(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(let D=0;D<_.length;D++){var S=_[D];const J=pe(S);S=Tc(this,S);for(let re=0;re<S.length;re++){let be=J;S[re]!==""&&(be+="="+pe(S[re])),h.push(be)}}return this.i=h.join("&")};function bh(h){const _=new zs;return _.i=h.i,h.g&&(_.g=new Map(h.g),_.h=h.h),_}function Bs(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function qo(h,_){_&&!h.j&&(fr(h),h.i=null,h.g.forEach(function(S,D){const J=D.toLowerCase();D!=J&&(Th(this,D),Fo(this,J,S))},h)),h.j=_}function li(h,_){const S=new Cr;if(u.Image){const D=new Image;D.onload=y(Fr,S,"TestLoadImage: loaded",!0,_,D),D.onerror=y(Fr,S,"TestLoadImage: error",!1,_,D),D.onabort=y(Fr,S,"TestLoadImage: abort",!1,_,D),D.ontimeout=y(Fr,S,"TestLoadImage: timeout",!1,_,D),u.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else _(!1)}function bc(h,_){const S=new Cr,D=new AbortController,J=setTimeout(()=>{D.abort(),Fr(S,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(J),re.ok?Fr(S,"TestPingServer: ok",!0,_):Fr(S,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(J),Fr(S,"TestPingServer: error",!1,_)})}function Fr(h,_,S,D,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),D(S)}catch{}}function Hs(){this.g=new Zn}function Ii(h){this.i=h.Sb||null,this.h=h.ab||!1}v(Ii,zo),Ii.prototype.g=function(){return new Ka(this.i,this.h)};function Ka(h,_){He.call(this),this.H=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}v(Ka,He),n=Ka.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=_,this.readyState=1,ci(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(_.body=h),(this.H||u).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Go(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Go(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Fs(this):ci(this),this.readyState==3&&Go(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Fs(this))},n.Na=function(h){this.g&&(this.response=h,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ci(h)}n.setRequestHeader=function(h,_){this.A.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var S=_.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=_.next();return h.join(`\r
`)};function ci(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function qr(h){let _="";return ke(h,function(S,D){_+=D,_+=":",_+=S,_+=`\r
`}),_}function Ya(h,_,S){e:{for(D in S){var D=!1;break e}D=!0}D||(S=qr(S),typeof h=="string"?S!=null&&pe(S):Tt(h,_,S))}function Nt(h){He.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}v(Nt,He);var xi=/^https?$/i,Sc=["POST","PUT"];n=Nt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,_,S,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():K.g(),this.g.onreadystatechange=b(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(re){Qa(this,re);return}if(h=S||"",S=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var J in D)S.set(J,D[J]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())S.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(S.keys()).find(re=>re.toLowerCase()=="content-type"),J=u.FormData&&h instanceof u.FormData,!(Array.prototype.indexOf.call(Sc,_,void 0)>=0)||D||J||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,be]of S)this.g.setRequestHeader(re,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Qa(this,re)}};function Qa(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.o=5,Ac(h),Xi(h)}function Ac(h){h.A||(h.A=!0,at(h,"complete"),at(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,at(this,"complete"),at(this,"abort"),Xi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Xa(this):this.Xa())},n.Xa=function(){Xa(this)};function Xa(h){if(h.h&&typeof l<"u"){if(h.v&&ui(h)==4)setTimeout(h.Ca.bind(h),0);else if(at(h,"readystatechange"),ui(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var S;if(!(S=_)){var D;if(D=re===0){let be=String(h.D).match(ot)[1]||null;!be&&u.self&&u.self.location&&(be=u.self.location.protocol.slice(0,-1)),D=!xi.test(be?be.toLowerCase():"")}S=D}if(S)at(h,"complete"),at(h,"success");else{h.o=6;try{var J=ui(h)>2?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.ca()+"]",Ac(h)}}finally{Xi(h)}}}}function Xi(h,_){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const S=h.g;h.g=null,_||at(h,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ui(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Fn(_)}};function Mn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(h){const _={};h=(h.g&&ui(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(x(h[D]))continue;var S=ve(h[D]);const J=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const re=_[J]||[];_[J]=re,re.push(S)}de(_,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(h,_,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||_}function qs(h){this.za=0,this.i=[],this.j=new Cr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,h),this.Za=Ni("retryDelaySeedMs",1e4,h),this.Ta=Ni("forwardChannelMaxRetries",2,h),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new cr(h&&h.concurrentRequestLimit),this.Ba=new Hs,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=qs.prototype,n.ka=8,n.I=1,n.connect=function(h,_,S,D){$t(0),this.W=h,this.H=_||{},S&&D!==void 0&&(this.H.OSID=S,this.H.OAID=D),this.F=this.X,this.J=xh(this,null,this.W),Di(this)};function wc(h){if($o(h),h.I==3){var _=h.V++,S=xt(h.J);if(Tt(S,"SID",h.M),Tt(S,"RID",_),Tt(S,"TYPE","terminate"),Wa(h,S),_=new Ce(h,h.j,_),_.M=2,_.A=Ga(xt(S)),S=!1,u.navigator&&u.navigator.sendBeacon)try{S=u.navigator.sendBeacon(_.A.toString(),"")}catch{}!S&&u.Image&&(new Image().src=_.A,S=!0),S||(_.g=Nh(_.j,null),_.g.ea(_.A)),_.F=Date.now(),It(_)}Ih(h)}function Gs(h){h.g&&(Rc(h),h.g.cancel(),h.g=null)}function $o(h){Gs(h),h.v&&(u.clearTimeout(h.v),h.v=null),Yo(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&u.clearTimeout(h.m),h.m=null)}function Di(h){if(!qn(h.h)&&!h.m){h.m=!0;var _=h.Ea;Y||C(),Q||(Y(),Q=!0),A.add(_,h),h.D=0}}function Ko(h,_){return ur(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=_.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=wr(p(h.Ea,h,_),Rh(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const J=new Ce(this,this.j,h);let re=this.o;if(this.U&&(re?(re=j(re),oe(re,this.U)):re=this.U),this.u!==null||this.R||(J.J=re,re=null),this.S)e:{for(var _=0,S=0;S<this.i.length;S++){t:{var D=this.i[S];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,_>4096){_=S;break e}if(_===4096||S===this.i.length-1){_=S+1;break e}}_=1e3}else _=1e3;_=Sh(this,J,_),S=xt(this.J),Tt(S,"RID",h),Tt(S,"CVER",22),this.G&&Tt(S,"X-HTTP-Session-Id",this.G),Wa(this,S),re&&(this.R?_="headers="+pe(qr(re))+"&"+_:this.u&&Ya(S,this.u,re)),Rr(this.h,J),this.Ra&&Tt(S,"TYPE","init"),this.S?(Tt(S,"$req",_),Tt(S,"SID","null"),J.U=!0,Ie(J,S,null)):Ie(J,S,_),this.I=2}}else this.I==3&&(h?Cc(this,h):this.i.length==0||qn(this.h)||Cc(this))};function Cc(h,_){var S;_?S=_.l:S=h.V++;const D=xt(h.J);Tt(D,"SID",h.M),Tt(D,"RID",S),Tt(D,"AID",h.K),Wa(h,D),h.u&&h.o&&Ya(D,h.u,h.o),S=new Ce(h,h.j,S,h.D+1),h.u===null&&(S.J=h.o),_&&(h.i=_.G.concat(h.i)),_=Sh(h,S,1e3),S.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),Rr(h.h,S),Ie(S,D,_)}function Wa(h,_){h.H&&ke(h.H,function(S,D){Tt(_,D,S)}),h.l&&ke({},function(S,D){Tt(_,D,S)})}function Sh(h,_,S){S=Math.min(h.i.length,S);const D=h.l?p(h.l.Ka,h.l,h):null;e:{var J=h.i;let We=-1;for(;;){const on=["count="+S];We==-1?S>0?(We=J[0].g,on.push("ofs="+We)):We=0:on.push("ofs="+We);let bt=!0;for(let Kt=0;Kt<S;Kt++){var re=J[Kt].g;const Gr=J[Kt].map;if(re-=We,re<0)We=Math.max(0,J[Kt].g-100),bt=!1;else try{re="req"+re+"_"||"";try{var be=Gr instanceof Map?Gr:Object.entries(Gr);for(const[Mi,hi]of be){let fi=hi;f(hi)&&(fi=an(hi)),on.push(re+Mi+"="+encodeURIComponent(fi))}}catch(Mi){throw on.push(re+"type="+encodeURIComponent("_badmap")),Mi}}catch{D&&D(Gr)}}if(bt){be=on.join("&");break e}}be=void 0}return h=h.i.splice(0,S),_.G=h,be}function Ah(h){if(!h.g&&!h.v){h.Y=1;var _=h.Da;Y||C(),Q||(Y(),Q=!0),A.add(_,h),h.A=0}}function Ja(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=wr(p(h.Da,h),Rh(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,wh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=wr(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$t(10),Gs(this),wh(this))};function Rc(h){h.B!=null&&(u.clearTimeout(h.B),h.B=null)}function wh(h){h.g=new Ce(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var _=xt(h.na);Tt(_,"RID","rpc"),Tt(_,"SID",h.M),Tt(_,"AID",h.K),Tt(_,"CI",h.F?"0":"1"),!h.F&&h.ia&&Tt(_,"TO",h.ia),Tt(_,"TYPE","xmlhttp"),Wa(h,_),h.u&&h.o&&Ya(_,h.u,h.o),h.O&&(h.g.H=h.O);var S=h.g;h=h.ba,S.M=1,S.A=Ga(xt(_)),S.u=null,S.R=!0,ze(S,h)}n.Va=function(){this.C!=null&&(this.C=null,Gs(this),Ja(this),$t(19))};function Yo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Ch(h,_){var S=null;if(h.g==_){Yo(h),Rc(h),h.g=null;var D=2}else if(Gn(h.h,_))S=_.G,wi(h.h,_),D=1;else return;if(h.I!=0){if(_.o)if(D==1){S=_.u?_.u.length:0,_=Date.now()-_.F;var J=h.D;D=Ls(),at(D,new Hr(D,S)),Di(h)}else Ah(h);else if(J=_.m,J==3||J==0&&_.X>0||!(D==1&&Ko(h,_)||D==2&&Ja(h)))switch(S&&S.length>0&&(_=h.h,_.i=_.i.concat(S)),J){case 1:Oi(h,5);break;case 4:Oi(h,10);break;case 3:Oi(h,6);break;default:Oi(h,2)}}}function Rh(h,_){let S=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(S*=2),S*_}function Oi(h,_){if(h.j.info("Error code "+_),_==2){var S=p(h.bb,h),D=h.Ua;const J=!D;D=new fn(D||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||et(D,"https"),Ga(D),J?li(D.toString(),S):bc(D.toString(),S)}else $t(2);h.I=0,h.l&&h.l.pa(_),Ih(h),$o(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Ih(h){if(h.I=0,h.ja=[],h.l){const _=Ci(h.h);(_.length!=0||h.i.length!=0)&&(M(h.ja,_),M(h.ja,h.i),h.h.i.length=0,w(h.i),h.i.length=0),h.l.oa()}}function xh(h,_,S){var D=S instanceof fn?xt(S):new fn(S);if(D.g!="")_&&(D.g=_+"."+D.g),Ir(D,D.u);else{var J=u.location;D=J.protocol,_=_?_+"."+J.hostname:J.hostname,J=+J.port;const re=new fn(null);D&&et(re,D),_&&(re.g=_),J&&Ir(re,J),S&&(re.h=S),D=re}return S=h.G,_=h.wa,S&&_&&Tt(D,S,_),Tt(D,"VER",h.ka),Wa(h,D),D}function Nh(h,_,S){if(_&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Aa&&!h.ma?new Nt(new Ii({ab:S})):new Nt(h.ma),_.Fa(h.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dh(){}n=Dh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function $s(){}$s.prototype.g=function(h,_){return new rr(h,_)};function rr(h,_){He.call(this),this.g=new qs(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(h?h["X-WebChannel-Client-Profile"]=_.sa:h={"X-WebChannel-Client-Profile":_.sa}),this.g.U=h,(h=_&&_.Qb)&&!x(h)&&(this.g.u=h),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.G=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Ji(this)}v(rr,He),rr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){wc(this.g)},rr.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.v&&(S={},S.__data__=an(h),h=S);_.i.push(new jt(_.Ya++,h)),_.I==3&&Di(_)},rr.prototype.N=function(){this.g.l=null,delete this.j,wc(this.g),delete this.g,rr.Z.N.call(this)};function Oh(h){Pt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const S in _){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}v(Oh,Pt);function Mh(){er.call(this),this.status=1}v(Mh,er);function Ji(h){this.g=h}v(Ji,Dh),Ji.prototype.ra=function(){at(this.g,"a")},Ji.prototype.qa=function(h){at(this.g,new Oh(h))},Ji.prototype.pa=function(h){at(this.g,new Mh)},Ji.prototype.oa=function(){at(this.g,"b")},$s.prototype.createWebChannel=$s.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,Nw=function(){return new $s},xw=function(){return Ls()},Iw=Gt,Dy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,nd=Qi,B.COMPLETE="complete",Rw=B,Vs.EventType=Ar,Ar.OPEN="a",Ar.CLOSE="b",Ar.ERROR="c",Ar.MESSAGE="d",He.prototype.listen=He.prototype.J,Eu=Vs,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,Cw=Nt}).apply(typeof Bf<"u"?Bf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qn.UNAUTHENTICATED=new Qn(null),Qn.GOOGLE_CREDENTIALS=new Qn("google-credentials-uid"),Qn.FIRST_PARTY=new Qn("first-party-uid"),Qn.MOCK_USER=new Qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="12.8.0";function HO(n){uc=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new __("@firebase/firestore");function Dl(){return xo.logLevel}function Re(n,...e){if(xo.logLevel<=ft.DEBUG){const t=e.map(T_);xo.debug(`Firestore (${uc}): ${n}`,...t)}}function Rs(n,...e){if(xo.logLevel<=ft.ERROR){const t=e.map(T_);xo.error(`Firestore (${uc}): ${n}`,...t)}}function Wl(n,...e){if(xo.logLevel<=ft.WARN){const t=e.map(T_);xo.warn(`Firestore (${uc}): ${n}`,...t)}}function T_(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Dw(n,i,t)}function Dw(n,e,t){let i=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Rs(i),new Error(i)}function wt(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Dw(e,a,i)}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ks{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qn.UNAUTHENTICATED)))}shutdown(){}}class qO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GO{constructor(e){this.t=e,this.currentUser=Qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new As;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new As,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new As)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(wt(typeof i.accessToken=="string",31837,{l:i}),new Ow(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string",2055,{h:e}),new Qn(e)}}class $O{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Qn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class KO{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new $O(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){wt(this.o===void 0,3512);const i=l=>{l.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,Re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(wt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new z0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=QO(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function dt(n,e){return n<e?-1:n>e?1:0}function Oy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const a=n.charAt(i),l=e.charAt(i);if(a!==l)return ry(a)===ry(l)?dt(a,l):ry(a)?1:-1}return dt(n.length,e.length)}const XO=55296,WO=57343;function ry(n){const e=n.charCodeAt(0);return e>=XO&&e<=WO}function Jl(n,e,t){return n.length===e.length&&n.every(((i,a)=>t(i,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="__name__";class ji{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ji?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=ji.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return dt(e.length,t.length)}static compareSegments(e,t){const i=ji.isNumericId(e),a=ji.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?ji.extractNumericId(e).compare(ji.extractNumericId(t)):Oy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class Ut extends ji{construct(e,t,i){return new Ut(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new we(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ut(t)}static emptyPath(){return new Ut([])}}const JO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends ji{construct(e,t,i){return new Bn(e,t,i)}static isValidIdentifier(e){return JO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B0}static keyField(){return new Bn([B0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new we(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new we(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new we(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(i+=f,a++):(l(),a++)}if(l(),u)throw new we(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(t)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Ut.fromString(e))}static fromName(e){return new Le(Ut.fromString(e).popFirst(5))}static empty(){return new Le(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(n,e,t){if(!t)throw new we(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZO(n,e,t,i){if(e===!0&&i===!0)throw new we(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function H0(n){if(!Le.isDocumentKey(n))throw new we(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F0(n){if(Le.isDocumentKey(n))throw new we(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Pw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function sm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be(12329,{type:typeof n})}function Er(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sm(n);throw new we(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(n,e){const t={typeString:n};return e&&(t.value=e),t}function ih(n,e){if(!Pw(n))throw new we(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(a&&typeof u!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new we(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,G0=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*G0);return new Ft(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q0)throw new we(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G0}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ih(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:En("string",Ft._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{static fromTimestamp(e){return new $e(e)}static min(){return new $e(new Ft(0,0))}static max(){return new $e(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=-1;function eM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=$e.fromTimestamp(i===1e9?new Ft(t+1,0):new Ft(t,i));return new Oa(a,Le.empty(),e)}function tM(n){return new Oa(n.readTime,n.key,Uu)}class Oa{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oa($e.min(),Le.empty(),Uu)}static max(){return new Oa($e.max(),Le.empty(),Uu)}}function nM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:dt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==rM)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,i)=>{t(e)}))}static reject(e){return new fe(((t,i)=>{i(e)}))}static waitFor(e){return new fe(((t,i)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(m=>i(m)))})),u=!0,l===a&&t()}))}static or(e){let t=fe.resolve(!1);for(const i of e)t=t.next((a=>a?fe.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new fe(((i,a)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((y=>{u[p]=y,++f,f===l&&i(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new fe(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}function sM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}am.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-1;function om(n){return n==null}function Cd(n){return n===0&&1/n==-1/0}function aM(n){return typeof n=="number"&&Number.isInteger(n)&&!Cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="";function oM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=$0(e)),e=lM(n.get(t),e);return $0(e)}function lM(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case kw:t+="";break;default:t+=l}}return t}function $0(n){return n+kw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t){this.comparator=e,this.root=t||zn.EMPTY}insert(e,t){return new Zt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zn.BLACK,null,null))}remove(e){return new Zt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hf(this.root,e,this.comparator,!0)}}class Hf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zn{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??zn.RED,this.left=a??zn.EMPTY,this.right=l??zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new zn(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return zn.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}}zn.EMPTY=null,zn.RED=!0,zn.BLACK=!1;zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new Zt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(e){return new Y0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class Y0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new Lr([])}unionWith(e){let t=new wn(Bn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Lw("Invalid base64 string: "+l):l}})(e);return new Hn(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new Hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Hn.EMPTY_BYTE_STRING=new Hn("");const cM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(n){if(wt(!!n,39018),typeof n=="string"){let e=0;const t=cM.exec(n);if(wt(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:un(n.seconds),nanos:un(n.nanos)}}function un(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pa(n){return typeof n=="string"?Hn.fromBase64String(n):Hn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="server_timestamp",Uw="__type__",zw="__previous_value__",Bw="__local_write_time__";function A_(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Uw])==null?void 0:i.stringValue)===jw}function lm(n){const e=n.mapValue.fields[zw];return A_(e)?lm(e):e}function zu(n){const e=Ma(n.mapValue.fields[Bw].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(e,t,i,a,l,u,f,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=v}}const Rd="(default)";class Bu{constructor(e,t){this.projectId=e,this.database=t||Rd}static empty(){return new Bu("","")}get isDefaultDatabase(){return this.database===Rd}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}function hM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new we(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw="__type__",fM="__max__",Ff={mapValue:{}},Fw="__vector__",Id="value";function ka(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?A_(n)?4:mM(n)?9007199254740991:dM(n)?10:11:Be(28295,{value:n})}function $i(n,e){if(n===e)return!0;const t=ka(n);if(t!==ka(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zu(n).isEqual(zu(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Ma(a.timestampValue),f=Ma(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,l){return Pa(a.bytesValue).isEqual(Pa(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,l){return un(a.geoPointValue.latitude)===un(l.geoPointValue.latitude)&&un(a.geoPointValue.longitude)===un(l.geoPointValue.longitude)})(n,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return un(a.integerValue)===un(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=un(a.doubleValue),f=un(l.doubleValue);return u===f?Cd(u)===Cd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return Jl(n.arrayValue.values||[],e.arrayValue.values||[],$i);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(K0(u)!==K0(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!$i(u[m],f[m])))return!1;return!0})(n,e);default:return Be(52216,{left:n})}}function Hu(n,e){return(n.values||[]).find((t=>$i(t,e)))!==void 0}function Zl(n,e){if(n===e)return 0;const t=ka(n),i=ka(e);if(t!==i)return dt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=un(l.integerValue||l.doubleValue),m=un(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(n,e);case 3:return Q0(n.timestampValue,e.timestampValue);case 4:return Q0(zu(n),zu(e));case 5:return Oy(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=Pa(l),m=Pa(u);return f.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),m=u.split("/");for(let p=0;p<f.length&&p<m.length;p++){const y=dt(f[p],m[p]);if(y!==0)return y}return dt(f.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=dt(un(l.latitude),un(u.latitude));return f!==0?f:dt(un(l.longitude),un(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return X0(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var b,w,M,z;const f=l.fields||{},m=u.fields||{},p=(b=f[Id])==null?void 0:b.arrayValue,y=(w=m[Id])==null?void 0:w.arrayValue,v=dt(((M=p==null?void 0:p.values)==null?void 0:M.length)||0,((z=y==null?void 0:y.values)==null?void 0:z.length)||0);return v!==0?v:X0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Ff.mapValue&&u===Ff.mapValue)return 0;if(l===Ff.mapValue)return 1;if(u===Ff.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),p=u.fields||{},y=Object.keys(p);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const b=Oy(m[v],y[v]);if(b!==0)return b;const w=Zl(f[m[v]],p[y[v]]);if(w!==0)return w}return dt(m.length,y.length)})(n.mapValue,e.mapValue);default:throw Be(23264,{he:t})}}function Q0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return dt(n,e);const t=Ma(n),i=Ma(e),a=dt(t.seconds,i.seconds);return a!==0?a:dt(t.nanos,i.nanos)}function X0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Zl(t[a],i[a]);if(l)return l}return dt(t.length,i.length)}function ec(n){return My(n)}function My(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Ma(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Pa(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Le.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=My(l);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of i)l?l=!1:a+=",",a+=`${u}:${My(t.fields[u])}`;return a+"}"})(n.mapValue):Be(61005,{value:n})}function rd(n){switch(ka(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(n);return e?16+rd(e):16;case 5:return 2*n.stringValue.length;case 6:return Pa(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+rd(l)),0)})(n.arrayValue);case 10:case 11:return(function(i){let a=0;return Ua(i.fields,((l,u)=>{a+=l.length+rd(u)})),a})(n.mapValue);default:throw Be(13486,{value:n})}}function W0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Py(n){return!!n&&"integerValue"in n}function w_(n){return!!n&&"arrayValue"in n}function J0(n){return!!n&&"nullValue"in n}function Z0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function id(n){return!!n&&"mapValue"in n}function dM(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Hw])==null?void 0:i.stringValue)===Fw}function Ru(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ua(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Ru(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ru(n.arrayValue.values[t]);return e}return{...n}}function mM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.value=e}static empty(){return new vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(t)}setAll(e){let t=Bn.emptyPath(),i={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=f.popLast()}u?i[f.lastSegment()]=Ru(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $i(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];id(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ua(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new vr(Ru(this.value))}}function qw(n){const e=[];return Ua(n.fields,((t,i)=>{const a=new Bn([t]);if(id(i)){const l=qw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t,i,a,l,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new Wn(e,0,$e.min(),$e.min(),$e.min(),vr.empty(),0)}static newFoundDocument(e,t,i,a){return new Wn(e,1,t,$e.min(),i,a,0)}static newNoDocument(e,t){return new Wn(e,2,t,$e.min(),$e.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new Wn(e,3,t,$e.min(),$e.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual($e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=$e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t){this.position=e,this.inclusive=t}}function eS(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],u=n.position[a];if(l.field.isKeyField()?i=Le.comparator(Le.fromName(u.referenceValue),t.key):i=Zl(u,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function tS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$i(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{}class vn extends Gw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yM(e,t,i):t==="array-contains"?new EM(e,i):t==="in"?new TM(e,i):t==="not-in"?new bM(e,i):t==="array-contains-any"?new SM(e,i):new vn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new _M(e,i):new vM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zl(t,this.value)):t!==null&&ka(this.value)===ka(t)&&this.matchesComparison(Zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends Gw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ti(e,t)}matches(e){return $w(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $w(n){return n.op==="and"}function Kw(n){return gM(n)&&$w(n)}function gM(n){for(const e of n.filters)if(e instanceof Ti)return!1;return!0}function ky(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+ec(n.value);if(Kw(n))return n.filters.map((e=>ky(e))).join(",");{const e=n.filters.map((t=>ky(t))).join(",");return`${n.op}(${e})`}}function Yw(n,e){return n instanceof vn?(function(i,a){return a instanceof vn&&i.op===a.op&&i.field.isEqual(a.field)&&$i(i.value,a.value)})(n,e):n instanceof Ti?(function(i,a){return a instanceof Ti&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,u,f)=>l&&Yw(u,a.filters[f])),!0):!1})(n,e):void Be(19439)}function Qw(n){return n instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${ec(t.value)}`})(n):n instanceof Ti?(function(t){return t.op.toString()+" {"+t.getFilters().map(Qw).join(" ,")+"}"})(n):"Filter"}class yM extends vn{constructor(e,t,i){super(e,t,i),this.key=Le.fromName(i.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class _M extends vn{constructor(e,t){super(e,"in",t),this.keys=Xw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vM extends vn{constructor(e,t){super(e,"not-in",t),this.keys=Xw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Xw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Le.fromName(i.referenceValue)))}class EM extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return w_(t)&&Hu(t.arrayValue,this.value)}}class TM extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}}class bM extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hu(this.value.arrayValue,t)}}class SM extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!w_(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Hu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,t=null,i=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function nS(n,e=null,t=[],i=[],a=null,l=null,u=null){return new AM(n,e,t,i,a,l,u)}function C_(n){const e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ky(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ec(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ec(i))).join(",")),e.Te=t}return e.Te}function R_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Yw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tS(n.startAt,e.startAt)&&tS(n.endAt,e.endAt)}function Vy(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,t=null,i=[],a=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function wM(n,e,t,i,a,l,u,f){return new sh(n,e,t,i,a,l,u,f)}function cm(n){return new sh(n)}function rS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function CM(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ww(n){return n.collectionGroup!==null}function Iu(n){const e=Qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new wn(Bn.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Nd(l,i))})),t.has(Bn.keyField().canonicalString())||e.Ie.push(new Nd(Bn.keyField(),i))}return e.Ie}function Bi(n){const e=Qe(n);return e.Ee||(e.Ee=RM(e,Iu(n))),e.Ee}function RM(n,e){if(n.limitType==="F")return nS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new Nd(a.field,l)}));const t=n.endAt?new xd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new xd(n.startAt.position,n.startAt.inclusive):null;return nS(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Ly(n,e){const t=n.filters.concat([e]);return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jy(n,e,t){return new sh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function um(n,e){return R_(Bi(n),Bi(e))&&n.limitType===e.limitType}function Jw(n){return`${C_(Bi(n))}|lt:${n.limitType}`}function Ol(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Qw(a))).join(", ")}]`),om(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>ec(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>ec(a))).join(",")),`Target(${i})`})(Bi(n))}; limitType=${n.limitType})`}function hm(n,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Le.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(n,e)&&(function(i,a){for(const l of Iu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(n,e)&&(function(i,a){return!(i.startAt&&!(function(u,f,m){const p=eS(u,f,m);return u.inclusive?p<=0:p<0})(i.startAt,Iu(i),a)||i.endAt&&!(function(u,f,m){const p=eS(u,f,m);return u.inclusive?p>=0:p>0})(i.endAt,Iu(i),a))})(n,e)}function IM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zw(n){return(e,t)=>{let i=!1;for(const a of Iu(n)){const l=xM(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function xM(n,e,t){const i=n.field.isKeyField()?Le.comparator(e.key,t.key):(function(l,u,f){const m=u.data.field(l),p=f.data.field(l);return m!==null&&p!==null?Zl(m,p):Be(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Be(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return Vw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM=new Zt(Le.comparator);function Is(){return NM}const e1=new Zt(Le.comparator);function Tu(...n){let e=e1;for(const t of n)e=e.insert(t.key,t);return e}function t1(n){let e=e1;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function To(){return xu()}function n1(){return xu()}function xu(){return new Vo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const DM=new Zt(Le.comparator),OM=new wn(Le.comparator);function mt(...n){let e=OM;for(const t of n)e=e.add(t);return e}const MM=new wn(dt);function PM(){return MM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function r1(n){return{integerValue:""+n}}function kM(n,e){return aM(e)?r1(e):I_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function VM(n,e,t){return n instanceof Fu?(function(a,l){const u={fields:{[Uw]:{stringValue:jw},[Bw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&A_(l)&&(l=lm(l)),l&&(u.fields[zw]=l),{mapValue:u}})(t,e):n instanceof qu?s1(n,e):n instanceof Gu?a1(n,e):(function(a,l){const u=i1(a,l),f=iS(u)+iS(a.Ae);return Py(u)&&Py(a.Ae)?r1(f):I_(a.serializer,f)})(n,e)}function LM(n,e,t){return n instanceof qu?s1(n,e):n instanceof Gu?a1(n,e):t}function i1(n,e){return n instanceof Dd?(function(i){return Py(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Fu extends fm{}class qu extends fm{constructor(e){super(),this.elements=e}}function s1(n,e){const t=o1(e);for(const i of n.elements)t.some((a=>$i(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Gu extends fm{constructor(e){super(),this.elements=e}}function a1(n,e){let t=o1(e);for(const i of n.elements)t=t.filter((a=>!$i(a,i)));return{arrayValue:{values:t}}}class Dd extends fm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function iS(n){return un(n.integerValue||n.doubleValue)}function o1(n){return w_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,t){this.field=e,this.transform=t}}function UM(n,e){return n.field.isEqual(e.field)&&(function(i,a){return i instanceof qu&&a instanceof qu||i instanceof Gu&&a instanceof Gu?Jl(i.elements,a.elements,$i):i instanceof Dd&&a instanceof Dd?$i(i.Ae,a.Ae):i instanceof Fu&&a instanceof Fu})(n.transform,e.transform)}class zM{constructor(e,t){this.version=e,this.transformResults=t}}class Tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class dm{}function l1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mm(n.key,Tr.none()):new ah(n.key,n.data,Tr.none());{const t=n.data,i=vr.empty();let a=new wn(Bn.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?i.delete(l):i.set(l,u),a=a.add(l)}return new za(n.key,i,new Lr(a.toArray()),Tr.none())}}function BM(n,e,t){n instanceof ah?(function(a,l,u){const f=a.value.clone(),m=aS(a.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof za?(function(a,l,u){if(!sd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=aS(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(c1(a)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(n,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Nu(n,e,t,i){return n instanceof ah?(function(l,u,f,m){if(!sd(l.precondition,u))return f;const p=l.value.clone(),y=oS(l.fieldTransforms,m,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof za?(function(l,u,f,m){if(!sd(l.precondition,u))return f;const p=oS(l.fieldTransforms,m,u),y=u.data;return y.setAll(c1(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(n,e,t,i):(function(l,u,f){return sd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function HM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=i1(i.transform,a||null);l!=null&&(t===null&&(t=vr.empty()),t.set(i.field,l))}return t||null}function sS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Jl(i,a,((l,u)=>UM(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ah extends dm{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class za extends dm{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function c1(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function aS(n,e,t){const i=new Map;wt(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let a=0;a<t.length;a++){const l=n[a],u=l.transform,f=e.data.field(l.field);i.set(l.field,LM(u,f,t[a]))}return i}function oS(n,e,t){const i=new Map;for(const a of n){const l=a.transform,u=t.data.field(a.field);i.set(a.field,VM(l,u,e))}return i}class mm extends dm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FM extends dm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&BM(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Nu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Nu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=n1();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const m=l1(u,f);m!==null&&i.set(a.key,m),u.isValidDocument()||u.convertToNoDocument($e.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,((t,i)=>sS(t,i)))&&Jl(this.baseMutations,e.baseMutations,((t,i)=>sS(t,i)))}}class x_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){wt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return DM})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,i[u].version);return new x_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,gt;function KM(n){switch(n){case le.OK:return Be(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Be(15467,{code:n})}}function u1(n){if(n===void 0)return Rs("GRPC error has no .code"),le.UNKNOWN;switch(n){case yn.OK:return le.OK;case yn.CANCELLED:return le.CANCELLED;case yn.UNKNOWN:return le.UNKNOWN;case yn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case yn.INTERNAL:return le.INTERNAL;case yn.UNAVAILABLE:return le.UNAVAILABLE;case yn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case yn.NOT_FOUND:return le.NOT_FOUND;case yn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case yn.ABORTED:return le.ABORTED;case yn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case yn.DATA_LOSS:return le.DATA_LOSS;default:return Be(39323,{code:n})}}(gt=yn||(yn={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new xa([4294967295,4294967295],0);function lS(n){const e=YM().encode(n),t=new ww;return t.update(e),new Uint8Array(t.digest())}function cS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xa([t,i],0),new xa([a,l],0)]}class N_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(i<0)throw new bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xa.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(xa.fromNumber(i)));return a.compare(QM)===1&&(a=new xa([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=lS(e),[i,a]=cS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);if(!this.we(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new N_(l,a,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=lS(e),[i,a]=cS(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(i,a,l);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new pm($e.min(),a,new Zt(dt),Is(),mt())}}class oh{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new oh(i,t,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=a}}class h1{constructor(e,t){this.targetId=e,this.Ce=t}}class f1{constructor(e,t,i=Hn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class uS{constructor(){this.ve=0,this.Fe=hS(),this.Me=Hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mt(),t=mt(),i=mt();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Be(38017,{changeType:l})}})),new oh(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=hS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,wt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class XM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Is(),this.He=qf(),this.Je=qf(),this.Ze=new Zt(dt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Vy(l))if(i===0){const u=new Le(l.path);this.et(t,u,Wn.newNoDocument(u,$e.min()))}else wt(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),m=f?this.ct(f,e,u):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=Pa(i).toUint8Array()}catch(m){if(m instanceof Lw)return Wl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new N_(u,a,l)}catch(m){return Wl(m instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&Vy(f.target)){const m=new Le(f.target.path);this.It(m).has(u)||this.Et(u,m)||this.et(u,m,Wn.newNoDocument(m,e))}l.Be&&(t.set(u,l.ke()),l.Ke())}}));let i=mt();this.Je.forEach(((l,u)=>{let f=!0;u.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const a=new pm(e,t,this.Ze,this.je,i);return this.je=Is(),this.He=qf(),this.Je=qf(),this.Ze=new Zt(dt),a}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.qe(t,1):a.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new uS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new wn(dt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new wn(dt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new uS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qf(){return new Zt(Le.comparator)}function hS(){return new Zt(Le.comparator)}const WM={asc:"ASCENDING",desc:"DESCENDING"},JM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZM={and:"AND",or:"OR"};class eP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Uy(n,e){return n.useProto3Json||om(e)?e:{value:e}}function Od(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tP(n,e){return Od(n,e.toTimestamp())}function Hi(n){return wt(!!n,49232),$e.fromTimestamp((function(t){const i=Ma(t);return new Ft(i.seconds,i.nanos)})(n))}function D_(n,e){return zy(n,e).canonicalString()}function zy(n,e){const t=(function(a){return new Ut(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?t:t.child(e)}function m1(n){const e=Ut.fromString(n);return wt(v1(e),10190,{key:e.toString()}),e}function By(n,e){return D_(n.databaseId,e.path)}function iy(n,e){const t=m1(e);if(t.get(1)!==n.databaseId.projectId)throw new we(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(g1(t))}function p1(n,e){return D_(n.databaseId,e)}function nP(n){const e=m1(n);return e.length===4?Ut.emptyPath():g1(e)}function Hy(n){return new Ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function g1(n){return wt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function fS(n,e,t){return{name:By(n,e),fields:t.value.mapValue.fields}}function rP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Be(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(wt(y===void 0||typeof y=="string",58123),Hn.fromBase64String(y||"")):(wt(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Hn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const y=p.code===void 0?le.UNKNOWN:u1(p.code);return new we(y,p.message||"")})(u);t=new f1(i,a,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=iy(n,i.document.name),l=Hi(i.document.updateTime),u=i.document.createTime?Hi(i.document.createTime):$e.min(),f=new vr({mapValue:{fields:i.document.fields}}),m=Wn.newFoundDocument(a,l,u,f),p=i.targetIds||[],y=i.removedTargetIds||[];t=new ad(p,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=iy(n,i.document),l=i.readTime?Hi(i.readTime):$e.min(),u=Wn.newNoDocument(a,l),f=i.removedTargetIds||[];t=new ad([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=iy(n,i.document),l=i.removedTargetIds||[];t=new ad([],l,a,null)}else{if(!("filter"in e))return Be(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,u=new $M(a,l),f=i.targetId;t=new h1(f,u)}}return t}function iP(n,e){let t;if(e instanceof ah)t={update:fS(n,e.key,e.value)};else if(e instanceof mm)t={delete:By(n,e.key)};else if(e instanceof za)t={update:fS(n,e.key,e.data),updateMask:dP(e.fieldMask)};else{if(!(e instanceof FM))return Be(16599,{dt:e.type});t={verify:By(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,u){const f=u.transform;if(f instanceof Fu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Gu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Dd)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Be(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:tP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Be(27497)})(n,e.precondition)),t}function sP(n,e){return n&&n.length>0?(wt(e!==void 0,14353),n.map((t=>(function(a,l){let u=a.updateTime?Hi(a.updateTime):Hi(l);return u.isEqual($e.min())&&(u=Hi(l)),new zM(u,a.transformResults||[])})(t,e)))):[]}function aP(n,e){return{documents:[p1(n,e.path)]}}function oP(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=p1(n,a);const l=(function(p){if(p.length!==0)return _1(Ti.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((y=>(function(b){return{field:Ml(b.field),direction:uP(b.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Uy(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function lP(n){let e=nP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){wt(i===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const b=y1(v);return b instanceof Ti&&Kw(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((b=>(function(M){return new Nd(Pl(M.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let b;return b=typeof v=="object"?v.value:v,om(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(v){const b=!!v.before,w=v.values||[];return new xd(w,b)})(t.startAt));let p=null;return t.endAt&&(p=(function(v){const b=!v.before,w=v.values||[];return new xd(w,b)})(t.endAt)),wM(e,a,u,l,f,"F",m,p)}function cP(n,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function y1(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Pl(t.unaryFilter.field);return vn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Pl(t.unaryFilter.field);return vn.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Pl(t.unaryFilter.field);return vn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Pl(t.unaryFilter.field);return vn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Be(61313);default:return Be(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vn.create(Pl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Be(58110);default:return Be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ti.create(t.compositeFilter.filters.map((i=>y1(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Be(1026)}})(t.compositeFilter.op))})(n):Be(30097,{filter:n})}function uP(n){return WM[n]}function hP(n){return JM[n]}function fP(n){return ZM[n]}function Ml(n){return{fieldPath:n.canonicalString()}}function Pl(n){return Bn.fromServerFormat(n.fieldPath)}function _1(n){return n instanceof vn?(function(t){if(t.op==="=="){if(Z0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NAN"}};if(J0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Z0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NAN"}};if(J0(t.value))return{unaryFilter:{field:Ml(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ml(t.field),op:hP(t.op),value:t.value}}})(n):n instanceof Ti?(function(t){const i=t.getFilters().map((a=>_1(a)));return i.length===1?i[0]:{compositeFilter:{op:fP(t.op),filters:i}}})(n):Be(54877,{filter:n})}function dP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function v1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function E1(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t,i,a,l=$e.min(),u=$e.min(),f=Hn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new Aa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Aa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.yt=e}}function pP(n){const e=lP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.Sn=new yP}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(Oa.min())}updateCollectionGroup(e,t,i){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class yP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new wn(Ut.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new wn(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T1=41943040;class _r{static withCacheSize(e){return new _r(e,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(T1,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new tc(0)}static ar(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="LruGarbageCollector",_P=1048576;function pS([n,e],[t,i]){const a=dt(n,t);return a===0?dt(e,i):a}class vP{constructor(e){this.Pr=e,this.buffer=new wn(pS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();pS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Re(mS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fc(t)?Re(mS,"Ignoring IndexedDB error during garbage collection: ",t):await hc(t)}await this.Ar(3e5)}))}}class TP{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(am.ce);const i=new vP(t);return this.Vr.forEachTarget(e,(a=>i.Er(a.sequenceNumber))).next((()=>this.Vr.mr(e,(a=>i.Er(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(dS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,a,l,u,f,m,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(i=v,f=Date.now(),this.removeTargets(e,i,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((v=>(p=Date.now(),Dl()<=ft.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(p-m)+`ms
Total Duration: ${p-y}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function bP(n,e){return new TP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.changes=new Vo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?fe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Nu(i.mutation,a,Lr.empty(),Ft.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,mt()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=mt()){const a=To();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let u=Tu();return l.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=To();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,mt())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,a){let l=Is();const u=xu(),f=(function(){return xu()})();return t.forEach(((m,p)=>{const y=i.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof za)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Nu(y.mutation,p,y.mutation.getFieldMask(),Ft.now())):u.set(p.key,Lr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,y)=>u.set(p,y))),t.forEach(((p,y)=>f.set(p,new AP(y,u.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=xu();let a=new Zt(((u,f)=>u-f)),l=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let y=i.get(m)||Lr.empty();y=f.applyToLocalView(p,y),i.set(m,y);const v=(a.get(f.batchId)||mt()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),p=m.key,y=m.value,v=n1();y.forEach((b=>{if(!l.has(b)){const w=l1(t.get(b),i.get(b));w!==null&&v.set(b,w),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,v))}return fe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return CM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ww(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):fe.resolve(To());let f=Uu,m=l;return u.next((p=>fe.forEach(p,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?fe.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,mt()))).next((y=>({batchId:f,changes:t1(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next((i=>{let a=Tu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let u=Tu();return this.indexManager.getCollectionParents(e,l).next((f=>fe.forEach(f,(m=>{const p=(function(v,b){return new sh(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((y=>{y.forEach(((v,b)=>{u=u.insert(v,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((u=>{l.forEach(((m,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,Wn.newInvalidDocument(y)))}));let f=Tu();return u.forEach(((m,p)=>{const y=l.get(m);y!==void 0&&Nu(y.mutation,p,Lr.empty(),Ft.now()),hm(t,p)&&(f=f.insert(m,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Hi(a.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(a){return{name:a.name,query:pP(a.bundledQuery),readTime:Hi(a.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this.overlays=new Zt(Le.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=To();return fe.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Lr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(i)),fe.resolve()}getOverlaysForCollection(e,t,i){const a=To(),l=t.length+1,u=new Le(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return fe.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new Zt(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let y=l.get(p.largestBatchId);y===null&&(y=To(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=To(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return fe.resolve(f)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Lr.get(a.largestBatchId).delete(i.key);this.Lr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new GM(t,i));let l=this.Lr.get(t);l===void 0&&(l=mt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(){this.sessionToken=Hn.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.kr=new wn(Nn.Kr),this.qr=new wn(Nn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new Nn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new Nn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Le(new Ut([])),i=new Nn(t,e),a=new Nn(t,e+1),l=[];return this.qr.forEachInRange([i,a],(u=>{this.Wr(u),l.push(u.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Le(new Ut([])),i=new Nn(t,e),a=new Nn(t,e+1);let l=mt();return this.qr.forEachInRange([i,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Nn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Nn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Le.comparator(e.key,t.key)||dt(e.Hr,t.Hr)}static Ur(e,t){return dt(e.Hr,t.Hr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new wn(Nn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new qM(l,t,i,a);this.mutationQueue.push(u);for(const f of a)this.Jr=this.Jr.add(new Nn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return fe.resolve(u)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?S_:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Nn(t,0),a=new Nn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([i,a],(u=>{const f=this.Zr(u.Hr);l.push(f)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new wn(dt);return t.forEach((a=>{const l=new Nn(a,0),u=new Nn(a,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,u],(f=>{i=i.add(f.Hr)}))})),fe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;Le.isDocumentKey(l)||(l=l.child(""));const u=new Nn(new Le(l),0);let f=new wn(dt);return this.Jr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(f=f.add(m.Hr)),!0)}),u),fe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const a=this.Zr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){wt(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return fe.forEach(t.mutations,(a=>{const l=new Nn(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new Nn(t,0),a=this.Jr.firstAfterOrEqual(i);return fe.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.ti=e,this.docs=(function(){return new Zt(Le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return fe.resolve(i?i.document.mutableCopy():Wn.newInvalidDocument(t))}getEntries(e,t){let i=Is();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Wn.newInvalidDocument(a))})),fe.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Is();const u=t.path,f=new Le(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:p,value:{document:y}}=m.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||nM(tM(y),i)<=0||(a.has(y.key)||hm(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,i,a){Be(9500)}ni(e,t){return fe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new DP(this)}getSize(e){return fe.resolve(this.size)}}class DP extends SP{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Mr.addEntry(e,a)):this.Mr.removeEntry(i)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.persistence=e,this.ri=new Vo((t=>C_(t)),R_),this.lastRemoteSnapshotVersion=$e.min(),this.highestTargetId=0,this.ii=0,this.si=new O_,this.targetCount=0,this.oi=tc._r()}forEachTarget(e,t){return this.ri.forEach(((i,a)=>t(a))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new tc(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),fe.waitFor(l).next((()=>a))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return fe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),fe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return fe.resolve(i)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t){this._i={},this.overlays={},this.ai=new am(0),this.ui=!1,this.ui=!0,this.ci=new IP,this.referenceDelegate=e(this),this.li=new OP(this),this.indexManager=new gP,this.remoteDocumentCache=(function(a){return new NP(a)})((i=>this.referenceDelegate.hi(i))),this.serializer=new mP(t),this.Pi=new CP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new RP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new xP(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){Re("MemoryPersistence","Starting transaction:",e);const a=new MP(this.ai.next());return this.referenceDelegate.Ti(),i(a).next((l=>this.referenceDelegate.Ii(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class MP extends iM{constructor(e){super(),this.currentSequenceNumber=e}}class M_{constructor(e){this.persistence=e,this.Ri=new O_,this.Ai=null}static Vi(e){return new M_(e)}get di(){if(this.Ai)return this.Ai;throw Be(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),fe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((a=>this.di.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.di.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(i=>{const a=Le.fromPath(i);return this.mi(e,a).next((l=>{l||t.removeEntry(a,$e.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Md{constructor(e,t){this.persistence=e,this.fi=new Vo((i=>oM(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=bP(this,t)}static Vi(e,t){return new Md(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((i,a)=>this.wr(e,i,a).next((l=>l?fe.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,l.removeEntry(u,$e.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rd(e.data.value)),t}wr(e,t,i){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.fi.get(t);return fe.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=a}static Es(e,t){let i=mt(),a=mt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new P_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return A2()?8:sM(Jn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.gs(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ps(e,t,a,i).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new PP;return this.ys(e,t,u).next((f=>{if(l.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>l.result))}ws(e,t,i,a){return i.documentReadCount<this.Vs?(Dl()<=ft.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(Dl()<=ft.DEBUG&&Re("QueryEngine","Query:",Ol(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ds*a?(Dl()<=ft.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):fe.resolve())}gs(e,t){if(rS(t))return fe.resolve(null);let i=Bi(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=jy(t,null,"F"),i=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const u=mt(...l);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.bs(t,f);return this.Ss(t,p,u,m.readTime)?this.gs(e,jy(t,null,"F")):this.Ds(e,p,t,m)}))))})))))}ps(e,t,i,a){return rS(t)||a.isEqual($e.min())?fe.resolve(null):this.fs.getDocuments(e,i).next((l=>{const u=this.bs(t,l);return this.Ss(t,u,i,a)?fe.resolve(null):(Dl()<=ft.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ol(t)),this.Ds(e,u,t,eM(a,Uu)).next((f=>f)))}))}bs(e,t){let i=new wn(Zw(e));return t.forEach(((a,l)=>{hm(e,l)&&(i=i.add(l))})),i}Ss(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ys(e,t,i){return Dl()<=ft.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Ol(t)),this.fs.getDocumentsMatchingQuery(e,t,Oa.min(),i)}Ds(e,t,i,a){return this.fs.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="LocalStore",VP=3e8;class LP{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.vs=new Zt(dt),this.Fs=new Vo((l=>C_(l)),R_),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wP(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function jP(n,e,t,i){return new LP(n,e,t,i)}async function S1(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const u=[],f=[];let m=mt();for(const p of a){u.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ns:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function UP(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,m,p,y){const v=p.batch,b=v.keys();let w=fe.resolve();return b.forEach((M=>{w=w.next((()=>y.getEntry(m,M))).next((z=>{const N=p.docVersions.get(M);wt(N!==null,48541),z.version.compareTo(N)<0&&(v.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),y.addEntry(z)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let m=mt();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(m=m.add(f.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function A1(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function zP(n,e){const t=Qe(n),i=e.snapshotVersion;let a=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});a=t.vs;const f=[];e.targetChanges.forEach(((y,v)=>{const b=a.get(v);if(!b)return;f.push(t.li.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.li.addMatchingKeys(l,y.addedDocuments,v))));let w=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?w=w.withResumeToken(Hn.EMPTY_BYTE_STRING,$e.min()).withLastLimboFreeSnapshotVersion($e.min()):y.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(y.resumeToken,i)),a=a.insert(v,w),(function(z,N,L){return z.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=VP?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0})(b,w,y)&&f.push(t.li.updateTargetData(l,w))}));let m=Is(),p=mt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(BP(l,u,e.documentUpdates).next((y=>{m=y.Bs,p=y.Ls}))),!i.isEqual($e.min())){const y=t.li.getLastRemoteSnapshotVersion(l).next((v=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,i)));f.push(y)}return fe.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.vs=a,l)))}function BP(n,e,t){let i=mt(),a=mt();return t.forEach((l=>i=i.add(l))),e.getEntries(n,i).next((l=>{let u=Is();return t.forEach(((f,m)=>{const p=l.get(f);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual($e.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Re(k_,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",m.version)})),{Bs:u,Ls:a}}))}function HP(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=S_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function FP(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.li.getTargetData(i,e).next((l=>l?(a=l,fe.resolve(a)):t.li.allocateTargetId(i).next((u=>(a=new Aa(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.vs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Fy(n,e,t){const i=Qe(n),a=i.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(u=>i.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!fc(u))throw u;Re(k_,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(a.target)}function gS(n,e,t){const i=Qe(n);let a=$e.min(),l=mt();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,p,y){const v=Qe(m),b=v.Fs.get(y);return b!==void 0?fe.resolve(v.vs.get(b)):v.li.getTargetData(p,y)})(i,u,Bi(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((m=>{l=m}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?a:$e.min(),t?l:mt()))).next((f=>(qP(i,IM(e),f),{documents:f,ks:l})))))}function qP(n,e,t){let i=n.Ms.get(e)||$e.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),n.Ms.set(e,i)}class yS{constructor(){this.activeTargetIds=PM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GP{constructor(){this.vo=new yS,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new yS,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="ConnectivityMonitor";class vS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Re(_S,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Re(_S,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf=null;function qy(){return Gf===null?Gf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gf++,"0x"+Gf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="RestConnection",KP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class YP{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.$o=this.databaseId.database===Rd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const u=qy(),f=this.Qo(e,t.toUriEncodedString());Re(sy,`Sending RPC '${e}' ${u}:`,f,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,a,l);const{host:p}=new URL(f),y=lc(p);return this.zo(e,f,m,i,y).then((v=>(Re(sy,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw Wl(sy,`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",i),v}))}jo(e,t,i,a,l,u){return this.Wo(e,t,i,a,l)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}Qo(e,t){const i=KP[e];let a=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(a=`${a}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),a}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn="WebChannelConnection",pu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(a){setTimeout((()=>{throw a}),0)}}))};class Bl extends YP{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Bl.c_){const e=xw();pu(e,Iw.STAT_EVENT,(t=>{t.stat===Dy.PROXY?Re(Kn,"STAT_EVENT: detected buffering proxy"):t.stat===Dy.NOPROXY&&Re(Kn,"STAT_EVENT: detected no buffering proxy")})),Bl.c_=!0}}zo(e,t,i,a,l){const u=qy();return new Promise(((f,m)=>{const p=new Cw;p.setWithCredentials(!0),p.listenOnce(Rw.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case nd.NO_ERROR:const v=p.getResponseJson();Re(Kn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),f(v);break;case nd.TIMEOUT:Re(Kn,`RPC '${e}' ${u} timed out`),m(new we(le.DEADLINE_EXCEEDED,"Request time out"));break;case nd.HTTP_ERROR:const b=p.getStatus();if(Re(Kn,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const M=w==null?void 0:w.error;if(M&&M.status&&M.message){const z=(function(L){const V=L.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(V)>=0?V:le.UNKNOWN})(M.status);m(new we(z,M.message))}else m(new we(le.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new we(le.UNAVAILABLE,"Connection failed."));break;default:Be(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{Re(Kn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);Re(Kn,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",y,i,15)}))}T_(e,t,i){const a=qy(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=l.join("");Re(Kn,`Creating RPC '${e}' stream ${a}: ${p}`,f);const y=u.createWebChannel(p,f);this.I_(y);let v=!1,b=!1;const w=new QP({Ho:M=>{b?Re(Kn,`Not sending because RPC '${e}' stream ${a} is closed:`,M):(v||(Re(Kn,`Opening RPC '${e}' stream ${a} transport.`),y.open(),v=!0),Re(Kn,`RPC '${e}' stream ${a} sending:`,M),y.send(M))},Jo:()=>y.close()});return pu(y,Eu.EventType.OPEN,(()=>{b||(Re(Kn,`RPC '${e}' stream ${a} transport opened.`),w.i_())})),pu(y,Eu.EventType.CLOSE,(()=>{b||(b=!0,Re(Kn,`RPC '${e}' stream ${a} transport closed`),w.o_(),this.E_(y))})),pu(y,Eu.EventType.ERROR,(M=>{b||(b=!0,Wl(Kn,`RPC '${e}' stream ${a} transport errored. Name:`,M.name,"Message:",M.message),w.o_(new we(le.UNAVAILABLE,"The operation could not be completed")))})),pu(y,Eu.EventType.MESSAGE,(M=>{var z;if(!b){const N=M.data[0];wt(!!N,16349);const L=N,V=(L==null?void 0:L.error)||((z=L[0])==null?void 0:z.error);if(V){Re(Kn,`RPC '${e}' stream ${a} received error:`,V);const U=V.status;let q=(function(A){const C=yn[A];if(C!==void 0)return u1(C)})(U),Y=V.message;q===void 0&&(q=le.INTERNAL,Y="Unknown error status: "+U+" with message "+V.message),b=!0,w.o_(new we(q,Y)),y.close()}else Re(Kn,`RPC '${e}' stream ${a} received:`,N),w.__(N)}})),Bl.u_(),setTimeout((()=>{w.s_()}),0),w}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Nw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(n){return new Bl(n)}function ay(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(n){return new eP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bl.c_=!1;class w1{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=a,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&Re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="PersistentStream";class C1{constructor(e,t,i,a,l,u,f,m){this.Ci=e,this.b_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new w1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Rs(t.toString()),Rs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new we(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.H_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Re(ES,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Re(ES,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class WP extends C1{constructor(e,t,i,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=rP(this.serializer,e),i=(function(l){if(!("targetChange"in l))return $e.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?$e.min():u.readTime?Hi(u.readTime):$e.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Hy(this.serializer),t.addTarget=(function(l,u){let f;const m=u.target;if(f=Vy(m)?{documents:aP(l,m)}:{query:oP(l,m).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=d1(l,u.resumeToken);const p=Uy(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo($e.min())>0){f.readTime=Od(l,u.snapshotVersion.toTimestamp());const p=Uy(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=cP(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Hy(this.serializer),t.removeTarget=e,this.K_(t)}}class JP extends C1{constructor(e,t,i,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return wt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){wt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=sP(e.writeResults,e.commitTime),i=Hi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hy(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>iP(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{}class ek extends ZP{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new we(le.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,zy(t,i),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(le.UNKNOWN,l.toString())}))}jo(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,zy(t,i),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new we(le.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function tk(n,e,t,i){return new ek(n,e,t,i)}class nk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rs(t),this.aa=!1):Re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="RemoteStore";class rk{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Lo(this)&&(Re(No,"Restarting streams for network reachability change."),await(async function(m){const p=Qe(m);p.Ea.add(4),await lh(p),p.Va.set("Unknown"),p.Ea.delete(4),await ym(p)})(this))}))})),this.Va=new nk(i,a)}}async function ym(n){if(Lo(n))for(const e of n.Ra)await e(!0)}async function lh(n){for(const e of n.Ra)await e(!1)}function R1(n,e){const t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),U_(t)?j_(t):dc(t).O_()&&L_(t,e))}function V_(n,e){const t=Qe(n),i=dc(t);t.Ia.delete(e),i.O_()&&I1(t,e),t.Ia.size===0&&(i.O_()?i.L_():Lo(t)&&t.Va.set("Unknown"))}function L_(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo($e.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dc(n).Z_(e)}function I1(n,e){n.da.$e(e),dc(n).X_(e)}function j_(n){n.da=new XM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),dc(n).start(),n.Va.ua()}function U_(n){return Lo(n)&&!dc(n).x_()&&n.Ia.size>0}function Lo(n){return Qe(n).Ea.size===0}function x1(n){n.da=void 0}async function ik(n){n.Va.set("Online")}async function sk(n){n.Ia.forEach(((e,t)=>{L_(n,e)}))}async function ak(n,e){x1(n),U_(n)?(n.Va.ha(e),j_(n)):n.Va.set("Unknown")}async function ok(n,e,t){if(n.Va.set("Online"),e instanceof f1&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ia.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ia.delete(f),a.da.removeTarget(f))})(n,e)}catch(i){Re(No,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Pd(n,i)}else if(e instanceof ad?n.da.Xe(e):e instanceof h1?n.da.st(e):n.da.tt(e),!t.isEqual($e.min()))try{const i=await A1(n.localStore);t.compareTo(i)>=0&&await(function(l,u){const f=l.da.Tt(u);return f.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ia.get(p);y&&l.Ia.set(p,y.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,p)=>{const y=l.Ia.get(m);if(!y)return;l.Ia.set(m,y.withResumeToken(Hn.EMPTY_BYTE_STRING,y.snapshotVersion)),I1(l,m);const v=new Aa(y.target,m,p,y.sequenceNumber);L_(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){Re(No,"Failed to raise snapshot:",i),await Pd(n,i)}}async function Pd(n,e,t){if(!fc(e))throw e;n.Ea.add(1),await lh(n),n.Va.set("Offline"),t||(t=()=>A1(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Re(No,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ym(n)}))}function N1(n,e){return e().catch((t=>Pd(n,t,e)))}async function _m(n){const e=Qe(n),t=Va(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:S_;for(;lk(e);)try{const a=await HP(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,ck(e,a)}catch(a){await Pd(e,a)}D1(e)&&O1(e)}function lk(n){return Lo(n)&&n.Ta.length<10}function ck(n,e){n.Ta.push(e);const t=Va(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function D1(n){return Lo(n)&&!Va(n).x_()&&n.Ta.length>0}function O1(n){Va(n).start()}async function uk(n){Va(n).ra()}async function hk(n){const e=Va(n);for(const t of n.Ta)e.ea(t.mutations)}async function fk(n,e,t){const i=n.Ta.shift(),a=x_.from(i,e,t);await N1(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await _m(n)}async function dk(n,e){e&&Va(n).Y_&&await(async function(i,a){if((function(u){return KM(u)&&u!==le.ABORTED})(a.code)){const l=i.Ta.shift();Va(i).B_(),await N1(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await _m(i)}})(n,e),D1(n)&&O1(n)}async function TS(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Re(No,"RemoteStore received new credentials");const i=Lo(t);t.Ea.add(3),await lh(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ym(t)}async function mk(n,e){const t=Qe(n);e?(t.Ea.delete(2),await ym(t)):e||(t.Ea.add(2),await lh(t),t.Va.set("Unknown"))}function dc(n){return n.ma||(n.ma=(function(t,i,a){const l=Qe(t);return l.sa(),new WP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:ik.bind(null,n),Yo:sk.bind(null,n),t_:ak.bind(null,n),J_:ok.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),U_(n)?j_(n):n.Va.set("Unknown")):(await n.ma.stop(),x1(n))}))),n.ma}function Va(n){return n.fa||(n.fa=(function(t,i,a){const l=Qe(t);return l.sa(),new JP(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:uk.bind(null,n),t_:dk.bind(null,n),ta:hk.bind(null,n),na:fk.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await _m(n)):(await n.fa.stop(),n.Ta.length>0&&(Re(No,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const u=Date.now()+i,f=new z_(e,t,u,a,l);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function B_(n,e){if(Rs("AsyncQueue",`${e}: ${n}`),fc(n))return new we(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{static emptySet(e){return new Hl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Le.comparator(t.key,i.key):(t,i)=>Le.comparator(t.key,i.key),this.keyedMap=Tu(),this.sortedSet=new Zt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Hl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.ga=new Zt(Le.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Be(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class nc{constructor(e,t,i,a,l,u,f,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new nc(e,t,Hl.emptySet(t),u,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class gk{constructor(){this.queries=SS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=Qe(t),l=a.queries;a.queries=SS(),l.forEach(((u,f)=>{for(const m of f.ba)m.onError(i)}))})(this,new we(le.ABORTED,"Firestore shutting down"))}}function SS(){return new Vo((n=>Jw(n)),um)}async function H_(n,e){const t=Qe(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.Da()&&(i=2):(l=new pk,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=B_(u,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&q_(t)}async function F_(n,e){const t=Qe(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const u=l.ba.indexOf(e);u>=0&&(l.ba.splice(u,1),l.ba.length===0?a=e.Da()?0:1:!l.Sa()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function yk(n,e){const t=Qe(n);let i=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.ba)f.Fa(a)&&(i=!0);u.wa=a}}i&&q_(t)}function _k(n,e,t){const i=Qe(n),a=i.queries.get(e);if(a)for(const l of a.ba)l.onError(t);i.queries.delete(e)}function q_(n){n.Ca.forEach((e=>{e.next()}))}var Gy,AS;(AS=Gy||(Gy={})).Ma="default",AS.Cache="cache";class G_{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new nc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e){this.key=e}}class P1{constructor(e){this.key=e}}class vk{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=mt(),this.mutatedKeys=mt(),this.eu=Zw(e),this.tu=new Hl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new bS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const b=a.get(y),w=hm(this.query,v)?v:null,M=!!b&&this.mutatedKeys.has(b.key),z=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;b&&w?b.data.isEqual(w.data)?M!==z&&(i.track({type:3,doc:w}),N=!0):this.su(b,w)||(i.track({type:2,doc:w}),N=!0,(m&&this.eu(w,m)>0||p&&this.eu(w,p)<0)&&(f=!0)):!b&&w?(i.track({type:0,doc:w}),N=!0):b&&!w&&(i.track({type:1,doc:b}),N=!0,(m||p)&&(f=!0)),N&&(w?(u=u.add(w),l=z?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),i.track({type:1,doc:y})}return{tu:u,iu:i,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((y,v)=>(function(w,M){const z=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be(20277,{Vt:N})}};return z(w)-z(M)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(i),a=a??!1;const f=t&&!a?this._u():[],m=this.Ya.size===0&&this.current&&!a?1:0,p=m!==this.Xa;return this.Xa=m,u.length!==0||p?{snapshot:new nc(this.query,e.tu,l,u,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new bS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=mt(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new P1(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new M1(i))})),t}cu(e){this.Za=e.ks,this.Ya=mt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $_="SyncEngine";class Ek{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Tk{constructor(e){this.key=e,this.hu=!1}}class bk{constructor(e,t,i,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Vo((f=>Jw(f)),um),this.Iu=new Map,this.Eu=new Set,this.Ru=new Zt(Le.comparator),this.Au=new Map,this.Vu=new O_,this.du={},this.mu=new Map,this.fu=tc.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Sk(n,e,t=!0){const i=z1(n);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await k1(i,e,t,!0),a}async function Ak(n,e){const t=z1(n);await k1(t,e,!0,!1)}async function k1(n,e,t,i){const a=await FP(n.localStore,Bi(e)),l=a.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await wk(n,e,l,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&R1(n.remoteStore,a),f}async function wk(n,e,t,i,a){n.pu=(v,b,w)=>(async function(z,N,L,V){let U=N.view.ru(L);U.Ss&&(U=await gS(z.localStore,N.query,!1).then((({documents:A})=>N.view.ru(A,U))));const q=V&&V.targetChanges.get(N.targetId),Y=V&&V.targetMismatches.get(N.targetId)!=null,Q=N.view.applyChanges(U,z.isPrimaryClient,q,Y);return CS(z,N.targetId,Q.au),Q.snapshot})(n,v,b,w);const l=await gS(n.localStore,e,!0),u=new vk(e,l.ks),f=u.ru(l.documents),m=oh.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=u.applyChanges(f,n.isPrimaryClient,m);CS(n,t,p.au);const y=new Ek(e,t,u);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function Ck(n,e,t){const i=Qe(n),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((u=>!um(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Fy(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&V_(i.remoteStore,a.targetId),$y(i,a.targetId)})).catch(hc)):($y(i,a.targetId),await Fy(i.localStore,a.targetId,!0))}async function Rk(n,e){const t=Qe(n),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),V_(t.remoteStore,i.targetId))}async function Ik(n,e,t){const i=kk(n);try{const a=await(function(u,f){const m=Qe(u),p=Ft.now(),y=f.reduce(((w,M)=>w.add(M.key)),mt());let v,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let M=Is(),z=mt();return m.xs.getEntries(w,y).next((N=>{M=N,M.forEach(((L,V)=>{V.isValidDocument()||(z=z.add(L))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,M))).next((N=>{v=N;const L=[];for(const V of f){const U=HM(V,v.get(V.key).overlayedDocument);U!=null&&L.push(new za(V.key,U,qw(U.value.mapValue),Tr.exists(!0)))}return m.mutationQueue.addMutationBatch(w,p,L,f)})).next((N=>{b=N;const L=N.applyToLocalDocumentSet(v,z);return m.documentOverlayCache.saveOverlays(w,N.batchId,L)}))})).then((()=>({batchId:b.batchId,changes:t1(v)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(u,f,m){let p=u.du[u.currentUser.toKey()];p||(p=new Zt(dt)),p=p.insert(f,m),u.du[u.currentUser.toKey()]=p})(i,a.batchId,t),await ch(i,a.changes),await _m(i.remoteStore)}catch(a){const l=B_(a,"Failed to persist write");t.reject(l)}}async function V1(n,e){const t=Qe(n);try{const i=await zP(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Au.get(l);u&&(wt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.hu=!0:a.modifiedDocuments.size>0?wt(u.hu,14607):a.removedDocuments.size>0&&(wt(u.hu,42227),u.hu=!1))})),await ch(t,i,e)}catch(i){await hc(i)}}function wS(n,e,t){const i=Qe(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const m=Qe(u);m.onlineState=f;let p=!1;m.queries.forEach(((y,v)=>{for(const b of v.ba)b.va(f)&&(p=!0)})),p&&q_(m)})(i.eventManager,e),a.length&&i.Pu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function xk(n,e,t){const i=Qe(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let u=new Zt(Le.comparator);u=u.insert(l,Wn.newNoDocument(l,$e.min()));const f=mt().add(l),m=new pm($e.min(),new Map,new Zt(dt),u,f);await V1(i,m),i.Ru=i.Ru.remove(l),i.Au.delete(e),K_(i)}else await Fy(i.localStore,e,!1).then((()=>$y(i,e,t))).catch(hc)}async function Nk(n,e){const t=Qe(n),i=e.batch.batchId;try{const a=await UP(t.localStore,e);j1(t,i,null),L1(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await ch(t,a)}catch(a){await hc(a)}}async function Dk(n,e,t){const i=Qe(n);try{const a=await(function(u,f){const m=Qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return m.mutationQueue.lookupMutationBatch(p,f).next((v=>(wt(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(p,v)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>m.localDocuments.getDocuments(p,y)))}))})(i.localStore,e);j1(i,e,t),L1(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await ch(i,a)}catch(a){await hc(a)}}function L1(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function j1(n,e,t){const i=Qe(n);let a=i.du[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.du[i.currentUser.toKey()]=a}}function $y(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||U1(n,i)}))}function U1(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(V_(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),K_(n))}function CS(n,e,t){for(const i of t)i instanceof M1?(n.Vu.addReference(i.key,e),Ok(n,i)):i instanceof P1?(Re($_,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||U1(n,i.key)):Be(19791,{wu:i})}function Ok(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(Re($_,"New document in limbo: "+t),n.Eu.add(i),K_(n))}function K_(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Le(Ut.fromString(e)),i=n.fu.next();n.Au.set(i,new Tk(t)),n.Ru=n.Ru.insert(t,i),R1(n.remoteStore,new Aa(Bi(cm(t.path)),i,"TargetPurposeLimboResolution",am.ce))}}async function ch(n,e,t){const i=Qe(n),a=[],l=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,m)=>{u.push(i.pu(m,e,t).then((p=>{var y;if((p||t)&&i.isPrimaryClient){const v=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(p){a.push(p);const v=P_.Es(m.targetId,p);l.push(v)}})))})),await Promise.all(u),i.Pu.J_(a),await(async function(m,p){const y=Qe(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>fe.forEach(p,(b=>fe.forEach(b.Ts,(w=>y.persistence.referenceDelegate.addReference(v,b.targetId,w))).next((()=>fe.forEach(b.Is,(w=>y.persistence.referenceDelegate.removeReference(v,b.targetId,w)))))))))}catch(v){if(!fc(v))throw v;Re(k_,"Failed to update sequence numbers: "+v)}for(const v of p){const b=v.targetId;if(!v.fromCache){const w=y.vs.get(b),M=w.snapshotVersion,z=w.withLastLimboFreeSnapshotVersion(M);y.vs=y.vs.insert(b,z)}}})(i.localStore,l))}async function Mk(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Re($_,"User change. New user:",e.toKey());const i=await S1(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((m=>{m.reject(new we(le.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ch(t,i.Ns)}}function Pk(n,e){const t=Qe(n),i=t.Au.get(e);if(i&&i.hu)return mt().add(i.key);{let a=mt();const l=t.Iu.get(e);if(!l)return a;for(const u of l){const f=t.Tu.get(u);a=a.unionWith(f.view.nu)}return a}}function z1(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=V1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Pk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xk.bind(null,e),e.Pu.J_=yk.bind(null,e.eventManager),e.Pu.yu=_k.bind(null,e.eventManager),e}function kk(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dk.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return jP(this.persistence,new kP,e.initialUser,this.serializer)}Cu(e){return new b1(M_.Vi,this.serializer)}Du(e){return new GP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class Vk extends kd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){wt(this.persistence.referenceDelegate instanceof Md,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new EP(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new b1((i=>Md.Vi(i,t)),this.serializer)}}class Ky{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>wS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mk.bind(null,this.syncEngine),await mk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new gk})()}createDatastore(e){const t=gm(e.databaseInfo.databaseId),i=XP(e.databaseInfo);return tk(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,u,f){return new rk(i,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>wS(this.syncEngine,t,0)),(function(){return vS.v()?new vS:new $P})())}createSyncEngine(e,t){return(function(a,l,u,f,m,p,y){const v=new bk(a,l,u,f,m,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=Qe(a);Re(No,"RemoteStore shutting down."),l.Ea.add(5),await lh(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ky.provider={build:()=>new Ky};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="FirestoreClient";class Lk{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=a,this.user=Qn.UNAUTHENTICATED,this.clientId=b_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async u=>{Re(La,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(Re(La,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=B_(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function oy(n,e){n.asyncQueue.verifyOperationInProgress(),Re(La,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async a=>{i.isEqual(a)||(await S1(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function RS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await jk(n);Re(La,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>TS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,a)=>TS(e.remoteStore,a))),n._onlineComponents=e}async function jk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re(La,"Using user provided OfflineComponentProvider");try{await oy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Wl("Error using user provided cache. Falling back to memory cache: "+t),await oy(n,new kd)}}else Re(La,"Using default OfflineComponentProvider"),await oy(n,new Vk(void 0));return n._offlineComponents}async function B1(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re(La,"Using user provided OnlineComponentProvider"),await RS(n,n._uninitializedComponentsProvider._online)):(Re(La,"Using default OnlineComponentProvider"),await RS(n,new Ky))),n._onlineComponents}function Uk(n){return B1(n).then((e=>e.syncEngine))}async function Vd(n){const e=await B1(n),t=e.eventManager;return t.onListen=Sk.bind(null,e.syncEngine),t.onUnlisten=Ck.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ak.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Rk.bind(null,e.syncEngine),t}function zk(n,e,t,i){const a=new Y_(i),l=new G_(e,a,t);return n.asyncQueue.enqueueAndForget((async()=>H_(await Vd(n),l))),()=>{a.Nu(),n.asyncQueue.enqueueAndForget((async()=>F_(await Vd(n),l)))}}function Bk(n,e,t={}){const i=new As;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,p){const y=new Y_({next:b=>{y.Nu(),u.enqueueAndForget((()=>F_(l,v)));const w=b.docs.has(f);!w&&b.fromCache?p.reject(new we(le.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&b.fromCache&&m&&m.source==="server"?p.reject(new we(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new G_(cm(f.path),y,{includeMetadataChanges:!0,Ka:!0});return H_(l,v)})(await Vd(n),n.asyncQueue,e,t,i))),i.promise}function Hk(n,e,t={}){const i=new As;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,p){const y=new Y_({next:b=>{y.Nu(),u.enqueueAndForget((()=>F_(l,v))),b.fromCache&&m.source==="server"?p.reject(new we(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),v=new G_(f,y,{includeMetadataChanges:!0,Ka:!0});return H_(l,v)})(await Vd(n),n.asyncQueue,e,t,i))),i.promise}function Fk(n,e){const t=new As;return n.asyncQueue.enqueueAndForget((async()=>Ik(await Uk(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="ComponentProvider",IS=new Map;function Gk(n,e,t,i,a){return new uM(n,e,t,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,H1(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="firestore.googleapis.com",xS=!0;class NS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=F1,this.ssl=xS}else this.host=e.host,this.ssl=e.ssl??xS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_P)throw new we(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H1(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new we(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new we(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new we(le.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new NS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new NS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new FO;switch(i.type){case"firstParty":return new KO(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new we(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=IS.get(t);i&&(Re(qk,"Removing Datastore"),IS.delete(t),i.terminate())})(this),Promise.resolve()}}function $k(n,e,t,i={}){var p;n=Er(n,vm);const a=lc(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;a&&(yw(`https://${f}`),_w("Firestore",!0)),l.host!==F1&&l.host!==f&&Wl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:f,ssl:a,emulatorOptions:i};if(!Ro(m,u)&&(n._setSettings(m),i.mockUserToken)){let y,v;if(typeof i.mockUserToken=="string")y=i.mockUserToken,v=Qn.MOCK_USER;else{y=p2(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new we(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Qn(b)}n._authCredentials=new qO(new Ow(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jo(this.firestore,e,this._query)}}class rn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Na(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(ih(t,rn._jsonSchema))return new rn(e,i||null,new Le(Ut.fromString(t.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:En("string",rn._jsonSchemaVersion),referencePath:En("string")};class Na extends jo{constructor(e,t,i){super(e,t,cm(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new Le(e))}withConverter(e){return new Na(this.firestore,e,this._path)}}function xs(n,e,...t){if(n=Cn(n),Mw("collection","path",e),n instanceof vm){const i=Ut.fromString(e,...t);return F0(i),new Na(n,null,i)}{if(!(n instanceof rn||n instanceof Na))throw new we(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ut.fromString(e,...t));return F0(i),new Na(n.firestore,null,i)}}function sn(n,e,...t){if(n=Cn(n),arguments.length===1&&(e=b_.newId()),Mw("doc","path",e),n instanceof vm){const i=Ut.fromString(e,...t);return H0(i),new rn(n,null,new Le(i))}{if(!(n instanceof rn||n instanceof Na))throw new we(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ut.fromString(e,...t));return H0(i),new rn(n.firestore,n instanceof Na?n.converter:null,new Le(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class OS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new w1(this,"async_queue_retry"),this._c=()=>{const i=ay();i&&Re(DS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=ay();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ay();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new As;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!fc(e))throw e;Re(DS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Rs("INTERNAL UNHANDLED ERROR: ",MS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=z_.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&Be(47125,{Pc:MS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function MS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ns extends vm{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new OS,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OS(e),this._firestoreClient=void 0,await e}}}function Kk(n,e){const t=typeof n=="object"?n:bw(),i=typeof n=="string"?n:Rd,a=E_(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=d2("firestore");l&&$k(a,...l)}return a}function uh(n){if(n._terminated)throw new we(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Yk(n),n._firestoreClient}function Yk(n){var i,a,l,u;const e=n._freezeSettings(),t=Gk(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(a=n._app)==null?void 0:a.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Lk(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni(Hn.fromBase64String(e))}catch(t){throw new we(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ni(Hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ih(e,ni._jsonSchema))return ni.fromBase64String(e.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:En("string",ni._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fi._jsonSchemaVersion}}static fromJSON(e){if(ih(e,Fi._jsonSchema))return new Fi(e.latitude,e.longitude)}}Fi._jsonSchemaVersion="firestore/geoPoint/1.0",Fi._jsonSchema={type:En("string",Fi._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ih(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vi(e.vectorValues);throw new we(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:En("string",vi._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=/^__.*__$/;class Xk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new za(e,this.data,this.fieldMask,t,this.fieldTransforms):new ah(e,this.data,t,this.fieldTransforms)}}class q1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new za(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function G1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be(40011,{dataSource:n})}}class Q_{constructor(e,t,i,a,l,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Q_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var a;const t=(a=this.path)==null?void 0:a.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ld(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(G1(this.dataSource)&&Qk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Wk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||gm(e)}createContext(e,t,i,a=!1){return new Q_({dataSource:e,methodName:t,targetDoc:i,path:Bn.emptyPath(),arrayElement:!1,hasConverter:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tm(n){const e=n._freezeSettings(),t=gm(n._databaseId);return new Wk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $1(n,e,t,i,a,l={}){const u=n.createContext(l.merge||l.mergeFields?2:0,e,t,a);W_("Data must be an object, but it was:",u,i);const f=Q1(i,u);let m,p;if(l.merge)m=new Lr(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=rc(e,v,t);if(!u.contains(b))throw new we(le.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);J1(y,b)||y.push(b)}m=new Lr(y),p=u.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,p=u.fieldTransforms;return new Xk(new vr(f),m,p)}class hh extends Em{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hh}}class X_ extends Em{_toFieldTransform(e){return new jM(e.path,new Fu)}isEqual(e){return e instanceof X_}}function K1(n,e,t,i){const a=n.createContext(1,e,t);W_("Data must be an object, but it was:",a,i);const l=[],u=vr.empty();Ua(i,((m,p)=>{const y=W1(e,m,t);p=Cn(p);const v=a.childContextForFieldPath(y);if(p instanceof hh)l.push(y);else{const b=fh(p,v);b!=null&&(l.push(y),u.set(y,b))}}));const f=new Lr(l);return new q1(u,f,a.fieldTransforms)}function Y1(n,e,t,i,a,l){const u=n.createContext(1,e,t),f=[rc(e,i,t)],m=[a];if(l.length%2!=0)throw new we(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(rc(e,l[b])),m.push(l[b+1]);const p=[],y=vr.empty();for(let b=f.length-1;b>=0;--b)if(!J1(p,f[b])){const w=f[b];let M=m[b];M=Cn(M);const z=u.childContextForFieldPath(w);if(M instanceof hh)p.push(w);else{const N=fh(M,z);N!=null&&(p.push(w),y.set(w,N))}}const v=new Lr(p);return new q1(y,v,u.fieldTransforms)}function Jk(n,e,t,i=!1){return fh(t,n.createContext(i?4:3,e))}function fh(n,e){if(X1(n=Cn(n)))return W_("Unsupported field value:",e,n),Q1(n,e);if(n instanceof Em)return(function(i,a){if(!G1(a.dataSource))throw a.createError(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.createError(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,a){const l=[];let u=0;for(const f of i){let m=fh(f,a.childContextForArray(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(n,e)}return(function(i,a){if((i=Cn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Ft.fromDate(i);return{timestampValue:Od(a.serializer,l)}}if(i instanceof Ft){const l=new Ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(a.serializer,l)}}if(i instanceof Fi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ni)return{bytesValue:d1(a.serializer,i._byteString)};if(i instanceof rn){const l=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(l))throw a.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:D_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof vi)return(function(u,f){const m=u instanceof vi?u.toArray():u;return{mapValue:{fields:{[Hw]:{stringValue:Fw},[Id]:{arrayValue:{values:m.map((y=>{if(typeof y!="number")throw f.createError("VectorValues must only contain numeric values.");return I_(f.serializer,y)}))}}}}}})(i,a);if(E1(i))return i._toProto(a.serializer);throw a.createError(`Unsupported field value: ${sm(i)}`)})(n,e)}function Q1(n,e){const t={};return Vw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(n,((i,a)=>{const l=fh(a,e.childContextForField(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function X1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ft||n instanceof Fi||n instanceof ni||n instanceof rn||n instanceof Em||n instanceof vi||E1(n))}function W_(n,e,t){if(!X1(t)||!Pw(t)){const i=sm(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function rc(n,e,t){if((e=Cn(e))instanceof Ui)return e._internalPath;if(typeof e=="string")return W1(n,e);throw Ld("Field path arguments must be of type string or ",n,!1,void 0,t)}const Zk=new RegExp("[~\\*/\\[\\]]");function W1(n,e,t){if(e.search(Zk)>=0)throw Ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ui(...e.split("."))._internalPath}catch{throw Ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ld(n,e,t,i,a){const l=i&&!i.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${i}`),u&&(m+=` in document ${a}`),m+=")"),new we(le.INVALID_ARGUMENT,f+n+m)}function J1(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{convertValue(e,t="none"){switch(ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ua(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){var i,a,l;const t=(l=(a=(i=e.fields)==null?void 0:i[Id].arrayValue)==null?void 0:a.values)==null?void 0:l.map((u=>un(u.doubleValue)));return new vi(t)}convertGeoPoint(e){return new Fi(un(e.latitude),un(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=lm(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=Ma(e);return new Ft(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ut.fromString(e);wt(v1(i),9688,{name:e});const a=new Bu(i.get(1),i.get(3)),l=new Le(i.popFirst(5));return a.isEqual(t)||Rs(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_ extends e4{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(){return new hh("deleteField")}function ja(){return new X_("serverTimestamp")}const PS="@firebase/firestore",kS="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(rc("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class t4 extends Z1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z_{}class n4 extends Z_{}function Ba(n,e,...t){let i=[];e instanceof Z_&&i.push(e),i=i.concat(t),(function(l){const u=l.filter((m=>m instanceof ev)).length,f=l.filter((m=>m instanceof bm)).length;if(u>1||u>0&&f>0)throw new we(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)n=a._apply(n);return n}class bm extends n4{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bm(e,t,i)}_apply(e){const t=this._parse(e);return tC(e._query,t),new jo(e.firestore,e.converter,Ly(e._query,t))}_parse(e){const t=Tm(e.firestore);return(function(l,u,f,m,p,y,v){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new we(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){jS(v,y);const M=[];for(const z of v)M.push(LS(m,l,z));b={arrayValue:{values:M}}}else b=LS(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||jS(v,y),b=Jk(f,u,v,y==="in"||y==="not-in");return vn.create(p,y,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Sm(n,e,t){const i=e,a=rc("where",n);return bm._create(a,i,t)}class ev extends Z_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ev(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Ti.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const m of f)tC(u,m),u=Ly(u,m)})(e._query,t),new jo(e.firestore,e.converter,Ly(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function LS(n,e,t){if(typeof(t=Cn(t))=="string"){if(t==="")throw new we(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ww(e)&&t.indexOf("/")!==-1)throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ut.fromString(t));if(!Le.isDocumentKey(i))throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return W0(n,new Le(i))}if(t instanceof rn)return W0(n,t._key);throw new we(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sm(t)}.`)}function jS(n,e){if(!Array.isArray(n)||n.length===0)throw new we(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tC(n,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function nC(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Su{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class So extends Z1{constructor(e,t,i,a,l,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new od(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(rc("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=So._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}So._jsonSchemaVersion="firestore/documentSnapshot/1.0",So._jsonSchema={type:En("string",So._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class od extends So{data(e={}){return super.data(e)}}class Ao{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Su(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new od(this._firestore,this._userDataWriter,i.key,i,new Su(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const m=new od(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Su(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new od(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Su(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:r4(f.type),doc:m,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ao._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=b_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function r4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ao._jsonSchemaVersion="firestore/querySnapshot/1.0",Ao._jsonSchema={type:En("string",Ao._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tm(e)}set(e,t,i){this._verifyNotCommitted();const a=ly(e,this._firestore),l=nC(a.converter,t,i),u=$1(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,i);return this._mutations.push(u.toMutation(a._key,Tr.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const l=ly(e,this._firestore);let u;return u=typeof(t=Cn(t))=="string"||t instanceof Ui?Y1(this._dataReader,"WriteBatch.update",l._key,t,i,a):K1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ly(e,this._firestore);return this._mutations=this._mutations.concat(new mm(t._key,Tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ly(n,e){if((n=Cn(n)).firestore!==e)throw new we(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(n){n=Er(n,rn);const e=Er(n.firestore,Ns),t=uh(e);return Bk(t,n._key).then((i=>rC(e,n,i)))}function mc(n){n=Er(n,jo);const e=Er(n.firestore,Ns),t=uh(e),i=new J_(e);return eC(n._query),Hk(t,n._query).then((a=>new Ao(e,i,n,a)))}function Uo(n,e,t){n=Er(n,rn);const i=Er(n.firestore,Ns),a=nC(n.converter,e,t),l=Tm(i);return Am(i,[$1(l,"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,Tr.none())])}function pc(n,e,t,...i){n=Er(n,rn);const a=Er(n.firestore,Ns),l=Tm(a);let u;return u=typeof(e=Cn(e))=="string"||e instanceof Ui?Y1(l,"updateDoc",n._key,e,t,i):K1(l,"updateDoc",n._key,e),Am(a,[u.toMutation(n._key,Tr.exists(!0))])}function US(n){return Am(Er(n.firestore,Ns),[new mm(n._key,Tr.none())])}function vo(n,...e){var p,y,v;n=Cn(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||VS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(VS(e[i])){const b=e[i];e[i]=(p=b.next)==null?void 0:p.bind(b),e[i+1]=(y=b.error)==null?void 0:y.bind(b),e[i+2]=(v=b.complete)==null?void 0:v.bind(b)}let l,u,f;if(n instanceof rn)u=Er(n.firestore,Ns),f=cm(n._key.path),l={next:b=>{e[i]&&e[i](rC(u,n,b))},error:e[i+1],complete:e[i+2]};else{const b=Er(n,jo);u=Er(b.firestore,Ns),f=b._query;const w=new J_(u);l={next:M=>{e[i]&&e[i](new Ao(u,w,b,M))},error:e[i+1],complete:e[i+2]},eC(n._query)}const m=uh(u);return zk(m,f,a,l)}function Am(n,e){const t=uh(n);return Fk(t,e)}function rC(n,e,t){const i=t.docs.get(e._key),a=new J_(n);return new So(n,a,e._key,i,new Su(t.hasPendingWrites,t.fromCache),e.converter)}function s4(n){return n=Er(n,Ns),uh(n),new i4(n,(e=>Am(n,e)))}(function(e,t=!0){HO(cc),Xl(new Io("firestore",((i,{instanceIdentifier:a,options:l})=>{const u=i.getProvider("app").getImmediate(),f=new Ns(new GO(i.getProvider("auth-internal")),new YO(u,i.getProvider("app-check-internal")),hM(u,a),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ia(PS,kS,e),Ia(PS,kS,"esm2020")})();var a4="firebase",o4="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ia(a4,o4,"app");function iC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l4=iC,sC=new nh("auth","Firebase",iC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=new __("@firebase/auth");function c4(n,...e){jd.logLevel<=ft.WARN&&jd.warn(`Auth (${cc}): ${n}`,...e)}function ld(n,...e){jd.logLevel<=ft.ERROR&&jd.error(`Auth (${cc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(n,...e){throw nv(n,...e)}function Ei(n,...e){return nv(n,...e)}function tv(n,e,t){const i={...l4(),[e]:t};return new nh("auth","Firebase",i).create(e,{appName:n.name})}function wo(n){return tv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u4(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ki(n,"argument-error"),tv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return sC.create(n,...e)}function Fe(n,e,...t){if(!n)throw nv(e,...t)}function Ts(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ld(e),new Error(e)}function Ds(n,e){n||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function h4(){return zS()==="http:"||zS()==="https:"}function zS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h4()||T2()||"connection"in navigator)?navigator.onLine:!0}function d4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ds(t>e,"Short delay should be less than long delay!"),this.isMobile=_2()||b2()}get(){return f4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){Ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g4=new mh(3e4,6e4);function iv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function gc(n,e,t,i,a={}){return oC(n,a,async()=>{let l={},u={};i&&(e==="GET"?u=i:l={body:JSON.stringify(i)});const f=rh({key:n.config.apiKey,...u}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:m,...l};return E2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&lc(n.emulatorConfig.host)&&(p.credentials="include"),aC.fetch()(await lC(n,n.config.apiHost,t,f),p)})}async function oC(n,e,t){n._canInitEmulator=!1;const i={...m4,...e};try{const a=new _4(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw $f(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,p]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(n,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw $f(n,"email-already-in-use",u);if(m==="USER_DISABLED")throw $f(n,"user-disabled",u);const y=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw tv(n,y,p);Ki(n,y)}}catch(a){if(a instanceof ks)throw a;Ki(n,"network-request-failed",{message:String(a)})}}async function y4(n,e,t,i,a={}){const l=await gc(n,e,t,i,a);return"mfaPendingCredential"in l&&Ki(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function lC(n,e,t,i){const a=`${e}${t}?${i}`,l=n,u=l.config.emulator?rv(n.config,a):`${n.config.apiScheme}://${a}`;return p4.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}class _4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ei(this.auth,"network-request-failed")),g4.get())})}}function $f(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ei(n,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(n,e){return gc(n,"POST","/v1/accounts:delete",e)}async function Ud(n,e){return gc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Du(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E4(n,e=!1){const t=Cn(n),i=await t.getIdToken(e),a=sv(i);Fe(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:i,authTime:Du(cy(a.auth_time)),issuedAtTime:Du(cy(a.iat)),expirationTime:Du(cy(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function cy(n){return Number(n)*1e3}function sv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const a=dw(t);return a?JSON.parse(a):(ld("Failed to decode base64 JWT payload"),null)}catch(a){return ld("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function BS(n){const e=sv(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ks&&T4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function T4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Du(this.lastLoginAt),this.creationTime=Du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zd(n){var v;const e=n.auth,t=await n.getIdToken(),i=await $u(n,Ud(e,{idToken:t}));Fe(i==null?void 0:i.users.length,e,"internal-error");const a=i.users[0];n._notifyReloadListener(a);const l=(v=a.providerUserInfo)!=null&&v.length?cC(a.providerUserInfo):[],u=A4(n.providerData,l),f=n.isAnonymous,m=!(n.email&&a.passwordHash)&&!(u!=null&&u.length),p=f?m:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Xy(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function S4(n){const e=Cn(n);await zd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function A4(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function cC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(n,e){const t=await oC(n,{},async()=>{const i=rh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,u=await lC(n,a,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:i};return n.emulatorConfig&&lc(n.emulatorConfig.host)&&(m.credentials="include"),aC.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function C4(n,e){return gc(n,"POST","/v2/accounts:revokeToken",iv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=BS(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await w4(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,u=new Fl;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Fe(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Fe(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class _i{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new b4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Xy(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return E4(this,e)}reload(){return S4(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await zd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(wo(this.auth));const e=await this.getIdToken();return await $u(this,v4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:M,stsTokenManager:z}=t;Fe(v&&z,e,"internal-error");const N=Fl.fromJSON(this.name,z);Fe(typeof v=="string",e,"internal-error"),pa(i,e.name),pa(a,e.name),Fe(typeof b=="boolean",e,"internal-error"),Fe(typeof w=="boolean",e,"internal-error"),pa(l,e.name),pa(u,e.name),pa(f,e.name),pa(m,e.name),pa(p,e.name),pa(y,e.name);const L=new _i({uid:v,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:w,photoURL:u,phoneNumber:l,tenantId:f,stsTokenManager:N,createdAt:p,lastLoginAt:y});return M&&Array.isArray(M)&&(L.providerData=M.map(V=>({...V}))),m&&(L._redirectEventId=m),L}static async _fromIdTokenResponse(e,t,i=!1){const a=new Fl;a.updateFromServerResponse(t);const l=new _i({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await zd(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Fe(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?cC(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Fl;f.updateFromIdToken(i);const m=new _i({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Xy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Map;function bs(n){Ds(n instanceof Function,"Expected a class definition");let e=HS.get(n);return e?(Ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,HS.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uC.type="NONE";const FS=uC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cd(n,e,t){return`firebase:${n}:${e}:${t}`}class ql{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=cd(this.userKey,a.apiKey,l),this.fullPersistenceKey=cd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ud(this.auth,{idToken:e}).catch(()=>{});return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ql(bs(FS),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||bs(FS);const u=cd(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(u);if(y){let v;if(typeof y=="string"){const b=await Ud(e,{idToken:y}).catch(()=>{});if(!b)break;v=await _i._fromGetAccountInfoResponse(e,b,y)}else v=_i._fromJSON(e,y);p!==l&&(f=v),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new ql(l,e,i):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new ql(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gC(e))return"Blackberry";if(yC(e))return"Webos";if(fC(e))return"Safari";if((e.includes("chrome/")||dC(e))&&!e.includes("edge/"))return"Chrome";if(pC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function hC(n=Jn()){return/firefox\//i.test(n)}function fC(n=Jn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dC(n=Jn()){return/crios\//i.test(n)}function mC(n=Jn()){return/iemobile/i.test(n)}function pC(n=Jn()){return/android/i.test(n)}function gC(n=Jn()){return/blackberry/i.test(n)}function yC(n=Jn()){return/webos/i.test(n)}function av(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function R4(n=Jn()){var e;return av(n)&&!!((e=window.navigator)!=null&&e.standalone)}function I4(){return S2()&&document.documentMode===10}function _C(n=Jn()){return av(n)||pC(n)||yC(n)||gC(n)||/windows phone/i.test(n)||mC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(n,e=[]){let t;switch(n){case"Browser":t=qS(Jn());break;case"Worker":t=`${qS(Jn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cc}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N4(n,e={}){return gc(n,"GET","/v2/passwordPolicy",iv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=6;class O4{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??D4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GS(this),this.idTokenSubscription=new GS(this),this.beforeStateQueue=new x4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bs(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await ql.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ud(this,{idToken:e}),i=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=i==null?void 0:i._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(i=m.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(wo(this));const t=e?Cn(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(wo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(wo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await N4(this),t=new O4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await C4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bs(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await ql.create(this,[bs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&c4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function wm(n){return Cn(n)}class GS{constructor(e){this.auth=e,this.observer=null,this.addObserver=D2(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function P4(n){ov=n}function k4(n){return ov.loadJS(n)}function V4(){return ov.gapiScript}function L4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n,e){const t=E_(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ro(l,e??{}))return a;Ki(a,"already-initialized")}return t.initialize({options:e})}function U4(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(bs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function z4(n,e,t){const i=wm(n);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=EC(e),{host:u,port:f}=B4(e),m=f===null?"":`:${f}`,p={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Ro(p,i.config.emulator)&&Ro(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,lc(u)?(yw(`${l}//${u}${m}`),_w("Auth",!0)):H4()}function EC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B4(n){const e=EC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:$S(i.substr(l.length+1))}}else{const[l,u]=i.split(":");return{host:l,port:$S(u)}}}function $S(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function H4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,t){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(n,e){return y4(n,"POST","/v1/accounts:signInWithIdp",iv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="http://localhost";class Do extends TC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Do(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ki("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const u=new Do(i,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Gl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Gl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gl(e,t)}buildRequest(){const e={requestUri:F4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends ph{constructor(){super("facebook.com")}static credential(e){return Do._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ea.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Do._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.GOOGLE_SIGN_IN_METHOD="google.com";vs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends ph{constructor(){super("github.com")}static credential(e){return Do._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ta.credential(e.oauthAccessToken)}catch{return null}}}Ta.GITHUB_SIGN_IN_METHOD="github.com";Ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends ph{constructor(){super("twitter.com")}static credential(e,t){return Do._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ba.credential(t,i)}catch{return null}}}ba.TWITTER_SIGN_IN_METHOD="twitter.com";ba.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await _i._fromIdTokenResponse(e,i,a),u=KS(i);return new ic({user:l,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=KS(i);return new ic({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function KS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd extends ks{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Bd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Bd(e,t,i,a)}}function bC(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Bd._fromErrorAndOperation(n,l,e,i):l})}async function q4(n,e,t=!1){const i=await $u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ic._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(n,e,t=!1){const{auth:i}=n;if(gi(i.app))return Promise.reject(wo(i));const a="reauthenticate";try{const l=await $u(n,bC(i,a,e,n),t);Fe(l.idToken,i,"internal-error");const u=sv(l.idToken);Fe(u,i,"internal-error");const{sub:f}=u;return Fe(n.uid===f,i,"user-mismatch"),ic._forOperation(n,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ki(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(n,e,t=!1){if(gi(n.app))return Promise.reject(wo(n));const i="signIn",a=await bC(n,i,e),l=await ic._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}function K4(n,e,t,i){return Cn(n).onIdTokenChanged(e,t,i)}function Y4(n,e,t){return Cn(n).beforeAuthStateChanged(e,t)}function Q4(n,e,t,i){return Cn(n).onAuthStateChanged(e,t,i)}const Hd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=1e3,W4=10;class AC extends SC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_C(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},l=this.storage.getItem(i);I4()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,W4):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},X4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AC.type="LOCAL";const J4=AC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC extends SC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wC.type="SESSION";const CC=wC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new Cm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const f=Array.from(u).map(async p=>p(t.origin,l)),m=await Z4(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const p=cv("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function tV(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function nV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function iV(){return RC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="firebaseLocalStorageDb",sV=1,Fd="firebaseLocalStorage",xC="fbase_key";class gh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Rm(n,e){return n.transaction([Fd],e?"readwrite":"readonly").objectStore(Fd)}function aV(){const n=indexedDB.deleteDatabase(IC);return new gh(n).toPromise()}function Wy(){const n=indexedDB.open(IC,sV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Fd,{keyPath:xC})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Fd)?e(i):(i.close(),await aV(),e(await Wy()))})})}async function YS(n,e,t){const i=Rm(n,!0).put({[xC]:e,value:t});return new gh(i).toPromise()}async function oV(n,e){const t=Rm(n,!1).get(e),i=await new gh(t).toPromise();return i===void 0?null:i.value}function QS(n,e){const t=Rm(n,!0).delete(e);return new gh(t).toPromise()}const lV=800,cV=3;class NC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Wy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>cV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cm._getInstance(iV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await nV(),!this.activeServiceWorker)return;this.sender=new eV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wy();return await YS(e,Hd,"1"),await QS(e,Hd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>YS(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>oV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>QS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Rm(a,!1).getAll();return new gh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NC.type="LOCAL";const uV=NC;new mh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(n,e){return e?bs(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends TC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function hV(n){return $4(n.auth,new uv(n),n.bypassAuthState)}function fV(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),G4(t,new uv(n),n.bypassAuthState)}async function dV(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),q4(t,new uv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hV;case"linkViaPopup":case"linkViaRedirect":return dV;case"reauthViaPopup":case"reauthViaRedirect":return fV;default:Ki(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new mh(2e3,1e4);async function pV(n,e,t){if(gi(n.app))return Promise.reject(Ei(n,"operation-not-supported-in-this-environment"));const i=wm(n);u4(n,e,lv);const a=DC(i,t);return new bo(i,"signInViaPopup",e,a).executeNotNull()}class bo extends OC{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=cv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mV.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV="pendingRedirect",ud=new Map;class yV extends OC{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ud.get(this.auth._key());if(!e){try{const i=await _V(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _V(n,e){const t=TV(e),i=EV(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function vV(n,e){ud.set(n._key(),e)}function EV(n){return bs(n._redirectPersistence)}function TV(n){return cd(gV,n.config.apiKey,n.name)}async function bV(n,e,t=!1){if(gi(n.app))return Promise.reject(wo(n));const i=wm(n),a=DC(i,e),u=await new yV(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=600*1e3;class AV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!MC(e)){const a=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ei(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SV&&this.cachedEventUids.clear(),this.cachedEventUids.has(XS(e))}saveEventToCache(e){this.cachedEventUids.add(XS(e)),this.lastProcessedEventTime=Date.now()}}function XS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(n,e={}){return gc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IV=/^https?/;async function xV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await CV(n);for(const t of e)try{if(NV(t))return}catch{}Ki(n,"unauthorized-domain")}function NV(n){const e=Qy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!IV.test(t))return!1;if(RV.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=new mh(3e4,6e4);function WS(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function OV(n){return new Promise((e,t)=>{var a,l,u;function i(){WS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{WS(),t(Ei(n,"network-request-failed"))},timeout:DV.get()})}if((l=(a=qi().gapi)==null?void 0:a.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((u=qi().gapi)!=null&&u.load)i();else{const f=L4("iframefcb");return qi()[f]=()=>{gapi.load?i():t(Ei(n,"network-request-failed"))},k4(`${V4()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw hd=null,e})}let hd=null;function MV(n){return hd=hd||OV(n),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=new mh(5e3,15e3),kV="__/auth/iframe",VV="emulator/auth/iframe",LV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UV(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?rv(e,VV):`https://${n.config.authDomain}/${kV}`,i={apiKey:e.apiKey,appName:n.name,v:cc},a=jV.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${rh(i).slice(1)}`}async function zV(n){const e=await MV(n),t=qi().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:UV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LV,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const u=Ei(n,"network-request-failed"),f=qi().setTimeout(()=>{l(u)},PV.get());function m(){qi().clearTimeout(f),a(i)}i.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HV=500,FV=600,qV="_blank",GV="http://localhost";class JS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $V(n,e,t,i=HV,a=FV){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const m={...BV,width:i.toString(),height:a.toString(),top:l,left:u},p=Jn().toLowerCase();t&&(f=dC(p)?qV:t),hC(p)&&(e=e||GV,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[w,M])=>`${b}${w}=${M},`,"");if(R4(p)&&f!=="_self")return KV(e||"",f),new JS(null);const v=window.open(e||"",f,y);Fe(v,n,"popup-blocked");try{v.focus()}catch{}return new JS(v)}function KV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="__/auth/handler",QV="emulator/auth/handler",XV=encodeURIComponent("fac");async function ZS(n,e,t,i,a,l){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:cc,eventId:a};if(e instanceof lv){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",N2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof ph){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await n._getAppCheckToken(),p=m?`#${XV}=${encodeURIComponent(m)}`:"";return`${WV(n)}?${rh(f).slice(1)}${p}`}function WV({config:n}){return n.emulator?rv(n,QV):`https://${n.authDomain}/${YV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy="webStorageSupport";class JV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=CC,this._completeRedirectFn=bV,this._overrideRedirectResult=vV}async _openPopup(e,t,i,a){var u;Ds((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const l=await ZS(e,t,i,Qy(),a);return $V(e,l,cv())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await ZS(e,t,i,Qy(),a);return tV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ds(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await zV(e),i=new AV(e);return t.register("authEvent",a=>(Fe(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(uy,{type:uy},a=>{var u;const l=(u=a==null?void 0:a[0])==null?void 0:u[uy];l!==void 0&&t(!!l),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _C()||fC()||av()}}const ZV=JV;var eA="@firebase/auth",tA="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nL(n){Xl(new Io("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Fe(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vC(n)},p=new M4(i,a,l,m);return U4(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Xl(new Io("auth-internal",e=>{const t=wm(e.getProvider("auth").getImmediate());return(i=>new eL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ia(eA,tA,tL(n)),Ia(eA,tA,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=300,iL=gw("authIdTokenMaxAge")||rL;let nA=null;const sL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>iL)return;const a=t==null?void 0:t.token;nA!==a&&(nA=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function aL(n=bw()){const e=E_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=j4(n,{popupRedirectResolver:ZV,persistence:[uV,J4,CC]}),i=gw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const u=sL(l.toString());Y4(t,u,()=>u(t.currentUser)),K4(t,f=>u(f))}}const a=mw("auth");return a&&z4(t,`http://${a}`),t}function oL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}P4({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=Ei("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",oL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nL("Browser");const lL={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function wl(n){const e=lL[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const cL={apiKey:wl("VITE_FIREBASE_API_KEY"),authDomain:wl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:wl("VITE_FIREBASE_PROJECT_ID"),storageBucket:wl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:wl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:wl("VITE_FIREBASE_APP_ID")},PC=Tw(cL),Oo=aL(PC),uL=new vs,vt=Kk(PC),kC=O.createContext(void 0),hL=({children:n})=>{const[e,t]=O.useState(()=>{const u=localStorage.getItem("app-theme");return u||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),i=O.useCallback(u=>{document.documentElement.setAttribute("data-theme",u),localStorage.setItem("app-theme",u)},[]);O.useEffect(()=>{i(e)},[e,i]);const a=O.useCallback(u=>{t(u),i(u);const f=Oo.currentUser;if(f){const m=sn(vt,"users",f.uid);pc(m,{preferredTheme:u}).catch(p=>console.error("Error updating preferred theme in Firebase:",p))}},[i]),l=O.useCallback(()=>{t(u=>u==="light"?"dark":"light")},[t]);return O.useEffect(()=>Oo.onAuthStateChanged(async f=>{if(f){const m=sn(vt,"users",f.uid),p=await dh(m);if(p.exists()&&p.data().preferredTheme){const y=p.data().preferredTheme;t(y),i(y)}}}),[i]),E.jsx(kC.Provider,{value:{theme:e,toggleTheme:l,setTheme:a},children:n})},fL="_spinner_5jyct_1",dL="_spinnerContainer_5jyct_19",rA={spinner:fL,spinnerContainer:dL},yc=({container:n=!0})=>{const e=E.jsx("div",{className:rA.spinner});return n?E.jsx("div",{className:rA.spinnerContainer,children:e}):e},mL="_loadingContainer_1n1m5_1",pL={loadingContainer:mL},sc=()=>E.jsx("div",{className:pL.loadingContainer,children:E.jsx(yc,{container:!1})}),gL=()=>{const n=Pe(i=>i.auth.firebaseUser),e=Pe(i=>i.auth.userData);return Pe(i=>i.auth.loading)?E.jsx(sc,{}):n?e?e.isApproved?E.jsx(wa,{to:"/app/dashboard",replace:!0}):E.jsx(wa,{to:"/guest",replace:!0}):E.jsx(sc,{}):E.jsx(wa,{to:"/login",replace:!0})};function Un(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var yL=typeof Symbol=="function"&&Symbol.observable||"@@observable",iA=yL,hy=()=>Math.random().toString(36).substring(7).split("").join("."),_L={INIT:`@@redux/INIT${hy()}`,REPLACE:`@@redux/REPLACE${hy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${hy()}`},qd=_L;function hv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function VC(n,e,t){if(typeof n!="function")throw new Error(Un(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Un(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Un(1));return t(VC)(n,e)}let i=n,a=e,l=new Map,u=l,f=0,m=!1;function p(){u===l&&(u=new Map,l.forEach((N,L)=>{u.set(L,N)}))}function y(){if(m)throw new Error(Un(3));return a}function v(N){if(typeof N!="function")throw new Error(Un(4));if(m)throw new Error(Un(5));let L=!0;p();const V=f++;return u.set(V,N),function(){if(L){if(m)throw new Error(Un(6));L=!1,p(),u.delete(V),l=null}}}function b(N){if(!hv(N))throw new Error(Un(7));if(typeof N.type>"u")throw new Error(Un(8));if(typeof N.type!="string")throw new Error(Un(17));if(m)throw new Error(Un(9));try{m=!0,a=i(a,N)}finally{m=!1}return(l=u).forEach(V=>{V()}),N}function w(N){if(typeof N!="function")throw new Error(Un(10));i=N,b({type:qd.REPLACE})}function M(){const N=v;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(Un(11));function V(){const q=L;q.next&&q.next(y())}return V(),{unsubscribe:N(V)}},[iA](){return this}}}return b({type:qd.INIT}),{dispatch:b,subscribe:v,getState:y,replaceReducer:w,[iA]:M}}function vL(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:qd.INIT})>"u")throw new Error(Un(12));if(typeof t(void 0,{type:qd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Un(13))})}function EL(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const u=e[l];typeof n[u]=="function"&&(t[u]=n[u])}const i=Object.keys(t);let a;try{vL(t)}catch(l){a=l}return function(u={},f){if(a)throw a;let m=!1;const p={};for(let y=0;y<i.length;y++){const v=i[y],b=t[v],w=u[v],M=b(w,f);if(typeof M>"u")throw f&&f.type,new Error(Un(14));p[v]=M,m=m||M!==w}return m=m||i.length!==Object.keys(u).length,m?p:u}}function Gd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function TL(...n){return e=>(t,i)=>{const a=e(t,i);let l=()=>{throw new Error(Un(15))};const u={getState:a.getState,dispatch:(m,...p)=>l(m,...p)},f=n.map(m=>m(u));return l=Gd(...f)(a.dispatch),{...a,dispatch:l}}}function bL(n){return hv(n)&&"type"in n&&typeof n.type=="string"}var LC=Symbol.for("immer-nothing"),sA=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function yi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var jr=Object,ac=jr.getPrototypeOf,$d="constructor",Im="prototype",Jy="configurable",Kd="enumerable",fd="writable",Ku="value",Os=n=>!!n&&!!n[ar];function bi(n){var e;return n?jC(n)||Nm(n)||!!n[sA]||!!((e=n[$d])!=null&&e[sA])||Dm(n)||Om(n):!1}var SL=jr[Im][$d].toString(),aA=new WeakMap;function jC(n){if(!n||!fv(n))return!1;const e=ac(n);if(e===null||e===jr[Im])return!0;const t=jr.hasOwnProperty.call(e,$d)&&e[$d];if(t===Object)return!0;if(!kl(t))return!1;let i=aA.get(t);return i===void 0&&(i=Function.toString.call(t),aA.set(t,i)),i===SL}function xm(n,e,t=!0){yh(n)===0?(t?Reflect.ownKeys(n):jr.keys(n)).forEach(a=>{e(a,n[a],n)}):n.forEach((i,a)=>e(a,i,n))}function yh(n){const e=n[ar];return e?e.type_:Nm(n)?1:Dm(n)?2:Om(n)?3:0}var oA=(n,e,t=yh(n))=>t===2?n.has(e):jr[Im].hasOwnProperty.call(n,e),Zy=(n,e,t=yh(n))=>t===2?n.get(e):n[e],Yd=(n,e,t,i=yh(n))=>{i===2?n.set(e,t):i===3?n.add(t):n[e]=t};function AL(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Nm=Array.isArray,Dm=n=>n instanceof Map,Om=n=>n instanceof Set,fv=n=>typeof n=="object",kl=n=>typeof n=="function",fy=n=>typeof n=="boolean";function wL(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var ys=n=>n.copy_||n.base_,dv=n=>n.modified_?n.copy_:n.base_;function e_(n,e){if(Dm(n))return new Map(n);if(Om(n))return new Set(n);if(Nm(n))return Array[Im].slice.call(n);const t=jC(n);if(e===!0||e==="class_only"&&!t){const i=jr.getOwnPropertyDescriptors(n);delete i[ar];let a=Reflect.ownKeys(i);for(let l=0;l<a.length;l++){const u=a[l],f=i[u];f[fd]===!1&&(f[fd]=!0,f[Jy]=!0),(f.get||f.set)&&(i[u]={[Jy]:!0,[fd]:!0,[Kd]:f[Kd],[Ku]:n[u]})}return jr.create(ac(n),i)}else{const i=ac(n);if(i!==null&&t)return{...n};const a=jr.create(i);return jr.assign(a,n)}}function mv(n,e=!1){return Mm(n)||Os(n)||!bi(n)||(yh(n)>1&&jr.defineProperties(n,{set:Kf,add:Kf,clear:Kf,delete:Kf}),jr.freeze(n),e&&xm(n,(t,i)=>{mv(i,!0)},!1)),n}function CL(){yi(2)}var Kf={[Ku]:CL};function Mm(n){return n===null||!fv(n)?!0:jr.isFrozen(n)}var Qd="MapSet",t_="Patches",lA="ArrayMethods",UC={};function Mo(n){const e=UC[n];return e||yi(0,n),e}var cA=n=>!!UC[n],Yu,zC=()=>Yu,RL=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cA(Qd)?Mo(Qd):void 0,arrayMethodsPlugin_:cA(lA)?Mo(lA):void 0});function uA(n,e){e&&(n.patchPlugin_=Mo(t_),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function n_(n){r_(n),n.drafts_.forEach(IL),n.drafts_=null}function r_(n){n===Yu&&(Yu=n.parent_)}var hA=n=>Yu=RL(Yu,n);function IL(n){const e=n[ar];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function fA(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[ar].modified_&&(n_(e),yi(4)),bi(n)&&(n=dA(e,n));const{patchPlugin_:a}=e;a&&a.generateReplacementPatches_(t[ar].base_,n,e)}else n=dA(e,t);return xL(e,n,!0),n_(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==LC?n:void 0}function dA(n,e){if(Mm(e))return e;const t=e[ar];if(!t)return Xd(e,n.handledSet_,n);if(!Pm(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:i}=t;if(i)for(;i.length>0;)i.pop()(n);FC(t,n)}return t.copy_}function xL(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&mv(e,t)}function BC(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Pm=(n,e)=>n.scope_===e,NL=[];function HC(n,e,t,i){const a=ys(n),l=n.type_;if(i!==void 0&&Zy(a,i,l)===e){Yd(a,i,t,l);return}if(!n.draftLocations_){const f=n.draftLocations_=new Map;xm(a,(m,p)=>{if(Os(p)){const y=f.get(p)||[];y.push(m),f.set(p,y)}})}const u=n.draftLocations_.get(e)??NL;for(const f of u)Yd(a,f,t,l)}function DL(n,e,t){n.callbacks_.push(function(a){var f;const l=e;if(!l||!Pm(l,a))return;(f=a.mapSetPlugin_)==null||f.fixSetContents(l);const u=dv(l);HC(n,l.draft_??l,u,t),FC(l,a)})}function FC(n,e){var i;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((i=n.assigned_)==null?void 0:i.size)??0)>0)){const{patchPlugin_:a}=e;if(a){const l=a.getPath(n);l&&a.generatePatches_(n,l,e)}BC(n)}}function OL(n,e,t){const{scope_:i}=n;if(Os(t)){const a=t[ar];Pm(a,i)&&a.callbacks_.push(function(){dd(n);const u=dv(a);HC(n,t,u,e)})}else bi(t)&&n.callbacks_.push(function(){const l=ys(n);n.type_===3?l.has(t)&&Xd(t,i.handledSet_,i):Zy(l,e,n.type_)===t&&i.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&Xd(Zy(n.copy_,e,n.type_),i.handledSet_,i)})}function Xd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||Os(n)||e.has(n)||!bi(n)||Mm(n)||(e.add(n),xm(n,(i,a)=>{if(Os(a)){const l=a[ar];if(Pm(l,t)){const u=dv(l);Yd(n,i,u,n.type_),BC(l)}}else bi(a)&&Xd(a,e,t)})),n}function ML(n,e){const t=Nm(n),i={type_:t?1:0,scope_:e?e.scope_:zC(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=i,l=Wd;t&&(a=[i],l=Qu);const{revoke:u,proxy:f}=Proxy.revocable(a,l);return i.draft_=f,i.revoke_=u,[f,i]}var Wd={get(n,e){if(e===ar)return n;let t=n.scope_.arrayMethodsPlugin_;const i=n.type_===1&&typeof e=="string";if(i&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const a=ys(n);if(!oA(a,e,n.type_))return PL(n,a,e);const l=a[e];if(n.finalized_||!bi(l)||i&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&wL(e))return l;if(l===dy(n.base_,e)){dd(n);const u=n.type_===1?+e:e,f=s_(n.scope_,l,n,u);return n.copy_[u]=f}return l},has(n,e){return e in ys(n)},ownKeys(n){return Reflect.ownKeys(ys(n))},set(n,e,t){const i=qC(ys(n),e);if(i!=null&&i.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const a=dy(ys(n),e),l=a==null?void 0:a[ar];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(AL(t,a)&&(t!==void 0||oA(n.base_,e,n.type_)))return!0;dd(n),i_(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),OL(n,e,t)),!0},deleteProperty(n,e){return dd(n),dy(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),i_(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=ys(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{[fd]:!0,[Jy]:n.type_!==1||e!=="length",[Kd]:i[Kd],[Ku]:t[e]}},defineProperty(){yi(11)},getPrototypeOf(n){return ac(n.base_)},setPrototypeOf(){yi(12)}},Qu={};for(let n in Wd){let e=Wd[n];Qu[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}Qu.deleteProperty=function(n,e){return Qu.set.call(this,n,e,void 0)};Qu.set=function(n,e,t){return Wd.set.call(this,n[0],e,t,n[0])};function dy(n,e){const t=n[ar];return(t?ys(t):n)[e]}function PL(n,e,t){var a;const i=qC(e,t);return i?Ku in i?i[Ku]:(a=i.get)==null?void 0:a.call(n.draft_):void 0}function qC(n,e){if(!(e in n))return;let t=ac(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=ac(t)}}function i_(n){n.modified_||(n.modified_=!0,n.parent_&&i_(n.parent_))}function dd(n){n.copy_||(n.assigned_=new Map,n.copy_=e_(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var kL=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,i)=>{if(kl(e)&&!kl(t)){const l=t;t=e;const u=this;return function(m=l,...p){return u.produce(m,y=>t.call(this,y,...p))}}kl(t)||yi(6),i!==void 0&&!kl(i)&&yi(7);let a;if(bi(e)){const l=hA(this),u=s_(l,e,void 0);let f=!0;try{a=t(u),f=!1}finally{f?n_(l):r_(l)}return uA(l,i),fA(a,l)}else if(!e||!fv(e)){if(a=t(e),a===void 0&&(a=e),a===LC&&(a=void 0),this.autoFreeze_&&mv(a,!0),i){const l=[],u=[];Mo(t_).generateReplacementPatches_(e,a,{patches_:l,inversePatches_:u}),i(l,u)}return a}else yi(1,e)},this.produceWithPatches=(e,t)=>{if(kl(e))return(u,...f)=>this.produceWithPatches(u,m=>e(m,...f));let i,a;return[this.produce(e,t,(u,f)=>{i=u,a=f}),i,a]},fy(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),fy(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),fy(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){bi(n)||yi(8),Os(n)&&(n=VL(n));const e=hA(this),t=s_(e,n,void 0);return t[ar].isManual_=!0,r_(e),t}finishDraft(n,e){const t=n&&n[ar];(!t||!t.isManual_)&&yi(9);const{scope_:i}=t;return uA(i,e),fA(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const a=e[t];if(a.path.length===0&&a.op==="replace"){n=a.value;break}}t>-1&&(e=e.slice(t+1));const i=Mo(t_).applyPatches_;return Os(n)?i(n,e):this.produce(n,a=>i(a,e))}};function s_(n,e,t,i){const[a,l]=Dm(e)?Mo(Qd).proxyMap_(e,t):Om(e)?Mo(Qd).proxySet_(e,t):ML(e,t);return((t==null?void 0:t.scope_)??zC()).drafts_.push(a),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=i,t&&i!==void 0?DL(t,l,i):l.callbacks_.push(function(m){var y;(y=m.mapSetPlugin_)==null||y.fixSetContents(l);const{patchPlugin_:p}=m;l.modified_&&p&&p.generatePatches_(l,[],m)}),a}function VL(n){return Os(n)||yi(10,n),GC(n)}function GC(n){if(!bi(n)||Mm(n))return n;const e=n[ar];let t,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=e_(n,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else t=e_(n,!0);return xm(t,(a,l)=>{Yd(t,a,GC(l))},i),e&&(e.finalized_=!1),t}var LL=new kL,$C=LL.produce;function KC(n){return({dispatch:t,getState:i})=>a=>l=>typeof l=="function"?l(t,i,n):a(l)}var jL=KC(),UL=KC,zL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Gd:Gd.apply(null,arguments)},BL=n=>n&&typeof n.match=="function";function Ou(n,e){function t(...i){if(e){let a=e(...i);if(!a)throw new Error(ws(0));return{type:n,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>bL(i)&&i.type===n,t}var YC=class Au extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Au.prototype)}static get[Symbol.species](){return Au}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Au(...e[0].concat(this)):new Au(...e.concat(this))}};function mA(n){return bi(n)?$C(n,()=>{}):n}function Yf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function HL(n){return typeof n=="boolean"}var FL=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=e??{};let u=new YC;return t&&(HL(t)?u.push(jL):u.push(UL(t.extraArgument))),u},qL="RTK_autoBatch",pA=n=>e=>{setTimeout(e,n)},GL=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let a=!0,l=!1,u=!1;const f=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:pA(10):n.type==="callback"?n.queueNotification:pA(n.timeout),p=()=>{u=!1,l&&(l=!1,f.forEach(y=>y()))};return Object.assign({},i,{subscribe(y){const v=()=>a&&y(),b=i.subscribe(v);return f.add(y),()=>{b(),f.delete(y)}},dispatch(y){var v;try{return a=!((v=y==null?void 0:y.meta)!=null&&v[qL]),l=!a,l&&(u||(u=!0,m(p))),i.dispatch(y)}finally{a=!0}}})},$L=n=>function(t){const{autoBatch:i=!0}=t??{};let a=new YC(n);return i&&a.push(GL(typeof i=="object"?i:void 0)),a};function KL(n){const e=FL(),{reducer:t=void 0,middleware:i,devTools:a=!0,preloadedState:l=void 0,enhancers:u=void 0}=n||{};let f;if(typeof t=="function")f=t;else if(hv(t))f=EL(t);else throw new Error(ws(1));let m;typeof i=="function"?m=i(e):m=e();let p=Gd;a&&(p=zL({trace:!1,...typeof a=="object"&&a}));const y=TL(...m),v=$L(y);let b=typeof u=="function"?u(v):v();const w=p(...b);return VC(f,l,w)}function QC(n){const e={},t=[];let i;const a={addCase(l,u){const f=typeof l=="string"?l:l.type;if(!f)throw new Error(ws(28));if(f in e)throw new Error(ws(29));return e[f]=u,a},addAsyncThunk(l,u){return u.pending&&(e[l.pending.type]=u.pending),u.rejected&&(e[l.rejected.type]=u.rejected),u.fulfilled&&(e[l.fulfilled.type]=u.fulfilled),u.settled&&t.push({matcher:l.settled,reducer:u.settled}),a},addMatcher(l,u){return t.push({matcher:l,reducer:u}),a},addDefaultCase(l){return i=l,a}};return n(a),[e,t,i]}function YL(n){return typeof n=="function"}function QL(n,e){let[t,i,a]=QC(e),l;if(YL(n))l=()=>mA(n());else{const f=mA(n);l=()=>f}function u(f=l(),m){let p=[t[m.type],...i.filter(({matcher:y})=>y(m)).map(({reducer:y})=>y)];return p.filter(y=>!!y).length===0&&(p=[a]),p.reduce((y,v)=>{if(v)if(Os(y)){const w=v(y,m);return w===void 0?y:w}else{if(bi(y))return $C(y,b=>v(b,m));{const b=v(y,m);if(b===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return y},f)}return u.getInitialState=l,u}var XL=(n,e)=>BL(n)?n.match(e):n(e);function WL(...n){return e=>n.some(t=>XL(t,e))}var JL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ZL=(n=21)=>{let e="",t=n;for(;t--;)e+=JL[Math.random()*64|0];return e},ej=["name","message","stack","code"],my=class{constructor(n,e){kg(this,"_type");this.payload=n,this.meta=e}},gA=class{constructor(n,e){kg(this,"_type");this.payload=n,this.meta=e}},tj=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of ej)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},yA="External signal was aborted",or=(()=>{function n(e,t,i){const a=Ou(e+"/fulfilled",(m,p,y,v)=>({payload:m,meta:{...v||{},arg:y,requestId:p,requestStatus:"fulfilled"}})),l=Ou(e+"/pending",(m,p,y)=>({payload:void 0,meta:{...y||{},arg:p,requestId:m,requestStatus:"pending"}})),u=Ou(e+"/rejected",(m,p,y,v,b)=>({payload:v,error:(i&&i.serializeError||tj)(m||"Rejected"),meta:{...b||{},arg:y,requestId:p,rejectedWithValue:!!v,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function f(m,{signal:p}={}){return(y,v,b)=>{const w=i!=null&&i.idGenerator?i.idGenerator(m):ZL(),M=new AbortController;let z,N;function L(U){N=U,M.abort()}p&&(p.aborted?L(yA):p.addEventListener("abort",()=>L(yA),{once:!0}));const V=(async function(){var Y,Q;let U;try{let A=(Y=i==null?void 0:i.condition)==null?void 0:Y.call(i,m,{getState:v,extra:b});if(rj(A)&&(A=await A),A===!1||M.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const C=new Promise((R,k)=>{z=()=>{k({name:"AbortError",message:N||"Aborted"})},M.signal.addEventListener("abort",z,{once:!0})});y(l(w,m,(Q=i==null?void 0:i.getPendingMeta)==null?void 0:Q.call(i,{requestId:w,arg:m},{getState:v,extra:b}))),U=await Promise.race([C,Promise.resolve(t(m,{dispatch:y,getState:v,extra:b,requestId:w,signal:M.signal,abort:L,rejectWithValue:(R,k)=>new my(R,k),fulfillWithValue:(R,k)=>new gA(R,k)})).then(R=>{if(R instanceof my)throw R;return R instanceof gA?a(R.payload,w,m,R.meta):a(R,w,m)})])}catch(A){U=A instanceof my?u(null,w,m,A.payload,A.meta):u(A,w,m)}finally{z&&M.signal.removeEventListener("abort",z)}return i&&!i.dispatchConditionRejection&&u.match(U)&&U.meta.condition||y(U),U})();return Object.assign(V,{abort:L,requestId:w,arg:m,unwrap(){return V.then(nj)}})}}return Object.assign(f,{pending:l,rejected:u,fulfilled:a,settled:WL(u,a),typePrefix:e})}return n.withTypes=()=>n,n})();function nj(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function rj(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var ij=Symbol.for("rtk-slice-createasyncthunk");function sj(n,e){return`${n}/${e}`}function aj({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[ij];return function(a){const{name:l,reducerPath:u=l}=a;if(!l)throw new Error(ws(11));const f=(typeof a.reducers=="function"?a.reducers(lj()):a.reducers)||{},m=Object.keys(f),p={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},y={addCase(q,Y){const Q=typeof q=="string"?q:q.type;if(!Q)throw new Error(ws(12));if(Q in p.sliceCaseReducersByType)throw new Error(ws(13));return p.sliceCaseReducersByType[Q]=Y,y},addMatcher(q,Y){return p.sliceMatchers.push({matcher:q,reducer:Y}),y},exposeAction(q,Y){return p.actionCreators[q]=Y,y},exposeCaseReducer(q,Y){return p.sliceCaseReducersByName[q]=Y,y}};m.forEach(q=>{const Y=f[q],Q={reducerName:q,type:sj(l,q),createNotation:typeof a.reducers=="function"};uj(Y)?fj(Q,Y,y,e):cj(Q,Y,y)});function v(){const[q={},Y=[],Q=void 0]=typeof a.extraReducers=="function"?QC(a.extraReducers):[a.extraReducers],A={...q,...p.sliceCaseReducersByType};return QL(a.initialState,C=>{for(let R in A)C.addCase(R,A[R]);for(let R of p.sliceMatchers)C.addMatcher(R.matcher,R.reducer);for(let R of Y)C.addMatcher(R.matcher,R.reducer);Q&&C.addDefaultCase(Q)})}const b=q=>q,w=new Map,M=new WeakMap;let z;function N(q,Y){return z||(z=v()),z(q,Y)}function L(){return z||(z=v()),z.getInitialState()}function V(q,Y=!1){function Q(C){let R=C[q];return typeof R>"u"&&Y&&(R=Yf(M,Q,L)),R}function A(C=b){const R=Yf(w,Y,()=>new WeakMap);return Yf(R,C,()=>{const k={};for(const[P,F]of Object.entries(a.selectors??{}))k[P]=oj(F,C,()=>Yf(M,C,L),Y);return k})}return{reducerPath:q,getSelectors:A,get selectors(){return A(Q)},selectSlice:Q}}const U={name:l,reducer:N,actions:p.actionCreators,caseReducers:p.sliceCaseReducersByName,getInitialState:L,...V(u),injectInto(q,{reducerPath:Y,...Q}={}){const A=Y??u;return q.inject({reducerPath:A,reducer:N},Q),{...U,...V(A,!0)}}};return U}}function oj(n,e,t,i){function a(l,...u){let f=e(l);return typeof f>"u"&&i&&(f=t()),n(f,...u)}return a.unwrapped=n,a}var Ha=aj();function lj(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function cj({type:n,reducerName:e,createNotation:t},i,a){let l,u;if("reducer"in i){if(t&&!hj(i))throw new Error(ws(17));l=i.reducer,u=i.prepare}else l=i;a.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,u?Ou(n,u):Ou(n))}function uj(n){return n._reducerDefinitionType==="asyncThunk"}function hj(n){return n._reducerDefinitionType==="reducerWithPrepare"}function fj({type:n,reducerName:e},t,i,a){if(!a)throw new Error(ws(18));const{payloadCreator:l,fulfilled:u,pending:f,rejected:m,settled:p,options:y}=t,v=a(n,l,y);i.exposeAction(e,v),u&&i.addCase(v.fulfilled,u),f&&i.addCase(v.pending,f),m&&i.addCase(v.rejected,m),p&&i.addMatcher(v.settled,p),i.exposeCaseReducer(e,{fulfilled:u||Qf,pending:f||Qf,rejected:m||Qf,settled:p||Qf})}function Qf(){}function ws(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const dj={positions:[],loading:!1,error:null,fetched:!1,isDirty:!1},$l=or("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=sn(vt,"metadata","positions"),i=await dh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),pv=or("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=sn(vt,"metadata","positions");return await Uo(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),XC=Ha({name:"positions",initialState:dj,reducers:{updatePositionCustomLabels:(n,e)=>{const{positionName:t,labels:i}=e.payload,a=n.positions.find(l=>l.name===t);a&&(a.customLabels=i,n.isDirty=!0)},resetPositionsDirty:n=>{n.isDirty=!1},setPositions:(n,e)=>{n.positions=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase($l.pending,e=>{e.loading=!0,e.error=null}).addCase($l.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase($l.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(pv.fulfilled,(e,t)=>{e.positions=t.payload,e.isDirty=!1})}}),{updatePositionCustomLabels:Xf,resetPositionsDirty:mj,setPositions:pj}=XC.actions,gj=XC.reducer,yj={teams:[],loading:!1,error:null,fetched:!1},Mu=or("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=sn(vt,"metadata","teams"),i=await dh(t);if(i.exists()){const a=i.data();return Array.isArray(a.list)?a.list.map(u=>({...u,maxConflict:u.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),md=or("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=sn(vt,"metadata","teams");return await Uo(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),WC=Ha({name:"teams",initialState:yj,reducers:{clearError:n=>{n.error=null},setTeams:(n,e)=>{n.teams=e.payload,n.fetched=!0,n.loading=!1}},extraReducers:n=>{n.addCase(Mu.pending,e=>{e.loading=!0,e.error=null}).addCase(Mu.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(Mu.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(md.pending,e=>{e.error=null}).addCase(md.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(md.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:Dz,setTeams:_j}=WC.actions,vj=WC.reducer,Ej=()=>{const n=Dn(),{firebaseUser:e,userData:t,loading:i}=Pe(m=>m.auth),{fetched:a,loading:l}=Pe(m=>m.teams),{fetched:u,loading:f}=Pe(m=>m.positions);return O.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!a&&!l&&n(Mu()),!u&&!f&&n($l()))},[n,e,t,a,l,u,f]),i||t!=null&&t.isApproved&&(!a||!u)?E.jsx(sc,{}):e?t?t.isApproved?E.jsx(iw,{}):E.jsx(wa,{to:"/guest",replace:!0}):E.jsx(sc,{}):E.jsx(wa,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=n=>{const e=bj(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=O.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:a="",children:l,iconNode:u,...f},m)=>O.createElement("svg",{ref:m,...Sj,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:JC("lucide",a),...!l&&!Aj(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>O.createElement(p,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=(n,e)=>{const t=O.forwardRef(({className:i,...a},l)=>O.createElement(wj,{ref:l,iconNode:e,className:JC(`lucide-${Tj(_A(n))}`,`lucide-${n}`,i),...a}));return t.displayName=_A(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Rj=lr("arrow-left",Cj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],xj=lr("arrow-right",Ij);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZC=lr("chevron-up",Nj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Oj=lr("circle-check",Dj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Pj=lr("copy",Mj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],eR=lr("corner-down-right",kj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Lj=lr("layout-grid",Vj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Uj=lr("moon",jj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Bj=lr("panel-left-close",zj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Fj=lr("panel-left-open",Hj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_h=lr("plus",qj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],$j=lr("sun",Gj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tR=lr("trash-2",Kj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qj=lr("users",Yj);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gv=lr("x",Xj),Wj=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},Jj={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:Wj(),lastVisitedPaths:{},rosterAllViewMode:"user",alertConfig:null,peekPositionName:null,focusedCell:null},nR=Ha({name:"ui",initialState:Jj,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setRosterAllViewMode:(n,e)=>{n.rosterAllViewMode=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:i}=e.payload;n.lastVisitedPaths[t]=i},toggleTeamExpansion:(n,e)=>{const t=e.payload,i=n.expandedTeams.indexOf(t);i>=0?n.expandedTeams.splice(i,1):n.expandedTeams.push(t)},expandTeam:(n,e)=>{const t=e.payload;n.expandedTeams.includes(t)||n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:i,userEmail:a}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][i]||(n.hiddenUsers[t][i]=[]);const l=n.hiddenUsers[t][i],u=l.indexOf(a);u>=0?l.splice(u,1):l.push(a),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))},showAlert:(n,e)=>{n.alertConfig=e.payload},hideAlert:n=>{n.alertConfig=null},setPeekPositionName:(n,e)=>{n.peekPositionName=e.payload},setFocusedCell:(n,e)=>{n.focusedCell=e.payload}}}),{setMobileSidebarOpen:Vl,setDesktopSidebarExpanded:Zj,setRosterAllViewMode:vA,setLastVisitedPath:e3,toggleTeamExpansion:t3,expandTeam:n3,toggleUserVisibility:r3,showAlert:Co,hideAlert:EA,setPeekPositionName:i3,setFocusedCell:Cl}=nR.actions,s3=nR.reducer,a3=()=>{const n=O.useContext(kC);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},o3="_themeToggleButton_1ugtj_1",l3={themeToggleButton:o3},km=({showText:n,className:e,iconClassName:t})=>{const{theme:i,toggleTheme:a}=a3();return E.jsxs("button",{className:`${l3.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[E.jsx("span",{className:t||"",children:i==="dark"?E.jsx($j,{size:20}):E.jsx(Uj,{size:20})}),n&&E.jsx("span",{children:"Toggle theme"})]})},c3={onlineUsers:[],error:null},rR=Ha({name:"presence",initialState:c3,reducers:{setOnlineUsers:(n,e)=>{n.onlineUsers=e.payload,n.error=null},setPresenceError:(n,e)=>{n.error=e.payload}}}),{setOnlineUsers:u3,setPresenceError:h3}=rR.actions,f3=rR.reducer,d3=()=>{try{const n="gig_roster_session_id";let e=sessionStorage.getItem(n);return e||(e=Math.random().toString(36).substring(2,10),sessionStorage.setItem(n,e)),e}catch{return Math.random().toString(36).substring(2,10)}},m3=()=>{try{const n="gig_roster_session_color";let e=sessionStorage.getItem(n);if(!e){const t=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F78FB3","#BB8FCE","#82E0AA","#F1948A","#85C1E9","#76D7C4","#F8C471","#C39BD3","#7FB3D5","#7DCEA0","#F0B27A","#5DADE2","#D7BDE2","#A9CCE3","#A3E4D7"],i=Math.floor(Math.random()*t.length);e=t[i],sessionStorage.setItem(n,e)}return e}catch{return"#FF6B6B"}},Jd=d3(),p3=m3(),g3=6e4,y3=9e4,_3=(n,e)=>{const t=O.useRef(!1),{teamName:i,positionName:a}=Ps(),{focusedCell:l}=Pe(v=>v.ui),{rosterDates:u,users:f,allTeamUsers:m}=Pe(v=>v.rosterView),{positions:p}=Pe(v=>v.positions),y=O.useMemo(()=>{var w,M,z;if(!i)return null;let v="",b="";if(l){if(b=u[l.row]||"",l.table==="absence")v=((w=m[l.col])==null?void 0:w.email)||"";else if(l.table==="roster"){const N=p.find(L=>L.name===a);N!=null&&N.isCustom?v=((M=N.customLabels)==null?void 0:M[l.col])||"":v=((z=f.filter(V=>V.isActive)[l.col])==null?void 0:z.email)||""}}return{date:b,identifier:v,teamName:i,viewName:a}},[l,u,f,m,i,p,a]);O.useEffect(()=>{if(!(n!=null&&n.uid)||!(e!=null&&e.email))return;const v=`${n.uid}_${Jd}`,b=sn(vt,"presence",v);t.current||(t.current=!0,(async()=>{try{const V=new Date(Date.now()-6e5),U=Ba(xs(vt,"presence"),Sm("userUid","==",n.uid));(await mc(U)).forEach(Y=>{var A,C;const Q=((C=(A=Y.data().lastSeen)==null?void 0:A.toDate)==null?void 0:C.call(A))||new Date(0);Y.id!==v&&Q<V&&US(Y.ref).catch(()=>{})})}catch{}})());const w=async(L=y)=>{if(!(!Oo.currentUser||document.visibilityState!=="visible"))try{await Uo(b,{uid:v,userUid:n.uid,name:e.name||n.displayName||"Anonymous",email:e.email,color:p3,lastSeen:ja(),focus:L},{merge:!0})}catch(V){const U=V;U.code!=="unavailable"&&console.warn("[Presence] Heartbeat failed:",U.message)}},M=()=>{US(b).catch(()=>{})};w();const z=setInterval(()=>w(y),g3),N=()=>{document.visibilityState==="visible"?w():M()};return document.addEventListener("visibilitychange",N),window.addEventListener("beforeunload",M),()=>{clearInterval(z),document.removeEventListener("visibilitychange",N),window.removeEventListener("beforeunload",M),M()}},[n==null?void 0:n.uid,n==null?void 0:n.displayName,e==null?void 0:e.email,e==null?void 0:e.name,y]),O.useEffect(()=>{const v=`${n==null?void 0:n.uid}_${Jd}`;if(!(n!=null&&n.uid)||document.visibilityState!=="visible")return;const b=setTimeout(()=>{pc(sn(vt,"presence",v),{focus:y,lastSeen:ja()}).catch(()=>{})},200);return()=>clearTimeout(b)},[y,n==null?void 0:n.uid])},v3=()=>{const n=Dn(),{firebaseUser:e}=Pe(a=>a.auth),t=e==null?void 0:e.uid,i=O.useRef([]);O.useEffect(()=>{if(!t)return;let a=null;const l=Ba(xs(vt,"presence")),u=p=>{const y=Date.now(),v=y-y3,b=[];p.forEach(w=>{var z,N,L;if(!w||!w.name)return;const M=((N=(z=w.lastSeen)==null?void 0:z.toMillis)==null?void 0:N.call(z))||((L=w.lastSeen)==null?void 0:L.seconds)*1e3||y;M>v&&b.push({uid:w.uid,userUid:String(w.userUid||""),name:String(w.name),email:String(w.email||""),color:String(w.color||"#5c4eb1"),lastSeen:M,focus:w.focus||null})}),n(u3(b.sort((w,M)=>w.name.localeCompare(M.name))))},f=setTimeout(()=>{a=vo(l,{next:p=>{const y=p.docs.map(v=>v.data());i.current=y,u(y)},error:p=>{console.error("[Presence] Listener failed:",p.message),n(h3(p.message))}})},1e3),m=setInterval(()=>{u(i.current)},3e4);return()=>{clearTimeout(f),a&&a(),clearInterval(m)}},[n,t])},E3=()=>Pe(n=>n.presence.onlineUsers),T3="_meTag_sc6t2_10",b3="_isMe_sc6t2_51",TA={meTag:T3,isMe:b3},Vm=({displayName:n,isMe:e})=>E.jsxs(O.Fragment,{children:[E.jsx("span",{className:e?TA.isMe:"",children:n}),e&&E.jsx("span",{className:TA.meTag,children:"Me"})]}),S3="_onlineUsersContainer_1vvxe_1",A3="_sidebarVariant_1vvxe_17",w3="_sidebarExpanded_1vvxe_22",C3="_onlineLabel_1vvxe_26",R3="_avatarStack_1vvxe_38",I3="_avatarCircle_1vvxe_44",x3="_moreCircle_1vvxe_66",N3="_userDropdown_1vvxe_72",D3="_dropdownDown_1vvxe_83",O3="_dropdownUp_1vvxe_88",M3="_dropdownTitle_1vvxe_93",P3="_userListScroll_1vvxe_103",k3="_userItem_1vvxe_108",V3="_userNameText_1vvxe_122",L3="_userAvatarSmall_1vvxe_129",j3="_pulse_1vvxe_142",jn={onlineUsersContainer:S3,sidebarVariant:A3,sidebarExpanded:w3,onlineLabel:C3,avatarStack:R3,avatarCircle:I3,moreCircle:x3,userDropdown:N3,dropdownDown:D3,dropdownUp:O3,dropdownTitle:M3,userListScroll:P3,userItem:k3,userNameText:V3,userAvatarSmall:L3,pulse:j3},iR=({variant:n="top-bar",showText:e=!1})=>{const t=E3(),{firebaseUser:i}=Pe(w=>w.auth),a=i?`${i.uid}_${Jd}`:null,[l,u]=O.useState(!1),f=O.useRef(null);if(O.useEffect(()=>{const w=M=>{f.current&&!f.current.contains(M.target)&&u(!1)};return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),!t||t.length===0)return null;const m=t.slice(0,3),p=t.length-3,y=w=>{if(!w||typeof w!="string")return"?";const M=w.trim().split(" ");return M.length===0?"?":M.map(z=>z[0]).join("").substring(0,2).toUpperCase()},v=[jn.onlineUsersContainer,n==="sidebar"?jn.sidebarVariant:"",e?jn.sidebarExpanded:""].filter(Boolean).join(" "),b=[jn.userDropdown,n==="sidebar"?jn.dropdownUp:jn.dropdownDown].filter(Boolean).join(" ");return E.jsxs("div",{className:v,ref:f,onClick:()=>u(!l),children:[e&&E.jsx("span",{className:jn.onlineLabel,children:"Online"}),E.jsxs("div",{className:jn.avatarStack,children:[p>0&&E.jsxs("div",{className:`${jn.avatarCircle} ${jn.moreCircle}`,children:["+",p]}),[...m].reverse().map(w=>E.jsx("div",{className:jn.avatarCircle,title:w.name||"Unknown User",style:{backgroundColor:w.color,borderColor:"white"},children:y(w.name)},w.uid))]}),l&&E.jsxs("div",{className:b,children:[E.jsxs("div",{className:jn.dropdownTitle,children:["Online Now (",t.length,")"]}),E.jsx("div",{className:jn.userListScroll,children:t.map(w=>E.jsxs("div",{className:jn.userItem,children:[E.jsx("div",{className:jn.userAvatarSmall,style:{backgroundColor:w.color},children:y(w.name)}),E.jsx("span",{className:jn.userNameText,children:E.jsx(Vm,{displayName:w.name||"Unknown User",isMe:w.uid===a})}),E.jsx("div",{className:jn.pulse})]},w.uid))})]})]})},U3="_mobileHeader_lcvro_1",z3="_mobileHeaderPill_lcvro_18",B3="_mobileHeaderPillDisabled_lcvro_30",H3="_mobileHeaderPillActive_lcvro_34",F3="_mobileHeaderText_lcvro_45",q3="_mobileHeaderChevron_lcvro_53",G3="_rotate_lcvro_58",$3="_mobileHeaderActions_lcvro_62",K3="_mobileThemeToggle_lcvro_68",ms={mobileHeader:U3,mobileHeaderPill:z3,mobileHeaderPillDisabled:B3,mobileHeaderPillActive:H3,mobileHeaderText:F3,mobileHeaderChevron:q3,rotate:G3,mobileHeaderActions:$3,mobileThemeToggle:K3},Y3=({title:n,hasSideNav:e=!0})=>{const t=Dn(),{isMobileSidebarOpen:i}=Pe(l=>l.ui),a=()=>{e&&t(Vl(!i))};return E.jsxs("header",{className:ms.mobileHeader,children:[E.jsxs("div",{className:`${ms.mobileHeaderPill} ${i?ms.mobileHeaderPillActive:""} ${e?"":ms.mobileHeaderPillDisabled}`,onClick:a,children:[E.jsx("span",{className:ms.mobileHeaderText,children:n}),e&&E.jsx(ZC,{className:`${ms.mobileHeaderChevron} ${i?ms.rotate:""}`})]}),E.jsxs("div",{className:ms.mobileHeaderActions,children:[E.jsx(km,{className:ms.mobileThemeToggle}),E.jsx(iR,{})]})]})};var Qt=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(Qt||{}),jl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(jl||{});const yv=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],bA=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],sR=n=>{const e=[];return Object.entries(n).forEach(([t,i])=>{i.forEach(a=>{e.push(`${t}|${a}`)})}),e},aR=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${i}`},Ss=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),Q3={firebaseUser:null,userData:null,loading:!0,error:null},pd=or("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=sn(vt,"users",n),i=await dh(t);if(!i.exists()){const a="chris.sm.kang542@gmail.com",l=Oo.currentUser,u=(l==null?void 0:l.email)===a,f={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:u,isAdmin:u,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await Uo(t,f),f}return i.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),gd=or("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const i=sn(vt,"users",n),a={...e};return a.teamPositions&&(a.indexedAssignments=sR(a.teamPositions)),await pc(i,a),a}catch(i){return t(i instanceof Error?i.message:"Failed to update profile")}}),oR=Ha({name:"auth",initialState:Q3,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(pd.pending,e=>{e.loading=!0,e.error=null}).addCase(pd.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(pd.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(gd.pending,e=>{e.error=null}).addCase(gd.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(gd.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:X3,setUserData:lR,setLoading:Oz,logout:W3}=oR.actions,J3=oR.reducer,Z3={entries:{},loading:!0,initialLoad:!1,syncing:{},error:null},py=or("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Ba(xs(vt,"roster")),i=await mc(t),a={};return i.docs.forEach(l=>{const u=l.data(),f=u.updatedAt,m={...u,updatedAt:f&&typeof f=="object"&&"toMillis"in f?f.toMillis():f};a[l.id]={...m,id:l.id}}),a}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),yd=or("roster/syncAssignmentRemote",async(n,{rejectWithValue:e})=>{const{date:t,teamName:i,userIdentifier:a,updatedAssignments:l}=n;try{const u=sn(vt,"roster",t),m=l.length===0?Yy():l;return await pc(u,new Ui("teams",i,a),m,new Ui("updatedAt"),ja()),{date:t}}catch(u){const f=u;if(f.code==="not-found"){const m={id:t,date:t,teams:{[i]:{[a]:l}},absence:{},updatedAt:Date.now()};return await Uo(sn(vt,"roster",t),{...m,updatedAt:ja()}),{date:t}}return e(f.message||"Sync failed")}}),Kl=or("roster/syncAbsenceRemote",async(n,{rejectWithValue:e})=>{const{date:t,userIdentifier:i,isAbsent:a,reason:l,clearedTeams:u}=n;try{const f=sn(vt,"roster",t),m=[];return m.push(new Ui("updatedAt"),ja()),a?(m.push(new Ui("absence",i),{reason:l||""}),u.forEach(p=>{m.push(new Ui("teams",p,i),Yy())})):m.push(new Ui("absence",i),Yy()),await pc(f,...m),{date:t}}catch(f){const m=f;if(m.code==="not-found"&&a){const p={id:t,date:t,teams:{},absence:{[i]:{reason:l||""}},updatedAt:Date.now()};return await Uo(sn(vt,"roster",t),{...p,updatedAt:ja()}),{date:t}}return e(m.message||"Sync failed")}}),Pu=or("roster/syncEventNameRemote",async(n,{rejectWithValue:e})=>{const{date:t,eventName:i}=n;try{const a=sn(vt,"roster",t);return await pc(a,{eventName:i,updatedAt:ja()}),{date:t}}catch(a){const l=a;if(l.code==="not-found"){const u=sn(vt,"roster",t),f={id:t,date:t,teams:{},absence:{},eventName:i,updatedAt:Date.now()};return await Uo(u,{...f,updatedAt:ja()}),{date:t}}return e(l.message||"Sync failed")}}),cR=Ha({name:"roster",initialState:Z3,reducers:{clearError:n=>{n.error=null},setRosterEntries(n,e){n.entries=e.payload,n.loading=!1,n.initialLoad=!0},setLoading(n,e){n.loading=e.payload},applyOptimisticAssignment(n,e){const{date:t,teamName:i,userIdentifier:a,updatedAssignments:l}=e.payload;n.entries[t]||(n.entries[t]={id:t,date:t,teams:{},absence:{}});const u=n.entries[t];u.teams[i]||(u.teams[i]={}),l.length===0?delete u.teams[i][a]:u.teams[i][a]=l},applyOptimisticAbsence(n,e){const{date:t,userIdentifier:i,isAbsent:a,reason:l}=e.payload;n.entries[t]||(n.entries[t]={id:t,date:t,teams:{},absence:{}});const u=n.entries[t];a?(u.absence[i]={reason:l||""},Object.keys(u.teams).forEach(f=>{delete u.teams[f][i]})):delete u.absence[i]},applyOptimisticEventName(n,e){const{date:t,eventName:i}=e.payload;n.entries[t]||(n.entries[t]={id:t,date:t,teams:{},absence:{}}),n.entries[t].eventName=i}},extraReducers:n=>{n.addCase(py.pending,e=>{e.loading=!0,e.error=null}).addCase(py.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(py.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(yd.pending,(e,t)=>{e.syncing[t.meta.arg.date]=!0}).addCase(yd.fulfilled,(e,t)=>{e.syncing[t.payload.date]=!1}).addCase(yd.rejected,(e,t)=>{e.error=t.payload,e.syncing[t.meta.arg.date]=!1}).addCase(Kl.pending,(e,t)=>{e.syncing[t.meta.arg.date]=!0}).addCase(Kl.fulfilled,(e,t)=>{e.syncing[t.payload.date]=!1}).addCase(Kl.rejected,(e,t)=>{e.error=t.payload,e.syncing[t.meta.arg.date]=!1}).addCase(Pu.pending,(e,t)=>{e.syncing[t.meta.arg.date]=!0}).addCase(Pu.fulfilled,(e,t)=>{e.syncing[t.payload.date]=!1}).addCase(Pu.rejected,(e,t)=>{e.error=t.payload,e.syncing[t.meta.arg.date]=!1})}}),{clearError:Mz,setRosterEntries:eU,setLoading:SA,applyOptimisticAssignment:tU,applyOptimisticAbsence:gy,applyOptimisticEventName:uR}=cR.actions,nU=cR.reducer,rU={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},yy=or("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=xs(vt,"users"),i=Ba(t),a=await mc(i),l=[];return a.forEach(u=>{l.push({...u.data(),id:u.id})}),l.sort((u,f)=>(u.name||"").localeCompare(f.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),_d=or("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=s4(vt);n.forEach(i=>{const{id:a,...l}=i;l.teamPositions&&(l.indexedAssignments=sR(l.teamPositions)),t.update(sn(vt,"users",a),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),hR=Ha({name:"userManagement",initialState:rU,reducers:{updateUserField(n,e){const{id:t,field:i,value:a}=e.payload,l=n.allUsers.find(u=>u.id===t);l&&(l[i]=a)},toggleUserTeam(n,e){const{userId:t,teamName:i}=e.payload,a=n.allUsers.find(l=>l.id===t);if(a){const l=a.teams||[],u=l.includes(i)?l.filter(f=>f!==i):[...l,i];a.teams=u,a.teamPositions||(a.teamPositions={}),u.includes(i)?a.teamPositions[i]||(a.teamPositions[i]=[]):delete a.teamPositions[i]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:i,posName:a}=e.payload,l=n.allUsers.find(u=>u.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[i]||(l.teamPositions[i]=[]);const u=l.teamPositions[i],f=u.includes(a)?u.filter(m=>m!==a):[...u,a];l.teamPositions[i]=f}},moveUserTeam(n,e){const{userId:t,teamName:i,direction:a}=e.payload,l=n.allUsers.find(u=>u.id===t);if(l&&l.teams){const u=l.teams.indexOf(i);if(u===-1)return;const f=a==="up"?u-1:u+1;if(f<0||f>=l.teams.length)return;const m=[...l.teams];[m[u],m[f]]=[m[f],m[u]],l.teams=m}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))},setAllUsers(n,e){n.allUsers=e.payload,n.originalUsers=JSON.parse(JSON.stringify(e.payload)),n.loading=!1}},extraReducers:n=>{n.addCase(yy.pending,e=>{e.loading=!0,e.error=null}).addCase(yy.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(yy.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(_d.pending,e=>{e.saving=!0,e.error=null}).addCase(_d.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(_d.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:iU,toggleUserTeam:sU,toggleUserTeamPosition:aU,moveUserTeam:oU,resetUserChanges:lU,setAllUsers:cU}=hR.actions,uU=hR.reducer,hU=()=>{const n=Dn(),{firebaseUser:e,userData:t}=Pe(i=>i.auth);_3(e,t),v3(),O.useEffect(()=>{n(SA(!0));const i=Ba(xs(vt,"roster")),a=vo(i,{next:m=>{const p={};m.docs.forEach(y=>{const v=y.data(),b=v.updatedAt,w={...v,updatedAt:b&&typeof b=="object"&&"toMillis"in b?b.toMillis():b};p[y.id]={...w,id:y.id}}),n(eU(p))},error:m=>{console.error("Roster sync error:",m),n(SA(!1))}}),l=vo(sn(vt,"metadata","teams"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list.map(v=>({...v,maxConflict:v.maxConflict||1})):[];n(_j(y))}},m=>console.error("Teams sync error:",m)),u=vo(sn(vt,"metadata","positions"),m=>{if(m.exists()){const p=m.data(),y=Array.isArray(p.list)?p.list:[];n(pj(y))}},m=>console.error("Positions sync error:",m)),f=vo(xs(vt,"users"),m=>{const p=[];m.forEach(v=>{p.push({...v.data(),id:v.id})});const y=p.sort((v,b)=>(v.name||"").localeCompare(b.name||""));n(cU(y))},m=>console.error("Users sync error:",m));return()=>{a(),l(),u(),f()}},[n]),O.useEffect(()=>{if(!(e!=null&&e.uid))return;const i=vo(sn(vt,"users",e.uid),a=>{a.exists()&&n(lR(a.data()))},a=>console.error("Profile sync error:",a));return()=>i()},[n,e==null?void 0:e.uid])},fU="_modalOverlay_ah937_1",dU="_modalContent_ah937_16",mU="_modalHeader_ah937_34",pU="_closeButton_ah937_48",gU="_modalBody_ah937_64",yU="_modalFooter_ah937_70",Rl={modalOverlay:fU,modalContent:dU,modalHeader:mU,closeButton:pU,modalBody:gU,modalFooter:yU},_v=({isOpen:n,onClose:e,title:t,children:i,footer:a})=>{if(O.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),!n)return null;const l=E.jsx("div",{className:Rl.modalOverlay,onClick:e,children:E.jsxs("div",{className:Rl.modalContent,onClick:u=>u.stopPropagation(),children:[E.jsxs("div",{className:Rl.modalHeader,children:[E.jsx("h2",{children:t}),E.jsx("button",{className:Rl.closeButton,onClick:e,"aria-label":"Close",children:E.jsx(gv,{size:24})})]}),E.jsx("div",{className:Rl.modalBody,children:i}),a&&E.jsx("div",{className:Rl.modalFooter,children:a})]})});return uw.createPortal(l,document.body)},_U="_confirmModalBody_17sxu_1",vU="_confirmModalMessage_17sxu_8",EU="_footer_17sxu_12",TU="_cancelButton_17sxu_19",bU="_confirmButton_17sxu_34",gu={confirmModalBody:_U,confirmModalMessage:vU,footer:EU,cancelButton:TU,confirmButton:bU},SU=()=>{const n=Dn(),{alertConfig:e}=Pe(l=>l.ui);if(!e)return null;const t=()=>{n(EA())},i=()=>{e.onConfirm&&e.onConfirm(),n(EA())},a=E.jsxs("div",{className:gu.footer,children:[e.showCancel!==!1&&E.jsx("button",{className:gu.cancelButton,onClick:t,children:e.cancelText||"Cancel"}),E.jsx("button",{className:gu.confirmButton,onClick:i,children:e.confirmText||"OK"})]});return E.jsx(_v,{isOpen:!!e,onClose:t,title:e.title,footer:a,children:E.jsx("div",{className:gu.confirmModalBody,children:E.jsx("div",{className:gu.confirmModalMessage,children:e.message})})})},AU="_bottomNavContainer_1c0tq_1",wU="_bottomNav_1c0tq_1",CU="_bottomNavBtn_1c0tq_18",RU="_bottomNavBtnActive_1c0tq_42",Wf={bottomNavContainer:AU,bottomNav:wU,bottomNavBtn:CU,bottomNavBtnActive:RU},IU=()=>{const n=ko(),e=ai(),{lastVisitedPaths:t}=Pe(l=>l.ui),i=e.pathname.includes("/settings")?Qt.SETTINGS:e.pathname.includes("/dashboard")?Qt.DASHBOARD:Qt.ROSTER,a=l=>{if(i===l){l===Qt.DASHBOARD&&n("/app/dashboard");return}const u=t[l];n(u||`/app/${l}`)};return E.jsx("nav",{className:Wf.bottomNavContainer,children:E.jsx("div",{className:Wf.bottomNav,children:yv.map(l=>E.jsxs("button",{className:`${Wf.bottomNavBtn} ${i===l.id?Wf.bottomNavBtnActive:""}`,onClick:()=>a(l.id),children:[E.jsx("span",{children:l.icon}),E.jsx("span",{children:l.label})]},l.id))})})},xU="_sideNav_1f6d0_1",NU="_sidebarCollapsed_1f6d0_14",DU="_sidebarContent_1f6d0_18",OU="_tabletSidebarHeader_1f6d0_26",MU="_sidebarToggleButton_1f6d0_47",PU="_sideMenuList_1f6d0_65",kU="_sideNavItem_1f6d0_72",VU="_navItemLabel_1f6d0_91",LU="_sideNavItemActive_1f6d0_102",jU="_sideNavItemSub_1f6d0_108",UU="_sideEmoji_1f6d0_113",zU="_sidenavMenuSubheading_1f6d0_122",BU="_sidenavMenuSubheadingClickable_1f6d0_134",HU="_teamHeadingContent_1f6d0_138",FU="_locationIndicators_1f6d0_148",qU="_locationDot_1f6d0_155",GU="_expandIcon_1f6d0_179",$U="_sideNavSubItems_1f6d0_185",KU="_adminOnlySectionWrapper_1f6d0_192",YU="_sidebarFooter_1f6d0_198",QU="_sidebarThemeToggle_1f6d0_207",XU="_sidebarThemeIcon_1f6d0_213",Ye={sideNav:xU,sidebarCollapsed:NU,sidebarContent:DU,tabletSidebarHeader:OU,sidebarToggleButton:MU,sideMenuList:PU,sideNavItem:kU,navItemLabel:VU,sideNavItemActive:LU,sideNavItemSub:jU,sideEmoji:UU,sidenavMenuSubheading:zU,sidenavMenuSubheadingClickable:BU,teamHeadingContent:HU,locationIndicators:FU,locationDot:qU,expandIcon:GU,sideNavSubItems:$U,adminOnlySectionWrapper:KU,sidebarFooter:YU,sidebarThemeToggle:QU,sidebarThemeIcon:XU},WU=()=>{var A;const n=ko(),e=ai(),{teamName:t,positionName:i,section:a}=Ps(),l=Dn(),{userData:u}=Pe(C=>C.auth),{isDesktopSidebarExpanded:f,isMobileSidebarOpen:m,expandedTeams:p}=Pe(C=>C.ui),{teams:y,fetched:v,loading:b}=Pe(C=>C.teams),{fetched:w}=Pe(C=>C.positions),{onlineUsers:M}=Pe(C=>C.presence),z=e.pathname.includes("/settings")?Qt.SETTINGS:e.pathname.includes("/dashboard")?Qt.DASHBOARD:Qt.ROSTER,N=i||a,L=O.useRef(void 0);O.useEffect(()=>{t&&z===Qt.ROSTER&&t!==L.current&&l(n3(t)),L.current=t},[t,z,l]),O.useEffect(()=>{v||l(Mu()),w||l($l())},[l,v,w]);const V=O.useCallback(C=>{n(C)},[n]),U=C=>{l(t3(C))},q=()=>{const C=yv.find(k=>k.id===z),R=C?C.label:"GIG ROSTER";return t&&N?`${t}  ${N}`:t||(N?`${R}  ${N}`:R)},Y=(C,R)=>{const k=M.filter(P=>{var F,x;return((F=P.focus)==null?void 0:F.teamName)===C&&(R?((x=P.focus)==null?void 0:x.viewName)===R:!0)});return k.length===0?null:E.jsx("div",{className:Ye.locationIndicators,children:k.map(P=>{var F;return E.jsx("span",{className:Ye.locationDot,style:{backgroundColor:P.color},title:`${P.name} is in ${((F=P.focus)==null?void 0:F.viewName)||C}`},P.uid)})})},Q=[Ye.sideNav,m?Ye.menuOpen:"",f?"":Ye.sidebarCollapsed].filter(Boolean).join(" ");return E.jsxs("aside",{className:Q,children:[E.jsxs("div",{className:Ye.sidebarContent,children:[E.jsxs("div",{className:Ye.tabletSidebarHeader,children:[f&&E.jsx("h3",{children:q()}),E.jsx("button",{className:Ye.sidebarToggleButton,onClick:()=>l(Zj(!f)),"aria-label":f?"Collapse sidebar":"Expand sidebar",children:f?E.jsx(Bj,{size:20}):E.jsx(Fj,{size:20})})]}),E.jsxs("nav",{className:Ye.sideMenuList,children:[z===Qt.ROSTER&&b&&E.jsx("div",{className:`${Ye.sideNavItem} ${Ye.loading}`,children:"Loading teams..."}),z===Qt.ROSTER?(A=u==null?void 0:u.teams)==null?void 0:A.map(C=>{var F,x;const R=y.find(ue=>ue.name===C);if(!R)return null;const k=u.teams.length===1,P=k||p.includes(R.name);return E.jsxs("div",{children:[!k&&E.jsxs("div",{className:`${Ye.sidenavMenuSubheading} ${Ye.sidenavMenuSubheadingClickable}`,style:{cursor:"pointer"},onClick:()=>{U(R.name),V(`/app/roster/${R.name}/All`)},children:[E.jsxs("div",{className:Ye.teamHeadingContent,children:[R.emoji," ",f&&R.name,Y(R.name)]}),E.jsx("span",{className:Ye.expandIcon,children:P?"":""})]}),P&&E.jsxs("div",{className:Ye.sideNavSubItems,children:[E.jsxs("button",{className:`${Ye.sideNavItem} ${Ye.sideNavItemSub} ${N==="All"&&t===R.name?Ye.sideNavItemActive:""}`,onClick:()=>{V(`/app/roster/${R.name}/All`),l(Vl(!1))},style:{borderLeft:N==="All"&&t===R.name?"4px solid var(--color-primary)":"4px solid transparent",backgroundColor:N==="All"&&t===R.name?"var(--background-toggle-on-transparent)":"transparent",color:N==="All"&&t===R.name?"var(--color-primary)":""},children:[E.jsx("span",{className:Ye.sideEmoji,children:""})," ",E.jsx("span",{className:Ye.navItemLabel,children:f&&"All"}),Y(R.name,"All")]}),(x=(F=R.positions)==null?void 0:F.filter(ue=>!ue.parentId))==null?void 0:x.map(ue=>{const ye=N===ue.name&&t===R.name;return E.jsxs("button",{className:`${Ye.sideNavItem} ${Ye.sideNavItemSub} ${ye?Ye.sideNavItemActive:""}`,onClick:()=>{V(`/app/roster/${R.name}/${ue.name}`),l(Vl(!1))},style:{borderLeft:ye?`4px solid ${ue.colour}`:"4px solid transparent",backgroundColor:ye?`${ue.colour}15`:"transparent",color:ye?ue.colour:""},children:[E.jsx("span",{className:Ye.sideEmoji,children:ue.emoji})," ",E.jsx("span",{className:Ye.navItemLabel,children:f&&ue.name}),Y(R.name,ue.name)]},ue.name)}),R.allowAbsence!==!1&&E.jsxs("button",{className:`${Ye.sideNavItem} ${Ye.sideNavItemSub} ${N==="Absence"&&t===R.name?Ye.sideNavItemActive:""}`,onClick:()=>{V(`/app/roster/${R.name}/Absence`),l(Vl(!1))},style:{borderLeft:N==="Absence"&&t===R.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:N==="Absence"&&t===R.name?"var(--background-toggle-off-transparent)":"transparent"},children:[E.jsx("span",{className:Ye.sideEmoji,children:""})," ",E.jsx("span",{className:Ye.navItemLabel,children:f&&"Absence"}),Y(R.name,"Absence")]})]})]},R.name)}):bA.filter(C=>!C.adminOnly).map(C=>E.jsxs("button",{className:`${Ye.sideNavItem} ${N===C.id?Ye.sideNavItemActive:""}`,onClick:()=>{V(`/app/settings/${C.id}`),l(Vl(!1))},children:[E.jsx("span",{className:Ye.sideEmoji,children:C.icon})," ",E.jsx("span",{className:Ye.navItemLabel,children:f&&C.label})]},C.id))]})]}),(u==null?void 0:u.isAdmin)&&z===Qt.SETTINGS&&E.jsxs("div",{className:Ye.adminOnlySectionWrapper,children:[E.jsx("div",{className:Ye.sidenavMenuSubheading,children:f&&E.jsx("h4",{children:"Admin Only"})}),bA.filter(C=>C.adminOnly).map(C=>E.jsxs("button",{className:`${Ye.sideNavItem} ${N===C.id?Ye.sideNavItemActive:""}`,onClick:()=>{V(`/app/settings/${C.id}`),l(Vl(!1))},children:[E.jsx("span",{className:Ye.sideEmoji,children:C.icon})," ",E.jsx("span",{className:Ye.navItemLabel,children:f&&C.label})]},C.id))]}),E.jsxs("div",{className:Ye.sidebarFooter,children:[E.jsx(km,{className:Ye.sidebarThemeToggle,iconClassName:Ye.sidebarThemeIcon}),E.jsx(iR,{variant:"sidebar",showText:f})]})]})},JU="_layoutWrapper_ysxiy_1",ZU="_innerWrapper_ysxiy_13",e6="_mainContent_ysxiy_21",Il={layoutWrapper:JU,innerWrapper:ZU,mainContent:e6},t6=()=>{const n=Dn(),e=ko(),t=ai(),i=Ps(),{userData:a}=Pe(N=>N.auth);hU();const{teams:l}=Pe(N=>N.teams),{isMobileSidebarOpen:u,isDesktopSidebarExpanded:f,lastVisitedPaths:m}=Pe(N=>N.ui),p=t.pathname.includes("/settings")?Qt.SETTINGS:t.pathname.includes("/dashboard")?Qt.DASHBOARD:Qt.ROSTER,{teamName:y,positionName:v,section:b}=i,w=v||b||null,M=p!==Qt.DASHBOARD;O.useEffect(()=>{const N=p===Qt.ROSTER&&!y,L=p===Qt.SETTINGS&&!w;if(t.pathname.startsWith("/app/")&&!N&&!L&&p!==Qt.DASHBOARD){const V=t.pathname+t.search;n(e3({tabId:p,path:V}))}},[t.pathname,t.search,p,y,w,n]),O.useEffect(()=>{var U;const N=t.pathname==="/app"||t.pathname==="/app/",L=p===Qt.ROSTER&&!y,V=p===Qt.SETTINGS&&!w;if(N)e(m[Qt.DASHBOARD]||"/app/dashboard",{replace:!0});else if(L){const q=m[Qt.ROSTER];if(q)e(q,{replace:!0});else if((U=a==null?void 0:a.teams)!=null&&U[0]&&l.length>0){const Y=l.find(Q=>Q.name===a.teams[0]);Y&&e(`/app/roster/${Y.name}/All`,{replace:!0})}}else if(V){const q=m[Qt.SETTINGS];e(q||`/app/settings/${jl.PROFILE}`,{replace:!0})}},[p,y,w,a,l,e,t.pathname,t.search,m]);const z=()=>{const N=yv.find(V=>V.id===p),L=N?N.label:"GIG ROSTER";return y&&w?`${y}  ${w}`:y||(w?`${L}  ${w}`:L)};return E.jsxs("div",{className:`${Il.layoutWrapper} ${u?Il.menuOpen:""} ${f?Il.sidebarExpanded:Il.sidebarCollapsed}`,children:[M&&E.jsx(WU,{}),E.jsxs("div",{className:Il.innerWrapper,children:[E.jsx(Y3,{title:z(),hasSideNav:M}),E.jsx("main",{className:Il.mainContent,children:E.jsx(iw,{})}),E.jsx(IU,{})]}),E.jsx(SU,{})]})},vd=(n,e,t)=>{const i=[],a=new Date;a.setHours(0,0,0,0);const l=a.getFullYear(),u=e||l,f=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},p=n.map(w=>m[w]);let y;u===l?y=new Date(a):y=new Date(u,0,1),y.setHours(0,0,0,0);const v=new Date(f,11,31);v.setHours(23,59,59,999);const b=new Date(y);for(;b.getTime()<=v.getTime();)p.includes(b.getDay())&&i.push(new Date(b)),b.setDate(b.getDate()+1);return i.sort((w,M)=>w.getTime()-M.getTime()),i.map(w=>aR(w))},n6=(n,e,t=5)=>{const i=[],a=new Date(e);a.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},u=n.map(m=>l[m]),f=new Date(a);for(;i.length<t;){f.setDate(f.getDate()-1),u.includes(f.getDay())&&i.push(new Date(f));const m=new Date(a);if(m.setFullYear(m.getFullYear()-1),f<m)break}return i.map(m=>aR(m)).sort()},r6={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Ed=or("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=xs(vt,"users"),i=Ba(t,Sm("teams","array-contains",n)),a=await mc(i),l=[];return a.forEach(u=>{l.push(u.data())}),l.sort((u,f)=>(u.name||"").localeCompare(f.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Td=or("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:i})=>{if(!n||!e)return[];try{const u=i().positions.positions.filter(w=>w.parentId===e),m=[e,...u.map(w=>w.name)].map(w=>`${n}|${w}`),p=xs(vt,"users"),y=Ba(p,Sm("indexedAssignments","array-contains-any",m)),v=await mc(y),b=[];return v.forEach(w=>{b.push(w.data())}),b.sort((w,M)=>(w.name||"").localeCompare(M.name||""))}catch(a){return console.error("Error fetching users:",a),t("Failed to load users.")}}),bd=or("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=sn(vt,"metadata","teams"),i=await dh(t);if(i.exists()){const a=i.data();return(Array.isArray(a.list)?a.list.map(f=>({...f,preferredDays:f.preferredDays||[],positions:f.positions||[]})):[]).find(f=>f.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),fR=Ha({name:"rosterView",initialState:r6,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=n6(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=vd(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,i=vd(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...i]}}},extraReducers:n=>{n.addCase(Td.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Td.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Td.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Ed.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Ed.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Ed.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(bd.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(bd.fulfilled,(e,t)=>{var i;e.currentTeamData=t.payload,(i=t.payload)!=null&&i.preferredDays&&(e.rosterDates=vd(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(bd.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:dR,resetToUpcomingDates:mR,loadNextYearDates:i6}=fR.actions,s6=fR.reducer,a6="_dashboardContainer_y5fm3_1",o6="_dashboardHeader_y5fm3_10",l6="_dashboardHeaderActions_y5fm3_24",c6="_clearPastBtn_y5fm3_32",u6="_eventNameContainer_y5fm3_48",h6="_dashboardEventNameInput_y5fm3_55",f6="_dashboardEventNameInputHasEvent_y5fm3_79",d6="_carouselOuterWrapper_y5fm3_90",m6="_eventsCarouselTrack_y5fm3_98",p6="_eventCardWrapper_y5fm3_112",g6="_peek_y5fm3_123",y6="_active_y5fm3_129",_6="_eventCardDate_y5fm3_135",v6="_dashboardTodayBadge_y5fm3_147",E6="_teamCardsContainer_y5fm3_158",T6="_teamEventCard_y5fm3_166",b6="_dashboardThemeToggle_y5fm3_174",S6="_teamEventHeader_y5fm3_178",A6="_teamCardEmoji_y5fm3_197",w6="_teamCardName_y5fm3_201",C6="_copyRosterBtn_y5fm3_205",R6="_copyRosterBtnSuccess_y5fm3_226",I6="_teamEventDetails_y5fm3_232",x6="_posAssignmentRow_y5fm3_238",N6="_posEmojiLabel_y5fm3_244",D6="_assignedNames_y5fm3_250",O6="_unassigned_y5fm3_256",M6="_meTag_y5fm3_264",P6="_carouselPagination_y5fm3_286",k6="_dashboardEmpty_y5fm3_295",At={dashboardContainer:a6,dashboardHeader:o6,dashboardHeaderActions:l6,clearPastBtn:c6,eventNameContainer:u6,dashboardEventNameInput:h6,dashboardEventNameInputHasEvent:f6,carouselOuterWrapper:d6,eventsCarouselTrack:m6,eventCardWrapper:p6,peek:g6,active:y6,eventCardDate:_6,dashboardTodayBadge:v6,teamCardsContainer:E6,teamEventCard:T6,dashboardThemeToggle:b6,teamEventHeader:S6,teamCardEmoji:A6,teamCardName:w6,copyRosterBtn:C6,copyRosterBtnSuccess:R6,teamEventDetails:I6,posAssignmentRow:x6,posEmojiLabel:N6,assignedNames:D6,unassigned:O6,meTag:M6,carouselPagination:P6,dashboardEmpty:k6},V6=()=>{const n=Dn(),[e,t]=XD(),i=e.get("date"),{userData:a}=Pe(de=>de.auth),{teams:l}=Pe(de=>de.teams),{entries:u,loading:f,initialLoad:m}=Pe(de=>de.roster),{positions:p}=Pe(de=>de.positions),[y,v]=O.useState([]),[b,w]=O.useState(!1),[M,z]=O.useState(null),[N,L]=O.useState(0),[V,U]=O.useState(0),[q,Y]=O.useState(!1),Q=O.useRef(null),A=O.useRef(!1);O.useEffect(()=>{const de=Q.current;if(!de)return;const j=new ResizeObserver(W=>{for(const oe of W){const me=oe.contentRect.width;me>0&&U(me)}});return j.observe(de),()=>j.disconnect()},[f,b,m]);const C=O.useMemo(()=>{const de=Ss();if(!(a!=null&&a.teams)||l.length===0)return[];const j=l.filter(me=>a.teams.includes(me.name)),W=new Set;j.forEach(me=>{vd(me.preferredDays).forEach(Ae=>W.add(Ae))});const oe=Array.from(W).sort();return i&&i<de?[i]:oe.filter(me=>{const _e=me;if(i===_e)return!0;const Ae=u[_e];return Ae?j.some(Oe=>{var nt;const qe=((nt=Ae.teams)==null?void 0:nt[Oe.name])||{};return Object.values(qe).some(Tn=>Array.isArray(Tn)&&Tn.length>0)}):!1})},[a,l,u,i]);O.useEffect(()=>{if(C.length===0||!Q.current||f||V===0)return;const de=Q.current,j=(W,oe)=>{const me=de.offsetWidth||V;me!==0&&(de.style.scrollSnapType="none",de.scrollTo({left:me*W,behavior:oe?"smooth":"auto"}),setTimeout(()=>{de&&(de.style.scrollSnapType="x mandatory"),Y(!0)},50),L(W),A.current=!0)};if(i){const W=C.findIndex(oe=>oe===i);if(W>=0){const oe=Math.round(de.scrollLeft/(de.offsetWidth||V||1));!A.current||oe!==W?requestAnimationFrame(()=>{j(W,A.current)}):Y(!0)}else Y(!0)}else de.scrollLeft!==0?j(0,!0):Y(!0),A.current=!0},[i,C,f,V]);const R=()=>{t({},{replace:!0})};O.useEffect(()=>{(async()=>{if(!(!(a!=null&&a.teams)||a.teams.length===0)){w(!0);try{const j=xs(vt,"users"),W=Ba(j,Sm("teams","array-contains-any",a.teams)),oe=await mc(W),me=[];oe.forEach(_e=>me.push(_e.data())),v(me)}catch(j){console.error("Error fetching users for dashboard:",j)}finally{w(!1)}}})()},[a==null?void 0:a.teams]);const k=O.useCallback(de=>{if(!de||!(a!=null&&a.teams)||l.length===0)return null;const W=u[de],_e=l.filter(Ae=>a.teams.includes(Ae.name)).sort((Ae,Oe)=>{const qe=a.teams.indexOf(Ae.name),nt=a.teams.indexOf(Oe.name);return qe-nt}).map(Ae=>{var Sr;const Oe=((Sr=W==null?void 0:W.teams)==null?void 0:Sr[Ae.name])||{},qe=[],nt=Ae.positions.map(Et=>Et.name);let Tn=0;return nt.forEach(Et=>{const en=p.find(Ee=>Ee.name===Et),bn=[];Object.entries(Oe).forEach(([Ee,Ue])=>{if(Array.isArray(Ue)&&Ue.includes(Et)){const Xe=y.find(He=>He.email===Ee);Xe?bn.push(Xe):bn.push({email:Ee,name:Ee}),Tn++}});const oi=[...bn].sort((Ee,Ue)=>en!=null&&en.sortByGender&&Ee.gender!==Ue.gender?Ee.gender==="Male"?-1:Ue.gender==="Male"?1:(Ee.gender||"").localeCompare(Ue.gender||""):(Ee.name||"").localeCompare(Ue.name||""));qe.push({posName:Et,emoji:(en==null?void 0:en.emoji)||"",assignedUsers:oi.map(Ee=>({name:Ee.name||Ee.email||"Unknown",isMe:Ee.email===a.email}))})}),{teamName:Ae.name,teamEmoji:Ae.emoji,positions:qe,hasAssignments:Tn>0}}).filter(Ae=>Ae.hasAssignments);return _e.length>0?_e:null},[u,a,l,p,y]),P=(de,j,W,oe,me)=>{const Ae=new Date(de).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"});let Oe="";me&&(Oe+=` ${me} 
`),Oe+=`${W} ${j}  ${Ae}
`,oe.forEach(qe=>{const nt=qe.assignedUsers.length>0?qe.assignedUsers.map(Tn=>Tn.name).join(", "):"-";Oe+=`${qe.emoji}: ${nt}
`}),navigator.clipboard.writeText(Oe).then(()=>{const qe=`${de}-${j}`;z(qe),setTimeout(()=>z(null),2e3)})},F=()=>{if(!Q.current)return;const de=Q.current,j=de.offsetWidth,W=Math.round(de.scrollLeft/j);if(W!==N&&C[W]){L(W);const oe=C[W];if(i!==oe){const me=Ss();W===0&&me===oe?t({},{replace:!0}):t({date:oe},{replace:!0})}}},x=(de,j)=>{const W={date:de,eventName:j};n(uR(W)),n(Pu(W))};if(f&&!m||b)return E.jsx(yc,{});if(C.length===0)return E.jsxs("div",{className:At.dashboardEmpty,children:[E.jsx("h2",{children:"No upcoming events found"}),E.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const ue=C[N],ye=Ss(),$=ue&&ue<ye,he=$?"Previous Event":"Upcoming Events",ge=de=>new Date(de).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),ke=(de,j=!1)=>{const W=k(de);if(!W)return null;const oe=u[de],me=oe==null?void 0:oe.eventName;return E.jsx("div",{className:At.teamCardsContainer,children:W.map(_e=>{const Ae=M===`${de}-${_e.teamName}`;return E.jsxs("div",{className:At.teamEventCard,children:[E.jsxs("div",{className:At.teamEventHeader,children:[E.jsxs("h3",{children:[E.jsx("span",{className:At.teamCardEmoji,children:_e.teamEmoji}),E.jsx("span",{className:At.teamCardName,children:_e.teamName})]}),!j&&E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[E.jsx(km,{className:At.dashboardThemeToggle}),E.jsx("button",{className:`${At.copyRosterBtn} ${Ae?At.copyRosterBtnSuccess:""}`,onClick:()=>P(de,_e.teamName,_e.teamEmoji,_e.positions,me),title:"Copy to clipboard",children:Ae?E.jsxs(E.Fragment,{children:[E.jsx(Oj,{size:16})," Copied"]}):E.jsxs(E.Fragment,{children:[E.jsx(Pj,{size:16})," Copy"]})})]})]}),E.jsx("div",{className:At.teamEventDetails,children:_e.positions.map(Oe=>E.jsxs("div",{className:At.posAssignmentRow,children:[E.jsx("span",{className:At.posEmojiLabel,title:Oe.posName,children:Oe.emoji}),E.jsx("span",{className:`${At.assignedNames} ${Oe.assignedUsers.length===0?At.unassigned:""}`,children:Oe.assignedUsers.length>0?Oe.assignedUsers.map((qe,nt)=>E.jsxs(O.Fragment,{children:[qe.name,qe.isMe&&E.jsx("span",{className:At.meTag,children:"Me"}),nt<Oe.assignedUsers.length-1?", ":""]},`${qe.name}-${nt}`)):"Unassigned"})]},Oe.posName))})]},_e.teamName)})})};return E.jsxs("div",{className:At.dashboardContainer,children:[E.jsxs("div",{className:At.dashboardHeader,children:[E.jsx("h1",{children:he}),E.jsx("div",{className:At.dashboardHeaderActions,children:$&&E.jsx("button",{className:At.clearPastBtn,onClick:R,children:"Reset to upcoming"})})]}),E.jsx("div",{className:At.carouselOuterWrapper,style:{opacity:q?1:0,transition:"opacity 0.3s ease-in-out"},children:E.jsx("div",{className:At.eventsCarouselTrack,ref:Q,onScroll:F,children:C.map((de,j)=>{const oe=u[de],me=(oe==null?void 0:oe.eventName)||"";return E.jsxs("div",{className:`${At.eventCardWrapper} ${j===N?At.active:At.peek}`,children:[E.jsx("div",{className:At.eventNameContainer,children:E.jsx("input",{type:"text",className:`${At.dashboardEventNameInput} ${me?At.dashboardEventNameInputHasEvent:""}`,placeholder:"Event name (e.g. Easter Sunday)",value:me,onChange:_e=>x(de,_e.target.value),disabled:j!==N})}),E.jsxs("div",{className:At.eventCardDate,children:[ge(de),de===ye&&E.jsx("span",{className:At.dashboardTodayBadge,children:"TODAY"})]}),ke(de,j!==N)]},de)})})}),E.jsxs("div",{className:At.carouselPagination,children:[N+1," / ",C.length]})]})},L6="_button_4hh4s_1",j6="_primary_4hh4s_26",U6="_secondary_4hh4s_31",z6="_icon_4hh4s_42",B6="_small_4hh4s_48",Jf={button:L6,primary:j6,secondary:U6,delete:"_delete_4hh4s_36",icon:z6,small:B6},sr=({variant:n="primary",size:e="medium",isIcon:t=!1,className:i="",children:a,...l})=>{const u=[Jf.button,Jf[n],e==="small"?Jf.small:"",t?Jf.icon:"",i].filter(Boolean).join(" ");return E.jsx("button",{className:u,...l,children:a})},H6="_pillGroup_ti99d_1",F6="_pillGroupNowrap_ti99d_9",q6="_pill_ti99d_1",G6="_pillActive_ti99d_35",$6="_pillDisabled_ti99d_40",K6="_pillText_ti99d_61",Ul={pillGroup:H6,pillGroupNowrap:F6,pill:q6,pillActive:G6,pillDisabled:$6,pillText:K6},Yl=({children:n,nowrap:e})=>E.jsx("div",{className:`${Ul.pillGroup} ${e?Ul.pillGroupNowrap:""}`,children:n}),br=({colour:n,isDropdown:e,isActive:t,isDisabled:i,minWidth:a,onClick:l,children:u})=>{const[f,m]=O.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),E.jsxs("div",{className:`${Ul.pill} ${Ul.pillText} ${t?Ul.pillActive:""} ${i?Ul.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:a?`${a}px`:"fit-content"},onClick:p=>{i||(m(y=>!y),l&&l(p))},children:[u,e&&E.jsx(ZC,{style:{rotate:f?"90deg":"0"}})]})},Y6="_settingsSection_5m9oe_1",Q6="_sectionLabel_5m9oe_7",X6="_subSectionGroup_5m9oe_17",W6="_subSectionHeader_5m9oe_21",J6="_formGroup_5m9oe_31",Z6="_summaryButton_5m9oe_35",e9="_summaryPrimary_5m9oe_57",t9="_summarySeparator_5m9oe_66",n9="_summarySecondary_5m9oe_73",r9="_summaryEmoji_5m9oe_78",i9="_remainingCount_5m9oe_82",_n={settingsSection:Y6,sectionLabel:Q6,subSectionGroup:X6,subSectionHeader:W6,formGroup:J6,summaryButton:Z6,summaryPrimary:e9,summarySeparator:t9,summarySecondary:n9,summaryEmoji:r9,remainingCount:i9},pR=({selectedTeams:n,teamPositions:e,onToggleTeam:t,onTogglePosition:i,onMoveTeam:a,availableTeams:l,globalPositions:u})=>E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:_n.formGroup,children:[E.jsx("label",{className:_n.sectionLabel,children:"Teams"}),E.jsx(Yl,{children:l.map(f=>{const m=n.includes(f.name);return E.jsxs(br,{onClick:()=>t(f.name),isActive:m,children:[E.jsx("span",{children:f.emoji})," ",f.name]},f.name)})})]}),n.length>0&&E.jsxs("div",{className:_n.settingsSection,children:[E.jsx("label",{className:_n.sectionLabel,children:"Positions per Team"}),n.map((f,m)=>{var v;const p=l.find(b=>b.name===f);if(!p)return null;const y=((v=p.positions)==null?void 0:v.filter(b=>!b.parentId))||[];return E.jsxs("div",{className:_n.subSectionGroup,children:[E.jsxs("div",{className:_n.subSectionHeader,style:{justifyContent:"space-between"},children:[E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[p.emoji," ",p.name]}),a&&E.jsxs("div",{style:{display:"flex",gap:"4px"},children:[E.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"up"),disabled:m===0,children:""}),E.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(f,"down"),disabled:m===n.length-1,children:""})]})]}),y.length>0?E.jsx(Yl,{children:y.map(b=>{var N;const w=u.find(L=>L.name===b.name),M=!!(w!=null&&w.isCustom),z=(N=e[f])==null?void 0:N.includes(b.name);return E.jsxs(br,{onClick:()=>i(f,b.name),isActive:z,isDisabled:M,colour:b.colour,children:[E.jsx("span",{children:b.emoji})," ",b.name]},b.name)})}):E.jsx("p",{style:{fontSize:"0.8rem",color:"var(--color-text-dim)",margin:"8px 0"},children:"No assignable positions for this team."})]},f)})]})]}),s9="_rosterSaveFooter_1ce1v_1",a9="_saveFooterContent_1ce1v_23",o9="_changesLabel_1ce1v_32",l9="_saveFooterActions_1ce1v_37",c9="_saveBtn_1ce1v_42",u9="_cancelBtn_1ce1v_57",h9="_sidebarCollapsed_1ce1v_77",f9="_noSidebar_1ce1v_81",ga={rosterSaveFooter:s9,saveFooterContent:a9,changesLabel:o9,saveFooterActions:l9,saveBtn:c9,cancelBtn:u9,sidebarCollapsed:h9,noSidebar:f9},Lm=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:i,saveText:a="Save",discardText:l="Discard",hasSideNav:u=!0})=>{const{isDesktopSidebarExpanded:f}=Pe(p=>p.ui),m=[ga.rosterSaveFooter,u?"":ga.noSidebar,!f&&u?ga.sidebarCollapsed:""].filter(Boolean).join(" ");return E.jsx("div",{className:m,children:E.jsxs("div",{className:ga.saveFooterContent,children:[E.jsx("span",{className:ga.changesLabel,children:n}),E.jsxs("div",{className:ga.saveFooterActions,children:[E.jsx("button",{className:ga.cancelBtn,onClick:t,disabled:i,children:l}),E.jsx("button",{className:ga.saveBtn,onClick:e,disabled:i,children:i?"Saving...":a})]})]})})},d9="_formGroup_163vy_1",m9="_formInput_163vy_16",p9="_formSelect_163vy_52",g9="_colorInput_163vy_86",y9="_fieldHint_163vy_104",Es={formGroup:d9,formInput:m9,formSelect:p9,colorInput:g9,fieldHint:y9},_9="_profileCard_1qei9_1",v9="_profileReadonly_1qei9_11",E9="_actionContainer_1qei9_59",_y={profileCard:_9,profileReadonly:v9,actionContainer:E9},gR=({className:n})=>{const e=Dn(),{userData:t,firebaseUser:i}=Pe(N=>N.auth),{teams:a}=Pe(N=>N.teams),{positions:l}=Pe(N=>N.positions),[u,f]=O.useState({name:"",gender:"",isActive:!0,teams:[],teamPositions:{}}),[m,p]=O.useState("idle");O.useEffect(()=>{!t||m==="saving"||f(N=>!(N.name!==(t.name||"")||N.gender!==(t.gender||"")||N.isActive!==(t.isActive??!0)||JSON.stringify(N.teams)!==JSON.stringify(t.teams||[])||JSON.stringify(N.teamPositions)!==JSON.stringify(t.teamPositions||{}))||m==="idle"?{name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}}:N)},[t,m]);const y=O.useMemo(()=>{if(!t)return!1;const N={name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}};return JSON.stringify(u)!==JSON.stringify(N)},[u,t]),v=async()=>{if(i){p("saving");try{await e(gd({uid:i.uid,data:u})).unwrap(),p("success"),setTimeout(()=>p("idle"),2e3)}catch(N){console.error(N),p("idle")}}},b=()=>{t&&f({name:t.name||"",gender:t.gender||"",isActive:t.isActive??!0,teams:t.teams||[],teamPositions:t.teamPositions||{}})},w=N=>{f(L=>{const V=L.teams.includes(N),U=V?L.teams.filter(Y=>Y!==N):[...L.teams,N],q={...L.teamPositions};return V?delete q[N]:q[N]||(q[N]=[]),{...L,teams:U,teamPositions:q}})},M=(N,L)=>{f(V=>{const U=V.teamPositions[N]||[],q=U.includes(L)?U.filter(Y=>Y!==L):[...U,L];return{...V,teamPositions:{...V.teamPositions,[N]:q}}})},z=(N,L)=>{f(V=>{const U=V.teams.indexOf(N);if(U===-1)return V;const q=L==="up"?U-1:U+1;if(q<0||q>=V.teams.length)return V;const Y=[...V.teams];return[Y[U],Y[q]]=[Y[q],Y[U]],{...V,teams:Y}})};return t?E.jsxs("section",{className:`${_y.profileCard} ${n||""}`,children:[E.jsx("div",{className:_y.profileReadonly,children:E.jsxs("p",{children:[E.jsx("strong",{children:"Email:"})," ",t.email]})}),E.jsxs("div",{className:Es.formGroup,children:[E.jsx("label",{children:"Name"}),E.jsx("input",{type:"text",value:u.name,onChange:N=>f(L=>({...L,name:N.target.value})),className:Es.formInput})]}),E.jsxs("div",{className:Es.formGroup,children:[E.jsx("label",{children:"Gender"}),E.jsx(Yl,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(N=>E.jsx(br,{colour:N.colour,onClick:()=>f(L=>({...L,gender:N.value})),isActive:u.gender===N.value,children:N.value},N.value))})]}),E.jsx(pR,{selectedTeams:u.teams,teamPositions:u.teamPositions,onToggleTeam:w,onTogglePosition:M,onMoveTeam:z,availableTeams:a,globalPositions:l}),E.jsxs("div",{className:Es.formGroup,children:[E.jsx("label",{children:"Availability Status"}),E.jsx(br,{colour:u.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>f(N=>({...N,isActive:!N.isActive})),isActive:!0,children:u.isActive?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),E.jsx("p",{className:Es.fieldHint,children:"Turn off if you want to be hidden from the roster."})]}),E.jsx("div",{className:_y.actionContainer,children:E.jsx(sr,{variant:"delete",onClick:()=>Oo.signOut(),children:"Logout"})}),y&&E.jsx(Lm,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:v,onCancel:b,isSaving:m==="saving"})]}):E.jsx("div",{children:"Loading profile..."})},T9="_guestContainer_1m4dd_1",b9="_profileCardOverride_1m4dd_14",S9="_guestHeader_1m4dd_21",A9="_brandTitle_1m4dd_28",w9="_guestThemeToggleContainer_1m4dd_32",C9="_pendingLabel_1m4dd_38",xl={guestContainer:T9,profileCardOverride:b9,guestHeader:S9,brandTitle:A9,guestThemeToggleContainer:w9,pendingLabel:C9},R9=()=>{const{userData:n,firebaseUser:e,loading:t}=Pe(i=>i.auth);return t?E.jsx(sc,{}):e?n?n.isApproved?E.jsx(wa,{to:"/app",replace:!0}):E.jsxs("div",{className:xl.guestContainer,children:[E.jsxs("header",{className:xl.guestHeader,children:[E.jsx("h2",{className:xl.brandTitle,children:"God is Good"}),E.jsx("p",{className:xl.pendingLabel,children:"PENDING ADMIN APPROVAL"}),E.jsx("div",{className:xl.guestThemeToggleContainer,children:E.jsx(km,{})})]}),E.jsx(gR,{className:xl.profileCardOverride})]}):E.jsx(sc,{}):E.jsx(wa,{to:"/login",replace:!0})},I9="_loginContainer_12x6v_1",x9="_loginHeader_12x6v_12",N9="_brandTitle_12x6v_16",D9="_brandSubtitle_12x6v_24",O9="_loginButtonContainer_12x6v_33",M9="_loginButton_12x6v_33",P9="_google_12x6v_57",go={loginContainer:I9,loginHeader:x9,brandTitle:N9,brandSubtitle:D9,loginButtonContainer:O9,loginButton:M9,google:P9},k9=()=>{const{firebaseUser:n,loading:e}=Pe(i=>i.auth),t=()=>pV(Oo,uL);return e?null:n?E.jsx(wa,{to:"/",replace:!0}):E.jsxs("div",{className:go.loginContainer,children:[E.jsxs("header",{className:go.loginHeader,children:[E.jsx("h1",{className:go.brandTitle,children:"God is Good"}),E.jsx("p",{className:go.brandSubtitle,children:"Worship Team Roster"})]}),E.jsx("div",{className:go.loginButtonContainer,children:E.jsxs("button",{onClick:t,className:`${go.loginButton} ${go.google}`,children:[E.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},jm=()=>{const n=Dn(),e=ko(),{teamName:t,positionName:i}=Ps(),{userData:a}=Pe(Ee=>Ee.auth),{users:l,allTeamUsers:u,rosterDates:f,currentTeamData:m,loadingUsers:p,loadingTeam:y,loadingAllTeamUsers:v,error:b}=Pe(Ee=>Ee.rosterView),{entries:w,syncing:M,loading:z,initialLoad:N,error:L}=Pe(Ee=>Ee.roster),{positions:V,isDirty:U}=Pe(Ee=>Ee.positions),q=Pe(Ee=>Ee.teams),Y=O.useMemo(()=>(q==null?void 0:q.teams)||[],[q==null?void 0:q.teams]),{hiddenUsers:Q,rosterAllViewMode:A,peekPositionName:C,focusedCell:R}=Pe(Ee=>Ee.ui),k=O.useRef(null),P=U;O.useEffect(()=>{t&&(n(bd(t)),n(Ed(t)))},[t,n]),O.useEffect(()=>{i&&t&&!["Absence","All"].includes(i)&&n(Td({teamName:t,positionName:i}))},[i,t,n]),O.useEffect(()=>{const Ee=Ue=>{k.current&&!k.current.contains(Ue.target)&&n(Cl(null))};return document.addEventListener("mousedown",Ee),()=>document.removeEventListener("mousedown",Ee)},[n]);const F=O.useCallback(Ee=>{!t||!i||n(r3({teamName:t,positionName:i,userEmail:Ee}))},[n,t,i]),x=O.useCallback(()=>n(dR()),[n]),ue=O.useCallback(()=>n(mR()),[n]),ye=O.useCallback(()=>n(i6()),[n]),$=O.useCallback(Ee=>{const Ue=Ee.split("T")[0],Xe=w[Ue];return Xe?Object.values(Xe.teams).some(He=>Object.values(He).some(at=>Array.isArray(at)&&at.length>0)):!1},[w]),he=O.useCallback(Ee=>{$(Ee)&&e(`/app/dashboard?date=${Ee}`)},[$,e]),ge=O.useCallback(()=>{U&&n(pv(V))},[n,V,U]),ke=O.useCallback(()=>{U&&(n(mj()),n($l())),n(Cl(null))},[n,U]),de=O.useCallback((Ee,Ue)=>{const Xe=w[Ee];return!!(Xe&&Xe.absence&&Xe.absence[Ue])},[w]),j=O.useCallback((Ee,Ue)=>{var He,at;const Xe=w[Ee];return((at=(He=Xe==null?void 0:Xe.absence)==null?void 0:He[Ue])==null?void 0:at.reason)||""},[w]),W=O.useCallback(Ee=>{if(!C||!t)return[];const Ue=Ee.split("T")[0],Xe=w[Ue];return!Xe||!Xe.teams[t]?[]:Object.entries(Xe.teams[t]).filter(([,He])=>Array.isArray(He)&&He.includes(C)).map(([He])=>{const at=u.find(qt=>qt.email===He);return(at==null?void 0:at.name)||He})},[t,w,u,C]),oe=O.useMemo(()=>{var Ee;return!t||!i?[]:((Ee=Q[t])==null?void 0:Ee[i])||[]},[Q,t,i]),me=O.useCallback((Ee,Ue)=>{if(!t||!i||i==="Absence"||i==="All")return!1;if(de(Ee,Ue))return!0;const Xe=w[Ee],He=Y.find(rt=>rt.name===t),at=(He==null?void 0:He.maxConflict)||1;if(!Xe||!Xe.teams[t]||!Xe.teams[t][Ue])return!1;const qt=Xe.teams[t][Ue];if(!Array.isArray(qt))return!1;const zr=V.filter(rt=>rt.parentId===i),hn=[i,...zr.map(rt=>rt.name)];return qt.some(rt=>hn.includes(rt))?!1:qt.length>=at},[t,i,de,w,Y,V]),_e=O.useCallback((Ee,Ue,Xe,He)=>{var Fn;if(i==="Absence"||i==="All"||!t||!i)return;if(me(Ee,Ue)){n(Cl({row:Xe,col:He,table:"roster"}));return}n(Cl({row:Xe,col:He,table:"roster"}));const at=w[Ee],qt=((Fn=at==null?void 0:at.teams[t])==null?void 0:Fn[Ue])||[],zr=V.filter(Zn=>Zn.parentId===i),hn=[i,...zr.map(Zn=>Zn.name)],rt=hn.findIndex(Zn=>qt.includes(Zn)),Sn=rt>=0?hn[rt]:null;let On=null;Sn===null?On=hn[0]:rt<hn.length-1?On=hn[rt+1]:On=null;const Br=qt.filter(Zn=>!hn.includes(Zn));On&&Br.push(On);const an={date:Ee,teamName:t,userIdentifier:Ue,updatedAssignments:Br};n(tU(an)),n(yd(an))},[i,t,me,w,V,n]),Ae=O.useCallback((Ee,Ue,Xe,He)=>{n(Cl({row:Xe,col:He,table:"absence"}));const qt=!de(Ee,Ue),zr=w[Ee],hn=[];qt&&zr&&Object.entries(zr.teams).forEach(([Sn,On])=>{Array.isArray(On[Ue])&&On[Ue].length>0&&hn.push(Sn)});const rt={date:Ee,userIdentifier:Ue,isAbsent:qt,clearedTeams:hn};if(qt&&hn.length>0){const Sn=hn.join(", ");n(Co({title:"Clear Existing Assignments?",message:`User is already assigned to: ${Sn}. Marking them as absent will remove these assignments. Continue?`,confirmText:"Mark Absent",onConfirm:()=>{n(gy({date:Ee,userIdentifier:Ue,isAbsent:!0})),n(Kl(rt))}}));return}n(gy({date:Ee,userIdentifier:Ue,isAbsent:qt})),n(Kl(rt))},[de,w,n]),Oe=O.useCallback((Ee,Ue,Xe)=>{const He={date:Ee,userIdentifier:Ue,reason:Xe,isAbsent:!0,clearedTeams:[]};n(gy(He)),n(Kl(He))},[n]),qe=O.useCallback((Ee,Ue)=>{const Xe={date:Ee,eventName:Ue};n(uR(Xe)),n(Pu(Xe))},[n]),nt=O.useCallback(Ee=>{const Ue=Ss(),Xe=Ee.split("T")[0];return Xe<Ue?"past-date":Xe===Ue?"today-date":"future-date"},[]),Tn=O.useMemo(()=>Ss(),[]),Sr=O.useMemo(()=>{const Ee=Ss();return f.length>0&&f[0]<Ee},[f]),Et=O.useMemo(()=>{const Ee=Ss();return f.find(Ue=>Ue.split("T")[0]>=Ee)},[f]),en=p||y||v||z&&!N,bn=b||L,oi=O.useCallback(Ee=>{n(Cl(Ee))},[n]);return{dispatch:n,navigate:e,teamName:t,activePosition:i,userData:a,users:l,allTeamUsers:u,rosterDates:f,currentTeamData:m,entries:w,syncing:M,allPositions:V,allTeams:Y,hiddenUsers:Q,hiddenUserList:oe,rosterAllViewMode:A,focusedCell:R,setFocusedCell:oi,hasDirtyChanges:P,handleToggleVisibility:F,handleLoadPrevious:x,handleResetDates:ue,handleLoadNextYear:ye,handleDateClick:he,handleSave:ge,handleCancel:ke,isUserAbsent:de,getAbsenceReason:j,getPeekAssignedUsers:W,isLoading:en,error:bn,checkHasAssignments:$,getRowClass:nt,todayKey:Tn,hasPastDates:Sr,closestNextDate:Et,containerRef:k,handleCellClick:_e,handleAbsenceClick:Ae,handleAbsenceReasonChange:Oe,handleEventNameChange:qe,isCellDisabled:me}},V9="_topControls_edhcc_1",L9="_topControlsLeft_edhcc_14",j9="_viewToggleBar_edhcc_27",U9="_hiddenMembersBar_edhcc_38",z9="_hiddenMembersLabel_edhcc_50",B9="_hiddenMembersList_edhcc_58",H9="_toggleButtonGap_edhcc_64",F9="_unhideButton_edhcc_68",ps={topControls:V9,topControlsLeft:L9,viewToggleBar:j9,hiddenMembersBar:U9,hiddenMembersLabel:z9,hiddenMembersList:B9,toggleButtonGap:H9,unhideButton:F9},q9=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l})=>{const u=Dn(),f=!e&&i.length>0;return!f&&!n?null:E.jsx("div",{className:ps.topControls,children:E.jsxs("div",{className:ps.topControlsLeft,children:[n&&E.jsxs("div",{className:ps.viewToggleBar,children:[E.jsxs(sr,{variant:t==="user"?"primary":"secondary",size:"small",onClick:()=>u(vA("user")),className:ps.toggleButtonGap,children:[E.jsx(Qj,{size:18})," ",E.jsx("span",{children:"User View"})]}),E.jsxs(sr,{variant:t==="position"?"primary":"secondary",size:"small",onClick:()=>u(vA("position")),className:ps.toggleButtonGap,children:[E.jsx(Lj,{size:18})," ",E.jsx("span",{children:"Position View"})]})]}),f&&E.jsxs("div",{className:ps.hiddenMembersBar,children:[E.jsx("span",{className:ps.hiddenMembersLabel,children:"Hidden Members:"}),E.jsx("div",{className:ps.hiddenMembersList,children:i.map(m=>{const p=a.find(y=>y.email===m);return E.jsxs(sr,{variant:"secondary",size:"small",onClick:()=>l(m),className:ps.unhideButton,children:[(p==null?void 0:p.name)||m," ",E.jsx(_h,{size:14})]},m)})})]})]})})},G9="_rosterTableWrapper_6rlzt_1",$9="_syncIndicator_6rlzt_8",K9="_rosterSection_6rlzt_34",Y9="_rosterTable_6rlzt_1",Q9="_rosterTableError_6rlzt_76",X9="_loadMoreFooter_6rlzt_83",W9="_loadNextYearBtn_6rlzt_90",ya={rosterTableWrapper:G9,syncIndicator:$9,rosterSection:K9,rosterTable:Y9,rosterTableError:Q9,loadMoreFooter:X9,loadNextYearBtn:W9},Um=({isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,users:a,handleToggleVisibility:l,isLoading:u,error:f,syncing:m,renderHeader:p,children:y,onLoadNextYear:v,containerRef:b,focusedCell:w,setFocusedCell:M,rosterDates:z,colCount:N,onCellClick:L,hasDirtyChanges:V,handleSave:U,handleCancel:q})=>{if(O.useEffect(()=>{const Q=A=>{const C=A.target;if(C.tagName==="INPUT"||C.tagName==="TEXTAREA")return;if(A.key==="Escape"){A.preventDefault(),M(null),q&&V&&q();return}if(!w)return;const{row:R,col:k,table:P}=w,F=z.length;switch(A.key){case"ArrowUp":A.preventDefault(),R>0&&M({row:R-1,col:k,table:P});break;case"ArrowDown":A.preventDefault(),R<F-1&&M({row:R+1,col:k,table:P});break;case"ArrowLeft":A.preventDefault(),k>0&&M({row:R,col:k-1,table:P});break;case"ArrowRight":A.preventDefault(),k<N-1&&M({row:R,col:k+1,table:P});break;case"Tab":A.preventDefault(),A.shiftKey?R>0&&M({row:R-1,col:k,table:P}):R<F-1&&M({row:R+1,col:k,table:P});break;case" ":A.preventDefault(),L&&L(R,k);break;case"Enter":V&&U&&(A.preventDefault(),U());break}};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[w,z.length,N,L,U,q,V,M]),u)return E.jsx(yc,{});if(f)return E.jsxs("div",{className:ya.rosterTableError,children:["Error: ",f]});const Y=Object.values(m).some(Q=>Q);return E.jsxs("div",{ref:b,className:ya.rosterTableWrapper,tabIndex:-1,children:[E.jsx(q9,{isAllView:n,isAbsenceView:e,rosterAllViewMode:t,hiddenUserList:i,allUsers:a,onToggleVisibility:l}),Y&&E.jsx("div",{className:ya.syncIndicator,children:"Syncing changes..."}),E.jsxs("div",{className:ya.rosterSection,children:[E.jsxs("table",{className:`${ya.rosterTable} ${e?ya.absenceTable:""}`,children:[p(),E.jsx("tbody",{children:y})]}),E.jsx("div",{className:ya.loadMoreFooter,children:E.jsx("button",{className:ya.loadNextYearBtn,onClick:v,children:"Load Next Year "})})]})]})},a_=()=>E.jsx("th",{style:{width:"8px",minWidth:"8px",maxWidth:"8px",backgroundColor:"var(--border-color-secondary)",padding:"0",border:"none",position:"sticky",top:"0"}}),J9="_rosterTableHeaderCell_15zat_1",Z9="_stickyCol_15zat_10",e5="_dateHeaderContent_15zat_26",t5="_dateHeaderActions_15zat_33",n5="_loadPrevBtn_15zat_38",r5="_resetDatesBtn_15zat_60",i5="_highlightedHeader_15zat_70",Xn={rosterTableHeaderCell:J9,stickyCol:Z9,dateHeaderContent:e5,dateHeaderActions:t5,loadPrevBtn:n5,resetDatesBtn:r5,highlightedHeader:i5},s5="_peekHeader_1yo1s_1",a5="_peekSelector_1yo1s_9",o5="_peekCell_1yo1s_26",l5="_stickyRight_1yo1s_36",_s={peekHeader:s5,peekSelector:a5,peekCell:o5,stickyRight:l5},c5=O.memo(()=>{const n=Dn(),{positionName:e}=Ps(),{peekPositionName:t}=Pe(l=>l.ui),{currentTeamData:i}=Pe(l=>l.rosterView),a=O.useMemo(()=>i?i.positions.filter(l=>l.name!==e):[],[i,e]);return E.jsx("th",{className:`${_s.peekHeader} ${_s.stickyRight}`,children:E.jsxs("select",{className:_s.peekSelector,value:t||"",onChange:l=>n(i3(l.target.value||null)),children:[E.jsx("option",{value:"",children:"Peek Position..."}),a.map(l=>E.jsxs("option",{value:l.name,children:[l.emoji," ",l.name]},l.name))]})})}),zm=O.memo(({showPeek:n,children:e})=>{const t=Dn(),{rosterDates:i}=Pe(f=>f.rosterView),a=O.useMemo(()=>{const f=Ss();return i.length>0&&i[0]<f},[i]),l=()=>t(dR()),u=()=>t(mR());return E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:`${Xn.rosterTableHeaderCell} ${Xn.stickyCol}`,children:E.jsxs("div",{className:Xn.dateHeaderContent,children:["Date",E.jsxs("div",{className:Xn.dateHeaderActions,children:[E.jsx("button",{className:Xn.loadPrevBtn,onClick:l,title:"Load previous dates",children:""}),a&&E.jsx("button",{className:`${Xn.loadPrevBtn} ${Xn.resetDatesBtn}`,onClick:u,title:"Reset dates",children:""})]})]})}),e,n&&E.jsx(c5,{})]})})}),u5=O.memo(({allTeamUsers:n,showPeek:e})=>E.jsxs(zm,{showPeek:e,children:[n.map(t=>E.jsx("th",{className:Xn.rosterTableHeaderCell,children:t.name},t.email)),E.jsx(a_,{})]})),h5="_absentCell_x5xrn_1",f5="_absenceInputContainer_x5xrn_5",d5="_absenceReasonInput_x5xrn_24",m5="_removeAbsenceBtn_x5xrn_36",p5="_absenceRosterCell_x5xrn_57",yu={absentCell:h5,absenceInputContainer:f5,absenceReasonInput:d5,removeAbsenceBtn:m5,absenceRosterCell:p5},g5="_rosterCell_1ufav_1",y5="_clickable_1ufav_7",_5="_disabled_1ufav_16",v5="_focused_1ufav_22",E5="_highlightedCell_1ufav_30",T5="_absentStrike_1ufav_34",b5="_remoteCursorBorder_1ufav_41",S5="_remoteCursorBadge_1ufav_53",A5="_reasonPopover_1ufav_68",w5="_popoverBottom_1ufav_86",C5="_noReason_1ufav_109",xn={rosterCell:g5,clickable:y5,disabled:_5,focused:v5,highlightedCell:E5,absentStrike:T5,remoteCursorBorder:b5,remoteCursorBadge:S5,reasonPopover:A5,popoverBottom:w5,noReason:C5},Xu=O.memo(({type:n,rowIndex:e,isFocused:t,onFocus:i,identifier:a,dateString:l,absent:u,absenceReason:f,isAssignedOnClosestDate:m,content:p,onClick:y,handleAbsenceReasonChange:v,disabled:b})=>{const w=O.useRef(null),{teamName:M}=Ps(),{onlineUsers:z}=Pe(q=>q.presence),{firebaseUser:N}=Pe(q=>q.auth);O.useEffect(()=>{t&&w.current&&(w.current.focus(),w.current.scrollIntoView({block:"nearest",inline:"nearest"}))},[t]);const L=O.useMemo(()=>z.filter(q=>{var Q,A,C;return q.uid!==`${N==null?void 0:N.uid}_${Jd}`&&((Q=q.focus)==null?void 0:Q.date)===l&&((A=q.focus)==null?void 0:A.identifier)===a&&((C=q.focus)==null?void 0:C.teamName)===M}),[z,l,a,M,N==null?void 0:N.uid]),V=[xn.rosterCell,t?xn.focused:"",m?xn.highlightedCell:""],U=()=>L.length===0?null:L.map((q,Y)=>E.jsx("div",{className:xn.remoteCursorBorder,style:{borderColor:q.color,transform:`translate(${Y*2}px, ${Y*2}px)`},children:E.jsx("div",{className:xn.remoteCursorBadge,style:{backgroundColor:q.color},children:q.name})},q.uid));return n==="all-user"?E.jsxs("td",{ref:w,className:[...V,xn.clickable,u?xn.absentStrike:""].filter(Boolean).join(" "),tabIndex:0,onClick:y,onFocus:i,children:[U(),u&&t&&E.jsx("div",{className:`${xn.reasonPopover} ${e===0?xn.popoverBottom:""}`,children:f||E.jsx("span",{className:xn.noReason,children:"No reason provided"})}),u?E.jsx("span",{title:f,children:""}):p]}):n==="all-position"?E.jsxs("td",{ref:w,className:V.filter(Boolean).join(" "),tabIndex:0,onFocus:i,children:[U(),p]}):n==="roster-custom"?E.jsxs("td",{ref:w,className:[...V,xn.clickable].filter(Boolean).join(" "),onClick:y,tabIndex:0,onFocus:i,children:[U(),p]}):n==="roster-user"?E.jsxs("td",{ref:w,className:[...V,b?xn.disabled:xn.clickable,u?xn.absentStrike:""].filter(Boolean).join(" "),onClick:y,tabIndex:0,onFocus:i,children:[U(),u&&t&&E.jsx("div",{className:`${xn.reasonPopover} ${e===0?xn.popoverBottom:""}`,children:f||E.jsx("span",{className:xn.noReason,children:"No reason provided"})}),u?E.jsx("span",{title:f,children:""}):p]}):n==="absence"?E.jsxs("td",{ref:w,className:[...V,xn.clickable,yu.absenceRosterCell,u?yu.absentCell:""].filter(Boolean).join(" "),onClick:y,tabIndex:0,onFocus:i,title:f,children:[U(),u?E.jsxs("div",{className:yu.absenceInputContainer,children:[E.jsx("input",{type:"text",className:yu.absenceReasonInput,value:f,placeholder:"Reason...",maxLength:20,autoFocus:t,onClick:q=>q.stopPropagation(),onChange:q=>v==null?void 0:v(q.target.value)}),E.jsx("button",{className:yu.removeAbsenceBtn,onClick:q=>{q.stopPropagation(),y==null||y()},title:"Mark as present",children:E.jsx(gv,{size:14})})]}):""]}):null}),R5=O.memo(({dateString:n})=>{const{teamName:e}=Ps(),{peekPositionName:t}=Pe(m=>m.ui),{allTeamUsers:i}=Pe(m=>m.rosterView),{entries:a}=Pe(m=>m.roster);if(!t||!e)return E.jsx("td",{className:_s.peekCell});const l=n.split("T")[0],u=a[l];if(!u||!u.teams[e])return E.jsx("td",{className:_s.peekCell});const f=Object.entries(u.teams[e]).filter(([,m])=>Array.isArray(m)&&m.includes(t)).map(([m])=>{const p=i.find(y=>y.email===m);return(p==null?void 0:p.name)||m});return E.jsx("td",{className:`${_s.peekCell} ${_s.stickyRight}`,children:E.jsx("div",{className:_s.peekContent,children:f.map((m,p)=>E.jsxs("span",{className:_s.peekName,children:[m,p<f.length-1?", ":""]},m))})})}),I5="_stickyCol_bin2j_1",x5="_dateCell_bin2j_11",N5="_clickable_bin2j_19",D5="_dateCellContent_bin2j_31",O5="_specialEventDot_bin2j_39",M5="_rosterTodayDot_bin2j_50",P5="_pastDate_bin2j_61",k5="_noData_bin2j_65",V5="_closestNextDateRow_bin2j_77",L5="_todayDate_bin2j_78",ei={stickyCol:I5,dateCell:x5,clickable:N5,dateCellContent:D5,specialEventDot:O5,rosterTodayDot:M5,pastDate:P5,noData:k5,closestNextDateRow:V5,todayDate:L5},Bm=O.memo(({dateString:n,entries:e,onDateClick:t,closestNextDate:i,showPeek:a,children:l})=>{const u=O.useMemo(()=>Ss(),[]),f=n.split("T")[0],m=f===u,p=f<u,y=e[f],v=y==null?void 0:y.eventName,b=O.useMemo(()=>y?Object.values(y.teams).some(M=>Object.values(M).some(z=>z.length>0)):!1,[y]),w=[p?ei.pastDate:"",m?ei.todayDate:ei.futureDate,b?"":ei.noData,v?ei.specialEventRow:"",n===i?ei.closestNextDateRow:""].filter(Boolean).join(" ");return E.jsxs("tr",{className:w,children:[E.jsx("td",{className:`${ei.dateCell} ${ei.stickyCol} ${b?ei.clickable:""}`,onClick:()=>t(n),title:v,children:E.jsxs("div",{className:ei.dateCellContent,children:[v&&E.jsx("span",{className:ei.specialEventDot}),m&&E.jsx("span",{className:ei.rosterTodayDot,title:"Today"}),new Date(n.replace(/-/g,"/")).toLocaleDateString()]})}),l,a&&E.jsx(R5,{dateString:n})]})}),j5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,allTeamUsers:f,handleAbsenceClick:m,handleAbsenceReasonChange:p,isUserAbsent:y,getAbsenceReason:v,showPeek:b})=>E.jsx(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,showPeek:b,children:f.map((w,M)=>E.jsx(Xu,{type:"absence",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===M&&(t==null?void 0:t.table)==="absence",onFocus:()=>i({row:e,col:M,table:"absence"}),identifier:w.email||"",absent:w.email?y(n,w.email):!1,absenceReason:w.email?v(n,w.email):"",onClick:()=>{w.email&&m(n,w.email,e,M)},handleAbsenceReasonChange:z=>{w.email&&p(n,w.email,z)}},w.email))})),U5=()=>{const n=jm(),{allTeamUsers:e,rosterDates:t,entries:i,hiddenUserList:a,closestNextDate:l,handleAbsenceClick:u,handleAbsenceReasonChange:f}=n,m=O.useCallback((y,v)=>{const b=t[y],w=e[v];b&&(w!=null&&w.email)&&u(b,w.email,y,v)},[t,e,u]),p=()=>E.jsx(u5,{allTeamUsers:e,showPeek:!0});return E.jsx(Um,{...n,isAllView:!1,isAbsenceView:!0,hiddenUserList:a,renderHeader:p,onLoadNextYear:n.handleLoadNextYear,colCount:e.length,onCellClick:m,children:t.map((y,v)=>E.jsx(j5,{dateString:y,rowIndex:v,entries:i,closestNextDate:l,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,allTeamUsers:e,handleAbsenceClick:u,handleAbsenceReasonChange:f,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,showPeek:!0},y))})},z5="_allViewPositionHeader_ryktq_1",B5="_allViewPositionName_ryktq_8",H5="_clickableHeader_ryktq_14",vy={allViewPositionHeader:z5,allViewPositionName:B5,clickableHeader:H5},F5=O.memo(({rosterAllViewMode:n,allViewColumns:e,userData:t,currentTeamData:i,teamName:a,navigate:l})=>E.jsx(zm,{children:n==="user"?e.map(u=>{const f=u.id===(t==null?void 0:t.email);return E.jsx("th",{className:`${Xn.rosterTableHeaderCell} ${f?Xn.isMe:""}`,children:E.jsx(Vm,{displayName:u.name,isMe:f})},u.id)}):((i==null?void 0:i.positions)||[]).map(u=>E.jsx("th",{className:`${Xn.rosterTableHeaderCell} ${vy.clickableHeader}`,onClick:()=>l(`/app/roster/${a}/${u.name}`),children:E.jsxs("div",{className:vy.allViewPositionHeader,children:[E.jsx("span",{children:u.emoji}),E.jsx("span",{className:vy.allViewPositionName,children:u.name})]})},u.name))})),q5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,rosterAllViewMode:f,allViewColumns:m,currentTeamData:p,getAllViewUserCellContent:y,getAllViewPositionCellContent:v,getAssignmentsForIdentifier:b,navigate:w,teamName:M,isUserAbsent:z,getAbsenceReason:N})=>E.jsx(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,children:f==="user"?m.map((L,V)=>E.jsx(Xu,{type:"all-user",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===V&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:V,table:"all"}),identifier:L.id||"",absent:L.id?z(n,L.id):!1,absenceReason:L.id?N(n,L.id):"",content:L.id?y(n,L.id):null,onClick:()=>{const U=b(n,L.id);U.length>0&&w(`/app/roster/${M}/${U[0]}`)}},L.id)):((p==null?void 0:p.positions)||[]).map((L,V)=>E.jsx(Xu,{type:"all-position",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===V&&(t==null?void 0:t.table)==="all",onFocus:()=>i({row:e,col:V,table:"all"}),identifier:L.name,content:v(n,L.name)},L.name))})),G5=()=>{const n=jm(),{teamName:e,allTeamUsers:t,currentTeamData:i,allPositions:a,rosterAllViewMode:l,userData:u,rosterDates:f,navigate:m,entries:p,hiddenUserList:y,closestNextDate:v}=n,b=O.useMemo(()=>t.filter(U=>{var Y;return!U.isActive||!e?!1:(((Y=U.teamPositions)==null?void 0:Y[e])||[]).length>0}),[t,e]),w=O.useMemo(()=>{const U=b.map(Q=>({id:Q.email||"",name:Q.name||"",isUser:!0,gender:Q.gender}));if(!i)return U;const q=i.positions.map(Q=>Q.name),Y=Array.from(new Set(a.filter(Q=>q.includes(Q.name)&&Q.isCustom).flatMap(Q=>Q.customLabels||[]).map(Q=>Q.trim()).filter(Q=>Q!==""))).map(Q=>({id:Q,name:Q,isUser:!1}));return[...U,...Y]},[b,i,a]),M=O.useCallback((U,q)=>{const Y=U.split("T")[0],Q=p[Y];if(!Q||!e||!Q.teams[e])return[];let A=Q.teams[e][q]||[];if(!Array.isArray(A)||A.length===0){const C=q.trim(),R=Object.keys(Q.teams[e]).find(k=>k.trim()===C);R&&(A=Q.teams[e][R])}return Array.isArray(A)?A:[]},[p,e]),z=O.useCallback((U,q)=>{const Y=M(U,q);return Y.length===0?"":E.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:Y.map(Q=>{const A=a.find(C=>C.name===Q);return E.jsx("span",{onClick:C=>{C.stopPropagation(),m(`/app/roster/${e}/${Q}`)},title:Q,style:{cursor:"pointer"},children:(A==null?void 0:A.emoji)||""},Q)})})},[M,a,m,e]),N=O.useCallback((U,q)=>{const Y=U.split("T")[0],Q=p[Y];if(!Q||!e)return"";const A=Object.entries(Q.teams[e]||{}).filter(([,C])=>Array.isArray(C)&&C.includes(q));return E.jsx("div",{style:{fontSize:"0.75rem"},children:A.map(([C],R)=>{const k=b.find(x=>x.email===C),P=C===(u==null?void 0:u.email),F=k?k.name:C;return E.jsxs("span",{children:[E.jsx(Vm,{displayName:F,isMe:P}),R<A.length-1?", ":""]},C)})})},[p,e,b,u]),L=O.useCallback((U,q)=>{if(l!=="user")return;const Y=f[U],Q=w[q];if(Y&&(Q!=null&&Q.isUser)&&Q.id){const A=M(Y,Q.id);A.length>0&&m(`/app/roster/${e}/${A[0]}`)}},[l,f,w,M,m,e]),V=()=>E.jsx(F5,{rosterAllViewMode:l,allViewColumns:w,userData:u,currentTeamData:i,teamName:e,navigate:m});return E.jsx(Um,{...n,isAllView:!0,isAbsenceView:!1,hiddenUserList:y,renderHeader:V,onLoadNextYear:n.handleLoadNextYear,colCount:l==="user"?w.length:(i==null?void 0:i.positions.length)||0,onCellClick:L,children:f.map((U,q)=>E.jsx(q5,{dateString:U,rowIndex:q,entries:p,closestNextDate:v,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,rosterAllViewMode:l,allViewColumns:w,currentTeamData:i,getAllViewUserCellContent:z,getAllViewPositionCellContent:N,getAssignmentsForIdentifier:M,navigate:m,teamName:e,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason},U))})},$5="_headerInput_k44bb_1",K5="_headerActions_k44bb_27",Y5="_headerActionBtn_k44bb_34",Q5="_removeHeaderBtn_k44bb_58",X5="_addColumnBtn_k44bb_63",yo={headerInput:$5,headerActions:K5,headerActionBtn:Y5,removeHeaderBtn:Q5,addColumnBtn:X5},W5=O.memo(({currentPosition:n,userData:e,handleUpdateCustomLabel:t,handleMoveCustomLabel:i,handleRemoveCustomLabel:a,handleAddCustomLabel:l,showPeek:u})=>E.jsxs(zm,{showPeek:u,children:[((n==null?void 0:n.customLabels)||[]).map((f,m)=>{var p;return E.jsxs("th",{className:Xn.rosterTableHeaderCell,children:[E.jsx("input",{type:"text",className:yo.headerInput,value:f,placeholder:"New Heading...",readOnly:!(e!=null&&e.isAdmin),onChange:y=>t(m,y.target.value)}),(e==null?void 0:e.isAdmin)&&E.jsxs("div",{className:yo.headerActions,children:[E.jsx("button",{className:yo.headerActionBtn,onClick:()=>i(m,"left"),disabled:m===0,title:"Move Left",children:E.jsx(Rj,{size:12})}),E.jsx("button",{className:`${yo.headerActionBtn} ${yo.removeHeaderBtn}`,onClick:()=>a(m),title:"Remove Column",children:E.jsx(gv,{size:12})}),E.jsx("button",{className:yo.headerActionBtn,onClick:()=>i(m,"right"),disabled:m===(((p=n==null?void 0:n.customLabels)==null?void 0:p.length)||0)-1,title:"Move Right",children:E.jsx(xj,{size:12})})]})]},`custom-${m}`)}),(e==null?void 0:e.isAdmin)&&E.jsx("th",{className:Xn.rosterTableHeaderCell,children:E.jsx("button",{className:yo.addColumnBtn,onClick:l,title:"Add Column",children:E.jsx(_h,{size:16})})}),E.jsx("th",{className:Xn.genderDividerCell})]})),J5=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,currentPosition:f,handleCellClick:m,getCellContent:p,showPeek:y})=>E.jsx(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,showPeek:y,children:((f==null?void 0:f.customLabels)||[]).map((v,b)=>E.jsx(Xu,{type:"roster-custom",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===b&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:b,table:"roster"}),identifier:v||"",content:v&&p(n,v),onClick:()=>{v&&m(n,v,e,b)}},`custom-cell-${b}`))})),Z5=()=>{var U;const n=jm(),{dispatch:e,teamName:t,activePosition:i,allPositions:a,userData:l,rosterDates:u,entries:f,hiddenUserList:m,closestNextDate:p,handleCellClick:y}=n,v=O.useMemo(()=>a.find(q=>q.name===i),[a,i]),b=O.useCallback((q,Y)=>{if(!v||!i)return;const Q=[...v.customLabels||[]];Q[q]=Y,e(Xf({positionName:i,labels:Q}))},[e,v,i]),w=O.useCallback((q,Y)=>{if(!v||!i)return;const Q=[...v.customLabels||[]],A=Y==="left"?q-1:q+1;if(A<0||A>=Q.length)return;const C=Q[q];Q[q]=Q[A],Q[A]=C,e(Xf({positionName:i,labels:Q}))},[e,v,i]),M=O.useCallback(q=>{if(!v||!i)return;const Y=[...v.customLabels||[]];Y.splice(q,1),e(Xf({positionName:i,labels:Y}))},[e,v,i]),z=O.useCallback(()=>{if(!v||!i)return;const q=v.customLabels||[];e(Xf({positionName:i,labels:[...q,""]}))},[e,v,i]),N=O.useCallback((q,Y)=>{var C;const Q=u[q],A=(C=v==null?void 0:v.customLabels)==null?void 0:C[Y];Q&&A&&y(Q,A,q,Y)},[u,v,y]),L=O.useCallback((q,Y)=>{var C;const Q=f[q];return!Q||!t?"":(((C=Q.teams[t])==null?void 0:C[Y])||[]).length>0?(v==null?void 0:v.emoji)||"":""},[f,t,v]),V=()=>E.jsx(W5,{currentPosition:v,userData:l,handleUpdateCustomLabel:b,handleMoveCustomLabel:w,handleRemoveCustomLabel:M,handleAddCustomLabel:z,showPeek:!0});return E.jsx(Um,{...n,isAllView:!1,isAbsenceView:!1,hiddenUserList:m,renderHeader:V,onLoadNextYear:n.handleLoadNextYear,colCount:((U=v==null?void 0:v.customLabels)==null?void 0:U.length)||0,onCellClick:N,children:u.map((q,Y)=>E.jsx(J5,{dateString:q,rowIndex:Y,entries:f,closestNextDate:p,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,currentPosition:v,handleCellClick:y,getCellContent:L,showPeek:!0},q))})},ez="_genderLabel_ffjys_1",tz="_clickableHeader_ffjys_8",AA={genderLabel:ez,clickableHeader:tz},nz=O.memo(({sortedUsers:n,genderDividerIndex:e,assignedOnClosestDate:t,currentPosition:i,userData:a,onToggleVisibility:l,showPeek:u})=>E.jsxs(zm,{showPeek:u,children:[n.map((f,m)=>{const p=!!(f.email&&f.email===(a==null?void 0:a.email));return E.jsxs(O.Fragment,{children:[e===m&&E.jsx(a_,{}),E.jsxs("th",{className:`${Xn.rosterTableHeaderCell} ${AA.clickableHeader} ${f.email&&t.includes(f.email)?Xn.highlightedHeader:""}`,onClick:()=>f.email&&l(f.email),title:"Click to hide member",children:[E.jsx(Vm,{displayName:f.name,isMe:p}),(i==null?void 0:i.sortByGender)&&E.jsxs("span",{className:AA.genderLabel,children:["(",f.gender==="Male"?"M":f.gender==="Female"?"F":"?",")"]})]})]},f.email)}),E.jsx(a_,{})]})),rz=O.memo(({dateString:n,rowIndex:e,focusedCell:t,setFocusedCell:i,entries:a,onDateClick:l,closestNextDate:u,handleCellClick:f,getCellContent:m,sortedUsers:p,genderDividerIndex:y,isCellDisabled:v,isUserAbsent:b,getAbsenceReason:w,assignedOnClosestDate:M,showPeek:z})=>E.jsxs(Bm,{dateString:n,entries:a,onDateClick:l,closestNextDate:u,showPeek:z,children:[p.map((N,L)=>E.jsxs(O.Fragment,{children:[y===L&&E.jsx("td",{style:{width:"8px",background:"var(--border-color-secondary)"}}),E.jsx(Xu,{type:"roster-user",dateString:n,rowIndex:e,isFocused:(t==null?void 0:t.row)===e&&(t==null?void 0:t.col)===L&&(t==null?void 0:t.table)==="roster",onFocus:()=>i({row:e,col:L,table:"roster"}),identifier:N.email||"",disabled:N.email?v(n,N.email):!1,absent:N.email?b(n,N.email):!1,absenceReason:N.email?w(n,N.email):"",isAssignedOnClosestDate:!!(n===u&&N.email&&M.includes(N.email)),content:N.email?m(n,N.email):null,onClick:()=>{N.email&&!v(n,N.email)&&f(n,N.email,e,L)}})]},N.email)),E.jsx("td",{style:{width:"8px",background:"var(--border-color-secondary)"}})]})),iz=()=>{const n=jm(),{teamName:e,activePosition:t,users:i,allPositions:a,rosterDates:l,closestNextDate:u,entries:f,hiddenUserList:m,userData:p,handleCellClick:y}=n,v=O.useMemo(()=>a.find(V=>V.name===t),[a,t]),b=O.useMemo(()=>{const V=i.filter(U=>U.email&&!m.includes(U.email)&&U.isActive);return v!=null&&v.sortByGender?V.sort((U,q)=>U.gender===q.gender?(U.name||"").localeCompare(q.name||""):U.gender==="Male"?-1:q.gender==="Male"?1:(U.gender||"").localeCompare(q.gender||"")):V},[i,v,m]),w=O.useMemo(()=>{if(!(v!=null&&v.sortByGender)||b.length===0)return-1;const V=b.findIndex(U=>U.gender==="Female");return V>0&&V<b.length?V:-1},[v,b]),M=O.useMemo(()=>{if(!u||!e||!t)return[];const V=u.split("T")[0],U=f[V];if(!U||!U.teams[e])return[];const q=a.filter(Q=>Q.parentId===t),Y=[t,...q.map(Q=>Q.name)];return Object.entries(U.teams[e]).filter(([,Q])=>Q.some(A=>Y.includes(A))).map(([Q])=>Q)},[u,e,t,f,a]),z=O.useCallback((V,U)=>{const q=l[V],Y=b[U];q&&(Y!=null&&Y.email)&&y(q,Y.email,V,U)},[l,b,y]),N=O.useCallback((V,U)=>{var A;const q=f[V];if(!q||!e)return"";const Y=((A=q.teams[e])==null?void 0:A[U])||[],Q=[];return Object.entries(q.teams).forEach(([C,R])=>{C!==e&&R[U]&&Q.push({team:C,positions:R[U]})}),Y.length===0&&Q.length===0?"":E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"4px",flexWrap:"wrap"},children:[Y.map(C=>{const R=a.find(k=>k.name===C);return E.jsx("span",{title:`${e}: ${C}`,children:(R==null?void 0:R.emoji)||""},C)}),Q.map(C=>C.positions.map(R=>{const k=a.find(P=>P.name===R);return E.jsx("span",{title:`${C.team}: ${R}`,style:{opacity:.6},children:(k==null?void 0:k.emoji)||""},`${C.team}-${R}`)}))]})},[f,e,a]),L=()=>E.jsx(nz,{sortedUsers:b,genderDividerIndex:w,assignedOnClosestDate:M,currentPosition:v,userData:p,onToggleVisibility:n.handleToggleVisibility,showPeek:!0});return E.jsx(Um,{...n,isAllView:!1,isAbsenceView:!1,hiddenUserList:m,renderHeader:L,onLoadNextYear:n.handleLoadNextYear,colCount:b.length,onCellClick:z,children:l.map((V,U)=>E.jsx(rz,{dateString:V,rowIndex:U,entries:f,closestNextDate:u,onDateClick:n.handleDateClick,focusedCell:n.focusedCell,setFocusedCell:n.setFocusedCell,handleCellClick:y,getCellContent:N,sortedUsers:b,genderDividerIndex:w,isCellDisabled:n.isCellDisabled,isUserAbsent:n.isUserAbsent,getAbsenceReason:n.getAbsenceReason,assignedOnClosestDate:M,showPeek:!0},V))})},sz="_rosterPage_j93zt_1",az={rosterPage:sz},oz=()=>{const{positionName:n}=Ps(),{positions:e}=Pe(a=>a.positions),t=e.find(a=>a.name===n),i=()=>n==="All"?E.jsx(G5,{}):n==="Absence"?E.jsx(U5,{}):t!=null&&t.isCustom?E.jsx(Z5,{}):E.jsx(iz,{});return E.jsx("div",{className:az.rosterPage,children:i()})},lz="_appTableContainer_1wf07_1",cz="_appTable_1wf07_1",uz="_colorPickerGroup_1wf07_50",hz="_stickyCol_1wf07_60",Wu={appTableContainer:lz,appTable:cz,colorPickerGroup:uz,stickyCol:hz},fz=({text:n,textAlign:e="left",width:t,minWidth:i})=>E.jsx("th",{className:Wu.stickyCol,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:i?`${i}px`:"auto"},children:n}),Wt=({isSticky:n=!1,textAlign:e="left",className:t,children:i})=>E.jsx("td",{style:{textAlign:e,display:e==="center"?"table-cell":void 0},className:`${t||""} ${n?Wu.stickyCol:""}
`,children:E.jsx("div",{style:{display:"flex",justifyContent:e==="center"?"center":e==="right"?"flex-end":"flex-start",alignItems:"center",gap:"8px",height:"100%"},children:i})}),ri=({name:n,value:e,placeholder:t,type:i="text",isSticky:a,isReadOnly:l=!1,isChild:u=!1,onChange:f})=>E.jsxs(Wt,{isSticky:a,children:[u&&E.jsx(eR,{}),E.jsx("input",{name:n,className:Es.formInput,type:i,placeholder:t,value:e,onChange:f,readOnly:l})]}),yR=({name:n,value:e,placeholder:t,onChange:i})=>E.jsxs(Wt,{className:Wu.colorPickerGroup,children:[E.jsx("input",{name:n,type:"color",className:Es.colorInput,value:e||"#FFFFFF",onChange:i}),E.jsx("input",{name:n,className:Es.formInput,value:e,placeholder:t,onChange:i})]}),vv=({headers:n,children:e})=>E.jsx("div",{className:Wu.appTableContainer,children:E.jsxs("table",{className:Wu.appTable,children:[E.jsx("thead",{children:E.jsx("tr",{children:n.map((t,i)=>E.jsx(fz,{...t},i))})}),E.jsx("tbody",{children:e})]})}),dz=({position:n,index:e,onUpdate:t,onMove:i,onDelete:a,onAddChild:l,isFirst:u,isLast:f})=>E.jsxs("tr",{children:[E.jsx(ri,{name:`name-${e}`,value:n.name,onChange:m=>t(e,"name",m.target.value),isSticky:!0}),E.jsx(Wt,{textAlign:"center",children:n.parentId?E.jsx(eR,{}):E.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[E.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"up"),disabled:u,children:""}),E.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>i(e,"down"),disabled:f,children:""})]})}),E.jsx(ri,{name:`emoji-${e}`,value:n.emoji,onChange:m=>t(e,"emoji",m.target.value)}),E.jsx(yR,{name:`colour-${e}`,value:n.colour,onChange:m=>t(e,"colour",m.target.value)}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:n.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.sortByGender,onClick:()=>t(e,"sortByGender",!n.sortByGender),isDisabled:n.isCustom,children:n.sortByGender?"YES":"NO"})}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:n.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:n.isCustom,onClick:()=>t(e,"isCustom",!n.isCustom),children:n.isCustom?"YES":"NO"})}),E.jsx(Wt,{textAlign:"center",children:!n.parentId&&E.jsxs(sr,{variant:"secondary",size:"small",onClick:()=>l(n.name),title:"Add Child Position",children:[E.jsx(_h,{size:14,style:{marginRight:"4px"}}),"Add"]})}),E.jsx(Wt,{textAlign:"center",children:E.jsxs(sr,{variant:"delete",size:"small",onClick:()=>a(e),children:[E.jsx(tR,{size:14,style:{marginRight:"4px"}}),"Delete"]})})]}),mz="_settingsContainer_w7sc3_1",pz="_managementWrapper_w7sc3_13",Ql={settingsContainer:mz,managementWrapper:pz},Ey={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},gz=()=>{const n=Dn(),{positions:e,loading:t}=Pe(L=>L.positions),[i,a]=O.useState(e),[l,u]=O.useState(Ey),[f,m]=O.useState("idle"),p=O.useMemo(()=>{const L=V=>V.map(U=>({name:U.name||"",emoji:U.emoji||"",colour:U.colour||"",parentId:U.parentId||void 0,sortByGender:!!U.sortByGender,isCustom:!!U.isCustom}));return JSON.stringify(L(i))!==JSON.stringify(L(e))},[i,e]);O.useEffect(()=>{a(e)},[e]);const y=(L,V,U)=>{const q=[...i];q[L]={...q[L],[V]:U},a(q)},v=(L,V)=>{const U=[...i],q=U[L],Y=q.parentId,Q=A=>{const C=U[A];if(!C)return{block:[],startIndex:-1,endIndex:-1};const R=[],k=[C],P=new Set;let F=A,x=A,ue=0;for(;ue<k.length;){const $=k[ue++];P.has($.name)||(P.add($.name),R.push($),U.forEach((he,ge)=>{he.parentId===$.name&&!P.has(he.name)&&(k.push(he),F=Math.min(F,ge),x=Math.max(x,ge))}))}return{block:R,startIndex:F,endIndex:x}};if(Y){const A=U.filter(ue=>ue.parentId===Y),R=A.findIndex(ue=>ue.name===q.name)+(V==="up"?-1:1);if(R<0||R>=A.length)return;const k=A[R],P=U.indexOf(q),F=U.indexOf(k);if(P===-1||F===-1)return;const x=[...U];x[P]=k,x[F]=q,a(x)}else{const A=Q(L),{block:C,startIndex:R,endIndex:k}=A;if(!C||C.length===0)return;if(V==="up"){if(R===0)return;let P=R-1;for(;P>=0&&U[P].parentId;)P--;if(P<0)return;const F=Q(P),{block:x,startIndex:ue}=F;if(!x||x.length===0)return;const ye=[...U.slice(0,ue),...C,...x,...U.slice(k+1)].filter(Boolean);a(ye)}else{if(k===U.length-1)return;let P=k+1;for(;P<U.length&&U[P].parentId;)P++;if(P>=U.length)return;const F=Q(P),{block:x,startIndex:ue}=F;if(!x||x.length===0)return;const ye=[...U.slice(0,R),...x,...C,...U.slice(ue+x.length)].filter(Boolean);a(ye)}}},b=()=>{if(!l.name.trim()||!l.emoji.trim()){n(Co({title:"Missing Information",message:"Please provide both an emoji and a name.",showCancel:!1}));return}a([...i,l]),u(Ey)},w=L=>{n(Co({title:"Delete Position",message:"Delete this position? This will remove it from the global list, and any associated child positions.",confirmText:"Delete",onConfirm:()=>{const V=i[L];let U=i.filter((q,Y)=>Y!==L);V.parentId||(U=U.filter(q=>q.parentId!==V.name)),a(U)}}))},M=async()=>{m("saving");try{const L=i.map(V=>{const U={name:V.name||"",emoji:V.emoji||"",colour:V.colour||"",sortByGender:!!V.sortByGender,isCustom:!!V.isCustom,customLabels:V.customLabels||[]};return V.parentId&&(U.parentId=V.parentId),U});await n(pv(L)).unwrap(),m("success"),setTimeout(()=>m("idle"),2e3)}catch(L){console.error("Save Error:",L),n(Co({title:"Save Error",message:"Error saving: "+(L instanceof Error?L.message:"Unknown error"),showCancel:!1})),m("idle")}},z=L=>{a(V=>{const U={...Ey,parentId:L},q=V.findIndex(A=>A.name===L);if(q===-1)return[...V,U];let Y=q;for(;Y+1<V.length&&V[Y+1].parentId===L;)Y++;return[...V.slice(0,Y+1),U,...V.slice(Y+1)]})},N=()=>{a(e)};return t?E.jsx(yc,{}):E.jsxs("div",{className:Ql.managementWrapper,children:[E.jsxs(vv,{headers:[{text:"Name",minWidth:80,width:200,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Colour",minWidth:100,textAlign:"center"},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Custom Headings",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[i.map((L,V)=>E.jsx(dz,{position:L,index:V,onUpdate:y,onMove:v,onDelete:w,onAddChild:z,isFirst:V===0,isLast:V===i.length-1},`${L.emoji}-${V}`)),E.jsxs("tr",{className:"pos-row-new",children:[E.jsx(ri,{name:"new-name",value:l.name,placeholder:"Position Name",onChange:L=>u({...l,name:L.target.value}),isSticky:!0}),E.jsx(Wt,{textAlign:"center",children:""}),E.jsx(ri,{name:"new-emoji",value:l.emoji,placeholder:"",onChange:L=>u({...l,emoji:L.target.value})}),E.jsx(yR,{name:"new-colour",value:l.colour,placeholder:"#FFFFFF",onChange:L=>u({...l,colour:L.target.value})}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:l.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.sortByGender,onClick:()=>u({...l,sortByGender:!l.sortByGender}),isDisabled:l.isCustom,children:l.sortByGender?"YES":"NO"})}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:l.isCustom?"var(--color-success-dark)":"var(--color-text-dim)",isActive:l.isCustom,onClick:()=>u({...l,isCustom:!l.isCustom}),children:l.isCustom?"YES":"NO"})}),E.jsx(Wt,{textAlign:"center",children:E.jsxs(sr,{onClick:b,disabled:!l.name.trim()||!l.emoji.trim(),children:[E.jsx(_h,{size:16,style:{marginRight:"6px"}}),"Add"]})}),E.jsx(Wt,{textAlign:"center",children:""})]})]}),p&&E.jsx(Lm,{label:"Unsaved position changes",saveText:"Save Positions",onSave:M,onCancel:N,isSaving:f==="saving"})]})},yz=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_R=({isOpen:n,onClose:e,team:t,availablePositions:i,onTogglePosition:a,onToggleDay:l,onToggleAllowAbsence:u})=>{var f;return E.jsxs(_v,{isOpen:n,onClose:e,title:`Edit Team: ${t.name}`,children:[E.jsxs("div",{className:_n.formGroup,children:[E.jsx("label",{className:_n.sectionLabel,children:"Allowed Positions"}),E.jsx(Yl,{children:(f=i==null?void 0:i.filter(m=>!m.parentId))==null?void 0:f.map(m=>{var y;const p=(y=t.positions)==null?void 0:y.some(v=>v.name===m.name);return E.jsxs(br,{colour:m.colour,isActive:p,onClick:()=>a(m),children:[m.emoji," ",m.name]},m.name)})})]}),E.jsxs("div",{className:_n.formGroup,children:[E.jsx("label",{className:_n.sectionLabel,children:"Preferred Days"}),E.jsx(Yl,{children:yz.map(m=>{var y;const p=(y=t.preferredDays)==null?void 0:y.includes(m);return E.jsx(br,{isActive:p,onClick:()=>l(m),children:m},m)})})]}),E.jsxs("div",{className:_n.formGroup,children:[E.jsx("label",{className:_n.sectionLabel,children:"Feature Settings"}),E.jsx(Yl,{children:E.jsxs(br,{isActive:t.allowAbsence!==!1,onClick:()=>u(t.allowAbsence===!1),colour:t.allowAbsence!==!1?"var(--color-success-dark)":"var(--color-text-dim)",children:["Allow Absence: ",t.allowAbsence!==!1?"YES":"NO"]})})]})]})},Ev=({primaryText:n,secondaryText:e,onClick:t})=>E.jsxs("button",{className:_n.summaryButton,onClick:t,type:"button",children:[E.jsx("span",{className:_n.summaryPrimary,children:n}),e&&E.jsxs(E.Fragment,{children:[E.jsx("span",{className:_n.summarySeparator,children:""}),E.jsx("span",{className:_n.summarySecondary,children:e})]})]}),_z=({team:n,teamIndex:e,availablePositions:t,onUpdate:i,onMove:a,onDelete:l,onTogglePosition:u,onToggleDay:f,onToggleAllowAbsence:m,isFirst:p,isLast:y})=>{var z;const[v,b]=O.useState(!1),w=()=>{if(!n.positions||n.positions.length===0)return"No positions";const N=n.positions.slice(0,3).map(V=>E.jsx("span",{className:_n.summaryEmoji,children:V.emoji},V.name)),L=n.positions.length-3;return E.jsxs(E.Fragment,{children:[N,L>0&&E.jsxs("span",{className:_n.remainingCount,children:["+",L]})]})},M=()=>!n.preferredDays||n.preferredDays.length===0?"No days":n.preferredDays.map(N=>N.substring(0,3)).join(", ");return E.jsxs(E.Fragment,{children:[E.jsxs("tr",{children:[E.jsx(ri,{name:`team-name-${e}`,value:n.name,onChange:N=>i(e,"name",N.target.value),isSticky:!0}),E.jsx(Wt,{children:E.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[E.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"up"),disabled:p,children:""}),E.jsx(sr,{variant:"secondary",size:"small",isIcon:!0,onClick:()=>a(e,"down"),disabled:y,children:""})]})}),E.jsx(ri,{name:`team-emoji-${e}`,value:n.emoji,onChange:N=>i(e,"emoji",N.target.value)}),E.jsx(ri,{name:`team-maxConflict-${e}`,value:((z=n.maxConflict)==null?void 0:z.toString())||"1",type:"number",onChange:N=>i(e,"maxConflict",parseInt(N.target.value)||1)}),E.jsx(Wt,{children:E.jsx(Ev,{primaryText:w(),secondaryText:M(),onClick:()=>b(!0)})}),E.jsx(Wt,{children:E.jsxs(sr,{variant:"delete",size:"small",onClick:()=>l(e),children:[E.jsx(tR,{size:14,style:{marginRight:"6px"}}),"Delete"]})})]}),E.jsx(_R,{isOpen:v,onClose:()=>b(!1),team:n,availablePositions:t,onTogglePosition:N=>u(e,N),onToggleDay:N=>f(e,N),onToggleAllowAbsence:N=>m(e,N)})]})},wA={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1,allowAbsence:!0},vz=()=>{var F;const n=Dn(),{teams:e,loading:t}=Pe(x=>x.teams),{positions:i,loading:a}=Pe(x=>x.positions),[l,u]=O.useState(e),[f,m]=O.useState(wA),[p,y]=O.useState("idle"),[v,b]=O.useState(!1),w=O.useMemo(()=>{const x=ue=>ue.map(ye=>({name:ye.name||"",emoji:ye.emoji||"",positions:(ye.positions||[]).map($=>$.name).sort(),preferredDays:[...ye.preferredDays||[]].sort(),maxConflict:ye.maxConflict||1,allowAbsence:ye.allowAbsence!==!1}));return JSON.stringify(x(l))!==JSON.stringify(x(e))},[l,e]);O.useEffect(()=>{u(e)},[e]);const M=(x,ue,ye)=>{const $=[...l];$[x]={...$[x],[ue]:ye},u($)},z=(x,ue)=>{const ye=[...l],$=ue==="up"?x-1:x+1;if($<0||$>=ye.length)return;const he=ye[x];ye[x]=ye[$],ye[$]=he,u(ye)},N=(x,ue)=>{const ye=l.map(($,he)=>{if(he!==x)return $;const ge=$.positions||[],ke=ge.find(de=>de.name===ue.name)?ge.filter(de=>de.name!==ue.name):[...ge,ue];return{...$,positions:ke}});u(ye)},L=(x,ue)=>{const ye=l.map(($,he)=>{if(he!==x)return $;const ge=$.preferredDays||[],ke=ge.includes(ue)?ge.filter(de=>de!==ue):[...ge,ue];return{...$,preferredDays:ke}});u(ye)},V=(x,ue)=>{const ye=l.map(($,he)=>he!==x?$:{...$,allowAbsence:ue});u(ye)},U=x=>{const ue=f.positions||[],ye=ue.some($=>$.name===x.name)?ue.filter($=>$.name!==x.name):[...ue,x];m({...f,positions:ye})},q=x=>{const ue=f.preferredDays||[],ye=ue.includes(x)?ue.filter($=>$!==x):[...ue,x];m({...f,preferredDays:ye})},Y=x=>{m({...f,allowAbsence:x})},Q=()=>{if(!f.name.trim()||!f.emoji.trim()){n(Co({title:"Missing Information",message:"Please provide both an emoji and a name for the team.",showCancel:!1}));return}u([...l,f]),m(wA)},A=x=>{n(Co({title:"Delete Team",message:"Are you sure you want to delete this team?",confirmText:"Delete",onConfirm:()=>{u(l.filter((ue,ye)=>ye!==x))}}))},C=async()=>{y("saving");try{const x=l.map(ue=>({name:ue.name||"",emoji:ue.emoji||"",maxConflict:ue.maxConflict||1,allowAbsence:ue.allowAbsence!==!1,preferredDays:ue.preferredDays||[],positions:(ue.positions||[]).map(ye=>({name:ye.name||"",emoji:ye.emoji||"",colour:ye.colour||"",sortByGender:!!ye.sortByGender,isCustom:!!ye.isCustom,customLabels:ye.customLabels||[],...ye.parentId?{parentId:ye.parentId}:{}}))}));await n(md(x)).unwrap(),y("success"),setTimeout(()=>y("idle"),2e3)}catch(x){console.error("Save Error:",x),n(Co({title:"Save Error",message:"Error saving: "+(x instanceof Error?x.message:"Unknown error"),showCancel:!1})),y("idle")}},R=()=>{u(e)};if(t||a)return E.jsx(yc,{});const k=()=>{if(!f.positions||f.positions.length===0)return"No positions";const x=f.positions.slice(0,3).map(ye=>E.jsx("span",{className:Ql.summaryEmoji,children:ye.emoji},ye.name)),ue=f.positions.length-3;return E.jsxs(E.Fragment,{children:[x,ue>0&&E.jsxs("span",{className:Ql.remainingCount,children:["+",ue]})]})},P=()=>!f.preferredDays||f.preferredDays.length===0?"No days":f.preferredDays.map(x=>x.substring(0,3)).join(", ");return E.jsxs("div",{className:Ql.managementWrapper,children:[E.jsxs(vv,{headers:[{text:"Name",minWidth:100,width:120,textAlign:"center"},{text:"Order",width:30,textAlign:"center"},{text:"Emoji",width:30,textAlign:"center"},{text:"Conflicts",width:60,textAlign:"center"},{text:"Config",minWidth:180,textAlign:"center"},{text:"",width:50}],children:[l.map((x,ue)=>E.jsx(_z,{team:x,teamIndex:ue,availablePositions:i,onUpdate:M,onMove:z,onDelete:A,onTogglePosition:N,onToggleDay:L,onToggleAllowAbsence:V,isFirst:ue===0,isLast:ue===l.length-1},`${x.emoji}-${ue}`)),E.jsxs("tr",{className:"team-row-new",children:[E.jsx(ri,{name:"new-team-name",value:f.name,placeholder:"Team Name",onChange:x=>m({...f,name:x.target.value}),isSticky:!0}),E.jsx(Wt,{children:""}),E.jsx(ri,{name:"new-team-emoji",value:f.emoji,placeholder:"",onChange:x=>m({...f,emoji:x.target.value})}),E.jsx(ri,{name:"new-team-maxConflict",value:((F=f.maxConflict)==null?void 0:F.toString())||"1",type:"number",onChange:x=>m({...f,maxConflict:parseInt(x.target.value)||1})}),E.jsx(Wt,{children:E.jsx(Ev,{primaryText:k(),secondaryText:P(),onClick:()=>b(!0)})}),E.jsx(Wt,{children:E.jsxs(sr,{onClick:Q,disabled:!f.name.trim()||!f.emoji.trim(),children:[E.jsx(_h,{size:16,style:{marginRight:"6px"}}),"Add"]})})]})]}),E.jsx(_R,{isOpen:v,onClose:()=>b(!1),team:f,availablePositions:i,onTogglePosition:U,onToggleDay:q,onToggleAllowAbsence:Y}),w&&E.jsx(Lm,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:C,onCancel:R,isSaving:p==="saving"})]})},Ez=({isOpen:n,onClose:e,user:t,availableTeams:i})=>{const a=Dn(),{positions:l}=Pe(p=>p.positions),u=p=>{a(sU({userId:t.id,teamName:p}))},f=(p,y)=>{a(aU({userId:t.id,teamName:p,posName:y}))},m=(p,y)=>{a(oU({userId:t.id,teamName:p,direction:y}))};return E.jsx(_v,{isOpen:n,onClose:e,title:`Edit Assignments: ${t.name}`,children:E.jsx(pR,{selectedTeams:t.teams||[],teamPositions:t.teamPositions||{},onToggleTeam:u,onTogglePosition:f,onMoveTeam:m,availableTeams:i,globalPositions:l})})},Tz=({user:n,availableTeams:e,adminEmail:t})=>{const i=Dn(),{positions:a}=Pe(y=>y.positions),[l,u]=O.useState(!1),f=(y,v)=>{i(iU({id:n.id,field:y,value:v}))},m=()=>{if(!n.teams||n.teams.length===0)return"No teams";const y=n.teams.map(w=>{const M=e.find(z=>z.name===w);return(M==null?void 0:M.emoji)||""}).filter(Boolean),v=y.slice(0,3).map((w,M)=>E.jsx("span",{className:_n.summaryEmoji,children:w},M)),b=y.length-3;return E.jsxs(E.Fragment,{children:[v,b>0&&E.jsxs("span",{className:_n.remainingCount,children:["+",b]})]})},p=()=>n.teamPositions?Object.entries(n.teamPositions).reduce((y,[,v])=>{const b=v.filter(w=>{const M=a.find(z=>z.name===w);return!(M!=null&&M.isCustom)});return y+b.length},0):0;return E.jsxs(E.Fragment,{children:[E.jsxs("tr",{children:[E.jsx(ri,{name:`name-${n.id}`,value:n.name||"",onChange:y=>f("name",y.target.value),isSticky:!0}),E.jsx(ri,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),E.jsx(Wt,{children:E.jsxs("select",{name:`gender-${n.id}`,className:Es.formSelect,value:n.gender,onChange:y=>f("gender",y.target.value),children:[E.jsx("option",{value:"",children:"-"}),E.jsx("option",{value:"Male",children:"Male"}),E.jsx("option",{value:"Female",children:"Female"})]})}),E.jsx(Wt,{children:E.jsx(Ev,{primaryText:m(),secondaryText:`(${p()} pos)`,onClick:()=>u(!0)})}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),E.jsx(Wt,{textAlign:"center",children:E.jsx(br,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>f("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id),E.jsx(Ez,{isOpen:l,onClose:()=>u(!1),user:n,availableTeams:e})]})},bz=()=>{const n=Dn(),{allUsers:e,originalUsers:t,loading:i,saving:a,error:l}=Pe(y=>y.userManagement),u=Pe(y=>y.teams.teams),f=O.useMemo(()=>{const y=v=>v.map(b=>({name:b.name||"",gender:b.gender||"",teams:[...b.teams||[]].sort(),teamPositions:Object.keys(b.teamPositions||{}).sort().reduce((w,M)=>{var z;return w[M]=[...((z=b.teamPositions)==null?void 0:z[M])||[]].sort(),w},{}),isActive:!!b.isActive,isApproved:!!b.isApproved,isAdmin:!!b.isAdmin}));return JSON.stringify(y(e))!==JSON.stringify(y(t))},[e,t]),m=()=>{n(_d(e))},p=()=>{n(lU())};return i?E.jsx(yc,{}):l?E.jsxs("div",{children:["Error: ",l]}):E.jsxs("div",{className:Ql.managementWrapper,children:[E.jsx(vv,{headers:[{text:"Name",minWidth:70,width:100,textAlign:"center"},{text:"Email",minWidth:170,textAlign:"center"},{text:"Gender",minWidth:90,textAlign:"center"},{text:"Assignments",minWidth:150,textAlign:"center"},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(y=>E.jsx(Tz,{user:y,availableTeams:u,adminEmail:"chris.sm.kang542@gmail.com"},y.id))}),f&&E.jsx(Lm,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:p,isSaving:a})]})},Sz=()=>{const{userData:n}=Pe(t=>t.auth),{section:e}=Ps();return n?E.jsxs("div",{className:Ql.settingsContainer,children:[e===jl.PROFILE&&E.jsx(gR,{}),e===jl.USER_MANAGEMENT&&(n.isAdmin?E.jsx(bz,{}):E.jsx("p",{children:"Access Denied"})),e===jl.TEAMS&&(n.isAdmin?E.jsx(vz,{}):E.jsx("p",{children:"Access Denied"})),e===jl.POSITIONS&&(n.isAdmin?E.jsx(gz,{}):E.jsx("p",{children:"Access Denied"}))]}):null},Az=[{path:"/",element:E.jsx(gL,{})},{path:"/login",element:E.jsx(k9,{})},{path:"/guest",element:E.jsx(R9,{})},{path:"/app",element:E.jsx(Ej,{}),children:[{path:"",element:E.jsx(t6,{}),children:[{path:"dashboard",element:E.jsx(V6,{})},{path:"roster/:teamName?/:positionName?",element:E.jsx(oz,{})},{path:"settings/:section?",element:E.jsx(Sz,{})}]}]}];let CA=!1;const wz=n=>{if(!CA){CA=!0;let e;Q4(Oo,t=>{if(t){n.dispatch(X3(t)),n.dispatch(pd(t.uid));const i=sn(vt,"users",t.uid);e=vo(i,a=>{if(a.exists()){const l=a.data();n.dispatch(lR(l))}})}else n.dispatch(W3()),e&&e()})}return e=>t=>e(t)},Cz=KL({reducer:{auth:J3,positions:gj,presence:f3,roster:nU,rosterView:s6,teams:vj,ui:s3,userManagement:uU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(wz)}),Rz=FD(Az);lx.createRoot(document.getElementById("root")).render(E.jsx(IA.StrictMode,{children:E.jsx(Sx,{store:Cz,children:E.jsx(i2,{children:E.jsx(hL,{children:E.jsx(n2,{router:Rz})})})})}));
