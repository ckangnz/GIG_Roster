var HC=Object.defineProperty;var qC=(n,e,t)=>e in n?HC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Qp=(n,e,t)=>qC(n,typeof e!="symbol"?e+"":e,t);function GC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function xS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Xp={exports:{}},Vu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function $C(){if(KT)return Vu;KT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Vu.Fragment=e,Vu.jsx=t,Vu.jsxs=t,Vu}var YT;function KC(){return YT||(YT=1,Xp.exports=$C()),Xp.exports}var w=KC(),Wp={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QT;function YC(){if(QT)return We;QT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),b=Symbol.iterator;function C(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,F={};function Q(U,$,oe){this.props=U,this.context=$,this.refs=F,this.updater=oe||L}Q.prototype.isReactComponent={},Q.prototype.setState=function(U,$){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,$,"setState")},Q.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function B(){}B.prototype=Q.prototype;function q(U,$,oe){this.props=U,this.context=$,this.refs=F,this.updater=oe||L}var Y=q.prototype=new B;Y.constructor=q,j(Y,Q.prototype),Y.isPureReactComponent=!0;var G=Array.isArray;function ae(){}var S={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function R(U,$,oe){var ce=oe.ref;return{$$typeof:n,type:U,key:$,ref:ce!==void 0?ce:null,props:oe}}function x(U,$){return R(U.type,$,U.props)}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function M(U){var $={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(oe){return $[oe]})}var O=/\/+/g;function be(U,$){return typeof U=="object"&&U!==null&&U.key!=null?M(""+U.key):$.toString(36)}function ke(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(ae,ae):(U.status="pending",U.then(function($){U.status==="pending"&&(U.status="fulfilled",U.value=$)},function($){U.status==="pending"&&(U.status="rejected",U.reason=$)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function X(U,$,oe,ce,pe){var Ee=typeof U;(Ee==="undefined"||Ee==="boolean")&&(U=null);var Ue=!1;if(U===null)Ue=!0;else switch(Ee){case"bigint":case"string":case"number":Ue=!0;break;case"object":switch(U.$$typeof){case n:case e:Ue=!0;break;case v:return Ue=U._init,X(Ue(U._payload),$,oe,ce,pe)}}if(Ue)return pe=pe(U),Ue=ce===""?"."+be(U,0):ce,G(pe)?(oe="",Ue!=null&&(oe=Ue.replace(O,"$&/")+"/"),X(pe,$,oe,"",function($t){return $t})):pe!=null&&(N(pe)&&(pe=x(pe,oe+(pe.key==null||U&&U.key===pe.key?"":(""+pe.key).replace(O,"$&/")+"/")+Ue)),$.push(pe)),1;Ue=0;var Ke=ce===""?".":ce+":";if(G(U))for(var ot=0;ot<U.length;ot++)ce=U[ot],Ee=Ke+be(ce,ot),Ue+=X(ce,$,oe,Ee,pe);else if(ot=C(U),typeof ot=="function")for(U=ot.call(U),ot=0;!(ce=U.next()).done;)ce=ce.value,Ee=Ke+be(ce,ot++),Ue+=X(ce,$,oe,Ee,pe);else if(Ee==="object"){if(typeof U.then=="function")return X(ke(U),$,oe,ce,pe);throw $=String(U),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ue}function de(U,$,oe){if(U==null)return U;var ce=[],pe=0;return X(U,ce,"","",function(Ee){return $.call(oe,Ee,pe++)}),ce}function ye(U){if(U._status===-1){var $=U._result;$=$(),$.then(function(oe){(U._status===0||U._status===-1)&&(U._status=1,U._result=oe)},function(oe){(U._status===0||U._status===-1)&&(U._status=2,U._result=oe)}),U._status===-1&&(U._status=0,U._result=$)}if(U._status===1)return U._result.default;throw U._result}var Le=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},Pe={map:de,forEach:function(U,$,oe){de(U,function(){$.apply(this,arguments)},oe)},count:function(U){var $=0;return de(U,function(){$++}),$},toArray:function(U){return de(U,function($){return $})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return We.Activity=E,We.Children=Pe,We.Component=Q,We.Fragment=t,We.Profiler=s,We.PureComponent=q,We.StrictMode=a,We.Suspense=m,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,We.__COMPILER_RUNTIME={__proto__:null,c:function(U){return S.H.useMemoCache(U)}},We.cache=function(U){return function(){return U.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(U,$,oe){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ce=j({},U.props),pe=U.key;if($!=null)for(Ee in $.key!==void 0&&(pe=""+$.key),$)!A.call($,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&$.ref===void 0||(ce[Ee]=$[Ee]);var Ee=arguments.length-2;if(Ee===1)ce.children=oe;else if(1<Ee){for(var Ue=Array(Ee),Ke=0;Ke<Ee;Ke++)Ue[Ke]=arguments[Ke+2];ce.children=Ue}return R(U.type,pe,ce)},We.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},We.createElement=function(U,$,oe){var ce,pe={},Ee=null;if($!=null)for(ce in $.key!==void 0&&(Ee=""+$.key),$)A.call($,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(pe[ce]=$[ce]);var Ue=arguments.length-2;if(Ue===1)pe.children=oe;else if(1<Ue){for(var Ke=Array(Ue),ot=0;ot<Ue;ot++)Ke[ot]=arguments[ot+2];pe.children=Ke}if(U&&U.defaultProps)for(ce in Ue=U.defaultProps,Ue)pe[ce]===void 0&&(pe[ce]=Ue[ce]);return R(U,Ee,pe)},We.createRef=function(){return{current:null}},We.forwardRef=function(U){return{$$typeof:d,render:U}},We.isValidElement=N,We.lazy=function(U){return{$$typeof:v,_payload:{_status:-1,_result:U},_init:ye}},We.memo=function(U,$){return{$$typeof:g,type:U,compare:$===void 0?null:$}},We.startTransition=function(U){var $=S.T,oe={};S.T=oe;try{var ce=U(),pe=S.S;pe!==null&&pe(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ae,Le)}catch(Ee){Le(Ee)}finally{$!==null&&oe.types!==null&&($.types=oe.types),S.T=$}},We.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},We.use=function(U){return S.H.use(U)},We.useActionState=function(U,$,oe){return S.H.useActionState(U,$,oe)},We.useCallback=function(U,$){return S.H.useCallback(U,$)},We.useContext=function(U){return S.H.useContext(U)},We.useDebugValue=function(){},We.useDeferredValue=function(U,$){return S.H.useDeferredValue(U,$)},We.useEffect=function(U,$){return S.H.useEffect(U,$)},We.useEffectEvent=function(U){return S.H.useEffectEvent(U)},We.useId=function(){return S.H.useId()},We.useImperativeHandle=function(U,$,oe){return S.H.useImperativeHandle(U,$,oe)},We.useInsertionEffect=function(U,$){return S.H.useInsertionEffect(U,$)},We.useLayoutEffect=function(U,$){return S.H.useLayoutEffect(U,$)},We.useMemo=function(U,$){return S.H.useMemo(U,$)},We.useOptimistic=function(U,$){return S.H.useOptimistic(U,$)},We.useReducer=function(U,$,oe){return S.H.useReducer(U,$,oe)},We.useRef=function(U){return S.H.useRef(U)},We.useState=function(U){return S.H.useState(U)},We.useSyncExternalStore=function(U,$,oe){return S.H.useSyncExternalStore(U,$,oe)},We.useTransition=function(){return S.H.useTransition()},We.version="19.2.4",We}var XT;function _d(){return XT||(XT=1,Wp.exports=YC()),Wp.exports}var P=_d();const NS=xS(P),QC=GC({__proto__:null,default:NS},[P]);var Jp={exports:{}},ku={},Zp={exports:{}},eg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function XC(){return WT||(WT=1,(function(n){function e(X,de){var ye=X.length;X.push(de);e:for(;0<ye;){var Le=ye-1>>>1,Pe=X[Le];if(0<s(Pe,de))X[Le]=de,X[ye]=Pe,ye=Le;else break e}}function t(X){return X.length===0?null:X[0]}function a(X){if(X.length===0)return null;var de=X[0],ye=X.pop();if(ye!==de){X[0]=ye;e:for(var Le=0,Pe=X.length,U=Pe>>>1;Le<U;){var $=2*(Le+1)-1,oe=X[$],ce=$+1,pe=X[ce];if(0>s(oe,ye))ce<Pe&&0>s(pe,oe)?(X[Le]=pe,X[ce]=ye,Le=ce):(X[Le]=oe,X[$]=ye,Le=$);else if(ce<Pe&&0>s(pe,ye))X[Le]=pe,X[ce]=ye,Le=ce;else break e}}return de}function s(X,de){var ye=X.sortIndex-de.sortIndex;return ye!==0?ye:X.id-de.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],v=1,E=null,b=3,C=!1,L=!1,j=!1,F=!1,Q=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Y(X){for(var de=t(g);de!==null;){if(de.callback===null)a(g);else if(de.startTime<=X)a(g),de.sortIndex=de.expirationTime,e(m,de);else break;de=t(g)}}function G(X){if(j=!1,Y(X),!L)if(t(m)!==null)L=!0,ae||(ae=!0,M());else{var de=t(g);de!==null&&ke(G,de.startTime-X)}}var ae=!1,S=-1,A=5,R=-1;function x(){return F?!0:!(n.unstable_now()-R<A)}function N(){if(F=!1,ae){var X=n.unstable_now();R=X;var de=!0;try{e:{L=!1,j&&(j=!1,B(S),S=-1),C=!0;var ye=b;try{t:{for(Y(X),E=t(m);E!==null&&!(E.expirationTime>X&&x());){var Le=E.callback;if(typeof Le=="function"){E.callback=null,b=E.priorityLevel;var Pe=Le(E.expirationTime<=X);if(X=n.unstable_now(),typeof Pe=="function"){E.callback=Pe,Y(X),de=!0;break t}E===t(m)&&a(m),Y(X)}else a(m);E=t(m)}if(E!==null)de=!0;else{var U=t(g);U!==null&&ke(G,U.startTime-X),de=!1}}break e}finally{E=null,b=ye,C=!1}de=void 0}}finally{de?M():ae=!1}}}var M;if(typeof q=="function")M=function(){q(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,be=O.port2;O.port1.onmessage=N,M=function(){be.postMessage(null)}}else M=function(){Q(N,0)};function ke(X,de){S=Q(function(){X(n.unstable_now())},de)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(X){switch(b){case 1:case 2:case 3:var de=3;break;default:de=b}var ye=b;b=de;try{return X()}finally{b=ye}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(X,de){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=b;b=X;try{return de()}finally{b=ye}},n.unstable_scheduleCallback=function(X,de,ye){var Le=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Le+ye:Le):ye=Le,X){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=ye+Pe,X={id:v++,callback:de,priorityLevel:X,startTime:ye,expirationTime:Pe,sortIndex:-1},ye>Le?(X.sortIndex=ye,e(g,X),t(m)===null&&X===t(g)&&(j?(B(S),S=-1):j=!0,ke(G,ye-Le))):(X.sortIndex=Pe,e(m,X),L||C||(L=!0,ae||(ae=!0,M()))),X},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(X){var de=b;return function(){var ye=b;b=de;try{return X.apply(this,arguments)}finally{b=ye}}}})(eg)),eg}var JT;function WC(){return JT||(JT=1,Zp.exports=XC()),Zp.exports}var tg={exports:{}},Bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function JC(){if(ZT)return Bn;ZT=1;var n=_d();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(m,g,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:m,containerInfo:g,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Bn.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,v)},Bn.flushSync=function(m){var g=c.T,v=a.p;try{if(c.T=null,a.p=2,m)return m()}finally{c.T=g,a.p=v,a.d.f()}},Bn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(m,g))},Bn.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Bn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:C}):v==="script"&&a.d.X(m,{crossOrigin:E,integrity:b,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Bn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=d(g.as,g.crossOrigin);a.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(m)},Bn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,E=d(v,g.crossOrigin);a.d.L(m,v,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Bn.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=d(g.as,g.crossOrigin);a.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(m)},Bn.requestFormReset=function(m){a.d.r(m)},Bn.unstable_batchedUpdates=function(m,g){return m(g)},Bn.useFormState=function(m,g,v){return c.H.useFormState(m,g,v)},Bn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Bn.version="19.2.4",Bn}var e0;function OS(){if(e0)return tg.exports;e0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tg.exports=JC(),tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function ZC(){if(t0)return ku;t0=1;var n=WC(),e=_d(),t=OS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function m(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return m(f),r;if(p===u)return m(f),i;p=p.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=p;else{for(var _=!1,I=f.child;I;){if(I===o){_=!0,o=f,u=p;break}if(I===u){_=!0,u=f,o=p;break}I=I.sibling}if(!_){for(I=p.child;I;){if(I===o){_=!0,o=p,u=f;break}if(I===u){_=!0,u=p,o=f;break}I=I.sibling}if(!_)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function v(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=v(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,b=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function M(r){return r===null||typeof r!="object"?null:(r=N&&r[N]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function be(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case j:return"Fragment";case Q:return"Profiler";case F:return"StrictMode";case G:return"Suspense";case ae:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case L:return"Portal";case q:return r.displayName||"Context";case B:return(r._context.displayName||"Context")+".Consumer";case Y:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case S:return i=r.displayName||null,i!==null?i:be(r.type)||"Memo";case A:i=r._payload,r=r._init;try{return be(r(i))}catch{}}return null}var ke=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Le=[],Pe=-1;function U(r){return{current:r}}function $(r){0>Pe||(r.current=Le[Pe],Le[Pe]=null,Pe--)}function oe(r,i){Pe++,Le[Pe]=r.current,r.current=i}var ce=U(null),pe=U(null),Ee=U(null),Ue=U(null);function Ke(r,i){switch(oe(Ee,i),oe(pe,r),oe(ce,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?gT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=gT(i),r=yT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}$(ce),oe(ce,r)}function ot(){$(ce),$(pe),$(Ee)}function $t(r){r.memoizedState!==null&&oe(Ue,r);var i=ce.current,o=yT(i,r.type);i!==o&&(oe(pe,r),oe(ce,o))}function Rn(r){pe.current===r&&($(ce),$(pe)),Ue.current===r&&($(Ue),Nu._currentValue=ye)}var Et,En;function Kt(r){if(Et===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Et=i&&i[1]||"",En=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Et+r+En}var ne=!1;function ge(r,i){if(!r||ne)return"";ne=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ie){var te=ie}Reflect.construct(r,[],he)}else{try{he.call()}catch(ie){te=ie}r.call(he.prototype)}}else{try{throw Error()}catch(ie){te=ie}(he=r())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),_=p[0],I=p[1];if(_&&I){var k=_.split(`
`),Z=I.split(`
`);for(f=u=0;u<k.length&&!k[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(u===k.length||f===Z.length)for(u=k.length-1,f=Z.length-1;1<=u&&0<=f&&k[u]!==Z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(k[u]!==Z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||k[u]!==Z[f]){var se=`
`+k[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=f);break}}}finally{ne=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Kt(o):""}function Ve(r,i){switch(r.tag){case 26:case 27:case 5:return Kt(r.type);case 16:return Kt("Lazy");case 13:return r.child!==i&&i!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return ge(r.type,!1);case 11:return ge(r.type.render,!1);case 1:return ge(r.type,!0);case 31:return Kt("Activity");default:return""}}function we(r){try{var i="",o=null;do i+=Ve(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ae=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,Vt=n.unstable_cancelCallback,wt=n.unstable_shouldYield,je=n.unstable_requestPaint,Ye=n.unstable_now,It=n.unstable_getCurrentPriorityLevel,tr=n.unstable_ImmediatePriority,Kn=n.unstable_UserBlockingPriority,nn=n.unstable_NormalPriority,Tn=n.unstable_LowPriority,bs=n.unstable_IdlePriority,vo=n.log,va=n.unstable_setDisableYieldValue,dr=null,kt=null;function Yn(r){if(typeof vo=="function"&&va(r),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(dr,r)}catch{}}var Yt=Math.clz32?Math.clz32:As,Ss=Math.log,_a=Math.LN2;function As(r){return r>>>=0,r===0?32:31-(Ss(r)/_a|0)|0}var Qn=256,di=262144,Qt=4194304;function Or(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function mr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,_=r.pingedLanes;r=r.warmLanes;var I=u&134217727;return I!==0?(u=I&~p,u!==0?f=Or(u):(_&=I,_!==0?f=Or(_):o||(o=I&~r,o!==0&&(f=Or(o))))):(I=u&~p,I!==0?f=Or(I):_!==0?f=Or(_):o||(o=u&~r,o!==0&&(f=Or(o)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,o=i&-i,p>=o||p===32&&(o&4194048)!==0)?i:f}function pr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function _o(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ui(){var r=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),r}function Xn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function mi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Hl(r,i,o,u,f,p){var _=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var I=r.entanglements,k=r.expirationTimes,Z=r.hiddenUpdates;for(o=_&~o;0<o;){var se=31-Yt(o),he=1<<se;I[se]=0,k[se]=-1;var te=Z[se];if(te!==null)for(Z[se]=null,se=0;se<te.length;se++){var ie=te[se];ie!==null&&(ie.lane&=-536870913)}o&=~he}u!==0&&ji(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(_&~i))}function ji(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Yt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function V(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Yt(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function H(r,i){var o=i&-i;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|i))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function me(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ve(){var r=de.p;return r!==0?r:(r=window.event,r===void 0?32:zT(r.type))}function Ce(r,i){var o=de.p;try{return de.p=r,i()}finally{de.p=o}}var xe=Math.random().toString(36).slice(2),_e="__reactFiber$"+xe,Se="__reactProps$"+xe,De="__reactContainer$"+xe,qe="__reactEvents$"+xe,Me="__reactListeners$"+xe,Qe="__reactHandles$"+xe,it="__reactResources$"+xe,Dt="__reactMarker$"+xe;function Ft(r){delete r[_e],delete r[Se],delete r[qe],delete r[Me],delete r[Qe]}function Ut(r){var i=r[_e];if(i)return i;for(var o=r.parentNode;o;){if(i=o[De]||o[_e]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=AT(r);r!==null;){if(o=r[_e])return o;r=AT(r)}return i}r=o,o=r.parentNode}return null}function tt(r){if(r=r[_e]||r[De]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function jt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function Cn(r){var i=r[it];return i||(i=r[it]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function zt(r){r[Dt]=!0}var nr=new Set,jn={};function rr(r,i){zn(r,i),zn(r+"Capture",i)}function zn(r,i){for(jn[r]=i,r=0;r<i.length;r++)nr.add(i[r])}var gr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pi={},gi={};function st(r){return Ae.call(gi,r)?!0:Ae.call(pi,r)?!1:gr.test(r)?gi[r]=!0:(pi[r]=!0,!1)}function Jt(r,i,o){if(st(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function fn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function xt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function nt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function yr(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ea(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,p=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){o=""+_,p.call(this,_)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(_){o=""+_},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Tt(r){if(!r._valueTracker){var i=yr(r)?"checked":"value";r._valueTracker=Ea(r,i,""+r[i])}}function ws(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=yr(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function yi(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Rs=/[\n"\\]/g;function ir(r){return r.replace(Rs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Eo(r,i,o,u,f,p,_,I){r.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?r.type=_:r.removeAttribute("type"),i!=null?_==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+nt(i)):r.value!==""+nt(i)&&(r.value=""+nt(i)):_!=="submit"&&_!=="reset"||r.removeAttribute("value"),i!=null?ql(r,_,nt(i)):o!=null?ql(r,_,nt(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.name=""+nt(I):r.removeAttribute("name")}function Fc(r,i,o,u,f,p,_,I){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),i!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||i!=null)){Tt(r);return}o=o!=null?""+nt(o):"",i=i!=null?""+nt(i):o,I||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=I?r.checked:!!u,r.defaultChecked=!!u,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(r.name=_),Tt(r)}function ql(r,i,o){i==="number"&&yi(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function Ta(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+nt(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function Hc(r,i,o){if(i!=null&&(i=""+nt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+nt(o):""}function ba(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(ke(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=nt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),Tt(r)}function ar(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var qc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||qc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function $l(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Gl(r,f,u)}else for(var p in i)i.hasOwnProperty(p)&&Gl(r,p,i[p])}function To(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function bo(r){return Sa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Wr(){}var Kl=null;function Mr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Aa=null,vi=null;function Cs(r){var i=tt(r);if(i&&(r=i.stateNode)){var o=r[Se]||null;e:switch(r=i.stateNode,i.type){case"input":if(Eo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ir(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Se]||null;if(!f)throw Error(a(90));Eo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&ws(u)}break e;case"textarea":Hc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&Ta(r,!!o.multiple,i,!1)}}}var So=!1;function wa(r,i,o){if(So)return r(i,o);So=!0;try{var u=r(i);return u}finally{if(So=!1,(Aa!==null||vi!==null)&&(Uh(),Aa&&(i=Aa,r=vi,vi=Aa=null,Cs(i),r)))for(i=0;i<r.length;i++)Cs(r[i])}}function Jr(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Se]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Is=!1;if(Pr)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Is=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{Is=!1}var _i=null,Yl=null,Ds=null;function Ql(){if(Ds)return Ds;var r,i=Yl,o=i.length,u,f="value"in _i?_i.value:_i.textContent,p=f.length;for(r=0;r<o&&i[r]===f[r];r++);var _=o-r;for(u=1;u<=_&&i[o-u]===f[p-u];u++);return Ds=f.slice(r,1<u?1-u:void 0)}function xs(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function zi(){return!0}function Zr(){return!1}function xn(r){function i(o,u,f,p,_){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var I in r)r.hasOwnProperty(I)&&(o=r[I],this[I]=o?o(p):p[I]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zi:Zr,this.isPropagationStopped=Zr,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zi)},persist:function(){},isPersistent:zi}),i}var Bi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=xn(Bi),Ra=E({},Bi,{view:0,detail:0}),Xl=xn(Ra),Ca,Ao,Ti,wo=E({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ti&&(Ti&&r.type==="mousemove"?(Ca=r.screenX-Ti.screenX,Ao=r.screenY-Ti.screenY):Ao=Ca=0,Ti=r),Ca)},movementY:function(r){return"movementY"in r?r.movementY:Ao}}),Wl=xn(wo),Ns=E({},wo,{dataTransfer:0}),$c=xn(Ns),Kc=E({},Ra,{relatedTarget:0}),Os=xn(Kc),Jl=E({},Bi,{animationName:0,elapsedTime:0,pseudoElement:0}),Yc=xn(Jl),Ro=E({},Bi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Qc=xn(Ro),Xc=E({},Bi,{data:0}),bi=xn(Xc),Wc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eh(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Zc[r])?!!i[r]:!1}function Ia(){return eh}var Wn=E({},Ra,{key:function(r){if(r.key){var i=Wc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=xs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(r){return r.type==="keypress"?xs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?xs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),th=xn(Wn),nh=E({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fi=xn(nh),h=E({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),y=xn(h),T=E({},Bi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=xn(T),W=E({},wo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),re=xn(W),Te=E({},Bi,{newState:0,oldState:0}),Ze=xn(Te),on=[9,13,27,32],bt=Pr&&"CompositionEvent"in window,Xt=null;Pr&&"documentMode"in document&&(Xt=document.documentMode);var Vr=Pr&&"TextEvent"in window&&!Xt,Si=Pr&&(!bt||Xt&&8<Xt&&11>=Xt),ei=" ",ti=!1;function Ms(r,i){switch(r){case"keyup":return on.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Co(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Io=!1;function d1(r,i){switch(r){case"compositionend":return Co(i);case"keypress":return i.which!==32?null:(ti=!0,ei);case"textInput":return r=i.data,r===ei&&ti?null:r;default:return null}}function m1(r,i){if(Io)return r==="compositionend"||!bt&&Ms(r,i)?(r=Ql(),Ds=Yl=_i=null,Io=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Si&&i.locale!=="ko"?null:i.data;default:return null}}var p1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cv(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!p1[r.type]:i==="textarea"}function Iv(r,i,o,u){Aa?vi?vi.push(u):vi=[u]:Aa=u,i=Gh(i,"onChange"),0<i.length&&(o=new Ei("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Zl=null,eu=null;function g1(r){cT(r,0)}function rh(r){var i=jt(r);if(ws(i))return r}function Dv(r,i){if(r==="change")return i}var xv=!1;if(Pr){var nm;if(Pr){var rm="oninput"in document;if(!rm){var Nv=document.createElement("div");Nv.setAttribute("oninput","return;"),rm=typeof Nv.oninput=="function"}nm=rm}else nm=!1;xv=nm&&(!document.documentMode||9<document.documentMode)}function Ov(){Zl&&(Zl.detachEvent("onpropertychange",Mv),eu=Zl=null)}function Mv(r){if(r.propertyName==="value"&&rh(eu)){var i=[];Iv(i,eu,r,Mr(r)),wa(g1,i)}}function y1(r,i,o){r==="focusin"?(Ov(),Zl=i,eu=o,Zl.attachEvent("onpropertychange",Mv)):r==="focusout"&&Ov()}function v1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return rh(eu)}function _1(r,i){if(r==="click")return rh(i)}function E1(r,i){if(r==="input"||r==="change")return rh(i)}function T1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var vr=typeof Object.is=="function"?Object.is:T1;function tu(r,i){if(vr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Ae.call(i,f)||!vr(r[f],i[f]))return!1}return!0}function Pv(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Vv(r,i){var o=Pv(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Pv(o)}}function kv(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?kv(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Lv(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=yi(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=yi(r.document)}return i}function im(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var b1=Pr&&"documentMode"in document&&11>=document.documentMode,Do=null,am=null,nu=null,sm=!1;function Uv(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;sm||Do==null||Do!==yi(u)||(u=Do,"selectionStart"in u&&im(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),nu&&tu(nu,u)||(nu=u,u=Gh(am,"onSelect"),0<u.length&&(i=new Ei("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Do)))}function Ps(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var xo={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},om={},jv={};Pr&&(jv=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Vs(r){if(om[r])return om[r];if(!xo[r])return r;var i=xo[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in jv)return om[r]=i[o];return r}var zv=Vs("animationend"),Bv=Vs("animationiteration"),Fv=Vs("animationstart"),S1=Vs("transitionrun"),A1=Vs("transitionstart"),w1=Vs("transitioncancel"),Hv=Vs("transitionend"),qv=new Map,lm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lm.push("scrollEnd");function ni(r,i){qv.set(r,i),rr(i,[r])}var ih=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},kr=[],No=0,um=0;function ah(){for(var r=No,i=um=No=0;i<r;){var o=kr[i];kr[i++]=null;var u=kr[i];kr[i++]=null;var f=kr[i];kr[i++]=null;var p=kr[i];if(kr[i++]=null,u!==null&&f!==null){var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}p!==0&&Gv(o,f,p)}}function sh(r,i,o,u){kr[No++]=r,kr[No++]=i,kr[No++]=o,kr[No++]=u,um|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function cm(r,i,o,u){return sh(r,i,o,u),oh(r)}function ks(r,i){return sh(r,null,null,i),oh(r)}function Gv(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&i!==null&&(f=31-Yt(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),p):null}function oh(r){if(50<Au)throw Au=0,_p=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var Oo={};function R1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(r,i,o,u){return new R1(r,i,o,u)}function hm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Hi(r,i){var o=r.alternate;return o===null?(o=_r(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function $v(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function lh(r,i,o,u,f,p){var _=0;if(u=r,typeof r=="function")hm(r)&&(_=1);else if(typeof r=="string")_=NC(r,o,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=_r(31,o,i,f),r.elementType=R,r.lanes=p,r;case j:return Ls(o.children,f,p,i);case F:_=8,f|=24;break;case Q:return r=_r(12,o,i,f|2),r.elementType=Q,r.lanes=p,r;case G:return r=_r(13,o,i,f),r.elementType=G,r.lanes=p,r;case ae:return r=_r(19,o,i,f),r.elementType=ae,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:_=10;break e;case B:_=9;break e;case Y:_=11;break e;case S:_=14;break e;case A:_=16,u=null;break e}_=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=_r(_,o,i,f),i.elementType=r,i.type=u,i.lanes=p,i}function Ls(r,i,o,u){return r=_r(7,r,u,i),r.lanes=o,r}function fm(r,i,o){return r=_r(6,r,null,i),r.lanes=o,r}function Kv(r){var i=_r(18,null,null,0);return i.stateNode=r,i}function dm(r,i,o){return i=_r(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var Yv=new WeakMap;function Lr(r,i){if(typeof r=="object"&&r!==null){var o=Yv.get(r);return o!==void 0?o:(i={value:r,source:i,stack:we(i)},Yv.set(r,i),i)}return{value:r,source:i,stack:we(i)}}var Mo=[],Po=0,uh=null,ru=0,Ur=[],jr=0,Da=null,Ai=1,wi="";function qi(r,i){Mo[Po++]=ru,Mo[Po++]=uh,uh=r,ru=i}function Qv(r,i,o){Ur[jr++]=Ai,Ur[jr++]=wi,Ur[jr++]=Da,Da=r;var u=Ai;r=wi;var f=32-Yt(u)-1;u&=~(1<<f),o+=1;var p=32-Yt(i)+f;if(30<p){var _=f-f%5;p=(u&(1<<_)-1).toString(32),u>>=_,f-=_,Ai=1<<32-Yt(i)+f|o<<f|u,wi=p+r}else Ai=1<<p|o<<f|u,wi=r}function mm(r){r.return!==null&&(qi(r,1),Qv(r,1,0))}function pm(r){for(;r===uh;)uh=Mo[--Po],Mo[Po]=null,ru=Mo[--Po],Mo[Po]=null;for(;r===Da;)Da=Ur[--jr],Ur[jr]=null,wi=Ur[--jr],Ur[jr]=null,Ai=Ur[--jr],Ur[jr]=null}function Xv(r,i){Ur[jr++]=Ai,Ur[jr++]=wi,Ur[jr++]=Da,Ai=i.id,wi=i.overflow,Da=r}var Nn=null,Ht=null,gt=!1,xa=null,zr=!1,gm=Error(a(519));function Na(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw iu(Lr(i,r)),gm}function Wv(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[_e]=r,i[Se]=u,o){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(o=0;o<Ru.length;o++)ut(Ru[o],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":ut("invalid",i),Fc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ut("invalid",i);break;case"textarea":ut("invalid",i),ba(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||mT(i.textContent,o)?(u.popover!=null&&(ut("beforetoggle",i),ut("toggle",i)),u.onScroll!=null&&ut("scroll",i),u.onScrollEnd!=null&&ut("scrollend",i),u.onClick!=null&&(i.onclick=Wr),i=!0):i=!1,i||Na(r,!0)}function Jv(r){for(Nn=r.return;Nn;)switch(Nn.tag){case 5:case 31:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:Nn=Nn.return}}function Vo(r){if(r!==Nn)return!1;if(!gt)return Jv(r),gt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Pp(r.type,r.memoizedProps)),o=!o),o&&Ht&&Na(r),Jv(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=ST(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=ST(r)}else i===27?(i=Ht,Ga(r.type)?(r=jp,jp=null,Ht=r):Ht=i):Ht=Nn?Fr(r.stateNode.nextSibling):null;return!0}function Us(){Ht=Nn=null,gt=!1}function ym(){var r=xa;return r!==null&&(ur===null?ur=r:ur.push.apply(ur,r),xa=null),r}function iu(r){xa===null?xa=[r]:xa.push(r)}var vm=U(null),js=null,Gi=null;function Oa(r,i,o){oe(vm,i._currentValue),i._currentValue=o}function $i(r){r._currentValue=vm.current,$(vm)}function _m(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function Em(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var _=f.child;p=p.firstContext;e:for(;p!==null;){var I=p;p=f;for(var k=0;k<i.length;k++)if(I.context===i[k]){p.lanes|=o,I=p.alternate,I!==null&&(I.lanes|=o),_m(p.return,o,r),u||(_=null);break e}p=I.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=o,p=_.alternate,p!==null&&(p.lanes|=o),_m(_,o,r),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===r){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ko(r,i,o,u){r=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var I=f.type;vr(f.pendingProps.value,_.value)||(r!==null?r.push(I):r=[I])}}else if(f===Ue.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Nu):r=[Nu])}f=f.return}r!==null&&Em(i,r,o,u),i.flags|=262144}function ch(r){for(r=r.firstContext;r!==null;){if(!vr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function zs(r){js=r,Gi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function On(r){return Zv(js,r)}function hh(r,i){return js===null&&zs(r),Zv(r,i)}function Zv(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},Gi===null){if(r===null)throw Error(a(308));Gi=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else Gi=Gi.next=i;return o}var C1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},I1=n.unstable_scheduleCallback,D1=n.unstable_NormalPriority,dn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tm(){return{controller:new C1,data:new Map,refCount:0}}function au(r){r.refCount--,r.refCount===0&&I1(D1,function(){r.controller.abort()})}var su=null,bm=0,Lo=0,Uo=null;function x1(r,i){if(su===null){var o=su=[];bm=0,Lo=wp(),Uo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return bm++,i.then(e_,e_),i}function e_(){if(--bm===0&&su!==null){Uo!==null&&(Uo.status="fulfilled");var r=su;su=null,Lo=0,Uo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function N1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var t_=X.S;X.S=function(r,i){UE=Ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&x1(r,i),t_!==null&&t_(r,i)};var Bs=U(null);function Sm(){var r=Bs.current;return r!==null?r:Lt.pooledCache}function fh(r,i){i===null?oe(Bs,Bs.current):oe(Bs,i.pool)}function n_(){var r=Sm();return r===null?null:{parent:dn._currentValue,pool:r}}var jo=Error(a(460)),Am=Error(a(474)),dh=Error(a(542)),mh={then:function(){}};function r_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function i_(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Wr,Wr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,s_(r),r;default:if(typeof i.status=="string")i.then(Wr,Wr);else{if(r=Lt,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,s_(r),r}throw Hs=i,jo}}function Fs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Hs=o,jo):o}}var Hs=null;function a_(){if(Hs===null)throw Error(a(459));var r=Hs;return Hs=null,r}function s_(r){if(r===jo||r===dh)throw Error(a(483))}var zo=null,ou=0;function ph(r){var i=ou;return ou+=1,zo===null&&(zo=[]),i_(zo,r,i)}function lu(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function gh(r,i){throw i.$$typeof===b?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function o_(r){function i(K,z){if(r){var J=K.deletions;J===null?(K.deletions=[z],K.flags|=16):J.push(z)}}function o(K,z){if(!r)return null;for(;z!==null;)i(K,z),z=z.sibling;return null}function u(K){for(var z=new Map;K!==null;)K.key!==null?z.set(K.key,K):z.set(K.index,K),K=K.sibling;return z}function f(K,z){return K=Hi(K,z),K.index=0,K.sibling=null,K}function p(K,z,J){return K.index=J,r?(J=K.alternate,J!==null?(J=J.index,J<z?(K.flags|=67108866,z):J):(K.flags|=67108866,z)):(K.flags|=1048576,z)}function _(K){return r&&K.alternate===null&&(K.flags|=67108866),K}function I(K,z,J,le){return z===null||z.tag!==6?(z=fm(J,K.mode,le),z.return=K,z):(z=f(z,J),z.return=K,z)}function k(K,z,J,le){var ze=J.type;return ze===j?se(K,z,J.props.children,le,J.key):z!==null&&(z.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===A&&Fs(ze)===z.type)?(z=f(z,J.props),lu(z,J),z.return=K,z):(z=lh(J.type,J.key,J.props,null,K.mode,le),lu(z,J),z.return=K,z)}function Z(K,z,J,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==J.containerInfo||z.stateNode.implementation!==J.implementation?(z=dm(J,K.mode,le),z.return=K,z):(z=f(z,J.children||[]),z.return=K,z)}function se(K,z,J,le,ze){return z===null||z.tag!==7?(z=Ls(J,K.mode,le,ze),z.return=K,z):(z=f(z,J),z.return=K,z)}function he(K,z,J){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=fm(""+z,K.mode,J),z.return=K,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return J=lh(z.type,z.key,z.props,null,K.mode,J),lu(J,z),J.return=K,J;case L:return z=dm(z,K.mode,J),z.return=K,z;case A:return z=Fs(z),he(K,z,J)}if(ke(z)||M(z))return z=Ls(z,K.mode,J,null),z.return=K,z;if(typeof z.then=="function")return he(K,ph(z),J);if(z.$$typeof===q)return he(K,hh(K,z),J);gh(K,z)}return null}function te(K,z,J,le){var ze=z!==null?z.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ze!==null?null:I(K,z,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case C:return J.key===ze?k(K,z,J,le):null;case L:return J.key===ze?Z(K,z,J,le):null;case A:return J=Fs(J),te(K,z,J,le)}if(ke(J)||M(J))return ze!==null?null:se(K,z,J,le,null);if(typeof J.then=="function")return te(K,z,ph(J),le);if(J.$$typeof===q)return te(K,z,hh(K,J),le);gh(K,J)}return null}function ie(K,z,J,le,ze){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return K=K.get(J)||null,I(z,K,""+le,ze);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case C:return K=K.get(le.key===null?J:le.key)||null,k(z,K,le,ze);case L:return K=K.get(le.key===null?J:le.key)||null,Z(z,K,le,ze);case A:return le=Fs(le),ie(K,z,J,le,ze)}if(ke(le)||M(le))return K=K.get(J)||null,se(z,K,le,ze,null);if(typeof le.then=="function")return ie(K,z,J,ph(le),ze);if(le.$$typeof===q)return ie(K,z,J,hh(z,le),ze);gh(z,le)}return null}function Ne(K,z,J,le){for(var ze=null,vt=null,Oe=z,rt=z=0,ht=null;Oe!==null&&rt<J.length;rt++){Oe.index>rt?(ht=Oe,Oe=null):ht=Oe.sibling;var _t=te(K,Oe,J[rt],le);if(_t===null){Oe===null&&(Oe=ht);break}r&&Oe&&_t.alternate===null&&i(K,Oe),z=p(_t,z,rt),vt===null?ze=_t:vt.sibling=_t,vt=_t,Oe=ht}if(rt===J.length)return o(K,Oe),gt&&qi(K,rt),ze;if(Oe===null){for(;rt<J.length;rt++)Oe=he(K,J[rt],le),Oe!==null&&(z=p(Oe,z,rt),vt===null?ze=Oe:vt.sibling=Oe,vt=Oe);return gt&&qi(K,rt),ze}for(Oe=u(Oe);rt<J.length;rt++)ht=ie(Oe,K,rt,J[rt],le),ht!==null&&(r&&ht.alternate!==null&&Oe.delete(ht.key===null?rt:ht.key),z=p(ht,z,rt),vt===null?ze=ht:vt.sibling=ht,vt=ht);return r&&Oe.forEach(function(Xa){return i(K,Xa)}),gt&&qi(K,rt),ze}function He(K,z,J,le){if(J==null)throw Error(a(151));for(var ze=null,vt=null,Oe=z,rt=z=0,ht=null,_t=J.next();Oe!==null&&!_t.done;rt++,_t=J.next()){Oe.index>rt?(ht=Oe,Oe=null):ht=Oe.sibling;var Xa=te(K,Oe,_t.value,le);if(Xa===null){Oe===null&&(Oe=ht);break}r&&Oe&&Xa.alternate===null&&i(K,Oe),z=p(Xa,z,rt),vt===null?ze=Xa:vt.sibling=Xa,vt=Xa,Oe=ht}if(_t.done)return o(K,Oe),gt&&qi(K,rt),ze;if(Oe===null){for(;!_t.done;rt++,_t=J.next())_t=he(K,_t.value,le),_t!==null&&(z=p(_t,z,rt),vt===null?ze=_t:vt.sibling=_t,vt=_t);return gt&&qi(K,rt),ze}for(Oe=u(Oe);!_t.done;rt++,_t=J.next())_t=ie(Oe,K,rt,_t.value,le),_t!==null&&(r&&_t.alternate!==null&&Oe.delete(_t.key===null?rt:_t.key),z=p(_t,z,rt),vt===null?ze=_t:vt.sibling=_t,vt=_t);return r&&Oe.forEach(function(FC){return i(K,FC)}),gt&&qi(K,rt),ze}function Pt(K,z,J,le){if(typeof J=="object"&&J!==null&&J.type===j&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case C:e:{for(var ze=J.key;z!==null;){if(z.key===ze){if(ze=J.type,ze===j){if(z.tag===7){o(K,z.sibling),le=f(z,J.props.children),le.return=K,K=le;break e}}else if(z.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===A&&Fs(ze)===z.type){o(K,z.sibling),le=f(z,J.props),lu(le,J),le.return=K,K=le;break e}o(K,z);break}else i(K,z);z=z.sibling}J.type===j?(le=Ls(J.props.children,K.mode,le,J.key),le.return=K,K=le):(le=lh(J.type,J.key,J.props,null,K.mode,le),lu(le,J),le.return=K,K=le)}return _(K);case L:e:{for(ze=J.key;z!==null;){if(z.key===ze)if(z.tag===4&&z.stateNode.containerInfo===J.containerInfo&&z.stateNode.implementation===J.implementation){o(K,z.sibling),le=f(z,J.children||[]),le.return=K,K=le;break e}else{o(K,z);break}else i(K,z);z=z.sibling}le=dm(J,K.mode,le),le.return=K,K=le}return _(K);case A:return J=Fs(J),Pt(K,z,J,le)}if(ke(J))return Ne(K,z,J,le);if(M(J)){if(ze=M(J),typeof ze!="function")throw Error(a(150));return J=ze.call(J),He(K,z,J,le)}if(typeof J.then=="function")return Pt(K,z,ph(J),le);if(J.$$typeof===q)return Pt(K,z,hh(K,J),le);gh(K,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,z!==null&&z.tag===6?(o(K,z.sibling),le=f(z,J),le.return=K,K=le):(o(K,z),le=fm(J,K.mode,le),le.return=K,K=le),_(K)):o(K,z)}return function(K,z,J,le){try{ou=0;var ze=Pt(K,z,J,le);return zo=null,ze}catch(Oe){if(Oe===jo||Oe===dh)throw Oe;var vt=_r(29,Oe,null,K.mode);return vt.lanes=le,vt.return=K,vt}finally{}}}var qs=o_(!0),l_=o_(!1),Ma=!1;function wm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Pa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Va(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(St&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=oh(r),Gv(r,null,o),i}return sh(r,u,i,o),oh(r)}function uu(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}function Cm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?f=p=i:p=p.next=i}else f=p=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var Im=!1;function cu(){if(Im){var r=Uo;if(r!==null)throw r}}function hu(r,i,o,u){Im=!1;var f=r.updateQueue;Ma=!1;var p=f.firstBaseUpdate,_=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var k=I,Z=k.next;k.next=null,_===null?p=Z:_.next=Z,_=k;var se=r.alternate;se!==null&&(se=se.updateQueue,I=se.lastBaseUpdate,I!==_&&(I===null?se.firstBaseUpdate=Z:I.next=Z,se.lastBaseUpdate=k))}if(p!==null){var he=f.baseState;_=0,se=Z=k=null,I=p;do{var te=I.lane&-536870913,ie=te!==I.lane;if(ie?(ct&te)===te:(u&te)===te){te!==0&&te===Lo&&(Im=!0),se!==null&&(se=se.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var Ne=r,He=I;te=i;var Pt=o;switch(He.tag){case 1:if(Ne=He.payload,typeof Ne=="function"){he=Ne.call(Pt,he,te);break e}he=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=He.payload,te=typeof Ne=="function"?Ne.call(Pt,he,te):Ne,te==null)break e;he=E({},he,te);break e;case 2:Ma=!0}}te=I.callback,te!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:I.tag,payload:I.payload,callback:I.callback,next:null},se===null?(Z=se=ie,k=he):se=se.next=ie,_|=te;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;ie=I,I=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);se===null&&(k=he),f.baseState=k,f.firstBaseUpdate=Z,f.lastBaseUpdate=se,p===null&&(f.shared.lanes=0),za|=_,r.lanes=_,r.memoizedState=he}}function u_(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function c_(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)u_(o[r],i)}var Bo=U(null),yh=U(0);function h_(r,i){r=ta,oe(yh,r),oe(Bo,i),ta=r|i.baseLanes}function Dm(){oe(yh,ta),oe(Bo,Bo.current)}function xm(){ta=yh.current,$(Bo),$(yh)}var Er=U(null),Br=null;function ka(r){var i=r.alternate;oe(ln,ln.current&1),oe(Er,r),Br===null&&(i===null||Bo.current!==null||i.memoizedState!==null)&&(Br=r)}function Nm(r){oe(ln,ln.current),oe(Er,r),Br===null&&(Br=r)}function f_(r){r.tag===22?(oe(ln,ln.current),oe(Er,r),Br===null&&(Br=r)):La()}function La(){oe(ln,ln.current),oe(Er,Er.current)}function Tr(r){$(Er),Br===r&&(Br=null),$(ln)}var ln=U(0);function vh(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Lp(o)||Up(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ki=0,et=null,Ot=null,mn=null,_h=!1,Fo=!1,Gs=!1,Eh=0,fu=0,Ho=null,O1=0;function rn(){throw Error(a(321))}function Om(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!vr(r[o],i[o]))return!1;return!0}function Mm(r,i,o,u,f,p){return Ki=p,et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=r===null||r.memoizedState===null?Q_:Ym,Gs=!1,p=o(u,f),Gs=!1,Fo&&(p=m_(i,o,u,f)),d_(r),p}function d_(r){X.H=pu;var i=Ot!==null&&Ot.next!==null;if(Ki=0,mn=Ot=et=null,_h=!1,fu=0,Ho=null,i)throw Error(a(300));r===null||pn||(r=r.dependencies,r!==null&&ch(r)&&(pn=!0))}function m_(r,i,o,u){et=r;var f=0;do{if(Fo&&(Ho=null),fu=0,Fo=!1,25<=f)throw Error(a(301));if(f+=1,mn=Ot=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=X_,p=i(o,u)}while(Fo);return p}function M1(){var r=X.H,i=r.useState()[0];return i=typeof i.then=="function"?du(i):i,r=r.useState()[0],(Ot!==null?Ot.memoizedState:null)!==r&&(et.flags|=1024),i}function Pm(){var r=Eh!==0;return Eh=0,r}function Vm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function km(r){if(_h){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_h=!1}Ki=0,mn=Ot=et=null,Fo=!1,fu=Eh=0,Ho=null}function Jn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?et.memoizedState=mn=r:mn=mn.next=r,mn}function un(){if(Ot===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=Ot.next;var i=mn===null?et.memoizedState:mn.next;if(i!==null)mn=i,Ot=r;else{if(r===null)throw et.alternate===null?Error(a(467)):Error(a(310));Ot=r,r={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},mn===null?et.memoizedState=mn=r:mn=mn.next=r}return mn}function Th(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(r){var i=fu;return fu+=1,Ho===null&&(Ho=[]),r=i_(Ho,r,i),i=et,(mn===null?i.memoizedState:mn.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?Q_:Ym),r}function bh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return du(r);if(r.$$typeof===q)return On(r)}throw Error(a(438,String(r)))}function Lm(r){var i=null,o=et.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=et.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=Th(),et.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=x;return i.index++,o}function Yi(r,i){return typeof i=="function"?i(r):i}function Sh(r){var i=un();return Um(i,Ot,r)}function Um(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var _=f.next;f.next=p.next,p.next=_}i.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{i=f.next;var I=_=null,k=null,Z=i,se=!1;do{var he=Z.lane&-536870913;if(he!==Z.lane?(ct&he)===he:(Ki&he)===he){var te=Z.revertLane;if(te===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),he===Lo&&(se=!0);else if((Ki&te)===te){Z=Z.next,te===Lo&&(se=!0);continue}else he={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},k===null?(I=k=he,_=p):k=k.next=he,et.lanes|=te,za|=te;he=Z.action,Gs&&o(p,he),p=Z.hasEagerState?Z.eagerState:o(p,he)}else te={lane:he,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},k===null?(I=k=te,_=p):k=k.next=te,et.lanes|=he,za|=he;Z=Z.next}while(Z!==null&&Z!==i);if(k===null?_=p:k.next=I,!vr(p,r.memoizedState)&&(pn=!0,se&&(o=Uo,o!==null)))throw o;r.memoizedState=p,r.baseState=_,r.baseQueue=k,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function jm(r){var i=un(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=i.memoizedState;if(f!==null){o.pending=null;var _=f=f.next;do p=r(p,_.action),_=_.next;while(_!==f);vr(p,i.memoizedState)||(pn=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),o.lastRenderedState=p}return[p,u]}function p_(r,i,o){var u=et,f=un(),p=gt;if(p){if(o===void 0)throw Error(a(407));o=o()}else o=i();var _=!vr((Ot||f).memoizedState,o);if(_&&(f.memoizedState=o,pn=!0),f=f.queue,Fm(v_.bind(null,u,f,r),[r]),f.getSnapshot!==i||_||mn!==null&&mn.memoizedState.tag&1){if(u.flags|=2048,qo(9,{destroy:void 0},y_.bind(null,u,f,o,i),null),Lt===null)throw Error(a(349));p||(Ki&127)!==0||g_(u,i,o)}return o}function g_(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=et.updateQueue,i===null?(i=Th(),et.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function y_(r,i,o,u){i.value=o,i.getSnapshot=u,__(i)&&E_(r)}function v_(r,i,o){return o(function(){__(i)&&E_(r)})}function __(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!vr(r,o)}catch{return!0}}function E_(r){var i=ks(r,2);i!==null&&cr(i,r,2)}function zm(r){var i=Jn();if(typeof r=="function"){var o=r;if(r=o(),Gs){Yn(!0);try{o()}finally{Yn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:r},i}function T_(r,i,o,u){return r.baseState=o,Um(r,Ot,typeof u=="function"?u:Yi)}function P1(r,i,o,u,f){if(Rh(r))throw Error(a(485));if(r=i.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){p.listeners.push(_)}};X.T!==null?o(!0):p.isTransition=!1,u(p),o=i.pending,o===null?(p.next=i.pending=p,b_(i,p)):(p.next=o.next,i.pending=o.next=p)}}function b_(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var p=X.T,_={};X.T=_;try{var I=o(f,u),k=X.S;k!==null&&k(_,I),S_(r,i,I)}catch(Z){Bm(r,i,Z)}finally{p!==null&&_.types!==null&&(p.types=_.types),X.T=p}}else try{p=o(f,u),S_(r,i,p)}catch(Z){Bm(r,i,Z)}}function S_(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){A_(r,i,u)},function(u){return Bm(r,i,u)}):A_(r,i,o)}function A_(r,i,o){i.status="fulfilled",i.value=o,w_(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,b_(r,o)))}function Bm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,w_(i),i=i.next;while(i!==u)}r.action=null}function w_(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function R_(r,i){return i}function C_(r,i){if(gt){var o=Lt.formState;if(o!==null){e:{var u=et;if(gt){if(Ht){t:{for(var f=Ht,p=zr;f.nodeType!==8;){if(!p){f=null;break t}if(f=Fr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){Ht=Fr(f.nextSibling),u=f.data==="F!";break e}}Na(u)}u=!1}u&&(i=o[0])}}return o=Jn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:R_,lastRenderedState:i},o.queue=u,o=$_.bind(null,et,u),u.dispatch=o,u=zm(!1),p=Km.bind(null,et,!1,u.queue),u=Jn(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=P1.bind(null,et,f,p,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function I_(r){var i=un();return D_(i,Ot,r)}function D_(r,i,o){if(i=Um(r,i,R_)[0],r=Sh(Yi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=du(i)}catch(_){throw _===jo?dh:_}else u=i;i=un();var f=i.queue,p=f.dispatch;return o!==i.memoizedState&&(et.flags|=2048,qo(9,{destroy:void 0},V1.bind(null,f,o),null)),[u,p,r]}function V1(r,i){r.action=i}function x_(r){var i=un(),o=Ot;if(o!==null)return D_(i,o,r);un(),i=i.memoizedState,o=un();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function qo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=et.updateQueue,i===null&&(i=Th(),et.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function N_(){return un().memoizedState}function Ah(r,i,o,u){var f=Jn();et.flags|=r,f.memoizedState=qo(1|i,{destroy:void 0},o,u===void 0?null:u)}function wh(r,i,o,u){var f=un();u=u===void 0?null:u;var p=f.memoizedState.inst;Ot!==null&&u!==null&&Om(u,Ot.memoizedState.deps)?f.memoizedState=qo(i,p,o,u):(et.flags|=r,f.memoizedState=qo(1|i,p,o,u))}function O_(r,i){Ah(8390656,8,r,i)}function Fm(r,i){wh(2048,8,r,i)}function k1(r){et.flags|=4;var i=et.updateQueue;if(i===null)i=Th(),et.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function M_(r){var i=un().memoizedState;return k1({ref:i,nextImpl:r}),function(){if((St&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function P_(r,i){return wh(4,2,r,i)}function V_(r,i){return wh(4,4,r,i)}function k_(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function L_(r,i,o){o=o!=null?o.concat([r]):null,wh(4,4,k_.bind(null,i,r),o)}function Hm(){}function U_(r,i){var o=un();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Om(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function j_(r,i){var o=un();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Om(i,u[1]))return u[0];if(u=r(),Gs){Yn(!0);try{r()}finally{Yn(!1)}}return o.memoizedState=[u,i],u}function qm(r,i,o){return o===void 0||(Ki&1073741824)!==0&&(ct&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=zE(),et.lanes|=r,za|=r,o)}function z_(r,i,o,u){return vr(o,i)?o:Bo.current!==null?(r=qm(r,o,u),vr(r,i)||(pn=!0),r):(Ki&42)===0||(Ki&1073741824)!==0&&(ct&261930)===0?(pn=!0,r.memoizedState=o):(r=zE(),et.lanes|=r,za|=r,i)}function B_(r,i,o,u,f){var p=de.p;de.p=p!==0&&8>p?p:8;var _=X.T,I={};X.T=I,Km(r,!1,i,o);try{var k=f(),Z=X.S;if(Z!==null&&Z(I,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var se=N1(k,u);mu(r,i,se,Ar(r))}else mu(r,i,u,Ar(r))}catch(he){mu(r,i,{then:function(){},status:"rejected",reason:he},Ar())}finally{de.p=p,_!==null&&I.types!==null&&(_.types=I.types),X.T=_}}function L1(){}function Gm(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=F_(r).queue;B_(r,f,i,ye,o===null?L1:function(){return H_(r),o(u)})}function F_(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:ye},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function H_(r){var i=F_(r);i.next===null&&(i=r.alternate.memoizedState),mu(r,i.next.queue,{},Ar())}function $m(){return On(Nu)}function q_(){return un().memoizedState}function G_(){return un().memoizedState}function U1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Ar();r=Pa(o);var u=Va(i,r,o);u!==null&&(cr(u,i,o),uu(u,i,o)),i={cache:Tm()},r.payload=i;return}i=i.return}}function j1(r,i,o){var u=Ar();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Rh(r)?K_(i,o):(o=cm(r,i,o,u),o!==null&&(cr(o,r,u),Y_(o,i,u)))}function $_(r,i,o){var u=Ar();mu(r,i,o,u)}function mu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Rh(r))K_(i,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var _=i.lastRenderedState,I=p(_,o);if(f.hasEagerState=!0,f.eagerState=I,vr(I,_))return sh(r,i,f,0),Lt===null&&ah(),!1}catch{}finally{}if(o=cm(r,i,f,u),o!==null)return cr(o,r,u),Y_(o,i,u),!0}return!1}function Km(r,i,o,u){if(u={lane:2,revertLane:wp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Rh(r)){if(i)throw Error(a(479))}else i=cm(r,o,u,2),i!==null&&cr(i,r,2)}function Rh(r){var i=r.alternate;return r===et||i!==null&&i===et}function K_(r,i){Fo=_h=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Y_(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,V(r,o)}}var pu={readContext:On,use:bh,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn,useHostTransitionStatus:rn,useFormState:rn,useActionState:rn,useOptimistic:rn,useMemoCache:rn,useCacheRefresh:rn};pu.useEffectEvent=rn;var Q_={readContext:On,use:bh,useCallback:function(r,i){return Jn().memoizedState=[r,i===void 0?null:i],r},useContext:On,useEffect:O_,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Ah(4194308,4,k_.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Ah(4194308,4,r,i)},useInsertionEffect:function(r,i){Ah(4,2,r,i)},useMemo:function(r,i){var o=Jn();i=i===void 0?null:i;var u=r();if(Gs){Yn(!0);try{r()}finally{Yn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Jn();if(o!==void 0){var f=o(i);if(Gs){Yn(!0);try{o(i)}finally{Yn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=j1.bind(null,et,r),[u.memoizedState,r]},useRef:function(r){var i=Jn();return r={current:r},i.memoizedState=r},useState:function(r){r=zm(r);var i=r.queue,o=$_.bind(null,et,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:Hm,useDeferredValue:function(r,i){var o=Jn();return qm(o,r,i)},useTransition:function(){var r=zm(!1);return r=B_.bind(null,et,r.queue,!0,!1),Jn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=et,f=Jn();if(gt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),Lt===null)throw Error(a(349));(ct&127)!==0||g_(u,i,o)}f.memoizedState=o;var p={value:o,getSnapshot:i};return f.queue=p,O_(v_.bind(null,u,p,r),[r]),u.flags|=2048,qo(9,{destroy:void 0},y_.bind(null,u,p,o,i),null),o},useId:function(){var r=Jn(),i=Lt.identifierPrefix;if(gt){var o=wi,u=Ai;o=(u&~(1<<32-Yt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=Eh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=O1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:$m,useFormState:C_,useActionState:C_,useOptimistic:function(r){var i=Jn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=Km.bind(null,et,!0,o),o.dispatch=i,[r,i]},useMemoCache:Lm,useCacheRefresh:function(){return Jn().memoizedState=U1.bind(null,et)},useEffectEvent:function(r){var i=Jn(),o={impl:r};return i.memoizedState=o,function(){if((St&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Ym={readContext:On,use:bh,useCallback:U_,useContext:On,useEffect:Fm,useImperativeHandle:L_,useInsertionEffect:P_,useLayoutEffect:V_,useMemo:j_,useReducer:Sh,useRef:N_,useState:function(){return Sh(Yi)},useDebugValue:Hm,useDeferredValue:function(r,i){var o=un();return z_(o,Ot.memoizedState,r,i)},useTransition:function(){var r=Sh(Yi)[0],i=un().memoizedState;return[typeof r=="boolean"?r:du(r),i]},useSyncExternalStore:p_,useId:q_,useHostTransitionStatus:$m,useFormState:I_,useActionState:I_,useOptimistic:function(r,i){var o=un();return T_(o,Ot,r,i)},useMemoCache:Lm,useCacheRefresh:G_};Ym.useEffectEvent=M_;var X_={readContext:On,use:bh,useCallback:U_,useContext:On,useEffect:Fm,useImperativeHandle:L_,useInsertionEffect:P_,useLayoutEffect:V_,useMemo:j_,useReducer:jm,useRef:N_,useState:function(){return jm(Yi)},useDebugValue:Hm,useDeferredValue:function(r,i){var o=un();return Ot===null?qm(o,r,i):z_(o,Ot.memoizedState,r,i)},useTransition:function(){var r=jm(Yi)[0],i=un().memoizedState;return[typeof r=="boolean"?r:du(r),i]},useSyncExternalStore:p_,useId:q_,useHostTransitionStatus:$m,useFormState:x_,useActionState:x_,useOptimistic:function(r,i){var o=un();return Ot!==null?T_(o,Ot,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Lm,useCacheRefresh:G_};X_.useEffectEvent=M_;function Qm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Xm={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Ar(),f=Pa(u);f.payload=i,o!=null&&(f.callback=o),i=Va(r,f,u),i!==null&&(cr(i,r,u),uu(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Ar(),f=Pa(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=Va(r,f,u),i!==null&&(cr(i,r,u),uu(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Ar(),u=Pa(o);u.tag=2,i!=null&&(u.callback=i),i=Va(r,u,o),i!==null&&(cr(i,r,o),uu(i,r,o))}};function W_(r,i,o,u,f,p,_){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,_):i.prototype&&i.prototype.isPureReactComponent?!tu(o,u)||!tu(f,p):!0}function J_(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&Xm.enqueueReplaceState(i,i.state,null)}function $s(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function Z_(r){ih(r)}function eE(r){console.error(r)}function tE(r){ih(r)}function Ch(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function nE(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Wm(r,i,o){return o=Pa(o),o.tag=3,o.payload={element:null},o.callback=function(){Ch(r,i)},o}function rE(r){return r=Pa(r),r.tag=3,r}function iE(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){nE(i,o,u)}}var _=o.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){nE(i,o,u),typeof f!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function z1(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&ko(i,o,f,!0),o=Er.current,o!==null){switch(o.tag){case 31:case 13:return Br===null?jh():o.alternate===null&&an===0&&(an=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===mh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),bp(r,u,f)),!1;case 22:return o.flags|=65536,u===mh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),bp(r,u,f)),!1}throw Error(a(435,o.tag))}return bp(r,u,f),jh(),!1}if(gt)return i=Er.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==gm&&(r=Error(a(422),{cause:u}),iu(Lr(r,o)))):(u!==gm&&(i=Error(a(423),{cause:u}),iu(Lr(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Lr(u,o),f=Wm(r.stateNode,u,f),Cm(r,f),an!==4&&(an=2)),!1;var p=Error(a(520),{cause:u});if(p=Lr(p,o),Su===null?Su=[p]:Su.push(p),an!==4&&(an=2),i===null)return!0;u=Lr(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=Wm(o.stateNode,u,r),Cm(o,r),!1;case 1:if(i=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ba===null||!Ba.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=rE(f),iE(f,r,o,u),Cm(o,f),!1}o=o.return}while(o!==null);return!1}var Jm=Error(a(461)),pn=!1;function Mn(r,i,o,u){i.child=r===null?l_(i,null,o,u):qs(i,r.child,o,u)}function aE(r,i,o,u,f){o=o.render;var p=i.ref;if("ref"in u){var _={};for(var I in u)I!=="ref"&&(_[I]=u[I])}else _=u;return zs(i),u=Mm(r,i,o,_,p,f),I=Pm(),r!==null&&!pn?(Vm(r,i,f),Qi(r,i,f)):(gt&&I&&mm(i),i.flags|=1,Mn(r,i,u,f),i.child)}function sE(r,i,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!hm(p)&&p.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=p,oE(r,i,p,u,f)):(r=lh(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(p=r.child,!sp(r,f)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:tu,o(_,u)&&r.ref===i.ref)return Qi(r,i,f)}return i.flags|=1,r=Hi(p,u),r.ref=i.ref,r.return=i,i.child=r}function oE(r,i,o,u,f){if(r!==null){var p=r.memoizedProps;if(tu(p,u)&&r.ref===i.ref)if(pn=!1,i.pendingProps=u=p,sp(r,f))(r.flags&131072)!==0&&(pn=!0);else return i.lanes=r.lanes,Qi(r,i,f)}return Zm(r,i,o,u,f)}function lE(r,i,o,u){var f=u.children,p=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~p}else u=0,i.child=null;return uE(r,i,p,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&fh(i,p!==null?p.cachePool:null),p!==null?h_(i,p):Dm(),f_(i);else return u=i.lanes=536870912,uE(r,i,p!==null?p.baseLanes|o:o,o,u)}else p!==null?(fh(i,p.cachePool),h_(i,p),La(),i.memoizedState=null):(r!==null&&fh(i,null),Dm(),La());return Mn(r,i,f,o),i.child}function gu(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function uE(r,i,o,u,f){var p=Sm();return p=p===null?null:{parent:dn._currentValue,pool:p},i.memoizedState={baseLanes:o,cachePool:p},r!==null&&fh(i,null),Dm(),f_(i),r!==null&&ko(r,i,u,!0),i.childLanes=f,null}function Ih(r,i){return i=xh({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function cE(r,i,o){return qs(i,r.child,null,o),r=Ih(i,i.pendingProps),r.flags|=2,Tr(i),i.memoizedState=null,r}function B1(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(gt){if(u.mode==="hidden")return r=Ih(i,u),i.lanes=536870912,gu(null,r);if(Nm(i),(r=Ht)?(r=bT(r,zr),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Ai,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},o=Kv(r),o.return=i,i.child=o,Nn=i,Ht=null)):r=null,r===null)throw Na(i);return i.lanes=536870912,null}return Ih(i,u)}var p=r.memoizedState;if(p!==null){var _=p.dehydrated;if(Nm(i),f)if(i.flags&256)i.flags&=-257,i=cE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(pn||ko(r,i,o,!1),f=(o&r.childLanes)!==0,pn||f){if(u=Lt,u!==null&&(_=H(u,o),_!==0&&_!==p.retryLane))throw p.retryLane=_,ks(r,_),cr(u,r,_),Jm;jh(),i=cE(r,i,o)}else r=p.treeContext,Ht=Fr(_.nextSibling),Nn=i,gt=!0,xa=null,zr=!1,r!==null&&Xv(i,r),i=Ih(i,u),i.flags|=4096;return i}return r=Hi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Dh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Zm(r,i,o,u,f){return zs(i),o=Mm(r,i,o,u,void 0,f),u=Pm(),r!==null&&!pn?(Vm(r,i,f),Qi(r,i,f)):(gt&&u&&mm(i),i.flags|=1,Mn(r,i,o,f),i.child)}function hE(r,i,o,u,f,p){return zs(i),i.updateQueue=null,o=m_(i,u,o,f),d_(r),u=Pm(),r!==null&&!pn?(Vm(r,i,p),Qi(r,i,p)):(gt&&u&&mm(i),i.flags|=1,Mn(r,i,o,p),i.child)}function fE(r,i,o,u,f){if(zs(i),i.stateNode===null){var p=Oo,_=o.contextType;typeof _=="object"&&_!==null&&(p=On(_)),p=new o(u,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Xm,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=u,p.state=i.memoizedState,p.refs={},wm(i),_=o.contextType,p.context=typeof _=="object"&&_!==null?On(_):Oo,p.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Qm(i,o,_,u),p.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(_=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),_!==p.state&&Xm.enqueueReplaceState(p,p.state,null),hu(i,u,p,f),cu(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){p=i.stateNode;var I=i.memoizedProps,k=$s(o,I);p.props=k;var Z=p.context,se=o.contextType;_=Oo,typeof se=="object"&&se!==null&&(_=On(se));var he=o.getDerivedStateFromProps;se=typeof he=="function"||typeof p.getSnapshotBeforeUpdate=="function",I=i.pendingProps!==I,se||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(I||Z!==_)&&J_(i,p,u,_),Ma=!1;var te=i.memoizedState;p.state=te,hu(i,u,p,f),cu(),Z=i.memoizedState,I||te!==Z||Ma?(typeof he=="function"&&(Qm(i,o,he,u),Z=i.memoizedState),(k=Ma||W_(i,o,k,u,te,Z,_))?(se||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),p.props=u,p.state=Z,p.context=_,u=k):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{p=i.stateNode,Rm(r,i),_=i.memoizedProps,se=$s(o,_),p.props=se,he=i.pendingProps,te=p.context,Z=o.contextType,k=Oo,typeof Z=="object"&&Z!==null&&(k=On(Z)),I=o.getDerivedStateFromProps,(Z=typeof I=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(_!==he||te!==k)&&J_(i,p,u,k),Ma=!1,te=i.memoizedState,p.state=te,hu(i,u,p,f),cu();var ie=i.memoizedState;_!==he||te!==ie||Ma||r!==null&&r.dependencies!==null&&ch(r.dependencies)?(typeof I=="function"&&(Qm(i,o,I,u),ie=i.memoizedState),(se=Ma||W_(i,o,se,u,te,ie,k)||r!==null&&r.dependencies!==null&&ch(r.dependencies))?(Z||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,ie,k),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,ie,k)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ie),p.props=u,p.state=ie,p.context=k,u=se):(typeof p.componentDidUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||_===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),u=!1)}return p=u,Dh(r,i),u=(i.flags&128)!==0,p||u?(p=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,r!==null&&u?(i.child=qs(i,r.child,null,f),i.child=qs(i,null,o,f)):Mn(r,i,o,f),i.memoizedState=p.state,r=i.child):r=Qi(r,i,f),r}function dE(r,i,o,u){return Us(),i.flags|=256,Mn(r,i,o,u),i.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tp(r){return{baseLanes:r,cachePool:n_()}}function np(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=Sr),r}function mE(r,i,o){var u=i.pendingProps,f=!1,p=(i.flags&128)!==0,_;if((_=p)||(_=r!==null&&r.memoizedState===null?!1:(ln.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,r===null){if(gt){if(f?ka(i):La(),(r=Ht)?(r=bT(r,zr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Da!==null?{id:Ai,overflow:wi}:null,retryLane:536870912,hydrationErrors:null},o=Kv(r),o.return=i,i.child=o,Nn=i,Ht=null)):r=null,r===null)throw Na(i);return Up(r)?i.lanes=32:i.lanes=536870912,null}var I=u.children;return u=u.fallback,f?(La(),f=i.mode,I=xh({mode:"hidden",children:I},f),u=Ls(u,f,o,null),I.return=i,u.return=i,I.sibling=u,i.child=I,u=i.child,u.memoizedState=tp(o),u.childLanes=np(r,_,o),i.memoizedState=ep,gu(null,u)):(ka(i),rp(i,I))}var k=r.memoizedState;if(k!==null&&(I=k.dehydrated,I!==null)){if(p)i.flags&256?(ka(i),i.flags&=-257,i=ip(r,i,o)):i.memoizedState!==null?(La(),i.child=r.child,i.flags|=128,i=null):(La(),I=u.fallback,f=i.mode,u=xh({mode:"visible",children:u.children},f),I=Ls(I,f,o,null),I.flags|=2,u.return=i,I.return=i,u.sibling=I,i.child=u,qs(i,r.child,null,o),u=i.child,u.memoizedState=tp(o),u.childLanes=np(r,_,o),i.memoizedState=ep,i=gu(null,u));else if(ka(i),Up(I)){if(_=I.nextSibling&&I.nextSibling.dataset,_)var Z=_.dgst;_=Z,u=Error(a(419)),u.stack="",u.digest=_,iu({value:u,source:null,stack:null}),i=ip(r,i,o)}else if(pn||ko(r,i,o,!1),_=(o&r.childLanes)!==0,pn||_){if(_=Lt,_!==null&&(u=H(_,o),u!==0&&u!==k.retryLane))throw k.retryLane=u,ks(r,u),cr(_,r,u),Jm;Lp(I)||jh(),i=ip(r,i,o)}else Lp(I)?(i.flags|=192,i.child=r.child,i=null):(r=k.treeContext,Ht=Fr(I.nextSibling),Nn=i,gt=!0,xa=null,zr=!1,r!==null&&Xv(i,r),i=rp(i,u.children),i.flags|=4096);return i}return f?(La(),I=u.fallback,f=i.mode,k=r.child,Z=k.sibling,u=Hi(k,{mode:"hidden",children:u.children}),u.subtreeFlags=k.subtreeFlags&65011712,Z!==null?I=Hi(Z,I):(I=Ls(I,f,o,null),I.flags|=2),I.return=i,u.return=i,u.sibling=I,i.child=u,gu(null,u),u=i.child,I=r.child.memoizedState,I===null?I=tp(o):(f=I.cachePool,f!==null?(k=dn._currentValue,f=f.parent!==k?{parent:k,pool:k}:f):f=n_(),I={baseLanes:I.baseLanes|o,cachePool:f}),u.memoizedState=I,u.childLanes=np(r,_,o),i.memoizedState=ep,gu(r.child,u)):(ka(i),o=r.child,r=o.sibling,o=Hi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(_=i.deletions,_===null?(i.deletions=[r],i.flags|=16):_.push(r)),i.child=o,i.memoizedState=null,o)}function rp(r,i){return i=xh({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function xh(r,i){return r=_r(22,r,null,i),r.lanes=0,r}function ip(r,i,o){return qs(i,r.child,null,o),r=rp(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function pE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),_m(r.return,i,o)}function ap(r,i,o,u,f,p){var _=r.memoizedState;_===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:p}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=o,_.tailMode=f,_.treeForkCount=p)}function gE(r,i,o){var u=i.pendingProps,f=u.revealOrder,p=u.tail;u=u.children;var _=ln.current,I=(_&2)!==0;if(I?(_=_&1|2,i.flags|=128):_&=1,oe(ln,_),Mn(r,i,u,o),u=gt?ru:0,!I&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&pE(r,o,i);else if(r.tag===19)pE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&vh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),ap(i,!1,f,o,p,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&vh(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}ap(i,!0,o,null,p,u);break;case"together":ap(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Qi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),za|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(ko(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Hi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Hi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function sp(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&ch(r)))}function F1(r,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),Oa(i,dn,r.memoizedState.cache),Us();break;case 27:case 5:$t(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:Oa(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Nm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(ka(i),i.flags|=128,null):(o&i.child.childLanes)!==0?mE(r,i,o):(ka(i),r=Qi(r,i,o),r!==null?r.sibling:null);ka(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(ko(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return gE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(ln,ln.current),u)break;return null;case 22:return i.lanes=0,lE(r,i,o,i.pendingProps);case 24:Oa(i,dn,r.memoizedState.cache)}return Qi(r,i,o)}function yE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)pn=!0;else{if(!sp(r,o)&&(i.flags&128)===0)return pn=!1,F1(r,i,o);pn=(r.flags&131072)!==0}else pn=!1,gt&&(i.flags&1048576)!==0&&Qv(i,ru,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Fs(i.elementType),i.type=r,typeof r=="function")hm(r)?(u=$s(r,u),i.tag=1,i=fE(null,i,r,u,o)):(i.tag=0,i=Zm(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===Y){i.tag=11,i=aE(null,i,r,u,o);break e}else if(f===S){i.tag=14,i=sE(null,i,r,u,o);break e}}throw i=be(r)||r,Error(a(306,i,""))}}return i;case 0:return Zm(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=$s(u,i.pendingProps),fE(r,i,u,f,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var p=i.memoizedState;f=p.element,Rm(r,i),hu(i,u,null,o);var _=i.memoizedState;if(u=_.cache,Oa(i,dn,u),u!==p.cache&&Em(i,[dn],o,!0),cu(),u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=dE(r,i,u,o);break e}else if(u!==f){f=Lr(Error(a(424)),i),iu(f),i=dE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ht=Fr(r.firstChild),Nn=i,gt=!0,xa=null,zr=!0,o=l_(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Us(),u===f){i=Qi(r,i,o);break e}Mn(r,i,u,o)}i=i.child}return i;case 26:return Dh(r,i),r===null?(o=IT(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,r=i.pendingProps,u=$h(Ee.current).createElement(o),u[_e]=i,u[Se]=r,Pn(u,o,r),zt(u),i.stateNode=u):i.memoizedState=IT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return $t(i),r===null&&gt&&(u=i.stateNode=wT(i.type,i.pendingProps,Ee.current),Nn=i,zr=!0,f=Ht,Ga(i.type)?(jp=f,Ht=Fr(u.firstChild)):Ht=f),Mn(r,i,i.pendingProps.children,o),Dh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&gt&&((f=u=Ht)&&(u=vC(u,i.type,i.pendingProps,zr),u!==null?(i.stateNode=u,Nn=i,Ht=Fr(u.firstChild),zr=!1,f=!0):f=!1),f||Na(i)),$t(i),f=i.type,p=i.pendingProps,_=r!==null?r.memoizedProps:null,u=p.children,Pp(f,p)?u=null:_!==null&&Pp(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=Mm(r,i,M1,null,null,o),Nu._currentValue=f),Dh(r,i),Mn(r,i,u,o),i.child;case 6:return r===null&&gt&&((r=o=Ht)&&(o=_C(o,i.pendingProps,zr),o!==null?(i.stateNode=o,Nn=i,Ht=null,r=!0):r=!1),r||Na(i)),null;case 13:return mE(r,i,o);case 4:return Ke(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=qs(i,null,u,o):Mn(r,i,u,o),i.child;case 11:return aE(r,i,i.type,i.pendingProps,o);case 7:return Mn(r,i,i.pendingProps,o),i.child;case 8:return Mn(r,i,i.pendingProps.children,o),i.child;case 12:return Mn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Oa(i,i.type,u.value),Mn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,zs(i),f=On(f),u=u(f),i.flags|=1,Mn(r,i,u,o),i.child;case 14:return sE(r,i,i.type,i.pendingProps,o);case 15:return oE(r,i,i.type,i.pendingProps,o);case 19:return gE(r,i,o);case 31:return B1(r,i,o);case 22:return lE(r,i,o,i.pendingProps);case 24:return zs(i),u=On(dn),r===null?(f=Sm(),f===null&&(f=Lt,p=Tm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),i.memoizedState={parent:u,cache:f},wm(i),Oa(i,dn,f)):((r.lanes&o)!==0&&(Rm(r,i),hu(i,null,null,o),cu()),f=r.memoizedState,p=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Oa(i,dn,u)):(u=p.cache,Oa(i,dn,u),u!==f.cache&&Em(i,[dn],o,!0))),Mn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Xi(r){r.flags|=4}function op(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(qE())r.flags|=8192;else throw Hs=mh,Am}else r.flags&=-16777217}function vE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!MT(i))if(qE())r.flags|=8192;else throw Hs=mh,Am}function Nh(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?Ui():536870912,r.lanes|=i,Yo|=i)}function yu(r,i){if(!gt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function qt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function H1(r,i,o){var u=i.pendingProps;switch(pm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(i),null;case 1:return qt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),$i(dn),ot(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Vo(i)?Xi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ym())),qt(i),null;case 26:var f=i.type,p=i.memoizedState;return r===null?(Xi(i),p!==null?(qt(i),vE(i,p)):(qt(i),op(i,f,null,u,o))):p?p!==r.memoizedState?(Xi(i),qt(i),vE(i,p)):(qt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Xi(i),qt(i),op(i,f,r,u,o)),null;case 27:if(Rn(i),o=Ee.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}r=ce.current,Vo(i)?Wv(i):(r=wT(f,u,o),i.stateNode=r,Xi(i))}return qt(i),null;case 5:if(Rn(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return qt(i),null}if(p=ce.current,Vo(i))Wv(i);else{var _=$h(Ee.current);switch(p){case 1:p=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:p=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":p=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":p=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":p=_.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?_.createElement("select",{is:u.is}):_.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?_.createElement(f,{is:u.is}):_.createElement(f)}}p[_e]=i,p[Se]=u;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)p.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=p;e:switch(Pn(p,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Xi(i)}}return qt(i),op(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Xi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Ee.current,Vo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=Nn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[_e]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||mT(r.nodeValue,o)),r||Na(i,!0)}else r=$h(r).createTextNode(u),r[_e]=i,i.stateNode=r}return qt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Vo(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[_e]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),r=!1}else o=ym(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(Tr(i),i):(Tr(i),null);if((i.flags&128)!==0)throw Error(a(558))}return qt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Vo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[_e]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;qt(i),f=!1}else f=ym(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Tr(i),i):(Tr(i),null)}return Tr(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Nh(i,i.updateQueue),qt(i),null);case 4:return ot(),r===null&&Dp(i.stateNode.containerInfo),qt(i),null;case 10:return $i(i.type),qt(i),null;case 19:if($(ln),u=i.memoizedState,u===null)return qt(i),null;if(f=(i.flags&128)!==0,p=u.rendering,p===null)if(f)yu(u,!1);else{if(an!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(p=vh(r),p!==null){for(i.flags|=128,yu(u,!1),r=p.updateQueue,i.updateQueue=r,Nh(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)$v(o,r),o=o.sibling;return oe(ln,ln.current&1|2),gt&&qi(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Ye()>kh&&(i.flags|=128,f=!0,yu(u,!1),i.lanes=4194304)}else{if(!f)if(r=vh(p),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Nh(i,r),yu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!gt)return qt(i),null}else 2*Ye()-u.renderingStartTime>kh&&o!==536870912&&(i.flags|=128,f=!0,yu(u,!1),i.lanes=4194304);u.isBackwards?(p.sibling=i.child,i.child=p):(r=u.last,r!==null?r.sibling=p:i.child=p,u.last=p)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Ye(),r.sibling=null,o=ln.current,oe(ln,f?o&1|2:o&1),gt&&qi(i,u.treeForkCount),r):(qt(i),null);case 22:case 23:return Tr(i),xm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(qt(i),i.subtreeFlags&6&&(i.flags|=8192)):qt(i),o=i.updateQueue,o!==null&&Nh(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&$(Bs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),$i(dn),qt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function q1(r,i){switch(pm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return $i(dn),ot(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Rn(i),null;case 31:if(i.memoizedState!==null){if(Tr(i),i.alternate===null)throw Error(a(340));Us()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(Tr(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Us()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return $(ln),null;case 4:return ot(),null;case 10:return $i(i.type),null;case 22:case 23:return Tr(i),xm(),r!==null&&$(Bs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return $i(dn),null;case 25:return null;default:return null}}function _E(r,i){switch(pm(i),i.tag){case 3:$i(dn),ot();break;case 26:case 27:case 5:Rn(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&Tr(i);break;case 13:Tr(i);break;case 19:$(ln);break;case 10:$i(i.type);break;case 22:case 23:Tr(i),xm(),r!==null&&$(Bs);break;case 24:$i(dn)}}function vu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,_=o.inst;u=p(),_.destroy=u}o=o.next}while(o!==f)}}catch(I){Ct(i,i.return,I)}}function Ua(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var _=u.inst,I=_.destroy;if(I!==void 0){_.destroy=void 0,f=i;var k=o,Z=I;try{Z()}catch(se){Ct(f,k,se)}}}u=u.next}while(u!==p)}}catch(se){Ct(i,i.return,se)}}function EE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{c_(i,o)}catch(u){Ct(r,r.return,u)}}}function TE(r,i,o){o.props=$s(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){Ct(r,i,u)}}function _u(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){Ct(r,i,f)}}function Ri(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){Ct(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){Ct(r,i,f)}else o.current=null}function bE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){Ct(r,r.return,f)}}function lp(r,i,o){try{var u=r.stateNode;fC(u,r.type,o,i),u[Se]=i}catch(f){Ct(r,r.return,f)}}function SE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Ga(r.type)||r.tag===4}function up(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||SE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Ga(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function cp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Wr));else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(cp(r,i,o),r=r.sibling;r!==null;)cp(r,i,o),r=r.sibling}function Oh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&Ga(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Oh(r,i,o),r=r.sibling;r!==null;)Oh(r,i,o),r=r.sibling}function AE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Pn(i,u,o),i[_e]=r,i[Se]=o}catch(p){Ct(r,r.return,p)}}var Wi=!1,gn=!1,hp=!1,wE=typeof WeakSet=="function"?WeakSet:Set,In=null;function G1(r,i){if(r=r.containerInfo,Op=Zh,r=Lv(r),im(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,I=-1,k=-1,Z=0,se=0,he=r,te=null;t:for(;;){for(var ie;he!==o||f!==0&&he.nodeType!==3||(I=_+f),he!==p||u!==0&&he.nodeType!==3||(k=_+u),he.nodeType===3&&(_+=he.nodeValue.length),(ie=he.firstChild)!==null;)te=he,he=ie;for(;;){if(he===r)break t;if(te===o&&++Z===f&&(I=_),te===p&&++se===u&&(k=_),(ie=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=ie}o=I===-1||k===-1?null:{start:I,end:k}}else o=null}o=o||{start:0,end:0}}else o=null;for(Mp={focusedElem:r,selectionRange:o},Zh=!1,In=i;In!==null;)if(i=In,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,In=r;else for(;In!==null;){switch(i=In,p=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=i,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var Ne=$s(o.type,f);r=u.getSnapshotBeforeUpdate(Ne,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(He){Ct(o,o.return,He)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)kp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":kp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,In=r;break}In=i.return}}function RE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Zi(r,o),u&4&&vu(5,o);break;case 1:if(Zi(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(_){Ct(o,o.return,_)}else{var f=$s(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(_){Ct(o,o.return,_)}}u&64&&EE(o),u&512&&_u(o,o.return);break;case 3:if(Zi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{c_(r,i)}catch(_){Ct(o,o.return,_)}}break;case 27:i===null&&u&4&&AE(o);case 26:case 5:Zi(r,o),i===null&&u&4&&bE(o),u&512&&_u(o,o.return);break;case 12:Zi(r,o);break;case 31:Zi(r,o),u&4&&DE(r,o);break;case 13:Zi(r,o),u&4&&xE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=eC.bind(null,o),EC(r,o))));break;case 22:if(u=o.memoizedState!==null||Wi,!u){i=i!==null&&i.memoizedState!==null||gn,f=Wi;var p=gn;Wi=u,(gn=i)&&!p?ea(r,o,(o.subtreeFlags&8772)!==0):Zi(r,o),Wi=f,gn=p}break;case 30:break;default:Zi(r,o)}}function CE(r){var i=r.alternate;i!==null&&(r.alternate=null,CE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&Ft(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Wt=null,sr=!1;function Ji(r,i,o){for(o=o.child;o!==null;)IE(r,i,o),o=o.sibling}function IE(r,i,o){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(dr,o)}catch{}switch(o.tag){case 26:gn||Ri(o,i),Ji(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:gn||Ri(o,i);var u=Wt,f=sr;Ga(o.type)&&(Wt=o.stateNode,sr=!1),Ji(r,i,o),Iu(o.stateNode),Wt=u,sr=f;break;case 5:gn||Ri(o,i);case 6:if(u=Wt,f=sr,Wt=null,Ji(r,i,o),Wt=u,sr=f,Wt!==null)if(sr)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(o.stateNode)}catch(p){Ct(o,i,p)}else try{Wt.removeChild(o.stateNode)}catch(p){Ct(o,i,p)}break;case 18:Wt!==null&&(sr?(r=Wt,ET(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),nl(r)):ET(Wt,o.stateNode));break;case 4:u=Wt,f=sr,Wt=o.stateNode.containerInfo,sr=!0,Ji(r,i,o),Wt=u,sr=f;break;case 0:case 11:case 14:case 15:Ua(2,o,i),gn||Ua(4,o,i),Ji(r,i,o);break;case 1:gn||(Ri(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&TE(o,i,u)),Ji(r,i,o);break;case 21:Ji(r,i,o);break;case 22:gn=(u=gn)||o.memoizedState!==null,Ji(r,i,o),gn=u;break;default:Ji(r,i,o)}}function DE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{nl(r)}catch(o){Ct(i,i.return,o)}}}function xE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{nl(r)}catch(o){Ct(i,i.return,o)}}function $1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new wE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new wE),i;default:throw Error(a(435,r.tag))}}function Mh(r,i){var o=$1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=tC.bind(null,r,u);u.then(f,f)}})}function or(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,_=i,I=_;e:for(;I!==null;){switch(I.tag){case 27:if(Ga(I.type)){Wt=I.stateNode,sr=!1;break e}break;case 5:Wt=I.stateNode,sr=!1;break e;case 3:case 4:Wt=I.stateNode.containerInfo,sr=!0;break e}I=I.return}if(Wt===null)throw Error(a(160));IE(p,_,f),Wt=null,sr=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)NE(i,r),i=i.sibling}var ri=null;function NE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:or(i,r),lr(r),u&4&&(Ua(3,r,r.return),vu(3,r),Ua(5,r,r.return));break;case 1:or(i,r),lr(r),u&512&&(gn||o===null||Ri(o,o.return)),u&64&&Wi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ri;if(or(i,r),lr(r),u&512&&(gn||o===null||Ri(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Dt]||p[_e]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Pn(p,u,o),p[_e]=r,zt(p),u=p;break e;case"link":var _=NT("link","href",f).get(u+(o.href||""));if(_){for(var I=0;I<_.length;I++)if(p=_[I],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){_.splice(I,1);break t}}p=f.createElement(u),Pn(p,u,o),f.head.appendChild(p);break;case"meta":if(_=NT("meta","content",f).get(u+(o.content||""))){for(I=0;I<_.length;I++)if(p=_[I],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){_.splice(I,1);break t}}p=f.createElement(u),Pn(p,u,o),f.head.appendChild(p);break;default:throw Error(a(468,u))}p[_e]=r,zt(p),u=p}r.stateNode=u}else OT(f,r.type,r.stateNode);else r.stateNode=xT(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?OT(f,r.type,r.stateNode):xT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&lp(r,r.memoizedProps,o.memoizedProps)}break;case 27:or(i,r),lr(r),u&512&&(gn||o===null||Ri(o,o.return)),o!==null&&u&4&&lp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(or(i,r),lr(r),u&512&&(gn||o===null||Ri(o,o.return)),r.flags&32){f=r.stateNode;try{ar(f,"")}catch(Ne){Ct(r,r.return,Ne)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,lp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(hp=!0);break;case 6:if(or(i,r),lr(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(Ne){Ct(r,r.return,Ne)}}break;case 3:if(Qh=null,f=ri,ri=Kh(i.containerInfo),or(i,r),ri=f,lr(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{nl(i.containerInfo)}catch(Ne){Ct(r,r.return,Ne)}hp&&(hp=!1,OE(r));break;case 4:u=ri,ri=Kh(r.stateNode.containerInfo),or(i,r),lr(r),ri=u;break;case 12:or(i,r),lr(r);break;case 31:or(i,r),lr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Mh(r,u)));break;case 13:or(i,r),lr(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Vh=Ye()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Mh(r,u)));break;case 22:f=r.memoizedState!==null;var k=o!==null&&o.memoizedState!==null,Z=Wi,se=gn;if(Wi=Z||f,gn=se||k,or(i,r),gn=se,Wi=Z,lr(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||k||Wi||gn||Ks(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){k=o=i;try{if(p=k.stateNode,f)_=p.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{I=k.stateNode;var he=k.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;I.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(Ne){Ct(k,k.return,Ne)}}}else if(i.tag===6){if(o===null){k=i;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(Ne){Ct(k,k.return,Ne)}}}else if(i.tag===18){if(o===null){k=i;try{var ie=k.stateNode;f?TT(ie,!0):TT(k.stateNode,!1)}catch(Ne){Ct(k,k.return,Ne)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Mh(r,o))));break;case 19:or(i,r),lr(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Mh(r,u)));break;case 30:break;case 21:break;default:or(i,r),lr(r)}}function lr(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(SE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,p=up(r);Oh(r,p,f);break;case 5:var _=o.stateNode;o.flags&32&&(ar(_,""),o.flags&=-33);var I=up(r);Oh(r,I,_);break;case 3:case 4:var k=o.stateNode.containerInfo,Z=up(r);cp(r,Z,k);break;default:throw Error(a(161))}}catch(se){Ct(r,r.return,se)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function OE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;OE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function Zi(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)RE(r,i.alternate,i),i=i.sibling}function Ks(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:Ua(4,i,i.return),Ks(i);break;case 1:Ri(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&TE(i,i.return,o),Ks(i);break;case 27:Iu(i.stateNode);case 26:case 5:Ri(i,i.return),Ks(i);break;case 22:i.memoizedState===null&&Ks(i);break;case 30:Ks(i);break;default:Ks(i)}r=r.sibling}}function ea(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,p=i,_=p.flags;switch(p.tag){case 0:case 11:case 15:ea(f,p,o),vu(4,p);break;case 1:if(ea(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){Ct(u,u.return,Z)}if(u=p,f=u.updateQueue,f!==null){var I=u.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)u_(k[f],I)}catch(Z){Ct(u,u.return,Z)}}o&&_&64&&EE(p),_u(p,p.return);break;case 27:AE(p);case 26:case 5:ea(f,p,o),o&&u===null&&_&4&&bE(p),_u(p,p.return);break;case 12:ea(f,p,o);break;case 31:ea(f,p,o),o&&_&4&&DE(f,p);break;case 13:ea(f,p,o),o&&_&4&&xE(f,p);break;case 22:p.memoizedState===null&&ea(f,p,o),_u(p,p.return);break;case 30:break;default:ea(f,p,o)}i=i.sibling}}function fp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&au(o))}function dp(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&au(r))}function ii(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ME(r,i,o,u),i=i.sibling}function ME(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ii(r,i,o,u),f&2048&&vu(9,i);break;case 1:ii(r,i,o,u);break;case 3:ii(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&au(r)));break;case 12:if(f&2048){ii(r,i,o,u),r=i.stateNode;try{var p=i.memoizedProps,_=p.id,I=p.onPostCommit;typeof I=="function"&&I(_,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(k){Ct(i,i.return,k)}}else ii(r,i,o,u);break;case 31:ii(r,i,o,u);break;case 13:ii(r,i,o,u);break;case 23:break;case 22:p=i.stateNode,_=i.alternate,i.memoizedState!==null?p._visibility&2?ii(r,i,o,u):Eu(r,i):p._visibility&2?ii(r,i,o,u):(p._visibility|=2,Go(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&fp(_,i);break;case 24:ii(r,i,o,u),f&2048&&dp(i.alternate,i);break;default:ii(r,i,o,u)}}function Go(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var p=r,_=i,I=o,k=u,Z=_.flags;switch(_.tag){case 0:case 11:case 15:Go(p,_,I,k,f),vu(8,_);break;case 23:break;case 22:var se=_.stateNode;_.memoizedState!==null?se._visibility&2?Go(p,_,I,k,f):Eu(p,_):(se._visibility|=2,Go(p,_,I,k,f)),f&&Z&2048&&fp(_.alternate,_);break;case 24:Go(p,_,I,k,f),f&&Z&2048&&dp(_.alternate,_);break;default:Go(p,_,I,k,f)}i=i.sibling}}function Eu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:Eu(o,u),f&2048&&fp(u.alternate,u);break;case 24:Eu(o,u),f&2048&&dp(u.alternate,u);break;default:Eu(o,u)}i=i.sibling}}var Tu=8192;function $o(r,i,o){if(r.subtreeFlags&Tu)for(r=r.child;r!==null;)PE(r,i,o),r=r.sibling}function PE(r,i,o){switch(r.tag){case 26:$o(r,i,o),r.flags&Tu&&r.memoizedState!==null&&OC(o,ri,r.memoizedState,r.memoizedProps);break;case 5:$o(r,i,o);break;case 3:case 4:var u=ri;ri=Kh(r.stateNode.containerInfo),$o(r,i,o),ri=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=Tu,Tu=16777216,$o(r,i,o),Tu=u):$o(r,i,o));break;default:$o(r,i,o)}}function VE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function bu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];In=u,LE(u,r)}VE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)kE(r),r=r.sibling}function kE(r){switch(r.tag){case 0:case 11:case 15:bu(r),r.flags&2048&&Ua(9,r,r.return);break;case 3:bu(r);break;case 12:bu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,Ph(r)):bu(r);break;default:bu(r)}}function Ph(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];In=u,LE(u,r)}VE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:Ua(8,i,i.return),Ph(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,Ph(i));break;default:Ph(i)}r=r.sibling}}function LE(r,i){for(;In!==null;){var o=In;switch(o.tag){case 0:case 11:case 15:Ua(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:au(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,In=u;else e:for(o=r;In!==null;){u=In;var f=u.sibling,p=u.return;if(CE(u),u===o){In=null;break e}if(f!==null){f.return=p,In=f;break e}In=p}}}var K1={getCacheForType:function(r){var i=On(dn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return On(dn).controller.signal}},Y1=typeof WeakMap=="function"?WeakMap:Map,St=0,Lt=null,lt=null,ct=0,Rt=0,br=null,ja=!1,Ko=!1,mp=!1,ta=0,an=0,za=0,Ys=0,pp=0,Sr=0,Yo=0,Su=null,ur=null,gp=!1,Vh=0,UE=0,kh=1/0,Lh=null,Ba=null,bn=0,Fa=null,Qo=null,na=0,yp=0,vp=null,jE=null,Au=0,_p=null;function Ar(){return(St&2)!==0&&ct!==0?ct&-ct:X.T!==null?wp():ve()}function zE(){if(Sr===0)if((ct&536870912)===0||gt){var r=di;di<<=1,(di&3932160)===0&&(di=262144),Sr=r}else Sr=536870912;return r=Er.current,r!==null&&(r.flags|=32),Sr}function cr(r,i,o){(r===Lt&&(Rt===2||Rt===9)||r.cancelPendingCommit!==null)&&(Xo(r,0),Ha(r,ct,Sr,!1)),mi(r,o),((St&2)===0||r!==Lt)&&(r===Lt&&((St&2)===0&&(Ys|=o),an===4&&Ha(r,ct,Sr,!1)),Ci(r))}function BE(r,i,o){if((St&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||pr(r,i),f=u?W1(r,i):Tp(r,i,!0),p=u;do{if(f===0){Ko&&!u&&Ha(r,i,0,!1);break}else{if(o=r.current.alternate,p&&!Q1(o)){f=Tp(r,i,!1),p=!1;continue}if(f===2){if(p=i,r.errorRecoveryDisabledLanes&p)var _=0;else _=r.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var I=r;f=Su;var k=I.current.memoizedState.isDehydrated;if(k&&(Xo(I,_).flags|=256),_=Tp(I,_,!1),_!==2){if(mp&&!k){I.errorRecoveryDisabledLanes|=p,Ys|=p,f=4;break e}p=ur,ur=f,p!==null&&(ur===null?ur=p:ur.push.apply(ur,p))}f=_}if(p=!1,f!==2)continue}}if(f===1){Xo(r,0),Ha(r,i,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ha(u,i,Sr,!ja);break e;case 2:ur=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Vh+300-Ye(),10<f)){if(Ha(u,i,Sr,!ja),mr(u,0,!0)!==0)break e;na=i,u.timeoutHandle=vT(FE.bind(null,u,o,ur,Lh,gp,i,Sr,Ys,Yo,ja,p,"Throttled",-0,0),f);break e}FE(u,o,ur,Lh,gp,i,Sr,Ys,Yo,ja,p,null,-0,0)}}break}while(!0);Ci(r)}function FE(r,i,o,u,f,p,_,I,k,Z,se,he,te,ie){if(r.timeoutHandle=-1,he=i.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wr},PE(i,p,he);var Ne=(p&62914560)===p?Vh-Ye():(p&4194048)===p?UE-Ye():0;if(Ne=MC(he,Ne),Ne!==null){na=p,r.cancelPendingCommit=Ne(XE.bind(null,r,i,p,o,u,f,_,I,k,se,he,null,te,ie)),Ha(r,p,_,!Z);return}}XE(r,i,p,o,u,f,_,I,k)}function Q1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!vr(p(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ha(r,i,o,u){i&=~pp,i&=~Ys,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var p=31-Yt(f),_=1<<p;u[p]=-1,f&=~_}o!==0&&ji(r,o,i)}function Uh(){return(St&6)===0?(wu(0),!1):!0}function Ep(){if(lt!==null){if(Rt===0)var r=lt.return;else r=lt,Gi=js=null,km(r),zo=null,ou=0,r=lt;for(;r!==null;)_E(r.alternate,r),r=r.return;lt=null}}function Xo(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,pC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),na=0,Ep(),Lt=r,lt=o=Hi(r.current,null),ct=i,Rt=0,br=null,ja=!1,Ko=pr(r,i),mp=!1,Yo=Sr=pp=Ys=za=an=0,ur=Su=null,gp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Yt(u),p=1<<f;i|=r[f],u&=~p}return ta=i,ah(),o}function HE(r,i){et=null,X.H=pu,i===jo||i===dh?(i=a_(),Rt=3):i===Am?(i=a_(),Rt=4):Rt=i===Jm?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,br=i,lt===null&&(an=1,Ch(r,Lr(i,r.current)))}function qE(){var r=Er.current;return r===null?!0:(ct&4194048)===ct?Br===null:(ct&62914560)===ct||(ct&536870912)!==0?r===Br:!1}function GE(){var r=X.H;return X.H=pu,r===null?pu:r}function $E(){var r=X.A;return X.A=K1,r}function jh(){an=4,ja||(ct&4194048)!==ct&&Er.current!==null||(Ko=!0),(za&134217727)===0&&(Ys&134217727)===0||Lt===null||Ha(Lt,ct,Sr,!1)}function Tp(r,i,o){var u=St;St|=2;var f=GE(),p=$E();(Lt!==r||ct!==i)&&(Lh=null,Xo(r,i)),i=!1;var _=an;e:do try{if(Rt!==0&&lt!==null){var I=lt,k=br;switch(Rt){case 8:Ep(),_=6;break e;case 3:case 2:case 9:case 6:Er.current===null&&(i=!0);var Z=Rt;if(Rt=0,br=null,Wo(r,I,k,Z),o&&Ko){_=0;break e}break;default:Z=Rt,Rt=0,br=null,Wo(r,I,k,Z)}}X1(),_=an;break}catch(se){HE(r,se)}while(!0);return i&&r.shellSuspendCounter++,Gi=js=null,St=u,X.H=f,X.A=p,lt===null&&(Lt=null,ct=0,ah()),_}function X1(){for(;lt!==null;)KE(lt)}function W1(r,i){var o=St;St|=2;var u=GE(),f=$E();Lt!==r||ct!==i?(Lh=null,kh=Ye()+500,Xo(r,i)):Ko=pr(r,i);e:do try{if(Rt!==0&&lt!==null){i=lt;var p=br;t:switch(Rt){case 1:Rt=0,br=null,Wo(r,i,p,1);break;case 2:case 9:if(r_(p)){Rt=0,br=null,YE(i);break}i=function(){Rt!==2&&Rt!==9||Lt!==r||(Rt=7),Ci(r)},p.then(i,i);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:r_(p)?(Rt=0,br=null,YE(i)):(Rt=0,br=null,Wo(r,i,p,7));break;case 5:var _=null;switch(lt.tag){case 26:_=lt.memoizedState;case 5:case 27:var I=lt;if(_?MT(_):I.stateNode.complete){Rt=0,br=null;var k=I.sibling;if(k!==null)lt=k;else{var Z=I.return;Z!==null?(lt=Z,zh(Z)):lt=null}break t}}Rt=0,br=null,Wo(r,i,p,5);break;case 6:Rt=0,br=null,Wo(r,i,p,6);break;case 8:Ep(),an=6;break e;default:throw Error(a(462))}}J1();break}catch(se){HE(r,se)}while(!0);return Gi=js=null,X.H=u,X.A=f,St=o,lt!==null?0:(Lt=null,ct=0,ah(),an)}function J1(){for(;lt!==null&&!wt();)KE(lt)}function KE(r){var i=yE(r.alternate,r,ta);r.memoizedProps=r.pendingProps,i===null?zh(r):lt=i}function YE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=hE(o,i,i.pendingProps,i.type,void 0,ct);break;case 11:i=hE(o,i,i.pendingProps,i.type.render,i.ref,ct);break;case 5:km(i);default:_E(o,i),i=lt=$v(i,ta),i=yE(o,i,ta)}r.memoizedProps=r.pendingProps,i===null?zh(r):lt=i}function Wo(r,i,o,u){Gi=js=null,km(i),zo=null,ou=0;var f=i.return;try{if(z1(r,f,i,o,ct)){an=1,Ch(r,Lr(o,r.current)),lt=null;return}}catch(p){if(f!==null)throw lt=f,p;an=1,Ch(r,Lr(o,r.current)),lt=null;return}i.flags&32768?(gt||u===1?r=!0:Ko||(ct&536870912)!==0?r=!1:(ja=r=!0,(u===2||u===9||u===3||u===6)&&(u=Er.current,u!==null&&u.tag===13&&(u.flags|=16384))),QE(i,r)):zh(i)}function zh(r){var i=r;do{if((i.flags&32768)!==0){QE(i,ja);return}r=i.return;var o=H1(i.alternate,i,ta);if(o!==null){lt=o;return}if(i=i.sibling,i!==null){lt=i;return}lt=i=r}while(i!==null);an===0&&(an=5)}function QE(r,i){do{var o=q1(r.alternate,r);if(o!==null){o.flags&=32767,lt=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){lt=r;return}lt=r=o}while(r!==null);an=6,lt=null}function XE(r,i,o,u,f,p,_,I,k){r.cancelPendingCommit=null;do Bh();while(bn!==0);if((St&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(p=i.lanes|i.childLanes,p|=um,Hl(r,o,p,_,I,k),r===Lt&&(lt=Lt=null,ct=0),Qo=i,Fa=r,na=o,yp=p,vp=f,jE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,nC(nn,function(){return tT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=de.p,de.p=2,_=St,St|=4;try{G1(r,i,o)}finally{St=_,de.p=f,X.T=u}}bn=1,WE(),JE(),ZE()}}function WE(){if(bn===1){bn=0;var r=Fa,i=Qo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=de.p;de.p=2;var f=St;St|=4;try{NE(i,r);var p=Mp,_=Lv(r.containerInfo),I=p.focusedElem,k=p.selectionRange;if(_!==I&&I&&I.ownerDocument&&kv(I.ownerDocument.documentElement,I)){if(k!==null&&im(I)){var Z=k.start,se=k.end;if(se===void 0&&(se=Z),"selectionStart"in I)I.selectionStart=Z,I.selectionEnd=Math.min(se,I.value.length);else{var he=I.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var ie=te.getSelection(),Ne=I.textContent.length,He=Math.min(k.start,Ne),Pt=k.end===void 0?He:Math.min(k.end,Ne);!ie.extend&&He>Pt&&(_=Pt,Pt=He,He=_);var K=Vv(I,He),z=Vv(I,Pt);if(K&&z&&(ie.rangeCount!==1||ie.anchorNode!==K.node||ie.anchorOffset!==K.offset||ie.focusNode!==z.node||ie.focusOffset!==z.offset)){var J=he.createRange();J.setStart(K.node,K.offset),ie.removeAllRanges(),He>Pt?(ie.addRange(J),ie.extend(z.node,z.offset)):(J.setEnd(z.node,z.offset),ie.addRange(J))}}}}for(he=[],ie=I;ie=ie.parentNode;)ie.nodeType===1&&he.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<he.length;I++){var le=he[I];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Zh=!!Op,Mp=Op=null}finally{St=f,de.p=u,X.T=o}}r.current=i,bn=2}}function JE(){if(bn===2){bn=0;var r=Fa,i=Qo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=de.p;de.p=2;var f=St;St|=4;try{RE(r,i.alternate,i)}finally{St=f,de.p=u,X.T=o}}bn=3}}function ZE(){if(bn===4||bn===3){bn=0,je();var r=Fa,i=Qo,o=na,u=jE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?bn=5:(bn=0,Qo=Fa=null,eT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Ba=null),me(o),i=i.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(dr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=X.T,f=de.p,de.p=2,X.T=null;try{for(var p=r.onRecoverableError,_=0;_<u.length;_++){var I=u[_];p(I.value,{componentStack:I.stack})}}finally{X.T=i,de.p=f}}(na&3)!==0&&Bh(),Ci(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===_p?Au++:(Au=0,_p=r):Au=0,wu(0)}}function eT(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,au(i)))}function Bh(){return WE(),JE(),ZE(),tT()}function tT(){if(bn!==5)return!1;var r=Fa,i=yp;yp=0;var o=me(na),u=X.T,f=de.p;try{de.p=32>o?32:o,X.T=null,o=vp,vp=null;var p=Fa,_=na;if(bn=0,Qo=Fa=null,na=0,(St&6)!==0)throw Error(a(331));var I=St;if(St|=4,kE(p.current),ME(p,p.current,_,o),St=I,wu(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(dr,p)}catch{}return!0}finally{de.p=f,X.T=u,eT(r,i)}}function nT(r,i,o){i=Lr(o,i),i=Wm(r.stateNode,i,2),r=Va(r,i,2),r!==null&&(mi(r,2),Ci(r))}function Ct(r,i,o){if(r.tag===3)nT(r,r,o);else for(;i!==null;){if(i.tag===3){nT(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ba===null||!Ba.has(u))){r=Lr(o,r),o=rE(2),u=Va(i,o,2),u!==null&&(iE(o,u,i,r),mi(u,2),Ci(u));break}}i=i.return}}function bp(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new Y1;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(mp=!0,f.add(o),r=Z1.bind(null,r,i,o),i.then(r,r))}function Z1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Lt===r&&(ct&o)===o&&(an===4||an===3&&(ct&62914560)===ct&&300>Ye()-Vh?(St&2)===0&&Xo(r,0):pp|=o,Yo===ct&&(Yo=0)),Ci(r)}function rT(r,i){i===0&&(i=Ui()),r=ks(r,i),r!==null&&(mi(r,i),Ci(r))}function eC(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),rT(r,o)}function tC(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),rT(r,o)}function nC(r,i){return Fe(r,i)}var Fh=null,Jo=null,Sp=!1,Hh=!1,Ap=!1,qa=0;function Ci(r){r!==Jo&&r.next===null&&(Jo===null?Fh=Jo=r:Jo=Jo.next=r),Hh=!0,Sp||(Sp=!0,iC())}function wu(r,i){if(!Ap&&Hh){Ap=!0;do for(var o=!1,u=Fh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var _=u.suspendedLanes,I=u.pingedLanes;p=(1<<31-Yt(42|r)+1)-1,p&=f&~(_&~I),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,oT(u,p))}else p=ct,p=mr(u,u===Lt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||pr(u,p)||(o=!0,oT(u,p));u=u.next}while(o);Ap=!1}}function rC(){iT()}function iT(){Hh=Sp=!1;var r=0;qa!==0&&mC()&&(r=qa);for(var i=Ye(),o=null,u=Fh;u!==null;){var f=u.next,p=aT(u,i);p===0?(u.next=null,o===null?Fh=f:o.next=f,f===null&&(Jo=o)):(o=u,(r!==0||(p&3)!==0)&&(Hh=!0)),u=f}bn!==0&&bn!==5||wu(r),qa!==0&&(qa=0)}function aT(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var _=31-Yt(p),I=1<<_,k=f[_];k===-1?((I&o)===0||(I&u)!==0)&&(f[_]=_o(I,i)):k<=i&&(r.expiredLanes|=I),p&=~I}if(i=Lt,o=ct,o=mr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Rt===2||Rt===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Vt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||pr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&Vt(u),me(o)){case 2:case 8:o=Kn;break;case 32:o=nn;break;case 268435456:o=bs;break;default:o=nn}return u=sT.bind(null,r),o=Fe(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&Vt(u),r.callbackPriority=2,r.callbackNode=null,2}function sT(r,i){if(bn!==0&&bn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Bh()&&r.callbackNode!==o)return null;var u=ct;return u=mr(r,r===Lt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(BE(r,u,i),aT(r,Ye()),r.callbackNode!=null&&r.callbackNode===o?sT.bind(null,r):null)}function oT(r,i){if(Bh())return null;BE(r,i,!0)}function iC(){gC(function(){(St&6)!==0?Fe(tr,rC):iT()})}function wp(){if(qa===0){var r=Lo;r===0&&(r=Qn,Qn<<=1,(Qn&261888)===0&&(Qn=256)),qa=r}return qa}function lT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:bo(""+r)}function uT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function aC(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var p=lT((f[Se]||null).action),_=u.submitter;_&&(i=(i=_[Se]||null)?lT(i.formAction):_.getAttribute("formAction"),i!==null&&(p=i,_=null));var I=new Ei("action","action",null,u,f);r.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(qa!==0){var k=_?uT(f,_):new FormData(f);Gm(o,{pending:!0,data:k,method:f.method,action:p},null,k)}}else typeof p=="function"&&(I.preventDefault(),k=_?uT(f,_):new FormData(f),Gm(o,{pending:!0,data:k,method:f.method,action:p},p,k))},currentTarget:f}]})}}for(var Rp=0;Rp<lm.length;Rp++){var Cp=lm[Rp],sC=Cp.toLowerCase(),oC=Cp[0].toUpperCase()+Cp.slice(1);ni(sC,"on"+oC)}ni(zv,"onAnimationEnd"),ni(Bv,"onAnimationIteration"),ni(Fv,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(S1,"onTransitionRun"),ni(A1,"onTransitionStart"),ni(w1,"onTransitionCancel"),ni(Hv,"onTransitionEnd"),zn("onMouseEnter",["mouseout","mouseover"]),zn("onMouseLeave",["mouseout","mouseover"]),zn("onPointerEnter",["pointerout","pointerover"]),zn("onPointerLeave",["pointerout","pointerover"]),rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rr("onBeforeInput",["compositionend","keypress","textInput","paste"]),rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function cT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(i)for(var _=u.length-1;0<=_;_--){var I=u[_],k=I.instance,Z=I.currentTarget;if(I=I.listener,k!==p&&f.isPropagationStopped())break e;p=I,f.currentTarget=Z;try{p(f)}catch(se){ih(se)}f.currentTarget=null,p=k}else for(_=0;_<u.length;_++){if(I=u[_],k=I.instance,Z=I.currentTarget,I=I.listener,k!==p&&f.isPropagationStopped())break e;p=I,f.currentTarget=Z;try{p(f)}catch(se){ih(se)}f.currentTarget=null,p=k}}}}function ut(r,i){var o=i[qe];o===void 0&&(o=i[qe]=new Set);var u=r+"__bubble";o.has(u)||(hT(i,r,2,!1),o.add(u))}function Ip(r,i,o){var u=0;i&&(u|=4),hT(o,r,u,i)}var qh="_reactListening"+Math.random().toString(36).slice(2);function Dp(r){if(!r[qh]){r[qh]=!0,nr.forEach(function(o){o!=="selectionchange"&&(lC.has(o)||Ip(o,!1,r),Ip(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[qh]||(i[qh]=!0,Ip("selectionchange",!1,i))}}function hT(r,i,o,u){switch(zT(i)){case 2:var f=kC;break;case 8:f=LC;break;default:f=qp}o=f.bind(null,i,o,r),f=void 0,!Is||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function xp(r,i,o,u,f){var p=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var I=u.stateNode.containerInfo;if(I===f)break;if(_===4)for(_=u.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;I!==null;){if(_=Ut(I),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){u=p=_;continue e}I=I.parentNode}}u=u.return}wa(function(){var Z=p,se=Mr(o),he=[];e:{var te=qv.get(r);if(te!==void 0){var ie=Ei,Ne=r;switch(r){case"keypress":if(xs(o)===0)break e;case"keydown":case"keyup":ie=th;break;case"focusin":Ne="focus",ie=Os;break;case"focusout":Ne="blur",ie=Os;break;case"beforeblur":case"afterblur":ie=Os;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Wl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=$c;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=y;break;case zv:case Bv:case Fv:ie=Yc;break;case Hv:ie=D;break;case"scroll":case"scrollend":ie=Xl;break;case"wheel":ie=re;break;case"copy":case"cut":case"paste":ie=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Fi;break;case"toggle":case"beforetoggle":ie=Ze}var He=(i&4)!==0,Pt=!He&&(r==="scroll"||r==="scrollend"),K=He?te!==null?te+"Capture":null:te;He=[];for(var z=Z,J;z!==null;){var le=z;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||K===null||(le=Jr(z,K),le!=null&&He.push(Cu(z,le,J))),Pt)break;z=z.return}0<He.length&&(te=new ie(te,Ne,null,o,se),he.push({event:te,listeners:He}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",te&&o!==Kl&&(Ne=o.relatedTarget||o.fromElement)&&(Ut(Ne)||Ne[De]))break e;if((ie||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(Ne=o.relatedTarget||o.toElement,ie=Z,Ne=Ne?Ut(Ne):null,Ne!==null&&(Pt=l(Ne),He=Ne.tag,Ne!==Pt||He!==5&&He!==27&&He!==6)&&(Ne=null)):(ie=null,Ne=Z),ie!==Ne)){if(He=Wl,le="onMouseLeave",K="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(He=Fi,le="onPointerLeave",K="onPointerEnter",z="pointer"),Pt=ie==null?te:jt(ie),J=Ne==null?te:jt(Ne),te=new He(le,z+"leave",ie,o,se),te.target=Pt,te.relatedTarget=J,le=null,Ut(se)===Z&&(He=new He(K,z+"enter",Ne,o,se),He.target=J,He.relatedTarget=Pt,le=He),Pt=le,ie&&Ne)t:{for(He=uC,K=ie,z=Ne,J=0,le=K;le;le=He(le))J++;le=0;for(var ze=z;ze;ze=He(ze))le++;for(;0<J-le;)K=He(K),J--;for(;0<le-J;)z=He(z),le--;for(;J--;){if(K===z||z!==null&&K===z.alternate){He=K;break t}K=He(K),z=He(z)}He=null}else He=null;ie!==null&&fT(he,te,ie,He,!1),Ne!==null&&Pt!==null&&fT(he,Pt,Ne,He,!0)}}e:{if(te=Z?jt(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var vt=Dv;else if(Cv(te))if(xv)vt=E1;else{vt=v1;var Oe=y1}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&To(Z.elementType)&&(vt=Dv):vt=_1;if(vt&&(vt=vt(r,Z))){Iv(he,vt,o,se);break e}Oe&&Oe(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&ql(te,"number",te.value)}switch(Oe=Z?jt(Z):window,r){case"focusin":(Cv(Oe)||Oe.contentEditable==="true")&&(Do=Oe,am=Z,nu=null);break;case"focusout":nu=am=Do=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,Uv(he,o,se);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":Uv(he,o,se)}var rt;if(bt)e:{switch(r){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Io?Ms(r,o)&&(ht="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ht="onCompositionStart");ht&&(Si&&o.locale!=="ko"&&(Io||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Io&&(rt=Ql()):(_i=se,Yl="value"in _i?_i.value:_i.textContent,Io=!0)),Oe=Gh(Z,ht),0<Oe.length&&(ht=new bi(ht,r,null,o,se),he.push({event:ht,listeners:Oe}),rt?ht.data=rt:(rt=Co(o),rt!==null&&(ht.data=rt)))),(rt=Vr?d1(r,o):m1(r,o))&&(ht=Gh(Z,"onBeforeInput"),0<ht.length&&(Oe=new bi("onBeforeInput","beforeinput",null,o,se),he.push({event:Oe,listeners:ht}),Oe.data=rt)),aC(he,r,Z,o,se)}cT(he,i)})}function Cu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Gh(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Jr(r,o),f!=null&&u.unshift(Cu(r,f,p)),f=Jr(r,i),f!=null&&u.push(Cu(r,f,p))),r.tag===3)return u;r=r.return}return[]}function uC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function fT(r,i,o,u,f){for(var p=i._reactName,_=[];o!==null&&o!==u;){var I=o,k=I.alternate,Z=I.stateNode;if(I=I.tag,k!==null&&k===u)break;I!==5&&I!==26&&I!==27||Z===null||(k=Z,f?(Z=Jr(o,p),Z!=null&&_.unshift(Cu(o,Z,k))):f||(Z=Jr(o,p),Z!=null&&_.push(Cu(o,Z,k)))),o=o.return}_.length!==0&&r.push({event:i,listeners:_})}var cC=/\r\n?/g,hC=/\u0000|\uFFFD/g;function dT(r){return(typeof r=="string"?r:""+r).replace(cC,`
`).replace(hC,"")}function mT(r,i){return i=dT(i),dT(r)===i}function Mt(r,i,o,u,f,p){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||ar(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&ar(r,""+u);break;case"className":fn(r,"class",u);break;case"tabIndex":fn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fn(r,o,u);break;case"style":$l(r,u,p);break;case"data":if(i!=="object"){fn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=bo(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(i!=="input"&&Mt(r,i,"name",f.name,f,null),Mt(r,i,"formEncType",f.formEncType,f,null),Mt(r,i,"formMethod",f.formMethod,f,null),Mt(r,i,"formTarget",f.formTarget,f,null)):(Mt(r,i,"encType",f.encType,f,null),Mt(r,i,"method",f.method,f,null),Mt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=bo(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Wr);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=bo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ut("beforetoggle",r),ut("toggle",r),Jt(r,"popover",u);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Jt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Gc.get(o)||o,Jt(r,o,u))}}function Np(r,i,o,u,f,p){switch(o){case"style":$l(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?ar(r,u):(typeof u=="number"||typeof u=="bigint")&&ar(r,""+u);break;case"onScroll":u!=null&&ut("scroll",r);break;case"onScrollEnd":u!=null&&ut("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Wr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),p=r[Se]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(i,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Jt(r,o,u)}}}function Pn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var _=o[p];if(_!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Mt(r,i,p,_,o,null)}}f&&Mt(r,i,"srcSet",o.srcSet,o,null),u&&Mt(r,i,"src",o.src,o,null);return;case"input":ut("invalid",r);var I=p=_=f=null,k=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":f=se;break;case"type":_=se;break;case"checked":k=se;break;case"defaultChecked":Z=se;break;case"value":p=se;break;case"defaultValue":I=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:Mt(r,i,u,se,o,null)}}Fc(r,p,I,k,Z,_,f,!1);return;case"select":ut("invalid",r),u=_=p=null;for(f in o)if(o.hasOwnProperty(f)&&(I=o[f],I!=null))switch(f){case"value":p=I;break;case"defaultValue":_=I;break;case"multiple":u=I;default:Mt(r,i,f,I,o,null)}i=p,o=_,r.multiple=!!u,i!=null?Ta(r,!!u,i,!1):o!=null&&Ta(r,!!u,o,!0);return;case"textarea":ut("invalid",r),p=f=u=null;for(_ in o)if(o.hasOwnProperty(_)&&(I=o[_],I!=null))switch(_){case"value":u=I;break;case"defaultValue":f=I;break;case"children":p=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(a(91));break;default:Mt(r,i,_,I,o,null)}ba(r,u,f,p);return;case"option":for(k in o)if(o.hasOwnProperty(k)&&(u=o[k],u!=null))switch(k){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Mt(r,i,k,u,o,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(u=0;u<Ru.length;u++)ut(Ru[u],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Mt(r,i,Z,u,o,null)}return;default:if(To(i)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&Np(r,i,se,u,o,void 0));return}}for(I in o)o.hasOwnProperty(I)&&(u=o[I],u!=null&&Mt(r,i,I,u,o,null))}function fC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,_=null,I=null,k=null,Z=null,se=null;for(ie in o){var he=o[ie];if(o.hasOwnProperty(ie)&&he!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":k=he;default:u.hasOwnProperty(ie)||Mt(r,i,ie,null,u,he)}}for(var te in u){var ie=u[te];if(he=o[te],u.hasOwnProperty(te)&&(ie!=null||he!=null))switch(te){case"type":p=ie;break;case"name":f=ie;break;case"checked":Z=ie;break;case"defaultChecked":se=ie;break;case"value":_=ie;break;case"defaultValue":I=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:ie!==he&&Mt(r,i,te,ie,u,he)}}Eo(r,_,I,k,Z,se,p,f);return;case"select":ie=_=I=te=null;for(p in o)if(k=o[p],o.hasOwnProperty(p)&&k!=null)switch(p){case"value":break;case"multiple":ie=k;default:u.hasOwnProperty(p)||Mt(r,i,p,null,u,k)}for(f in u)if(p=u[f],k=o[f],u.hasOwnProperty(f)&&(p!=null||k!=null))switch(f){case"value":te=p;break;case"defaultValue":I=p;break;case"multiple":_=p;default:p!==k&&Mt(r,i,f,p,u,k)}i=I,o=_,u=ie,te!=null?Ta(r,!!o,te,!1):!!u!=!!o&&(i!=null?Ta(r,!!o,i,!0):Ta(r,!!o,o?[]:"",!1));return;case"textarea":ie=te=null;for(I in o)if(f=o[I],o.hasOwnProperty(I)&&f!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Mt(r,i,I,null,u,f)}for(_ in u)if(f=u[_],p=o[_],u.hasOwnProperty(_)&&(f!=null||p!=null))switch(_){case"value":te=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==p&&Mt(r,i,_,f,u,p)}Hc(r,te,ie);return;case"option":for(var Ne in o)if(te=o[Ne],o.hasOwnProperty(Ne)&&te!=null&&!u.hasOwnProperty(Ne))switch(Ne){case"selected":r.selected=!1;break;default:Mt(r,i,Ne,null,u,te)}for(k in u)if(te=u[k],ie=o[k],u.hasOwnProperty(k)&&te!==ie&&(te!=null||ie!=null))switch(k){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Mt(r,i,k,te,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in o)te=o[He],o.hasOwnProperty(He)&&te!=null&&!u.hasOwnProperty(He)&&Mt(r,i,He,null,u,te);for(Z in u)if(te=u[Z],ie=o[Z],u.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Mt(r,i,Z,te,u,ie)}return;default:if(To(i)){for(var Pt in o)te=o[Pt],o.hasOwnProperty(Pt)&&te!==void 0&&!u.hasOwnProperty(Pt)&&Np(r,i,Pt,void 0,u,te);for(se in u)te=u[se],ie=o[se],!u.hasOwnProperty(se)||te===ie||te===void 0&&ie===void 0||Np(r,i,se,te,u,ie);return}}for(var K in o)te=o[K],o.hasOwnProperty(K)&&te!=null&&!u.hasOwnProperty(K)&&Mt(r,i,K,null,u,te);for(he in u)te=u[he],ie=o[he],!u.hasOwnProperty(he)||te===ie||te==null&&ie==null||Mt(r,i,he,te,u,ie)}function pT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],p=f.transferSize,_=f.initiatorType,I=f.duration;if(p&&I&&pT(_)){for(_=0,I=f.responseEnd,u+=1;u<o.length;u++){var k=o[u],Z=k.startTime;if(Z>I)break;var se=k.transferSize,he=k.initiatorType;se&&pT(he)&&(k=k.responseEnd,_+=se*(k<I?1:(I-Z)/(k-Z)))}if(--u,i+=8*(p+_)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Op=null,Mp=null;function $h(r){return r.nodeType===9?r:r.ownerDocument}function gT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Pp(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Vp=null;function mC(){var r=window.event;return r&&r.type==="popstate"?r===Vp?!1:(Vp=r,!0):(Vp=null,!1)}var vT=typeof setTimeout=="function"?setTimeout:void 0,pC=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(r){return _T.resolve(null).then(r).catch(yC)}:vT;function yC(r){setTimeout(function(){throw r})}function Ga(r){return r==="head"}function ET(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),nl(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Iu(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Iu(o);for(var p=o.firstChild;p;){var _=p.nextSibling,I=p.nodeName;p[Dt]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=_}}else o==="body"&&Iu(r.ownerDocument.body);o=f}while(o);nl(i)}function TT(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function kp(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":kp(o),Ft(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function vC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Dt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=Fr(r.nextSibling),r===null)break}return null}function _C(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Fr(r.nextSibling),r===null))return null;return r}function bT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=Fr(r.nextSibling),r===null))return null;return r}function Lp(r){return r.data==="$?"||r.data==="$~"}function Up(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function EC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Fr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var jp=null;function ST(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return Fr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function AT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function wT(r,i,o){switch(i=$h(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Iu(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);Ft(r)}var Hr=new Map,RT=new Set;function Kh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ra=de.d;de.d={f:TC,r:bC,D:SC,C:AC,L:wC,m:RC,X:IC,S:CC,M:DC};function TC(){var r=ra.f(),i=Uh();return r||i}function bC(r){var i=tt(r);i!==null&&i.tag===5&&i.type==="form"?H_(i):ra.r(r)}var Zo=typeof document>"u"?null:document;function CT(r,i,o){var u=Zo;if(u&&typeof i=="string"&&i){var f=ir(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),RT.has(f)||(RT.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Pn(i,"link",r),zt(i),u.head.appendChild(i)))}}function SC(r){ra.D(r),CT("dns-prefetch",r,null)}function AC(r,i){ra.C(r,i),CT("preconnect",r,i)}function wC(r,i,o){ra.L(r,i,o);var u=Zo;if(u&&r&&i){var f='link[rel="preload"][as="'+ir(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ir(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ir(o.imageSizes)+'"]')):f+='[href="'+ir(r)+'"]';var p=f;switch(i){case"style":p=el(r);break;case"script":p=tl(r)}Hr.has(p)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Hr.set(p,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Du(p))||i==="script"&&u.querySelector(xu(p))||(i=u.createElement("link"),Pn(i,"link",r),zt(i),u.head.appendChild(i)))}}function RC(r,i){ra.m(r,i);var o=Zo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ir(u)+'"][href="'+ir(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=tl(r)}if(!Hr.has(p)&&(r=E({rel:"modulepreload",href:r},i),Hr.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(xu(p)))return}u=o.createElement("link"),Pn(u,"link",r),zt(u),o.head.appendChild(u)}}}function CC(r,i,o){ra.S(r,i,o);var u=Zo;if(u&&r){var f=Cn(u).hoistableStyles,p=el(r);i=i||"default";var _=f.get(p);if(!_){var I={loading:0,preload:null};if(_=u.querySelector(Du(p)))I.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Hr.get(p))&&zp(r,o);var k=_=u.createElement("link");zt(k),Pn(k,"link",r),k._p=new Promise(function(Z,se){k.onload=Z,k.onerror=se}),k.addEventListener("load",function(){I.loading|=1}),k.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Yh(_,i,u)}_={type:"stylesheet",instance:_,count:1,state:I},f.set(p,_)}}}function IC(r,i){ra.X(r,i);var o=Zo;if(o&&r){var u=Cn(o).hoistableScripts,f=tl(r),p=u.get(f);p||(p=o.querySelector(xu(f)),p||(r=E({src:r,async:!0},i),(i=Hr.get(f))&&Bp(r,i),p=o.createElement("script"),zt(p),Pn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function DC(r,i){ra.M(r,i);var o=Zo;if(o&&r){var u=Cn(o).hoistableScripts,f=tl(r),p=u.get(f);p||(p=o.querySelector(xu(f)),p||(r=E({src:r,async:!0,type:"module"},i),(i=Hr.get(f))&&Bp(r,i),p=o.createElement("script"),zt(p),Pn(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function IT(r,i,o,u){var f=(f=Ee.current)?Kh(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=el(o.href),o=Cn(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=el(o.href);var p=Cn(f).hoistableStyles,_=p.get(r);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,_),(p=f.querySelector(Du(r)))&&!p._p&&(_.instance=p,_.state.loading=5),Hr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hr.set(r,o),p||xC(f,r,o,_.state))),i&&u===null)throw Error(a(528,""));return _}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=tl(o),o=Cn(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function el(r){return'href="'+ir(r)+'"'}function Du(r){return'link[rel="stylesheet"]['+r+"]"}function DT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function xC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Pn(i,"link",o),zt(i),r.head.appendChild(i))}function tl(r){return'[src="'+ir(r)+'"]'}function xu(r){return"script[async]"+r}function xT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+ir(o.href)+'"]');if(u)return i.instance=u,zt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),zt(u),Pn(u,"style",f),Yh(u,o.precedence,r),i.instance=u;case"stylesheet":f=el(o.href);var p=r.querySelector(Du(f));if(p)return i.state.loading|=4,i.instance=p,zt(p),p;u=DT(o),(f=Hr.get(f))&&zp(u,f),p=(r.ownerDocument||r).createElement("link"),zt(p);var _=p;return _._p=new Promise(function(I,k){_.onload=I,_.onerror=k}),Pn(p,"link",u),i.state.loading|=4,Yh(p,o.precedence,r),i.instance=p;case"script":return p=tl(o.src),(f=r.querySelector(xu(p)))?(i.instance=f,zt(f),f):(u=o,(f=Hr.get(p))&&(u=E({},o),Bp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),zt(f),Pn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Yh(u,o.precedence,r));return i.instance}function Yh(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,_=0;_<u.length;_++){var I=u[_];if(I.dataset.precedence===i)p=I;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function zp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Bp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var Qh=null;function NT(r,i,o){if(Qh===null){var u=new Map,f=Qh=new Map;f.set(o,u)}else f=Qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[Dt]||p[_e]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var _=p.getAttribute(i)||"";_=r+_;var I=u.get(_);I?I.push(p):u.set(_,[p])}}return u}function OT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function NC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function MT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function OC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=el(u.href),p=i.querySelector(Du(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Xh.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=p,zt(p);return}p=i.ownerDocument||i,u=DT(u),(f=Hr.get(f))&&zp(u,f),p=p.createElement("link"),zt(p);var _=p;_._p=new Promise(function(I,k){_.onload=I,_.onerror=k}),Pn(p,"link",u),o.instance=p}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Xh.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Fp=0;function MC(r,i){return r.stylesheets&&r.count===0&&Jh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Jh(r,r.stylesheets),r.unsuspend){var p=r.unsuspend;r.unsuspend=null,p()}},6e4+i);0<r.imgBytes&&Fp===0&&(Fp=62500*dC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Jh(r,r.stylesheets),r.unsuspend)){var p=r.unsuspend;r.unsuspend=null,p()}},(r.imgBytes>Fp?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Xh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Wh=null;function Jh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Wh=new Map,i.forEach(PC,r),Wh=null,Xh.call(r))}function PC(r,i){if(!(i.state.loading&4)){var o=Wh.get(r);if(o)var u=o.get(null);else{o=new Map,Wh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var _=f[p];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(o.set(_.dataset.precedence,_),u=_)}u&&o.set(null,u)}f=i.instance,_=f.getAttribute("data-precedence"),p=o.get(_)||u,p===u&&o.set(null,f),o.set(_,f),this.count++,u=Xh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Nu={$$typeof:q,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function VC(r,i,o,u,f,p,_,I,k){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xn(0),this.hiddenUpdates=Xn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function PT(r,i,o,u,f,p,_,I,k,Z,se,he){return r=new VC(r,i,o,_,k,Z,se,he,I),i=1,p===!0&&(i|=24),p=_r(3,null,null,i),r.current=p,p.stateNode=r,i=Tm(),i.refCount++,r.pooledCache=i,i.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:i},wm(p),r}function VT(r){return r?(r=Oo,r):Oo}function kT(r,i,o,u,f,p){f=VT(f),u.context===null?u.context=f:u.pendingContext=f,u=Pa(i),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Va(r,u,i),o!==null&&(cr(o,r,i),uu(o,r,i))}function LT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function Hp(r,i){LT(r,i),(r=r.alternate)&&LT(r,i)}function UT(r){if(r.tag===13||r.tag===31){var i=ks(r,67108864);i!==null&&cr(i,r,67108864),Hp(r,67108864)}}function jT(r){if(r.tag===13||r.tag===31){var i=Ar();i=ee(i);var o=ks(r,i);o!==null&&cr(o,r,i),Hp(r,i)}}var Zh=!0;function kC(r,i,o,u){var f=X.T;X.T=null;var p=de.p;try{de.p=2,qp(r,i,o,u)}finally{de.p=p,X.T=f}}function LC(r,i,o,u){var f=X.T;X.T=null;var p=de.p;try{de.p=8,qp(r,i,o,u)}finally{de.p=p,X.T=f}}function qp(r,i,o,u){if(Zh){var f=Gp(u);if(f===null)xp(r,i,u,ef,o),BT(r,u);else if(jC(f,r,i,o,u))u.stopPropagation();else if(BT(r,u),i&4&&-1<UC.indexOf(r)){for(;f!==null;){var p=tt(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var _=Or(p.pendingLanes);if(_!==0){var I=p;for(I.pendingLanes|=2,I.entangledLanes|=2;_;){var k=1<<31-Yt(_);I.entanglements[1]|=k,_&=~k}Ci(p),(St&6)===0&&(kh=Ye()+500,wu(0))}}break;case 31:case 13:I=ks(p,2),I!==null&&cr(I,p,2),Uh(),Hp(p,2)}if(p=Gp(u),p===null&&xp(r,i,u,ef,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else xp(r,i,u,null,o)}}function Gp(r){return r=Mr(r),$p(r)}var ef=null;function $p(r){if(ef=null,r=Ut(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return ef=r,null}function zT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(It()){case tr:return 2;case Kn:return 8;case nn:case Tn:return 32;case bs:return 268435456;default:return 32}default:return 32}}var Kp=!1,$a=null,Ka=null,Ya=null,Ou=new Map,Mu=new Map,Qa=[],UC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function BT(r,i){switch(r){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Ou.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(i.pointerId)}}function Pu(r,i,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},i!==null&&(i=tt(i),i!==null&&UT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function jC(r,i,o,u,f){switch(i){case"focusin":return $a=Pu($a,r,i,o,u,f),!0;case"dragenter":return Ka=Pu(Ka,r,i,o,u,f),!0;case"mouseover":return Ya=Pu(Ya,r,i,o,u,f),!0;case"pointerover":var p=f.pointerId;return Ou.set(p,Pu(Ou.get(p)||null,r,i,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Mu.set(p,Pu(Mu.get(p)||null,r,i,o,u,f)),!0}return!1}function FT(r){var i=Ut(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Ce(r.priority,function(){jT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Ce(r.priority,function(){jT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function tf(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Gp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Kl=u,o.target.dispatchEvent(u),Kl=null}else return i=tt(o),i!==null&&UT(i),r.blockedOn=o,!1;i.shift()}return!0}function HT(r,i,o){tf(r)&&o.delete(i)}function zC(){Kp=!1,$a!==null&&tf($a)&&($a=null),Ka!==null&&tf(Ka)&&(Ka=null),Ya!==null&&tf(Ya)&&(Ya=null),Ou.forEach(HT),Mu.forEach(HT)}function nf(r,i){r.blockedOn===i&&(r.blockedOn=null,Kp||(Kp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zC)))}var rf=null;function qT(r){rf!==r&&(rf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){rf===r&&(rf=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if($p(u||o)===null)continue;break}var p=tt(o);p!==null&&(r.splice(i,3),i-=3,Gm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function nl(r){function i(k){return nf(k,r)}$a!==null&&nf($a,r),Ka!==null&&nf(Ka,r),Ya!==null&&nf(Ya,r),Ou.forEach(i),Mu.forEach(i);for(var o=0;o<Qa.length;o++){var u=Qa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Qa.length&&(o=Qa[0],o.blockedOn===null);)FT(o),o.blockedOn===null&&Qa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],_=f[Se]||null;if(typeof p=="function")_||qT(o);else if(_){var I=null;if(p&&p.hasAttribute("formAction")){if(f=p,_=p[Se]||null)I=_.formAction;else if($p(f)!==null)continue}else I=_.action;typeof I=="function"?o[u+1]=I:(o.splice(u,3),u-=3),qT(o)}}}function GT(){function r(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Yp(r){this._internalRoot=r}af.prototype.render=Yp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Ar();kT(o,u,r,i,null,null)},af.prototype.unmount=Yp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;kT(r.current,2,null,r,null,null),Uh(),i[De]=null}};function af(r){this._internalRoot=r}af.prototype.unstable_scheduleHydration=function(r){if(r){var i=ve();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Qa.length&&i!==0&&i<Qa[o].priority;o++);Qa.splice(o,0,r),o===0&&FT(r)}};var $T=e.version;if($T!=="19.2.4")throw Error(a(527,$T,"19.2.4"));de.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?v(r):null,r=r===null?null:r.stateNode,r};var BC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sf.isDisabled&&sf.supportsFiber)try{dr=sf.inject(BC),kt=sf}catch{}}return ku.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=Z_,p=eE,_=tE;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=PT(r,1,!1,null,null,o,u,null,f,p,_,GT),r[De]=i.current,Dp(r),new Yp(i)},ku.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",p=Z_,_=eE,I=tE,k=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(I=o.onRecoverableError),o.formState!==void 0&&(k=o.formState)),i=PT(r,1,!0,i,o??null,u,f,k,p,_,I,GT),i.context=VT(null),o=i.current,u=Ar(),u=ee(u),f=Pa(u),f.callback=null,Va(o,f,u),o=u,i.current.lanes=o,mi(i,o),Ci(i),r[De]=i.current,Dp(r),new af(i)},ku.version="19.2.4",ku}var n0;function eI(){if(n0)return Jp.exports;n0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Jp.exports=ZC(),Jp.exports}var tI=eI();const nI=xS(tI);var ng={exports:{}},rg={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0;function rI(){if(r0)return rg;r0=1;var n=_d();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return rg.useSyncExternalStoreWithSelector=function(m,g,v,E,b){var C=s(null);if(C.current===null){var L={hasValue:!1,value:null};C.current=L}else L=C.current;C=c(function(){function F(G){if(!Q){if(Q=!0,B=G,G=E(G),b!==void 0&&L.hasValue){var ae=L.value;if(b(ae,G))return q=ae}return q=G}if(ae=q,t(B,G))return ae;var S=E(G);return b!==void 0&&b(ae,S)?(B=G,ae):(B=G,q=S)}var Q=!1,B,q,Y=v===void 0?null:v;return[function(){return F(g())},Y===null?void 0:function(){return F(Y())}]},[g,v,E,b]);var j=a(m,C[0],C[1]);return l(function(){L.hasValue=!0,L.value=j},[j]),d(j),j},rg}var i0;function iI(){return i0||(i0=1,ng.exports=rI()),ng.exports}var aI=iI();function sI(n){n()}function oI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){sI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var a0={notify(){},get:()=>[]};function lI(n,e){let t,a=a0,s=0,l=!1;function c(j){v();const F=a.subscribe(j);let Q=!1;return()=>{Q||(Q=!0,F(),E())}}function d(){a.notify()}function m(){L.onStateChange&&L.onStateChange()}function g(){return l}function v(){s++,t||(t=n.subscribe(m),a=oI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=a0)}function b(){l||(l=!0,v())}function C(){l&&(l=!1,E())}const L={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:m,isSubscribed:g,trySubscribe:b,tryUnsubscribe:C,getListeners:()=>a};return L}var uI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cI=uI(),hI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fI=hI(),dI=()=>cI||fI?P.useLayoutEffect:P.useEffect,mI=dI(),ig=Symbol.for("react-redux-context"),ag=typeof globalThis<"u"?globalThis:{};function pI(){if(!P.createContext)return{};const n=ag[ig]??(ag[ig]=new Map);let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var fs=pI();function gI(n){const{children:e,context:t,serverState:a,store:s}=n,l=P.useMemo(()=>{const m=lI(s);return{store:s,subscription:m,getServerState:a?()=>a:void 0}},[s,a]),c=P.useMemo(()=>s.getState(),[s]);mI(()=>{const{subscription:m}=l;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==s.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[l,c]);const d=t||fs;return P.createElement(d.Provider,{value:l},e)}var yI=gI;function my(n=fs){return function(){return P.useContext(n)}}var MS=my();function PS(n=fs){const e=n===fs?MS:my(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var vI=PS();function _I(n=fs){const e=n===fs?vI:PS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var EI=_I(),TI=(n,e)=>n===e;function bI(n=fs){const e=n===fs?MS:my(n),t=(a,s={})=>{const{equalityFn:l=TI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:m,getServerState:g}=c;P.useRef(!0);const v=P.useCallback({[a.name](b){return a(b)}}[a.name],[a]),E=aI.useSyncExternalStoreWithSelector(m.addNestedSub,d.getState,g||d.getState,v,l);return P.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var SI=bI();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var VS=n=>{throw TypeError(n)},AI=(n,e,t)=>e.has(n)||VS("Cannot "+t),sg=(n,e,t)=>(AI(n,e,"read from private field"),t?t.call(n):e.get(n)),wI=(n,e,t)=>e.has(n)?VS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),s0="popstate";function RI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:m=""}=ga(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),ac("",{pathname:c,search:d,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let m=s.location.href,g=m.indexOf("#");d=g===-1?m:m.slice(0,g)}return d+"#"+(typeof l=="string"?l:Vi(l))}function a(s,l){en(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return II(e,t,a,n)}function at(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function en(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CI(){return Math.random().toString(36).substring(2,10)}function o0(n,e){return{usr:n.state,key:n.key,idx:e}}function ac(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ga(e):e,state:t,key:e&&e.key||a||CI()}}function Vi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ga(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function II(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",m=null,g=v();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function v(){return(c.state||{idx:null}).idx}function E(){d="POP";let F=v(),Q=F==null?null:F-g;g=F,m&&m({action:d,location:j.location,delta:Q})}function b(F,Q){d="PUSH";let B=ac(j.location,F,Q);t&&t(B,F),g=v()+1;let q=o0(B,g),Y=j.createHref(B);try{c.pushState(q,"",Y)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(Y)}l&&m&&m({action:d,location:j.location,delta:1})}function C(F,Q){d="REPLACE";let B=ac(j.location,F,Q);t&&t(B,F),g=v();let q=o0(B,g),Y=j.createHref(B);c.replaceState(q,"",Y),l&&m&&m({action:d,location:j.location,delta:0})}function L(F){return kS(F)}let j={get action(){return d},get location(){return n(s,c)},listen(F){if(m)throw new Error("A history only accepts one active listener");return s.addEventListener(s0,E),m=F,()=>{s.removeEventListener(s0,E),m=null}},createHref(F){return e(s,F)},createURL:L,encodeLocation(F){let Q=L(F);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:b,replace:C,go(F){return c.go(F)}};return j}function kS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),at(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Vi(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Bu,l0=class{constructor(n){if(wI(this,Bu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(sg(this,Bu).has(n))return sg(this,Bu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){sg(this,Bu).set(n,e)}};Bu=new WeakMap;var DI=new Set(["lazy","caseSensitive","path","id","index","children"]);function xI(n){return DI.has(n)}var NI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function OI(n){return NI.has(n)}function MI(n){return n.index===!0}function sc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],m=typeof l.id=="string"?l.id:d.join("-");if(at(l.index!==!0||!l.children,"Cannot specify children on an index route"),at(s||!a[m],`Found a route id collision on id "${m}".  Route id's must be globally unique within Data Router usages`),MI(l)){let g={...l,id:m};return a[m]=u0(g,e(g)),g}else{let g={...l,id:m,children:void 0};return a[m]=u0(g,e(g)),l.children&&(g.children=sc(l.children,e,d,a,s)),g}})}function u0(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Za(n,e,t="/"){return Fu(n,e,t,!1)}function Fu(n,e,t,a){let s=typeof e=="string"?ga(e):e,l=Kr(s.pathname||"/",t);if(l==null)return null;let c=LS(n);VI(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=$I(l);d=qI(c[m],g,a)}return d}function PI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function LS(n,e=[],t=[],a="",s=!1){let l=(c,d,m=s,g)=>{let v={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&m)return;at(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let E=xi([a,v.relativePath]),b=t.concat(v);c.children&&c.children.length>0&&(at(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),LS(c.children,e,b,E,m)),!(c.path==null&&!c.index)&&e.push({path:E,score:FI(E,c.index),routesMeta:b})};return n.forEach((c,d)=>{var m;if(c.path===""||!((m=c.path)!=null&&m.includes("?")))l(c,d);else for(let g of US(c.path))l(c,d,!0,g)}),e}function US(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=US(a.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),s&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function VI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var kI=/^:[\w-]+$/,LI=3,UI=2,jI=1,zI=10,BI=-2,c0=n=>n==="*";function FI(n,e){let t=n.split("/"),a=t.length;return t.some(c0)&&(a+=BI),e&&(a+=UI),t.filter(s=>!c0(s)).reduce((s,l)=>s+(kI.test(l)?LI:l===""?jI:zI),a)}function HI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function qI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let m=a[d],g=d===a.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Hf({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),b=m.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=Hf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:xi([l,E.pathname]),pathnameBase:QI(xi([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=xi([l,E.pathnameBase]))}return c}function Hf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=GI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:E},b)=>{if(v==="*"){let L=d[b]||"";c=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const C=d[b];return E&&!C?g[v]=void 0:g[v]=(C||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function GI(n,e=!1,t=!0){en(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(a.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function $I(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return en(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Kr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function KI({basename:n,pathname:e}){return e==="/"?n:xi([n,e])}var jS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,py=n=>jS.test(n);function YI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?ga(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=h0(t.substring(1),"/"):l=h0(t,e)):l=e,{pathname:l,search:XI(a),hash:WI(s)}}function h0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function og(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ed(n){let e=zS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function Td(n,e,t,a=!1){let s;typeof n=="string"?s=ga(n):(s={...n},at(!s.pathname||!s.pathname.includes("?"),og("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),og("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),og("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;s.pathname=b.join("/")}d=E>=0?e[E]:"/"}let m=YI(s,d),g=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var xi=n=>n.join("/").replace(/\/\/+/g,"/"),QI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,WI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Ec=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function oc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Tc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var BS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function FS(n,e){let t=n;if(typeof t!="string"||!jS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(BS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Kr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{en(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var is=Symbol("Uninstrumented");function JI(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=cl(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let m=cl(d,c,()=>{});m&&(a.lazy=Object.assign(a.lazy||{},{[l]:m}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[is]??l,d=cl(t[s],c,(...m)=>f0(m[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[is]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[is]??s,c=cl(t.middleware,l,(...d)=>f0(d[0]));return c?(c[is]=l,c):s})),a}function ZI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[is]??n.navigate,s=cl(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?Vi(c):".",...d0(n,d??{})}});s&&(s[is]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[is]??n.fetch,s=cl(t.fetch,a,(...l)=>{let[c,,d,m]=l;return{href:d??".",fetcherKey:c,...d0(n,m??{})}});s&&(s[is]=a,n.fetch=s)}return n}function cl(n,e,t){return n.length===0?null:async(...a)=>{let s=await HS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function HS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=HS(n,e,t,a-1),l=await c,at(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(m){console.error("An instrumentation function threw an error:",m)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function f0(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:eD(e),params:{...a},unstable_pattern:s,context:tD(t)}}function d0(n,e){return{currentUrl:Vi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function eD(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function tD(n){if(rD(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var nD=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rD(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===nD}var qS=["POST","PUT","PATCH","DELETE"],iD=new Set(qS),aD=["GET",...qS],sD=new Set(aD),GS=new Set([301,302,303,307,308]),oD=new Set([307,308]),lg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},lD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Lu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},uD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),$S="remix-router-transitions",KS=Symbol("ResetLoaderData");function cD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";at(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||uD,l=s;if(n.unstable_instrumentations){let V=n.unstable_instrumentations;l=H=>({...s(H),...JI(V.map(ee=>ee.route).filter(Boolean),H)})}let c={},d=sc(n.routes,l,void 0,c),m,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let v=n.dataStrategy||pD,E={...n.future},b=null,C=new Set,L=null,j=null,F=null,Q=n.hydrationData!=null,B=Za(d,n.history.location,g),q=!1,Y=null,G;if(B==null&&!n.patchRoutesOnNavigation){let V=qr(404,{pathname:n.history.location.pathname}),{matches:H,route:ee}=of(d);G=!0,B=H,Y={[ee.id]:V}}else if(B&&!n.hydrationData&&Ui(B,d,n.history.location.pathname).active&&(B=null),B)if(B.some(V=>V.route.lazy))G=!1;else if(!B.some(V=>gy(V.route)))G=!0;else{let V=n.hydrationData?n.hydrationData.loaderData:null,H=n.hydrationData?n.hydrationData.errors:null;if(H){let ee=B.findIndex(me=>H[me.route.id]!==void 0);G=B.slice(0,ee+1).every(me=>!Ng(me.route,V,H))}else G=B.every(ee=>!Ng(ee.route,V,H))}else{G=!1,B=[];let V=Ui(null,d,n.history.location.pathname);V.active&&V.matches&&(q=!0,B=V.matches)}let ae,S={historyAction:n.history.action,location:n.history.location,matches:B,initialized:G,navigation:lg,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Y,fetchers:new Map,blockers:new Map},A="POP",R=null,x=!1,N,M=!1,O=new Map,be=null,ke=!1,X=!1,de=new Set,ye=new Map,Le=0,Pe=-1,U=new Map,$=new Set,oe=new Map,ce=new Map,pe=new Set,Ee=new Map,Ue,Ke=null;function ot(){if(b=n.history.listen(({action:V,location:H,delta:ee})=>{if(Ue){Ue(),Ue=void 0;return}en(Ee.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=di({currentLocation:S.location,nextLocation:H,historyAction:V});if(me&&ee!=null){let ve=new Promise(Ce=>{Ue=Ce});n.history.go(ee*-1),Qn(me,{state:"blocked",location:H,proceed(){Qn(me,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),ve.then(()=>n.history.go(ee))},reset(){let Ce=new Map(S.blockers);Ce.set(me,Lu),Et({blockers:Ce})}}),R==null||R.resolve(),R=null;return}return ge(V,H)}),t){MD(e,O);let V=()=>PD(e,O);e.addEventListener("pagehide",V),be=()=>e.removeEventListener("pagehide",V)}return S.initialized||ge("POP",S.location,{initialHydration:!0}),ae}function $t(){b&&b(),be&&be(),C.clear(),N&&N.abort(),S.fetchers.forEach((V,H)=>va(H)),S.blockers.forEach((V,H)=>As(H))}function Rn(V){return C.add(V),()=>C.delete(V)}function Et(V,H={}){V.matches&&(V.matches=V.matches.map(ve=>{let Ce=c[ve.route.id],xe=ve.route;return xe.element!==Ce.element||xe.errorElement!==Ce.errorElement||xe.hydrateFallbackElement!==Ce.hydrateFallbackElement?{...ve,route:Ce}:ve})),S={...S,...V};let ee=[],me=[];S.fetchers.forEach((ve,Ce)=>{ve.state==="idle"&&(pe.has(Ce)?ee.push(Ce):me.push(Ce))}),pe.forEach(ve=>{!S.fetchers.has(ve)&&!ye.has(ve)&&ee.push(ve)}),[...C].forEach(ve=>ve(S,{deletedFetchers:ee,newErrors:V.errors??null,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),ee.forEach(ve=>va(ve)),me.forEach(ve=>S.fetchers.delete(ve))}function En(V,H,{flushSync:ee}={}){var qe,Me;let me=S.actionData!=null&&S.navigation.formMethod!=null&&Hn(S.navigation.formMethod)&&S.navigation.state==="loading"&&((qe=V.state)==null?void 0:qe._isRedirect)!==!0,ve;H.actionData?Object.keys(H.actionData).length>0?ve=H.actionData:ve=null:me?ve=S.actionData:ve=null;let Ce=H.loaderData?S0(S.loaderData,H.loaderData,H.matches||[],H.errors):S.loaderData,xe=S.blockers;xe.size>0&&(xe=new Map(xe),xe.forEach((Qe,it)=>xe.set(it,Lu)));let _e=ke?!1:_o(V,H.matches||S.matches),Se=x===!0||S.navigation.formMethod!=null&&Hn(S.navigation.formMethod)&&((Me=V.state)==null?void 0:Me._isRedirect)!==!0;m&&(d=m,m=void 0),ke||A==="POP"||(A==="PUSH"?n.history.push(V,V.state):A==="REPLACE"&&n.history.replace(V,V.state));let De;if(A==="POP"){let Qe=O.get(S.location.pathname);Qe&&Qe.has(V.pathname)?De={currentLocation:S.location,nextLocation:V}:O.has(V.pathname)&&(De={currentLocation:V,nextLocation:S.location})}else if(M){let Qe=O.get(S.location.pathname);Qe?Qe.add(V.pathname):(Qe=new Set([V.pathname]),O.set(S.location.pathname,Qe)),De={currentLocation:S.location,nextLocation:V}}Et({...H,actionData:ve,loaderData:Ce,historyAction:A,location:V,initialized:!0,navigation:lg,revalidation:"idle",restoreScrollPosition:_e,preventScrollReset:Se,blockers:xe},{viewTransitionOpts:De,flushSync:ee===!0}),A="POP",x=!1,M=!1,ke=!1,X=!1,R==null||R.resolve(),R=null,Ke==null||Ke.resolve(),Ke=null}async function Kt(V,H){if(R==null||R.resolve(),R=null,typeof V=="number"){R||(R=C0());let it=R.promise;return n.history.go(V),it}let ee=xg(S.location,S.matches,g,V,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:me,submission:ve,error:Ce}=m0(!1,ee,H),xe=S.location,_e=ac(S.location,me,H&&H.state);_e={..._e,...n.history.encodeLocation(_e)};let Se=H&&H.replace!=null?H.replace:void 0,De="PUSH";Se===!0?De="REPLACE":Se===!1||ve!=null&&Hn(ve.formMethod)&&ve.formAction===S.location.pathname+S.location.search&&(De="REPLACE");let qe=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Me=(H&&H.flushSync)===!0,Qe=di({currentLocation:xe,nextLocation:_e,historyAction:De});if(Qe){Qn(Qe,{state:"blocked",location:_e,proceed(){Qn(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),Kt(V,H)},reset(){let it=new Map(S.blockers);it.set(Qe,Lu),Et({blockers:it})}});return}await ge(De,_e,{submission:ve,pendingError:Ce,preventScrollReset:qe,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:H&&H.unstable_defaultShouldRevalidate})}function ne(){Ke||(Ke=C0()),Kn(),Et({revalidation:"loading"});let V=Ke.promise;return S.navigation.state==="submitting"?V:S.navigation.state==="idle"?(ge(S.historyAction,S.location,{startUninterruptedRevalidation:!0}),V):(ge(A||S.historyAction,S.navigation.location,{overrideNavigation:S.navigation,enableViewTransition:M===!0}),V)}async function ge(V,H,ee){N&&N.abort(),N=null,A=V,ke=(ee&&ee.startUninterruptedRevalidation)===!0,pr(S.location,S.matches),x=(ee&&ee.preventScrollReset)===!0,M=(ee&&ee.enableViewTransition)===!0;let me=m||d,ve=ee&&ee.overrideNavigation,Ce=ee!=null&&ee.initialHydration&&S.matches&&S.matches.length>0&&!q?S.matches:Za(me,H,g),xe=(ee&&ee.flushSync)===!0;if(Ce&&S.initialized&&!X&&SD(S.location,H)&&!(ee&&ee.submission&&Hn(ee.submission.formMethod))){En(H,{matches:Ce},{flushSync:xe});return}let _e=Ui(Ce,me,H.pathname);if(_e.active&&_e.matches&&(Ce=_e.matches),!Ce){let{error:Ft,notFoundMatches:Ut,route:tt}=Qt(H.pathname);En(H,{matches:Ut,loaderData:{},errors:{[tt.id]:Ft}},{flushSync:xe});return}N=new AbortController;let Se=il(n.history,H,N.signal,ee&&ee.submission),De=n.getContext?await n.getContext():new l0,qe;if(ee&&ee.pendingError)qe=[es(Ce).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&Hn(ee.submission.formMethod)){let Ft=await Ve(Se,H,ee.submission,Ce,De,_e.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:xe});if(Ft.shortCircuited)return;if(Ft.pendingActionResult){let[Ut,tt]=Ft.pendingActionResult;if(wr(tt)&&oc(tt.error)&&tt.error.status===404){N=null,En(H,{matches:Ft.matches,loaderData:{},errors:{[Ut]:tt.error}});return}}Ce=Ft.matches||Ce,qe=Ft.pendingActionResult,ve=ug(H,ee.submission),xe=!1,_e.active=!1,Se=il(n.history,Se.url,Se.signal)}let{shortCircuited:Me,matches:Qe,loaderData:it,errors:Dt}=await we(Se,H,Ce,De,_e.active,ve,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,xe,qe,ee&&ee.callSiteDefaultShouldRevalidate);Me||(N=null,En(H,{matches:Qe||Ce,...A0(qe),loaderData:it,errors:Dt}))}async function Ve(V,H,ee,me,ve,Ce,xe,_e={}){Kn();let Se=ND(H,ee);if(Et({navigation:Se},{flushSync:_e.flushSync===!0}),Ce){let Me=await Xn(me,H.pathname,V.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:it,route:Dt}=of(d);return{matches:it,pendingActionResult:[Dt.id,{type:"error",error:Me.error}]}}let Qe=es(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[Qe,{type:"error",error:Me.error}]}}else if(Me.matches)me=Me.matches;else{let{notFoundMatches:Qe,error:it,route:Dt}=Qt(H.pathname);return{matches:Qe,pendingActionResult:[Dt.id,{type:"error",error:it}]}}}let De,qe=_f(me,H);if(!qe.route.action&&!qe.route.lazy)De={type:"error",error:qr(405,{method:V.method,pathname:H.pathname,routeId:qe.route.id})};else{let Me=dl(l,c,V,me,qe,xe?[]:a,ve),Qe=await It(V,Me,ve,null);if(De=Qe[qe.route.id],!De){for(let it of me)if(Qe[it.route.id]){De=Qe[it.route.id];break}}if(V.signal.aborted)return{shortCircuited:!0}}if(Ws(De)){let Me;return _e&&_e.replace!=null?Me=_e.replace:Me=E0(De.response.headers.get("Location"),new URL(V.url),g,n.history)===S.location.pathname+S.location.search,await Ye(V,De,!0,{submission:ee,replace:Me}),{shortCircuited:!0}}if(wr(De)){let Me=es(me,qe.route.id);return(_e&&_e.replace)!==!0&&(A="PUSH"),{matches:me,pendingActionResult:[Me.route.id,De,qe.route.id]}}return{matches:me,pendingActionResult:[qe.route.id,De]}}async function we(V,H,ee,me,ve,Ce,xe,_e,Se,De,qe,Me,Qe){let it=Ce||ug(H,xe),Dt=xe||_e||R0(it),Ft=!ke&&!De;if(ve){if(Ft){let Jt=Ae(Me);Et({navigation:it,...Jt!==void 0?{actionData:Jt}:{}},{flushSync:qe})}let st=await Xn(ee,H.pathname,V.signal);if(st.type==="aborted")return{shortCircuited:!0};if(st.type==="error"){if(st.partialMatches.length===0){let{matches:fn,route:xt}=of(d);return{matches:fn,loaderData:{},errors:{[xt.id]:st.error}}}let Jt=es(st.partialMatches).route.id;return{matches:st.partialMatches,loaderData:{},errors:{[Jt]:st.error}}}else if(st.matches)ee=st.matches;else{let{error:Jt,notFoundMatches:fn,route:xt}=Qt(H.pathname);return{matches:fn,loaderData:{},errors:{[xt.id]:Jt}}}}let Ut=m||d,{dsMatches:tt,revalidatingFetchers:jt}=p0(V,me,l,c,n.history,S,ee,Dt,H,De?[]:a,De===!0,X,de,pe,oe,$,Ut,g,n.patchRoutesOnNavigation!=null,Me,Qe);if(Pe=++Le,!n.dataStrategy&&!tt.some(st=>st.shouldLoad)&&!tt.some(st=>st.route.middleware&&st.route.middleware.length>0)&&jt.length===0){let st=Yt();return En(H,{matches:ee,loaderData:{},errors:Me&&wr(Me[1])?{[Me[0]]:Me[1].error}:null,...A0(Me),...st?{fetchers:new Map(S.fetchers)}:{}},{flushSync:qe}),{shortCircuited:!0}}if(Ft){let st={};if(!ve){st.navigation=it;let Jt=Ae(Me);Jt!==void 0&&(st.actionData=Jt)}jt.length>0&&(st.fetchers=Fe(jt)),Et(st,{flushSync:qe})}jt.forEach(st=>{kt(st.key),st.controller&&ye.set(st.key,st.controller)});let Cn=()=>jt.forEach(st=>kt(st.key));N&&N.signal.addEventListener("abort",Cn);let{loaderResults:zt,fetcherResults:nr}=await tr(tt,jt,V,me);if(V.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",Cn),jt.forEach(st=>ye.delete(st.key));let jn=lf(zt);if(jn)return await Ye(V,jn.result,!0,{replace:Se}),{shortCircuited:!0};if(jn=lf(nr),jn)return $.add(jn.key),await Ye(V,jn.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:rr,errors:zn}=b0(S,ee,zt,Me,jt,nr);De&&S.errors&&(zn={...S.errors,...zn});let gr=Yt(),pi=Ss(Pe),gi=gr||pi||jt.length>0;return{matches:ee,loaderData:rr,errors:zn,...gi?{fetchers:new Map(S.fetchers)}:{}}}function Ae(V){if(V&&!wr(V[1]))return{[V[0]]:V[1].data};if(S.actionData)return Object.keys(S.actionData).length===0?null:S.actionData}function Fe(V){return V.forEach(H=>{let ee=S.fetchers.get(H.key),me=Uu(void 0,ee?ee.data:void 0);S.fetchers.set(H.key,me)}),new Map(S.fetchers)}async function Vt(V,H,ee,me){kt(V);let ve=(me&&me.flushSync)===!0,Ce=m||d,xe=xg(S.location,S.matches,g,ee,H,me==null?void 0:me.relative),_e=Za(Ce,xe,g),Se=Ui(_e,Ce,xe);if(Se.active&&Se.matches&&(_e=Se.matches),!_e){Tn(V,H,qr(404,{pathname:xe}),{flushSync:ve});return}let{path:De,submission:qe,error:Me}=m0(!0,xe,me);if(Me){Tn(V,H,Me,{flushSync:ve});return}let Qe=n.getContext?await n.getContext():new l0,it=(me&&me.preventScrollReset)===!0;if(qe&&Hn(qe.formMethod)){await wt(V,H,De,_e,Qe,Se.active,ve,it,qe,me&&me.unstable_defaultShouldRevalidate);return}oe.set(V,{routeId:H,path:De}),await je(V,H,De,_e,Qe,Se.active,ve,it,qe)}async function wt(V,H,ee,me,ve,Ce,xe,_e,Se,De){Kn(),oe.delete(V);let qe=S.fetchers.get(V);nn(V,OD(Se,qe),{flushSync:xe});let Me=new AbortController,Qe=il(n.history,ee,Me.signal,Se);if(Ce){let nt=await Xn(me,new URL(Qe.url).pathname,Qe.signal,V);if(nt.type==="aborted")return;if(nt.type==="error"){Tn(V,H,nt.error,{flushSync:xe});return}else if(nt.matches)me=nt.matches;else{Tn(V,H,qr(404,{pathname:ee}),{flushSync:xe});return}}let it=_f(me,ee);if(!it.route.action&&!it.route.lazy){let nt=qr(405,{method:Se.formMethod,pathname:ee,routeId:H});Tn(V,H,nt,{flushSync:xe});return}ye.set(V,Me);let Dt=Le,Ft=dl(l,c,Qe,me,it,a,ve),Ut=await It(Qe,Ft,ve,V),tt=Ut[it.route.id];if(!tt){for(let nt of Ft)if(Ut[nt.route.id]){tt=Ut[nt.route.id];break}}if(Qe.signal.aborted){ye.get(V)===Me&&ye.delete(V);return}if(pe.has(V)){if(Ws(tt)||wr(tt)){nn(V,ia(void 0));return}}else{if(Ws(tt))if(ye.delete(V),Pe>Dt){nn(V,ia(void 0));return}else return $.add(V),nn(V,Uu(Se)),Ye(Qe,tt,!1,{fetcherSubmission:Se,preventScrollReset:_e});if(wr(tt)){Tn(V,H,tt.error);return}}let jt=S.navigation.location||S.location,Cn=il(n.history,jt,Me.signal),zt=m||d,nr=S.navigation.state!=="idle"?Za(zt,S.navigation.location,g):S.matches;at(nr,"Didn't find any matches after fetcher action");let jn=++Le;U.set(V,jn);let rr=Uu(Se,tt.data);S.fetchers.set(V,rr);let{dsMatches:zn,revalidatingFetchers:gr}=p0(Cn,ve,l,c,n.history,S,nr,Se,jt,a,!1,X,de,pe,oe,$,zt,g,n.patchRoutesOnNavigation!=null,[it.route.id,tt],De);gr.filter(nt=>nt.key!==V).forEach(nt=>{let yr=nt.key,Ea=S.fetchers.get(yr),Tt=Uu(void 0,Ea?Ea.data:void 0);S.fetchers.set(yr,Tt),kt(yr),nt.controller&&ye.set(yr,nt.controller)}),Et({fetchers:new Map(S.fetchers)});let pi=()=>gr.forEach(nt=>kt(nt.key));Me.signal.addEventListener("abort",pi);let{loaderResults:gi,fetcherResults:st}=await tr(zn,gr,Cn,ve);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",pi),U.delete(V),ye.delete(V),gr.forEach(nt=>ye.delete(nt.key)),S.fetchers.has(V)){let nt=ia(tt.data);S.fetchers.set(V,nt)}let Jt=lf(gi);if(Jt)return Ye(Cn,Jt.result,!1,{preventScrollReset:_e});if(Jt=lf(st),Jt)return $.add(Jt.key),Ye(Cn,Jt.result,!1,{preventScrollReset:_e});let{loaderData:fn,errors:xt}=b0(S,nr,gi,void 0,gr,st);Ss(jn),S.navigation.state==="loading"&&jn>Pe?(at(A,"Expected pending action"),N&&N.abort(),En(S.navigation.location,{matches:nr,loaderData:fn,errors:xt,fetchers:new Map(S.fetchers)})):(Et({errors:xt,loaderData:S0(S.loaderData,fn,nr,xt),fetchers:new Map(S.fetchers)}),X=!1)}async function je(V,H,ee,me,ve,Ce,xe,_e,Se){let De=S.fetchers.get(V);nn(V,Uu(Se,De?De.data:void 0),{flushSync:xe});let qe=new AbortController,Me=il(n.history,ee,qe.signal);if(Ce){let tt=await Xn(me,new URL(Me.url).pathname,Me.signal,V);if(tt.type==="aborted")return;if(tt.type==="error"){Tn(V,H,tt.error,{flushSync:xe});return}else if(tt.matches)me=tt.matches;else{Tn(V,H,qr(404,{pathname:ee}),{flushSync:xe});return}}let Qe=_f(me,ee);ye.set(V,qe);let it=Le,Dt=dl(l,c,Me,me,Qe,a,ve),Ut=(await It(Me,Dt,ve,V))[Qe.route.id];if(ye.get(V)===qe&&ye.delete(V),!Me.signal.aborted){if(pe.has(V)){nn(V,ia(void 0));return}if(Ws(Ut))if(Pe>it){nn(V,ia(void 0));return}else{$.add(V),await Ye(Me,Ut,!1,{preventScrollReset:_e});return}if(wr(Ut)){Tn(V,H,Ut.error);return}nn(V,ia(Ut.data))}}async function Ye(V,H,ee,{submission:me,fetcherSubmission:ve,preventScrollReset:Ce,replace:xe}={}){ee||(R==null||R.resolve(),R=null),H.response.headers.has("X-Remix-Revalidate")&&(X=!0);let _e=H.response.headers.get("Location");at(_e,"Expected a Location header on the redirect Response"),_e=E0(_e,new URL(V.url),g,n.history);let Se=ac(S.location,_e,{_isRedirect:!0});if(t){let Dt=!1;if(H.response.headers.has("X-Remix-Reload-Document"))Dt=!0;else if(py(_e)){const Ft=kS(_e,!0);Dt=Ft.origin!==e.location.origin||Kr(Ft.pathname,g)==null}if(Dt){xe?e.location.replace(_e):e.location.assign(_e);return}}N=null;let De=xe===!0||H.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:qe,formAction:Me,formEncType:Qe}=S.navigation;!me&&!ve&&qe&&Me&&Qe&&(me=R0(S.navigation));let it=me||ve;if(oD.has(H.response.status)&&it&&Hn(it.formMethod))await ge(De,Se,{submission:{...it,formAction:_e},preventScrollReset:Ce||x,enableViewTransition:ee?M:void 0});else{let Dt=ug(Se,me);await ge(De,Se,{overrideNavigation:Dt,fetcherSubmission:ve,preventScrollReset:Ce||x,enableViewTransition:ee?M:void 0})}}async function It(V,H,ee,me){var xe;let ve,Ce={};try{ve=await yD(v,V,H,me,ee,!1)}catch(_e){return H.filter(Se=>Se.shouldLoad).forEach(Se=>{Ce[Se.route.id]={type:"error",error:_e}}),Ce}if(V.signal.aborted)return Ce;if(!Hn(V.method))for(let _e of H){if(((xe=ve[_e.route.id])==null?void 0:xe.type)==="error")break;!ve.hasOwnProperty(_e.route.id)&&!S.loaderData.hasOwnProperty(_e.route.id)&&(!S.errors||!S.errors.hasOwnProperty(_e.route.id))&&_e.shouldCallHandler()&&(ve[_e.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${_e.route.id}`)})}for(let[_e,Se]of Object.entries(ve))if(CD(Se)){let De=Se.result;Ce[_e]={type:"redirect",response:TD(De,V,_e,H,g)}}else Ce[_e]=await ED(Se);return Ce}async function tr(V,H,ee,me){let ve=It(ee,V,me,null),Ce=Promise.all(H.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let qe=(await It(Se.request,Se.matches,me,Se.key))[Se.match.route.id];return{[Se.key]:qe}}else return Promise.resolve({[Se.key]:{type:"error",error:qr(404,{pathname:Se.path})}})})),xe=await ve,_e=(await Ce).reduce((Se,De)=>Object.assign(Se,De),{});return{loaderResults:xe,fetcherResults:_e}}function Kn(){X=!0,oe.forEach((V,H)=>{ye.has(H)&&de.add(H),kt(H)})}function nn(V,H,ee={}){S.fetchers.set(V,H),Et({fetchers:new Map(S.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function Tn(V,H,ee,me={}){let ve=es(S.matches,H);va(V),Et({errors:{[ve.route.id]:ee},fetchers:new Map(S.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function bs(V){return ce.set(V,(ce.get(V)||0)+1),pe.has(V)&&pe.delete(V),S.fetchers.get(V)||lD}function vo(V,H){kt(V,H==null?void 0:H.reason),nn(V,ia(null))}function va(V){let H=S.fetchers.get(V);ye.has(V)&&!(H&&H.state==="loading"&&U.has(V))&&kt(V),oe.delete(V),U.delete(V),$.delete(V),pe.delete(V),de.delete(V),S.fetchers.delete(V)}function dr(V){let H=(ce.get(V)||0)-1;H<=0?(ce.delete(V),pe.add(V)):ce.set(V,H),Et({fetchers:new Map(S.fetchers)})}function kt(V,H){let ee=ye.get(V);ee&&(ee.abort(H),ye.delete(V))}function Yn(V){for(let H of V){let ee=bs(H),me=ia(ee.data);S.fetchers.set(H,me)}}function Yt(){let V=[],H=!1;for(let ee of $){let me=S.fetchers.get(ee);at(me,`Expected fetcher: ${ee}`),me.state==="loading"&&($.delete(ee),V.push(ee),H=!0)}return Yn(V),H}function Ss(V){let H=[];for(let[ee,me]of U)if(me<V){let ve=S.fetchers.get(ee);at(ve,`Expected fetcher: ${ee}`),ve.state==="loading"&&(kt(ee),U.delete(ee),H.push(ee))}return Yn(H),H.length>0}function _a(V,H){let ee=S.blockers.get(V)||Lu;return Ee.get(V)!==H&&Ee.set(V,H),ee}function As(V){S.blockers.delete(V),Ee.delete(V)}function Qn(V,H){let ee=S.blockers.get(V)||Lu;at(ee.state==="unblocked"&&H.state==="blocked"||ee.state==="blocked"&&H.state==="blocked"||ee.state==="blocked"&&H.state==="proceeding"||ee.state==="blocked"&&H.state==="unblocked"||ee.state==="proceeding"&&H.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${H.state}`);let me=new Map(S.blockers);me.set(V,H),Et({blockers:me})}function di({currentLocation:V,nextLocation:H,historyAction:ee}){if(Ee.size===0)return;Ee.size>1&&en(!1,"A router only supports one blocker at a time");let me=Array.from(Ee.entries()),[ve,Ce]=me[me.length-1],xe=S.blockers.get(ve);if(!(xe&&xe.state==="proceeding")&&Ce({currentLocation:V,nextLocation:H,historyAction:ee}))return ve}function Qt(V){let H=qr(404,{pathname:V}),ee=m||d,{matches:me,route:ve}=of(ee);return{notFoundMatches:me,route:ve,error:H}}function Or(V,H,ee){if(L=V,F=H,j=ee||null,!Q&&S.navigation===lg){Q=!0;let me=_o(S.location,S.matches);me!=null&&Et({restoreScrollPosition:me})}return()=>{L=null,F=null,j=null}}function mr(V,H){return j&&j(V,H.map(me=>PI(me,S.loaderData)))||V.key}function pr(V,H){if(L&&F){let ee=mr(V,H);L[ee]=F()}}function _o(V,H){if(L){let ee=mr(V,H),me=L[ee];if(typeof me=="number")return me}return null}function Ui(V,H,ee){if(n.patchRoutesOnNavigation)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:Fu(H,ee,g,!0)}}else return{active:!0,matches:Fu(H,ee,g,!0)||[]};return{active:!1,matches:null}}async function Xn(V,H,ee,me){if(!n.patchRoutesOnNavigation)return{type:"success",matches:V};let ve=V;for(;;){let Ce=m==null,xe=m||d,_e=c;try{await n.patchRoutesOnNavigation({signal:ee,path:H,matches:ve,fetcherKey:me,patch:(qe,Me)=>{ee.aborted||g0(qe,Me,xe,_e,l,!1)}})}catch(qe){return{type:"error",error:qe,partialMatches:ve}}finally{Ce&&!ee.aborted&&(d=[...d])}if(ee.aborted)return{type:"aborted"};let Se=Za(xe,H,g),De=null;if(Se){if(Object.keys(Se[0].params).length===0)return{type:"success",matches:Se};if(De=Fu(xe,H,g,!0),!(De&&ve.length<De.length&&mi(ve,De.slice(0,ve.length))))return{type:"success",matches:Se}}if(De||(De=Fu(xe,H,g,!0)),!De||mi(ve,De))return{type:"success",matches:null};ve=De}}function mi(V,H){return V.length===H.length&&V.every((ee,me)=>ee.route.id===H[me].route.id)}function Hl(V){c={},m=sc(V,l,void 0,c)}function ji(V,H,ee=!1){let me=m==null;g0(V,H,m||d,c,l,ee),me&&(d=[...d],Et({}))}return ae={get basename(){return g},get future(){return E},get state(){return S},get routes(){return d},get window(){return e},initialize:ot,subscribe:Rn,enableScrollRestoration:Or,navigate:Kt,fetch:Vt,revalidate:ne,createHref:V=>n.history.createHref(V),encodeLocation:V=>n.history.encodeLocation(V),getFetcher:bs,resetFetcher:vo,deleteFetcher:dr,dispose:$t,getBlocker:_a,deleteBlocker:As,patchRoutes:ji,_internalFetchControllers:ye,_internalSetRoutes:Hl,_internalSetStateDoNotUseOrYouWillBreakYourApp(V){Et(V)}},n.unstable_instrumentations&&(ae=ZI(ae,n.unstable_instrumentations.map(V=>V.router).filter(Boolean))),ae}function hD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function xg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let m=Td(a||".",Ed(c),Kr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(m.search=n.search,m.hash=n.hash),(a==null||a===""||a===".")&&d){let g=vy(m.search);if(d.route.index&&!g)m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let v=new URLSearchParams(m.search),E=v.getAll("index");v.delete("index"),E.filter(C=>C).forEach(C=>v.append("index",C));let b=v.toString();m.search=b?`?${b}`:""}}return t!=="/"&&(m.pathname=KI({basename:t,pathname:m.pathname})),Vi(m)}function m0(n,e,t){if(!t||!hD(t))return{path:e};if(t.formMethod&&!xD(t.formMethod))return{path:e,error:qr(405,{method:t.formMethod})};let a=()=>({path:e,error:qr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=ZS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Hn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((b,[C,L])=>`${b}${C}=${L}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Hn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}at(typeof FormData=="function","FormData is not available in this environment");let d,m;if(t.formData)d=Mg(t.formData),m=t.formData;else if(t.body instanceof FormData)d=Mg(t.body),m=t.body;else if(t.body instanceof URLSearchParams)d=t.body,m=T0(d);else if(t.body==null)d=new URLSearchParams,m=new FormData;else try{d=new URLSearchParams(t.body),m=T0(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:m,json:void 0,text:void 0};if(Hn(g.formMethod))return{path:e,submission:g};let v=ga(e);return n&&v.search&&vy(v.search)&&d.append("index",""),v.search=`?${d}`,{path:Vi(v),submission:g}}function p0(n,e,t,a,s,l,c,d,m,g,v,E,b,C,L,j,F,Q,B,q,Y){var ke;let G=q?wr(q[1])?q[1].error:q[1].data:void 0,ae=s.createURL(l.location),S=s.createURL(m),A;if(v&&l.errors){let X=Object.keys(l.errors)[0];A=c.findIndex(de=>de.route.id===X)}else if(q&&wr(q[1])){let X=q[0];A=c.findIndex(de=>de.route.id===X)-1}let R=q?q[1].statusCode:void 0,x=R&&R>=400,N={currentUrl:ae,currentParams:((ke=l.matches[0])==null?void 0:ke.params)||{},nextUrl:S,nextParams:c[0].params,...d,actionResult:G,actionStatus:R},M=Tc(c),O=c.map((X,de)=>{let{route:ye}=X,Le=null;if(A!=null&&de>A?Le=!1:ye.lazy?Le=!0:gy(ye)?v?Le=Ng(ye,l.loaderData,l.errors):fD(l.loaderData,l.matches[de],X)&&(Le=!0):Le=!1,Le!==null)return Og(t,a,n,M,X,g,e,Le);let Pe=!1;typeof Y=="boolean"?Pe=Y:x?Pe=!1:(E||ae.pathname+ae.search===S.pathname+S.search||ae.search!==S.search||dD(l.matches[de],X))&&(Pe=!0);let U={...N,defaultShouldRevalidate:Pe},$=Qu(X,U);return Og(t,a,n,M,X,g,e,$,U,Y)}),be=[];return L.forEach((X,de)=>{if(v||!c.some(pe=>pe.route.id===X.routeId)||C.has(de))return;let ye=l.fetchers.get(de),Le=ye&&ye.state!=="idle"&&ye.data===void 0,Pe=Za(F,X.path,Q);if(!Pe){if(B&&Le)return;be.push({key:de,routeId:X.routeId,path:X.path,matches:null,match:null,request:null,controller:null});return}if(j.has(de))return;let U=_f(Pe,X.path),$=new AbortController,oe=il(s,X.path,$.signal),ce=null;if(b.has(de))b.delete(de),ce=dl(t,a,oe,Pe,U,g,e);else if(Le)E&&(ce=dl(t,a,oe,Pe,U,g,e));else{let pe;typeof Y=="boolean"?pe=Y:x?pe=!1:pe=E;let Ee={...N,defaultShouldRevalidate:pe};Qu(U,Ee)&&(ce=dl(t,a,oe,Pe,U,g,e,Ee))}ce&&be.push({key:de,routeId:X.routeId,path:X.path,matches:ce,match:U,request:oe,controller:$})}),{dsMatches:O,revalidatingFetchers:be}}function gy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Ng(n,e,t){if(n.lazy)return!0;if(!gy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function fD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function dD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Qu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function g0(n,e,t,a,s,l){let c;if(n){let g=a[n];at(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],m=[];if(e.forEach(g=>{let v=c.find(E=>YS(g,E));v?m.push({existingRoute:v,newRoute:g}):d.push(g)}),d.length>0){let g=sc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&m.length>0)for(let g=0;g<m.length;g++){let{existingRoute:v,newRoute:E}=m[g],b=v,[C]=sc([E],s,[],{},!0);Object.assign(b,{element:C.element?C.element:b.element,errorElement:C.errorElement?C.errorElement:b.errorElement,hydrateFallbackElement:C.hydrateFallbackElement?C.hydrateFallbackElement:b.hydrateFallbackElement})}}function YS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>YS(t,l))}):!1}var y0=new WeakMap,QS=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(at(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=y0.get(s);c||(c={},y0.set(s,c));let d=c[n];if(d)return d;let m=(async()=>{let g=xI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)en(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)en(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let b=await l();b!=null&&(Object.assign(s,{[n]:b}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(b=>b===void 0)&&(s.lazy=void 0))})();return c[n]=m,m},v0=new WeakMap;function mD(n,e,t,a,s){let l=t[n.id];if(at(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=v0.get(l);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let E=(async()=>{at(typeof n.lazy=="function","No lazy route function found");let b=await n.lazy(),C={};for(let L in b){let j=b[L];if(j===void 0)continue;let F=OI(L),B=l[L]!==void 0&&L!=="hasErrorBoundary";F?en(!F,"Route property "+L+" is not a supported property to be returned from a lazy route function. This property will be ignored."):B?en(!B,`Route "${l.id}" has a static property "${L}" defined but its lazy function is also returning a value for this property. The lazy route property "${L}" will be ignored.`):C[L]=j}Object.assign(l,C),Object.assign(l,{...a(l),lazy:void 0})})();return v0.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],m;for(let v of c){if(s&&s.includes(v))continue;let E=QS({key:v,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),v===e&&(m=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),m==null||m.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:m}}async function _0(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function pD(n){return n.matches.some(e=>e.route.middleware)?XS(n,()=>_0(n)):_0(n)}function XS(n,e){return gD(n,e,a=>{if(DD(a))throw a;return a},wD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),m=es(c,c[d].route.id).route.id;return Promise.resolve({[m]:{type:"error",result:a}})}}}async function gD(n,e,t,a,s){let{matches:l,request:c,params:d,context:m,unstable_pattern:g}=n,v=l.flatMap(b=>b.route.middleware?b.route.middleware.map(C=>[b.route.id,C]):[]);return await WS({request:c,params:d,context:m,unstable_pattern:g},v,e,t,a,s)}async function WS(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let m=e[c];if(!m)return await t();let[g,v]=m,E,b=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await WS(n,e,t,a,s,l,c+1)},E.value}catch(C){return E={value:await l(C,g,E)},E.value}};try{let C=await v(n,b),L=C!=null?a(C):void 0;return s(L)?L:E?L??E.value:(E={value:await b()},E.value)}catch(C){return await l(C,g,E)}}function JS(n,e,t,a,s){let l=QS({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=mD(a.route,Hn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Og(n,e,t,a,s,l,c,d,m=null,g){let v=!1,E=JS(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:m,shouldCallHandler(b){return v=!0,m?typeof g=="boolean"?Qu(s,{...m,defaultShouldRevalidate:g}):typeof b=="boolean"?Qu(s,{...m,defaultShouldRevalidate:b}):Qu(s,m):d},resolve(b){let{lazy:C,loader:L,middleware:j}=s.route,F=v||d||b&&!Hn(t.method)&&(C||L),Q=j&&j.length>0&&!L&&!C;return F&&(Hn(t.method)||!Q)?vD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:b,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function dl(n,e,t,a,s,l,c,d=null){return a.map(m=>m.route.id!==s.route.id?{...m,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:JS(n,e,t,m,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Og(n,e,t,Tc(a),m,l,c,!0,d))}async function yD(n,e,t,a,s,l){t.some(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(g=>{var v;return(v=g._lazyPromises)==null?void 0:v.middleware}));let c={request:e,unstable_pattern:Tc(t),params:t[0].params,context:s,matches:t},m=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let v=c;return XS(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var v,E;return[(v=g._lazyPromises)==null?void 0:v.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return m}async function vD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,m,g=Hn(n.method),v=g?"action":"loader",E=b=>{let C,L=new Promise((Q,B)=>C=B);m=()=>C(),n.signal.addEventListener("abort",m);let j=Q=>typeof b!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):b({request:n,unstable_pattern:e,params:t.params,context:c},...Q!==void 0?[Q]:[]),F=(async()=>{try{return{type:"data",result:await(l?l(B=>j(B)):j())}}catch(Q){return{type:"error",result:Q}}})();return Promise.race([F,L])};try{let b=g?t.route.action:t.route.loader;if(a||s)if(b){let C,[L]=await Promise.all([E(b).catch(j=>{C=j}),a,s]);if(C!==void 0)throw C;d=L}else{await a;let C=g?t.route.action:t.route.loader;if(C)[d]=await Promise.all([E(C),s]);else if(v==="action"){let L=new URL(n.url),j=L.pathname+L.search;throw qr(405,{method:n.method,pathname:j,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(b)d=await E(b);else{let C=new URL(n.url),L=C.pathname+C.search;throw qr(404,{pathname:L})}}catch(b){return{type:"error",result:b}}finally{m&&n.signal.removeEventListener("abort",m)}return d}async function _D(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function ED(n){var a,s,l,c,d;let{result:e,type:t}=n;if(yy(e)){let m;try{m=await _D(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new Ec(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:"data",data:m,statusCode:e.status,headers:e.headers}}return t==="error"?w0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:AD(e),statusCode:oc(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:oc(e)?e.status:void 0}:w0(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function TD(n,e,t,a,s){let l=n.headers.get("Location");if(at(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!py(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=xg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function E0(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(py(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=Kr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function il(n,e,t,a){let s=n.createURL(ZS(e)).toString(),l={signal:t};if(a&&Hn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Mg(a.formData):l.body=a.formData}return new Request(s,l)}function Mg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function T0(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function bD(n,e,t,a=!1,s=!1){let l={},c=null,d,m=!1,g={},v=t&&wr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let b=E.route.id,C=e[b];if(at(!Ws(C),"Cannot handle redirect results in processLoaderData"),wr(C)){let L=C.error;if(v!==void 0&&(L=v,v=void 0),c=c||{},s)c[b]=L;else{let j=es(n,b);c[j.route.id]==null&&(c[j.route.id]=L)}a||(l[b]=KS),m||(m=!0,d=oc(C.error)?C.error.status:500),C.headers&&(g[b]=C.headers)}else l[b]=C.data,C.statusCode&&C.statusCode!==200&&!m&&(d=C.statusCode),C.headers&&(g[b]=C.headers)}),v!==void 0&&t&&(c={[t[0]]:v},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function b0(n,e,t,a,s,l){let{loaderData:c,errors:d}=bD(e,t,a);return s.filter(m=>!m.matches||m.matches.some(g=>g.shouldLoad)).forEach(m=>{let{key:g,match:v,controller:E}=m;if(E&&E.signal.aborted)return;let b=l[g];if(at(b,"Did not find corresponding fetcher result"),wr(b)){let C=es(n.matches,v==null?void 0:v.route.id);d&&d[C.route.id]||(d={...d,[C.route.id]:b.error}),n.fetchers.delete(g)}else if(Ws(b))at(!1,"Unhandled fetcher revalidation redirect");else{let C=ia(b.data);n.fetchers.set(g,C)}}),{loaderData:c,errors:d}}function S0(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==KS).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function A0(n){return n?wr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function es(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function of(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new Ec(n||500,c,new Error(d),!0)}function lf(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(Ws(s))return{key:a,result:s}}}function ZS(n){let e=typeof n=="string"?ga(n):n;return Vi({...e,hash:""})}function SD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function AD(n){var e,t;return new Ec(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function wD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&RD(t))}function RD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function CD(n){return yy(n.result)&&GS.has(n.result.status)}function wr(n){return n.type==="error"}function Ws(n){return(n&&n.type)==="redirect"}function w0(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function yy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function ID(n){return GS.has(n)}function DD(n){return yy(n)&&ID(n.status)&&n.headers.has("Location")}function xD(n){return sD.has(n.toUpperCase())}function Hn(n){return iD.has(n.toUpperCase())}function vy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function _f(n,e){let t=typeof e=="string"?ga(e).search:e.search;if(n[n.length-1].route.index&&vy(t||""))return n[n.length-1];let a=zS(n);return a[a.length-1]}function R0(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function ug(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function ND(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Uu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function OD(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ia(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function MD(n,e){try{let t=n.sessionStorage.getItem($S);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function PD(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem($S,JSON.stringify(t))}catch(a){en(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function C0(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var co=P.createContext(null);co.displayName="DataRouter";var bc=P.createContext(null);bc.displayName="DataRouterState";var eA=P.createContext(!1);function VD(){return P.useContext(eA)}var _y=P.createContext({isTransitioning:!1});_y.displayName="ViewTransition";var tA=P.createContext(new Map);tA.displayName="Fetchers";var kD=P.createContext(null);kD.displayName="Await";var xr=P.createContext(null);xr.displayName="Navigation";var bd=P.createContext(null);bd.displayName="Location";var Qr=P.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var Ey=P.createContext(null);Ey.displayName="RouteError";var nA="REACT_ROUTER_ERROR",LD="REDIRECT",UD="ROUTE_ERROR_RESPONSE";function jD(n){if(n.startsWith(`${nA}:${LD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zD(n){if(n.startsWith(`${nA}:${UD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ec(e.status,e.statusText,e.data)}catch{}}function BD(n,{relative:e}={}){at(Ml(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=P.useContext(xr),{hash:s,pathname:l,search:c}=Sc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:xi([t,l])),a.createHref({pathname:d,search:c,hash:s})}function Ml(){return P.useContext(bd)!=null}function Xr(){return at(Ml(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(bd).location}var rA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iA(n){P.useContext(xr).static||P.useLayoutEffect(n)}function ho(){let{isDataRoute:n}=P.useContext(Qr);return n?nx():FD()}function FD(){at(Ml(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(co),{basename:e,navigator:t}=P.useContext(xr),{matches:a}=P.useContext(Qr),{pathname:s}=Xr(),l=JSON.stringify(Ed(a)),c=P.useRef(!1);return iA(()=>{c.current=!0}),P.useCallback((m,g={})=>{if(en(c.current,rA),!c.current)return;if(typeof m=="number"){t.go(m);return}let v=Td(m,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:xi([e,v.pathname])),(g.replace?t.replace:t.push)(v,g.state,g)},[e,t,l,s,n])}var HD=P.createContext(null);function qD(n){let e=P.useContext(Qr).outlet;return P.useMemo(()=>e&&P.createElement(HD.Provider,{value:n},e),[e,n])}function Sd(){let{matches:n}=P.useContext(Qr),e=n[n.length-1];return e?e.params:{}}function Sc(n,{relative:e}={}){let{matches:t}=P.useContext(Qr),{pathname:a}=Xr(),s=JSON.stringify(Ed(t));return P.useMemo(()=>Td(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function GD(n,e,t,a,s){at(Ml(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=P.useContext(xr),{matches:c}=P.useContext(Qr),d=c[c.length-1],m=d?d.params:{},g=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let B=E&&E.path||"";sA(g,!E||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let b=Xr(),C;C=b;let L=C.pathname||"/",j=L;if(v!=="/"){let B=v.replace(/^\//,"").split("/");j="/"+L.replace(/^\//,"").split("/").slice(B.length).join("/")}let F=Za(n,{pathname:j});return en(E||F!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),en(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),XD(F&&F.map(B=>Object.assign({},B,{params:Object.assign({},m,B.params),pathname:xi([v,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?v:xi([v,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),c,t,a,s)}function $D(){let n=tx(),e=oc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:l},"ErrorBoundary")," or"," ",P.createElement("code",{style:l},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:s},t):null,c)}var KD=P.createElement($D,null),aA=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=zD(n.digest);t&&(n=t)}let e=n!==void 0?P.createElement(Qr.Provider,{value:this.props.routeContext},P.createElement(Ey.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?P.createElement(YD,{error:n},e):e}};aA.contextType=eA;var cg=new WeakMap;function YD({children:n,error:e}){let{basename:t}=P.useContext(xr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=jD(e.digest);if(a){let s=cg.get(e);if(s)throw s;let l=FS(a.location,t);if(BS&&!cg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw cg.set(e,c),c}return P.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function QD({routeContext:n,match:e,children:t}){let a=P.useContext(co);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(Qr.Provider,{value:n},t)}function XD(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let v=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);at(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,v+1))}let d=!1,m=-1;if(t)for(let v=0;v<l.length;v++){let E=l[v];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=v),E.route.id){let{loaderData:b,errors:C}=t,L=E.route.loader&&!b.hasOwnProperty(E.route.id)&&(!C||C[E.route.id]===void 0);if(E.route.lazy||L){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&a?(v,E)=>{var b,C;a(v,{location:t.location,params:((C=(b=t.matches)==null?void 0:b[0])==null?void 0:C.params)??{},unstable_pattern:Tc(t.matches),errorInfo:E})}:void 0;return l.reduceRight((v,E,b)=>{let C,L=!1,j=null,F=null;t&&(C=c&&E.route.id?c[E.route.id]:void 0,j=E.route.errorElement||KD,d&&(m<0&&b===0?(sA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,F=null):m===b&&(L=!0,F=E.route.hydrateFallbackElement||null)));let Q=e.concat(l.slice(0,b+1)),B=()=>{let q;return C?q=j:L?q=F:E.route.Component?q=P.createElement(E.route.Component,null):E.route.element?q=E.route.element:q=v,P.createElement(QD,{match:E,routeContext:{outlet:v,matches:Q,isDataRoute:t!=null},children:q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||b===0)?P.createElement(aA,{location:t.location,revalidation:t.revalidation,component:j,error:C,children:B(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:g}):B()},null)}function Ty(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WD(n){let e=P.useContext(co);return at(e,Ty(n)),e}function JD(n){let e=P.useContext(bc);return at(e,Ty(n)),e}function ZD(n){let e=P.useContext(Qr);return at(e,Ty(n)),e}function by(n){let e=ZD(n),t=e.matches[e.matches.length-1];return at(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ex(){return by("useRouteId")}function tx(){var a;let n=P.useContext(Ey),e=JD("useRouteError"),t=by("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function nx(){let{router:n}=WD("useNavigate"),e=by("useNavigate"),t=P.useRef(!1);return iA(()=>{t.current=!0}),P.useCallback(async(s,l={})=>{en(t.current,rA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var I0={};function sA(n,e,t){!e&&!I0[n]&&(I0[n]=!0,en(!1,t))}var D0={};function x0(n,e){!n&&!D0[e]&&(D0[e]=!0,console.warn(e))}var rx="useOptimistic",N0=QC[rx],ix=()=>{};function ax(n){return N0?N0(n):[n,ix]}function sx(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&en(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:P.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&en(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:P.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&en(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:P.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var ox=["HydrateFallback","hydrateFallbackElement"],lx=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function ux({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=VD()||a;let[l,c]=P.useState(n.state),[d,m]=ax(l),[g,v]=P.useState(),[E,b]=P.useState({isTransitioning:!1}),[C,L]=P.useState(),[j,F]=P.useState(),[Q,B]=P.useState(),q=P.useRef(new Map),Y=P.useCallback((A,{deletedFetchers:R,newErrors:x,flushSync:N,viewTransitionOpts:M})=>{x&&t&&Object.values(x).forEach(be=>{var ke;return t(be,{location:A.location,params:((ke=A.matches[0])==null?void 0:ke.params)??{},unstable_pattern:Tc(A.matches)})}),A.fetchers.forEach((be,ke)=>{be.data!==void 0&&q.current.set(ke,be.data)}),R.forEach(be=>q.current.delete(be)),x0(N===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(x0(M==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!O){e&&N?e(()=>c(A)):a===!1?c(A):P.startTransition(()=>{a===!0&&m(be=>O0(be,A)),c(A)});return}if(e&&N){e(()=>{j&&(C==null||C.resolve(),j.skipTransition()),b({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let be=n.window.document.startViewTransition(()=>{e(()=>c(A))});be.finished.finally(()=>{e(()=>{L(void 0),F(void 0),v(void 0),b({isTransitioning:!1})})}),e(()=>F(be));return}j?(C==null||C.resolve(),j.skipTransition(),B({state:A,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(v(A),b({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,j,C,a,m,t]);P.useLayoutEffect(()=>n.subscribe(Y),[n,Y]),P.useEffect(()=>{E.isTransitioning&&!E.flushSync&&L(new lx)},[E]),P.useEffect(()=>{if(C&&g&&n.window){let A=g,R=C.promise,x=n.window.document.startViewTransition(async()=>{a===!1?c(A):P.startTransition(()=>{a===!0&&m(N=>O0(N,A)),c(A)}),await R});x.finished.finally(()=>{L(void 0),F(void 0),v(void 0),b({isTransitioning:!1})}),F(x)}},[g,C,n.window,a,m]),P.useEffect(()=>{C&&g&&d.location.key===g.location.key&&C.resolve()},[C,j,d.location,g]),P.useEffect(()=>{!E.isTransitioning&&Q&&(v(Q.state),b({isTransitioning:!0,flushSync:!1,currentLocation:Q.currentLocation,nextLocation:Q.nextLocation}),B(void 0))},[E.isTransitioning,Q]);let G=P.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,R,x)=>n.navigate(A,{state:R,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(A,R,x)=>n.navigate(A,{replace:!0,state:R,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),ae=n.basename||"/",S=P.useMemo(()=>({router:n,navigator:G,static:!1,basename:ae,onError:t}),[n,G,ae,t]);return P.createElement(P.Fragment,null,P.createElement(co.Provider,{value:S},P.createElement(bc.Provider,{value:d},P.createElement(tA.Provider,{value:q.current},P.createElement(_y.Provider,{value:E},P.createElement(fx,{basename:ae,location:d.location,navigationType:d.historyAction,navigator:G,unstable_useTransitions:a},P.createElement(cx,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function O0(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var cx=P.memo(hx);function hx({routes:n,future:e,state:t,onError:a}){return GD(n,void 0,t,a,e)}function ss({to:n,replace:e,state:t,relative:a}){at(Ml(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=P.useContext(xr);en(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=P.useContext(Qr),{pathname:c}=Xr(),d=ho(),m=Td(n,Ed(l),c,a==="path"),g=JSON.stringify(m);return P.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function oA(n){return qD(n.context)}function fx({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){at(!Ml(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=P.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=ga(t));let{pathname:g="/",search:v="",hash:E="",state:b=null,key:C="default"}=t,L=P.useMemo(()=>{let j=Kr(g,d);return j==null?null:{location:{pathname:j,search:v,hash:E,state:b,key:C},navigationType:a}},[d,g,v,E,b,C,a]);return en(L!=null,`<Router basename="${d}"> is not able to match the URL "${g}${v}${E}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:P.createElement(xr.Provider,{value:m},P.createElement(bd.Provider,{children:e,value:L}))}var Ef="get",Tf="application/x-www-form-urlencoded";function Ad(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function dx(n){return Ad(n)&&n.tagName.toLowerCase()==="button"}function mx(n){return Ad(n)&&n.tagName.toLowerCase()==="form"}function px(n){return Ad(n)&&n.tagName.toLowerCase()==="input"}function gx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function yx(n,e){return n.button===0&&(!e||e==="_self")&&!gx(n)}function Pg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function vx(n,e){let t=Pg(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var uf=null;function _x(){if(uf===null)try{new FormData(document.createElement("form"),0),uf=!1}catch{uf=!0}return uf}var Ex=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hg(n){return n!=null&&!Ex.has(n)?(en(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tf}"`),null):n}function Tx(n,e){let t,a,s,l,c;if(mx(n)){let d=n.getAttribute("action");a=d?Kr(d,e):null,t=n.getAttribute("method")||Ef,s=hg(n.getAttribute("enctype"))||Tf,l=new FormData(n)}else if(dx(n)||px(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(a=m?Kr(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||Ef,s=hg(n.getAttribute("formenctype"))||hg(d.getAttribute("enctype"))||Tf,l=new FormData(d,n),!_x()){let{name:g,type:v,value:E}=n;if(v==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,E)}}else{if(Ad(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ef,a=null,s=Tf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function bx(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&Kr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function Sx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ax(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function wx(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await Sx(l,t);return c.links?c.links():[]}return[]}));return Dx(a.flat(1).filter(Ax).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function M0(n,e,t,a,s,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>{var v;return t[g].pathname!==m.pathname||((v=t[g].route.path)==null?void 0:v.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{var E;let v=a.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Rx(n,e,{includeHydrateFallback:t}={}){return Cx(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function Cx(n){return[...new Set(n)]}function Ix(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function Dx(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(Ix(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function lA(){let n=P.useContext(co);return Sy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function xx(){let n=P.useContext(bc);return Sy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ay=P.createContext(void 0);Ay.displayName="FrameworkContext";function uA(){let n=P.useContext(Ay);return Sy(n,"You must render this element inside a <HydratedRouter> element"),n}function Nx(n,e){let t=P.useContext(Ay),[a,s]=P.useState(!1),[l,c]=P.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:E}=e,b=P.useRef(null);P.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let j=Q=>{Q.forEach(B=>{c(B.isIntersecting)})},F=new IntersectionObserver(j,{threshold:.5});return b.current&&F.observe(b.current),()=>{F.disconnect()}}},[n]),P.useEffect(()=>{if(a){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[a]);let C=()=>{s(!0)},L=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:ju(d,C),onBlur:ju(m,L),onMouseEnter:ju(g,C),onMouseLeave:ju(v,L),onTouchStart:ju(E,C)}]:[!1,b,{}]}function ju(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Ox({page:n,...e}){let{router:t}=lA(),a=P.useMemo(()=>Za(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?P.createElement(Px,{page:n,matches:a,...e}):null}function Mx(n){let{manifest:e,routeModules:t}=uA(),[a,s]=P.useState([]);return P.useEffect(()=>{let l=!1;return wx(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function Px({page:n,matches:e,...t}){let a=Xr(),{future:s,manifest:l,routeModules:c}=uA(),{basename:d}=lA(),{loaderData:m,matches:g}=xx(),v=P.useMemo(()=>M0(n,e,g,l,a,"data"),[n,e,g,l,a]),E=P.useMemo(()=>M0(n,e,g,l,a,"assets"),[n,e,g,l,a]),b=P.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let j=new Set,F=!1;if(e.forEach(B=>{var Y;let q=l.routes[B.route.id];!q||!q.hasLoader||(!v.some(G=>G.route.id===B.route.id)&&B.route.id in m&&((Y=c[B.route.id])!=null&&Y.shouldRevalidate)||q.hasClientLoader?F=!0:j.add(B.route.id))}),j.size===0)return[];let Q=bx(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return F&&j.size>0&&Q.searchParams.set("_routes",e.filter(B=>j.has(B.route.id)).map(B=>B.route.id).join(",")),[Q.pathname+Q.search]},[d,s.unstable_trailingSlashAwareDataRequests,m,a,l,v,e,n,c]),C=P.useMemo(()=>Rx(E,l),[E,l]),L=Mx(E);return P.createElement(P.Fragment,null,b.map(j=>P.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...t})),C.map(j=>P.createElement("link",{key:j,rel:"modulepreload",href:j,...t})),L.map(({key:j,link:F})=>P.createElement("link",{key:j,nonce:t.nonce,...F,crossOrigin:F.crossOrigin??t.crossOrigin})))}function Vx(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kx&&(window.__reactRouterVersion="7.13.0")}catch{}function Lx(n,e){return cD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:RI({window:e==null?void 0:e.window}),hydrationData:Ux(),routes:n,mapRouteProperties:sx,hydrationRouteProperties:ox,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function Ux(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:jx(n.errors)}),n}function jx(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new Ec(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var cA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hA=P.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...C},L){let{basename:j,unstable_useTransitions:F}=P.useContext(xr),Q=typeof g=="string"&&cA.test(g),B=FS(g,j);g=B.to;let q=BD(g,{relative:s}),[Y,G,ae]=Nx(a,C),S=Hx(g,{replace:c,state:d,target:m,preventScrollReset:v,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:b,unstable_useTransitions:F});function A(x){e&&e(x),x.defaultPrevented||S(x)}let R=P.createElement("a",{...C,...ae,href:B.absoluteURL||q,onClick:B.isExternal||l?e:A,ref:Vx(L,G),target:m,"data-discover":!Q&&t==="render"?"true":void 0});return Y&&!Q?P.createElement(P.Fragment,null,R,P.createElement(Ox,{page:q})):R});hA.displayName="Link";var zx=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:m,...g},v){let E=Sc(c,{relative:g.relative}),b=Xr(),C=P.useContext(bc),{navigator:L,basename:j}=P.useContext(xr),F=C!=null&&Qx(E)&&d===!0,Q=L.encodeLocation?L.encodeLocation(E).pathname:E.pathname,B=b.pathname,q=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(B=B.toLowerCase(),q=q?q.toLowerCase():null,Q=Q.toLowerCase()),q&&j&&(q=Kr(q,j)||q);const Y=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let G=B===Q||!s&&B.startsWith(Q)&&B.charAt(Y)==="/",ae=q!=null&&(q===Q||!s&&q.startsWith(Q)&&q.charAt(Q.length)==="/"),S={isActive:G,isPending:ae,isTransitioning:F},A=G?e:void 0,R;typeof a=="function"?R=a(S):R=[a,G?"active":null,ae?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let x=typeof l=="function"?l(S):l;return P.createElement(hA,{...g,"aria-current":A,className:R,ref:v,style:x,to:c,viewTransition:d},typeof m=="function"?m(S):m)});zx.displayName="NavLink";var Bx=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=Ef,action:d,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b,...C},L)=>{let{unstable_useTransitions:j}=P.useContext(xr),F=Kx(),Q=Yx(d,{relative:g}),B=c.toLowerCase()==="get"?"get":"post",q=typeof d=="string"&&cA.test(d),Y=G=>{if(m&&m(G),G.defaultPrevented)return;G.preventDefault();let ae=G.nativeEvent.submitter,S=(ae==null?void 0:ae.getAttribute("formmethod"))||c,A=()=>F(ae||G.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:s,state:l,relative:g,preventScrollReset:v,viewTransition:E,unstable_defaultShouldRevalidate:b});j&&t!==!1?P.startTransition(()=>A()):A()};return P.createElement("form",{ref:L,method:B,action:Q,onSubmit:a?m:Y,...C,"data-discover":!q&&n==="render"?"true":void 0})});Bx.displayName="Form";function Fx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fA(n){let e=P.useContext(co);return at(e,Fx(n)),e}function Hx(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:m}={}){let g=ho(),v=Xr(),E=Sc(n,{relative:l});return P.useCallback(b=>{if(yx(b,e)){b.preventDefault();let C=t!==void 0?t:Vi(v)===Vi(E),L=()=>g(n,{replace:C,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});m?P.startTransition(()=>L()):L()}},[v,g,E,t,a,e,n,s,l,c,d,m])}function qx(n){en(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=P.useRef(Pg(n)),t=P.useRef(!1),a=Xr(),s=P.useMemo(()=>vx(a.search,t.current?null:e.current),[a.search]),l=ho(),c=P.useCallback((d,m)=>{const g=Pg(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,m)},[l,s]);return[s,c]}var Gx=0,$x=()=>`__${String(++Gx)}__`;function Kx(){let{router:n}=fA("useSubmit"),{basename:e}=P.useContext(xr),t=ex(),a=n.fetch,s=n.navigate;return P.useCallback(async(l,c={})=>{let{action:d,method:m,encType:g,formData:v,body:E}=Tx(l,e);if(c.navigate===!1){let b=c.fetcherKey||$x();await a(b,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||m,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:v,body:E,formMethod:c.method||m,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function Yx(n,{relative:e}={}){let{basename:t}=P.useContext(xr),a=P.useContext(Qr);at(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Sc(n||".",{relative:e})},c=Xr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(v=>v==="")){d.delete("index"),m.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xi([t,l.pathname])),Vi(l)}function Qx(n,{relative:e}={}){let t=P.useContext(_y);at(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=fA("useViewTransitionState"),s=Sc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Kr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=Kr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Hf(s.pathname,c)!=null||Hf(s.pathname,l)!=null}var Xx=OS();function Wx(n){return P.createElement(ux,{flushSync:Xx.flushSync,...n})}const Jx=P.createContext(void 0),fi=()=>EI(),pt=SI.withTypes(),Zx=({children:n})=>{const e=pt(t=>t.auth.loading);return w.jsx(Jx.Provider,{value:{isLoading:e},children:n})},eN=()=>{};var P0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},tN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],m=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},mA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,m=s+2<n.length,g=m?n[s+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let b=(d&15)<<2|g>>6,C=g&63;m||(C=64,c||(b=64)),a.push(t[v],t[E],t[b],t[C])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):tN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new nN;const b=l<<2|d>>4;if(a.push(b),g!==64){const C=d<<4&240|g>>2;if(a.push(C),E!==64){const L=g<<6&192|E;a.push(L)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class nN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rN=function(n){const e=dA(n);return mA.encodeByteArray(e,!0)},qf=function(n){return rN(n).replace(/\./g,"")},pA=function(n){try{return mA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=()=>iN().__FIREBASE_DEFAULTS__,sN=()=>{if(typeof process>"u"||typeof P0>"u")return;const n=P0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},oN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&pA(n[1]);return e&&JSON.parse(e)},wd=()=>{try{return eN()||aN()||sN()||oN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},gA=n=>{var e,t;return(t=(e=wd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},lN=n=>{const e=gA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},yA=()=>{var n;return(n=wd())==null?void 0:n.config},vA=n=>{var e;return(e=wd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _A(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qf(JSON.stringify(t)),qf(JSON.stringify(c)),""].join(".")}const Xu={};function hN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Xu))Xu[e]?n.emulator.push(e):n.prod.push(e);return n}function fN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let V0=!1;function EA(n,e){if(typeof window>"u"||typeof document>"u"||!Pl(window.location.host)||Xu[n]===e||Xu[n]||V0)return;Xu[n]=e;function t(b){return`__firebase__banner__${b}`}const a="__firebase__banner",l=hN().prod.length>0;function c(){const b=document.getElementById(a);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{V0=!0,c()},b}function v(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=fN(a),C=t("text"),L=document.getElementById(C)||document.createElement("span"),j=t("learnmore"),F=document.getElementById(j)||document.createElement("a"),Q=t("preprendIcon"),B=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const q=b.element;d(q),v(F,j);const Y=g();m(B,Q),q.append(B,L,F,Y),document.body.appendChild(q)}l?(L.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($n())}function mN(){var e;const n=(e=wd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vN(){const n=$n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function _N(){return!mN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EN(){try{return typeof indexedDB=="object"}catch{return!1}}function TN(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="FirebaseError";class ya extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=bN,Object.setPrototypeOf(this,ya.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ac.prototype.create)}}class Ac{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?SN(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new ya(s,d,a)}}function SN(n,e){return n.replace(AN,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const AN=/\{\$([^}]+)}/g;function wN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function io(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(k0(l)&&k0(c)){if(!io(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function k0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function RN(n,e){const t=new CN(n,e);return t.subscribe.bind(t)}class CN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");IN(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=fg),s.error===void 0&&(s.error=fg),s.complete===void 0&&(s.complete=fg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function fg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n){return n&&n._delegate?n._delegate:n}class ao{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new uN;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NN(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:xN(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xN(n){return n===Xs?void 0:n}function NN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new DN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ft||(ft={}));const MN={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},PN=ft.INFO,VN={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},kN=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=VN[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class wy{constructor(e){this.name=e,this._logLevel=PN,this._logHandler=kN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const LN=(n,e)=>e.some(t=>n instanceof t);let L0,U0;function UN(){return L0||(L0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jN(){return U0||(U0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TA=new WeakMap,Vg=new WeakMap,bA=new WeakMap,dg=new WeakMap,Ry=new WeakMap;function zN(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(os(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&TA.set(t,n)}).catch(()=>{}),Ry.set(e,n),e}function BN(n){if(Vg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Vg.set(n,e)}let kg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||bA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function FN(n){kg=n(kg)}function HN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(mg(this),e,...t);return bA.set(a,e.sort?e.sort():[e]),os(a)}:jN().includes(n)?function(...e){return n.apply(mg(this),e),os(TA.get(this))}:function(...e){return os(n.apply(mg(this),e))}}function qN(n){return typeof n=="function"?HN(n):(n instanceof IDBTransaction&&BN(n),LN(n,UN())?new Proxy(n,kg):n)}function os(n){if(n instanceof IDBRequest)return zN(n);if(dg.has(n))return dg.get(n);const e=qN(n);return e!==n&&(dg.set(n,e),Ry.set(e,n)),e}const mg=n=>Ry.get(n);function GN(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=os(c);return a&&c.addEventListener("upgradeneeded",m=>{a(os(c.result),m.oldVersion,m.newVersion,os(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const $N=["get","getKey","getAll","getAllKeys","count"],KN=["put","add","delete","clear"],pg=new Map;function j0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(pg.get(e))return pg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=KN.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||$N.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,s?"readwrite":"readonly");let g=m.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&m.done]))[0]};return pg.set(e,l),l}FN(n=>({...n,get:(e,t,a)=>j0(e,t)||n.get(e,t,a),has:(e,t)=>!!j0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(QN(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function QN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lg="@firebase/app",z0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new wy("@firebase/app"),XN="@firebase/app-compat",WN="@firebase/analytics-compat",JN="@firebase/analytics",ZN="@firebase/app-check-compat",e2="@firebase/app-check",t2="@firebase/auth",n2="@firebase/auth-compat",r2="@firebase/database",i2="@firebase/data-connect",a2="@firebase/database-compat",s2="@firebase/functions",o2="@firebase/functions-compat",l2="@firebase/installations",u2="@firebase/installations-compat",c2="@firebase/messaging",h2="@firebase/messaging-compat",f2="@firebase/performance",d2="@firebase/performance-compat",m2="@firebase/remote-config",p2="@firebase/remote-config-compat",g2="@firebase/storage",y2="@firebase/storage-compat",v2="@firebase/firestore",_2="@firebase/ai",E2="@firebase/firestore-compat",T2="firebase",b2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="[DEFAULT]",S2={[Lg]:"fire-core",[XN]:"fire-core-compat",[JN]:"fire-analytics",[WN]:"fire-analytics-compat",[e2]:"fire-app-check",[ZN]:"fire-app-check-compat",[t2]:"fire-auth",[n2]:"fire-auth-compat",[r2]:"fire-rtdb",[i2]:"fire-data-connect",[a2]:"fire-rtdb-compat",[s2]:"fire-fn",[o2]:"fire-fn-compat",[l2]:"fire-iid",[u2]:"fire-iid-compat",[c2]:"fire-fcm",[h2]:"fire-fcm-compat",[f2]:"fire-perf",[d2]:"fire-perf-compat",[m2]:"fire-rc",[p2]:"fire-rc-compat",[g2]:"fire-gcs",[y2]:"fire-gcs-compat",[v2]:"fire-fst",[E2]:"fire-fst-compat",[_2]:"fire-vertex","fire-js":"fire-js",[T2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new Map,A2=new Map,jg=new Map;function B0(n,e){try{n.container.addComponent(e)}catch(t){ha.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Tl(n){const e=n.name;if(jg.has(e))return ha.debug(`There were multiple attempts to register component ${e}.`),!1;jg.set(e,n);for(const t of Gf.values())B0(t,n);for(const t of A2.values())B0(t,n);return!0}function Cy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ai(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new Ac("app","Firebase",w2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ao("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=b2;function SA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Ug,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw ls.create("bad-app-name",{appName:String(s)});if(t||(t=yA()),!t)throw ls.create("no-options");const l=Gf.get(s);if(l){if(io(t,l.options)&&io(a,l.config))return l;throw ls.create("duplicate-app",{appName:s})}const c=new ON(s);for(const m of jg.values())c.addComponent(m);const d=new R2(t,a,c);return Gf.set(s,d),d}function AA(n=Ug){const e=Gf.get(n);if(!e&&n===Ug&&yA())return SA();if(!e)throw ls.create("no-app",{appName:n});return e}function us(n,e,t){let a=S2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ha.warn(c.join(" "));return}Tl(new ao(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2="firebase-heartbeat-database",I2=1,lc="firebase-heartbeat-store";let gg=null;function wA(){return gg||(gg=GN(C2,I2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(lc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ls.create("idb-open",{originalErrorMessage:n.message})})),gg}async function D2(n){try{const t=(await wA()).transaction(lc),a=await t.objectStore(lc).get(RA(n));return await t.done,a}catch(e){if(e instanceof ya)ha.warn(e.message);else{const t=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ha.warn(t.message)}}}async function F0(n,e){try{const a=(await wA()).transaction(lc,"readwrite");await a.objectStore(lc).put(e,RA(n)),await a.done}catch(t){if(t instanceof ya)ha.warn(t.message);else{const a=ls.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ha.warn(a.message)}}}function RA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=1024,N2=30;class O2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new P2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=H0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>N2){const c=V2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){ha.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=H0(),{heartbeatsToSend:a,unsentEntries:s}=M2(this._heartbeatsCache.heartbeats),l=qf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ha.warn(t),""}}}function H0(){return new Date().toISOString().substring(0,10)}function M2(n,e=x2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),q0(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),q0(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class P2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EN()?TN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await D2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return F0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function q0(n){return qf(JSON.stringify({version:2,heartbeats:n})).length}function V2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2(n){Tl(new ao("platform-logger",e=>new YN(e),"PRIVATE")),Tl(new ao("heartbeat",e=>new O2(e),"PRIVATE")),us(Lg,z0,n),us(Lg,z0,"esm2020"),us("fire-js","")}k2("");var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,CA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,A){function R(){}R.prototype=A.prototype,S.F=A.prototype,S.prototype=new R,S.prototype.constructor=S,S.D=function(x,N,M){for(var O=Array(arguments.length-2),be=2;be<arguments.length;be++)O[be-2]=arguments[be];return A.prototype[N].apply(x,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,A,R){R||(R=0);const x=Array(16);if(typeof A=="string")for(var N=0;N<16;++N)x[N]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(N=0;N<16;++N)x[N]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=S.g[0],R=S.g[1],N=S.g[2];let M=S.g[3],O;O=A+(M^R&(N^M))+x[0]+3614090360&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(N^A&(R^N))+x[1]+3905402710&4294967295,M=A+(O<<12&4294967295|O>>>20),O=N+(R^M&(A^R))+x[2]+606105819&4294967295,N=M+(O<<17&4294967295|O>>>15),O=R+(A^N&(M^A))+x[3]+3250441966&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(M^R&(N^M))+x[4]+4118548399&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(N^A&(R^N))+x[5]+1200080426&4294967295,M=A+(O<<12&4294967295|O>>>20),O=N+(R^M&(A^R))+x[6]+2821735955&4294967295,N=M+(O<<17&4294967295|O>>>15),O=R+(A^N&(M^A))+x[7]+4249261313&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(M^R&(N^M))+x[8]+1770035416&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(N^A&(R^N))+x[9]+2336552879&4294967295,M=A+(O<<12&4294967295|O>>>20),O=N+(R^M&(A^R))+x[10]+4294925233&4294967295,N=M+(O<<17&4294967295|O>>>15),O=R+(A^N&(M^A))+x[11]+2304563134&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(M^R&(N^M))+x[12]+1804603682&4294967295,A=R+(O<<7&4294967295|O>>>25),O=M+(N^A&(R^N))+x[13]+4254626195&4294967295,M=A+(O<<12&4294967295|O>>>20),O=N+(R^M&(A^R))+x[14]+2792965006&4294967295,N=M+(O<<17&4294967295|O>>>15),O=R+(A^N&(M^A))+x[15]+1236535329&4294967295,R=N+(O<<22&4294967295|O>>>10),O=A+(N^M&(R^N))+x[1]+4129170786&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^N&(A^R))+x[6]+3225465664&4294967295,M=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(M^A))+x[11]+643717713&4294967295,N=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(N^M))+x[0]+3921069994&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(N^M&(R^N))+x[5]+3593408605&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^N&(A^R))+x[10]+38016083&4294967295,M=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(M^A))+x[15]+3634488961&4294967295,N=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(N^M))+x[4]+3889429448&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(N^M&(R^N))+x[9]+568446438&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^N&(A^R))+x[14]+3275163606&4294967295,M=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(M^A))+x[3]+4107603335&4294967295,N=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(N^M))+x[8]+1163531501&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(N^M&(R^N))+x[13]+2850285829&4294967295,A=R+(O<<5&4294967295|O>>>27),O=M+(R^N&(A^R))+x[2]+4243563512&4294967295,M=A+(O<<9&4294967295|O>>>23),O=N+(A^R&(M^A))+x[7]+1735328473&4294967295,N=M+(O<<14&4294967295|O>>>18),O=R+(M^A&(N^M))+x[12]+2368359562&4294967295,R=N+(O<<20&4294967295|O>>>12),O=A+(R^N^M)+x[5]+4294588738&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^N)+x[8]+2272392833&4294967295,M=A+(O<<11&4294967295|O>>>21),O=N+(M^A^R)+x[11]+1839030562&4294967295,N=M+(O<<16&4294967295|O>>>16),O=R+(N^M^A)+x[14]+4259657740&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(R^N^M)+x[1]+2763975236&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^N)+x[4]+1272893353&4294967295,M=A+(O<<11&4294967295|O>>>21),O=N+(M^A^R)+x[7]+4139469664&4294967295,N=M+(O<<16&4294967295|O>>>16),O=R+(N^M^A)+x[10]+3200236656&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(R^N^M)+x[13]+681279174&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^N)+x[0]+3936430074&4294967295,M=A+(O<<11&4294967295|O>>>21),O=N+(M^A^R)+x[3]+3572445317&4294967295,N=M+(O<<16&4294967295|O>>>16),O=R+(N^M^A)+x[6]+76029189&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(R^N^M)+x[9]+3654602809&4294967295,A=R+(O<<4&4294967295|O>>>28),O=M+(A^R^N)+x[12]+3873151461&4294967295,M=A+(O<<11&4294967295|O>>>21),O=N+(M^A^R)+x[15]+530742520&4294967295,N=M+(O<<16&4294967295|O>>>16),O=R+(N^M^A)+x[2]+3299628645&4294967295,R=N+(O<<23&4294967295|O>>>9),O=A+(N^(R|~M))+x[0]+4096336452&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~N))+x[7]+1126891415&4294967295,M=A+(O<<10&4294967295|O>>>22),O=N+(A^(M|~R))+x[14]+2878612391&4294967295,N=M+(O<<15&4294967295|O>>>17),O=R+(M^(N|~A))+x[5]+4237533241&4294967295,R=N+(O<<21&4294967295|O>>>11),O=A+(N^(R|~M))+x[12]+1700485571&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~N))+x[3]+2399980690&4294967295,M=A+(O<<10&4294967295|O>>>22),O=N+(A^(M|~R))+x[10]+4293915773&4294967295,N=M+(O<<15&4294967295|O>>>17),O=R+(M^(N|~A))+x[1]+2240044497&4294967295,R=N+(O<<21&4294967295|O>>>11),O=A+(N^(R|~M))+x[8]+1873313359&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~N))+x[15]+4264355552&4294967295,M=A+(O<<10&4294967295|O>>>22),O=N+(A^(M|~R))+x[6]+2734768916&4294967295,N=M+(O<<15&4294967295|O>>>17),O=R+(M^(N|~A))+x[13]+1309151649&4294967295,R=N+(O<<21&4294967295|O>>>11),O=A+(N^(R|~M))+x[4]+4149444226&4294967295,A=R+(O<<6&4294967295|O>>>26),O=M+(R^(A|~N))+x[11]+3174756917&4294967295,M=A+(O<<10&4294967295|O>>>22),O=N+(A^(M|~R))+x[2]+718787259&4294967295,N=M+(O<<15&4294967295|O>>>17),O=R+(M^(N|~A))+x[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+M&4294967295}a.prototype.v=function(S,A){A===void 0&&(A=S.length);const R=A-this.blockSize,x=this.C;let N=this.h,M=0;for(;M<A;){if(N==0)for(;M<=R;)s(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<A;)if(x[N++]=S.charCodeAt(M++),N==this.blockSize){s(this,x),N=0;break}}else for(;M<A;)if(x[N++]=S[M++],N==this.blockSize){s(this,x),N=0;break}}this.h=N,this.o+=A},a.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;A=this.o*8;for(var R=S.length-8;R<S.length;++R)S[R]=A&255,A/=256;for(this.v(S),S=Array(16),A=0,R=0;R<4;++R)for(let x=0;x<32;x+=8)S[A++]=this.g[R]>>>x&255;return S};function l(S,A){var R=d;return Object.prototype.hasOwnProperty.call(R,S)?R[S]:R[S]=A(S)}function c(S,A){this.h=A;const R=[];let x=!0;for(let N=S.length-1;N>=0;N--){const M=S[N]|0;x&&M==A||(R[N]=M,x=!1)}this.g=R}var d={};function m(S){return-128<=S&&S<128?l(S,function(A){return new c([A|0],A<0?-1:0)}):new c([S|0],S<0?-1:0)}function g(S){if(isNaN(S)||!isFinite(S))return E;if(S<0)return F(g(-S));const A=[];let R=1;for(let x=0;S>=R;x++)A[x]=S/R|0,R*=4294967296;return new c(A,0)}function v(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return F(v(S.substring(1),A));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(A,8));let x=E;for(let M=0;M<S.length;M+=8){var N=Math.min(8,S.length-M);const O=parseInt(S.substring(M,M+N),A);N<8?(N=g(Math.pow(A,N)),x=x.j(N).add(g(O))):(x=x.j(R),x=x.add(g(O)))}return x}var E=m(0),b=m(1),C=m(16777216);n=c.prototype,n.m=function(){if(j(this))return-F(this).m();let S=0,A=1;for(let R=0;R<this.g.length;R++){const x=this.i(R);S+=(x>=0?x:4294967296+x)*A,A*=4294967296}return S},n.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(j(this))return"-"+F(this).toString(S);const A=g(Math.pow(S,6));var R=this;let x="";for(;;){const N=Y(R,A).g;R=Q(R,N.j(A));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(S);if(R=N,L(R))return M+x;for(;M.length<6;)M="0"+M;x=M+x}},n.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(let A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function j(S){return S.h==-1}n.l=function(S){return S=Q(this,S),j(S)?-1:L(S)?0:1};function F(S){const A=S.g.length,R=[];for(let x=0;x<A;x++)R[x]=~S.g[x];return new c(R,~S.h).add(b)}n.abs=function(){return j(this)?F(this):this},n.add=function(S){const A=Math.max(this.g.length,S.g.length),R=[];let x=0;for(let N=0;N<=A;N++){let M=x+(this.i(N)&65535)+(S.i(N)&65535),O=(M>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);x=O>>>16,M&=65535,O&=65535,R[N]=O<<16|M}return new c(R,R[R.length-1]&-2147483648?-1:0)};function Q(S,A){return S.add(F(A))}n.j=function(S){if(L(this)||L(S))return E;if(j(this))return j(S)?F(this).j(F(S)):F(F(this).j(S));if(j(S))return F(this.j(F(S)));if(this.l(C)<0&&S.l(C)<0)return g(this.m()*S.m());const A=this.g.length+S.g.length,R=[];for(var x=0;x<2*A;x++)R[x]=0;for(x=0;x<this.g.length;x++)for(let N=0;N<S.g.length;N++){const M=this.i(x)>>>16,O=this.i(x)&65535,be=S.i(N)>>>16,ke=S.i(N)&65535;R[2*x+2*N]+=O*ke,B(R,2*x+2*N),R[2*x+2*N+1]+=M*ke,B(R,2*x+2*N+1),R[2*x+2*N+1]+=O*be,B(R,2*x+2*N+1),R[2*x+2*N+2]+=M*be,B(R,2*x+2*N+2)}for(S=0;S<A;S++)R[S]=R[2*S+1]<<16|R[2*S];for(S=A;S<2*A;S++)R[S]=0;return new c(R,0)};function B(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function q(S,A){this.g=S,this.h=A}function Y(S,A){if(L(A))throw Error("division by zero");if(L(S))return new q(E,E);if(j(S))return A=Y(F(S),A),new q(F(A.g),F(A.h));if(j(A))return A=Y(S,F(A)),new q(F(A.g),A.h);if(S.g.length>30){if(j(S)||j(A))throw Error("slowDivide_ only works with positive integers.");for(var R=b,x=A;x.l(S)<=0;)R=G(R),x=G(x);var N=ae(R,1),M=ae(x,1);for(x=ae(x,2),R=ae(R,2);!L(x);){var O=M.add(x);O.l(S)<=0&&(N=N.add(R),M=O),x=ae(x,1),R=ae(R,1)}return A=Q(S,N.j(A)),new q(N,A)}for(N=E;S.l(A)>=0;){for(R=Math.max(1,Math.floor(S.m()/A.m())),x=Math.ceil(Math.log(R)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),M=g(R),O=M.j(A);j(O)||O.l(S)>0;)R-=x,M=g(R),O=M.j(A);L(M)&&(M=b),N=N.add(M),S=Q(S,O)}return new q(N,S)}n.B=function(S){return Y(this,S).h},n.and=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let x=0;x<A;x++)R[x]=this.i(x)&S.i(x);return new c(R,this.h&S.h)},n.or=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let x=0;x<A;x++)R[x]=this.i(x)|S.i(x);return new c(R,this.h|S.h)},n.xor=function(S){const A=Math.max(this.g.length,S.g.length),R=[];for(let x=0;x<A;x++)R[x]=this.i(x)^S.i(x);return new c(R,this.h^S.h)};function G(S){const A=S.g.length+1,R=[];for(let x=0;x<A;x++)R[x]=S.i(x)<<1|S.i(x-1)>>>31;return new c(R,S.h)}function ae(S,A){const R=A>>5;A%=32;const x=S.g.length-R,N=[];for(let M=0;M<x;M++)N[M]=A>0?S.i(M+R)>>>A|S.i(M+R+1)<<32-A:S.i(M+R);return new c(N,S.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,CA=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=v,cs=c}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IA,Hu,DA,bf,zg,xA,NA,OA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof cf=="object"&&cf];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var W=h[D];if(!(W in T))break e;T=T[W]}h=h[h.length-1],D=T[h],y=y(D),y!=D&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=m,g.apply(null,arguments)}function v(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,W,re){for(var Te=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)Te[Ze-2]=arguments[Ze];return y.prototype[W].apply(D,Te)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function C(h){const y=h.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=h[D];return T}return[]}function L(h,y){for(let D=1;D<arguments.length;D++){const W=arguments[D];var T=typeof W;if(T=T!="object"?T:W?Array.isArray(W)?"array":T:"null",T=="array"||T=="object"&&typeof W.length=="number"){T=h.length||0;const re=W.length||0;h.length=T+re;for(let Te=0;Te<re;Te++)h[T+Te]=W[Te]}else h.push(W)}}class j{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){c.setTimeout(()=>{throw h},0)}function Q(){var h=S;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class B{constructor(){this.h=this.g=null}add(y,T){const D=q.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var q=new j(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let G,ae=!1,S=new B,A=()=>{const h=Promise.resolve(void 0);G=()=>{h.then(R)}};function R(){for(var h;h=Q();){try{h.h.call(h.g)}catch(T){F(T)}var y=q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}ae=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function be(h,y){N.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(be,N),be.prototype.init=function(h,y){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&be.Z.h.call(this)},be.prototype.h=function(){be.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ke="closure_listenable_"+(Math.random()*1e6|0),X=0;function de(h,y,T,D,W){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=W,this.key=++X,this.da=this.fa=!1}function ye(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Le(h,y,T){for(const D in h)y.call(T,h[D],D,h)}function Pe(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function U(h){const y={};for(const T in h)y[T]=h[T];return y}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let T,D;for(let W=1;W<arguments.length;W++){D=arguments[W];for(T in D)h[T]=D[T];for(let re=0;re<$.length;re++)T=$[re],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,D,W){const re=h.toString();h=this.g[re],h||(h=this.g[re]=[],this.h++);const Te=Ee(h,y,D,W);return Te>-1?(y=h[Te],T||(y.fa=!1)):(y=new de(y,this.src,re,!!D,W),y.fa=T,h.push(y)),y};function pe(h,y){const T=y.type;if(T in h.g){var D=h.g[T],W=Array.prototype.indexOf.call(D,y,void 0),re;(re=W>=0)&&Array.prototype.splice.call(D,W,1),re&&(ye(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ee(h,y,T,D){for(let W=0;W<h.length;++W){const re=h[W];if(!re.da&&re.listener==y&&re.capture==!!T&&re.ha==D)return W}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),Ke={};function ot(h,y,T,D,W){if(Array.isArray(y)){for(let re=0;re<y.length;re++)ot(h,y[re],T,D,W);return null}return T=we(T),h&&h[ke]?h.J(y,T,d(D)?!!D.capture:!1,W):$t(h,y,T,!1,D,W)}function $t(h,y,T,D,W,re){if(!y)throw Error("Invalid event type");const Te=d(W)?!!W.capture:!!W;let Ze=ge(h);if(Ze||(h[Ue]=Ze=new ce(h)),T=Ze.add(y,T,D,Te,re),T.proxy)return T;if(D=Rn(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)M||(W=Te),W===void 0&&(W=!1),h.addEventListener(y.toString(),D,W);else if(h.attachEvent)h.attachEvent(Kt(y.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Rn(){function h(T){return y.call(h.src,h.listener,T)}const y=ne;return h}function Et(h,y,T,D,W){if(Array.isArray(y))for(var re=0;re<y.length;re++)Et(h,y[re],T,D,W);else D=d(D)?!!D.capture:!!D,T=we(T),h&&h[ke]?(h=h.i,re=String(y).toString(),re in h.g&&(y=h.g[re],T=Ee(y,T,D,W),T>-1&&(ye(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[re],h.h--)))):h&&(h=ge(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Ee(y,T,D,W)),(T=h>-1?y[h]:null)&&En(T))}function En(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[ke])pe(y.i,h);else{var T=h.type,D=h.proxy;y.removeEventListener?y.removeEventListener(T,D,h.capture):y.detachEvent?y.detachEvent(Kt(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=ge(y))?(pe(T,h),T.h==0&&(T.src=null,y[Ue]=null)):ye(h)}}}function Kt(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function ne(h,y){if(h.da)h=!0;else{y=new be(y,this);const T=h.listener,D=h.ha||h.src;h.fa&&En(h),h=T.call(D,y)}return h}function ge(h){return h=h[Ue],h instanceof ce?h:null}var Ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function we(h){return typeof h=="function"?h:(h[Ve]||(h[Ve]=function(y){return h.handleEvent(y)}),h[Ve])}function Ae(){x.call(this),this.i=new ce(this),this.M=this,this.G=null}E(Ae,x),Ae.prototype[ke]=!0,Ae.prototype.removeEventListener=function(h,y,T,D){Et(this,h,y,T,D)};function Fe(h,y){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=y.type||y,typeof y=="string")y=new N(y,h);else if(y instanceof N)y.target=y.target||h;else{var W=y;y=new N(D,h),oe(y,W)}W=!0;let re,Te;if(T)for(Te=T.length-1;Te>=0;Te--)re=y.g=T[Te],W=Vt(re,D,!0,y)&&W;if(re=y.g=h,W=Vt(re,D,!0,y)&&W,W=Vt(re,D,!1,y)&&W,T)for(Te=0;Te<T.length;Te++)re=y.g=T[Te],W=Vt(re,D,!1,y)&&W}Ae.prototype.N=function(){if(Ae.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let D=0;D<T.length;D++)ye(T[D]);delete h.g[y],h.h--}}this.G=null},Ae.prototype.J=function(h,y,T,D){return this.i.add(String(h),y,!1,T,D)},Ae.prototype.K=function(h,y,T,D){return this.i.add(String(h),y,!0,T,D)};function Vt(h,y,T,D){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let W=!0;for(let re=0;re<y.length;++re){const Te=y[re];if(Te&&!Te.da&&Te.capture==T){const Ze=Te.listener,on=Te.ha||Te.src;Te.fa&&pe(h.i,Te),W=Ze.call(on,D)!==!1&&W}}return W&&!D.defaultPrevented}function wt(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function je(h){h.g=wt(()=>{h.g=null,h.i&&(h.i=!1,je(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ye extends x{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function It(h){x.call(this),this.h=h,this.g={}}E(It,x);var tr=[];function Kn(h){Le(h.g,function(y,T){this.g.hasOwnProperty(T)&&En(y)},h),h.g={}}It.prototype.N=function(){It.Z.N.call(this),Kn(this)},It.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nn=c.JSON.stringify,Tn=c.JSON.parse,bs=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function vo(){}function va(){}var dr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function kt(){N.call(this,"d")}E(kt,N);function Yn(){N.call(this,"c")}E(Yn,N);var Yt={},Ss=null;function _a(){return Ss=Ss||new Ae}Yt.Ia="serverreachability";function As(h){N.call(this,Yt.Ia,h)}E(As,N);function Qn(h){const y=_a();Fe(y,new As(y))}Yt.STAT_EVENT="statevent";function di(h,y){N.call(this,Yt.STAT_EVENT,h),this.stat=y}E(di,N);function Qt(h){const y=_a();Fe(y,new di(y,h))}Yt.Ja="timingevent";function Or(h,y){N.call(this,Yt.Ja,h),this.size=y}E(Or,N);function mr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function _o(h,y,T,D,W,re){h.info(function(){if(h.g)if(re){var Te="",Ze=re.split("&");for(let bt=0;bt<Ze.length;bt++){var on=Ze[bt].split("=");if(on.length>1){const Xt=on[0];on=on[1];const Vr=Xt.split("_");Te=Vr.length>=2&&Vr[1]=="type"?Te+(Xt+"="+on+"&"):Te+(Xt+"=redacted&")}}}else Te=null;else Te=re;return"XMLHTTP REQ ("+D+") [attempt "+W+"]: "+y+`
`+T+`
`+Te})}function Ui(h,y,T,D,W,re,Te){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+W+"]: "+y+`
`+T+`
`+re+" "+Te})}function Xn(h,y,T,D){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Hl(h,T)+(D?" "+D:"")})}function mi(h,y){h.info(function(){return"TIMEOUT: "+y})}pr.prototype.info=function(){};function Hl(h,y){if(!h.g)return y;if(!y)return null;try{const re=JSON.parse(y);if(re){for(h=0;h<re.length;h++)if(Array.isArray(re[h])){var T=re[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var W=D[0];if(W!="noop"&&W!="stop"&&W!="close")for(let Te=1;Te<D.length;Te++)D[Te]=""}}}}return nn(re)}catch{return y}}var ji={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},V={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},H;function ee(){}E(ee,vo),ee.prototype.g=function(){return new XMLHttpRequest},H=new ee;function me(h){return encodeURIComponent(String(h))}function ve(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Ce(h,y,T,D){this.j=h,this.i=y,this.l=T,this.S=D||1,this.V=new It(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var _e={},Se={};function De(h,y,T){h.M=1,h.A=ws(xt(y)),h.u=T,h.R=!0,qe(h,null)}function qe(h,y){h.F=Date.now(),Dt(h),h.B=xt(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),To(T.i,"t",D),h.C=0,T=h.j.L,h.h=new xe,h.g=Zc(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Ye(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,D=h.ba;var W="readystatechange";Array.isArray(W)||(W&&(tr[0]=W.toString()),W=tr);for(let re=0;re<W.length;re++){const Te=ot(T,W[re],D||y.handleEvent,!1,y.h||y);if(!Te)break;y.g[Te.key]=Te}y=h.J?U(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Qn(),_o(h.i,h.v,h.B,h.l,h.S,h.u)}Ce.prototype.ba=function(h){h=h.target;const y=this.O;y&&Zr(h)==3?y.j():this.Y(h)},Ce.prototype.Y=function(h){try{if(h==this.g)e:{const Ze=Zr(this.g),on=this.g.ya(),bt=this.g.ca();if(!(Ze<3)&&(Ze!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||Ze!=4||on==7||(on==8||bt<=0?Qn(3):Qn(2)),Ut(this);var y=this.g.ca();this.X=y;var T=Me(this);if(this.o=y==200,Ui(this.i,this.v,this.B,this.l,this.S,Ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,W=this.g;if((D=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(D)){var re=D;break t}}re=null}if(h=re)Xn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cn(this,h);else{this.o=!1,this.m=3,Qt(12),jt(this),tt(this);break e}}if(this.R){h=!0;let Xt;for(;!this.K&&this.C<T.length;)if(Xt=it(this,T),Xt==Se){Ze==4&&(this.m=4,Qt(14),h=!1),Xn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==_e){this.m=4,Qt(15),Xn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Xn(this.i,this.l,Xt,null),Cn(this,Xt);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ze!=4||T.length!=0||this.h.h||(this.m=1,Qt(16),h=!1),this.o=this.o&&h,!h)Xn(this.i,this.l,T,"[Invalid Chunked Response]"),jt(this),tt(this);else if(T.length>0&&!this.W){this.W=!0;var Te=this.j;Te.g==this&&Te.aa&&!Te.P&&(Te.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Jl(Te),Te.P=!0,Qt(11))}}else Xn(this.i,this.l,T,null),Cn(this,T);Ze==4&&jt(this),this.o&&!this.K&&(Ze==4?Qc(this.j,this):(this.o=!1,Dt(this)))}else Bi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),jt(this),tt(this)}}}catch{}finally{}};function Me(h){if(!Qe(h))return h.g.la();const y=xn(h.g);if(y==="")return"";let T="";const D=y.length,W=Zr(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return jt(h),tt(h),"";h.h.i=new c.TextDecoder}for(let re=0;re<D;re++)h.h.h=!0,T+=h.h.i.decode(y[re],{stream:!(W&&re==D-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function it(h,y){var T=h.C,D=y.indexOf(`
`,T);return D==-1?Se:(T=Number(y.substring(T,D)),isNaN(T)?_e:(D+=1,D+T>y.length?Se:(y=y.slice(D,D+T),h.C=D+T,y)))}Ce.prototype.cancel=function(){this.K=!0,jt(this)};function Dt(h){h.T=Date.now()+h.H,Ft(h,h.H)}function Ft(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=mr(g(h.aa,h),y)}function Ut(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ce.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(mi(this.i,this.B),this.M!=2&&(Qn(),Qt(17)),jt(this),this.m=2,tt(this)):Ft(this,this.T-h)};function tt(h){h.j.I==0||h.K||Qc(h.j,h)}function jt(h){Ut(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Kn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function Cn(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||zn(T.h,h))){if(!h.L&&zn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var W=D;if(W[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Ro(T),Ca(T);else break e;Os(T),Qt(18)}}else T.xa=W[1],0<T.xa-T.K&&W[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=mr(g(T.Va,T),6e3));rr(T.h)<=1&&T.ta&&(T.ta=void 0)}else bi(T,11)}else if((h.L||T.g==h)&&Ro(T),!O(y))for(W=T.Ba.g.parse(y),y=0;y<W.length;y++){let bt=W[y];const Xt=bt[0];if(!(Xt<=T.K))if(T.K=Xt,bt=bt[1],T.I==2)if(bt[0]=="c"){T.M=bt[1],T.ba=bt[2];const Vr=bt[3];Vr!=null&&(T.ka=Vr,T.j.info("VER="+T.ka));const Si=bt[4];Si!=null&&(T.za=Si,T.j.info("SVER="+T.za));const ei=bt[5];ei!=null&&typeof ei=="number"&&ei>0&&(D=1.5*ei,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ti=h.g;if(ti){const Ms=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var re=D.h;re.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(re.j=re.l,re.g=new Set,re.h&&(gr(re,re.h),re.h=null))}if(D.G){const Co=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(D.wa=Co,Tt(D.J,D.G,Co))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var Te=h;if(D.na=Jc(D,D.L?D.ba:null,D.W),Te.L){pi(D.h,Te);var Ze=Te,on=D.O;on&&(Ze.H=on),Ze.D&&(Ut(Ze),Dt(Ze)),D.g=Te}else Kc(D);T.i.length>0&&Ti(T)}else bt[0]!="stop"&&bt[0]!="close"||bi(T,7);else T.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?bi(T,7):Xl(T):bt[0]!="noop"&&T.l&&T.l.qa(bt),T.A=0)}}Qn(4)}catch{}}var zt=class{constructor(h,y){this.g=h,this.map=y}};function nr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function rr(h){return h.h?1:h.g?h.g.size:0}function zn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function gr(h,y){h.g?h.g.add(y):h.h=y}function pi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}nr.prototype.cancel=function(){if(this.i=gi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return C(h.i)}var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jt(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let W,re=null;D>=0?(W=h[T].substring(0,D),re=h[T].substring(D+1)):W=h[T],y(W,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function fn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof fn?(this.l=h.l,nt(this,h.j),this.o=h.o,this.g=h.g,yr(this,h.u),this.h=h.h,Ea(this,Gc(h.i)),this.m=h.m):h&&(y=String(h).match(st))?(this.l=!1,nt(this,y[1]||"",!0),this.o=yi(y[2]||""),this.g=yi(y[3]||"",!0),yr(this,y[4]),this.h=yi(y[5]||"",!0),Ea(this,y[6]||"",!0),this.m=yi(y[7]||"")):(this.l=!1,this.i=new ba(null,this.l))}fn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Rs(y,Eo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Rs(y,Eo,!0),"@"),h.push(me(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Rs(T,T.charAt(0)=="/"?ql:Fc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Rs(T,Hc)),h.join("")},fn.prototype.resolve=function(h){const y=xt(this);let T=!!h.j;T?nt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var D=h.h;if(T)yr(y,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var W=y.h.lastIndexOf("/");W!=-1&&(D=y.h.slice(0,W+1)+D)}if(W=D,W==".."||W==".")D="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){D=W.lastIndexOf("/",0)==0,W=W.split("/");const re=[];for(let Te=0;Te<W.length;){const Ze=W[Te++];Ze=="."?D&&Te==W.length&&re.push(""):Ze==".."?((re.length>1||re.length==1&&re[0]!="")&&re.pop(),D&&Te==W.length&&re.push("")):(re.push(Ze),D=!0)}D=re.join("/")}else D=W}return T?y.h=D:T=h.i.toString()!=="",T?Ea(y,Gc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function xt(h){return new fn(h)}function nt(h,y,T){h.j=T?yi(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function yr(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ea(h,y,T){y instanceof ba?(h.i=y,bo(h.i,h.l)):(T||(y=Rs(y,Ta)),h.i=new ba(y,h.l))}function Tt(h,y,T){h.i.set(y,T)}function ws(h){return Tt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function yi(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rs(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,ir),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ir(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Eo=/[#\/\?@]/g,Fc=/[#\?:]/g,ql=/[#\?]/g,Ta=/[#\?@]/g,Hc=/#/g;function ba(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function ar(h){h.g||(h.g=new Map,h.h=0,h.i&&Jt(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=ba.prototype,n.add=function(h,y){ar(this),this.i=null,h=Sa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function qc(h,y){ar(h),y=Sa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Gl(h,y){return ar(h),y=Sa(h,y),h.g.has(y)}n.forEach=function(h,y){ar(this),this.g.forEach(function(T,D){T.forEach(function(W){h.call(y,W,D,this)},this)},this)};function $l(h,y){ar(h);let T=[];if(typeof y=="string")Gl(h,y)&&(T=T.concat(h.g.get(Sa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return ar(this),this.i=null,h=Sa(this,h),Gl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=$l(this,h),h.length>0?String(h[0]):y):y};function To(h,y,T){qc(h,y),T.length>0&&(h.i=null,h.g.set(Sa(h,y),C(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const W=me(T);T=$l(this,T);for(let re=0;re<T.length;re++){let Te=W;T[re]!==""&&(Te+="="+me(T[re])),h.push(Te)}}return this.i=h.join("&")};function Gc(h){const y=new ba;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Sa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function bo(h,y){y&&!h.j&&(ar(h),h.i=null,h.g.forEach(function(T,D){const W=D.toLowerCase();D!=W&&(qc(this,D),To(this,W,T))},h)),h.j=y}function Wr(h,y){const T=new pr;if(c.Image){const D=new Image;D.onload=v(Mr,T,"TestLoadImage: loaded",!0,y,D),D.onerror=v(Mr,T,"TestLoadImage: error",!1,y,D),D.onabort=v(Mr,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=v(Mr,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else y(!1)}function Kl(h,y){const T=new pr,D=new AbortController,W=setTimeout(()=>{D.abort(),Mr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:D.signal}).then(re=>{clearTimeout(W),re.ok?Mr(T,"TestPingServer: ok",!0,y):Mr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(W),Mr(T,"TestPingServer: error",!1,y)})}function Mr(h,y,T,D,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),D(T)}catch{}}function Aa(){this.g=new bs}function vi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(vi,vo),vi.prototype.g=function(){return new Cs(this.i,this.h)};function Cs(h,y){Ae.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Cs,Ae),n=Cs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Jr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wa(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Jr(this)),this.g&&(this.readyState=3,Jr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;So(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function So(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?wa(this):Jr(this),this.readyState==3&&So(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,wa(this))},n.Na=function(h){this.g&&(this.response=h,wa(this))},n.ga=function(){this.g&&wa(this)};function wa(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Jr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Jr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pr(h){let y="";return Le(h,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function Is(h,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Pr(T),typeof h=="string"?T!=null&&me(T):Tt(h,y,T))}function Nt(h){Ae.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Nt,Ae);var _i=/^https?$/i,Yl=["POST","PUT"];n=Nt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():H.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(re){Ds(this,re);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var W in D)T.set(W,D[W]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const re of D.keys())T.set(re,D.get(re));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(re=>re.toLowerCase()=="content-type"),W=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Yl,y,void 0)>=0)||D||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,Te]of T)this.g.setRequestHeader(re,Te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(re){Ds(this,re)}};function Ds(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ql(h),zi(h)}function Ql(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Fe(this,"complete"),Fe(this,"abort"),zi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),Nt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xs(this):this.Xa())},n.Xa=function(){xs(this)};function xs(h){if(h.h&&typeof l<"u"){if(h.v&&Zr(h)==4)setTimeout(h.Ca.bind(h),0);else if(Fe(h,"readystatechange"),Zr(h)==4){h.h=!1;try{const re=h.ca();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=re===0){let Te=String(h.D).match(st)[1]||null;!Te&&c.self&&c.self.location&&(Te=c.self.location.protocol.slice(0,-1)),D=!_i.test(Te?Te.toLowerCase():"")}T=D}if(T)Fe(h,"complete"),Fe(h,"success");else{h.o=6;try{var W=Zr(h)>2?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.ca()+"]",Ql(h)}}finally{zi(h)}}}}function zi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Fe(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zr(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Zr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Tn(y)}};function xn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(h){const y={};h=(h.g&&Zr(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(O(h[D]))continue;var T=ve(h[D]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const re=y[W]||[];y[W]=re,re.push(T)}Pe(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ra(h){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,h),this.Za=Ei("retryDelaySeedMs",1e4,h),this.Ta=Ei("forwardChannelMaxRetries",2,h),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new nr(h&&h.concurrentRequestLimit),this.Ba=new Aa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ra.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,D){Qt(0),this.W=h,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Jc(this,null,this.W),Ti(this)};function Xl(h){if(Ao(h),h.I==3){var y=h.V++,T=xt(h.J);if(Tt(T,"SID",h.M),Tt(T,"RID",y),Tt(T,"TYPE","terminate"),Ns(h,T),y=new Ce(h,h.j,y),y.M=2,y.A=ws(xt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Zc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Dt(y)}Wc(h)}function Ca(h){h.g&&(Jl(h),h.g.cancel(),h.g=null)}function Ao(h){Ca(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ro(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Ti(h){if(!jn(h.h)&&!h.m){h.m=!0;var y=h.Ea;G||A(),ae||(G(),ae=!0),S.add(y,h),h.D=0}}function wo(h,y){return rr(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=mr(g(h.Ea,h,y),Xc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const W=new Ce(this,this.j,h);let re=this.o;if(this.U&&(re?(re=U(re),oe(re,this.U)):re=this.U),this.u!==null||this.R||(W.J=re,re=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=$c(this,W,y),T=xt(this.J),Tt(T,"RID",h),Tt(T,"CVER",22),this.G&&Tt(T,"X-HTTP-Session-Id",this.G),Ns(this,T),re&&(this.R?y="headers="+me(Pr(re))+"&"+y:this.u&&Is(T,this.u,re)),gr(this.h,W),this.Ra&&Tt(T,"TYPE","init"),this.S?(Tt(T,"$req",y),Tt(T,"SID","null"),W.U=!0,De(W,T,null)):De(W,T,y),this.I=2}}else this.I==3&&(h?Wl(this,h):this.i.length==0||jn(this.h)||Wl(this))};function Wl(h,y){var T;y?T=y.l:T=h.V++;const D=xt(h.J);Tt(D,"SID",h.M),Tt(D,"RID",T),Tt(D,"AID",h.K),Ns(h,D),h.u&&h.o&&Is(D,h.u,h.o),T=new Ce(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=$c(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),gr(h.h,T),De(T,D,y)}function Ns(h,y){h.H&&Le(h.H,function(T,D){Tt(y,D,T)}),h.l&&Le({},function(T,D){Tt(y,D,T)})}function $c(h,y,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var W=h.i;let Ze=-1;for(;;){const on=["count="+T];Ze==-1?T>0?(Ze=W[0].g,on.push("ofs="+Ze)):Ze=0:on.push("ofs="+Ze);let bt=!0;for(let Xt=0;Xt<T;Xt++){var re=W[Xt].g;const Vr=W[Xt].map;if(re-=Ze,re<0)Ze=Math.max(0,W[Xt].g-100),bt=!1;else try{re="req"+re+"_"||"";try{var Te=Vr instanceof Map?Vr:Object.entries(Vr);for(const[Si,ei]of Te){let ti=ei;d(ei)&&(ti=nn(ei)),on.push(re+Si+"="+encodeURIComponent(ti))}}catch(Si){throw on.push(re+"type="+encodeURIComponent("_badmap")),Si}}catch{D&&D(Vr)}}if(bt){Te=on.join("&");break e}}Te=void 0}return h=h.i.splice(0,T),y.G=h,Te}function Kc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;G||A(),ae||(G(),ae=!0),S.add(y,h),h.A=0}}function Os(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=mr(g(h.Da,h),Xc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=mr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Ca(this),Yc(this))};function Jl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Yc(h){h.g=new Ce(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);Tt(y,"RID","rpc"),Tt(y,"SID",h.M),Tt(y,"AID",h.K),Tt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Tt(y,"TO",h.ia),Tt(y,"TYPE","xmlhttp"),Ns(h,y),h.u&&h.o&&Is(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=ws(xt(y)),T.u=null,T.R=!0,qe(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Ca(this),Os(this),Qt(19))};function Ro(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Qc(h,y){var T=null;if(h.g==y){Ro(h),Jl(h),h.g=null;var D=2}else if(zn(h.h,y))T=y.G,pi(h.h,y),D=1;else return;if(h.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var W=h.D;D=_a(),Fe(D,new Or(D,T)),Ti(h)}else Kc(h);else if(W=y.m,W==3||W==0&&y.X>0||!(D==1&&wo(h,y)||D==2&&Os(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),W){case 1:bi(h,5);break;case 4:bi(h,10);break;case 3:bi(h,6);break;default:bi(h,2)}}}function Xc(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function bi(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),D=h.Ua;const W=!D;D=new fn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||nt(D,"https"),ws(D),W?Wr(D.toString(),T):Kl(D.toString(),T)}else Qt(2);h.I=0,h.l&&h.l.pa(y),Wc(h),Ao(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Wc(h){if(h.I=0,h.ja=[],h.l){const y=gi(h.h);(y.length!=0||h.i.length!=0)&&(L(h.ja,y),L(h.ja,h.i),h.h.i.length=0,C(h.i),h.i.length=0),h.l.oa()}}function Jc(h,y,T){var D=T instanceof fn?xt(T):new fn(T);if(D.g!="")y&&(D.g=y+"."+D.g),yr(D,D.u);else{var W=c.location;D=W.protocol,y=y?y+"."+W.hostname:W.hostname,W=+W.port;const re=new fn(null);D&&nt(re,D),y&&(re.g=y),W&&yr(re,W),T&&(re.h=T),D=re}return T=h.G,y=h.wa,T&&y&&Tt(D,T,y),Tt(D,"VER",h.ka),Ns(h,D),D}function Zc(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Nt(new vi({ab:T})):new Nt(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eh(){}n=eh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ia(){}Ia.prototype.g=function(h,y){return new Wn(h,y)};function Wn(h,y){Ae.call(this),this.g=new Ra(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Fi(this)}E(Wn,Ae),Wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wn.prototype.close=function(){Xl(this.g)},Wn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=nn(h),h=T);y.i.push(new zt(y.Ya++,h)),y.I==3&&Ti(y)},Wn.prototype.N=function(){this.g.l=null,delete this.j,Xl(this.g),delete this.g,Wn.Z.N.call(this)};function th(h){kt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(th,kt);function nh(){Yn.call(this),this.status=1}E(nh,Yn);function Fi(h){this.g=h}E(Fi,eh),Fi.prototype.ra=function(){Fe(this.g,"a")},Fi.prototype.qa=function(h){Fe(this.g,new th(h))},Fi.prototype.pa=function(h){Fe(this.g,new nh)},Fi.prototype.oa=function(){Fe(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Wn.prototype.send=Wn.prototype.o,Wn.prototype.open=Wn.prototype.m,Wn.prototype.close=Wn.prototype.close,OA=function(){return new Ia},NA=function(){return _a()},xA=Yt,zg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,bf=ji,V.COMPLETE="complete",DA=V,va.EventType=dr,dr.OPEN="a",dr.CLOSE="b",dr.ERROR="c",dr.MESSAGE="d",Ae.prototype.listen=Ae.prototype.J,Hu=va,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,IA=Nt}).apply(typeof cf<"u"?cf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qn.UNAUTHENTICATED=new qn(null),qn.GOOGLE_CREDENTIALS=new qn("google-credentials-uid"),qn.FIRST_PARTY=new qn("first-party-uid"),qn.MOCK_USER=new qn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.8.0";function L2(n){kl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so=new wy("@firebase/firestore");function al(){return so.logLevel}function Ie(n,...e){if(so.logLevel<=ft.DEBUG){const t=e.map(Iy);so.debug(`Firestore (${kl}): ${n}`,...t)}}function fa(n,...e){if(so.logLevel<=ft.ERROR){const t=e.map(Iy);so.error(`Firestore (${kl}): ${n}`,...t)}}function bl(n,...e){if(so.logLevel<=ft.WARN){const t=e.map(Iy);so.warn(`Firestore (${kl}): ${n}`,...t)}}function Iy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,MA(n,a,t)}function MA(n,e,t){let a=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw fa(a),new Error(a)}function At(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||MA(e,s,a)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends ya{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(qn.UNAUTHENTICATED)))}shutdown(){}}class j2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class z2{constructor(e){this.t=e,this.currentUser=qn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){At(this.o===void 0,42304);let a=this.i;const s=m=>this.i!==a?(a=this.i,t(m)):Promise.resolve();let l=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ua,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await s(this.currentUser)}))},d=m=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ua)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(At(typeof a.accessToken=="string",31837,{l:a}),new PA(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new qn(e)}}class B2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=qn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class F2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new B2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(qn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ai(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){At(this.o===void 0,3512);const a=l=>{l.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(At(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=q2(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function dt(n,e){return n<e?-1:n>e?1:0}function Bg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return yg(s)===yg(l)?dt(s,l):yg(s)?1:-1}return dt(n.length,e.length)}const G2=55296,$2=57343;function yg(n){const e=n.charCodeAt(0);return e>=G2&&e<=$2}function Sl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="__name__";class Ii{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ge(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Ii.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ii?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=Ii.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return dt(e.length,t.length)}static compareSegments(e,t){const a=Ii.isNumericId(e),s=Ii.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?Ii.extractNumericId(e).compare(Ii.extractNumericId(t)):Bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class Bt extends Ii{construct(e,t,a){return new Bt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Bt(t)}static emptyPath(){return new Bt([])}}const K2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ln extends Ii{construct(e,t,a){return new Ln(e,t,a)}static isValidIdentifier(e){return K2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===K0}static keyField(){return new Ln([K0])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[s+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ln(t)}static emptyPath(){return new Ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Bt.fromString(e))}static fromName(e){return new Be(Bt.fromString(e).popFirst(5))}static empty(){return new Be(Bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Bt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Bt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Y2(n,e,t,a){if(e===!0&&a===!0)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Y0(n){if(!Be.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q0(n){if(Be.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Rd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ge(12329,{type:typeof n})}function Ir(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Rd(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n,e){const t={typeString:n};return e&&(t.value=e),t}function Rc(n,e){if(!kA(n))throw new Re(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Re(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=-62135596800,W0=1e6;class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*W0);return new Gt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<X0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W0}_compareTo(e){return this.seconds===e.seconds?dt(this.nanoseconds,e.nanoseconds):dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,Gt._jsonSchema))return new Gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-X0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gt._jsonSchemaVersion="firestore/timestamp/1.0",Gt._jsonSchema={type:_n("string",Gt._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new Gt(0,0))}static max(){return new Xe(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=-1;function Q2(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(a===1e9?new Gt(t+1,0):new Gt(t,a));return new ds(s,Be.empty(),e)}function X2(n){return new ds(n.readTime,n.key,uc)}class ds{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ds(Xe.min(),Be.empty(),uc)}static max(){return new ds(Xe.max(),Be.empty(),uc)}}function W2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(n.documentKey,e.documentKey),t!==0?t:dt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Z2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==J2)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):fe.reject(t)}static resolve(e){return new fe(((t,a)=>{t(e)}))}static reject(e){return new fe(((t,a)=>{a(e)}))}static waitFor(e){return new fe(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(m=>a(m)))})),c=!0,l===s&&t()}))}static or(e){let t=fe.resolve(!1);for(const a of e)t=t.next((s=>s?fe.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new fe(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((v=>{c[g]=v,++d,d===l&&a(c)}),(v=>s(v)))}}))}static doWhile(e,t){return new fe(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function eO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=-1;function Id(n){return n==null}function $f(n){return n===0&&1/n==-1/0}function tO(n){return typeof n=="number"&&Number.isInteger(n)&&!$f(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="";function nO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=J0(e)),e=rO(n.get(t),e);return J0(e)}function rO(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case LA:t+="";break;default:t+=l}}return t}function J0(n){return n+LA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function UA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t){this.comparator=e,this.root=t||kn.EMPTY}insert(e,t){return new tn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new tn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hf(this.root,e,this.comparator,!1)}getReverseIterator(){return new hf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hf(this.root,e,this.comparator,!0)}}class hf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??kn.RED,this.left=s??kn.EMPTY,this.right=l??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new kn(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return kn.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new kn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.comparator=e,this.data=new tn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eb(this.data.getIterator())}getIteratorFrom(e){return new eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.fields=e,e.sort(Ln.comparator)}static empty(){return new Rr([])}unionWith(e){let t=new Sn(Ln.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new jA("Invalid base64 string: "+l):l}})(e);return new Un(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new Un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Un.EMPTY_BYTE_STRING=new Un("");const iO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(At(!!n,39018),typeof n=="string"){let e=0;const t=iO.exec(n);if(At(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:cn(n.seconds),nanos:cn(n.nanos)}}function cn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?Un.fromBase64String(n):Un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA="server_timestamp",BA="__type__",FA="__previous_value__",HA="__local_write_time__";function Ny(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[BA])==null?void 0:a.stringValue)===zA}function Dd(n){const e=n.mapValue.fields[FA];return Ny(e)?Dd(e):e}function cc(n){const e=ms(n.mapValue.fields[HA].timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,t,a,s,l,c,d,m,g,v,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=E}}const Kf="(default)";class hc{constructor(e,t){this.projectId=e,this.database=t||Kf}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===Kf}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}function sO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="__type__",oO="__max__",ff={mapValue:{}},GA="__vector__",Yf="value";function gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ny(n)?4:uO(n)?9007199254740991:lO(n)?10:11:Ge(28295,{value:n})}function ki(n,e){if(n===e)return!0;const t=gs(n);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cc(n).isEqual(cc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ms(s.timestampValue),d=ms(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return ps(s.bytesValue).isEqual(ps(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return cn(s.geoPointValue.latitude)===cn(l.geoPointValue.latitude)&&cn(s.geoPointValue.longitude)===cn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return cn(s.integerValue)===cn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=cn(s.doubleValue),d=cn(l.doubleValue);return c===d?$f(c)===$f(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Sl(n.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(Z0(c)!==Z0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!ki(c[m],d[m])))return!1;return!0})(n,e);default:return Ge(52216,{left:n})}}function fc(n,e){return(n.values||[]).find((t=>ki(t,e)))!==void 0}function Al(n,e){if(n===e)return 0;const t=gs(n),a=gs(e);if(t!==a)return dt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return dt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=cn(l.integerValue||l.doubleValue),m=cn(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(n,e);case 3:return tb(n.timestampValue,e.timestampValue);case 4:return tb(cc(n),cc(e));case 5:return Bg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ps(l),m=ps(c);return d.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const v=dt(d[g],m[g]);if(v!==0)return v}return dt(d.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=dt(cn(l.latitude),cn(c.latitude));return d!==0?d:dt(cn(l.longitude),cn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nb(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var b,C,L,j;const d=l.fields||{},m=c.fields||{},g=(b=d[Yf])==null?void 0:b.arrayValue,v=(C=m[Yf])==null?void 0:C.arrayValue,E=dt(((L=g==null?void 0:g.values)==null?void 0:L.length)||0,((j=v==null?void 0:v.values)==null?void 0:j.length)||0);return E!==0?E:nb(g,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ff.mapValue&&c===ff.mapValue)return 0;if(l===ff.mapValue)return 1;if(c===ff.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},v=Object.keys(g);m.sort(),v.sort();for(let E=0;E<m.length&&E<v.length;++E){const b=Bg(m[E],v[E]);if(b!==0)return b;const C=Al(d[m[E]],g[v[E]]);if(C!==0)return C}return dt(m.length,v.length)})(n.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function tb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return dt(n,e);const t=ms(n),a=ms(e),s=dt(t.seconds,a.seconds);return s!==0?s:dt(t.nanos,a.nanos)}function nb(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=Al(t[s],a[s]);if(l)return l}return dt(t.length,a.length)}function wl(n){return Fg(n)}function Fg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ms(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Fg(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Fg(t.fields[c])}`;return s+"}"})(n.mapValue):Ge(61005,{value:n})}function Sf(n){switch(gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Dd(n);return e?16+Sf(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+Sf(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return Es(a.fields,((l,c)=>{s+=l.length+Sf(c)})),s})(n.mapValue);default:throw Ge(13486,{value:n})}}function rb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hg(n){return!!n&&"integerValue"in n}function Oy(n){return!!n&&"arrayValue"in n}function ib(n){return!!n&&"nullValue"in n}function ab(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Af(n){return!!n&&"mapValue"in n}function lO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[qA])==null?void 0:a.stringValue)===GA}function Wu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Es(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Wu(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wu(n.arrayValue.values[t]);return e}return{...n}}function uO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===oO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Af(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wu(t)}setAll(e){let t=Ln.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=Wu(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());Af(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];Af(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){Es(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new fr(Wu(this.value))}}function $A(n){const e=[];return Es(n.fields,((t,a)=>{const s=new Ln([t]);if(Af(a)){const l=$A(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Gn(e,0,Xe.min(),Xe.min(),Xe.min(),fr.empty(),0)}static newFoundDocument(e,t,a,s){return new Gn(e,1,t,Xe.min(),a,s,0)}static newNoDocument(e,t){return new Gn(e,2,t,Xe.min(),Xe.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,Xe.min(),Xe.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t){this.position=e,this.inclusive=t}}function sb(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=Be.comparator(Be.fromName(c.referenceValue),t.key):a=Al(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function ob(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t="asc"){this.field=e,this.dir=t}}function cO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{}class vn extends KA{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new fO(e,t,a):t==="array-contains"?new pO(e,a):t==="in"?new gO(e,a):t==="not-in"?new yO(e,a):t==="array-contains-any"?new vO(e,a):new vn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new dO(e,a):new mO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Al(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(Al(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends KA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ci(e,t)}matches(e){return YA(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function YA(n){return n.op==="and"}function QA(n){return hO(n)&&YA(n)}function hO(n){for(const e of n.filters)if(e instanceof ci)return!1;return!0}function qg(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(QA(n))return n.filters.map((e=>qg(e))).join(",");{const e=n.filters.map((t=>qg(t))).join(",");return`${n.op}(${e})`}}function XA(n,e){return n instanceof vn?(function(a,s){return s instanceof vn&&a.op===s.op&&a.field.isEqual(s.field)&&ki(a.value,s.value)})(n,e):n instanceof ci?(function(a,s){return s instanceof ci&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&XA(c,s.filters[d])),!0):!1})(n,e):void Ge(19439)}function WA(n){return n instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`})(n):n instanceof ci?(function(t){return t.op.toString()+" {"+t.getFilters().map(WA).join(" ,")+"}"})(n):"Filter"}class fO extends vn{constructor(e,t,a){super(e,t,a),this.key=Be.fromName(a.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class dO extends vn{constructor(e,t){super(e,"in",t),this.keys=JA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mO extends vn{constructor(e,t){super(e,"not-in",t),this.keys=JA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function JA(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>Be.fromName(a.referenceValue)))}class pO extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oy(t)&&fc(t.arrayValue,this.value)}}class gO extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fc(this.value.arrayValue,t)}}class yO extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fc(this.value.arrayValue,t)}}class vO extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>fc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function lb(n,e=null,t=[],a=[],s=null,l=null,c=null){return new _O(n,e,t,a,s,l,c)}function My(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>qg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Id(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>wl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>wl(a))).join(",")),e.Te=t}return e.Te}function Py(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!XA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ob(n.startAt,e.startAt)&&ob(n.endAt,e.endAt)}function Gg(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function EO(n,e,t,a,s,l,c,d){return new Cc(n,e,t,a,s,l,c,d)}function xd(n){return new Cc(n)}function ub(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TO(n){return Be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ZA(n){return n.collectionGroup!==null}function Ju(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Sn(Ln.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Xf(l,a))})),t.has(Ln.keyField().canonicalString())||e.Ie.push(new Xf(Ln.keyField(),a))}return e.Ie}function Ni(n){const e=Je(n);return e.Ee||(e.Ee=bO(e,Ju(n))),e.Ee}function bO(n,e){if(n.limitType==="F")return lb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new Xf(s.field,l)}));const t=n.endAt?new Qf(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new Qf(n.startAt.position,n.startAt.inclusive):null;return lb(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function $g(n,e){const t=n.filters.concat([e]);return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kg(n,e,t){return new Cc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Nd(n,e){return Py(Ni(n),Ni(e))&&n.limitType===e.limitType}function ew(n){return`${My(Ni(n))}|lt:${n.limitType}`}function sl(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>WA(s))).join(", ")}]`),Id(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>wl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>wl(s))).join(",")),`Target(${a})`})(Ni(n))}; limitType=${n.limitType})`}function Od(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Be.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of Ju(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,m){const g=sb(c,d,m);return c.inclusive?g<=0:g<0})(a.startAt,Ju(a),s)||a.endAt&&!(function(c,d,m){const g=sb(c,d,m);return c.inclusive?g>=0:g>0})(a.endAt,Ju(a),s))})(n,e)}function SO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function tw(n){return(e,t)=>{let a=!1;for(const s of Ju(n)){const l=AO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function AO(n,e,t){const a=n.field.isKeyField()?Be.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Al(m,g):Ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Ge(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return UA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new tn(Be.comparator);function da(){return wO}const nw=new tn(Be.comparator);function qu(...n){let e=nw;for(const t of n)e=e.insert(t.key,t);return e}function rw(n){let e=nw;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Js(){return Zu()}function iw(){return Zu()}function Zu(){return new fo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const RO=new tn(Be.comparator),CO=new Sn(Be.comparator);function mt(...n){let e=CO;for(const t of n)e=e.add(t);return e}const IO=new Sn(dt);function DO(){return IO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$f(e)?"-0":e}}function aw(n){return{integerValue:""+n}}function xO(n,e){return tO(e)?aw(e):Vy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(){this._=void 0}}function NO(n,e,t){return n instanceof Wf?(function(s,l){const c={fields:{[BA]:{stringValue:zA},[HA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Ny(l)&&(l=Dd(l)),l&&(c.fields[FA]=l),{mapValue:c}})(t,e):n instanceof dc?ow(n,e):n instanceof mc?lw(n,e):(function(s,l){const c=sw(s,l),d=cb(c)+cb(s.Ae);return Hg(c)&&Hg(s.Ae)?aw(d):Vy(s.serializer,d)})(n,e)}function OO(n,e,t){return n instanceof dc?ow(n,e):n instanceof mc?lw(n,e):t}function sw(n,e){return n instanceof Jf?(function(a){return Hg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class Wf extends Md{}class dc extends Md{constructor(e){super(),this.elements=e}}function ow(n,e){const t=uw(e);for(const a of n.elements)t.some((s=>ki(s,a)))||t.push(a);return{arrayValue:{values:t}}}class mc extends Md{constructor(e){super(),this.elements=e}}function lw(n,e){let t=uw(e);for(const a of n.elements)t=t.filter((s=>!ki(s,a)));return{arrayValue:{values:t}}}class Jf extends Md{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function cb(n){return cn(n.integerValue||n.doubleValue)}function uw(n){return Oy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function MO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof dc&&s instanceof dc||a instanceof mc&&s instanceof mc?Sl(a.elements,s.elements,ki):a instanceof Jf&&s instanceof Jf?ki(a.Ae,s.Ae):a instanceof Wf&&s instanceof Wf})(n.transform,e.transform)}class PO{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pd{}function cw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ky(n.key,Dr.none()):new Ic(n.key,n.data,Dr.none());{const t=n.data,a=fr.empty();let s=new Sn(Ln.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Ts(n.key,a,new Rr(s.toArray()),Dr.none())}}function VO(n,e,t){n instanceof Ic?(function(s,l,c){const d=s.value.clone(),m=fb(s.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ts?(function(s,l,c){if(!wf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=fb(s.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(hw(s)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function ec(n,e,t,a){return n instanceof Ic?(function(l,c,d,m){if(!wf(l.precondition,c))return d;const g=l.value.clone(),v=db(l.fieldTransforms,m,c);return g.setAll(v),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Ts?(function(l,c,d,m){if(!wf(l.precondition,c))return d;const g=db(l.fieldTransforms,m,c),v=c.data;return v.setAll(hw(l)),v.setAll(g),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return wf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function kO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=sw(a.transform,s||null);l!=null&&(t===null&&(t=fr.empty()),t.set(a.field,l))}return t||null}function hb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Sl(a,s,((l,c)=>MO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ic extends Pd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends Pd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function hw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function fb(n,e,t){const a=new Map;At(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,OO(c,d,t[s]))}return a}function db(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,NO(l,c,e))}return a}class ky extends Pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LO extends Pd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&VO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ec(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ec(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=iw();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const m=cw(c,d);m!==null&&a.set(s.key,m),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),mt())}isEqual(e){return this.batchId===e.batchId&&Sl(this.mutations,e.mutations,((t,a)=>hb(t,a)))&&Sl(this.baseMutations,e.baseMutations,((t,a)=>hb(t,a)))}}class Ly{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){At(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return RO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new Ly(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yn,yt;function BO(n){switch(n){case ue.OK:return Ge(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ge(15467,{code:n})}}function fw(n){if(n===void 0)return fa("GRPC error has no .code"),ue.UNKNOWN;switch(n){case yn.OK:return ue.OK;case yn.CANCELLED:return ue.CANCELLED;case yn.UNKNOWN:return ue.UNKNOWN;case yn.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case yn.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case yn.INTERNAL:return ue.INTERNAL;case yn.UNAVAILABLE:return ue.UNAVAILABLE;case yn.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case yn.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case yn.NOT_FOUND:return ue.NOT_FOUND;case yn.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case yn.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case yn.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case yn.ABORTED:return ue.ABORTED;case yn.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case yn.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case yn.DATA_LOSS:return ue.DATA_LOSS;default:return Ge(39323,{code:n})}}(yt=yn||(yn={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new cs([4294967295,4294967295],0);function mb(n){const e=FO().encode(n),t=new CA;return t.update(e),new Uint8Array(t.digest())}function pb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new cs([t,a],0),new cs([s,l],0)]}class Uy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Gu(`Invalid padding: ${t}`);if(a<0)throw new Gu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Gu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Gu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cs.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(cs.fromNumber(a)));return s.compare(HO)===1&&(s=new cs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=mb(e),[a,s]=pb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Uy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=mb(e),[a,s]=pb(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Gu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Vd(Xe.min(),s,new tn(dt),da(),mt())}}class Dc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Dc(a,t,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class dw{constructor(e,t){this.targetId=e,this.Ce=t}}class mw{constructor(e,t,a=Un.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class gb{constructor(){this.ve=0,this.Fe=yb(),this.Me=Un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=mt(),t=mt(),a=mt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Ge(38017,{changeType:l})}})),new Dc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=yb()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class qO{constructor(e){this.Ge=e,this.ze=new Map,this.je=da(),this.He=df(),this.Je=df(),this.Ze=new tn(dt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Gg(l))if(a===0){const c=new Be(l.path);this.et(t,c,Gn.newNoDocument(c,Xe.min()))}else At(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=ps(a).toUint8Array()}catch(m){if(m instanceof jA)return bl("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Uy(c,s,l)}catch(m){return bl(m instanceof Gu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Gg(d.target)){const m=new Be(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,Gn.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=mt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Vd(e,t,this.Ze,this.je,a);return this.je=da(),this.He=df(),this.Je=df(),this.Ze=new tn(dt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new gb,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Sn(dt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Sn(dt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function df(){return new tn(Be.comparator)}function yb(){return new tn(Be.comparator)}const GO={asc:"ASCENDING",desc:"DESCENDING"},$O={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KO={and:"AND",or:"OR"};class YO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yg(n,e){return n.useProto3Json||Id(e)?e:{value:e}}function Zf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QO(n,e){return Zf(n,e.toTimestamp())}function Oi(n){return At(!!n,49232),Xe.fromTimestamp((function(t){const a=ms(t);return new Gt(a.seconds,a.nanos)})(n))}function jy(n,e){return Qg(n,e).canonicalString()}function Qg(n,e){const t=(function(s){return new Bt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function gw(n){const e=Bt.fromString(n);return At(Tw(e),10190,{key:e.toString()}),e}function Xg(n,e){return jy(n.databaseId,e.path)}function vg(n,e){const t=gw(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Be(vw(t))}function yw(n,e){return jy(n.databaseId,e)}function XO(n){const e=gw(n);return e.length===4?Bt.emptyPath():vw(e)}function Wg(n){return new Bt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vw(n){return At(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function vb(n,e,t){return{name:Xg(n,e),fields:t.value.mapValue.fields}}function WO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,v){return g.useProto3Json?(At(v===void 0||typeof v=="string",58123),Un.fromBase64String(v||"")):(At(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Un.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const v=g.code===void 0?ue.UNKNOWN:fw(g.code);return new Re(v,g.message||"")})(c);t=new mw(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=vg(n,a.document.name),l=Oi(a.document.updateTime),c=a.document.createTime?Oi(a.document.createTime):Xe.min(),d=new fr({mapValue:{fields:a.document.fields}}),m=Gn.newFoundDocument(s,l,c,d),g=a.targetIds||[],v=a.removedTargetIds||[];t=new Rf(g,v,m.key,m)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=vg(n,a.document),l=a.readTime?Oi(a.readTime):Xe.min(),c=Gn.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Rf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=vg(n,a.document),l=a.removedTargetIds||[];t=new Rf([],l,s,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new zO(s,l),d=a.targetId;t=new dw(d,c)}}return t}function JO(n,e){let t;if(e instanceof Ic)t={update:vb(n,e.key,e.value)};else if(e instanceof ky)t={delete:Xg(n,e.key)};else if(e instanceof Ts)t={update:vb(n,e.key,e.data),updateMask:oM(e.fieldMask)};else{if(!(e instanceof LO))return Ge(16599,{dt:e.type});t={verify:Xg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof Wf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof dc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof mc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Jf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ge(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:QO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ge(27497)})(n,e.precondition)),t}function ZO(n,e){return n&&n.length>0?(At(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Oi(s.updateTime):Oi(l);return c.isEqual(Xe.min())&&(c=Oi(l)),new PO(c,s.transformResults||[])})(t,e)))):[]}function eM(n,e){return{documents:[yw(n,e.path)]}}function tM(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=yw(n,s);const l=(function(g){if(g.length!==0)return Ew(ci.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((v=>(function(b){return{field:ol(b.field),direction:iM(b.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Yg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function nM(n){let e=XO(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){At(a===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const b=_w(E);return b instanceof ci&&QA(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((b=>(function(L){return new Xf(ll(L.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let b;return b=typeof E=="object"?E.value:E,Id(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(E){const b=!!E.before,C=E.values||[];return new Qf(C,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const b=!E.before,C=E.values||[];return new Qf(C,b)})(t.endAt)),EO(e,s,c,l,d,"F",m,g)}function rM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _w(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=ll(t.unaryFilter.field);return vn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=ll(t.unaryFilter.field);return vn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ll(t.unaryFilter.field);return vn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ll(t.unaryFilter.field);return vn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vn.create(ll(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ci.create(t.compositeFilter.filters.map((a=>_w(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(n):Ge(30097,{filter:n})}function iM(n){return GO[n]}function aM(n){return $O[n]}function sM(n){return KO[n]}function ol(n){return{fieldPath:n.canonicalString()}}function ll(n){return Ln.fromServerFormat(n.fieldPath)}function Ew(n){return n instanceof vn?(function(t){if(t.op==="=="){if(ab(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NAN"}};if(ib(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ab(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NAN"}};if(ib(t.value))return{unaryFilter:{field:ol(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ol(t.field),op:aM(t.op),value:t.value}}})(n):n instanceof ci?(function(t){const a=t.getFilters().map((s=>Ew(s)));return a.length===1?a[0]:{compositeFilter:{op:sM(t.op),filters:a}}})(n):Ge(54877,{filter:n})}function oM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Tw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function bw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,a,s,l=Xe.min(),c=Xe.min(),d=Un.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.yt=e}}function uM(n){const e=nM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.Sn=new hM}addToCollectionParentIndex(e,t){return this.Sn.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}deleteAllFieldIndexes(e){return fe.resolve()}createTargetIndexes(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return fe.resolve(ds.min())}updateCollectionGroup(e,t,a){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class hM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new Sn(Bt.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new Sn(Bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sw=41943040;class hr{static withCacheSize(e){return new hr(e,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr.DEFAULT_COLLECTION_PERCENTILE=10,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hr.DEFAULT=new hr(Sw,hr.DEFAULT_COLLECTION_PERCENTILE,hr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hr.DISABLED=new hr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Rl(0)}static ar(){return new Rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="LruGarbageCollector",fM=1048576;function Tb([n,e],[t,a]){const s=dt(n,t);return s===0?dt(e,a):s}class dM{constructor(e){this.Pr=e,this.buffer=new Sn(Tb),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Tb(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(Eb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?Ie(Eb,"Ignoring IndexedDB error during garbage collection: ",t):await Ll(t)}await this.Ar(3e5)}))}}class pM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return fe.resolve(Cd.ce);const a=new dM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(_b)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_b):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,m,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,m=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),al()<=ft.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-v}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function gM(n,e){return new pM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.changes=new fo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?fe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&ec(a.mutation,s,Rr.empty(),Gt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,mt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=mt()){const s=Js();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=qu();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Js();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,mt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=da();const c=Zu(),d=(function(){return Zu()})();return t.forEach(((m,g)=>{const v=a.get(g.key);s.has(g.key)&&(v===void 0||v.mutation instanceof Ts)?l=l.insert(g.key,g):v!==void 0?(c.set(g.key,v.mutation.getFieldMask()),ec(v.mutation,g,v.mutation.getFieldMask(),Gt.now())):c.set(g.key,Rr.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,v)=>c.set(g,v))),t.forEach(((g,v)=>d.set(g,new vM(v,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=Zu();let s=new tn(((c,d)=>c-d)),l=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let v=a.get(m)||Rr.empty();v=d.applyToLocalView(g,v),a.set(m,v);const E=(s.get(d.batchId)||mt()).add(m);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,v=m.value,E=iw();v.forEach((b=>{if(!l.has(b)){const C=cw(t.get(b),a.get(b));C!==null&&E.set(b,C),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return fe.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return TO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ZA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):fe.resolve(Js());let d=uc,m=l;return c.next((g=>fe.forEach(g,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?fe.resolve():this.remoteDocumentCache.getEntry(e,v).next((b=>{m=m.insert(v,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,mt()))).next((v=>({batchId:d,changes:rw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next((a=>{let s=qu();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=qu();return this.indexManager.getCollectionParents(e,l).next((d=>fe.forEach(d,(m=>{const g=(function(E,b){return new Cc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((v=>{v.forEach(((E,b)=>{c=c.insert(E,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((m,g)=>{const v=g.getKey();c.get(v)===null&&(c=c.insert(v,Gn.newInvalidDocument(v)))}));let d=qu();return c.forEach(((m,g)=>{const v=l.get(m);v!==void 0&&ec(v.mutation,g,Rr.empty(),Gt.now()),Od(t,g)&&(d=d.insert(m,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return fe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Oi(s.createTime)}})(t)),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:uM(s.bundledQuery),readTime:Oi(s.readTime)}})(t)),fe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(){this.overlays=new tn(Be.comparator),this.Lr=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Js();return fe.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),fe.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),fe.resolve()}getOverlaysForCollection(e,t,a){const s=Js(),l=t.length+1,c=new Be(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>a&&s.set(m.getKey(),m)}return fe.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new tn(((g,v)=>g-v));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let v=l.get(g.largestBatchId);v===null&&(v=Js(),l=l.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const d=Js(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,v)=>d.set(g,v))),!(d.size()>=s)););return fe.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new jO(t,a));let l=this.Lr.get(t);l===void 0&&(l=mt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(e){return fe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,fe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(){this.kr=new Sn(Dn.Kr),this.qr=new Sn(Dn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Dn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Dn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new Be(new Bt([])),a=new Dn(t,e),s=new Dn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Be(new Bt([])),a=new Dn(t,e),s=new Dn(t,e+1);let l=mt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Dn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Dn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Be.comparator(e.key,t.key)||dt(e.Hr,t.Hr)}static Ur(e,t){return dt(e.Hr,t.Hr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Sn(Dn.Kr)}checkEmpty(e){return fe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new Dn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return fe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(this.mutationQueue.length===0?xy:this.Yn-1)}getAllMutationBatches(e){return fe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Dn(t,0),s=new Dn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),fe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new Sn(dt);return t.forEach((s=>{const l=new Dn(s,0),c=new Dn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),fe.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;Be.isDocumentKey(l)||(l=l.child(""));const c=new Dn(new Be(l),0);let d=new Sn(dt);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(m.Hr)),!0)}),c),fe.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){At(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return fe.forEach(t.mutations,(s=>{const l=new Dn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Dn(t,0),s=this.Jr.firstAfterOrEqual(a);return fe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,fe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.ti=e,this.docs=(function(){return new tn(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return fe.resolve(a?a.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let a=da();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():Gn.newInvalidDocument(s))})),fe.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=da();const c=t.path,d=new Be(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:v}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||W2(X2(v),a)<=0||(s.has(v.key)||Od(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return fe.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Ge(9500)}ni(e,t){return fe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new wM(this)}getSize(e){return fe.resolve(this.size)}}class wM extends yM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),fe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.persistence=e,this.ri=new fo((t=>My(t)),Py),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new zy,this.targetCount=0,this.oi=Rl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),fe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.lr(t),fe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),fe.waitFor(l).next((()=>s))}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return fe.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),fe.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),fe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return fe.resolve(a)}containsKey(e,t){return fe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t){this._i={},this.overlays={},this.ai=new Cd(0),this.ui=!1,this.ui=!0,this.ci=new bM,this.referenceDelegate=e(this),this.li=new RM(this),this.indexManager=new cM,this.remoteDocumentCache=(function(s){return new AM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new lM(t),this.Pi=new EM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new TM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new SM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Ie("MemoryPersistence","Starting transaction:",e);const s=new CM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return fe.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class CM extends Z2{constructor(e){super(),this.currentSequenceNumber=e}}class By{constructor(e){this.persistence=e,this.Ri=new zy,this.Ai=null}static Vi(e){return new By(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),fe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.di,(a=>{const s=Be.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ed{constructor(e,t){this.persistence=e,this.fi=new fo((a=>nO(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=gM(this,t)}static Vi(e,t){return new ed(e,t)}Ti(){}Ii(e){return fe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return fe.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?fe.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),fe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),fe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Sf(e.data.value)),t}wr(e,t,a){return fe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return fe.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=mt(),s=mt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Fy(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return _N()?8:eO($n())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new IM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(al()<=ft.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),fe.resolve()):(al()<=ft.DEBUG&&Ie("QueryEngine","Query:",sl(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(al()<=ft.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):fe.resolve())}gs(e,t){if(ub(t))return fe.resolve(null);let a=Ni(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Kg(t,null,"F"),a=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=mt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((m=>{const g=this.bs(t,d);return this.Ss(t,g,c,m.readTime)?this.gs(e,Kg(t,null,"F")):this.Ds(e,g,t,m)}))))})))))}ps(e,t,a,s){return ub(t)||s.isEqual(Xe.min())?fe.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?fe.resolve(null):(al()<=ft.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),sl(t)),this.Ds(e,c,t,Q2(s,uc)).next((d=>d)))}))}bs(e,t){let a=new Sn(tw(e));return t.forEach(((s,l)=>{Od(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return al()<=ft.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",sl(t)),this.fs.getDocumentsMatchingQuery(e,t,ds.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="LocalStore",xM=3e8;class NM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new tn(dt),this.Fs=new fo((l=>My(l)),Py),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _M(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function OM(n,e,t,a){return new NM(n,e,t,a)}async function ww(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let m=mt();for(const g of s){c.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}for(const g of l){d.push(g.batchId);for(const v of g.mutations)m=m.add(v.key)}return t.localDocuments.getDocuments(a,m).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function MM(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,m,g,v){const E=g.batch,b=E.keys();let C=fe.resolve();return b.forEach((L=>{C=C.next((()=>v.getEntry(m,L))).next((j=>{const F=g.docVersions.get(L);At(F!==null,48541),j.version.compareTo(F)<0&&(E.applyToRemoteDocument(j,g),j.isValidDocument()&&(j.setReadTime(g.commitVersion),v.addEntry(j)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(m,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let m=mt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function Rw(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function PM(n,e){const t=Je(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((v,E)=>{const b=s.get(E);if(!b)return;d.push(t.li.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,E))));let C=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(Un.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,a)),s=s.insert(E,C),(function(j,F,Q){return j.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=xM?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(b,C,v)&&d.push(t.li.updateTargetData(l,C))}));let m=da(),g=mt();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(VM(l,c,e.documentUpdates).next((v=>{m=v.Bs,g=v.Ls}))),!a.isEqual(Xe.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(v)}return fe.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.vs=s,l)))}function VM(n,e,t){let a=mt(),s=mt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=da();return t.forEach(((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),m.isNoDocument()&&m.version.isEqual(Xe.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):Ie(Hy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)})),{Bs:c,Ls:s}}))}function kM(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=xy),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function LM(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,fe.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new as(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function Jg(n,e,t){const a=Je(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!Ul(c))throw c;Ie(Hy,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function bb(n,e,t){const a=Je(n);let s=Xe.min(),l=mt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,g,v){const E=Je(m),b=E.Fs.get(v);return b!==void 0?fe.resolve(E.vs.get(b)):E.li.getTargetData(g,v)})(a,c,Ni(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Xe.min(),t?l:mt()))).next((d=>(UM(a,SO(e),d),{documents:d,ks:l})))))}function UM(n,e,t){let a=n.Ms.get(e)||Xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class Sb{constructor(){this.activeTargetIds=DO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jM{constructor(){this.vo=new Sb,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Sb,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="ConnectivityMonitor";class wb{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(Ab,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(Ab,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf=null;function Zg(){return mf===null?mf=(function(){return 268435456+Math.round(2147483648*Math.random())})():mf++,"0x"+mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="RestConnection",BM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class FM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===Kf?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=Zg(),d=this.Qo(e,t.toUriEncodedString());Ie(_g,`Sending RPC '${e}' ${c}:`,d,a);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,s,l);const{host:g}=new URL(d),v=Pl(g);return this.zo(e,d,m,a,v).then((E=>(Ie(_g,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw bl(_g,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=BM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection",zu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class ml extends FM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ml.c_){const e=NA();zu(e,xA.STAT_EVENT,(t=>{t.stat===zg.PROXY?Ie(Fn,"STAT_EVENT: detected buffering proxy"):t.stat===zg.NOPROXY&&Ie(Fn,"STAT_EVENT: detected no buffering proxy")})),ml.c_=!0}}zo(e,t,a,s,l){const c=Zg();return new Promise(((d,m)=>{const g=new IA;g.setWithCredentials(!0),g.listenOnce(DA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case bf.NO_ERROR:const E=g.getResponseJson();Ie(Fn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case bf.TIMEOUT:Ie(Fn,`RPC '${e}' ${c} timed out`),m(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case bf.HTTP_ERROR:const b=g.getStatus();if(Ie(Fn,`RPC '${e}' ${c} failed with status:`,b,"response text:",g.getResponseText()),b>0){let C=g.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C==null?void 0:C.error;if(L&&L.status&&L.message){const j=(function(Q){const B=Q.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(B)>=0?B:ue.UNKNOWN})(L.status);m(new Re(j,L.message))}else m(new Re(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ie(Fn,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(s);Ie(Fn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",v,a,15)}))}T_(e,t,a){const s=Zg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ie(Fn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const v=c.createWebChannel(g,d);this.I_(v);let E=!1,b=!1;const C=new HM({Ho:L=>{b?Ie(Fn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(E||(Ie(Fn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),Ie(Fn,`RPC '${e}' stream ${s} sending:`,L),v.send(L))},Jo:()=>v.close()});return zu(v,Hu.EventType.OPEN,(()=>{b||(Ie(Fn,`RPC '${e}' stream ${s} transport opened.`),C.i_())})),zu(v,Hu.EventType.CLOSE,(()=>{b||(b=!0,Ie(Fn,`RPC '${e}' stream ${s} transport closed`),C.o_(),this.E_(v))})),zu(v,Hu.EventType.ERROR,(L=>{b||(b=!0,bl(Fn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),C.o_(new Re(ue.UNAVAILABLE,"The operation could not be completed")))})),zu(v,Hu.EventType.MESSAGE,(L=>{var j;if(!b){const F=L.data[0];At(!!F,16349);const Q=F,B=(Q==null?void 0:Q.error)||((j=Q[0])==null?void 0:j.error);if(B){Ie(Fn,`RPC '${e}' stream ${s} received error:`,B);const q=B.status;let Y=(function(S){const A=yn[S];if(A!==void 0)return fw(A)})(q),G=B.message;Y===void 0&&(Y=ue.INTERNAL,G="Unknown error status: "+q+" with message "+B.message),b=!0,C.o_(new Re(Y,G)),v.close()}else Ie(Fn,`RPC '${e}' stream ${s} received:`,F),C.__(F)}})),ml.u_(),setTimeout((()=>{C.s_()}),0),C}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return OA()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(n){return new ml(n)}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n){return new YO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ml.c_=!1;class Cw{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="PersistentStream";class Iw{constructor(e,t,a,s,l,c,d,m){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Cw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(fa(t.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Re(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(Rb,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ie(Rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GM extends Iw{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=WO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?Oi(c.readTime):Xe.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=Wg(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Gg(m)?{documents:eM(l,m)}:{query:tM(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=pw(l,c.resumeToken);const g=Yg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=Zf(l,c.snapshotVersion.toTimestamp());const g=Yg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=rM(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=Wg(this.serializer),t.removeTarget=e,this.K_(t)}}class $M extends Iw{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZO(e.writeResults,e.commitTime),a=Oi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Wg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>JO(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{}class YM extends KM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Qg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ue.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Qg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Re(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function QM(n,e,t,a){return new YM(n,e,t,a)}class XM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fa(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="RemoteStore";class WM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{mo(this)&&(Ie(oo,"Restarting streams for network reachability change."),await(async function(m){const g=Je(m);g.Ea.add(4),await xc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Ld(g)})(this))}))})),this.Va=new XM(a,s)}}async function Ld(n){if(mo(n))for(const e of n.Ra)await e(!0)}async function xc(n){for(const e of n.Ra)await e(!1)}function Dw(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ky(t)?$y(t):jl(t).O_()&&Gy(t,e))}function qy(n,e){const t=Je(n),a=jl(t);t.Ia.delete(e),a.O_()&&xw(t,e),t.Ia.size===0&&(a.O_()?a.L_():mo(t)&&t.Va.set("Unknown"))}function Gy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(n).Z_(e)}function xw(n,e){n.da.$e(e),jl(n).X_(e)}function $y(n){n.da=new qO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),jl(n).start(),n.Va.ua()}function Ky(n){return mo(n)&&!jl(n).x_()&&n.Ia.size>0}function mo(n){return Je(n).Ea.size===0}function Nw(n){n.da=void 0}async function JM(n){n.Va.set("Online")}async function ZM(n){n.Ia.forEach(((e,t)=>{Gy(n,e)}))}async function eP(n,e){Nw(n),Ky(n)?(n.Va.ha(e),$y(n)):n.Va.set("Unknown")}async function tP(n,e,t){if(n.Va.set("Online"),e instanceof mw&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Ie(oo,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await td(n,a)}else if(e instanceof Rf?n.da.Xe(e):e instanceof dw?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const a=await Rw(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const v=l.Ia.get(g);v&&l.Ia.set(g,v.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,g)=>{const v=l.Ia.get(m);if(!v)return;l.Ia.set(m,v.withResumeToken(Un.EMPTY_BYTE_STRING,v.snapshotVersion)),xw(l,m);const E=new as(v.target,m,g,v.sequenceNumber);Gy(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Ie(oo,"Failed to raise snapshot:",a),await td(n,a)}}async function td(n,e,t){if(!Ul(e))throw e;n.Ea.add(1),await xc(n),n.Va.set("Offline"),t||(t=()=>Rw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(oo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ld(n)}))}function Ow(n,e){return e().catch((t=>td(n,t,e)))}async function Ud(n){const e=Je(n),t=ys(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xy;for(;nP(e);)try{const s=await kM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,rP(e,s)}catch(s){await td(e,s)}Mw(e)&&Pw(e)}function nP(n){return mo(n)&&n.Ta.length<10}function rP(n,e){n.Ta.push(e);const t=ys(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Mw(n){return mo(n)&&!ys(n).x_()&&n.Ta.length>0}function Pw(n){ys(n).start()}async function iP(n){ys(n).ra()}async function aP(n){const e=ys(n);for(const t of n.Ta)e.ea(t.mutations)}async function sP(n,e,t){const a=n.Ta.shift(),s=Ly.from(a,e,t);await Ow(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ud(n)}async function oP(n,e){e&&ys(n).Y_&&await(async function(a,s){if((function(c){return BO(c)&&c!==ue.ABORTED})(s.code)){const l=a.Ta.shift();ys(a).B_(),await Ow(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Ud(a)}})(n,e),Mw(n)&&Pw(n)}async function Cb(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ie(oo,"RemoteStore received new credentials");const a=mo(t);t.Ea.add(3),await xc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ld(t)}async function lP(n,e){const t=Je(n);e?(t.Ea.delete(2),await Ld(t)):e||(t.Ea.add(2),await xc(t),t.Va.set("Unknown"))}function jl(n){return n.ma||(n.ma=(function(t,a,s){const l=Je(t);return l.sa(),new GM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:JM.bind(null,n),Yo:ZM.bind(null,n),t_:eP.bind(null,n),J_:tP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Ky(n)?$y(n):n.Va.set("Unknown")):(await n.ma.stop(),Nw(n))}))),n.ma}function ys(n){return n.fa||(n.fa=(function(t,a,s){const l=Je(t);return l.sa(),new $M(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:iP.bind(null,n),t_:oP.bind(null,n),ta:aP.bind(null,n),na:sP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Ud(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(oo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new Yy(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qy(n,e){if(fa("AsyncQueue",`${e}: ${n}`),Ul(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{static emptySet(e){return new pl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||Be.comparator(t.key,a.key):(t,a)=>Be.comparator(t.key,a.key),this.keyedMap=qu(),this.sortedSet=new tn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new pl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(){this.ga=new tn(Be.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Cl{constructor(e,t,a,s,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Cl(e,t,pl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class cP{constructor(){this.queries=Db(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Je(t),l=s.queries;s.queries=Db(),l.forEach(((c,d)=>{for(const m of d.ba)m.onError(a)}))})(this,new Re(ue.ABORTED,"Firestore shutting down"))}}function Db(){return new fo((n=>ew(n)),Nd)}async function Xy(n,e){const t=Je(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new uP,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=Qy(c,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Jy(t)}async function Wy(n,e){const t=Je(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function hP(n,e){const t=Je(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&Jy(t)}function fP(n,e,t){const a=Je(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function Jy(n){n.Ca.forEach((e=>{e.next()}))}var ey,xb;(xb=ey||(ey={})).Ma="default",xb.Cache="cache";class Zy{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Cl(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.key=e}}class kw{constructor(e){this.key=e}}class dP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=mt(),this.mutatedKeys=mt(),this.eu=tw(e),this.tu=new pl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new Ib,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const m=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,E)=>{const b=s.get(v),C=Od(this.query,E)?E:null,L=!!b&&this.mutatedKeys.has(b.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let F=!1;b&&C?b.data.isEqual(C.data)?L!==j&&(a.track({type:3,doc:C}),F=!0):this.su(b,C)||(a.track({type:2,doc:C}),F=!0,(m&&this.eu(C,m)>0||g&&this.eu(C,g)<0)&&(d=!0)):!b&&C?(a.track({type:0,doc:C}),F=!0):b&&!C&&(a.track({type:1,doc:b}),F=!0,(m||g)&&(d=!0)),F&&(C?(c=c.add(C),l=j?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),a.track({type:1,doc:v})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,E)=>(function(C,L){const j=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:F})}};return j(C)-j(L)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],m=this.Ya.size===0&&this.current&&!s?1:0,g=m!==this.Xa;return this.Xa=m,c.length!==0||g?{snapshot:new Cl(this.query,e.tu,l,c,e.mutatedKeys,m===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ib,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=mt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new kw(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new Vw(a))})),t}cu(e){this.Za=e.ks,this.Ya=mt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Cl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ev="SyncEngine";class mP{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class pP{constructor(e){this.key=e,this.hu=!1}}class gP{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new fo((d=>ew(d)),Nd),this.Iu=new Map,this.Eu=new Set,this.Ru=new tn(Be.comparator),this.Au=new Map,this.Vu=new zy,this.du={},this.mu=new Map,this.fu=Rl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yP(n,e,t=!0){const a=Fw(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await Lw(a,e,t,!0),s}async function vP(n,e){const t=Fw(n);await Lw(t,e,!0,!1)}async function Lw(n,e,t,a){const s=await LM(n.localStore,Ni(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await _P(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&Dw(n.remoteStore,s),d}async function _P(n,e,t,a,s){n.pu=(E,b,C)=>(async function(j,F,Q,B){let q=F.view.ru(Q);q.Ss&&(q=await bb(j.localStore,F.query,!1).then((({documents:S})=>F.view.ru(S,q))));const Y=B&&B.targetChanges.get(F.targetId),G=B&&B.targetMismatches.get(F.targetId)!=null,ae=F.view.applyChanges(q,j.isPrimaryClient,Y,G);return Ob(j,F.targetId,ae.au),ae.snapshot})(n,E,b,C);const l=await bb(n.localStore,e,!0),c=new dP(e,l.ks),d=c.ru(l.documents),m=Dc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,m);Ob(n,t,g.au);const v=new mP(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function EP(n,e,t){const a=Je(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Nd(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await Jg(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&qy(a.remoteStore,s.targetId),ty(a,s.targetId)})).catch(Ll)):(ty(a,s.targetId),await Jg(a.localStore,s.targetId,!0))}async function TP(n,e){const t=Je(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),qy(t.remoteStore,a.targetId))}async function bP(n,e,t){const a=DP(n);try{const s=await(function(c,d){const m=Je(c),g=Gt.now(),v=d.reduce(((C,L)=>C.add(L.key)),mt());let E,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=da(),j=mt();return m.xs.getEntries(C,v).next((F=>{L=F,L.forEach(((Q,B)=>{B.isValidDocument()||(j=j.add(Q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(C,L))).next((F=>{E=F;const Q=[];for(const B of d){const q=kO(B,E.get(B.key).overlayedDocument);q!=null&&Q.push(new Ts(B.key,q,$A(q.value.mapValue),Dr.exists(!0)))}return m.mutationQueue.addMutationBatch(C,g,Q,d)})).next((F=>{b=F;const Q=F.applyToLocalDocumentSet(E,j);return m.documentOverlayCache.saveOverlays(C,F.batchId,Q)}))})).then((()=>({batchId:b.batchId,changes:rw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,m){let g=c.du[c.currentUser.toKey()];g||(g=new tn(dt)),g=g.insert(d,m),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Nc(a,s.changes),await Ud(a.remoteStore)}catch(s){const l=Qy(s,"Failed to persist write");t.reject(l)}}async function Uw(n,e){const t=Je(n);try{const a=await PM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?At(c.hu,14607):s.removedDocuments.size>0&&(At(c.hu,42227),c.hu=!1))})),await Nc(t,a,e)}catch(a){await Ll(a)}}function Nb(n,e,t){const a=Je(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const m=Je(c);m.onlineState=d;let g=!1;m.queries.forEach(((v,E)=>{for(const b of E.ba)b.va(d)&&(g=!0)})),g&&Jy(m)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function SP(n,e,t){const a=Je(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new tn(Be.comparator);c=c.insert(l,Gn.newNoDocument(l,Xe.min()));const d=mt().add(l),m=new Vd(Xe.min(),new Map,new tn(dt),c,d);await Uw(a,m),a.Ru=a.Ru.remove(l),a.Au.delete(e),tv(a)}else await Jg(a.localStore,e,!1).then((()=>ty(a,e,t))).catch(Ll)}async function AP(n,e){const t=Je(n),a=e.batch.batchId;try{const s=await MM(t.localStore,e);zw(t,a,null),jw(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Nc(t,s)}catch(s){await Ll(s)}}async function wP(n,e,t){const a=Je(n);try{const s=await(function(c,d){const m=Je(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return m.mutationQueue.lookupMutationBatch(g,d).next((E=>(At(E!==null,37113),v=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,v,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>m.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);zw(a,e,t),jw(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Nc(a,s)}catch(s){await Ll(s)}}function jw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function zw(n,e,t){const a=Je(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||Bw(n,a)}))}function Bw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(qy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),tv(n))}function Ob(n,e,t){for(const a of t)a instanceof Vw?(n.Vu.addReference(a.key,e),RP(n,a)):a instanceof kw?(Ie(ev,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||Bw(n,a.key)):Ge(19791,{wu:a})}function RP(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Ie(ev,"New document in limbo: "+t),n.Eu.add(a),tv(n))}function tv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Be(Bt.fromString(e)),a=n.fu.next();n.Au.set(a,new pP(t)),n.Ru=n.Ru.insert(t,a),Dw(n.remoteStore,new as(Ni(xd(t.path)),a,"TargetPurposeLimboResolution",Cd.ce))}}async function Nc(n,e,t){const a=Je(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,m)=>{c.push(a.pu(m,e,t).then((g=>{var v;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(v=t==null?void 0:t.targetChanges.get(m.targetId))==null?void 0:v.current;a.sharedClientState.updateQueryState(m.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Fy.Es(m.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(m,g){const v=Je(m);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>fe.forEach(g,(b=>fe.forEach(b.Ts,(C=>v.persistence.referenceDelegate.addReference(E,b.targetId,C))).next((()=>fe.forEach(b.Is,(C=>v.persistence.referenceDelegate.removeReference(E,b.targetId,C)))))))))}catch(E){if(!Ul(E))throw E;Ie(Hy,"Failed to update sequence numbers: "+E)}for(const E of g){const b=E.targetId;if(!E.fromCache){const C=v.vs.get(b),L=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(L);v.vs=v.vs.insert(b,j)}}})(a.localStore,l))}async function CP(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ie(ev,"User change. New user:",e.toKey());const a=await ww(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new Re(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Nc(t,a.Ns)}}function IP(n,e){const t=Je(n),a=t.Au.get(e);if(a&&a.hu)return mt().add(a.key);{let s=mt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function Fw(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SP.bind(null,e),e.Pu.J_=hP.bind(null,e.eventManager),e.Pu.yu=fP.bind(null,e.eventManager),e}function DP(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wP.bind(null,e),e}class nd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OM(this.persistence,new DM,e.initialUser,this.serializer)}Cu(e){return new Aw(By.Vi,this.serializer)}Du(e){return new jM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nd.provider={build:()=>new nd};class xP extends nd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){At(this.persistence.referenceDelegate instanceof ed,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new mM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?hr.withCacheSize(this.cacheSizeBytes):hr.DEFAULT;return new Aw((a=>ed.Vi(a,t)),this.serializer)}}class ny{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>Nb(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=CP.bind(null,this.syncEngine),await lP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cP})()}createDatastore(e){const t=kd(e.databaseInfo.databaseId),a=qM(e.databaseInfo);return QM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new WM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Nb(this.syncEngine,t,0)),(function(){return wb.v()?new wb:new zM})())}createSyncEngine(e,t){return(function(s,l,c,d,m,g,v){const E=new gP(s,l,c,d,m,g);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Je(s);Ie(oo,"RemoteStore shutting down."),l.Ea.add(5),await xc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ny.provider={build:()=>new ny};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class NP{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=qn.UNAUTHENTICATED,this.clientId=Dy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Ie(vs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Ie(vs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Qy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Tg(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(vs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await ww(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Mb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OP(n);Ie(vs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>Cb(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>Cb(e.remoteStore,s))),n._onlineComponents=e}async function OP(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(vs,"Using user provided OfflineComponentProvider");try{await Tg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;bl("Error using user provided cache. Falling back to memory cache: "+t),await Tg(n,new nd)}}else Ie(vs,"Using default OfflineComponentProvider"),await Tg(n,new xP(void 0));return n._offlineComponents}async function Hw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(vs,"Using user provided OnlineComponentProvider"),await Mb(n,n._uninitializedComponentsProvider._online)):(Ie(vs,"Using default OnlineComponentProvider"),await Mb(n,new ny))),n._onlineComponents}function MP(n){return Hw(n).then((e=>e.syncEngine))}async function rd(n){const e=await Hw(n),t=e.eventManager;return t.onListen=yP.bind(null,e.syncEngine),t.onUnlisten=EP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TP.bind(null,e.syncEngine),t}function PP(n,e,t,a){const s=new nv(a),l=new Zy(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>Xy(await rd(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>Wy(await rd(n),l)))}}function VP(n,e,t={}){const a=new ua;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const v=new nv({next:b=>{v.Nu(),c.enqueueAndForget((()=>Wy(l,E)));const C=b.docs.has(d);!C&&b.fromCache?g.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&b.fromCache&&m&&m.source==="server"?g.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new Zy(xd(d.path),v,{includeMetadataChanges:!0,Ka:!0});return Xy(l,E)})(await rd(n),n.asyncQueue,e,t,a))),a.promise}function kP(n,e,t={}){const a=new ua;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,g){const v=new nv({next:b=>{v.Nu(),c.enqueueAndForget((()=>Wy(l,E))),b.fromCache&&m.source==="server"?g.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),E=new Zy(d,v,{includeMetadataChanges:!0,Ka:!0});return Xy(l,E)})(await rd(n),n.asyncQueue,e,t,a))),a.promise}function LP(n,e){const t=new ua;return n.asyncQueue.enqueueAndForget((async()=>bP(await MP(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="ComponentProvider",Pb=new Map;function jP(n,e,t,a,s){return new aO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,qw(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw="firestore.googleapis.com",Vb=!0;class kb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Gw,this.ssl=Vb}else this.host=e.host,this.ssl=e.ssl??Vb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fM)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Y2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new U2;switch(a.type){case"firstParty":return new F2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=Pb.get(t);a&&(Ie(UP,"Removing Datastore"),Pb.delete(t),a.terminate())})(this),Promise.resolve()}}function zP(n,e,t,a={}){var g;n=Ir(n,jd);const s=Pl(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(_A(`https://${d}`),EA("Firestore",!0)),l.host!==Gw&&l.host!==d&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:d,ssl:s,emulatorOptions:a};if(!io(m,c)&&(n._setSettings(m),a.mockUserToken)){let v,E;if(typeof a.mockUserToken=="string")v=a.mockUserToken,E=qn.MOCK_USER;else{v=cN(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const b=a.mockUserToken.sub||a.mockUserToken.user_id;if(!b)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new qn(b)}n._authCredentials=new j2(new PA(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new po(this.firestore,e,this._query)}}class sn{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}toJSON(){return{type:sn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Rc(t,sn._jsonSchema))return new sn(e,a||null,new Be(Bt.fromString(t.referencePath)))}}sn._jsonSchemaVersion="firestore/documentReference/1.0",sn._jsonSchema={type:_n("string",sn._jsonSchemaVersion),referencePath:_n("string")};class hs extends po{constructor(e,t,a){super(e,t,xd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new Be(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Oc(n,e,...t){if(n=An(n),VA("collection","path",e),n instanceof jd){const a=Bt.fromString(e,...t);return Q0(a),new hs(n,null,a)}{if(!(n instanceof sn||n instanceof hs))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Bt.fromString(e,...t));return Q0(a),new hs(n.firestore,null,a)}}function Yr(n,e,...t){if(n=An(n),arguments.length===1&&(e=Dy.newId()),VA("doc","path",e),n instanceof jd){const a=Bt.fromString(e,...t);return Y0(a),new sn(n,null,new Be(a))}{if(!(n instanceof sn||n instanceof hs))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Bt.fromString(e,...t));return Y0(a),new sn(n.firestore,n instanceof hs?n.converter:null,new Be(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="AsyncQueue";class Ub{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Cw(this,"async_queue_retry"),this._c=()=>{const a=Eg();a&&Ie(Lb,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ua;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ul(e))throw e;Ie(Lb,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,fa("INTERNAL UNHANDLED ERROR: ",jb(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Yy.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ge(47125,{Pc:jb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function jb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class _s extends jd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new Ub,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ub(e),this._firestoreClient=void 0,await e}}}function BP(n,e){const t=typeof n=="object"?n:AA(),a=typeof n=="string"?n:Kf,s=Cy(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=lN("firestore");l&&zP(s,...l)}return s}function Mc(n){if(n._terminated)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FP(n),n._firestoreClient}function FP(n){var a,s,l,c;const e=n._freezeSettings(),t=jP(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new NP(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $r(Un.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $r(Un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,$r._jsonSchema))return $r.fromBase64String(e.bytes)}}$r._jsonSchemaVersion="firestore/bytes/1.0",$r._jsonSchema={type:_n("string",$r._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dt(this._lat,e._lat)||dt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mi._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,Mi._jsonSchema))return new Mi(e.latitude,e.longitude)}}Mi._jsonSchemaVersion="firestore/geoPoint/1.0",Mi._jsonSchema={type:_n("string",Mi._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new li(e.vectorValues);throw new Re(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:_n("string",li._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=/^__.*__$/;class qP{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}}class $w{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Kw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:n})}}class iv{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new iv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return id(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Kw(this.dataSource)&&HP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class GP{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||kd(e)}createContext(e,t,a,s=!1){return new iv({dataSource:e,methodName:t,targetDoc:a,path:Ln.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bd(n){const e=n._freezeSettings(),t=kd(n._databaseId);return new GP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yw(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);av("Data must be an object, but it was:",c,a);const d=Ww(a,c);let m,g;if(l.merge)m=new Rr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const b=Il(e,E,t);if(!c.contains(b))throw new Re(ue.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);eR(v,b)||v.push(b)}m=new Rr(v),g=c.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=c.fieldTransforms;return new qP(new fr(d),m,g)}class Fd extends rv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fd}}function Qw(n,e,t,a){const s=n.createContext(1,e,t);av("Data must be an object, but it was:",s,a);const l=[],c=fr.empty();Es(a,((m,g)=>{const v=Zw(e,m,t);g=An(g);const E=s.childContextForFieldPath(v);if(g instanceof Fd)l.push(v);else{const b=Pc(g,E);b!=null&&(l.push(v),c.set(v,b))}}));const d=new Rr(l);return new $w(c,d,s.fieldTransforms)}function Xw(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Il(e,a,t)],m=[s];if(l.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)d.push(Il(e,l[b])),m.push(l[b+1]);const g=[],v=fr.empty();for(let b=d.length-1;b>=0;--b)if(!eR(g,d[b])){const C=d[b];let L=m[b];L=An(L);const j=c.childContextForFieldPath(C);if(L instanceof Fd)g.push(C);else{const F=Pc(L,j);F!=null&&(g.push(C),v.set(C,F))}}const E=new Rr(g);return new $w(v,E,c.fieldTransforms)}function $P(n,e,t,a=!1){return Pc(t,n.createContext(a?4:3,e))}function Pc(n,e){if(Jw(n=An(n)))return av("Unsupported field value:",e,n),Ww(n,e);if(n instanceof rv)return(function(a,s){if(!Kw(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let m=Pc(d,s.childContextForArray(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=An(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return xO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Gt.fromDate(a);return{timestampValue:Zf(s.serializer,l)}}if(a instanceof Gt){const l=new Gt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Zf(s.serializer,l)}}if(a instanceof Mi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof $r)return{bytesValue:pw(s.serializer,a._byteString)};if(a instanceof sn){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jy(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof li)return(function(c,d){const m=c instanceof li?c.toArray():c;return{mapValue:{fields:{[qA]:{stringValue:GA},[Yf]:{arrayValue:{values:m.map((v=>{if(typeof v!="number")throw d.createError("VectorValues must only contain numeric values.");return Vy(d.serializer,v)}))}}}}}})(a,s);if(bw(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Rd(a)}`)})(n,e)}function Ww(n,e){const t={};return UA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,((a,s)=>{const l=Pc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function Jw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof Mi||n instanceof $r||n instanceof sn||n instanceof rv||n instanceof li||bw(n))}function av(n,e,t){if(!Jw(t)||!kA(t)){const a=Rd(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Il(n,e,t){if((e=An(e))instanceof zd)return e._internalPath;if(typeof e=="string")return Zw(n,e);throw id("Field path arguments must be of type string or ",n,!1,void 0,t)}const KP=new RegExp("[~\\*/\\[\\]]");function Zw(n,e,t){if(e.search(KP)>=0)throw id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function id(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${a}`),c&&(m+=` in document ${s}`),m+=")"),new Re(ue.INVALID_ARGUMENT,d+n+m)}function eR(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Es(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[Yf].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>cn(c.doubleValue)));return new li(t)}convertGeoPoint(e){return new Mi(cn(e.latitude),cn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Dd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){const t=ms(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Bt.fromString(e);At(Tw(a),9688,{name:e});const s=new hc(a.get(1),a.get(3)),l=new Be(a.popFirst(5));return s.isEqual(t)||fa(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends YP{constructor(e){super(),this.firestore=e}convertBytes(e){return new $r(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,t)}}const zb="@firebase/firestore",Bb="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Il("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QP extends tR{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ov{}class XP extends ov{}function Vc(n,e,...t){let a=[];e instanceof ov&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((m=>m instanceof uv)).length,d=l.filter((m=>m instanceof Hd)).length;if(c>1||c>0&&d>0)throw new Re(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class Hd extends XP{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Hd(e,t,a)}_apply(e){const t=this._parse(e);return rR(e._query,t),new po(e.firestore,e.converter,$g(e._query,t))}_parse(e){const t=Bd(e.firestore);return(function(l,c,d,m,g,v,E){let b;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){qb(E,v);const L=[];for(const j of E)L.push(Hb(m,l,j));b={arrayValue:{values:L}}}else b=Hb(m,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||qb(E,v),b=$P(d,c,E,v==="in"||v==="not-in");return vn.create(g,v,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lv(n,e,t){const a=e,s=Il("where",n);return Hd._create(s,a,t)}class uv extends ov{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uv(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const m of d)rR(c,m),c=$g(c,m)})(e._query,t),new po(e.firestore,e.converter,$g(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Hb(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZA(e)&&t.indexOf("/")!==-1)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Bt.fromString(t));if(!Be.isDocumentKey(a))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return rb(n,new Be(a))}if(t instanceof sn)return rb(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rd(t)}.`)}function qb(n,e){if(!Array.isArray(n)||n.length===0)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rR(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Re(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function iR(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class $u{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends tR{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Il("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=eo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",eo._jsonSchema={type:_n("string",eo._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class Cf extends eo{data(e={}){return super.data(e)}}class to{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new $u(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new Cf(this._firestore,this._userDataWriter,a.key,a,new $u(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const m=new Cf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $u(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Cf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new $u(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,v=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),v=c.indexOf(d.doc.key)),{type:WP(d.type),doc:m,oldIndex:g,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=to._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */to._jsonSchemaVersion="firestore/querySnapshot/1.0",to._jsonSchema={type:_n("string",to._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bd(e)}set(e,t,a){this._verifyNotCommitted();const s=bg(e,this._firestore),l=iR(s.converter,t,a),c=Yw(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Dr.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=bg(e,this._firestore);let c;return c=typeof(t=An(t))=="string"||t instanceof zd?Xw(this._dataReader,"WriteBatch.update",l._key,t,a,s):Qw(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Dr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bg(e,this._firestore);return this._mutations=this._mutations.concat(new ky(t._key,Dr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bg(n,e){if((n=An(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(n){n=Ir(n,sn);const e=Ir(n.firestore,_s),t=Mc(e);return VP(t,n._key).then((a=>aR(e,n,a)))}function Lc(n){n=Ir(n,po);const e=Ir(n.firestore,_s),t=Mc(e),a=new sv(e);return nR(n._query),kP(t,n._query).then((s=>new to(e,a,n,s)))}function ZP(n,e,t){n=Ir(n,sn);const a=Ir(n.firestore,_s),s=iR(n.converter,e,t),l=Bd(a);return cv(a,[Yw(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Dr.none())])}function qd(n,e,t,...a){n=Ir(n,sn);const s=Ir(n.firestore,_s),l=Bd(s);let c;return c=typeof(e=An(e))=="string"||e instanceof zd?Xw(l,"updateDoc",n._key,e,t,a):Qw(l,"updateDoc",n._key,e),cv(s,[c.toMutation(n._key,Dr.exists(!0))])}function eV(n,...e){var g,v,E;n=An(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Fb(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Fb(e[a])){const b=e[a];e[a]=(g=b.next)==null?void 0:g.bind(b),e[a+1]=(v=b.error)==null?void 0:v.bind(b),e[a+2]=(E=b.complete)==null?void 0:E.bind(b)}let l,c,d;if(n instanceof sn)c=Ir(n.firestore,_s),d=xd(n._key.path),l={next:b=>{e[a]&&e[a](aR(c,n,b))},error:e[a+1],complete:e[a+2]};else{const b=Ir(n,po);c=Ir(b.firestore,_s),d=b._query;const C=new sv(c);l={next:L=>{e[a]&&e[a](new to(c,C,b,L))},error:e[a+1],complete:e[a+2]},nR(n._query)}const m=Mc(c);return PP(m,d,s,l)}function cv(n,e){const t=Mc(n);return LP(t,e)}function aR(n,e,t){const a=t.docs.get(e._key),s=new sv(n);return new eo(n,s,e._key,a,new $u(t.hasPendingWrites,t.fromCache),e.converter)}function sR(n){return n=Ir(n,_s),Mc(n),new JP(n,(e=>cv(n,e)))}(function(e,t=!0){L2(Vl),Tl(new ao("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new _s(new z2(a.getProvider("auth-internal")),new H2(c,a.getProvider("app-check-internal")),sO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),us(zb,Bb,e),us(zb,Bb,"esm2020")})();var tV="firebase",nV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(tV,nV,"app");function oR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rV=oR,lR=new Ac("auth","Firebase",oR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new wy("@firebase/auth");function iV(n,...e){ad.logLevel<=ft.WARN&&ad.warn(`Auth (${Vl}): ${n}`,...e)}function If(n,...e){ad.logLevel<=ft.ERROR&&ad.error(`Auth (${Vl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n,...e){throw fv(n,...e)}function ui(n,...e){return fv(n,...e)}function hv(n,e,t){const a={...rV(),[e]:t};return new Ac("auth","Firebase",a).create(e,{appName:n.name})}function no(n){return hv(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aV(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Li(n,"argument-error"),hv(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fv(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return lR.create(n,...e)}function $e(n,e,...t){if(!n)throw fv(e,...t)}function oa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw If(e),new Error(e)}function ma(n,e){n||oa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function sV(){return Gb()==="http:"||Gb()==="https:"}function Gb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sV()||gN()||"connection"in navigator)?navigator.onLine:!0}function lV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ma(t>e,"Short delay should be less than long delay!"),this.isMobile=dN()||yN()}get(){return oV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(n,e){ma(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hV=new Uc(3e4,6e4);function mv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function zl(n,e,t,a,s={}){return cR(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=wc({key:n.config.apiKey,...c}).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:m,...l};return pN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Pl(n.emulatorConfig.host)&&(g.credentials="include"),uR.fetch()(await hR(n,n.config.apiHost,t,d),g)})}async function cR(n,e,t){n._canInitEmulator=!1;const a={...uV,...e};try{const s=new dV(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw pf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw pf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw pf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw pf(n,"user-disabled",c);const v=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw hv(n,v,g);Li(n,v)}}catch(s){if(s instanceof ya)throw s;Li(n,"network-request-failed",{message:String(s)})}}async function fV(n,e,t,a,s={}){const l=await zl(n,e,t,a,s);return"mfaPendingCredential"in l&&Li(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function hR(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?dv(n.config,s):`${n.config.apiScheme}://${s}`;return cV.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class dV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(ui(this.auth,"network-request-failed")),hV.get())})}}function pf(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=ui(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(n,e){return zl(n,"POST","/v1/accounts:delete",e)}async function sd(n,e){return zl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pV(n,e=!1){const t=An(n),a=await t.getIdToken(e),s=pv(a);$e(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:tc(Sg(s.auth_time)),issuedAtTime:tc(Sg(s.iat)),expirationTime:tc(Sg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Sg(n){return Number(n)*1e3}function pv(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return If("JWT malformed, contained fewer than 3 sections"),null;try{const s=pA(t);return s?JSON.parse(s):(If("Failed to decode base64 JWT payload"),null)}catch(s){return If("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $b(n){const e=pv(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof ya&&gV(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function gV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(n){var E;const e=n.auth,t=await n.getIdToken(),a=await pc(n,sd(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?fR(s.providerUserInfo):[],c=_V(n.providerData,l),d=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?m:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,v)}async function vV(n){const e=An(n);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _V(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function fR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EV(n,e){const t=await cR(n,{},async()=>{const a=wc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await hR(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:a};return n.emulatorConfig&&Pl(n.emulatorConfig.host)&&(m.credentials="include"),uR.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function TV(n,e){return zl(n,"POST","/v2/accounts:revokeToken",mv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$b(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=$b(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await EV(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new gl;return a&&($e(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&($e(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&($e(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new yV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await pc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pV(this,e)}reload(){return vV(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await od(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(no(this.auth));const e=await this.getIdToken();return await pc(this,mV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,g=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:E,emailVerified:b,isAnonymous:C,providerData:L,stsTokenManager:j}=t;$e(E&&j,e,"internal-error");const F=gl.fromJSON(this.name,j);$e(typeof E=="string",e,"internal-error"),Wa(a,e.name),Wa(s,e.name),$e(typeof b=="boolean",e,"internal-error"),$e(typeof C=="boolean",e,"internal-error"),Wa(l,e.name),Wa(c,e.name),Wa(d,e.name),Wa(m,e.name),Wa(g,e.name),Wa(v,e.name);const Q=new oi({uid:E,auth:e,email:s,emailVerified:b,displayName:a,isAnonymous:C,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:g,lastLoginAt:v});return L&&Array.isArray(L)&&(Q.providerData=L.map(B=>({...B}))),m&&(Q._redirectEventId=m),Q}static async _fromIdTokenResponse(e,t,a=!1){const s=new gl;s.updateFromServerResponse(t);const l=new oi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await od(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];$e(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?fR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new gl;d.updateFromIdToken(a);const m=new oi({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=new Map;function la(n){ma(n instanceof Function,"Expected a class definition");let e=Kb.get(n);return e?(ma(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dR.type="NONE";const Yb=dR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(n,e,t){return`firebase:${n}:${e}:${t}`}class yl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Df(this.userKey,s.apiKey,l),this.fullPersistenceKey=Df("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sd(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new yl(la(Yb),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||la(Yb);const c=Df(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const v=await g._get(c);if(v){let E;if(typeof v=="string"){const b=await sd(e,{idToken:v}).catch(()=>{});if(!b)break;E=await oi._fromGetAccountInfoResponse(e,b,v)}else E=oi._fromJSON(e,v);g!==l&&(d=E),l=g;break}}catch{}const m=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new yl(l,e,a):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new yl(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_R(e))return"Blackberry";if(ER(e))return"Webos";if(pR(e))return"Safari";if((e.includes("chrome/")||gR(e))&&!e.includes("edge/"))return"Chrome";if(vR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function mR(n=$n()){return/firefox\//i.test(n)}function pR(n=$n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gR(n=$n()){return/crios\//i.test(n)}function yR(n=$n()){return/iemobile/i.test(n)}function vR(n=$n()){return/android/i.test(n)}function _R(n=$n()){return/blackberry/i.test(n)}function ER(n=$n()){return/webos/i.test(n)}function gv(n=$n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bV(n=$n()){var e;return gv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function SV(){return vN()&&document.documentMode===10}function TR(n=$n()){return gv(n)||vR(n)||ER(n)||_R(n)||/windows phone/i.test(n)||yR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(n,e=[]){let t;switch(n){case"Browser":t=Qb($n());break;case"Worker":t=`${Qb($n())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vl}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wV(n,e={}){return zl(n,"GET","/v2/passwordPolicy",mv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=6;class CV{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xb(this),this.idTokenSubscription=new Xb(this),this.beforeStateQueue=new AV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=la(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await yl.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sd(this,{idToken:e}),a=await oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ai(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&(m!=null&&m.user)&&(a=m.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(no(this));const t=e?An(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(no(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(no(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(la(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wV(this),t=new CV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ac("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await TV(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&la(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await yl.create(this,[la(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,a,s);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(ai(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&iV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Gd(n){return An(n)}class Xb{constructor(e){this.auth=e,this.observer=null,this.addObserver=RN(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DV(n){yv=n}function xV(n){return yv.loadJS(n)}function NV(){return yv.gapiScript}function OV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(n,e){const t=Cy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(io(l,e??{}))return s;Li(s,"already-initialized")}return t.initialize({options:e})}function PV(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(la);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function VV(n,e,t){const a=Gd(n);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=SR(e),{host:c,port:d}=kV(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},v=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(io(g,a.config.emulator)&&io(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Pl(c)?(_A(`${l}//${c}${m}`),EA("Auth",!0)):LV()}function SR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function kV(n){const e=SR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:Wb(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:Wb(c)}}}function Wb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function LV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return oa("not implemented")}_getIdTokenResponse(e){return oa("not implemented")}_linkToIdToken(e,t){return oa("not implemented")}_getReauthenticationResolver(e){return oa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(n,e){return fV(n,"POST","/v1/accounts:signInWithIdp",mv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV="http://localhost";class lo extends AR{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new lo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Li("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new lo(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return vl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,vl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vl(e,t)}buildRequest(){const e={requestUri:UV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends vv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends jc{constructor(){super("facebook.com")}static credential(e){return lo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return lo._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return sa.credential(t,a)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends jc{constructor(){super("github.com")}static credential(e){return lo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends jc{constructor(){super("twitter.com")}static credential(e,t){return lo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return rs.credential(t,a)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await oi._fromIdTokenResponse(e,a,s),c=Jb(a);return new Dl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=Jb(a);return new Dl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function Jb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld extends ya{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,ld.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new ld(e,t,a,s)}}function wR(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ld._fromErrorAndOperation(n,l,e,a):l})}async function jV(n,e,t=!1){const a=await pc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zV(n,e,t=!1){const{auth:a}=n;if(ai(a.app))return Promise.reject(no(a));const s="reauthenticate";try{const l=await pc(n,wR(a,s,e,n),t);$e(l.idToken,a,"internal-error");const c=pv(l.idToken);$e(c,a,"internal-error");const{sub:d}=c;return $e(n.uid===d,a,"user-mismatch"),Dl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Li(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(n,e,t=!1){if(ai(n.app))return Promise.reject(no(n));const a="signIn",s=await wR(n,a,e),l=await Dl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function FV(n,e,t,a){return An(n).onIdTokenChanged(e,t,a)}function HV(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function qV(n,e,t,a){return An(n).onAuthStateChanged(e,t,a)}const ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ud,"1"),this.storage.removeItem(ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=1e3,$V=10;class CR extends RR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);SV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,$V):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},GV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CR.type="LOCAL";const KV=CR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR extends RR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IR.type="SESSION";const DR=IR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new $d(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await YV(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=_v("",20);s.port1.start();const v=setTimeout(()=>{m(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const b=E;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(v),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function XV(n){Pi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function WV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function ZV(){return xR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="firebaseLocalStorageDb",e4=1,cd="firebaseLocalStorage",OR="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Kd(n,e){return n.transaction([cd],e?"readwrite":"readonly").objectStore(cd)}function t4(){const n=indexedDB.deleteDatabase(NR);return new zc(n).toPromise()}function ay(){const n=indexedDB.open(NR,e4);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(cd,{keyPath:OR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(cd)?e(a):(a.close(),await t4(),e(await ay()))})})}async function Zb(n,e,t){const a=Kd(n,!0).put({[OR]:e,value:t});return new zc(a).toPromise()}async function n4(n,e){const t=Kd(n,!1).get(e),a=await new zc(t).toPromise();return a===void 0?null:a.value}function eS(n,e){const t=Kd(n,!0).delete(e);return new zc(t).toPromise()}const r4=800,i4=3;class MR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ay(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>i4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$d._getInstance(ZV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await WV(),!this.activeServiceWorker)return;this.sender=new QV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ay();return await Zb(e,ud,"1"),await eS(e,ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>Zb(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>n4(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>eS(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Kd(s,!1).getAll();return new zc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MR.type="LOCAL";const a4=MR;new Uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(n,e){return e?la(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev extends AR{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function s4(n){return BV(n.auth,new Ev(n),n.bypassAuthState)}function o4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),zV(t,new Ev(n),n.bypassAuthState)}async function l4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),jV(t,new Ev(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s4;case"linkViaPopup":case"linkViaRedirect":return l4;case"reauthViaPopup":case"reauthViaRedirect":return o4;default:Li(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=new Uc(2e3,1e4);async function c4(n,e,t){if(ai(n.app))return Promise.reject(ui(n,"operation-not-supported-in-this-environment"));const a=Gd(n);aV(n,e,vv);const s=PR(a,t);return new Zs(a,"signInViaPopup",e,s).executeNotNull()}class Zs extends VR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Zs.currentPopupAction&&Zs.currentPopupAction.cancel(),Zs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){ma(this.filter.length===1,"Popup operations only handle one event");const e=_v();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u4.get())};e()}}Zs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4="pendingRedirect",xf=new Map;class f4 extends VR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=xf.get(this.auth._key());if(!e){try{const a=await d4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}xf.set(this.auth._key(),e)}return this.bypassAuthState||xf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d4(n,e){const t=g4(e),a=p4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function m4(n,e){xf.set(n._key(),e)}function p4(n){return la(n._redirectPersistence)}function g4(n){return Df(h4,n.config.apiKey,n.name)}async function y4(n,e,t=!1){if(ai(n.app))return Promise.reject(no(n));const a=Gd(n),s=PR(a,e),c=await new f4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=600*1e3;class _4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!kR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(ui(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v4&&this.cachedEventUids.clear(),this.cachedEventUids.has(tS(e))}saveEventToCache(e){this.cachedEventUids.add(tS(e)),this.lastProcessedEventTime=Date.now()}}function tS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(n,e={}){return zl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S4=/^https?/;async function A4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await T4(n);for(const t of e)try{if(w4(t))return}catch{}Li(n,"unauthorized-domain")}function w4(n){const e=ry(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!S4.test(t))return!1;if(b4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new Uc(3e4,6e4);function nS(){const n=Pi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function C4(n){return new Promise((e,t)=>{var s,l,c;function a(){nS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nS(),t(ui(n,"network-request-failed"))},timeout:R4.get()})}if((l=(s=Pi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Pi().gapi)!=null&&c.load)a();else{const d=OV("iframefcb");return Pi()[d]=()=>{gapi.load?a():t(ui(n,"network-request-failed"))},xV(`${NV()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Nf=null,e})}let Nf=null;function I4(n){return Nf=Nf||C4(n),Nf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D4=new Uc(5e3,15e3),x4="__/auth/iframe",N4="emulator/auth/iframe",O4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P4(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?dv(e,N4):`https://${n.config.authDomain}/${x4}`,a={apiKey:e.apiKey,appName:n.name,v:Vl},s=M4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${wc(a).slice(1)}`}async function V4(n){const e=await I4(n),t=Pi().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:P4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=ui(n,"network-request-failed"),d=Pi().setTimeout(()=>{l(c)},D4.get());function m(){Pi().clearTimeout(d),s(a)}a.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L4=500,U4=600,j4="_blank",z4="http://localhost";class rS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function B4(n,e,t,a=L4,s=U4){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const m={...k4,width:a.toString(),height:s.toString(),top:l,left:c},g=$n().toLowerCase();t&&(d=gR(g)?j4:t),mR(g)&&(e=e||z4,m.scrollbars="yes");const v=Object.entries(m).reduce((b,[C,L])=>`${b}${C}=${L},`,"");if(bV(g)&&d!=="_self")return F4(e||"",d),new rS(null);const E=window.open(e||"",d,v);$e(E,n,"popup-blocked");try{E.focus()}catch{}return new rS(E)}function F4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="__/auth/handler",q4="emulator/auth/handler",G4=encodeURIComponent("fac");async function iS(n,e,t,a,s,l){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Vl,eventId:s};if(e instanceof vv){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",wN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,E]of Object.entries({}))c[v]=E}if(e instanceof jc){const v=e.getScopes().filter(E=>E!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const m=await n._getAppCheckToken(),g=m?`#${G4}=${encodeURIComponent(m)}`:"";return`${$4(n)}?${wc(d).slice(1)}${g}`}function $4({config:n}){return n.emulator?dv(n,q4):`https://${n.authDomain}/${H4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class K4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DR,this._completeRedirectFn=y4,this._overrideRedirectResult=m4}async _openPopup(e,t,a,s){var c;ma((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await iS(e,t,a,ry(),s);return B4(e,l,_v())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await iS(e,t,a,ry(),s);return XV(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ma(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await V4(e),a=new _4(e);return t.register("authEvent",s=>($e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ag,{type:Ag},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Ag];l!==void 0&&t(!!l),Li(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=A4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TR()||pR()||gv()}}const Y4=K4;var aS="@firebase/auth",sS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W4(n){Tl(new ao("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bR(n)},g=new IV(a,s,l,m);return PV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),Tl(new ao("auth-internal",e=>{const t=Gd(e.getProvider("auth").getImmediate());return(a=>new Q4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(aS,sS,X4(n)),us(aS,sS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4=300,Z4=vA("authIdTokenMaxAge")||J4;let oS=null;const ek=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>Z4)return;const s=t==null?void 0:t.token;oS!==s&&(oS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tk(n=AA()){const e=Cy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=MV(n,{popupRedirectResolver:Y4,persistence:[a4,KV,DR]}),a=vA("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=ek(l.toString());HV(t,c,()=>c(t.currentUser)),FV(t,d=>c(d))}}const s=gA("auth");return s&&VV(t,`http://${s}`),t}function nk(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}DV({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=ui("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",nk().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W4("Browser");const rk={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function rl(n){const e=rk[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const ik={apiKey:rl("VITE_FIREBASE_API_KEY"),authDomain:rl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:rl("VITE_FIREBASE_PROJECT_ID"),storageBucket:rl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:rl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:rl("VITE_FIREBASE_APP_ID")},LR=SA(ik),xl=tk(LR),ak=new sa,wn=BP(LR),UR=P.createContext(void 0),sk=({children:n})=>{const[e,t]=P.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=P.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);P.useEffect(()=>{a(e)},[e,a]);const s=P.useCallback(c=>{t(c),a(c);const d=xl.currentUser;if(d){const m=Yr(wn,"users",d.uid);qd(m,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=P.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return P.useEffect(()=>xl.onAuthStateChanged(async d=>{if(d){const m=Yr(wn,"users",d.uid),g=await kc(m);if(g.exists()&&g.data().preferredTheme){const v=g.data().preferredTheme;t(v),a(v)}}}),[a]),w.jsx(UR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},ok="_spinner_5jyct_1",lk="_spinnerContainer_5jyct_19",lS={spinner:ok,spinnerContainer:lk},Bl=({container:n=!0})=>{const e=w.jsx("div",{className:lS.spinner});return n?w.jsx("div",{className:lS.spinnerContainer,children:e}):e},Nl=()=>w.jsx("div",{className:"loading-container",children:w.jsx(Bl,{container:!1})}),uk=()=>{const n=pt(a=>a.auth.firebaseUser),e=pt(a=>a.auth.userData);return pt(a=>a.auth.loading)?w.jsx(Nl,{}):n?e?e.isApproved?w.jsx(ss,{to:"/app/dashboard",replace:!0}):w.jsx(ss,{to:"/guest",replace:!0}):w.jsx(Nl,{}):w.jsx(ss,{to:"/login",replace:!0})};function Vn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var ck=typeof Symbol=="function"&&Symbol.observable||"@@observable",uS=ck,wg=()=>Math.random().toString(36).substring(7).split("").join("."),hk={INIT:`@@redux/INIT${wg()}`,REPLACE:`@@redux/REPLACE${wg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${wg()}`},hd=hk;function Tv(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function jR(n,e,t){if(typeof n!="function")throw new Error(Vn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(Vn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(Vn(1));return t(jR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,m=!1;function g(){c===l&&(c=new Map,l.forEach((F,Q)=>{c.set(Q,F)}))}function v(){if(m)throw new Error(Vn(3));return s}function E(F){if(typeof F!="function")throw new Error(Vn(4));if(m)throw new Error(Vn(5));let Q=!0;g();const B=d++;return c.set(B,F),function(){if(Q){if(m)throw new Error(Vn(6));Q=!1,g(),c.delete(B),l=null}}}function b(F){if(!Tv(F))throw new Error(Vn(7));if(typeof F.type>"u")throw new Error(Vn(8));if(typeof F.type!="string")throw new Error(Vn(17));if(m)throw new Error(Vn(9));try{m=!0,s=a(s,F)}finally{m=!1}return(l=c).forEach(B=>{B()}),F}function C(F){if(typeof F!="function")throw new Error(Vn(10));a=F,b({type:hd.REPLACE})}function L(){const F=E;return{subscribe(Q){if(typeof Q!="object"||Q===null)throw new Error(Vn(11));function B(){const Y=Q;Y.next&&Y.next(v())}return B(),{unsubscribe:F(B)}},[uS](){return this}}}return b({type:hd.INIT}),{dispatch:b,subscribe:E,getState:v,replaceReducer:C,[uS]:L}}function fk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:hd.INIT})>"u")throw new Error(Vn(12));if(typeof t(void 0,{type:hd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vn(13))})}function dk(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{fk(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let m=!1;const g={};for(let v=0;v<a.length;v++){const E=a[v],b=t[E],C=c[E],L=b(C,d);if(typeof L>"u")throw d&&d.type,new Error(Vn(14));g[E]=L,m=m||L!==C}return m=m||a.length!==Object.keys(c).length,m?g:c}}function fd(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function mk(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(Vn(15))};const c={getState:s.getState,dispatch:(m,...g)=>l(m,...g)},d=n.map(m=>m(c));return l=fd(...d)(s.dispatch),{...s,dispatch:l}}}function pk(n){return Tv(n)&&"type"in n&&typeof n.type=="string"}var zR=Symbol.for("immer-nothing"),cS=Symbol.for("immer-draftable"),er=Symbol.for("immer-state");function si(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Cr=Object,Ol=Cr.getPrototypeOf,dd="constructor",Yd="prototype",sy="configurable",md="enumerable",Of="writable",gc="value",pa=n=>!!n&&!!n[er];function hi(n){var e;return n?BR(n)||Xd(n)||!!n[cS]||!!((e=n[dd])!=null&&e[cS])||Wd(n)||Jd(n):!1}var gk=Cr[Yd][dd].toString(),hS=new WeakMap;function BR(n){if(!n||!bv(n))return!1;const e=Ol(n);if(e===null||e===Cr[Yd])return!0;const t=Cr.hasOwnProperty.call(e,dd)&&e[dd];if(t===Object)return!0;if(!ul(t))return!1;let a=hS.get(t);return a===void 0&&(a=Function.toString.call(t),hS.set(t,a)),a===gk}function Qd(n,e,t=!0){Bc(n)===0?(t?Reflect.ownKeys(n):Cr.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Bc(n){const e=n[er];return e?e.type_:Xd(n)?1:Wd(n)?2:Jd(n)?3:0}var fS=(n,e,t=Bc(n))=>t===2?n.has(e):Cr[Yd].hasOwnProperty.call(n,e),oy=(n,e,t=Bc(n))=>t===2?n.get(e):n[e],pd=(n,e,t,a=Bc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function yk(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Xd=Array.isArray,Wd=n=>n instanceof Map,Jd=n=>n instanceof Set,bv=n=>typeof n=="object",ul=n=>typeof n=="function",Rg=n=>typeof n=="boolean";function vk(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var aa=n=>n.copy_||n.base_,Sv=n=>n.modified_?n.copy_:n.base_;function ly(n,e){if(Wd(n))return new Map(n);if(Jd(n))return new Set(n);if(Xd(n))return Array[Yd].slice.call(n);const t=BR(n);if(e===!0||e==="class_only"&&!t){const a=Cr.getOwnPropertyDescriptors(n);delete a[er];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[Of]===!1&&(d[Of]=!0,d[sy]=!0),(d.get||d.set)&&(a[c]={[sy]:!0,[Of]:!0,[md]:d[md],[gc]:n[c]})}return Cr.create(Ol(n),a)}else{const a=Ol(n);if(a!==null&&t)return{...n};const s=Cr.create(a);return Cr.assign(s,n)}}function Av(n,e=!1){return Zd(n)||pa(n)||!hi(n)||(Bc(n)>1&&Cr.defineProperties(n,{set:gf,add:gf,clear:gf,delete:gf}),Cr.freeze(n),e&&Qd(n,(t,a)=>{Av(a,!0)},!1)),n}function _k(){si(2)}var gf={[gc]:_k};function Zd(n){return n===null||!bv(n)?!0:Cr.isFrozen(n)}var gd="MapSet",uy="Patches",dS="ArrayMethods",FR={};function uo(n){const e=FR[n];return e||si(0,n),e}var mS=n=>!!FR[n],yc,HR=()=>yc,Ek=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:mS(gd)?uo(gd):void 0,arrayMethodsPlugin_:mS(dS)?uo(dS):void 0});function pS(n,e){e&&(n.patchPlugin_=uo(uy),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function cy(n){hy(n),n.drafts_.forEach(Tk),n.drafts_=null}function hy(n){n===yc&&(yc=n.parent_)}var gS=n=>yc=Ek(yc,n);function Tk(n){const e=n[er];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function yS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[er].modified_&&(cy(e),si(4)),hi(n)&&(n=vS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[er].base_,n,e)}else n=vS(e,t);return bk(e,n,!0),cy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==zR?n:void 0}function vS(n,e){if(Zd(e))return e;const t=e[er];if(!t)return yd(e,n.handledSet_,n);if(!em(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);$R(t,n)}return t.copy_}function bk(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Av(e,t)}function qR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var em=(n,e)=>n.scope_===e,Sk=[];function GR(n,e,t,a){const s=aa(n),l=n.type_;if(a!==void 0&&oy(s,a,l)===e){pd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;Qd(s,(m,g)=>{if(pa(g)){const v=d.get(g)||[];v.push(m),d.set(g,v)}})}const c=n.draftLocations_.get(e)??Sk;for(const d of c)pd(s,d,t,l)}function Ak(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!em(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=Sv(l);GR(n,l.draft_??l,c,t),$R(l,s)})}function $R(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}qR(n)}}function wk(n,e,t){const{scope_:a}=n;if(pa(t)){const s=t[er];em(s,a)&&s.callbacks_.push(function(){Mf(n);const c=Sv(s);GR(n,t,c,e)})}else hi(t)&&n.callbacks_.push(function(){const l=aa(n);n.type_===3?l.has(t)&&yd(t,a.handledSet_,a):oy(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&yd(oy(n.copy_,e,n.type_),a.handledSet_,a)})}function yd(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||pa(n)||e.has(n)||!hi(n)||Zd(n)||(e.add(n),Qd(n,(a,s)=>{if(pa(s)){const l=s[er];if(em(l,t)){const c=Sv(l);pd(n,a,c,n.type_),qR(l)}}else hi(s)&&yd(s,e,t)})),n}function Rk(n,e){const t=Xd(n),a={type_:t?1:0,scope_:e?e.scope_:HR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=vd;t&&(s=[a],l=vc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var vd={get(n,e){if(e===er)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=aa(n);if(!fS(s,e,n.type_))return Ck(n,s,e);const l=s[e];if(n.finalized_||!hi(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&vk(e))return l;if(l===Cg(n.base_,e)){Mf(n);const c=n.type_===1?+e:e,d=dy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in aa(n)},ownKeys(n){return Reflect.ownKeys(aa(n))},set(n,e,t){const a=KR(aa(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Cg(aa(n),e),l=s==null?void 0:s[er];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(yk(t,s)&&(t!==void 0||fS(n.base_,e,n.type_)))return!0;Mf(n),fy(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),wk(n,e,t)),!0},deleteProperty(n,e){return Mf(n),Cg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),fy(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=aa(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[Of]:!0,[sy]:n.type_!==1||e!=="length",[md]:a[md],[gc]:t[e]}},defineProperty(){si(11)},getPrototypeOf(n){return Ol(n.base_)},setPrototypeOf(){si(12)}},vc={};for(let n in vd){let e=vd[n];vc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}vc.deleteProperty=function(n,e){return vc.set.call(this,n,e,void 0)};vc.set=function(n,e,t){return vd.set.call(this,n[0],e,t,n[0])};function Cg(n,e){const t=n[er];return(t?aa(t):n)[e]}function Ck(n,e,t){var s;const a=KR(e,t);return a?gc in a?a[gc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function KR(n,e){if(!(e in n))return;let t=Ol(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Ol(t)}}function fy(n){n.modified_||(n.modified_=!0,n.parent_&&fy(n.parent_))}function Mf(n){n.copy_||(n.assigned_=new Map,n.copy_=ly(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var Ik=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(ul(e)&&!ul(t)){const l=t;t=e;const c=this;return function(m=l,...g){return c.produce(m,v=>t.call(this,v,...g))}}ul(t)||si(6),a!==void 0&&!ul(a)&&si(7);let s;if(hi(e)){const l=gS(this),c=dy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?cy(l):hy(l)}return pS(l,a),yS(s,l)}else if(!e||!bv(e)){if(s=t(e),s===void 0&&(s=e),s===zR&&(s=void 0),this.autoFreeze_&&Av(s,!0),a){const l=[],c=[];uo(uy).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else si(1,e)},this.produceWithPatches=(e,t)=>{if(ul(e))return(c,...d)=>this.produceWithPatches(c,m=>e(m,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},Rg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),Rg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),Rg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){hi(n)||si(8),pa(n)&&(n=Dk(n));const e=gS(this),t=dy(e,n,void 0);return t[er].isManual_=!0,hy(e),t}finishDraft(n,e){const t=n&&n[er];(!t||!t.isManual_)&&si(9);const{scope_:a}=t;return pS(a,e),yS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=uo(uy).applyPatches_;return pa(n)?a(n,e):this.produce(n,s=>a(s,e))}};function dy(n,e,t,a){const[s,l]=Wd(e)?uo(gd).proxyMap_(e,t):Jd(e)?uo(gd).proxySet_(e,t):Rk(e,t);return((t==null?void 0:t.scope_)??HR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?Ak(t,l,a):l.callbacks_.push(function(m){var v;(v=m.mapSetPlugin_)==null||v.fixSetContents(l);const{patchPlugin_:g}=m;l.modified_&&g&&g.generatePatches_(l,[],m)}),s}function Dk(n){return pa(n)||si(10,n),YR(n)}function YR(n){if(!hi(n)||Zd(n))return n;const e=n[er];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=ly(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=ly(n,!0);return Qd(t,(s,l)=>{pd(t,s,YR(l))},a),e&&(e.finalized_=!1),t}var xk=new Ik,QR=xk.produce;function XR(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var Nk=XR(),Ok=XR,Mk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fd:fd.apply(null,arguments)},Pk=n=>n&&typeof n.match=="function";function nc(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ca(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>pk(a)&&a.type===n,t}var WR=class Ku extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Ku.prototype)}static get[Symbol.species](){return Ku}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Ku(...e[0].concat(this)):new Ku(...e.concat(this))}};function _S(n){return hi(n)?QR(n,()=>{}):n}function yf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Vk(n){return typeof n=="boolean"}var kk=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new WR;return t&&(Vk(t)?c.push(Nk):c.push(Ok(t.extraArgument))),c},Lk="RTK_autoBatch",ES=n=>e=>{setTimeout(e,n)},Uk=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,m=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:ES(10):n.type==="callback"?n.queueNotification:ES(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(v=>v()))};return Object.assign({},a,{subscribe(v){const E=()=>s&&v(),b=a.subscribe(E);return d.add(v),()=>{b(),d.delete(v)}},dispatch(v){var E;try{return s=!((E=v==null?void 0:v.meta)!=null&&E[Lk]),l=!s,l&&(c||(c=!0,m(g))),a.dispatch(v)}finally{s=!0}}})},jk=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new WR(n);return a&&s.push(Uk(typeof a=="object"?a:void 0)),s};function zk(n){const e=kk(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(Tv(t))d=dk(t);else throw new Error(ca(1));let m;typeof a=="function"?m=a(e):m=e();let g=fd;s&&(g=Mk({trace:!1,...typeof s=="object"&&s}));const v=mk(...m),E=jk(v);let b=typeof c=="function"?c(E):E();const C=g(...b);return jR(d,l,C)}function JR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ca(28));if(d in e)throw new Error(ca(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function Bk(n){return typeof n=="function"}function Fk(n,e){let[t,a,s]=JR(e),l;if(Bk(n))l=()=>_S(n());else{const d=_S(n);l=()=>d}function c(d=l(),m){let g=[t[m.type],...a.filter(({matcher:v})=>v(m)).map(({reducer:v})=>v)];return g.filter(v=>!!v).length===0&&(g=[s]),g.reduce((v,E)=>{if(E)if(pa(v)){const C=E(v,m);return C===void 0?v:C}else{if(hi(v))return QR(v,b=>E(b,m));{const b=E(v,m);if(b===void 0){if(v===null)return v;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return v},d)}return c.getInitialState=l,c}var Hk=(n,e)=>Pk(n)?n.match(e):n(e);function qk(...n){return e=>n.some(t=>Hk(t,e))}var Gk="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$k=(n=21)=>{let e="",t=n;for(;t--;)e+=Gk[Math.random()*64|0];return e},Kk=["name","message","stack","code"],Ig=class{constructor(n,e){Qp(this,"_type");this.payload=n,this.meta=e}},TS=class{constructor(n,e){Qp(this,"_type");this.payload=n,this.meta=e}},Yk=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of Kk)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},bS="External signal was aborted",Nr=(()=>{function n(e,t,a){const s=nc(e+"/fulfilled",(m,g,v,E)=>({payload:m,meta:{...E||{},arg:v,requestId:g,requestStatus:"fulfilled"}})),l=nc(e+"/pending",(m,g,v)=>({payload:void 0,meta:{...v||{},arg:g,requestId:m,requestStatus:"pending"}})),c=nc(e+"/rejected",(m,g,v,E,b)=>({payload:E,error:(a&&a.serializeError||Yk)(m||"Rejected"),meta:{...b||{},arg:v,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(m==null?void 0:m.name)==="AbortError",condition:(m==null?void 0:m.name)==="ConditionError"}}));function d(m,{signal:g}={}){return(v,E,b)=>{const C=a!=null&&a.idGenerator?a.idGenerator(m):$k(),L=new AbortController;let j,F;function Q(q){F=q,L.abort()}g&&(g.aborted?Q(bS):g.addEventListener("abort",()=>Q(bS),{once:!0}));const B=(async function(){var G,ae;let q;try{let S=(G=a==null?void 0:a.condition)==null?void 0:G.call(a,m,{getState:E,extra:b});if(Xk(S)&&(S=await S),S===!1||L.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const A=new Promise((R,x)=>{j=()=>{x({name:"AbortError",message:F||"Aborted"})},L.signal.addEventListener("abort",j,{once:!0})});v(l(C,m,(ae=a==null?void 0:a.getPendingMeta)==null?void 0:ae.call(a,{requestId:C,arg:m},{getState:E,extra:b}))),q=await Promise.race([A,Promise.resolve(t(m,{dispatch:v,getState:E,extra:b,requestId:C,signal:L.signal,abort:Q,rejectWithValue:(R,x)=>new Ig(R,x),fulfillWithValue:(R,x)=>new TS(R,x)})).then(R=>{if(R instanceof Ig)throw R;return R instanceof TS?s(R.payload,C,m,R.meta):s(R,C,m)})])}catch(S){q=S instanceof Ig?c(null,C,m,S.payload,S.meta):c(S,C,m)}finally{j&&L.signal.removeEventListener("abort",j)}return a&&!a.dispatchConditionRejection&&c.match(q)&&q.meta.condition||v(q),q})();return Object.assign(B,{abort:Q,requestId:C,arg:m,unwrap(){return B.then(Qk)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:qk(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function Qk(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function Xk(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Wk=Symbol.for("rtk-slice-createasyncthunk");function Jk(n,e){return`${n}/${e}`}function Zk({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Wk];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ca(11));const d=(typeof s.reducers=="function"?s.reducers(tL()):s.reducers)||{},m=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},v={addCase(Y,G){const ae=typeof Y=="string"?Y:Y.type;if(!ae)throw new Error(ca(12));if(ae in g.sliceCaseReducersByType)throw new Error(ca(13));return g.sliceCaseReducersByType[ae]=G,v},addMatcher(Y,G){return g.sliceMatchers.push({matcher:Y,reducer:G}),v},exposeAction(Y,G){return g.actionCreators[Y]=G,v},exposeCaseReducer(Y,G){return g.sliceCaseReducersByName[Y]=G,v}};m.forEach(Y=>{const G=d[Y],ae={reducerName:Y,type:Jk(l,Y),createNotation:typeof s.reducers=="function"};rL(G)?aL(ae,G,v,e):nL(ae,G,v)});function E(){const[Y={},G=[],ae=void 0]=typeof s.extraReducers=="function"?JR(s.extraReducers):[s.extraReducers],S={...Y,...g.sliceCaseReducersByType};return Fk(s.initialState,A=>{for(let R in S)A.addCase(R,S[R]);for(let R of g.sliceMatchers)A.addMatcher(R.matcher,R.reducer);for(let R of G)A.addMatcher(R.matcher,R.reducer);ae&&A.addDefaultCase(ae)})}const b=Y=>Y,C=new Map,L=new WeakMap;let j;function F(Y,G){return j||(j=E()),j(Y,G)}function Q(){return j||(j=E()),j.getInitialState()}function B(Y,G=!1){function ae(A){let R=A[Y];return typeof R>"u"&&G&&(R=yf(L,ae,Q)),R}function S(A=b){const R=yf(C,G,()=>new WeakMap);return yf(R,A,()=>{const x={};for(const[N,M]of Object.entries(s.selectors??{}))x[N]=eL(M,A,()=>yf(L,A,Q),G);return x})}return{reducerPath:Y,getSelectors:S,get selectors(){return S(ae)},selectSlice:ae}}const q={name:l,reducer:F,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:Q,...B(c),injectInto(Y,{reducerPath:G,...ae}={}){const S=G??c;return Y.inject({reducerPath:S,reducer:F},ae),{...q,...B(S,!0)}}};return q}}function eL(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var go=Zk();function tL(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function nL({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!iL(a))throw new Error(ca(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?nc(n,c):nc(n))}function rL(n){return n._reducerDefinitionType==="asyncThunk"}function iL(n){return n._reducerDefinitionType==="reducerWithPrepare"}function aL({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ca(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:m,settled:g,options:v}=t,E=s(n,l,v);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),m&&a.addCase(E.rejected,m),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||vf,pending:d||vf,rejected:m||vf,settled:g||vf})}function vf(){}function ca(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const sL={positions:[],loading:!1,error:null,fetched:!1},ro=Nr("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Yr(wn,"metadata","positions"),a=await kc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),ZR=Nr("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Yr(wn,"metadata","positions");return await qd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),oL=go({name:"positions",initialState:sL,reducers:{},extraReducers:n=>{n.addCase(ro.pending,e=>{e.loading=!0,e.error=null}).addCase(ro.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(ro.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ZR.fulfilled,(e,t)=>{e.positions=t.payload})}}),lL=oL.reducer,uL={teams:[],loading:!1,error:null,fetched:!1},_l=Nr("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Yr(wn,"metadata","teams"),a=await kc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),Pf=Nr("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Yr(wn,"metadata","teams");return await qd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),e1=go({name:"teams",initialState:uL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(_l.pending,e=>{e.loading=!0,e.error=null}).addCase(_l.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(_l.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Pf.pending,e=>{e.error=null}).addCase(Pf.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(Pf.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:ZU}=e1.actions,cL=e1.reducer,hL=()=>{const n=fi(),{firebaseUser:e,userData:t,loading:a}=pt(m=>m.auth),{fetched:s,loading:l}=pt(m=>m.teams),{fetched:c,loading:d}=pt(m=>m.positions);return P.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(_l()),!c&&!d&&n(ro()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?w.jsx(Nl,{}):e?t?t.isApproved?w.jsx(oA,{}):w.jsx(ss,{to:"/guest",replace:!0}):w.jsx(Nl,{}):w.jsx(ss,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SS=n=>{const e=dL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=P.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},m)=>P.createElement("svg",{ref:m,...mL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:t1("lucide",s),...!l&&!pL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,v])=>P.createElement(g,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=(n,e)=>{const t=P.forwardRef(({className:a,...s},l)=>P.createElement(gL,{ref:l,iconNode:e,className:t1(`lucide-${fL(SS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=SS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],n1=yo("chevron-up",yL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_L=yo("copy",vL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],r1=yo("corner-down-right",EL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],bL=yo("moon",TL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],AL=yo("panel-left-close",SL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],RL=yo("panel-left-open",wL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],IL=yo("sun",CL),DL=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},xL={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:DL(),lastVisitedPaths:{}},i1=go({name:"ui",initialState:xL,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:Yu,setDesktopSidebarExpanded:NL,setLastVisitedPath:OL,toggleTeamExpansion:ML,toggleUserVisibility:PL}=i1.actions,VL=i1.reducer,kL=()=>{const n=P.useContext(UR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},LL="_themeToggleButton_yikav_1",UL={themeToggleButton:LL},tm=({showText:n,className:e})=>{const{theme:t,toggleTheme:a}=kL();return w.jsxs("button",{className:`${UL.themeToggleButton} ${e||""}`,onClick:a,"aria-label":"Toggle theme",children:[t==="dark"?w.jsx(IL,{size:20}):w.jsx(bL,{size:20}),n&&w.jsx("span",{children:"Toggle theme"})]})},jL="_mobileHeader_rrb9m_1",zL="_mobileHeaderPill_rrb9m_16",BL="_mobileHeaderPillDisabled_rrb9m_28",FL="_mobileHeaderPillActive_rrb9m_32",HL="_mobileHeaderText_rrb9m_43",qL="_mobileHeaderChevron_rrb9m_51",GL="_rotate_rrb9m_56",Qs={mobileHeader:jL,mobileHeaderPill:zL,mobileHeaderPillDisabled:BL,mobileHeaderPillActive:FL,mobileHeaderText:HL,mobileHeaderChevron:qL,rotate:GL},$L=({title:n,hasSideNav:e=!0})=>{const t=fi(),{isMobileSidebarOpen:a}=pt(l=>l.ui),s=()=>{e&&t(Yu(!a))};return w.jsxs("header",{className:Qs.mobileHeader,children:[w.jsxs("div",{className:`${Qs.mobileHeaderPill} ${a?Qs.mobileHeaderPillActive:""} ${e?"":Qs.mobileHeaderPillDisabled}`,onClick:s,children:[w.jsx("span",{className:Qs.mobileHeaderText,children:n}),e&&w.jsx(n1,{className:`${Qs.mobileHeaderChevron} ${a?Qs.rotate:""}`})]}),w.jsx(tm,{})]})};var Zt=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(Zt||{}),hl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(hl||{});const wv=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],AS=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],KL=()=>{const n=ho(),e=Xr(),{lastVisitedPaths:t}=pt(l=>l.ui),a=e.pathname.includes("/settings")?Zt.SETTINGS:e.pathname.includes("/dashboard")?Zt.DASHBOARD:Zt.ROSTER,s=l=>{if(a===l){l===Zt.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return w.jsx("nav",{className:"bottom-nav-container",children:w.jsx("div",{className:"bottom-nav",children:wv.map(l=>w.jsxs("button",{className:`bottom-nav-btn ${a===l.id?"bottom-nav-btn-active":""}`,onClick:()=>s(l.id),children:[w.jsx("span",{children:l.icon}),w.jsx("span",{children:l.label})]},l.id))})})},YL=()=>{var q;const n=ho(),e=Xr(),t=Sd(),a=fi(),{userData:s}=pt(Y=>Y.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=pt(Y=>Y.ui),{teams:d,fetched:m,loading:g}=pt(Y=>Y.teams),{fetched:v}=pt(Y=>Y.positions),E=e.pathname.includes("/settings")?Zt.SETTINGS:e.pathname.includes("/dashboard")?Zt.DASHBOARD:Zt.ROSTER,{teamName:b,positionName:C,section:L}=t,j=C||L;P.useEffect(()=>{m||a(_l()),v||a(ro())},[a,m,v]);const F=P.useCallback(Y=>{n(Y)},[n]),Q=Y=>{a(ML(Y))},B=()=>{const Y=wv.find(ae=>ae.id===E),G=Y?Y.label:"GIG ROSTER";return b&&j?`${b}  ${j}`:b||(j?`${G}  ${j}`:G)};return w.jsxs("aside",{className:"side-nav",children:[w.jsxs("div",{className:"sidebar-content",children:[w.jsxs("div",{className:"tablet-sidebar-header",children:[l&&w.jsx("h3",{children:B()}),w.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(NL(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?w.jsx(AL,{size:20}):w.jsx(RL,{size:20})})]}),w.jsxs("nav",{className:"side-menu-list",children:[E===Zt.ROSTER&&g&&w.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===Zt.ROSTER?(q=s==null?void 0:s.teams)==null?void 0:q.map(Y=>{var A,R;const G=d.find(x=>x.name===Y);if(!G)return null;const ae=s.teams.length===1,S=ae||c.includes(G.name);return w.jsxs("div",{children:[!ae&&w.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>Q(G.name),children:[w.jsxs("div",{children:[G.emoji," ",l&&G.name]}),w.jsx("span",{className:"expand-icon",children:S?"":""})]}),S&&w.jsxs("div",{className:"side-nav-sub-items",children:[(R=(A=G.positions)==null?void 0:A.filter(x=>!x.parentId))==null?void 0:R.map(x=>{const N=j===x.name&&b===G.name;return w.jsxs("button",{className:`side-nav-item side-nav-item-sub ${N?"side-nav-item-active":""}`,onClick:()=>{F(`/app/roster/${G.name}/${x.name}`),a(Yu(!1))},style:{borderLeft:N?`4px solid ${x.colour}`:"4px solid transparent",backgroundColor:N?`${x.colour}15`:"transparent",color:N?x.colour:""},children:[w.jsx("span",{className:"side-emoji",children:x.emoji})," ",l&&x.name]},x.name)}),w.jsxs("button",{className:`side-nav-item side-nav-item-sub ${j==="Absence"&&b===G.name?"side-nav-item-active":""}`,onClick:()=>{F(`/app/roster/${G.name}/Absence`),a(Yu(!1))},style:{borderLeft:j==="Absence"&&b===G.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:j==="Absence"&&b===G.name?"var(--background-toggle-off-transparent)":"transparent"},children:[w.jsx("span",{className:"side-emoji",children:""})," ",l&&"Absence"]})]})]},G.name)}):AS.filter(Y=>!Y.adminOnly).map(Y=>w.jsxs("button",{className:`side-nav-item ${j===Y.id?"side-nav-item-active":""}`,onClick:()=>{F(`/app/settings/${Y.id}`),a(Yu(!1))},children:[w.jsx("span",{className:"side-emoji",children:Y.icon})," ",l&&Y.label]},Y.id))]})]}),(s==null?void 0:s.isAdmin)&&E===Zt.SETTINGS&&w.jsxs("div",{className:"admin-only-section-wrapper",children:[w.jsx("div",{className:"sidenav-menu-subheading",children:l&&w.jsx("h4",{children:"Admin Only"})}),AS.filter(Y=>Y.adminOnly).map(Y=>w.jsxs("button",{className:`side-nav-item ${j===Y.id?"side-nav-item-active":""}`,onClick:()=>{F(`/app/settings/${Y.id}`),a(Yu(!1))},children:[w.jsx("span",{className:"side-emoji",children:Y.icon})," ",l&&Y.label]},Y.id))]}),w.jsx("div",{className:"sidebar-footer",children:w.jsx(tm,{showText:l})})]})},QL=()=>{const n=fi(),e=ho(),t=Xr(),a=Sd(),{userData:s}=pt(Q=>Q.auth),{teams:l}=pt(Q=>Q.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:m}=pt(Q=>Q.ui),g=t.pathname.includes("/settings")?Zt.SETTINGS:t.pathname.includes("/dashboard")?Zt.DASHBOARD:Zt.ROSTER,{teamName:v,positionName:E,section:b}=a,C=E||b||null,L=g!==Zt.DASHBOARD;P.useEffect(()=>{const Q=g===Zt.ROSTER&&!v,B=g===Zt.SETTINGS&&!C;if(t.pathname.startsWith("/app/")&&!Q&&!B&&g!==Zt.DASHBOARD){const q=t.pathname+t.search;n(OL({tabId:g,path:q}))}},[t.pathname,t.search,g,v,C,n]),P.useEffect(()=>{var Y,G;const Q=t.pathname==="/app"||t.pathname==="/app/",B=g===Zt.ROSTER&&!v,q=g===Zt.SETTINGS&&!C;if(Q)e(m[Zt.DASHBOARD]||"/app/dashboard",{replace:!0});else if(B){const ae=m[Zt.ROSTER];if(ae)e(ae,{replace:!0});else if((Y=s==null?void 0:s.teams)!=null&&Y[0]&&l.length>0){const S=l.find(A=>A.name===s.teams[0]);(G=S==null?void 0:S.positions)!=null&&G[0]&&e(`/app/roster/${S.name}/${S.positions[0].name}`,{replace:!0})}}else if(q){const ae=m[Zt.SETTINGS];e(ae||`/app/settings/${hl.PROFILE}`,{replace:!0})}},[g,v,C,s,l,e,t.pathname,t.search,m]);const j=()=>{const Q=wv.find(q=>q.id===g),B=Q?Q.label:"GIG ROSTER";return v&&C?`${v}  ${C}`:v||(C?`${B}  ${C}`:B)},F=["app-shell",c?"menu-open":"",d?"sidebar-expanded":"sidebar-collapsed",L?"":"no-sidebar"].filter(Boolean).join(" ");return w.jsxs(w.Fragment,{children:[w.jsx($L,{title:j(),hasSideNav:L}),w.jsxs("div",{className:F,children:[L&&w.jsx(YL,{}),w.jsx("main",{className:"main-content",children:w.jsx("div",{className:"content-container",children:w.jsx(oA,{})})}),w.jsx(KL,{})]})]})},XL="_rosterSaveFooter_xkueo_1",WL="_saveFooterContent_xkueo_23",JL="_changesLabel_xkueo_32",ZL="_saveFooterActions_xkueo_37",eU="_saveBtn_xkueo_42",tU="_cancelBtn_xkueo_57",nU="_sidebarCollapsed_xkueo_77",rU="_noSidebar_xkueo_81",Ja={rosterSaveFooter:XL,saveFooterContent:WL,changesLabel:JL,saveFooterActions:ZL,saveBtn:eU,cancelBtn:tU,sidebarCollapsed:nU,noSidebar:rU},Fl=({label:n="You have unsaved changes",onSave:e,onCancel:t,isSaving:a,saveText:s="Save",discardText:l="Discard",hasSideNav:c=!0})=>{const{isDesktopSidebarExpanded:d}=pt(g=>g.ui),m=[Ja.rosterSaveFooter,c?"":Ja.noSidebar,!d&&c?Ja.sidebarCollapsed:""].filter(Boolean).join(" ");return w.jsx("div",{className:m,children:w.jsxs("div",{className:Ja.saveFooterContent,children:[w.jsx("span",{className:Ja.changesLabel,children:n}),w.jsxs("div",{className:Ja.saveFooterActions,children:[w.jsx("button",{className:Ja.cancelBtn,onClick:t,disabled:a,children:l}),w.jsx("button",{className:Ja.saveBtn,onClick:e,disabled:a,children:a?"Saving...":s})]})]})})},a1=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},s1=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},El=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),iU={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},rc=Nr("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Vc(Oc(wn,"roster")),a=await Lc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,m={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...m,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),ic=Nr("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=sR(wn),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Yr(wn,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),o1=go({name:"roster",initialState:iU,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let m;d?m=JSON.parse(JSON.stringify(d)):m={id:t,date:t,teams:{},absence:{}},m.teams[a]||(m.teams[a]={});const g=m.teams[a][s]||[],v=l.findIndex(L=>g.includes(L)),E=v>=0?l[v]:null;let b=null;E===null?b=l[0]:v<l.length-1?b=l[v+1]:b=null;const C=g.filter(L=>!l.includes(L));if(b)if(C.length<c)C.push(b);else{n.error=`User already has ${c} assignment(s) in this team.`;return}C.length===0?delete m.teams[a][s]:m.teams[a][s]=C,n.dirtyEntries[t]=m},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var m;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((m=d.absence[a])==null?void 0:m.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(rc.pending,e=>{e.loading=!0,e.error=null}).addCase(rc.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(rc.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(ic.pending,e=>{e.saving=!0,e.error=null}).addCase(ic.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(ic.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:e3,updateLocalAssignment:aU,updateLocalEventName:sU,resetRosterEdits:l1,updateLocalAbsence:wS}=o1.actions,oU=o1.reducer,Vf=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,m={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(C=>m[C]);let v;c===l?v=new Date(s):v=new Date(c,0,1),v.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const b=new Date(v);for(;b.getTime()<=E.getTime();)g.includes(b.getDay())&&a.push(new Date(b)),b.setDate(b.getDate()+1);return a.sort((C,L)=>C.getTime()-L.getTime()),a.map(C=>s1(C))},lU=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(m=>l[m]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const m=new Date(s);if(m.setFullYear(m.getFullYear()-1),d<m)break}return a.map(m=>s1(m)).sort()},uU={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},kf=Nr("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Oc(wn,"users"),a=Vc(t,lv("teams","array-contains",n)),s=await Lc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Lf=Nr("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(C=>C.parentId===e),m=[e,...c.map(C=>C.name)].map(C=>`${n}|${C}`),g=Oc(wn,"users"),v=Vc(g,lv("indexedAssignments","array-contains-any",m)),E=await Lc(v),b=[];return E.forEach(C=>{b.push(C.data())}),b.sort((C,L)=>(C.name||"").localeCompare(L.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Uf=Nr("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Yr(wn,"metadata","teams"),a=await kc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),u1=go({name:"rosterView",initialState:uU,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=lU(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Vf(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Vf(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(Lf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Lf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Lf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(kf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(kf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(kf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Uf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Uf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Vf(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Uf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:cU,resetToUpcomingDates:hU,loadNextYearDates:fU}=u1.actions,dU=u1.reducer,mU=()=>{const n=fi(),[e,t]=qx(),a=e.get("date"),{userData:s}=pt($=>$.auth),{teams:l}=pt($=>$.teams),{entries:c,dirtyEntries:d,loading:m,saving:g}=pt($=>$.roster),{positions:v}=pt($=>$.positions),[E,b]=P.useState([]),[C,L]=P.useState(!1),[j,F]=P.useState(0),[Q,B]=P.useState(0),[q,Y]=P.useState(!1),G=P.useRef(null),ae=P.useRef(!1),S=Object.keys(d).length>0;P.useEffect(()=>{n(rc())},[n]),P.useEffect(()=>{const $=G.current;if(!$)return;const oe=new ResizeObserver(ce=>{for(const pe of ce){const Ee=pe.contentRect.width;Ee>0&&B(Ee)}});return oe.observe($),()=>oe.disconnect()},[m,C]);const A=P.useMemo(()=>{const $=El();if(!(s!=null&&s.teams)||l.length===0)return[];const oe=l.filter(Ee=>s.teams.includes(Ee.name)),ce=new Set;oe.forEach(Ee=>{Vf(Ee.preferredDays).forEach(Ke=>ce.add(Ke))});const pe=Array.from(ce).sort();return a&&a<$?[a]:pe.filter(Ee=>{const Ue=Ee;if(a===Ue)return!0;const Ke=c[Ue]||d[Ue];return Ke?oe.some(ot=>{var Rn;const $t=((Rn=Ke.teams)==null?void 0:Rn[ot.name])||{};return Object.values($t).some(Et=>Et.length>0)}):!1})},[s,l,c,d,a]);P.useEffect(()=>{if(A.length===0||!G.current||m||Q===0)return;const $=G.current,oe=(ce,pe)=>{const Ee=$.offsetWidth||Q;Ee!==0&&($.style.scrollSnapType="none",$.scrollTo({left:Ee*ce,behavior:pe?"smooth":"auto"}),setTimeout(()=>{$&&($.style.scrollSnapType="x mandatory"),Y(!0)},50),F(ce),ae.current=!0)};if(a){const ce=A.findIndex(pe=>pe===a);if(ce>=0){const pe=Math.round($.scrollLeft/($.offsetWidth||Q||1));!ae.current||pe!==ce?requestAnimationFrame(()=>{oe(ce,ae.current)}):Y(!0)}else Y(!0)}else $.scrollLeft!==0?oe(0,!0):Y(!0),ae.current=!0},[a,A,m,Q]);const R=()=>{t({},{replace:!0})};P.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){L(!0);try{const oe=Oc(wn,"users"),ce=Vc(oe,lv("teams","array-contains-any",s.teams)),pe=await Lc(ce),Ee=[];pe.forEach(Ue=>Ee.push(Ue.data())),b(Ee)}catch(oe){console.error("Error fetching users for dashboard:",oe)}finally{L(!1)}}})()},[s==null?void 0:s.teams]);const x=P.useCallback($=>{if(!$||!(s!=null&&s.teams)||l.length===0)return null;const oe=$,ce=d[oe]||c[oe],Ue=l.filter(Ke=>s.teams.includes(Ke.name)).map(Ke=>{var En;const ot=((En=ce==null?void 0:ce.teams)==null?void 0:En[Ke.name])||{},$t=[],Rn=Ke.positions.map(Kt=>Kt.name);let Et=0;return Rn.forEach(Kt=>{const ne=v.find(we=>we.name===Kt),ge=[];Object.entries(ot).forEach(([we,Ae])=>{if(Ae.includes(Kt)){const Fe=E.find(Vt=>Vt.email===we);Fe?ge.push(Fe):ge.push({email:we,name:we}),Et++}});const Ve=[...ge].sort((we,Ae)=>ne!=null&&ne.sortByGender&&we.gender!==Ae.gender?we.gender==="Male"?-1:Ae.gender==="Male"?1:(we.gender||"").localeCompare(Ae.gender||""):(we.name||"").localeCompare(Ae.name||""));$t.push({posName:Kt,emoji:(ne==null?void 0:ne.emoji)||"",names:Ve.map(we=>we.name||we.email||"Unknown")})}),{teamName:Ke.name,teamEmoji:Ke.emoji,positions:$t,hasAssignments:Et>0}}).filter(Ke=>Ke.hasAssignments);return Ue.length>0?Ue:null},[c,d,s,l,v,E]),N=($,oe,ce,pe)=>{let Ke=`${new Date($).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})} - ${ce} ${oe}
`;pe.forEach(ot=>{const $t=ot.names.length>0?ot.names.join(", "):"-";Ke+=`${ot.emoji}: ${$t}
`}),navigator.clipboard.writeText(Ke).then(()=>{})},M=()=>{if(!G.current)return;const $=G.current,oe=$.offsetWidth,ce=Math.round($.scrollLeft/oe);if(ce!==j&&A[ce]){F(ce);const pe=A[ce];if(a!==pe){const Ee=El();ce===0&&Ee===pe?t({},{replace:!0}):t({date:pe},{replace:!0})}}},O=($,oe)=>{n(sU({date:$,eventName:oe}))},be=()=>{n(ic(d))},ke=()=>{n(l1())};if(m||C)return w.jsx(Bl,{});if(A.length===0)return w.jsxs("div",{className:"dashboard-empty",children:[w.jsx("h2",{children:"No upcoming events found"}),w.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const X=A[j],de=El(),ye=X&&X<de,Le=ye?"Previous Event":"Upcoming Events",Pe=$=>new Date($).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),U=($,oe=!1)=>{const ce=x($);return ce?w.jsx("div",{className:"team-cards-container",children:ce.map(pe=>w.jsxs("div",{className:"team-event-card",children:[w.jsxs("div",{className:"team-event-header",children:[w.jsxs("h3",{children:[w.jsx("span",{className:"team-card-emoji",children:pe.teamEmoji}),w.jsx("span",{className:"team-card-name",children:pe.teamName})]}),!oe&&w.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[w.jsx(tm,{className:"dashboard-theme-toggle"}),w.jsxs("button",{className:"copy-roster-btn",onClick:()=>N($,pe.teamName,pe.teamEmoji,pe.positions),title:"Copy to clipboard",children:[w.jsx(_L,{size:16})," Copy"]})]})]}),w.jsx("div",{className:"team-event-details",children:pe.positions.map(Ee=>w.jsxs("div",{className:"pos-assignment-row",children:[w.jsx("span",{className:"pos-emoji-label",title:Ee.posName,children:Ee.emoji}),w.jsx("span",{className:`assigned-names ${Ee.names.length===0?"unassigned":""}`,children:Ee.names.length>0?Ee.names.join(", "):"Unassigned"})]},Ee.posName))})]},pe.teamName))}):null};return w.jsxs("div",{className:"dashboard-container",children:[w.jsxs("div",{className:"dashboard-header",children:[w.jsx("h1",{children:Le}),w.jsx("div",{className:"dashboard-header-actions",children:ye&&w.jsx("button",{className:"clear-past-btn",onClick:R,children:"Reset to upcoming"})})]}),w.jsx("div",{className:"carousel-outer-wrapper",style:{opacity:q?1:0,transition:"opacity 0.3s ease-in-out"},children:w.jsx("div",{className:"events-carousel-track",ref:G,onScroll:M,children:A.map(($,oe)=>{const ce=$,pe=d[ce]||c[ce],Ee=(pe==null?void 0:pe.eventName)||"";return w.jsxs("div",{className:`event-card-wrapper ${oe===j?"active":"peek"}`,children:[w.jsx("div",{className:"event-name-container",children:w.jsx("input",{type:"text",className:`dashboard-event-name-input ${Ee?"dashboard-event-name-input--has-event":""}`,placeholder:"Event name (e.g. Easter Sunday)",value:Ee,onChange:Ue=>O($,Ue.target.value),disabled:oe!==j})}),w.jsxs("div",{className:"event-card-date",children:[Pe($),$===de&&w.jsx("span",{className:"dashboard-today-badge",children:"TODAY"})]}),U($,oe!==j)]},$)})})}),w.jsxs("div",{className:"carousel-pagination",children:[j+1," / ",A.length]}),S&&w.jsx(Fl,{label:"Unsaved event labels",saveText:"Save Changes",onSave:be,onCancel:ke,isSaving:g,hasSideNav:!1})]})},pU="_pillGroup_xxef2_1",gU="_pillGroupNowrap_xxef2_9",yU="_pill_xxef2_1",vU="_pillActive_xxef2_32",_U="_pillDisabled_xxef2_37",EU="_pillText_xxef2_58",fl={pillGroup:pU,pillGroupNowrap:gU,pill:yU,pillActive:vU,pillDisabled:_U,pillText:EU},Di=({children:n,nowrap:e})=>w.jsx("div",{className:`${fl.pillGroup} ${e?fl.pillGroupNowrap:""}`,children:n}),Zn=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,m]=P.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),w.jsxs("div",{className:`${fl.pill} ${fl.pillText} ${t?fl.pillActive:""} ${a?fl.pillDisabled:""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(m(v=>!v),l&&l(g))},children:[c,e&&w.jsx(n1,{style:{rotate:d?"90deg":"0"}})]})},TU={firebaseUser:null,userData:null,loading:!0,error:null},jf=Nr("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Yr(wn,"users",n),a=await kc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=xl.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await ZP(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),zf=Nr("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Yr(wn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=a1(s.teamPositions)),await qd(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),c1=go({name:"auth",initialState:TU,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(jf.pending,e=>{e.loading=!0,e.error=null}).addCase(jf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(jf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(zf.pending,e=>{e.error=null}).addCase(zf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(zf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:bU,setUserData:SU,setLoading:t3,logout:AU}=c1.actions,wU=c1.reducer,h1=()=>{const n=fi(),{userData:e,firebaseUser:t}=pt(G=>G.auth),a=pt(G=>G.teams.teams),[s,l]=P.useState((e==null?void 0:e.name)||""),[c,d]=P.useState((e==null?void 0:e.gender)||""),[m,g]=P.useState((e==null?void 0:e.isActive)??!0),[v,E]=P.useState((e==null?void 0:e.teams)||[]),[b,C]=P.useState((e==null?void 0:e.teamPositions)||{}),[L,j]=P.useState("idle"),F=P.useMemo(()=>{if(!e)return!1;const G={name:s,gender:c,isActive:m,teams:v,teamPositions:b},ae={name:e.name||"",gender:e.gender||"",isActive:e.isActive??!0,teams:e.teams||[],teamPositions:e.teamPositions||{}};return JSON.stringify(G)!==JSON.stringify(ae)},[s,c,m,v,b,e]),Q=async()=>{if(t){j("saving");try{const G={name:s,gender:c,isActive:m,teams:v,teamPositions:b};await n(zf({uid:t.uid,data:G})).unwrap(),j("success"),setTimeout(()=>j("idle"),2e3)}catch(G){console.error(G),j("idle")}}},B=()=>{e&&(l(e.name||""),d(e.gender||""),g(e.isActive??!0),E(e.teams||[]),C(e.teamPositions||{}))},q=G=>{E(ae=>{const S=ae.includes(G),A=S?ae.filter(R=>R!==G):[...ae,G];return C(R=>{const x={...R};return S?delete x[G]:x[G]||(x[G]=[]),x}),A})},Y=(G,ae)=>{C(S=>{const A=S[G]||[],R=A.includes(ae)?A.filter(x=>x!==ae):[...A,ae];return{...S,[G]:R}})};return e?w.jsxs("section",{className:"profile-card",children:[w.jsx("div",{className:"profile-readonly",children:w.jsxs("p",{children:[w.jsx("strong",{children:"Email:"})," ",e.email]})}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Name"}),w.jsx(Di,{children:w.jsx("input",{type:"text",value:s,onChange:G=>l(G.target.value),className:"form-input form-input-width-auto"})})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Gender"}),w.jsx(Di,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(G=>w.jsx(Zn,{colour:G.colour,onClick:()=>d(G.value),isActive:c===G.value,children:G.value},G.value))})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"My Teams"}),w.jsx(Di,{children:a.map(G=>{const ae=v.includes(G.name);return w.jsxs(Zn,{onClick:()=>q(G.name),isActive:ae,children:[w.jsx("span",{children:G.emoji})," ",G.name]},G.name)})})]}),v.length>0&&w.jsxs("div",{className:"team-positions-section",children:[w.jsx("label",{className:"section-label",children:"Positions per Team"}),v.map(G=>{var S,A;const ae=a.find(R=>R.name===G);return ae?w.jsxs("div",{className:"team-position-group",children:[w.jsxs("div",{className:"team-position-header",children:[ae.emoji," ",ae.name]}),w.jsx(Di,{children:(A=(S=ae.positions)==null?void 0:S.filter(R=>!R.parentId))==null?void 0:A.map(R=>{var N;const x=(N=b[G])==null?void 0:N.includes(R.name);return w.jsxs(Zn,{onClick:()=>Y(G,R.name),isActive:x,colour:R.colour,children:[w.jsx("span",{children:R.emoji})," ",R.name]},R.name)})})]},G):null})]}),w.jsxs("div",{className:"form-group",children:[w.jsx("label",{children:"Availability Status"}),w.jsx(Zn,{colour:m?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!m),isActive:!0,children:m?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),w.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),w.jsx("div",{className:"action-container",children:w.jsx("button",{onClick:()=>xl.signOut(),className:"logout-btn",children:"Logout"})}),F&&w.jsx(Fl,{label:"Unsaved profile changes",saveText:"Update Profile",onSave:Q,onCancel:B,isSaving:L==="saving"})]}):w.jsx("div",{children:"Loading profile..."})},RU=()=>{const{userData:n,firebaseUser:e,loading:t}=pt(a=>a.auth);return t?w.jsx(Nl,{}):e?n?n.isApproved?w.jsx(ss,{to:"/app",replace:!0}):w.jsxs("div",{className:"guest-container",children:[w.jsxs("header",{className:"guest-header",children:[w.jsx("h2",{className:"brand-title",children:"God is Good"}),w.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),w.jsx("div",{className:"guest-theme-toggle-container",children:w.jsx(tm,{})})]}),w.jsx(h1,{})]}):w.jsx(Nl,{}):w.jsx(ss,{to:"/login",replace:!0})},CU=()=>{const{firebaseUser:n,loading:e}=pt(a=>a.auth),t=()=>c4(xl,ak);return e?null:n?w.jsx(ss,{to:"/",replace:!0}):w.jsxs("div",{className:"login-container",children:[w.jsxs("header",{className:"login-header",children:[w.jsx("h1",{className:"brand-title",children:"God is Good"}),w.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),w.jsx("div",{className:"login-button-container",children:w.jsxs("button",{onClick:t,className:"login-button google",children:[w.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},IU=()=>{const n=fi(),e=ho(),{teamName:t,positionName:a}=Sd(),{users:s,allTeamUsers:l,rosterDates:c,currentTeamData:d,loadingUsers:m,loadingTeam:g,loadingAllTeamUsers:v,error:E}=pt(ne=>ne.rosterView),{entries:b,dirtyEntries:C,saving:L,error:j}=pt(ne=>ne.roster),{teams:F}=pt(ne=>ne.teams),{positions:Q}=pt(ne=>ne.positions),{hiddenUsers:B}=pt(ne=>ne.ui),[q,Y]=P.useState(null),[G,ae]=P.useState(null),S=Object.keys(C).length>0,A=P.useMemo(()=>Q.find(ne=>ne.name===a),[Q,a]),R=P.useMemo(()=>d?d.positions.filter(ne=>ne.name!==a):[],[d,a]),x=P.useMemo(()=>{var ne;return!t||!a?[]:((ne=B[t])==null?void 0:ne[a])||[]},[B,t,a]),N=P.useMemo(()=>{const ne=s.filter(ge=>ge.email&&!x.includes(ge.email)&&ge.isActive);return A!=null&&A.sortByGender?ne.sort((ge,Ve)=>ge.gender===Ve.gender?(ge.name||"").localeCompare(Ve.name||""):ge.gender==="Male"?-1:Ve.gender==="Male"?1:(ge.gender||"").localeCompare(Ve.gender||"")):ne},[s,A,x]),M=P.useMemo(()=>{if(!(A!=null&&A.sortByGender)||N.length===0)return-1;const ne=N.findIndex(ge=>ge.gender==="Female");return ne>0&&ne<N.length?ne:-1},[A,N]),O=ne=>{!t||!a||n(PL({teamName:t,positionName:a,userEmail:ne}))},be=()=>{n(cU())},ke=()=>{n(hU())},X=()=>{n(fU())},de=ne=>{ye(ne)&&e(`/app/dashboard?date=${ne}`)},ye=P.useCallback(ne=>{const ge=ne.split("T")[0],Ve=C[ge]||b[ge];return Ve?Object.values(Ve.teams).some(we=>Object.values(we).some(Ae=>Ae.length>0)):!1},[b,C]),Le=P.useCallback(ne=>{if(!G||!t)return[];const ge=ne.split("T")[0],Ve=C[ge]||b[ge];return!Ve||!Ve.teams[t]?[]:Object.entries(Ve.teams[t]).filter(([,we])=>we.includes(G)).map(([we])=>{const Ae=l.find(Fe=>Fe.email===we);return(Ae==null?void 0:Ae.name)||we})},[G,t,C,b,l]);P.useEffect(()=>{n(rc())},[n]),P.useEffect(()=>{a&&t&&a!=="Absence"&&n(Lf({teamName:t,positionName:a}))},[a,t,n]),P.useEffect(()=>{t&&(n(Uf(t)),n(kf(t)))},[t,n]);const Pe=P.useCallback((ne,ge)=>{const Ve=ne,we=C[Ve]||b[Ve];return!!(we&&we.absence&&we.absence[ge])},[C,b]),U=P.useCallback((ne,ge)=>{var Ae,Fe;const Ve=ne,we=C[Ve]||b[Ve];return((Fe=(Ae=we==null?void 0:we.absence)==null?void 0:Ae[ge])==null?void 0:Fe.reason)||""},[C,b]),$=P.useCallback((ne,ge)=>{if(!t||!a||a==="Absence")return!1;if(Pe(ne,ge))return!0;const Ve=ne,we=C[Ve]||b[Ve],Ae=F.find(It=>It.name===t),Fe=(Ae==null?void 0:Ae.maxConflict)||1;if(!we||!we.teams[t]||!we.teams[t][ge])return!1;const Vt=we.teams[t][ge],wt=Q.filter(It=>It.parentId===a),je=[a,...wt.map(It=>It.name)];return Vt.some(It=>je.includes(It))?!1:Vt.length>=Fe},[t,a,Pe,C,b,F,Q]),oe=P.useCallback((ne,ge,Ve,we)=>{if(!t||!a||a==="Absence"||$(ne,ge)){Y({row:Ve,col:we,table:"roster"});return}Y({row:Ve,col:we,table:"roster"});const Ae=F.find(je=>je.name===t),Fe=(Ae==null?void 0:Ae.maxConflict)||1,Vt=Q.filter(je=>je.parentId===a),wt=[a,...Vt.map(je=>je.name)];n(aU({date:ne,teamName:t,userIdentifier:ge,positionGroupNames:wt,maxConflict:Fe}))},[n,t,a,$,F,Q]),ce=P.useCallback((ne,ge,Ve,we)=>{Y({row:Ve,col:we,table:"absence"});const Ae=Pe(ne,ge);n(wS({date:ne,userIdentifier:ge,isAbsent:!Ae}))},[n,Pe]),pe=P.useCallback((ne,ge,Ve)=>{n(wS({date:ne,userIdentifier:ge,reason:Ve,isAbsent:!0}))},[n]),Ee=P.useCallback(()=>{n(ic(C))},[n,C]),Ue=P.useCallback(()=>{n(l1()),Y(null)},[n]),Ke=(ne,ge)=>{var Vt;const Ve=ne,we=C[Ve]||b[Ve];if(!we||!t)return"";const Ae=((Vt=we.teams[t])==null?void 0:Vt[ge])||[],Fe=[];return Object.entries(we.teams).forEach(([wt,je])=>{wt!==t&&je[ge]&&Fe.push({team:wt,positions:je[ge]})}),Ae.length===0&&Fe.length===0?"":w.jsxs("div",{className:"assigned-positions",children:[Ae.map(wt=>{const je=Q.find(Ye=>Ye.name===wt);return w.jsx("span",{title:`${t}: ${wt}`,className:"pos-emoji",children:(je==null?void 0:je.emoji)||""},wt)}),Fe.map(wt=>wt.positions.map(je=>{const Ye=Q.find(It=>It.name===je);return w.jsx("span",{title:`${wt.team}: ${je}`,className:"pos-emoji other-team-emoji",children:(Ye==null?void 0:Ye.emoji)||""},`${wt.team}-${je}`)}))]})};P.useEffect(()=>{const ne=ge=>{const Ve=ge.target;if(Ve.tagName==="INPUT"||Ve.tagName==="TEXTAREA"||!q)return;const{row:we,col:Ae,table:Fe}=q,Vt=c,wt=Fe==="roster"?N:l;switch(ge.key){case"ArrowUp":ge.preventDefault(),we>0&&Y({row:we-1,col:Ae,table:Fe});break;case"ArrowDown":ge.preventDefault(),we<Vt.length-1&&Y({row:we+1,col:Ae,table:Fe});break;case"ArrowLeft":ge.preventDefault(),Ae>0&&Y({row:we,col:Ae-1,table:Fe});break;case"ArrowRight":ge.preventDefault(),Ae<wt.length-1&&Y({row:we,col:Ae+1,table:Fe});break;case"Tab":ge.preventDefault(),ge.shiftKey?we>0&&Y({row:we-1,col:Ae,table:Fe}):we<Vt.length-1&&Y({row:we+1,col:Ae,table:Fe});break;case" ":{ge.preventDefault();const je=c[we],Ye=wt[Ae];Ye!=null&&Ye.email&&(Fe==="roster"?oe(je,Ye.email,we,Ae):ce(je,Ye.email,we,Ae));break}case"Enter":S&&(ge.preventDefault(),Ee());break;case"Escape":S&&(ge.preventDefault(),Ue());break}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[q,c,N,l,S,oe,ce,Ee,Ue]);const ot=P.useMemo(()=>{const ne=El();return c.length===0?!1:c[0]<ne},[c]),$t=P.useMemo(()=>{const ne=El();return c.find(ge=>ge.split("T")[0]>=ne)},[c]),Rn=P.useMemo(()=>{if(!$t||!t||!a)return[];const ne=$t.split("T")[0],ge=C[ne]||b[ne];if(!ge||!ge.teams[t])return[];const Ve=Q.filter(Ae=>Ae.parentId===a),we=[a,...Ve.map(Ae=>Ae.name)];return Object.entries(ge.teams[t]).filter(([,Ae])=>Ae.some(Fe=>we.includes(Fe))).map(([Ae])=>Ae)},[$t,t,a,C,b,Q]),Et=P.useCallback(ne=>{const ge=El(),Ve=ne.split("T")[0];return Ve<ge?"past-date":Ve===ge?"today-date":"future-date"},[]);if(m||g||v)return w.jsx(Bl,{});const En=E||j;if(En)return w.jsxs("div",{className:"roster-table-error",children:["Error: ",En]});const Kt=a==="Absence";return!Kt&&N.length===0?w.jsxs("div",{className:"roster-table-loading",children:[!Kt&&x.length>0&&w.jsxs("div",{className:"hidden-members-bar",children:[w.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),w.jsx("div",{className:"hidden-members-list",children:x.map(ne=>{const ge=s.find(Ve=>Ve.email===ne);return w.jsxs("button",{className:"unhide-pill",onClick:()=>O(ne),title:"Click to unhide",children:[(ge==null?void 0:ge.name)||ne," ",w.jsx("span",{children:"+"})]},ne)})})]}),"No users found for this position."]}):w.jsxs("div",{className:"roster-table-wrapper",children:[!Kt&&x.length>0&&w.jsxs("div",{className:"hidden-members-bar",children:[w.jsx("span",{className:"hidden-members-label",children:"Hidden Members:"}),w.jsx("div",{className:"hidden-members-list",children:x.map(ne=>{const ge=s.find(Ve=>Ve.email===ne);return w.jsxs("button",{className:"unhide-pill",onClick:()=>O(ne),title:"Click to unhide",children:[(ge==null?void 0:ge.name)||ne," ",w.jsx("span",{children:"+"})]},ne)})})]}),Kt?w.jsxs("div",{className:"roster-section absence-section",children:[w.jsx("div",{className:"roster-table-container",children:w.jsxs("table",{className:"roster-table absence-table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:w.jsxs("div",{className:"date-header-content",children:["Date",w.jsxs("div",{className:"date-header-actions",children:[w.jsx("button",{className:"load-prev-btn",onClick:be,title:"Load 5 previous dates",children:""}),ot&&w.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:ke,title:"Hide previous dates",children:""})]})]})}),l.map(ne=>w.jsx("th",{className:`roster-table-header-cell sticky-header ${ne.email&&Rn.includes(ne.email)?"highlighted-header":""}`,children:ne.name},ne.email)),w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:w.jsxs("select",{className:"peek-selector",value:G||"",onChange:ne=>ae(ne.target.value||null),children:[w.jsx("option",{value:"",children:"Peek Position..."}),R.map(ne=>w.jsxs("option",{value:ne.name,children:[ne.emoji," ",ne.name]},ne.name))]})})]})}),w.jsx("tbody",{children:c.map((ne,ge)=>{const Ve=ne.split("T")[0],we=C[Ve]||b[Ve],Ae=we==null?void 0:we.eventName,Fe=Et(ne),Vt=Fe==="today-date",wt=ye(ne);return w.jsxs("tr",{className:`${Fe} ${wt?"":"no-data"} ${Ae?"special-event-row":""} ${ne===$t?"closest-next-date-row":""}`,children:[w.jsx("td",{className:`date-cell sticky-col ${wt?"clickable":""}`,onClick:()=>de(ne),title:Ae,children:w.jsxs("div",{className:"date-cell-content",children:[Ae&&w.jsx("span",{className:"special-event-dot"}),new Date(ne.replace(/-/g,"/")).toLocaleDateString(),Vt&&w.jsx("span",{className:"roster-today-dot",title:"Today"})]})}),l.map((je,Ye)=>{const It=(q==null?void 0:q.row)===ge&&(q==null?void 0:q.col)===Ye&&(q==null?void 0:q.table)==="absence",tr=je.email?Pe(ne,je.email):!1,Kn=je.email?U(ne,je.email):"",nn=ne===$t&&je.email&&Rn.includes(je.email);return w.jsx("td",{className:`roster-cell clickable absence-roster-cell ${It?"focused":""} ${tr?"absent-cell":""} ${nn?"highlighted-cell":""}`,onClick:()=>{je.email&&ce(ne,je.email,ge,Ye)},tabIndex:0,onFocus:()=>Y({row:ge,col:Ye,table:"absence"}),title:Kn,children:tr?w.jsxs("div",{className:"absence-input-container",children:[w.jsx("input",{type:"text",className:"absence-reason-input",value:Kn,placeholder:"Reason...",maxLength:20,autoFocus:It,onClick:Tn=>Tn.stopPropagation(),onChange:Tn=>{je.email&&pe(ne,je.email,Tn.target.value)}}),w.jsx("button",{className:"remove-absence-btn",onClick:Tn=>{Tn.stopPropagation(),je.email&&ce(ne,je.email,ge,Ye)},title:"Mark as present",children:""})]}):""},je.email)}),w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Le(ne).join(", ")||""})]},ne)})})]})}),w.jsx("div",{className:"load-more-footer",children:w.jsx("button",{className:"load-next-year-btn",onClick:X,children:"Load Next Year "})})]}):w.jsxs("div",{className:"roster-section",children:[w.jsx("div",{className:"roster-table-container",children:w.jsxs("table",{className:"roster-table",children:[w.jsx("thead",{children:w.jsxs("tr",{children:[w.jsx("th",{className:"roster-table-header-cell sticky-col sticky-header",children:w.jsxs("div",{className:"date-header-content",children:["Date",w.jsxs("div",{className:"date-header-actions",children:[w.jsx("button",{className:"load-prev-btn",onClick:be,title:"Load 5 previous dates",children:""}),ot&&w.jsx("button",{className:"load-prev-btn reset-dates-btn",onClick:ke,title:"Hide previous dates",children:""})]})]})}),N.map((ne,ge)=>w.jsxs(P.Fragment,{children:[M===ge&&w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsxs("th",{className:`roster-table-header-cell sticky-header clickable-header ${ne.email&&Rn.includes(ne.email)?"highlighted-header":""}`,onClick:()=>ne.email&&O(ne.email),title:"Click to hide member",children:[ne.name,(A==null?void 0:A.sortByGender)&&w.jsxs("span",{className:"gender-label",children:["(",ne.gender==="Male"?"M":ne.gender==="Female"?"F":"?",")"]})]})]},ne.email)),w.jsx("th",{className:"gender-divider-cell sticky-header"}),w.jsx("th",{className:"roster-table-header-cell sticky-header sticky-right peek-header",children:w.jsxs("select",{className:"peek-selector",value:G||"",onChange:ne=>ae(ne.target.value||null),children:[w.jsx("option",{value:"",children:"Peek Position..."}),R.map(ne=>w.jsxs("option",{value:ne.name,children:[ne.emoji," ",ne.name]},ne.name))]})})]})}),w.jsx("tbody",{children:c.map((ne,ge)=>{const Ve=ne.split("T")[0],we=C[Ve]||b[Ve],Ae=we==null?void 0:we.eventName,Fe=Et(ne),Vt=Fe==="today-date",wt=ye(ne);return w.jsxs("tr",{className:`${Fe} ${wt?"":"no-data"} ${Ae?"special-event-row":""} ${ne===$t?"closest-next-date-row":""}`,children:[w.jsx("td",{className:`date-cell sticky-col ${wt?"clickable":""}`,onClick:()=>de(ne),title:Ae,children:w.jsxs("div",{className:"date-cell-content",children:[Ae&&w.jsx("span",{className:"special-event-dot"}),Vt&&w.jsx("span",{className:"roster-today-dot",title:"Today"}),new Date(ne.replace(/-/g,"/")).toLocaleDateString()]})}),N.map((je,Ye)=>{const It=(q==null?void 0:q.row)===ge&&(q==null?void 0:q.col)===Ye&&(q==null?void 0:q.table)==="roster",tr=je.email?$(ne,je.email):!1,Kn=je.email?Pe(ne,je.email):!1,nn=ne===$t&&je.email&&Rn.includes(je.email);return w.jsxs(P.Fragment,{children:[M===Ye&&w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:`roster-cell ${tr?"disabled":"clickable"} ${It?"focused":""} ${Kn?"absent-strike":""} ${nn?"highlighted-cell":""}`,onClick:()=>{je.email&&!tr&&oe(ne,je.email,ge,Ye)},tabIndex:0,onFocus:()=>Y({row:ge,col:Ye,table:"roster"}),children:je.email&&(Kn?w.jsx("span",{title:U(ne,je.email),children:""}):Ke(ne,je.email))})]},je.email)}),w.jsx("td",{className:"gender-divider-cell"}),w.jsx("td",{className:"roster-cell peek-cell sticky-right",children:Le(ne).join(", ")||""})]},ne)})})]})}),w.jsx("div",{className:"load-more-footer",children:w.jsx("button",{className:"load-next-year-btn",onClick:X,children:"Load Next Year "})})]}),S&&w.jsx(Fl,{onSave:Ee,onCancel:Ue,isSaving:L,saveText:"Save Roster"})]})},DU=()=>w.jsx("div",{className:"roster-page",style:{height:"100%"},children:w.jsx(IU,{})}),xU="_appTableContainer_1kele_1",NU="_appTable_1kele_1",OU="_colorPickerGroup_1kele_37",MU="_stickyCol_1kele_47",_c={appTableContainer:xU,appTable:NU,colorPickerGroup:OU,stickyCol:MU},PU=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>w.jsx("th",{className:s?_c.stickyCol:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),hn=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>w.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?_c.stickyCol:""}
`,children:a}),Gr=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>w.jsxs(hn,{isSticky:s,children:[c&&w.jsx(r1,{}),w.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),RS=({name:n,value:e,placeholder:t,onChange:a})=>w.jsxs(hn,{className:_c.colorPickerGroup,children:[w.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),w.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),Rv=({headers:n,children:e})=>w.jsx("div",{className:_c.appTableContainer,children:w.jsxs("table",{className:_c.appTable,children:[w.jsx("thead",{children:w.jsx("tr",{children:n.map((t,a)=>w.jsx(PU,{...t},a))})}),w.jsx("tbody",{children:e})]})}),Dg={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},VU=()=>{const n=fi(),{positions:e,fetched:t,loading:a}=pt(B=>B.positions),[s,l]=P.useState(e),[c,d]=P.useState(Dg),[m,g]=P.useState("idle"),v=P.useMemo(()=>JSON.stringify(s)!==JSON.stringify(e),[s,e]);P.useEffect(()=>{t||n(ro())},[n,t]),P.useEffect(()=>{l(e)},[e]);const E=(B,q,Y)=>{const G=[...s];G[B]={...G[B],[q]:Y},l(G)},b=(B,q)=>{const Y=[...s],G=Y[B],ae=G.parentId,S=A=>{const R=Y[A];if(!R)return{block:[],startIndex:-1,endIndex:-1};const x=[],N=[R],M=new Set;let O=A,be=A,ke=0;for(;ke<N.length;){const de=N[ke++];M.has(de.name)||(M.add(de.name),x.push(de),Y.forEach((ye,Le)=>{ye.parentId===de.name&&!M.has(ye.name)&&(N.push(ye),O=Math.min(O,Le),be=Math.max(be,Le))}))}return{block:x,startIndex:O,endIndex:be}};if(ae){const A=Y.filter(ke=>ke.parentId===ae),x=A.findIndex(ke=>ke.name===G.name)+(q==="up"?-1:1);if(x<0||x>=A.length)return;const N=A[x],M=Y.indexOf(G),O=Y.indexOf(N);if(M===-1||O===-1)return;const be=[...Y];be[M]=N,be[O]=G,l(be)}else{const A=S(B),{block:R,startIndex:x,endIndex:N}=A;if(!R||R.length===0)return;if(q==="up"){if(x===0)return;let M=x-1;for(;M>=0&&Y[M].parentId;)M--;if(M<0)return;const O=S(M),{block:be,startIndex:ke}=O;if(!be||be.length===0)return;const X=[...Y.slice(0,ke),...R,...be,...Y.slice(N+1)].filter(Boolean);l(X)}else{if(N===Y.length-1)return;let M=N+1;for(;M<Y.length&&Y[M].parentId;)M++;if(M>=Y.length)return;const O=S(M),{block:be,startIndex:ke}=O;if(!be||be.length===0)return;const X=[...Y.slice(0,x),...be,...R,...Y.slice(ke+be.length)].filter(Boolean);l(X)}}},C=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Dg)},L=B=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const q=s[B];let Y=s.filter((G,ae)=>ae!==B);q.parentId||(Y=Y.filter(G=>G.parentId!==q.name)),l(Y)}},j=async()=>{g("saving");try{const B=s.map(q=>({...q,parentId:q.parentId===void 0?void 0:q.parentId}));await n(ZR(B)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(B){console.error("Save Error:",B),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},F=B=>{l(q=>{const Y={...Dg,parentId:B},G=q.findIndex(A=>A.name===B);if(G===-1)return[...q,Y];let ae=G;for(;ae+1<q.length&&q[ae+1].parentId===B;)ae++;return[...q.slice(0,ae+1),Y,...q.slice(ae+1)]})},Q=()=>{l(e)};return a?w.jsx(Bl,{}):w.jsxs(w.Fragment,{children:[w.jsxs(Rv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((B,q)=>w.jsxs("tr",{children:[w.jsx(hn,{textAlign:"center",children:B.parentId?w.jsx(r1,{}):w.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>b(q,"up"),disabled:q===0,children:""}),w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>b(q,"down"),disabled:q===s.length-1,children:""})]})}),w.jsx(Gr,{name:`emoji-${q}`,value:B.emoji,onChange:Y=>E(q,"emoji",Y.target.value)}),w.jsx(Gr,{name:`name-${q}`,value:B.name,onChange:Y=>E(q,"name",Y.target.value)}),w.jsx(RS,{name:`colour-${q}`,value:B.colour,onChange:Y=>E(q,"colour",Y.target.value)}),w.jsx(hn,{textAlign:"center",children:w.jsx(Zn,{colour:B.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:B.sortByGender,onClick:()=>E(q,"sortByGender",!B.sortByGender),children:B.sortByGender?"YES":"NO"})}),w.jsx(hn,{textAlign:"center",children:!B.parentId&&w.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>F(B.name),title:"Add Child Position",children:"+"})}),w.jsx(hn,{textAlign:"center",children:w.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>L(q),children:""})})]},`${B.emoji}-${q}`)),w.jsxs("tr",{className:"pos-row-new",children:[w.jsx("td",{className:"",children:""}),w.jsx(Gr,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:B=>d({...c,emoji:B.target.value})}),w.jsx(Gr,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:B=>d({...c,name:B.target.value})}),w.jsx(RS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:B=>d({...c,colour:B.target.value})}),w.jsx(hn,{textAlign:"center",children:w.jsx(Zn,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),w.jsx(hn,{textAlign:"center",children:w.jsx("button",{onClick:C,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),v&&w.jsx(Fl,{label:"Unsaved position changes",saveText:"Save Positions",onSave:j,onCancel:Q,isSaving:m==="saving"})]})},CS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},IS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],kU=()=>{var ae,S;const n=fi(),{teams:e,fetched:t,loading:a}=pt(A=>A.teams),{positions:s,fetched:l,loading:c}=pt(A=>A.positions),[d,m]=P.useState(e),[g,v]=P.useState(CS),[E,b]=P.useState("idle"),C=P.useMemo(()=>JSON.stringify(d)!==JSON.stringify(e),[d,e]);P.useEffect(()=>{t||n(_l()),l||n(ro())},[n,t,l]),P.useEffect(()=>{m(e)},[e]);const L=(A,R,x)=>{const N=[...d];N[A]={...N[A],[R]:x},m(N)},j=(A,R)=>{const x=[...d],N=R==="up"?A-1:A+1;if(N<0||N>=x.length)return;const M=x[A];x[A]=x[N],x[N]=M,m(x)},F=(A,R)=>{const x=d.map((N,M)=>{if(M!==A)return N;const O=N.positions||[],be=O.find(ke=>ke.name===R.name)?O.filter(ke=>ke.name!==R.name):[...O,R];return{...N,positions:be}});m(x)},Q=(A,R)=>{const x=d.map((N,M)=>{if(M!==A)return N;const O=N.preferredDays||[],be=O.includes(R)?O.filter(ke=>ke!==R):[...O,R];return{...N,preferredDays:be}});m(x)},B=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");m([...d,g]),v(CS)},q=A=>{window.confirm("Are you sure you want to delete this team?")&&m(d.filter((R,x)=>x!==A))},Y=async()=>{b("saving");try{await n(Pf(d)).unwrap(),b("success"),setTimeout(()=>b("idle"),2e3)}catch(A){console.error("Save Error:",A),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),b("idle")}},G=()=>{m(e)};return a||c?w.jsx(Bl,{}):w.jsxs(w.Fragment,{children:[w.jsxs(Rv,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((A,R)=>{var x,N;return w.jsxs("tr",{children:[w.jsxs(hn,{children:[" ",w.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>j(R,"up"),disabled:R===0,children:""}),w.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>j(R,"down"),disabled:R===d.length-1,children:""})]})]}),w.jsx(Gr,{name:`team-emoji-${R}`,value:A.emoji,onChange:M=>L(R,"emoji",M.target.value)}),w.jsx(Gr,{name:`team-name-${R}`,value:A.name,onChange:M=>L(R,"name",M.target.value)}),w.jsx(Gr,{name:`team-maxConflict-${R}`,value:((x=A.maxConflict)==null?void 0:x.toString())||"1",type:"number",onChange:M=>L(R,"maxConflict",parseInt(M.target.value)||1)}),w.jsx(hn,{children:w.jsx(Di,{nowrap:!0,children:(N=s==null?void 0:s.filter(M=>!M.parentId))==null?void 0:N.map(M=>{var be;const O=(be=A.positions)==null?void 0:be.some(ke=>ke.name===M.name);return w.jsx(Zn,{colour:M.colour,isActive:O,onClick:()=>F(R,M),children:M.emoji},M.name)})})}),w.jsx(hn,{children:w.jsx(Di,{nowrap:!0,children:IS.map(M=>{var be;const O=(be=A.preferredDays)==null?void 0:be.includes(M);return w.jsx(Zn,{isActive:O,onClick:()=>Q(R,M),children:M.substring(0,3)},M)})})}),w.jsx(hn,{children:w.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>q(R),children:""})})]},`${A.emoji}-${R}`)}),w.jsxs("tr",{className:"team-row-new",children:[w.jsx("td",{className:"",children:""}),w.jsx(Gr,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:A=>v({...g,emoji:A.target.value})}),w.jsx(Gr,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:A=>v({...g,name:A.target.value})}),w.jsx(Gr,{name:"new-team-maxConflict",value:((ae=g.maxConflict)==null?void 0:ae.toString())||"1",type:"number",onChange:A=>v({...g,maxConflict:parseInt(A.target.value)||1})}),w.jsx(hn,{children:w.jsx(Di,{nowrap:!0,children:(S=s==null?void 0:s.filter(A=>!A.parentId))==null?void 0:S.map(A=>{var x;const R=(x=g.positions)==null?void 0:x.some(N=>N.name===A.name);return w.jsx(Zn,{colour:A.colour,isActive:R,onClick:()=>v(N=>{const M=N.positions||[],O=M.some(be=>be.name===A.name)?M.filter(be=>be.name!==A.name):[...M,A];return{...N,positions:O}}),children:A.emoji},`new-${A.name}`)})})}),w.jsx(hn,{children:w.jsx(Di,{nowrap:!0,children:IS.map(A=>{var x;const R=(x=g.preferredDays)==null?void 0:x.includes(A);return w.jsx(Zn,{isActive:R,onClick:()=>v(N=>{const M=N.preferredDays||[],O=M.includes(A)?M.filter(be=>be!==A):[...M,A];return{...N,preferredDays:O}}),children:A.substring(0,3)},`new-team-${A}`)})})}),w.jsx(hn,{children:w.jsx("button",{onClick:B,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),C&&w.jsx(Fl,{label:"Unsaved team changes",saveText:"Save All Team Changes",onSave:Y,onCancel:G,isSaving:E==="saving"})]})},LU={allUsers:[],originalUsers:[],loading:!1,saving:!1,error:null},Bf=Nr("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Oc(wn,"users"),a=Vc(t),s=await Lc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),Ff=Nr("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=sR(wn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=a1(l.teamPositions)),t.update(Yr(wn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),f1=go({name:"userManagement",initialState:LU,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(m=>m!==s):[...c,s];l.teamPositions[a]=d}},resetUserChanges(n){n.allUsers=JSON.parse(JSON.stringify(n.originalUsers))}},extraReducers:n=>{n.addCase(Bf.pending,e=>{e.loading=!0,e.error=null}).addCase(Bf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.originalUsers=JSON.parse(JSON.stringify(t.payload)),e.loading=!1}).addCase(Bf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Ff.pending,e=>{e.saving=!0,e.error=null}).addCase(Ff.fulfilled,e=>{e.saving=!1,e.originalUsers=JSON.parse(JSON.stringify(e.allUsers))}).addCase(Ff.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:UU,toggleUserTeam:jU,toggleUserTeamPosition:zU,resetUserChanges:BU}=f1.actions,FU=f1.reducer,HU=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=fi(),s=(m,g)=>{a(UU({id:n.id,field:m,value:g}))},l=m=>{a(jU({userId:n.id,teamName:m}))},c=(m,g)=>{a(zU({userId:n.id,teamName:m,posName:g}))};return w.jsxs("tr",{children:[w.jsx(Gr,{name:`name-${n.id}`,value:n.name||"",onChange:m=>s("name",m.target.value),isSticky:!0}),w.jsx(Gr,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),w.jsx(hn,{children:w.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:m=>s("gender",m.target.value),children:[w.jsx("option",{value:"",children:"-"}),w.jsx("option",{value:"Male",children:"Male"}),w.jsx("option",{value:"Female",children:"Female"})]})}),w.jsx(hn,{children:w.jsx(Di,{children:e.map(m=>{var v;const g=(v=n.teams)==null?void 0:v.includes(m.name);return w.jsxs(Zn,{onClick:()=>l(m.name),isActive:g,children:[w.jsx("span",{children:m.emoji})," ",m.name]},m.name)})})}),w.jsx(hn,{children:(d=n.teams)==null?void 0:d.map(m=>{var v,E;const g=e.find(b=>b.name===m);return g?w.jsxs("div",{style:{marginBottom:"12px"},children:[w.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),w.jsx(Di,{children:(E=(v=g.positions)==null?void 0:v.filter(b=>!b.parentId))==null?void 0:E.map(b=>{var L,j;const C=(j=(L=n.teamPositions)==null?void 0:L[m])==null?void 0:j.includes(b.name);return w.jsx(Zn,{colour:b.colour,isActive:C,onClick:()=>c(m,b.name),children:b.emoji},b.name)})})]},m):null})}),w.jsx(hn,{children:w.jsx(Zn,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),w.jsx(hn,{children:w.jsx(Zn,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),w.jsx(hn,{children:w.jsx(Zn,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},qU=()=>{const n=fi(),{allUsers:e,originalUsers:t,loading:a,saving:s,error:l}=pt(v=>v.userManagement),c=pt(v=>v.teams.teams),d=P.useMemo(()=>JSON.stringify(e)!==JSON.stringify(t),[e,t]);P.useEffect(()=>{n(Bf())},[n]);const m=()=>{n(Ff(e))},g=()=>{n(BU())};return a?w.jsx(Bl,{}):l?w.jsxs("div",{children:["Error: ",l]}):w.jsxs(w.Fragment,{children:[w.jsx(Rv,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(v=>w.jsx(HU,{user:v,availableTeams:c,adminEmail:"chris.sm.kang542@gmail.com"},v.id))}),d&&w.jsx(Fl,{label:"Unsaved user changes",saveText:"Save All User Changes",onSave:m,onCancel:g,isSaving:s})]})},GU=()=>{const{userData:n}=pt(t=>t.auth),{section:e}=Sd();return n?w.jsxs("div",{className:"settings-container",children:[e===hl.PROFILE&&w.jsx(h1,{}),e===hl.USER_MANAGEMENT&&(n.isAdmin?w.jsx(qU,{}):w.jsx("p",{children:"Access Denied"})),e===hl.TEAMS&&(n.isAdmin?w.jsx(kU,{}):w.jsx("p",{children:"Access Denied"})),e===hl.POSITIONS&&(n.isAdmin?w.jsx(VU,{}):w.jsx("p",{children:"Access Denied"}))]}):null},$U=[{path:"/",element:w.jsx(uk,{})},{path:"/login",element:w.jsx(CU,{})},{path:"/guest",element:w.jsx(RU,{})},{path:"/app",element:w.jsx(hL,{}),children:[{path:"",element:w.jsx(QL,{}),children:[{path:"dashboard",element:w.jsx(mU,{})},{path:"roster/:teamName?/:positionName?",element:w.jsx(DU,{})},{path:"settings/:section?",element:w.jsx(GU,{})}]}]}];let DS=!1;const KU=n=>{if(!DS){DS=!0;let e;qV(xl,t=>{if(t){n.dispatch(bU(t)),n.dispatch(jf(t.uid));const a=Yr(wn,"users",t.uid);e=eV(a,s=>{if(s.exists()){const l=s.data();n.dispatch(SU(l))}})}else n.dispatch(AU()),e&&e()})}return e=>t=>e(t)},YU=zk({reducer:{auth:wU,positions:lL,roster:oU,rosterView:dU,teams:cL,ui:VL,userManagement:FU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(KU)}),QU=Lx($U);nI.createRoot(document.getElementById("root")).render(w.jsx(NS.StrictMode,{children:w.jsx(yI,{store:YU,children:w.jsx(Zx,{children:w.jsx(sk,{children:w.jsx(Wx,{router:QU})})})})}));
