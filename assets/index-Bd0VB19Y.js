var jC=Object.defineProperty;var zC=(n,e,t)=>e in n?jC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Gp=(n,e,t)=>zC(n,typeof e!="symbol"?e+"":e,t);function BC(n,e){for(var t=0;t<e.length;t++){const a=e[t];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(a,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function RS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var $p={exports:{}},Ou={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT;function FC(){if(HT)return Ou;HT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var d in s)d!=="key"&&(l[d]=s[d])}else l=s;return s=l.ref,{$$typeof:n,type:a,key:c,ref:s!==void 0?s:null,props:l}}return Ou.Fragment=e,Ou.jsx=t,Ou.jsxs=t,Ou}var GT;function qC(){return GT||(GT=1,$p.exports=FC()),$p.exports}var A=qC(),Kp={exports:{}},We={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $T;function HC(){if($T)return We;$T=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),S=Symbol.iterator;function R(j){return j===null||typeof j!="object"?null:(j=S&&j[S]||j["@@iterator"],typeof j=="function"?j:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,V={};function F(j,K,oe){this.props=j,this.context=K,this.refs=V,this.updater=oe||U}F.prototype.isReactComponent={},F.prototype.setState=function(j,K){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,K,"setState")},F.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function H(){}H.prototype=F.prototype;function q(j,K,oe){this.props=j,this.context=K,this.refs=V,this.updater=oe||U}var Q=q.prototype=new H;Q.constructor=q,B(Q,F.prototype),Q.isPureReactComponent=!0;var re=Array.isArray;function Y(){}var b={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(j,K,oe){var ce=oe.ref;return{$$typeof:n,type:j,key:K,ref:ce!==void 0?ce:null,props:oe}}function N(j,K){return I(j.type,K,j.props)}function x(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function P(j){var K={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(oe){return K[oe]})}var O=/\/+/g;function ze(j,K){return typeof j=="object"&&j!==null&&j.key!=null?P(""+j.key):K.toString(36)}function Ze(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(Y,Y):(j.status="pending",j.then(function(K){j.status==="pending"&&(j.status="fulfilled",j.value=K)},function(K){j.status==="pending"&&(j.status="rejected",j.reason=K)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function W(j,K,oe,ce,ge){var Te=typeof j;(Te==="undefined"||Te==="boolean")&&(j=null);var Pe=!1;if(j===null)Pe=!0;else switch(Te){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(j.$$typeof){case n:case e:Pe=!0;break;case _:return Pe=j._init,W(Pe(j._payload),K,oe,ce,ge)}}if(Pe)return ge=ge(j),Pe=ce===""?"."+ze(j,0):ce,re(ge)?(oe="",Pe!=null&&(oe=Pe.replace(O,"$&/")+"/"),W(ge,K,oe,"",function(Kt){return Kt})):ge!=null&&(x(ge)&&(ge=N(ge,oe+(ge.key==null||j&&j.key===ge.key?"":(""+ge.key).replace(O,"$&/")+"/")+Pe)),K.push(ge)),1;Pe=0;var Ke=ce===""?".":ce+":";if(re(j))for(var lt=0;lt<j.length;lt++)ce=j[lt],Te=Ke+ze(ce,lt),Pe+=W(ce,K,oe,Te,ge);else if(lt=R(j),typeof lt=="function")for(j=lt.call(j),lt=0;!(ce=j.next()).done;)ce=ce.value,Te=Ke+ze(ce,lt++),Pe+=W(ce,K,oe,Te,ge);else if(Te==="object"){if(typeof j.then=="function")return W(Ze(j),K,oe,ce,ge);throw K=String(j),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function pe(j,K,oe){if(j==null)return j;var ce=[],ge=0;return W(j,ce,"","",function(Te){return K.call(oe,Te,ge++)}),ce}function _e(j){if(j._status===-1){var K=j._result;K=K(),K.then(function(oe){(j._status===0||j._status===-1)&&(j._status=1,j._result=oe)},function(oe){(j._status===0||j._status===-1)&&(j._status=2,j._result=oe)}),j._status===-1&&(j._status=0,j._result=K)}if(j._status===1)return j._result.default;throw j._result}var Be=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},Ve={map:pe,forEach:function(j,K,oe){pe(j,function(){K.apply(this,arguments)},oe)},count:function(j){var K=0;return pe(j,function(){K++}),K},toArray:function(j){return pe(j,function(K){return K})||[]},only:function(j){if(!x(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return We.Activity=E,We.Children=Ve,We.Component=F,We.Fragment=t,We.Profiler=s,We.PureComponent=q,We.StrictMode=a,We.Suspense=p,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=b,We.__COMPILER_RUNTIME={__proto__:null,c:function(j){return b.H.useMemoCache(j)}},We.cache=function(j){return function(){return j.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(j,K,oe){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ce=B({},j.props),ge=j.key;if(K!=null)for(Te in K.key!==void 0&&(ge=""+K.key),K)!w.call(K,Te)||Te==="key"||Te==="__self"||Te==="__source"||Te==="ref"&&K.ref===void 0||(ce[Te]=K[Te]);var Te=arguments.length-2;if(Te===1)ce.children=oe;else if(1<Te){for(var Pe=Array(Te),Ke=0;Ke<Te;Ke++)Pe[Ke]=arguments[Ke+2];ce.children=Pe}return I(j.type,ge,ce)},We.createContext=function(j){return j={$$typeof:c,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:l,_context:j},j},We.createElement=function(j,K,oe){var ce,ge={},Te=null;if(K!=null)for(ce in K.key!==void 0&&(Te=""+K.key),K)w.call(K,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ge[ce]=K[ce]);var Pe=arguments.length-2;if(Pe===1)ge.children=oe;else if(1<Pe){for(var Ke=Array(Pe),lt=0;lt<Pe;lt++)Ke[lt]=arguments[lt+2];ge.children=Ke}if(j&&j.defaultProps)for(ce in Pe=j.defaultProps,Pe)ge[ce]===void 0&&(ge[ce]=Pe[ce]);return I(j,Te,ge)},We.createRef=function(){return{current:null}},We.forwardRef=function(j){return{$$typeof:d,render:j}},We.isValidElement=x,We.lazy=function(j){return{$$typeof:_,_payload:{_status:-1,_result:j},_init:_e}},We.memo=function(j,K){return{$$typeof:g,type:j,compare:K===void 0?null:K}},We.startTransition=function(j){var K=b.T,oe={};b.T=oe;try{var ce=j(),ge=b.S;ge!==null&&ge(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(Y,Be)}catch(Te){Be(Te)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),b.T=K}},We.unstable_useCacheRefresh=function(){return b.H.useCacheRefresh()},We.use=function(j){return b.H.use(j)},We.useActionState=function(j,K,oe){return b.H.useActionState(j,K,oe)},We.useCallback=function(j,K){return b.H.useCallback(j,K)},We.useContext=function(j){return b.H.useContext(j)},We.useDebugValue=function(){},We.useDeferredValue=function(j,K){return b.H.useDeferredValue(j,K)},We.useEffect=function(j,K){return b.H.useEffect(j,K)},We.useEffectEvent=function(j){return b.H.useEffectEvent(j)},We.useId=function(){return b.H.useId()},We.useImperativeHandle=function(j,K,oe){return b.H.useImperativeHandle(j,K,oe)},We.useInsertionEffect=function(j,K){return b.H.useInsertionEffect(j,K)},We.useLayoutEffect=function(j,K){return b.H.useLayoutEffect(j,K)},We.useMemo=function(j,K){return b.H.useMemo(j,K)},We.useOptimistic=function(j,K){return b.H.useOptimistic(j,K)},We.useReducer=function(j,K,oe){return b.H.useReducer(j,K,oe)},We.useRef=function(j){return b.H.useRef(j)},We.useState=function(j){return b.H.useState(j)},We.useSyncExternalStore=function(j,K,oe){return b.H.useSyncExternalStore(j,K,oe)},We.useTransition=function(){return b.H.useTransition()},We.version="19.2.4",We}var KT;function gd(){return KT||(KT=1,Kp.exports=HC()),Kp.exports}var M=gd();const CS=RS(M),GC=BC({__proto__:null,default:CS},[M]);var Yp={exports:{}},Mu={},Qp={exports:{}},Xp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function $C(){return YT||(YT=1,(function(n){function e(W,pe){var _e=W.length;W.push(pe);e:for(;0<_e;){var Be=_e-1>>>1,Ve=W[Be];if(0<s(Ve,pe))W[Be]=pe,W[_e]=Ve,_e=Be;else break e}}function t(W){return W.length===0?null:W[0]}function a(W){if(W.length===0)return null;var pe=W[0],_e=W.pop();if(_e!==pe){W[0]=_e;e:for(var Be=0,Ve=W.length,j=Ve>>>1;Be<j;){var K=2*(Be+1)-1,oe=W[K],ce=K+1,ge=W[ce];if(0>s(oe,_e))ce<Ve&&0>s(ge,oe)?(W[Be]=ge,W[ce]=_e,Be=ce):(W[Be]=oe,W[K]=_e,Be=K);else if(ce<Ve&&0>s(ge,_e))W[Be]=ge,W[ce]=_e,Be=ce;else break e}}return pe}function s(W,pe){var _e=W.sortIndex-pe.sortIndex;return _e!==0?_e:W.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,E=null,S=3,R=!1,U=!1,B=!1,V=!1,F=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function Q(W){for(var pe=t(g);pe!==null;){if(pe.callback===null)a(g);else if(pe.startTime<=W)a(g),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(g)}}function re(W){if(B=!1,Q(W),!U)if(t(p)!==null)U=!0,Y||(Y=!0,P());else{var pe=t(g);pe!==null&&Ze(re,pe.startTime-W)}}var Y=!1,b=-1,w=5,I=-1;function N(){return V?!0:!(n.unstable_now()-I<w)}function x(){if(V=!1,Y){var W=n.unstable_now();I=W;var pe=!0;try{e:{U=!1,B&&(B=!1,H(b),b=-1),R=!0;var _e=S;try{t:{for(Q(W),E=t(p);E!==null&&!(E.expirationTime>W&&N());){var Be=E.callback;if(typeof Be=="function"){E.callback=null,S=E.priorityLevel;var Ve=Be(E.expirationTime<=W);if(W=n.unstable_now(),typeof Ve=="function"){E.callback=Ve,Q(W),pe=!0;break t}E===t(p)&&a(p),Q(W)}else a(p);E=t(p)}if(E!==null)pe=!0;else{var j=t(g);j!==null&&Ze(re,j.startTime-W),pe=!1}}break e}finally{E=null,S=_e,R=!1}pe=void 0}}finally{pe?P():Y=!1}}}var P;if(typeof q=="function")P=function(){q(x)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ze=O.port2;O.port1.onmessage=x,P=function(){ze.postMessage(null)}}else P=function(){F(x,0)};function Ze(W,pe){b=F(function(){W(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(W){switch(S){case 1:case 2:case 3:var pe=3;break;default:pe=S}var _e=S;S=pe;try{return W()}finally{S=_e}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(W,pe){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var _e=S;S=W;try{return pe()}finally{S=_e}},n.unstable_scheduleCallback=function(W,pe,_e){var Be=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?Be+_e:Be):_e=Be,W){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=_e+Ve,W={id:_++,callback:pe,priorityLevel:W,startTime:_e,expirationTime:Ve,sortIndex:-1},_e>Be?(W.sortIndex=_e,e(g,W),t(p)===null&&W===t(g)&&(B?(H(b),b=-1):B=!0,Ze(re,_e-Be))):(W.sortIndex=Ve,e(p,W),U||R||(U=!0,Y||(Y=!0,P()))),W},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(W){var pe=S;return function(){var _e=S;S=pe;try{return W.apply(this,arguments)}finally{S=_e}}}})(Xp)),Xp}var QT;function KC(){return QT||(QT=1,Qp.exports=$C()),Qp.exports}var Wp={exports:{}},Fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function YC(){if(XT)return Fn;XT=1;var n=gd();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Fn.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},Fn.flushSync=function(p){var g=c.T,_=a.p;try{if(c.T=null,a.p=2,p)return p()}finally{c.T=g,a.p=_,a.d.f()}},Fn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},Fn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},Fn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,R=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:S,fetchPriority:R}):_==="script"&&a.d.X(p,{crossOrigin:E,integrity:S,fetchPriority:R,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Fn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},Fn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=d(_,g.crossOrigin);a.d.L(p,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Fn.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},Fn.requestFormReset=function(p){a.d.r(p)},Fn.unstable_batchedUpdates=function(p,g){return p(g)},Fn.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},Fn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Fn.version="19.2.4",Fn}var WT;function IS(){if(WT)return Wp.exports;WT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wp.exports=YC(),Wp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function QC(){if(JT)return Mu;JT=1;var n=KC(),e=gd(),t=IS();function a(r){var i="https://react.dev/errors/"+r;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)i+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var i=r,o=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(o=i.return),r=i.return;while(r)}return i.tag===3?o:null}function c(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function d(r){if(r.tag===31){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function p(r){if(l(r)!==r)throw Error(a(188))}function g(r){var i=r.alternate;if(!i){if(i=l(r),i===null)throw Error(a(188));return i!==r?null:r}for(var o=r,u=i;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return p(f),r;if(m===u)return p(f),i;m=m.sibling}throw Error(a(188))}if(o.return!==u.return)o=f,u=m;else{for(var v=!1,C=f.child;C;){if(C===o){v=!0,o=f,u=m;break}if(C===u){v=!0,u=f,o=m;break}C=C.sibling}if(!v){for(C=m.child;C;){if(C===o){v=!0,o=m,u=f;break}if(C===u){v=!0,u=m,o=f;break}C=C.sibling}if(!v)throw Error(a(189))}}if(o.alternate!==u)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?r:i}function _(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r;for(r=r.child;r!==null;){if(i=_(r),i!==null)return i;r=r.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),q=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(r){return r===null||typeof r!="object"?null:(r=x&&r[x]||r["@@iterator"],typeof r=="function"?r:null)}var O=Symbol.for("react.client.reference");function ze(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===O?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case B:return"Fragment";case F:return"Profiler";case V:return"StrictMode";case re:return"Suspense";case Y:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case U:return"Portal";case q:return r.displayName||"Context";case H:return(r._context.displayName||"Context")+".Consumer";case Q:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case b:return i=r.displayName||null,i!==null?i:ze(r.type)||"Memo";case w:i=r._payload,r=r._init;try{return ze(r(i))}catch{}}return null}var Ze=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},Be=[],Ve=-1;function j(r){return{current:r}}function K(r){0>Ve||(r.current=Be[Ve],Be[Ve]=null,Ve--)}function oe(r,i){Ve++,Be[Ve]=r.current,r.current=i}var ce=j(null),ge=j(null),Te=j(null),Pe=j(null);function Ke(r,i){switch(oe(Te,i),oe(ge,r),oe(ce,null),i.nodeType){case 9:case 11:r=(r=i.documentElement)&&(r=r.namespaceURI)?dT(r):0;break;default:if(r=i.tagName,i=i.namespaceURI)i=dT(i),r=mT(i,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}K(ce),oe(ce,r)}function lt(){K(ce),K(ge),K(Te)}function Kt(r){r.memoizedState!==null&&oe(Pe,r);var i=ce.current,o=mT(i,r.type);i!==o&&(oe(ge,r),oe(ce,o))}function Cn(r){ge.current===r&&(K(ce),K(ge)),Pe.current===r&&(K(Pe),Iu._currentValue=_e)}var Tt,Tn;function Jt(r){if(Tt===void 0)try{throw Error()}catch(o){var i=o.stack.trim().match(/\n( *(at )?)/);Tt=i&&i[1]||"",Tn=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tt+r+Tn}var ae=!1;function ye(r,i){if(!r||ae)return"";ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ie){var te=ie}Reflect.construct(r,[],fe)}else{try{fe.call()}catch(ie){te=ie}r.call(fe.prototype)}}else{try{throw Error()}catch(ie){te=ie}(fe=r())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ie){if(ie&&te&&typeof ie.stack=="string")return[ie.stack,te.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),v=m[0],C=m[1];if(v&&C){var L=v.split(`
`),Z=C.split(`
`);for(f=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Z.length&&!Z[f].includes("DetermineComponentFrameRoot");)f++;if(u===L.length||f===Z.length)for(u=L.length-1,f=Z.length-1;1<=u&&0<=f&&L[u]!==Z[f];)f--;for(;1<=u&&0<=f;u--,f--)if(L[u]!==Z[f]){if(u!==1||f!==1)do if(u--,f--,0>f||L[u]!==Z[f]){var se=`
`+L[u].replace(" at new "," at ");return r.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",r.displayName)),se}while(1<=u&&0<=f);break}}}finally{ae=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?Jt(o):""}function ke(r,i){switch(r.tag){case 26:case 27:case 5:return Jt(r.type);case 16:return Jt("Lazy");case 13:return r.child!==i&&i!==null?Jt("Suspense Fallback"):Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return ye(r.type,!1);case 11:return ye(r.type.render,!1);case 1:return ye(r.type,!0);case 31:return Jt("Activity");default:return""}}function Ae(r){try{var i="",o=null;do i+=ke(r,o),o=r,r=r.return;while(r);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var we=Object.prototype.hasOwnProperty,Fe=n.unstable_scheduleCallback,kt=n.unstable_cancelCallback,Rt=n.unstable_shouldYield,Le=n.unstable_requestPaint,Ye=n.unstable_now,Dt=n.unstable_getCurrentPriorityLevel,nr=n.unstable_ImmediatePriority,Yn=n.unstable_UserBlockingPriority,rn=n.unstable_NormalPriority,bn=n.unstable_LowPriority,bs=n.unstable_IdlePriority,yo=n.log,va=n.unstable_setDisableYieldValue,mr=null,Lt=null;function Qn(r){if(typeof yo=="function"&&va(r),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(mr,r)}catch{}}var Yt=Math.clz32?Math.clz32:ws,Ss=Math.log,Ea=Math.LN2;function ws(r){return r>>>=0,r===0?32:31-(Ss(r)/Ea|0)|0}var Xn=256,mi=262144,Qt=4194304;function Mr(r){var i=r&42;if(i!==0)return i;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function pr(r,i,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,v=r.pingedLanes;r=r.warmLanes;var C=u&134217727;return C!==0?(u=C&~m,u!==0?f=Mr(u):(v&=C,v!==0?f=Mr(v):o||(o=C&~r,o!==0&&(f=Mr(o))))):(C=u&~m,C!==0?f=Mr(C):v!==0?f=Mr(v):o||(o=u&~r,o!==0&&(f=Mr(o)))),f===0?0:i!==0&&i!==f&&(i&m)===0&&(m=f&-f,o=i&-i,m>=o||m===32&&(o&4194048)!==0)?i:f}function gr(r,i){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&i)===0}function _o(r,i){switch(r){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(){var r=Qt;return Qt<<=1,(Qt&62914560)===0&&(Qt=4194304),r}function Wn(r){for(var i=[],o=0;31>o;o++)i.push(r);return i}function pi(r,i){r.pendingLanes|=i,i!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function zl(r,i,o,u,f,m){var v=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var C=r.entanglements,L=r.expirationTimes,Z=r.hiddenUpdates;for(o=v&~o;0<o;){var se=31-Yt(o),fe=1<<se;C[se]=0,L[se]=-1;var te=Z[se];if(te!==null)for(Z[se]=null,se=0;se<te.length;se++){var ie=te[se];ie!==null&&(ie.lane&=-536870913)}o&=~fe}u!==0&&zi(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(v&~i))}function zi(r,i,o){r.pendingLanes|=i,r.suspendedLanes&=~i;var u=31-Yt(i);r.entangledLanes|=i,r.entanglements[u]=r.entanglements[u]|1073741824|o&261930}function k(r,i){var o=r.entangledLanes|=i;for(r=r.entanglements;o;){var u=31-Yt(o),f=1<<u;f&i|r[u]&i&&(r[u]|=i),o&=~f}}function G(r,i){var o=i&-i;return o=(o&42)!==0?1:ee(o),(o&(r.suspendedLanes|i))!==0?0:o}function ee(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function me(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ve(){var r=pe.p;return r!==0?r:(r=window.event,r===void 0?32:LT(r.type))}function Ce(r,i){var o=pe.p;try{return pe.p=r,i()}finally{pe.p=o}}var Ne=Math.random().toString(36).slice(2),Ee="__reactFiber$"+Ne,Se="__reactProps$"+Ne,De="__reactContainer$"+Ne,He="__reactEvents$"+Ne,Me="__reactListeners$"+Ne,Qe="__reactHandles$"+Ne,at="__reactResources$"+Ne,Nt="__reactMarker$"+Ne;function qt(r){delete r[Ee],delete r[Se],delete r[He],delete r[Me],delete r[Qe]}function jt(r){var i=r[Ee];if(i)return i;for(var o=r.parentNode;o;){if(i=o[De]||o[Ee]){if(o=i.alternate,i.child!==null||o!==null&&o.child!==null)for(r=TT(r);r!==null;){if(o=r[Ee])return o;r=TT(r)}return i}r=o,o=r.parentNode}return null}function nt(r){if(r=r[Ee]||r[De]){var i=r.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return r}return null}function zt(r){var i=r.tag;if(i===5||i===26||i===27||i===6)return r.stateNode;throw Error(a(33))}function In(r){var i=r[at];return i||(i=r[at]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Bt(r){r[Nt]=!0}var rr=new Set,zn={};function ir(r,i){Bn(r,i),Bn(r+"Capture",i)}function Bn(r,i){for(zn[r]=i,r=0;r<i.length;r++)rr.add(i[r])}var yr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gi={},yi={};function ot(r){return we.call(yi,r)?!0:we.call(gi,r)?!1:yr.test(r)?yi[r]=!0:(gi[r]=!0,!1)}function Zt(r,i,o){if(ot(i))if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(i);return}}r.setAttribute(i,""+o)}}function dn(r,i,o){if(o===null)r.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(i);return}r.setAttribute(i,""+o)}}function xt(r,i,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(i,o,""+u)}}function rt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function _r(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ta(r,i,o){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);if(!r.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,m=u.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){o=""+v,m.call(this,v)}}),Object.defineProperty(r,i,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function bt(r){if(!r._valueTracker){var i=_r(r)?"checked":"value";r._valueTracker=Ta(r,i,""+r[i])}}function As(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var o=i.getValue(),u="";return r&&(u=_r(r)?r.checked?"true":"false":r.value),r=u,r!==o?(i.setValue(r),!0):!1}function _i(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Rs=/[\n"\\]/g;function ar(r){return r.replace(Rs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vo(r,i,o,u,f,m,v,C){r.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?r.type=v:r.removeAttribute("type"),i!=null?v==="number"?(i===0&&r.value===""||r.value!=i)&&(r.value=""+rt(i)):r.value!==""+rt(i)&&(r.value=""+rt(i)):v!=="submit"&&v!=="reset"||r.removeAttribute("value"),i!=null?Bl(r,v,rt(i)):o!=null?Bl(r,v,rt(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?r.name=""+rt(C):r.removeAttribute("name")}function jc(r,i,o,u,f,m,v,C){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),i!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){bt(r);return}o=o!=null?""+rt(o):"",i=i!=null?""+rt(i):o,C||i===r.value||(r.value=i),r.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=C?r.checked:!!u,r.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.name=v),bt(r)}function Bl(r,i,o){i==="number"&&_i(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ba(r,i,o,u){if(r=r.options,i){i={};for(var f=0;f<o.length;f++)i["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=i.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+rt(o),i=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function zc(r,i,o){if(i!=null&&(i=""+rt(i),i!==r.value&&(r.value=i),o==null)){r.defaultValue!==i&&(r.defaultValue=i);return}r.defaultValue=o!=null?""+rt(o):""}function Sa(r,i,o,u){if(i==null){if(u!=null){if(o!=null)throw Error(a(92));if(Ze(u)){if(1<u.length)throw Error(a(93));u=u[0]}o=u}o==null&&(o=""),i=o}o=rt(i),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u),bt(r)}function sr(r,i){if(i){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=i;return}}r.textContent=i}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fl(r,i,o){var u=i.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(i,""):i==="float"?r.cssFloat="":r[i]="":u?r.setProperty(i,o):typeof o!="number"||o===0||Bc.has(i)?i==="float"?r.cssFloat=o:r[i]=(""+o).trim():r[i]=o+"px"}function ql(r,i,o){if(i!=null&&typeof i!="object")throw Error(a(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&o[f]!==u&&Fl(r,f,u)}else for(var m in i)i.hasOwnProperty(m)&&Fl(r,m,i[m])}function Eo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function To(r){return wa.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Jr(){}var Hl=null;function Vr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Aa=null,vi=null;function Cs(r){var i=nt(r);if(i&&(r=i.stateNode)){var o=r[Se]||null;e:switch(r=i.stateNode,i.type){case"input":if(vo(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),i=o.name,o.type==="radio"&&i!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ar(""+i)+'"][type="radio"]'),i=0;i<o.length;i++){var u=o[i];if(u!==r&&u.form===r.form){var f=u[Se]||null;if(!f)throw Error(a(90));vo(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<o.length;i++)u=o[i],u.form===r.form&&As(u)}break e;case"textarea":zc(r,o.value,o.defaultValue);break e;case"select":i=o.value,i!=null&&ba(r,!!o.multiple,i,!1)}}}var bo=!1;function Ra(r,i,o){if(bo)return r(i,o);bo=!0;try{var u=r(i);return u}finally{if(bo=!1,(Aa!==null||vi!==null)&&(Ph(),Aa&&(i=Aa,r=vi,vi=Aa=null,Cs(i),r)))for(i=0;i<r.length;i++)Cs(r[i])}}function Zr(r,i){var o=r.stateNode;if(o===null)return null;var u=o[Se]||null;if(u===null)return null;o=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(a(231,i,typeof o));return o}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Is=!1;if(Pr)try{var Ot={};Object.defineProperty(Ot,"passive",{get:function(){Is=!0}}),window.addEventListener("test",Ot,Ot),window.removeEventListener("test",Ot,Ot)}catch{Is=!1}var Ei=null,Gl=null,Ds=null;function $l(){if(Ds)return Ds;var r,i=Gl,o=i.length,u,f="value"in Ei?Ei.value:Ei.textContent,m=f.length;for(r=0;r<o&&i[r]===f[r];r++);var v=o-r;for(u=1;u<=v&&i[o-u]===f[m-u];u++);return Ds=f.slice(r,1<u?1-u:void 0)}function Ns(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Bi(){return!0}function ei(){return!1}function xn(r){function i(o,u,f,m,v){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var C in r)r.hasOwnProperty(C)&&(o=r[C],this[C]=o?o(m):m[C]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Bi:ei,this.isPropagationStopped=ei,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Bi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Bi)},persist:function(){},isPersistent:Bi}),i}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ti=xn(Fi),Ca=E({},Fi,{view:0,detail:0}),Kl=xn(Ca),Ia,So,bi,wo=E({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Da,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==bi&&(bi&&r.type==="mousemove"?(Ia=r.screenX-bi.screenX,So=r.screenY-bi.screenY):So=Ia=0,bi=r),Ia)},movementY:function(r){return"movementY"in r?r.movementY:So}}),Yl=xn(wo),xs=E({},wo,{dataTransfer:0}),qc=xn(xs),Hc=E({},Ca,{relatedTarget:0}),Os=xn(Hc),Ql=E({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=xn(Ql),Ao=E({},Fi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),$c=xn(Ao),Kc=E({},Fi,{data:0}),Si=xn(Kc),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=Xc[r])?!!i[r]:!1}function Da(){return Wc}var Jn=E({},Ca,{key:function(r){if(r.key){var i=Yc[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=Ns(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Da,charCode:function(r){return r.type==="keypress"?Ns(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ns(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Jc=xn(Jn),Zc=E({},wo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qi=xn(Zc),h=E({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Da}),y=xn(h),T=E({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=xn(T),X=E({},wo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ne=xn(X),be=E({},Fi,{newState:0,oldState:0}),et=xn(be),ln=[9,13,27,32],St=Pr&&"CompositionEvent"in window,Xt=null;Pr&&"documentMode"in document&&(Xt=document.documentMode);var kr=Pr&&"TextEvent"in window&&!Xt,wi=Pr&&(!St||Xt&&8<Xt&&11>=Xt),ti=" ",ni=!1;function Ms(r,i){switch(r){case"keyup":return ln.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ro(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Co=!1;function u1(r,i){switch(r){case"compositionend":return Ro(i);case"keypress":return i.which!==32?null:(ni=!0,ti);case"textInput":return r=i.data,r===ti&&ni?null:r;default:return null}}function c1(r,i){if(Co)return r==="compositionend"||!St&&Ms(r,i)?(r=$l(),Ds=Gl=Ei=null,Co=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return wi&&i.locale!=="ko"?null:i.data;default:return null}}var h1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w_(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!h1[r.type]:i==="textarea"}function A_(r,i,o,u){Aa?vi?vi.push(u):vi=[u]:Aa=u,i=Fh(i,"onChange"),0<i.length&&(o=new Ti("onChange","change",null,o,u),r.push({event:o,listeners:i}))}var Xl=null,Wl=null;function f1(r){oT(r,0)}function eh(r){var i=zt(r);if(As(i))return r}function R_(r,i){if(r==="change")return i}var C_=!1;if(Pr){var Jd;if(Pr){var Zd="oninput"in document;if(!Zd){var I_=document.createElement("div");I_.setAttribute("oninput","return;"),Zd=typeof I_.oninput=="function"}Jd=Zd}else Jd=!1;C_=Jd&&(!document.documentMode||9<document.documentMode)}function D_(){Xl&&(Xl.detachEvent("onpropertychange",N_),Wl=Xl=null)}function N_(r){if(r.propertyName==="value"&&eh(Wl)){var i=[];A_(i,Wl,r,Vr(r)),Ra(f1,i)}}function d1(r,i,o){r==="focusin"?(D_(),Xl=i,Wl=o,Xl.attachEvent("onpropertychange",N_)):r==="focusout"&&D_()}function m1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return eh(Wl)}function p1(r,i){if(r==="click")return eh(i)}function g1(r,i){if(r==="input"||r==="change")return eh(i)}function y1(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var vr=typeof Object.is=="function"?Object.is:y1;function Jl(r,i){if(vr(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var o=Object.keys(r),u=Object.keys(i);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!we.call(i,f)||!vr(r[f],i[f]))return!1}return!0}function x_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function O_(r,i){var o=x_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=i&&u>=i)return{node:o,offset:i-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=x_(o)}}function M_(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?M_(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function V_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var i=_i(r.document);i instanceof r.HTMLIFrameElement;){try{var o=typeof i.contentWindow.location.href=="string"}catch{o=!1}if(o)r=i.contentWindow;else break;i=_i(r.document)}return i}function em(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}var _1=Pr&&"documentMode"in document&&11>=document.documentMode,Io=null,tm=null,Zl=null,nm=!1;function P_(r,i,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;nm||Io==null||Io!==_i(u)||(u=Io,"selectionStart"in u&&em(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Zl&&Jl(Zl,u)||(Zl=u,u=Fh(tm,"onSelect"),0<u.length&&(i=new Ti("onSelect","select",null,i,o),r.push({event:i,listeners:u}),i.target=Io)))}function Vs(r,i){var o={};return o[r.toLowerCase()]=i.toLowerCase(),o["Webkit"+r]="webkit"+i,o["Moz"+r]="moz"+i,o}var Do={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},rm={},k_={};Pr&&(k_=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function Ps(r){if(rm[r])return rm[r];if(!Do[r])return r;var i=Do[r],o;for(o in i)if(i.hasOwnProperty(o)&&o in k_)return rm[r]=i[o];return r}var L_=Ps("animationend"),U_=Ps("animationiteration"),j_=Ps("animationstart"),v1=Ps("transitionrun"),E1=Ps("transitionstart"),T1=Ps("transitioncancel"),z_=Ps("transitionend"),B_=new Map,im="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");im.push("scrollEnd");function ri(r,i){B_.set(r,i),ir(i,[r])}var th=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Lr=[],No=0,am=0;function nh(){for(var r=No,i=am=No=0;i<r;){var o=Lr[i];Lr[i++]=null;var u=Lr[i];Lr[i++]=null;var f=Lr[i];Lr[i++]=null;var m=Lr[i];if(Lr[i++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}m!==0&&F_(o,f,m)}}function rh(r,i,o,u){Lr[No++]=r,Lr[No++]=i,Lr[No++]=o,Lr[No++]=u,am|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function sm(r,i,o,u){return rh(r,i,o,u),ih(r)}function ks(r,i){return rh(r,null,null,i),ih(r)}function F_(r,i,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&i!==null&&(f=31-Yt(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[i]:u.push(i),i.lane=o|536870912),m):null}function ih(r){if(50<Tu)throw Tu=0,pp=null,Error(a(185));for(var i=r.return;i!==null;)r=i,i=r.return;return r.tag===3?r.stateNode:null}var xo={};function b1(r,i,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(r,i,o,u){return new b1(r,i,o,u)}function om(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Hi(r,i){var o=r.alternate;return o===null?(o=Er(r.tag,i,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=i,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,i=r.dependencies,o.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function q_(r,i){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),r}function ah(r,i,o,u,f,m){var v=0;if(u=r,typeof r=="function")om(r)&&(v=1);else if(typeof r=="string")v=CC(r,o,ce.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=Er(31,o,i,f),r.elementType=I,r.lanes=m,r;case B:return Ls(o.children,f,m,i);case V:v=8,f|=24;break;case F:return r=Er(12,o,i,f|2),r.elementType=F,r.lanes=m,r;case re:return r=Er(13,o,i,f),r.elementType=re,r.lanes=m,r;case Y:return r=Er(19,o,i,f),r.elementType=Y,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case q:v=10;break e;case H:v=9;break e;case Q:v=11;break e;case b:v=14;break e;case w:v=16,u=null;break e}v=29,o=Error(a(130,r===null?"null":typeof r,"")),u=null}return i=Er(v,o,i,f),i.elementType=r,i.type=u,i.lanes=m,i}function Ls(r,i,o,u){return r=Er(7,r,u,i),r.lanes=o,r}function lm(r,i,o){return r=Er(6,r,null,i),r.lanes=o,r}function H_(r){var i=Er(18,null,null,0);return i.stateNode=r,i}function um(r,i,o){return i=Er(4,r.children!==null?r.children:[],r.key,i),i.lanes=o,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}var G_=new WeakMap;function Ur(r,i){if(typeof r=="object"&&r!==null){var o=G_.get(r);return o!==void 0?o:(i={value:r,source:i,stack:Ae(i)},G_.set(r,i),i)}return{value:r,source:i,stack:Ae(i)}}var Oo=[],Mo=0,sh=null,eu=0,jr=[],zr=0,Na=null,Ai=1,Ri="";function Gi(r,i){Oo[Mo++]=eu,Oo[Mo++]=sh,sh=r,eu=i}function $_(r,i,o){jr[zr++]=Ai,jr[zr++]=Ri,jr[zr++]=Na,Na=r;var u=Ai;r=Ri;var f=32-Yt(u)-1;u&=~(1<<f),o+=1;var m=32-Yt(i)+f;if(30<m){var v=f-f%5;m=(u&(1<<v)-1).toString(32),u>>=v,f-=v,Ai=1<<32-Yt(i)+f|o<<f|u,Ri=m+r}else Ai=1<<m|o<<f|u,Ri=r}function cm(r){r.return!==null&&(Gi(r,1),$_(r,1,0))}function hm(r){for(;r===sh;)sh=Oo[--Mo],Oo[Mo]=null,eu=Oo[--Mo],Oo[Mo]=null;for(;r===Na;)Na=jr[--zr],jr[zr]=null,Ri=jr[--zr],jr[zr]=null,Ai=jr[--zr],jr[zr]=null}function K_(r,i){jr[zr++]=Ai,jr[zr++]=Ri,jr[zr++]=Na,Ai=i.id,Ri=i.overflow,Na=r}var On=null,Ht=null,gt=!1,xa=null,Br=!1,fm=Error(a(519));function Oa(r){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tu(Ur(i,r)),fm}function Y_(r){var i=r.stateNode,o=r.type,u=r.memoizedProps;switch(i[Ee]=r,i[Se]=u,o){case"dialog":ct("cancel",i),ct("close",i);break;case"iframe":case"object":case"embed":ct("load",i);break;case"video":case"audio":for(o=0;o<Su.length;o++)ct(Su[o],i);break;case"source":ct("error",i);break;case"img":case"image":case"link":ct("error",i),ct("load",i);break;case"details":ct("toggle",i);break;case"input":ct("invalid",i),jc(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":ct("invalid",i);break;case"textarea":ct("invalid",i),Sa(i,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||i.textContent===""+o||u.suppressHydrationWarning===!0||hT(i.textContent,o)?(u.popover!=null&&(ct("beforetoggle",i),ct("toggle",i)),u.onScroll!=null&&ct("scroll",i),u.onScrollEnd!=null&&ct("scrollend",i),u.onClick!=null&&(i.onclick=Jr),i=!0):i=!1,i||Oa(r,!0)}function Q_(r){for(On=r.return;On;)switch(On.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:On=On.return}}function Vo(r){if(r!==On)return!1;if(!gt)return Q_(r),gt=!0,!1;var i=r.tag,o;if((o=i!==3&&i!==27)&&((o=i===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Np(r.type,r.memoizedProps)),o=!o),o&&Ht&&Oa(r),Q_(r),i===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=ET(r)}else if(i===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(317));Ht=ET(r)}else i===27?(i=Ht,$a(r.type)?(r=Pp,Pp=null,Ht=r):Ht=i):Ht=On?qr(r.stateNode.nextSibling):null;return!0}function Us(){Ht=On=null,gt=!1}function dm(){var r=xa;return r!==null&&(cr===null?cr=r:cr.push.apply(cr,r),xa=null),r}function tu(r){xa===null?xa=[r]:xa.push(r)}var mm=j(null),js=null,$i=null;function Ma(r,i,o){oe(mm,i._currentValue),i._currentValue=o}function Ki(r){r._currentValue=mm.current,K(mm)}function pm(r,i,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),r===o)break;r=r.return}}function gm(r,i,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var v=f.child;m=m.firstContext;e:for(;m!==null;){var C=m;m=f;for(var L=0;L<i.length;L++)if(C.context===i[L]){m.lanes|=o,C=m.alternate,C!==null&&(C.lanes|=o),pm(m.return,o,r),u||(v=null);break e}m=C.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(a(341));v.lanes|=o,m=v.alternate,m!==null&&(m.lanes|=o),pm(v,o,r),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===r){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function Po(r,i,o,u){r=null;for(var f=i,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var C=f.type;vr(f.pendingProps.value,v.value)||(r!==null?r.push(C):r=[C])}}else if(f===Pe.current){if(v=f.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Iu):r=[Iu])}f=f.return}r!==null&&gm(i,r,o,u),i.flags|=262144}function oh(r){for(r=r.firstContext;r!==null;){if(!vr(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function zs(r){js=r,$i=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Mn(r){return X_(js,r)}function lh(r,i){return js===null&&zs(r),X_(r,i)}function X_(r,i){var o=i._currentValue;if(i={context:i,memoizedValue:o,next:null},$i===null){if(r===null)throw Error(a(308));$i=i,r.dependencies={lanes:0,firstContext:i},r.flags|=524288}else $i=$i.next=i;return o}var S1=typeof AbortController<"u"?AbortController:function(){var r=[],i=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){i.aborted=!0,r.forEach(function(o){return o()})}},w1=n.unstable_scheduleCallback,A1=n.unstable_NormalPriority,mn={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ym(){return{controller:new S1,data:new Map,refCount:0}}function nu(r){r.refCount--,r.refCount===0&&w1(A1,function(){r.controller.abort()})}var ru=null,_m=0,ko=0,Lo=null;function R1(r,i){if(ru===null){var o=ru=[];_m=0,ko=Tp(),Lo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return _m++,i.then(W_,W_),i}function W_(){if(--_m===0&&ru!==null){Lo!==null&&(Lo.status="fulfilled");var r=ru;ru=null,ko=0,Lo=null;for(var i=0;i<r.length;i++)(0,r[i])()}}function C1(r,i){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<o.length;f++)(0,o[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var J_=W.S;W.S=function(r,i){PE=Ye(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&R1(r,i),J_!==null&&J_(r,i)};var Bs=j(null);function vm(){var r=Bs.current;return r!==null?r:Ut.pooledCache}function uh(r,i){i===null?oe(Bs,Bs.current):oe(Bs,i.pool)}function Z_(){var r=vm();return r===null?null:{parent:mn._currentValue,pool:r}}var Uo=Error(a(460)),Em=Error(a(474)),ch=Error(a(542)),hh={then:function(){}};function ev(r){return r=r.status,r==="fulfilled"||r==="rejected"}function tv(r,i,o){switch(o=r[o],o===void 0?r.push(i):o!==i&&(i.then(Jr,Jr),i=o),i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,rv(r),r;default:if(typeof i.status=="string")i.then(Jr,Jr);else{if(r=Ut,r!==null&&100<r.shellSuspendCounter)throw Error(a(482));r=i,r.status="pending",r.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw r=i.reason,rv(r),r}throw qs=i,Uo}}function Fs(r){try{var i=r._init;return i(r._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(qs=o,Uo):o}}var qs=null;function nv(){if(qs===null)throw Error(a(459));var r=qs;return qs=null,r}function rv(r){if(r===Uo||r===ch)throw Error(a(483))}var jo=null,iu=0;function fh(r){var i=iu;return iu+=1,jo===null&&(jo=[]),tv(jo,r,i)}function au(r,i){i=i.props.ref,r.ref=i!==void 0?i:null}function dh(r,i){throw i.$$typeof===S?Error(a(525)):(r=Object.prototype.toString.call(i),Error(a(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r)))}function iv(r){function i($,z){if(r){var J=$.deletions;J===null?($.deletions=[z],$.flags|=16):J.push(z)}}function o($,z){if(!r)return null;for(;z!==null;)i($,z),z=z.sibling;return null}function u($){for(var z=new Map;$!==null;)$.key!==null?z.set($.key,$):z.set($.index,$),$=$.sibling;return z}function f($,z){return $=Hi($,z),$.index=0,$.sibling=null,$}function m($,z,J){return $.index=J,r?(J=$.alternate,J!==null?(J=J.index,J<z?($.flags|=67108866,z):J):($.flags|=67108866,z)):($.flags|=1048576,z)}function v($){return r&&$.alternate===null&&($.flags|=67108866),$}function C($,z,J,le){return z===null||z.tag!==6?(z=lm(J,$.mode,le),z.return=$,z):(z=f(z,J),z.return=$,z)}function L($,z,J,le){var Ue=J.type;return Ue===B?se($,z,J.props.children,le,J.key):z!==null&&(z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===w&&Fs(Ue)===z.type)?(z=f(z,J.props),au(z,J),z.return=$,z):(z=ah(J.type,J.key,J.props,null,$.mode,le),au(z,J),z.return=$,z)}function Z($,z,J,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==J.containerInfo||z.stateNode.implementation!==J.implementation?(z=um(J,$.mode,le),z.return=$,z):(z=f(z,J.children||[]),z.return=$,z)}function se($,z,J,le,Ue){return z===null||z.tag!==7?(z=Ls(J,$.mode,le,Ue),z.return=$,z):(z=f(z,J),z.return=$,z)}function fe($,z,J){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=lm(""+z,$.mode,J),z.return=$,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case R:return J=ah(z.type,z.key,z.props,null,$.mode,J),au(J,z),J.return=$,J;case U:return z=um(z,$.mode,J),z.return=$,z;case w:return z=Fs(z),fe($,z,J)}if(Ze(z)||P(z))return z=Ls(z,$.mode,J,null),z.return=$,z;if(typeof z.then=="function")return fe($,fh(z),J);if(z.$$typeof===q)return fe($,lh($,z),J);dh($,z)}return null}function te($,z,J,le){var Ue=z!==null?z.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ue!==null?null:C($,z,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return J.key===Ue?L($,z,J,le):null;case U:return J.key===Ue?Z($,z,J,le):null;case w:return J=Fs(J),te($,z,J,le)}if(Ze(J)||P(J))return Ue!==null?null:se($,z,J,le,null);if(typeof J.then=="function")return te($,z,fh(J),le);if(J.$$typeof===q)return te($,z,lh($,J),le);dh($,J)}return null}function ie($,z,J,le,Ue){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return $=$.get(J)||null,C(z,$,""+le,Ue);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case R:return $=$.get(le.key===null?J:le.key)||null,L(z,$,le,Ue);case U:return $=$.get(le.key===null?J:le.key)||null,Z(z,$,le,Ue);case w:return le=Fs(le),ie($,z,J,le,Ue)}if(Ze(le)||P(le))return $=$.get(J)||null,se(z,$,le,Ue,null);if(typeof le.then=="function")return ie($,z,J,fh(le),Ue);if(le.$$typeof===q)return ie($,z,J,lh(z,le),Ue);dh(z,le)}return null}function xe($,z,J,le){for(var Ue=null,vt=null,Oe=z,it=z=0,ft=null;Oe!==null&&it<J.length;it++){Oe.index>it?(ft=Oe,Oe=null):ft=Oe.sibling;var Et=te($,Oe,J[it],le);if(Et===null){Oe===null&&(Oe=ft);break}r&&Oe&&Et.alternate===null&&i($,Oe),z=m(Et,z,it),vt===null?Ue=Et:vt.sibling=Et,vt=Et,Oe=ft}if(it===J.length)return o($,Oe),gt&&Gi($,it),Ue;if(Oe===null){for(;it<J.length;it++)Oe=fe($,J[it],le),Oe!==null&&(z=m(Oe,z,it),vt===null?Ue=Oe:vt.sibling=Oe,vt=Oe);return gt&&Gi($,it),Ue}for(Oe=u(Oe);it<J.length;it++)ft=ie(Oe,$,it,J[it],le),ft!==null&&(r&&ft.alternate!==null&&Oe.delete(ft.key===null?it:ft.key),z=m(ft,z,it),vt===null?Ue=ft:vt.sibling=ft,vt=ft);return r&&Oe.forEach(function(Wa){return i($,Wa)}),gt&&Gi($,it),Ue}function qe($,z,J,le){if(J==null)throw Error(a(151));for(var Ue=null,vt=null,Oe=z,it=z=0,ft=null,Et=J.next();Oe!==null&&!Et.done;it++,Et=J.next()){Oe.index>it?(ft=Oe,Oe=null):ft=Oe.sibling;var Wa=te($,Oe,Et.value,le);if(Wa===null){Oe===null&&(Oe=ft);break}r&&Oe&&Wa.alternate===null&&i($,Oe),z=m(Wa,z,it),vt===null?Ue=Wa:vt.sibling=Wa,vt=Wa,Oe=ft}if(Et.done)return o($,Oe),gt&&Gi($,it),Ue;if(Oe===null){for(;!Et.done;it++,Et=J.next())Et=fe($,Et.value,le),Et!==null&&(z=m(Et,z,it),vt===null?Ue=Et:vt.sibling=Et,vt=Et);return gt&&Gi($,it),Ue}for(Oe=u(Oe);!Et.done;it++,Et=J.next())Et=ie(Oe,$,it,Et.value,le),Et!==null&&(r&&Et.alternate!==null&&Oe.delete(Et.key===null?it:Et.key),z=m(Et,z,it),vt===null?Ue=Et:vt.sibling=Et,vt=Et);return r&&Oe.forEach(function(UC){return i($,UC)}),gt&&Gi($,it),Ue}function Pt($,z,J,le){if(typeof J=="object"&&J!==null&&J.type===B&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case R:e:{for(var Ue=J.key;z!==null;){if(z.key===Ue){if(Ue=J.type,Ue===B){if(z.tag===7){o($,z.sibling),le=f(z,J.props.children),le.return=$,$=le;break e}}else if(z.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===w&&Fs(Ue)===z.type){o($,z.sibling),le=f(z,J.props),au(le,J),le.return=$,$=le;break e}o($,z);break}else i($,z);z=z.sibling}J.type===B?(le=Ls(J.props.children,$.mode,le,J.key),le.return=$,$=le):(le=ah(J.type,J.key,J.props,null,$.mode,le),au(le,J),le.return=$,$=le)}return v($);case U:e:{for(Ue=J.key;z!==null;){if(z.key===Ue)if(z.tag===4&&z.stateNode.containerInfo===J.containerInfo&&z.stateNode.implementation===J.implementation){o($,z.sibling),le=f(z,J.children||[]),le.return=$,$=le;break e}else{o($,z);break}else i($,z);z=z.sibling}le=um(J,$.mode,le),le.return=$,$=le}return v($);case w:return J=Fs(J),Pt($,z,J,le)}if(Ze(J))return xe($,z,J,le);if(P(J)){if(Ue=P(J),typeof Ue!="function")throw Error(a(150));return J=Ue.call(J),qe($,z,J,le)}if(typeof J.then=="function")return Pt($,z,fh(J),le);if(J.$$typeof===q)return Pt($,z,lh($,J),le);dh($,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,z!==null&&z.tag===6?(o($,z.sibling),le=f(z,J),le.return=$,$=le):(o($,z),le=lm(J,$.mode,le),le.return=$,$=le),v($)):o($,z)}return function($,z,J,le){try{iu=0;var Ue=Pt($,z,J,le);return jo=null,Ue}catch(Oe){if(Oe===Uo||Oe===ch)throw Oe;var vt=Er(29,Oe,null,$.mode);return vt.lanes=le,vt.return=$,vt}finally{}}}var Hs=iv(!0),av=iv(!1),Va=!1;function Tm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Pa(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ka(r,i,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(wt&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=ih(r),F_(r,null,o),i}return rh(r,u,i,o),ih(r)}function su(r,i,o){if(i=i.updateQueue,i!==null&&(i=i.shared,(o&4194048)!==0)){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,k(r,o)}}function Sm(r,i){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=v:m=m.next=v,o=o.next}while(o!==null);m===null?f=m=i:m=m.next=i}else f=m=i;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=i:r.next=i,o.lastBaseUpdate=i}var wm=!1;function ou(){if(wm){var r=Lo;if(r!==null)throw r}}function lu(r,i,o,u){wm=!1;var f=r.updateQueue;Va=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,C=f.shared.pending;if(C!==null){f.shared.pending=null;var L=C,Z=L.next;L.next=null,v===null?m=Z:v.next=Z,v=L;var se=r.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==v&&(C===null?se.firstBaseUpdate=Z:C.next=Z,se.lastBaseUpdate=L))}if(m!==null){var fe=f.baseState;v=0,se=Z=L=null,C=m;do{var te=C.lane&-536870913,ie=te!==C.lane;if(ie?(ht&te)===te:(u&te)===te){te!==0&&te===ko&&(wm=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var xe=r,qe=C;te=i;var Pt=o;switch(qe.tag){case 1:if(xe=qe.payload,typeof xe=="function"){fe=xe.call(Pt,fe,te);break e}fe=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=qe.payload,te=typeof xe=="function"?xe.call(Pt,fe,te):xe,te==null)break e;fe=E({},fe,te);break e;case 2:Va=!0}}te=C.callback,te!==null&&(r.flags|=64,ie&&(r.flags|=8192),ie=f.callbacks,ie===null?f.callbacks=[te]:ie.push(te))}else ie={lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(Z=se=ie,L=fe):se=se.next=ie,v|=te;if(C=C.next,C===null){if(C=f.shared.pending,C===null)break;ie=C,C=ie.next,ie.next=null,f.lastBaseUpdate=ie,f.shared.pending=null}}while(!0);se===null&&(L=fe),f.baseState=L,f.firstBaseUpdate=Z,f.lastBaseUpdate=se,m===null&&(f.shared.lanes=0),Ba|=v,r.lanes=v,r.memoizedState=fe}}function sv(r,i){if(typeof r!="function")throw Error(a(191,r));r.call(i)}function ov(r,i){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)sv(o[r],i)}var zo=j(null),mh=j(0);function lv(r,i){r=na,oe(mh,r),oe(zo,i),na=r|i.baseLanes}function Am(){oe(mh,na),oe(zo,zo.current)}function Rm(){na=mh.current,K(zo),K(mh)}var Tr=j(null),Fr=null;function La(r){var i=r.alternate;oe(un,un.current&1),oe(Tr,r),Fr===null&&(i===null||zo.current!==null||i.memoizedState!==null)&&(Fr=r)}function Cm(r){oe(un,un.current),oe(Tr,r),Fr===null&&(Fr=r)}function uv(r){r.tag===22?(oe(un,un.current),oe(Tr,r),Fr===null&&(Fr=r)):Ua()}function Ua(){oe(un,un.current),oe(Tr,Tr.current)}function br(r){K(Tr),Fr===r&&(Fr=null),K(un)}var un=j(0);function ph(r){for(var i=r;i!==null;){if(i.tag===13){var o=i.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Mp(o)||Vp(o)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Yi=0,tt=null,Mt=null,pn=null,gh=!1,Bo=!1,Gs=!1,yh=0,uu=0,Fo=null,I1=0;function an(){throw Error(a(321))}function Im(r,i){if(i===null)return!1;for(var o=0;o<i.length&&o<r.length;o++)if(!vr(r[o],i[o]))return!1;return!0}function Dm(r,i,o,u,f,m){return Yi=m,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,W.H=r===null||r.memoizedState===null?$v:Hm,Gs=!1,m=o(u,f),Gs=!1,Bo&&(m=hv(i,o,u,f)),cv(r),m}function cv(r){W.H=fu;var i=Mt!==null&&Mt.next!==null;if(Yi=0,pn=Mt=tt=null,gh=!1,uu=0,Fo=null,i)throw Error(a(300));r===null||gn||(r=r.dependencies,r!==null&&oh(r)&&(gn=!0))}function hv(r,i,o,u){tt=r;var f=0;do{if(Bo&&(Fo=null),uu=0,Bo=!1,25<=f)throw Error(a(301));if(f+=1,pn=Mt=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}W.H=Kv,m=i(o,u)}while(Bo);return m}function D1(){var r=W.H,i=r.useState()[0];return i=typeof i.then=="function"?cu(i):i,r=r.useState()[0],(Mt!==null?Mt.memoizedState:null)!==r&&(tt.flags|=1024),i}function Nm(){var r=yh!==0;return yh=0,r}function xm(r,i,o){i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~o}function Om(r){if(gh){for(r=r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}gh=!1}Yi=0,pn=Mt=tt=null,Bo=!1,uu=yh=0,Fo=null}function Zn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?tt.memoizedState=pn=r:pn=pn.next=r,pn}function cn(){if(Mt===null){var r=tt.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var i=pn===null?tt.memoizedState:pn.next;if(i!==null)pn=i,Mt=r;else{if(r===null)throw tt.alternate===null?Error(a(467)):Error(a(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},pn===null?tt.memoizedState=pn=r:pn=pn.next=r}return pn}function _h(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(r){var i=uu;return uu+=1,Fo===null&&(Fo=[]),r=tv(Fo,r,i),i=tt,(pn===null?i.memoizedState:pn.next)===null&&(i=i.alternate,W.H=i===null||i.memoizedState===null?$v:Hm),r}function vh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return cu(r);if(r.$$typeof===q)return Mn(r)}throw Error(a(438,String(r)))}function Mm(r){var i=null,o=tt.updateQueue;if(o!==null&&(i=o.memoCache),i==null){var u=tt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),o===null&&(o=_h(),tt.updateQueue=o),o.memoCache=i,o=i.data[i.index],o===void 0)for(o=i.data[i.index]=Array(r),u=0;u<r;u++)o[u]=N;return i.index++,o}function Qi(r,i){return typeof i=="function"?i(r):i}function Eh(r){var i=cn();return Vm(i,Mt,r)}function Vm(r,i,o){var u=r.queue;if(u===null)throw Error(a(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}i.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{i=f.next;var C=v=null,L=null,Z=i,se=!1;do{var fe=Z.lane&-536870913;if(fe!==Z.lane?(ht&fe)===fe:(Yi&fe)===fe){var te=Z.revertLane;if(te===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),fe===ko&&(se=!0);else if((Yi&te)===te){Z=Z.next,te===ko&&(se=!0);continue}else fe={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(C=L=fe,v=m):L=L.next=fe,tt.lanes|=te,Ba|=te;fe=Z.action,Gs&&o(m,fe),m=Z.hasEagerState?Z.eagerState:o(m,fe)}else te={lane:fe,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},L===null?(C=L=te,v=m):L=L.next=te,tt.lanes|=fe,Ba|=fe;Z=Z.next}while(Z!==null&&Z!==i);if(L===null?v=m:L.next=C,!vr(m,r.memoizedState)&&(gn=!0,se&&(o=Lo,o!==null)))throw o;r.memoizedState=m,r.baseState=v,r.baseQueue=L,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Pm(r){var i=cn(),o=i.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=i.memoizedState;if(f!==null){o.pending=null;var v=f=f.next;do m=r(m,v.action),v=v.next;while(v!==f);vr(m,i.memoizedState)||(gn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),o.lastRenderedState=m}return[m,u]}function fv(r,i,o){var u=tt,f=cn(),m=gt;if(m){if(o===void 0)throw Error(a(407));o=o()}else o=i();var v=!vr((Mt||f).memoizedState,o);if(v&&(f.memoizedState=o,gn=!0),f=f.queue,Um(pv.bind(null,u,f,r),[r]),f.getSnapshot!==i||v||pn!==null&&pn.memoizedState.tag&1){if(u.flags|=2048,qo(9,{destroy:void 0},mv.bind(null,u,f,o,i),null),Ut===null)throw Error(a(349));m||(Yi&127)!==0||dv(u,i,o)}return o}function dv(r,i,o){r.flags|=16384,r={getSnapshot:i,value:o},i=tt.updateQueue,i===null?(i=_h(),tt.updateQueue=i,i.stores=[r]):(o=i.stores,o===null?i.stores=[r]:o.push(r))}function mv(r,i,o,u){i.value=o,i.getSnapshot=u,gv(i)&&yv(r)}function pv(r,i,o){return o(function(){gv(i)&&yv(r)})}function gv(r){var i=r.getSnapshot;r=r.value;try{var o=i();return!vr(r,o)}catch{return!0}}function yv(r){var i=ks(r,2);i!==null&&hr(i,r,2)}function km(r){var i=Zn();if(typeof r=="function"){var o=r;if(r=o(),Gs){Qn(!0);try{o()}finally{Qn(!1)}}}return i.memoizedState=i.baseState=r,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:r},i}function _v(r,i,o,u){return r.baseState=o,Vm(r,Mt,typeof u=="function"?u:Qi)}function N1(r,i,o,u,f){if(Sh(r))throw Error(a(485));if(r=i.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){m.listeners.push(v)}};W.T!==null?o(!0):m.isTransition=!1,u(m),o=i.pending,o===null?(m.next=i.pending=m,vv(i,m)):(m.next=o.next,i.pending=o.next=m)}}function vv(r,i){var o=i.action,u=i.payload,f=r.state;if(i.isTransition){var m=W.T,v={};W.T=v;try{var C=o(f,u),L=W.S;L!==null&&L(v,C),Ev(r,i,C)}catch(Z){Lm(r,i,Z)}finally{m!==null&&v.types!==null&&(m.types=v.types),W.T=m}}else try{m=o(f,u),Ev(r,i,m)}catch(Z){Lm(r,i,Z)}}function Ev(r,i,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Tv(r,i,u)},function(u){return Lm(r,i,u)}):Tv(r,i,o)}function Tv(r,i,o){i.status="fulfilled",i.value=o,bv(i),r.state=o,i=r.pending,i!==null&&(o=i.next,o===i?r.pending=null:(o=o.next,i.next=o,vv(r,o)))}function Lm(r,i,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=o,bv(i),i=i.next;while(i!==u)}r.action=null}function bv(r){r=r.listeners;for(var i=0;i<r.length;i++)(0,r[i])()}function Sv(r,i){return i}function wv(r,i){if(gt){var o=Ut.formState;if(o!==null){e:{var u=tt;if(gt){if(Ht){t:{for(var f=Ht,m=Br;f.nodeType!==8;){if(!m){f=null;break t}if(f=qr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Ht=qr(f.nextSibling),u=f.data==="F!";break e}}Oa(u)}u=!1}u&&(i=o[0])}}return o=Zn(),o.memoizedState=o.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sv,lastRenderedState:i},o.queue=u,o=qv.bind(null,tt,u),u.dispatch=o,u=km(!1),m=qm.bind(null,tt,!1,u.queue),u=Zn(),f={state:i,dispatch:null,action:r,pending:null},u.queue=f,o=N1.bind(null,tt,f,m,o),f.dispatch=o,u.memoizedState=r,[i,o,!1]}function Av(r){var i=cn();return Rv(i,Mt,r)}function Rv(r,i,o){if(i=Vm(r,i,Sv)[0],r=Eh(Qi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=cu(i)}catch(v){throw v===Uo?ch:v}else u=i;i=cn();var f=i.queue,m=f.dispatch;return o!==i.memoizedState&&(tt.flags|=2048,qo(9,{destroy:void 0},x1.bind(null,f,o),null)),[u,m,r]}function x1(r,i){r.action=i}function Cv(r){var i=cn(),o=Mt;if(o!==null)return Rv(i,o,r);cn(),i=i.memoizedState,o=cn();var u=o.queue.dispatch;return o.memoizedState=r,[i,u,!1]}function qo(r,i,o,u){return r={tag:r,create:o,deps:u,inst:i,next:null},i=tt.updateQueue,i===null&&(i=_h(),tt.updateQueue=i),o=i.lastEffect,o===null?i.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,i.lastEffect=r),r}function Iv(){return cn().memoizedState}function Th(r,i,o,u){var f=Zn();tt.flags|=r,f.memoizedState=qo(1|i,{destroy:void 0},o,u===void 0?null:u)}function bh(r,i,o,u){var f=cn();u=u===void 0?null:u;var m=f.memoizedState.inst;Mt!==null&&u!==null&&Im(u,Mt.memoizedState.deps)?f.memoizedState=qo(i,m,o,u):(tt.flags|=r,f.memoizedState=qo(1|i,m,o,u))}function Dv(r,i){Th(8390656,8,r,i)}function Um(r,i){bh(2048,8,r,i)}function O1(r){tt.flags|=4;var i=tt.updateQueue;if(i===null)i=_h(),tt.updateQueue=i,i.events=[r];else{var o=i.events;o===null?i.events=[r]:o.push(r)}}function Nv(r){var i=cn().memoizedState;return O1({ref:i,nextImpl:r}),function(){if((wt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function xv(r,i){return bh(4,2,r,i)}function Ov(r,i){return bh(4,4,r,i)}function Mv(r,i){if(typeof i=="function"){r=r();var o=i(r);return function(){typeof o=="function"?o():i(null)}}if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Vv(r,i,o){o=o!=null?o.concat([r]):null,bh(4,4,Mv.bind(null,i,r),o)}function jm(){}function Pv(r,i){var o=cn();i=i===void 0?null:i;var u=o.memoizedState;return i!==null&&Im(i,u[1])?u[0]:(o.memoizedState=[r,i],r)}function kv(r,i){var o=cn();i=i===void 0?null:i;var u=o.memoizedState;if(i!==null&&Im(i,u[1]))return u[0];if(u=r(),Gs){Qn(!0);try{r()}finally{Qn(!1)}}return o.memoizedState=[u,i],u}function zm(r,i,o){return o===void 0||(Yi&1073741824)!==0&&(ht&261930)===0?r.memoizedState=i:(r.memoizedState=o,r=LE(),tt.lanes|=r,Ba|=r,o)}function Lv(r,i,o,u){return vr(o,i)?o:zo.current!==null?(r=zm(r,o,u),vr(r,i)||(gn=!0),r):(Yi&42)===0||(Yi&1073741824)!==0&&(ht&261930)===0?(gn=!0,r.memoizedState=o):(r=LE(),tt.lanes|=r,Ba|=r,i)}function Uv(r,i,o,u,f){var m=pe.p;pe.p=m!==0&&8>m?m:8;var v=W.T,C={};W.T=C,qm(r,!1,i,o);try{var L=f(),Z=W.S;if(Z!==null&&Z(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var se=C1(L,u);hu(r,i,se,Ar(r))}else hu(r,i,u,Ar(r))}catch(fe){hu(r,i,{then:function(){},status:"rejected",reason:fe},Ar())}finally{pe.p=m,v!==null&&C.types!==null&&(v.types=C.types),W.T=v}}function M1(){}function Bm(r,i,o,u){if(r.tag!==5)throw Error(a(476));var f=jv(r).queue;Uv(r,f,i,_e,o===null?M1:function(){return zv(r),o(u)})}function jv(r){var i=r.memoizedState;if(i!==null)return i;i={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:_e},next:null};var o={};return i.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:o},next:null},r.memoizedState=i,r=r.alternate,r!==null&&(r.memoizedState=i),i}function zv(r){var i=jv(r);i.next===null&&(i=r.alternate.memoizedState),hu(r,i.next.queue,{},Ar())}function Fm(){return Mn(Iu)}function Bv(){return cn().memoizedState}function Fv(){return cn().memoizedState}function V1(r){for(var i=r.return;i!==null;){switch(i.tag){case 24:case 3:var o=Ar();r=Pa(o);var u=ka(i,r,o);u!==null&&(hr(u,i,o),su(u,i,o)),i={cache:ym()},r.payload=i;return}i=i.return}}function P1(r,i,o){var u=Ar();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sh(r)?Hv(i,o):(o=sm(r,i,o,u),o!==null&&(hr(o,r,u),Gv(o,i,u)))}function qv(r,i,o){var u=Ar();hu(r,i,o,u)}function hu(r,i,o,u){var f={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Sh(r))Hv(i,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var v=i.lastRenderedState,C=m(v,o);if(f.hasEagerState=!0,f.eagerState=C,vr(C,v))return rh(r,i,f,0),Ut===null&&nh(),!1}catch{}finally{}if(o=sm(r,i,f,u),o!==null)return hr(o,r,u),Gv(o,i,u),!0}return!1}function qm(r,i,o,u){if(u={lane:2,revertLane:Tp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sh(r)){if(i)throw Error(a(479))}else i=sm(r,o,u,2),i!==null&&hr(i,r,2)}function Sh(r){var i=r.alternate;return r===tt||i!==null&&i===tt}function Hv(r,i){Bo=gh=!0;var o=r.pending;o===null?i.next=i:(i.next=o.next,o.next=i),r.pending=i}function Gv(r,i,o){if((o&4194048)!==0){var u=i.lanes;u&=r.pendingLanes,o|=u,i.lanes=o,k(r,o)}}var fu={readContext:Mn,use:vh,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};fu.useEffectEvent=an;var $v={readContext:Mn,use:vh,useCallback:function(r,i){return Zn().memoizedState=[r,i===void 0?null:i],r},useContext:Mn,useEffect:Dv,useImperativeHandle:function(r,i,o){o=o!=null?o.concat([r]):null,Th(4194308,4,Mv.bind(null,i,r),o)},useLayoutEffect:function(r,i){return Th(4194308,4,r,i)},useInsertionEffect:function(r,i){Th(4,2,r,i)},useMemo:function(r,i){var o=Zn();i=i===void 0?null:i;var u=r();if(Gs){Qn(!0);try{r()}finally{Qn(!1)}}return o.memoizedState=[u,i],u},useReducer:function(r,i,o){var u=Zn();if(o!==void 0){var f=o(i);if(Gs){Qn(!0);try{o(i)}finally{Qn(!1)}}}else f=i;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=P1.bind(null,tt,r),[u.memoizedState,r]},useRef:function(r){var i=Zn();return r={current:r},i.memoizedState=r},useState:function(r){r=km(r);var i=r.queue,o=qv.bind(null,tt,i);return i.dispatch=o,[r.memoizedState,o]},useDebugValue:jm,useDeferredValue:function(r,i){var o=Zn();return zm(o,r,i)},useTransition:function(){var r=km(!1);return r=Uv.bind(null,tt,r.queue,!0,!1),Zn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,i,o){var u=tt,f=Zn();if(gt){if(o===void 0)throw Error(a(407));o=o()}else{if(o=i(),Ut===null)throw Error(a(349));(ht&127)!==0||dv(u,i,o)}f.memoizedState=o;var m={value:o,getSnapshot:i};return f.queue=m,Dv(pv.bind(null,u,m,r),[r]),u.flags|=2048,qo(9,{destroy:void 0},mv.bind(null,u,m,o,i),null),o},useId:function(){var r=Zn(),i=Ut.identifierPrefix;if(gt){var o=Ri,u=Ai;o=(u&~(1<<32-Yt(u)-1)).toString(32)+o,i="_"+i+"R_"+o,o=yh++,0<o&&(i+="H"+o.toString(32)),i+="_"}else o=I1++,i="_"+i+"r_"+o.toString(32)+"_";return r.memoizedState=i},useHostTransitionStatus:Fm,useFormState:wv,useActionState:wv,useOptimistic:function(r){var i=Zn();i.memoizedState=i.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=o,i=qm.bind(null,tt,!0,o),o.dispatch=i,[r,i]},useMemoCache:Mm,useCacheRefresh:function(){return Zn().memoizedState=V1.bind(null,tt)},useEffectEvent:function(r){var i=Zn(),o={impl:r};return i.memoizedState=o,function(){if((wt&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},Hm={readContext:Mn,use:vh,useCallback:Pv,useContext:Mn,useEffect:Um,useImperativeHandle:Vv,useInsertionEffect:xv,useLayoutEffect:Ov,useMemo:kv,useReducer:Eh,useRef:Iv,useState:function(){return Eh(Qi)},useDebugValue:jm,useDeferredValue:function(r,i){var o=cn();return Lv(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Eh(Qi)[0],i=cn().memoizedState;return[typeof r=="boolean"?r:cu(r),i]},useSyncExternalStore:fv,useId:Bv,useHostTransitionStatus:Fm,useFormState:Av,useActionState:Av,useOptimistic:function(r,i){var o=cn();return _v(o,Mt,r,i)},useMemoCache:Mm,useCacheRefresh:Fv};Hm.useEffectEvent=Nv;var Kv={readContext:Mn,use:vh,useCallback:Pv,useContext:Mn,useEffect:Um,useImperativeHandle:Vv,useInsertionEffect:xv,useLayoutEffect:Ov,useMemo:kv,useReducer:Pm,useRef:Iv,useState:function(){return Pm(Qi)},useDebugValue:jm,useDeferredValue:function(r,i){var o=cn();return Mt===null?zm(o,r,i):Lv(o,Mt.memoizedState,r,i)},useTransition:function(){var r=Pm(Qi)[0],i=cn().memoizedState;return[typeof r=="boolean"?r:cu(r),i]},useSyncExternalStore:fv,useId:Bv,useHostTransitionStatus:Fm,useFormState:Cv,useActionState:Cv,useOptimistic:function(r,i){var o=cn();return Mt!==null?_v(o,Mt,r,i):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Mm,useCacheRefresh:Fv};Kv.useEffectEvent=Nv;function Gm(r,i,o,u){i=r.memoizedState,o=o(u,i),o=o==null?i:E({},i,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var $m={enqueueSetState:function(r,i,o){r=r._reactInternals;var u=Ar(),f=Pa(u);f.payload=i,o!=null&&(f.callback=o),i=ka(r,f,u),i!==null&&(hr(i,r,u),su(i,r,u))},enqueueReplaceState:function(r,i,o){r=r._reactInternals;var u=Ar(),f=Pa(u);f.tag=1,f.payload=i,o!=null&&(f.callback=o),i=ka(r,f,u),i!==null&&(hr(i,r,u),su(i,r,u))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var o=Ar(),u=Pa(o);u.tag=2,i!=null&&(u.callback=i),i=ka(r,u,o),i!==null&&(hr(i,r,o),su(i,r,o))}};function Yv(r,i,o,u,f,m,v){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,v):i.prototype&&i.prototype.isPureReactComponent?!Jl(o,u)||!Jl(f,m):!0}function Qv(r,i,o,u){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(o,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(o,u),i.state!==r&&$m.enqueueReplaceState(i,i.state,null)}function $s(r,i){var o=i;if("ref"in i){o={};for(var u in i)u!=="ref"&&(o[u]=i[u])}if(r=r.defaultProps){o===i&&(o=E({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}function Xv(r){th(r)}function Wv(r){console.error(r)}function Jv(r){th(r)}function wh(r,i){try{var o=r.onUncaughtError;o(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function Zv(r,i,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Km(r,i,o){return o=Pa(o),o.tag=3,o.payload={element:null},o.callback=function(){wh(r,i)},o}function eE(r){return r=Pa(r),r.tag=3,r}function tE(r,i,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){Zv(i,o,u)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(r.callback=function(){Zv(i,o,u),typeof f!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function k1(r,i,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=o.alternate,i!==null&&Po(i,o,f,!0),o=Tr.current,o!==null){switch(o.tag){case 31:case 13:return Fr===null?kh():o.alternate===null&&sn===0&&(sn=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===hh?o.flags|=16384:(i=o.updateQueue,i===null?o.updateQueue=new Set([u]):i.add(u),_p(r,u,f)),!1;case 22:return o.flags|=65536,u===hh?o.flags|=16384:(i=o.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=i):(o=i.retryQueue,o===null?i.retryQueue=new Set([u]):o.add(u)),_p(r,u,f)),!1}throw Error(a(435,o.tag))}return _p(r,u,f),kh(),!1}if(gt)return i=Tr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==fm&&(r=Error(a(422),{cause:u}),tu(Ur(r,o)))):(u!==fm&&(i=Error(a(423),{cause:u}),tu(Ur(i,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Ur(u,o),f=Km(r.stateNode,u,f),Sm(r,f),sn!==4&&(sn=2)),!1;var m=Error(a(520),{cause:u});if(m=Ur(m,o),Eu===null?Eu=[m]:Eu.push(m),sn!==4&&(sn=2),i===null)return!0;u=Ur(u,o),o=i;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=Km(o.stateNode,u,r),Sm(o,r),!1;case 1:if(i=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Fa===null||!Fa.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=eE(f),tE(f,r,o,u),Sm(o,f),!1}o=o.return}while(o!==null);return!1}var Ym=Error(a(461)),gn=!1;function Vn(r,i,o,u){i.child=r===null?av(i,null,o,u):Hs(i,r.child,o,u)}function nE(r,i,o,u,f){o=o.render;var m=i.ref;if("ref"in u){var v={};for(var C in u)C!=="ref"&&(v[C]=u[C])}else v=u;return zs(i),u=Dm(r,i,o,v,m,f),C=Nm(),r!==null&&!gn?(xm(r,i,f),Xi(r,i,f)):(gt&&C&&cm(i),i.flags|=1,Vn(r,i,u,f),i.child)}function rE(r,i,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!om(m)&&m.defaultProps===void 0&&o.compare===null?(i.tag=15,i.type=m,iE(r,i,m,u,f)):(r=ah(o.type,null,u,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,!np(r,f)){var v=m.memoizedProps;if(o=o.compare,o=o!==null?o:Jl,o(v,u)&&r.ref===i.ref)return Xi(r,i,f)}return i.flags|=1,r=Hi(m,u),r.ref=i.ref,r.return=i,i.child=r}function iE(r,i,o,u,f){if(r!==null){var m=r.memoizedProps;if(Jl(m,u)&&r.ref===i.ref)if(gn=!1,i.pendingProps=u=m,np(r,f))(r.flags&131072)!==0&&(gn=!0);else return i.lanes=r.lanes,Xi(r,i,f)}return Qm(r,i,o,u,f)}function aE(r,i,o,u){var f=u.children,m=r!==null?r.memoizedState:null;if(r===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,r!==null){for(u=i.child=r.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~m}else u=0,i.child=null;return sE(r,i,m,o,u)}if((o&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},r!==null&&uh(i,m!==null?m.cachePool:null),m!==null?lv(i,m):Am(),uv(i);else return u=i.lanes=536870912,sE(r,i,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(uh(i,m.cachePool),lv(i,m),Ua(),i.memoizedState=null):(r!==null&&uh(i,null),Am(),Ua());return Vn(r,i,f,o),i.child}function du(r,i){return r!==null&&r.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function sE(r,i,o,u,f){var m=vm();return m=m===null?null:{parent:mn._currentValue,pool:m},i.memoizedState={baseLanes:o,cachePool:m},r!==null&&uh(i,null),Am(),uv(i),r!==null&&Po(r,i,u,!0),i.childLanes=f,null}function Ah(r,i){return i=Ch({mode:i.mode,children:i.children},r.mode),i.ref=r.ref,r.child=i,i.return=r,i}function oE(r,i,o){return Hs(i,r.child,null,o),r=Ah(i,i.pendingProps),r.flags|=2,br(i),i.memoizedState=null,r}function L1(r,i,o){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,r===null){if(gt){if(u.mode==="hidden")return r=Ah(i,u),i.lanes=536870912,du(null,r);if(Cm(i),(r=Ht)?(r=vT(r,Br),r=r!==null&&r.data==="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Na!==null?{id:Ai,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},o=H_(r),o.return=i,i.child=o,On=i,Ht=null)):r=null,r===null)throw Oa(i);return i.lanes=536870912,null}return Ah(i,u)}var m=r.memoizedState;if(m!==null){var v=m.dehydrated;if(Cm(i),f)if(i.flags&256)i.flags&=-257,i=oE(r,i,o);else if(i.memoizedState!==null)i.child=r.child,i.flags|=128,i=null;else throw Error(a(558));else if(gn||Po(r,i,o,!1),f=(o&r.childLanes)!==0,gn||f){if(u=Ut,u!==null&&(v=G(u,o),v!==0&&v!==m.retryLane))throw m.retryLane=v,ks(r,v),hr(u,r,v),Ym;kh(),i=oE(r,i,o)}else r=m.treeContext,Ht=qr(v.nextSibling),On=i,gt=!0,xa=null,Br=!1,r!==null&&K_(i,r),i=Ah(i,u),i.flags|=4096;return i}return r=Hi(r.child,{mode:u.mode,children:u.children}),r.ref=i.ref,i.child=r,r.return=i,r}function Rh(r,i){var o=i.ref;if(o===null)r!==null&&r.ref!==null&&(i.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(r===null||r.ref!==o)&&(i.flags|=4194816)}}function Qm(r,i,o,u,f){return zs(i),o=Dm(r,i,o,u,void 0,f),u=Nm(),r!==null&&!gn?(xm(r,i,f),Xi(r,i,f)):(gt&&u&&cm(i),i.flags|=1,Vn(r,i,o,f),i.child)}function lE(r,i,o,u,f,m){return zs(i),i.updateQueue=null,o=hv(i,u,o,f),cv(r),u=Nm(),r!==null&&!gn?(xm(r,i,m),Xi(r,i,m)):(gt&&u&&cm(i),i.flags|=1,Vn(r,i,o,m),i.child)}function uE(r,i,o,u,f){if(zs(i),i.stateNode===null){var m=xo,v=o.contextType;typeof v=="object"&&v!==null&&(m=Mn(v)),m=new o(u,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=$m,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=u,m.state=i.memoizedState,m.refs={},Tm(i),v=o.contextType,m.context=typeof v=="object"&&v!==null?Mn(v):xo,m.state=i.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Gm(i,o,v,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(v=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),v!==m.state&&$m.enqueueReplaceState(m,m.state,null),lu(i,u,m,f),ou(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(r===null){m=i.stateNode;var C=i.memoizedProps,L=$s(o,C);m.props=L;var Z=m.context,se=o.contextType;v=xo,typeof se=="object"&&se!==null&&(v=Mn(se));var fe=o.getDerivedStateFromProps;se=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function",C=i.pendingProps!==C,se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C||Z!==v)&&Qv(i,m,u,v),Va=!1;var te=i.memoizedState;m.state=te,lu(i,u,m,f),ou(),Z=i.memoizedState,C||te!==Z||Va?(typeof fe=="function"&&(Gm(i,o,fe,u),Z=i.memoizedState),(L=Va||Yv(i,o,L,u,te,Z,v))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=Z),m.props=u,m.state=Z,m.context=v,u=L):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{m=i.stateNode,bm(r,i),v=i.memoizedProps,se=$s(o,v),m.props=se,fe=i.pendingProps,te=m.context,Z=o.contextType,L=xo,typeof Z=="object"&&Z!==null&&(L=Mn(Z)),C=o.getDerivedStateFromProps,(Z=typeof C=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v!==fe||te!==L)&&Qv(i,m,u,L),Va=!1,te=i.memoizedState,m.state=te,lu(i,u,m,f),ou();var ie=i.memoizedState;v!==fe||te!==ie||Va||r!==null&&r.dependencies!==null&&oh(r.dependencies)?(typeof C=="function"&&(Gm(i,o,C,u),ie=i.memoizedState),(se=Va||Yv(i,o,se,u,te,ie,L)||r!==null&&r.dependencies!==null&&oh(r.dependencies))?(Z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,ie,L),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,ie,L)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=ie),m.props=u,m.state=ie,m.context=L,u=se):(typeof m.componentDidUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||v===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),u=!1)}return m=u,Rh(r,i),u=(i.flags&128)!==0,m||u?(m=i.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,r!==null&&u?(i.child=Hs(i,r.child,null,f),i.child=Hs(i,null,o,f)):Vn(r,i,o,f),i.memoizedState=m.state,r=i.child):r=Xi(r,i,f),r}function cE(r,i,o,u){return Us(),i.flags|=256,Vn(r,i,o,u),i.child}var Xm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wm(r){return{baseLanes:r,cachePool:Z_()}}function Jm(r,i,o){return r=r!==null?r.childLanes&~o:0,i&&(r|=wr),r}function hE(r,i,o){var u=i.pendingProps,f=!1,m=(i.flags&128)!==0,v;if((v=m)||(v=r!==null&&r.memoizedState===null?!1:(un.current&2)!==0),v&&(f=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,r===null){if(gt){if(f?La(i):Ua(),(r=Ht)?(r=vT(r,Br),r=r!==null&&r.data!=="&"?r:null,r!==null&&(i.memoizedState={dehydrated:r,treeContext:Na!==null?{id:Ai,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},o=H_(r),o.return=i,i.child=o,On=i,Ht=null)):r=null,r===null)throw Oa(i);return Vp(r)?i.lanes=32:i.lanes=536870912,null}var C=u.children;return u=u.fallback,f?(Ua(),f=i.mode,C=Ch({mode:"hidden",children:C},f),u=Ls(u,f,o,null),C.return=i,u.return=i,C.sibling=u,i.child=C,u=i.child,u.memoizedState=Wm(o),u.childLanes=Jm(r,v,o),i.memoizedState=Xm,du(null,u)):(La(i),Zm(i,C))}var L=r.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(m)i.flags&256?(La(i),i.flags&=-257,i=ep(r,i,o)):i.memoizedState!==null?(Ua(),i.child=r.child,i.flags|=128,i=null):(Ua(),C=u.fallback,f=i.mode,u=Ch({mode:"visible",children:u.children},f),C=Ls(C,f,o,null),C.flags|=2,u.return=i,C.return=i,u.sibling=C,i.child=u,Hs(i,r.child,null,o),u=i.child,u.memoizedState=Wm(o),u.childLanes=Jm(r,v,o),i.memoizedState=Xm,i=du(null,u));else if(La(i),Vp(C)){if(v=C.nextSibling&&C.nextSibling.dataset,v)var Z=v.dgst;v=Z,u=Error(a(419)),u.stack="",u.digest=v,tu({value:u,source:null,stack:null}),i=ep(r,i,o)}else if(gn||Po(r,i,o,!1),v=(o&r.childLanes)!==0,gn||v){if(v=Ut,v!==null&&(u=G(v,o),u!==0&&u!==L.retryLane))throw L.retryLane=u,ks(r,u),hr(v,r,u),Ym;Mp(C)||kh(),i=ep(r,i,o)}else Mp(C)?(i.flags|=192,i.child=r.child,i=null):(r=L.treeContext,Ht=qr(C.nextSibling),On=i,gt=!0,xa=null,Br=!1,r!==null&&K_(i,r),i=Zm(i,u.children),i.flags|=4096);return i}return f?(Ua(),C=u.fallback,f=i.mode,L=r.child,Z=L.sibling,u=Hi(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,Z!==null?C=Hi(Z,C):(C=Ls(C,f,o,null),C.flags|=2),C.return=i,u.return=i,u.sibling=C,i.child=u,du(null,u),u=i.child,C=r.child.memoizedState,C===null?C=Wm(o):(f=C.cachePool,f!==null?(L=mn._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=Z_(),C={baseLanes:C.baseLanes|o,cachePool:f}),u.memoizedState=C,u.childLanes=Jm(r,v,o),i.memoizedState=Xm,du(r.child,u)):(La(i),o=r.child,r=o.sibling,o=Hi(o,{mode:"visible",children:u.children}),o.return=i,o.sibling=null,r!==null&&(v=i.deletions,v===null?(i.deletions=[r],i.flags|=16):v.push(r)),i.child=o,i.memoizedState=null,o)}function Zm(r,i){return i=Ch({mode:"visible",children:i},r.mode),i.return=r,r.child=i}function Ch(r,i){return r=Er(22,r,null,i),r.lanes=0,r}function ep(r,i,o){return Hs(i,r.child,null,o),r=Zm(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function fE(r,i,o){r.lanes|=i;var u=r.alternate;u!==null&&(u.lanes|=i),pm(r.return,i,o)}function tp(r,i,o,u,f,m){var v=r.memoizedState;v===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f,treeForkCount:m}:(v.isBackwards=i,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=o,v.tailMode=f,v.treeForkCount=m)}function dE(r,i,o){var u=i.pendingProps,f=u.revealOrder,m=u.tail;u=u.children;var v=un.current,C=(v&2)!==0;if(C?(v=v&1|2,i.flags|=128):v&=1,oe(un,v),Vn(r,i,u,o),u=gt?eu:0,!C&&r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fE(r,o,i);else if(r.tag===19)fE(r,o,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(f){case"forwards":for(o=i.child,f=null;o!==null;)r=o.alternate,r!==null&&ph(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=i.child,i.child=null):(f=o.sibling,o.sibling=null),tp(i,!1,f,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&ph(r)===null){i.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}tp(i,!0,o,null,m,u);break;case"together":tp(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function Xi(r,i,o){if(r!==null&&(i.dependencies=r.dependencies),Ba|=i.lanes,(o&i.childLanes)===0)if(r!==null){if(Po(r,i,o,!1),(o&i.childLanes)===0)return null}else return null;if(r!==null&&i.child!==r.child)throw Error(a(153));if(i.child!==null){for(r=i.child,o=Hi(r,r.pendingProps),i.child=o,o.return=i;r.sibling!==null;)r=r.sibling,o=o.sibling=Hi(r,r.pendingProps),o.return=i;o.sibling=null}return i.child}function np(r,i){return(r.lanes&i)!==0?!0:(r=r.dependencies,!!(r!==null&&oh(r)))}function U1(r,i,o){switch(i.tag){case 3:Ke(i,i.stateNode.containerInfo),Ma(i,mn,r.memoizedState.cache),Us();break;case 27:case 5:Kt(i);break;case 4:Ke(i,i.stateNode.containerInfo);break;case 10:Ma(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Cm(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(La(i),i.flags|=128,null):(o&i.child.childLanes)!==0?hE(r,i,o):(La(i),r=Xi(r,i,o),r!==null?r.sibling:null);La(i);break;case 19:var f=(r.flags&128)!==0;if(u=(o&i.childLanes)!==0,u||(Po(r,i,o,!1),u=(o&i.childLanes)!==0),f){if(u)return dE(r,i,o);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),oe(un,un.current),u)break;return null;case 22:return i.lanes=0,aE(r,i,o,i.pendingProps);case 24:Ma(i,mn,r.memoizedState.cache)}return Xi(r,i,o)}function mE(r,i,o){if(r!==null)if(r.memoizedProps!==i.pendingProps)gn=!0;else{if(!np(r,o)&&(i.flags&128)===0)return gn=!1,U1(r,i,o);gn=(r.flags&131072)!==0}else gn=!1,gt&&(i.flags&1048576)!==0&&$_(i,eu,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(r=Fs(i.elementType),i.type=r,typeof r=="function")om(r)?(u=$s(r,u),i.tag=1,i=uE(null,i,r,u,o)):(i.tag=0,i=Qm(null,i,r,u,o));else{if(r!=null){var f=r.$$typeof;if(f===Q){i.tag=11,i=nE(null,i,r,u,o);break e}else if(f===b){i.tag=14,i=rE(null,i,r,u,o);break e}}throw i=ze(r)||r,Error(a(306,i,""))}}return i;case 0:return Qm(r,i,i.type,i.pendingProps,o);case 1:return u=i.type,f=$s(u,i.pendingProps),uE(r,i,u,f,o);case 3:e:{if(Ke(i,i.stateNode.containerInfo),r===null)throw Error(a(387));u=i.pendingProps;var m=i.memoizedState;f=m.element,bm(r,i),lu(i,u,null,o);var v=i.memoizedState;if(u=v.cache,Ma(i,mn,u),u!==m.cache&&gm(i,[mn],o,!0),ou(),u=v.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=cE(r,i,u,o);break e}else if(u!==f){f=Ur(Error(a(424)),i),tu(f),i=cE(r,i,u,o);break e}else{switch(r=i.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ht=qr(r.firstChild),On=i,gt=!0,xa=null,Br=!0,o=av(i,null,u,o),i.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Us(),u===f){i=Xi(r,i,o);break e}Vn(r,i,u,o)}i=i.child}return i;case 26:return Rh(r,i),r===null?(o=AT(i.type,null,i.pendingProps,null))?i.memoizedState=o:gt||(o=i.type,r=i.pendingProps,u=qh(Te.current).createElement(o),u[Ee]=i,u[Se]=r,Pn(u,o,r),Bt(u),i.stateNode=u):i.memoizedState=AT(i.type,r.memoizedProps,i.pendingProps,r.memoizedState),null;case 27:return Kt(i),r===null&&gt&&(u=i.stateNode=bT(i.type,i.pendingProps,Te.current),On=i,Br=!0,f=Ht,$a(i.type)?(Pp=f,Ht=qr(u.firstChild)):Ht=f),Vn(r,i,i.pendingProps.children,o),Rh(r,i),r===null&&(i.flags|=4194304),i.child;case 5:return r===null&&gt&&((f=u=Ht)&&(u=mC(u,i.type,i.pendingProps,Br),u!==null?(i.stateNode=u,On=i,Ht=qr(u.firstChild),Br=!1,f=!0):f=!1),f||Oa(i)),Kt(i),f=i.type,m=i.pendingProps,v=r!==null?r.memoizedProps:null,u=m.children,Np(f,m)?u=null:v!==null&&Np(f,v)&&(i.flags|=32),i.memoizedState!==null&&(f=Dm(r,i,D1,null,null,o),Iu._currentValue=f),Rh(r,i),Vn(r,i,u,o),i.child;case 6:return r===null&&gt&&((r=o=Ht)&&(o=pC(o,i.pendingProps,Br),o!==null?(i.stateNode=o,On=i,Ht=null,r=!0):r=!1),r||Oa(i)),null;case 13:return hE(r,i,o);case 4:return Ke(i,i.stateNode.containerInfo),u=i.pendingProps,r===null?i.child=Hs(i,null,u,o):Vn(r,i,u,o),i.child;case 11:return nE(r,i,i.type,i.pendingProps,o);case 7:return Vn(r,i,i.pendingProps,o),i.child;case 8:return Vn(r,i,i.pendingProps.children,o),i.child;case 12:return Vn(r,i,i.pendingProps.children,o),i.child;case 10:return u=i.pendingProps,Ma(i,i.type,u.value),Vn(r,i,u.children,o),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,zs(i),f=Mn(f),u=u(f),i.flags|=1,Vn(r,i,u,o),i.child;case 14:return rE(r,i,i.type,i.pendingProps,o);case 15:return iE(r,i,i.type,i.pendingProps,o);case 19:return dE(r,i,o);case 31:return L1(r,i,o);case 22:return aE(r,i,o,i.pendingProps);case 24:return zs(i),u=Mn(mn),r===null?(f=vm(),f===null&&(f=Ut,m=ym(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),i.memoizedState={parent:u,cache:f},Tm(i),Ma(i,mn,f)):((r.lanes&o)!==0&&(bm(r,i),lu(i,null,null,o),ou()),f=r.memoizedState,m=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Ma(i,mn,u)):(u=m.cache,Ma(i,mn,u),u!==f.cache&&gm(i,[mn],o,!0))),Vn(r,i,i.pendingProps.children,o),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Wi(r){r.flags|=4}function rp(r,i,o,u,f){if((i=(r.mode&32)!==0)&&(i=!1),i){if(r.flags|=16777216,(f&335544128)===f)if(r.stateNode.complete)r.flags|=8192;else if(BE())r.flags|=8192;else throw qs=hh,Em}else r.flags&=-16777217}function pE(r,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!NT(i))if(BE())r.flags|=8192;else throw qs=hh,Em}function Ih(r,i){i!==null&&(r.flags|=4),r.flags&16384&&(i=r.tag!==22?ji():536870912,r.lanes|=i,Ko|=i)}function mu(r,i){if(!gt)switch(r.tailMode){case"hidden":i=r.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function Gt(r){var i=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(i)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,i}function j1(r,i,o){var u=i.pendingProps;switch(hm(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(i),null;case 1:return Gt(i),null;case 3:return o=i.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Ki(mn),lt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Vo(i)?Wi(i):r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,dm())),Gt(i),null;case 26:var f=i.type,m=i.memoizedState;return r===null?(Wi(i),m!==null?(Gt(i),pE(i,m)):(Gt(i),rp(i,f,null,u,o))):m?m!==r.memoizedState?(Wi(i),Gt(i),pE(i,m)):(Gt(i),i.flags&=-16777217):(r=r.memoizedProps,r!==u&&Wi(i),Gt(i),rp(i,f,r,u,o)),null;case 27:if(Cn(i),o=Te.current,f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Wi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Gt(i),null}r=ce.current,Vo(i)?Y_(i):(r=bT(f,u,o),i.stateNode=r,Wi(i))}return Gt(i),null;case 5:if(Cn(i),f=i.type,r!==null&&i.stateNode!=null)r.memoizedProps!==u&&Wi(i);else{if(!u){if(i.stateNode===null)throw Error(a(166));return Gt(i),null}if(m=ce.current,Vo(i))Y_(i);else{var v=qh(Te.current);switch(m){case 1:m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=v.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}m[Ee]=i,m[Se]=u;e:for(v=i.child;v!==null;){if(v.tag===5||v.tag===6)m.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===i)break e;for(;v.sibling===null;){if(v.return===null||v.return===i)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}i.stateNode=m;e:switch(Pn(m,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Wi(i)}}return Gt(i),rp(i,i.type,r===null?null:r.memoizedProps,i.pendingProps,o),null;case 6:if(r&&i.stateNode!=null)r.memoizedProps!==u&&Wi(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(a(166));if(r=Te.current,Vo(i)){if(r=i.stateNode,o=i.memoizedProps,u=null,f=On,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Ee]=i,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||hT(r.nodeValue,o)),r||Oa(i,!0)}else r=qh(r).createTextNode(u),r[Ee]=i,i.stateNode=r}return Gt(i),null;case 31:if(o=i.memoizedState,r===null||r.memoizedState!==null){if(u=Vo(i),o!==null){if(r===null){if(!u)throw Error(a(318));if(r=i.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(a(557));r[Ee]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),r=!1}else o=dm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=o),r=!0;if(!r)return i.flags&256?(br(i),i):(br(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Gt(i),null;case 13:if(u=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Vo(i),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[Ee]=i}else Us(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Gt(i),f=!1}else f=dm(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(br(i),i):(br(i),null)}return br(i),(i.flags&128)!==0?(i.lanes=o,i):(o=u!==null,r=r!==null&&r.memoizedState!==null,o&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)),o!==r&&o&&(i.child.flags|=8192),Ih(i,i.updateQueue),Gt(i),null);case 4:return lt(),r===null&&Ap(i.stateNode.containerInfo),Gt(i),null;case 10:return Ki(i.type),Gt(i),null;case 19:if(K(un),u=i.memoizedState,u===null)return Gt(i),null;if(f=(i.flags&128)!==0,m=u.rendering,m===null)if(f)mu(u,!1);else{if(sn!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(m=ph(r),m!==null){for(i.flags|=128,mu(u,!1),r=m.updateQueue,i.updateQueue=r,Ih(i,r),i.subtreeFlags=0,r=o,o=i.child;o!==null;)q_(o,r),o=o.sibling;return oe(un,un.current&1|2),gt&&Gi(i,u.treeForkCount),i.child}r=r.sibling}u.tail!==null&&Ye()>Mh&&(i.flags|=128,f=!0,mu(u,!1),i.lanes=4194304)}else{if(!f)if(r=ph(m),r!==null){if(i.flags|=128,f=!0,r=r.updateQueue,i.updateQueue=r,Ih(i,r),mu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!gt)return Gt(i),null}else 2*Ye()-u.renderingStartTime>Mh&&o!==536870912&&(i.flags|=128,f=!0,mu(u,!1),i.lanes=4194304);u.isBackwards?(m.sibling=i.child,i.child=m):(r=u.last,r!==null?r.sibling=m:i.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Ye(),r.sibling=null,o=un.current,oe(un,f?o&1|2:o&1),gt&&Gi(i,u.treeForkCount),r):(Gt(i),null);case 22:case 23:return br(i),Rm(),u=i.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(o&536870912)!==0&&(i.flags&128)===0&&(Gt(i),i.subtreeFlags&6&&(i.flags|=8192)):Gt(i),o=i.updateQueue,o!==null&&Ih(i,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==o&&(i.flags|=2048),r!==null&&K(Bs),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Ki(mn),Gt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function z1(r,i){switch(hm(i),i.tag){case 1:return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Ki(mn),lt(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 26:case 27:case 5:return Cn(i),null;case 31:if(i.memoizedState!==null){if(br(i),i.alternate===null)throw Error(a(340));Us()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 13:if(br(i),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Us()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return K(un),null;case 4:return lt(),null;case 10:return Ki(i.type),null;case 22:case 23:return br(i),Rm(),r!==null&&K(Bs),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 24:return Ki(mn),null;case 25:return null;default:return null}}function gE(r,i){switch(hm(i),i.tag){case 3:Ki(mn),lt();break;case 26:case 27:case 5:Cn(i);break;case 4:lt();break;case 31:i.memoizedState!==null&&br(i);break;case 13:br(i);break;case 19:K(un);break;case 10:Ki(i.type);break;case 22:case 23:br(i),Rm(),r!==null&&K(Bs);break;case 24:Ki(mn)}}function pu(r,i){try{var o=i.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,v=o.inst;u=m(),v.destroy=u}o=o.next}while(o!==f)}}catch(C){It(i,i.return,C)}}function ja(r,i,o){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var v=u.inst,C=v.destroy;if(C!==void 0){v.destroy=void 0,f=i;var L=o,Z=C;try{Z()}catch(se){It(f,L,se)}}}u=u.next}while(u!==m)}}catch(se){It(i,i.return,se)}}function yE(r){var i=r.updateQueue;if(i!==null){var o=r.stateNode;try{ov(i,o)}catch(u){It(r,r.return,u)}}}function _E(r,i,o){o.props=$s(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){It(r,i,u)}}function gu(r,i){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){It(r,i,f)}}function Ci(r,i){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){It(r,i,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){It(r,i,f)}else o.current=null}function vE(r){var i=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){It(r,r.return,f)}}function ip(r,i,o){try{var u=r.stateNode;lC(u,r.type,o,i),u[Se]=i}catch(f){It(r,r.return,f)}}function EE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&$a(r.type)||r.tag===4}function ap(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||EE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&$a(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function sp(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,i):(i=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,i.appendChild(r),o=o._reactRootContainer,o!=null||i.onclick!==null||(i.onclick=Jr));else if(u!==4&&(u===27&&$a(r.type)&&(o=r.stateNode,i=null),r=r.child,r!==null))for(sp(r,i,o),r=r.sibling;r!==null;)sp(r,i,o),r=r.sibling}function Dh(r,i,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,i?o.insertBefore(r,i):o.appendChild(r);else if(u!==4&&(u===27&&$a(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Dh(r,i,o),r=r.sibling;r!==null;)Dh(r,i,o),r=r.sibling}function TE(r){var i=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Pn(i,u,o),i[Ee]=r,i[Se]=o}catch(m){It(r,r.return,m)}}var Ji=!1,yn=!1,op=!1,bE=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function B1(r,i){if(r=r.containerInfo,Ip=Xh,r=V_(r),em(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var v=0,C=-1,L=-1,Z=0,se=0,fe=r,te=null;t:for(;;){for(var ie;fe!==o||f!==0&&fe.nodeType!==3||(C=v+f),fe!==m||u!==0&&fe.nodeType!==3||(L=v+u),fe.nodeType===3&&(v+=fe.nodeValue.length),(ie=fe.firstChild)!==null;)te=fe,fe=ie;for(;;){if(fe===r)break t;if(te===o&&++Z===f&&(C=v),te===m&&++se===u&&(L=v),(ie=fe.nextSibling)!==null)break;fe=te,te=fe.parentNode}fe=ie}o=C===-1||L===-1?null:{start:C,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(Dp={focusedElem:r,selectionRange:o},Xh=!1,Dn=i;Dn!==null;)if(i=Dn,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Dn=r;else for(;Dn!==null;){switch(i=Dn,m=i.alternate,r=i.flags,i.tag){case 0:if((r&4)!==0&&(r=i.updateQueue,r=r!==null?r.events:null,r!==null))for(o=0;o<r.length;o++)f=r[o],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=i,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var xe=$s(o.type,f);r=u.getSnapshotBeforeUpdate(xe,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(qe){It(o,o.return,qe)}}break;case 3:if((r&1024)!==0){if(r=i.stateNode.containerInfo,o=r.nodeType,o===9)Op(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Op(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(a(163))}if(r=i.sibling,r!==null){r.return=i.return,Dn=r;break}Dn=i.return}}function SE(r,i,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:ea(r,o),u&4&&pu(5,o);break;case 1:if(ea(r,o),u&4)if(r=o.stateNode,i===null)try{r.componentDidMount()}catch(v){It(o,o.return,v)}else{var f=$s(o.type,i.memoizedProps);i=i.memoizedState;try{r.componentDidUpdate(f,i,r.__reactInternalSnapshotBeforeUpdate)}catch(v){It(o,o.return,v)}}u&64&&yE(o),u&512&&gu(o,o.return);break;case 3:if(ea(r,o),u&64&&(r=o.updateQueue,r!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{ov(r,i)}catch(v){It(o,o.return,v)}}break;case 27:i===null&&u&4&&TE(o);case 26:case 5:ea(r,o),i===null&&u&4&&vE(o),u&512&&gu(o,o.return);break;case 12:ea(r,o);break;case 31:ea(r,o),u&4&&RE(r,o);break;case 13:ea(r,o),u&4&&CE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=X1.bind(null,o),gC(r,o))));break;case 22:if(u=o.memoizedState!==null||Ji,!u){i=i!==null&&i.memoizedState!==null||yn,f=Ji;var m=yn;Ji=u,(yn=i)&&!m?ta(r,o,(o.subtreeFlags&8772)!==0):ea(r,o),Ji=f,yn=m}break;case 30:break;default:ea(r,o)}}function wE(r){var i=r.alternate;i!==null&&(r.alternate=null,wE(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&qt(i)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Wt=null,or=!1;function Zi(r,i,o){for(o=o.child;o!==null;)AE(r,i,o),o=o.sibling}function AE(r,i,o){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(mr,o)}catch{}switch(o.tag){case 26:yn||Ci(o,i),Zi(r,i,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:yn||Ci(o,i);var u=Wt,f=or;$a(o.type)&&(Wt=o.stateNode,or=!1),Zi(r,i,o),Au(o.stateNode),Wt=u,or=f;break;case 5:yn||Ci(o,i);case 6:if(u=Wt,f=or,Wt=null,Zi(r,i,o),Wt=u,or=f,Wt!==null)if(or)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(o.stateNode)}catch(m){It(o,i,m)}else try{Wt.removeChild(o.stateNode)}catch(m){It(o,i,m)}break;case 18:Wt!==null&&(or?(r=Wt,yT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),tl(r)):yT(Wt,o.stateNode));break;case 4:u=Wt,f=or,Wt=o.stateNode.containerInfo,or=!0,Zi(r,i,o),Wt=u,or=f;break;case 0:case 11:case 14:case 15:ja(2,o,i),yn||ja(4,o,i),Zi(r,i,o);break;case 1:yn||(Ci(o,i),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_E(o,i,u)),Zi(r,i,o);break;case 21:Zi(r,i,o);break;case 22:yn=(u=yn)||o.memoizedState!==null,Zi(r,i,o),yn=u;break;default:Zi(r,i,o)}}function RE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{tl(r)}catch(o){It(i,i.return,o)}}}function CE(r,i){if(i.memoizedState===null&&(r=i.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{tl(r)}catch(o){It(i,i.return,o)}}function F1(r){switch(r.tag){case 31:case 13:case 19:var i=r.stateNode;return i===null&&(i=r.stateNode=new bE),i;case 22:return r=r.stateNode,i=r._retryCache,i===null&&(i=r._retryCache=new bE),i;default:throw Error(a(435,r.tag))}}function Nh(r,i){var o=F1(r);i.forEach(function(u){if(!o.has(u)){o.add(u);var f=W1.bind(null,r,u);u.then(f,f)}})}function lr(r,i){var o=i.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,v=i,C=v;e:for(;C!==null;){switch(C.tag){case 27:if($a(C.type)){Wt=C.stateNode,or=!1;break e}break;case 5:Wt=C.stateNode,or=!1;break e;case 3:case 4:Wt=C.stateNode.containerInfo,or=!0;break e}C=C.return}if(Wt===null)throw Error(a(160));AE(m,v,f),Wt=null,or=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)IE(i,r),i=i.sibling}var ii=null;function IE(r,i){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:lr(i,r),ur(r),u&4&&(ja(3,r,r.return),pu(3,r),ja(5,r,r.return));break;case 1:lr(i,r),ur(r),u&512&&(yn||o===null||Ci(o,o.return)),u&64&&Ji&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ii;if(lr(i,r),ur(r),u&512&&(yn||o===null||Ci(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Nt]||m[Ee]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Pn(m,u,o),m[Ee]=r,Bt(m),u=m;break e;case"link":var v=IT("link","href",f).get(u+(o.href||""));if(v){for(var C=0;C<v.length;C++)if(m=v[C],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(C,1);break t}}m=f.createElement(u),Pn(m,u,o),f.head.appendChild(m);break;case"meta":if(v=IT("meta","content",f).get(u+(o.content||""))){for(C=0;C<v.length;C++)if(m=v[C],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(C,1);break t}}m=f.createElement(u),Pn(m,u,o),f.head.appendChild(m);break;default:throw Error(a(468,u))}m[Ee]=r,Bt(m),u=m}r.stateNode=u}else DT(f,r.type,r.stateNode);else r.stateNode=CT(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?DT(f,r.type,r.stateNode):CT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&ip(r,r.memoizedProps,o.memoizedProps)}break;case 27:lr(i,r),ur(r),u&512&&(yn||o===null||Ci(o,o.return)),o!==null&&u&4&&ip(r,r.memoizedProps,o.memoizedProps);break;case 5:if(lr(i,r),ur(r),u&512&&(yn||o===null||Ci(o,o.return)),r.flags&32){f=r.stateNode;try{sr(f,"")}catch(xe){It(r,r.return,xe)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,ip(r,f,o!==null?o.memoizedProps:f)),u&1024&&(op=!0);break;case 6:if(lr(i,r),ur(r),u&4){if(r.stateNode===null)throw Error(a(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(xe){It(r,r.return,xe)}}break;case 3:if($h=null,f=ii,ii=Hh(i.containerInfo),lr(i,r),ii=f,ur(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{tl(i.containerInfo)}catch(xe){It(r,r.return,xe)}op&&(op=!1,DE(r));break;case 4:u=ii,ii=Hh(r.stateNode.containerInfo),lr(i,r),ur(r),ii=u;break;case 12:lr(i,r),ur(r);break;case 31:lr(i,r),ur(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Nh(r,u)));break;case 13:lr(i,r),ur(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Oh=Ye()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Nh(r,u)));break;case 22:f=r.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,Z=Ji,se=yn;if(Ji=Z||f,yn=se||L,lr(i,r),yn=se,Ji=Z,ur(r),u&8192)e:for(i=r.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(o===null||L||Ji||yn||Ks(r)),o=null,i=r;;){if(i.tag===5||i.tag===26){if(o===null){L=o=i;try{if(m=L.stateNode,f)v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{C=L.stateNode;var fe=L.memoizedProps.style,te=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;C.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(xe){It(L,L.return,xe)}}}else if(i.tag===6){if(o===null){L=i;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(xe){It(L,L.return,xe)}}}else if(i.tag===18){if(o===null){L=i;try{var ie=L.stateNode;f?_T(ie,!0):_T(L.stateNode,!1)}catch(xe){It(L,L.return,xe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===r)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;o===i&&(o=null),i=i.return}o===i&&(o=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Nh(r,o))));break;case 19:lr(i,r),ur(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Nh(r,u)));break;case 30:break;case 21:break;default:lr(i,r),ur(r)}}function ur(r){var i=r.flags;if(i&2){try{for(var o,u=r.return;u!==null;){if(EE(u)){o=u;break}u=u.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var f=o.stateNode,m=ap(r);Dh(r,m,f);break;case 5:var v=o.stateNode;o.flags&32&&(sr(v,""),o.flags&=-33);var C=ap(r);Dh(r,C,v);break;case 3:case 4:var L=o.stateNode.containerInfo,Z=ap(r);sp(r,Z,L);break;default:throw Error(a(161))}}catch(se){It(r,r.return,se)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function DE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var i=r;DE(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),r=r.sibling}}function ea(r,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)SE(r,i.alternate,i),i=i.sibling}function Ks(r){for(r=r.child;r!==null;){var i=r;switch(i.tag){case 0:case 11:case 14:case 15:ja(4,i,i.return),Ks(i);break;case 1:Ci(i,i.return);var o=i.stateNode;typeof o.componentWillUnmount=="function"&&_E(i,i.return,o),Ks(i);break;case 27:Au(i.stateNode);case 26:case 5:Ci(i,i.return),Ks(i);break;case 22:i.memoizedState===null&&Ks(i);break;case 30:Ks(i);break;default:Ks(i)}r=r.sibling}}function ta(r,i,o){for(o=o&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=r,m=i,v=m.flags;switch(m.tag){case 0:case 11:case 15:ta(f,m,o),pu(4,m);break;case 1:if(ta(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Z){It(u,u.return,Z)}if(u=m,f=u.updateQueue,f!==null){var C=u.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)sv(L[f],C)}catch(Z){It(u,u.return,Z)}}o&&v&64&&yE(m),gu(m,m.return);break;case 27:TE(m);case 26:case 5:ta(f,m,o),o&&u===null&&v&4&&vE(m),gu(m,m.return);break;case 12:ta(f,m,o);break;case 31:ta(f,m,o),o&&v&4&&RE(f,m);break;case 13:ta(f,m,o),o&&v&4&&CE(f,m);break;case 22:m.memoizedState===null&&ta(f,m,o),gu(m,m.return);break;case 30:break;default:ta(f,m,o)}i=i.sibling}}function lp(r,i){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&nu(o))}function up(r,i){r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&nu(r))}function ai(r,i,o,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)NE(r,i,o,u),i=i.sibling}function NE(r,i,o,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:ai(r,i,o,u),f&2048&&pu(9,i);break;case 1:ai(r,i,o,u);break;case 3:ai(r,i,o,u),f&2048&&(r=null,i.alternate!==null&&(r=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==r&&(i.refCount++,r!=null&&nu(r)));break;case 12:if(f&2048){ai(r,i,o,u),r=i.stateNode;try{var m=i.memoizedProps,v=m.id,C=m.onPostCommit;typeof C=="function"&&C(v,i.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){It(i,i.return,L)}}else ai(r,i,o,u);break;case 31:ai(r,i,o,u);break;case 13:ai(r,i,o,u);break;case 23:break;case 22:m=i.stateNode,v=i.alternate,i.memoizedState!==null?m._visibility&2?ai(r,i,o,u):yu(r,i):m._visibility&2?ai(r,i,o,u):(m._visibility|=2,Ho(r,i,o,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&lp(v,i);break;case 24:ai(r,i,o,u),f&2048&&up(i.alternate,i);break;default:ai(r,i,o,u)}}function Ho(r,i,o,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=r,v=i,C=o,L=u,Z=v.flags;switch(v.tag){case 0:case 11:case 15:Ho(m,v,C,L,f),pu(8,v);break;case 23:break;case 22:var se=v.stateNode;v.memoizedState!==null?se._visibility&2?Ho(m,v,C,L,f):yu(m,v):(se._visibility|=2,Ho(m,v,C,L,f)),f&&Z&2048&&lp(v.alternate,v);break;case 24:Ho(m,v,C,L,f),f&&Z&2048&&up(v.alternate,v);break;default:Ho(m,v,C,L,f)}i=i.sibling}}function yu(r,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var o=r,u=i,f=u.flags;switch(u.tag){case 22:yu(o,u),f&2048&&lp(u.alternate,u);break;case 24:yu(o,u),f&2048&&up(u.alternate,u);break;default:yu(o,u)}i=i.sibling}}var _u=8192;function Go(r,i,o){if(r.subtreeFlags&_u)for(r=r.child;r!==null;)xE(r,i,o),r=r.sibling}function xE(r,i,o){switch(r.tag){case 26:Go(r,i,o),r.flags&_u&&r.memoizedState!==null&&IC(o,ii,r.memoizedState,r.memoizedProps);break;case 5:Go(r,i,o);break;case 3:case 4:var u=ii;ii=Hh(r.stateNode.containerInfo),Go(r,i,o),ii=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=_u,_u=16777216,Go(r,i,o),_u=u):Go(r,i,o));break;default:Go(r,i,o)}}function OE(r){var i=r.alternate;if(i!==null&&(r=i.child,r!==null)){i.child=null;do i=r.sibling,r.sibling=null,r=i;while(r!==null)}}function vu(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,VE(u,r)}OE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ME(r),r=r.sibling}function ME(r){switch(r.tag){case 0:case 11:case 15:vu(r),r.flags&2048&&ja(9,r,r.return);break;case 3:vu(r);break;case 12:vu(r);break;case 22:var i=r.stateNode;r.memoizedState!==null&&i._visibility&2&&(r.return===null||r.return.tag!==13)?(i._visibility&=-3,xh(r)):vu(r);break;default:vu(r)}}function xh(r){var i=r.deletions;if((r.flags&16)!==0){if(i!==null)for(var o=0;o<i.length;o++){var u=i[o];Dn=u,VE(u,r)}OE(r)}for(r=r.child;r!==null;){switch(i=r,i.tag){case 0:case 11:case 15:ja(8,i,i.return),xh(i);break;case 22:o=i.stateNode,o._visibility&2&&(o._visibility&=-3,xh(i));break;default:xh(i)}r=r.sibling}}function VE(r,i){for(;Dn!==null;){var o=Dn;switch(o.tag){case 0:case 11:case 15:ja(8,o,i);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:nu(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Dn=u;else e:for(o=r;Dn!==null;){u=Dn;var f=u.sibling,m=u.return;if(wE(u),u===o){Dn=null;break e}if(f!==null){f.return=m,Dn=f;break e}Dn=m}}}var q1={getCacheForType:function(r){var i=Mn(mn),o=i.data.get(r);return o===void 0&&(o=r(),i.data.set(r,o)),o},cacheSignal:function(){return Mn(mn).controller.signal}},H1=typeof WeakMap=="function"?WeakMap:Map,wt=0,Ut=null,ut=null,ht=0,Ct=0,Sr=null,za=!1,$o=!1,cp=!1,na=0,sn=0,Ba=0,Ys=0,hp=0,wr=0,Ko=0,Eu=null,cr=null,fp=!1,Oh=0,PE=0,Mh=1/0,Vh=null,Fa=null,Sn=0,qa=null,Yo=null,ra=0,dp=0,mp=null,kE=null,Tu=0,pp=null;function Ar(){return(wt&2)!==0&&ht!==0?ht&-ht:W.T!==null?Tp():ve()}function LE(){if(wr===0)if((ht&536870912)===0||gt){var r=mi;mi<<=1,(mi&3932160)===0&&(mi=262144),wr=r}else wr=536870912;return r=Tr.current,r!==null&&(r.flags|=32),wr}function hr(r,i,o){(r===Ut&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)&&(Qo(r,0),Ha(r,ht,wr,!1)),pi(r,o),((wt&2)===0||r!==Ut)&&(r===Ut&&((wt&2)===0&&(Ys|=o),sn===4&&Ha(r,ht,wr,!1)),Ii(r))}function UE(r,i,o){if((wt&6)!==0)throw Error(a(327));var u=!o&&(i&127)===0&&(i&r.expiredLanes)===0||gr(r,i),f=u?K1(r,i):yp(r,i,!0),m=u;do{if(f===0){$o&&!u&&Ha(r,i,0,!1);break}else{if(o=r.current.alternate,m&&!G1(o)){f=yp(r,i,!1),m=!1;continue}if(f===2){if(m=i,r.errorRecoveryDisabledLanes&m)var v=0;else v=r.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var C=r;f=Eu;var L=C.current.memoizedState.isDehydrated;if(L&&(Qo(C,v).flags|=256),v=yp(C,v,!1),v!==2){if(cp&&!L){C.errorRecoveryDisabledLanes|=m,Ys|=m,f=4;break e}m=cr,cr=f,m!==null&&(cr===null?cr=m:cr.push.apply(cr,m))}f=v}if(m=!1,f!==2)continue}}if(f===1){Qo(r,0),Ha(r,i,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Ha(u,i,wr,!za);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Oh+300-Ye(),10<f)){if(Ha(u,i,wr,!za),pr(u,0,!0)!==0)break e;ra=i,u.timeoutHandle=pT(jE.bind(null,u,o,cr,Vh,fp,i,wr,Ys,Ko,za,m,"Throttled",-0,0),f);break e}jE(u,o,cr,Vh,fp,i,wr,Ys,Ko,za,m,null,-0,0)}}break}while(!0);Ii(r)}function jE(r,i,o,u,f,m,v,C,L,Z,se,fe,te,ie){if(r.timeoutHandle=-1,fe=i.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Jr},xE(i,m,fe);var xe=(m&62914560)===m?Oh-Ye():(m&4194048)===m?PE-Ye():0;if(xe=DC(fe,xe),xe!==null){ra=m,r.cancelPendingCommit=xe(KE.bind(null,r,i,m,o,u,f,v,C,L,se,fe,null,te,ie)),Ha(r,m,v,!Z);return}}KE(r,i,m,o,u,f,v,C,L)}function G1(r){for(var i=r;;){var o=i.tag;if((o===0||o===11||o===15)&&i.flags&16384&&(o=i.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!vr(m(),f))return!1}catch{return!1}}if(o=i.child,i.subtreeFlags&16384&&o!==null)o.return=i,i=o;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ha(r,i,o,u){i&=~hp,i&=~Ys,r.suspendedLanes|=i,r.pingedLanes&=~i,u&&(r.warmLanes|=i),u=r.expirationTimes;for(var f=i;0<f;){var m=31-Yt(f),v=1<<m;u[m]=-1,f&=~v}o!==0&&zi(r,o,i)}function Ph(){return(wt&6)===0?(bu(0),!1):!0}function gp(){if(ut!==null){if(Ct===0)var r=ut.return;else r=ut,$i=js=null,Om(r),jo=null,iu=0,r=ut;for(;r!==null;)gE(r.alternate,r),r=r.return;ut=null}}function Qo(r,i){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,hC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),ra=0,gp(),Ut=r,ut=o=Hi(r.current,null),ht=i,Ct=0,Sr=null,za=!1,$o=gr(r,i),cp=!1,Ko=wr=hp=Ys=Ba=sn=0,cr=Eu=null,fp=!1,(i&8)!==0&&(i|=i&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=i;0<u;){var f=31-Yt(u),m=1<<f;i|=r[f],u&=~m}return na=i,nh(),o}function zE(r,i){tt=null,W.H=fu,i===Uo||i===ch?(i=nv(),Ct=3):i===Em?(i=nv(),Ct=4):Ct=i===Ym?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Sr=i,ut===null&&(sn=1,wh(r,Ur(i,r.current)))}function BE(){var r=Tr.current;return r===null?!0:(ht&4194048)===ht?Fr===null:(ht&62914560)===ht||(ht&536870912)!==0?r===Fr:!1}function FE(){var r=W.H;return W.H=fu,r===null?fu:r}function qE(){var r=W.A;return W.A=q1,r}function kh(){sn=4,za||(ht&4194048)!==ht&&Tr.current!==null||($o=!0),(Ba&134217727)===0&&(Ys&134217727)===0||Ut===null||Ha(Ut,ht,wr,!1)}function yp(r,i,o){var u=wt;wt|=2;var f=FE(),m=qE();(Ut!==r||ht!==i)&&(Vh=null,Qo(r,i)),i=!1;var v=sn;e:do try{if(Ct!==0&&ut!==null){var C=ut,L=Sr;switch(Ct){case 8:gp(),v=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(i=!0);var Z=Ct;if(Ct=0,Sr=null,Xo(r,C,L,Z),o&&$o){v=0;break e}break;default:Z=Ct,Ct=0,Sr=null,Xo(r,C,L,Z)}}$1(),v=sn;break}catch(se){zE(r,se)}while(!0);return i&&r.shellSuspendCounter++,$i=js=null,wt=u,W.H=f,W.A=m,ut===null&&(Ut=null,ht=0,nh()),v}function $1(){for(;ut!==null;)HE(ut)}function K1(r,i){var o=wt;wt|=2;var u=FE(),f=qE();Ut!==r||ht!==i?(Vh=null,Mh=Ye()+500,Qo(r,i)):$o=gr(r,i);e:do try{if(Ct!==0&&ut!==null){i=ut;var m=Sr;t:switch(Ct){case 1:Ct=0,Sr=null,Xo(r,i,m,1);break;case 2:case 9:if(ev(m)){Ct=0,Sr=null,GE(i);break}i=function(){Ct!==2&&Ct!==9||Ut!==r||(Ct=7),Ii(r)},m.then(i,i);break e;case 3:Ct=7;break e;case 4:Ct=5;break e;case 7:ev(m)?(Ct=0,Sr=null,GE(i)):(Ct=0,Sr=null,Xo(r,i,m,7));break;case 5:var v=null;switch(ut.tag){case 26:v=ut.memoizedState;case 5:case 27:var C=ut;if(v?NT(v):C.stateNode.complete){Ct=0,Sr=null;var L=C.sibling;if(L!==null)ut=L;else{var Z=C.return;Z!==null?(ut=Z,Lh(Z)):ut=null}break t}}Ct=0,Sr=null,Xo(r,i,m,5);break;case 6:Ct=0,Sr=null,Xo(r,i,m,6);break;case 8:gp(),sn=6;break e;default:throw Error(a(462))}}Y1();break}catch(se){zE(r,se)}while(!0);return $i=js=null,W.H=u,W.A=f,wt=o,ut!==null?0:(Ut=null,ht=0,nh(),sn)}function Y1(){for(;ut!==null&&!Rt();)HE(ut)}function HE(r){var i=mE(r.alternate,r,na);r.memoizedProps=r.pendingProps,i===null?Lh(r):ut=i}function GE(r){var i=r,o=i.alternate;switch(i.tag){case 15:case 0:i=lE(o,i,i.pendingProps,i.type,void 0,ht);break;case 11:i=lE(o,i,i.pendingProps,i.type.render,i.ref,ht);break;case 5:Om(i);default:gE(o,i),i=ut=q_(i,na),i=mE(o,i,na)}r.memoizedProps=r.pendingProps,i===null?Lh(r):ut=i}function Xo(r,i,o,u){$i=js=null,Om(i),jo=null,iu=0;var f=i.return;try{if(k1(r,f,i,o,ht)){sn=1,wh(r,Ur(o,r.current)),ut=null;return}}catch(m){if(f!==null)throw ut=f,m;sn=1,wh(r,Ur(o,r.current)),ut=null;return}i.flags&32768?(gt||u===1?r=!0:$o||(ht&536870912)!==0?r=!1:(za=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tr.current,u!==null&&u.tag===13&&(u.flags|=16384))),$E(i,r)):Lh(i)}function Lh(r){var i=r;do{if((i.flags&32768)!==0){$E(i,za);return}r=i.return;var o=j1(i.alternate,i,na);if(o!==null){ut=o;return}if(i=i.sibling,i!==null){ut=i;return}ut=i=r}while(i!==null);sn===0&&(sn=5)}function $E(r,i){do{var o=z1(r.alternate,r);if(o!==null){o.flags&=32767,ut=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!i&&(r=r.sibling,r!==null)){ut=r;return}ut=r=o}while(r!==null);sn=6,ut=null}function KE(r,i,o,u,f,m,v,C,L){r.cancelPendingCommit=null;do Uh();while(Sn!==0);if((wt&6)!==0)throw Error(a(327));if(i!==null){if(i===r.current)throw Error(a(177));if(m=i.lanes|i.childLanes,m|=am,zl(r,o,m,v,C,L),r===Ut&&(ut=Ut=null,ht=0),Yo=i,qa=r,ra=o,dp=m,mp=f,kE=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,J1(rn,function(){return JE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=W.T,W.T=null,f=pe.p,pe.p=2,v=wt,wt|=4;try{B1(r,i,o)}finally{wt=v,pe.p=f,W.T=u}}Sn=1,YE(),QE(),XE()}}function YE(){if(Sn===1){Sn=0;var r=qa,i=Yo,o=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var u=pe.p;pe.p=2;var f=wt;wt|=4;try{IE(i,r);var m=Dp,v=V_(r.containerInfo),C=m.focusedElem,L=m.selectionRange;if(v!==C&&C&&C.ownerDocument&&M_(C.ownerDocument.documentElement,C)){if(L!==null&&em(C)){var Z=L.start,se=L.end;if(se===void 0&&(se=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(se,C.value.length);else{var fe=C.ownerDocument||document,te=fe&&fe.defaultView||window;if(te.getSelection){var ie=te.getSelection(),xe=C.textContent.length,qe=Math.min(L.start,xe),Pt=L.end===void 0?qe:Math.min(L.end,xe);!ie.extend&&qe>Pt&&(v=Pt,Pt=qe,qe=v);var $=O_(C,qe),z=O_(C,Pt);if($&&z&&(ie.rangeCount!==1||ie.anchorNode!==$.node||ie.anchorOffset!==$.offset||ie.focusNode!==z.node||ie.focusOffset!==z.offset)){var J=fe.createRange();J.setStart($.node,$.offset),ie.removeAllRanges(),qe>Pt?(ie.addRange(J),ie.extend(z.node,z.offset)):(J.setEnd(z.node,z.offset),ie.addRange(J))}}}}for(fe=[],ie=C;ie=ie.parentNode;)ie.nodeType===1&&fe.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<fe.length;C++){var le=fe[C];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Xh=!!Ip,Dp=Ip=null}finally{wt=f,pe.p=u,W.T=o}}r.current=i,Sn=2}}function QE(){if(Sn===2){Sn=0;var r=qa,i=Yo,o=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var u=pe.p;pe.p=2;var f=wt;wt|=4;try{SE(r,i.alternate,i)}finally{wt=f,pe.p=u,W.T=o}}Sn=3}}function XE(){if(Sn===4||Sn===3){Sn=0,Le();var r=qa,i=Yo,o=ra,u=kE;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Sn=5:(Sn=0,Yo=qa=null,WE(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(Fa=null),me(o),i=i.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(mr,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=W.T,f=pe.p,pe.p=2,W.T=null;try{for(var m=r.onRecoverableError,v=0;v<u.length;v++){var C=u[v];m(C.value,{componentStack:C.stack})}}finally{W.T=i,pe.p=f}}(ra&3)!==0&&Uh(),Ii(r),f=r.pendingLanes,(o&261930)!==0&&(f&42)!==0?r===pp?Tu++:(Tu=0,pp=r):Tu=0,bu(0)}}function WE(r,i){(r.pooledCacheLanes&=i)===0&&(i=r.pooledCache,i!=null&&(r.pooledCache=null,nu(i)))}function Uh(){return YE(),QE(),XE(),JE()}function JE(){if(Sn!==5)return!1;var r=qa,i=dp;dp=0;var o=me(ra),u=W.T,f=pe.p;try{pe.p=32>o?32:o,W.T=null,o=mp,mp=null;var m=qa,v=ra;if(Sn=0,Yo=qa=null,ra=0,(wt&6)!==0)throw Error(a(331));var C=wt;if(wt|=4,ME(m.current),NE(m,m.current,v,o),wt=C,bu(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(mr,m)}catch{}return!0}finally{pe.p=f,W.T=u,WE(r,i)}}function ZE(r,i,o){i=Ur(o,i),i=Km(r.stateNode,i,2),r=ka(r,i,2),r!==null&&(pi(r,2),Ii(r))}function It(r,i,o){if(r.tag===3)ZE(r,r,o);else for(;i!==null;){if(i.tag===3){ZE(i,r,o);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Fa===null||!Fa.has(u))){r=Ur(o,r),o=eE(2),u=ka(i,o,2),u!==null&&(tE(o,u,i,r),pi(u,2),Ii(u));break}}i=i.return}}function _p(r,i,o){var u=r.pingCache;if(u===null){u=r.pingCache=new H1;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(o)||(cp=!0,f.add(o),r=Q1.bind(null,r,i,o),i.then(r,r))}function Q1(r,i,o){var u=r.pingCache;u!==null&&u.delete(i),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,Ut===r&&(ht&o)===o&&(sn===4||sn===3&&(ht&62914560)===ht&&300>Ye()-Oh?(wt&2)===0&&Qo(r,0):hp|=o,Ko===ht&&(Ko=0)),Ii(r)}function eT(r,i){i===0&&(i=ji()),r=ks(r,i),r!==null&&(pi(r,i),Ii(r))}function X1(r){var i=r.memoizedState,o=0;i!==null&&(o=i.retryLane),eT(r,o)}function W1(r,i){var o=0;switch(r.tag){case 31:case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(a(314))}u!==null&&u.delete(i),eT(r,o)}function J1(r,i){return Fe(r,i)}var jh=null,Wo=null,vp=!1,zh=!1,Ep=!1,Ga=0;function Ii(r){r!==Wo&&r.next===null&&(Wo===null?jh=Wo=r:Wo=Wo.next=r),zh=!0,vp||(vp=!0,eC())}function bu(r,i){if(!Ep&&zh){Ep=!0;do for(var o=!1,u=jh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var v=u.suspendedLanes,C=u.pingedLanes;m=(1<<31-Yt(42|r)+1)-1,m&=f&~(v&~C),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,iT(u,m))}else m=ht,m=pr(u,u===Ut?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||gr(u,m)||(o=!0,iT(u,m));u=u.next}while(o);Ep=!1}}function Z1(){tT()}function tT(){zh=vp=!1;var r=0;Ga!==0&&cC()&&(r=Ga);for(var i=Ye(),o=null,u=jh;u!==null;){var f=u.next,m=nT(u,i);m===0?(u.next=null,o===null?jh=f:o.next=f,f===null&&(Wo=o)):(o=u,(r!==0||(m&3)!==0)&&(zh=!0)),u=f}Sn!==0&&Sn!==5||bu(r),Ga!==0&&(Ga=0)}function nT(r,i){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var v=31-Yt(m),C=1<<v,L=f[v];L===-1?((C&o)===0||(C&u)!==0)&&(f[v]=_o(C,i)):L<=i&&(r.expiredLanes|=C),m&=~C}if(i=Ut,o=ht,o=pr(r,r===i?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===i&&(Ct===2||Ct===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&kt(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||gr(r,o)){if(i=o&-o,i===r.callbackPriority)return i;switch(u!==null&&kt(u),me(o)){case 2:case 8:o=Yn;break;case 32:o=rn;break;case 268435456:o=bs;break;default:o=rn}return u=rT.bind(null,r),o=Fe(o,u),r.callbackPriority=i,r.callbackNode=o,i}return u!==null&&u!==null&&kt(u),r.callbackPriority=2,r.callbackNode=null,2}function rT(r,i){if(Sn!==0&&Sn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(Uh()&&r.callbackNode!==o)return null;var u=ht;return u=pr(r,r===Ut?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(UE(r,u,i),nT(r,Ye()),r.callbackNode!=null&&r.callbackNode===o?rT.bind(null,r):null)}function iT(r,i){if(Uh())return null;UE(r,i,!0)}function eC(){fC(function(){(wt&6)!==0?Fe(nr,Z1):tT()})}function Tp(){if(Ga===0){var r=ko;r===0&&(r=Xn,Xn<<=1,(Xn&261888)===0&&(Xn=256)),Ga=r}return Ga}function aT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:To(""+r)}function sT(r,i){var o=i.ownerDocument.createElement("input");return o.name=i.name,o.value=i.value,r.id&&o.setAttribute("form",r.id),i.parentNode.insertBefore(o,i),r=new FormData(r),o.parentNode.removeChild(o),r}function tC(r,i,o,u,f){if(i==="submit"&&o&&o.stateNode===f){var m=aT((f[Se]||null).action),v=u.submitter;v&&(i=(i=v[Se]||null)?aT(i.formAction):v.getAttribute("formAction"),i!==null&&(m=i,v=null));var C=new Ti("action","action",null,u,f);r.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ga!==0){var L=v?sT(f,v):new FormData(f);Bm(o,{pending:!0,data:L,method:f.method,action:m},null,L)}}else typeof m=="function"&&(C.preventDefault(),L=v?sT(f,v):new FormData(f),Bm(o,{pending:!0,data:L,method:f.method,action:m},m,L))},currentTarget:f}]})}}for(var bp=0;bp<im.length;bp++){var Sp=im[bp],nC=Sp.toLowerCase(),rC=Sp[0].toUpperCase()+Sp.slice(1);ri(nC,"on"+rC)}ri(L_,"onAnimationEnd"),ri(U_,"onAnimationIteration"),ri(j_,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(v1,"onTransitionRun"),ri(E1,"onTransitionStart"),ri(T1,"onTransitionCancel"),ri(z_,"onTransitionEnd"),Bn("onMouseEnter",["mouseout","mouseover"]),Bn("onMouseLeave",["mouseout","mouseover"]),Bn("onPointerEnter",["pointerout","pointerover"]),Bn("onPointerLeave",["pointerout","pointerover"]),ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Su="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Su));function oT(r,i){i=(i&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(i)for(var v=u.length-1;0<=v;v--){var C=u[v],L=C.instance,Z=C.currentTarget;if(C=C.listener,L!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=Z;try{m(f)}catch(se){th(se)}f.currentTarget=null,m=L}else for(v=0;v<u.length;v++){if(C=u[v],L=C.instance,Z=C.currentTarget,C=C.listener,L!==m&&f.isPropagationStopped())break e;m=C,f.currentTarget=Z;try{m(f)}catch(se){th(se)}f.currentTarget=null,m=L}}}}function ct(r,i){var o=i[He];o===void 0&&(o=i[He]=new Set);var u=r+"__bubble";o.has(u)||(lT(i,r,2,!1),o.add(u))}function wp(r,i,o){var u=0;i&&(u|=4),lT(o,r,u,i)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Ap(r){if(!r[Bh]){r[Bh]=!0,rr.forEach(function(o){o!=="selectionchange"&&(iC.has(o)||wp(o,!1,r),wp(o,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Bh]||(i[Bh]=!0,wp("selectionchange",!1,i))}}function lT(r,i,o,u){switch(LT(i)){case 2:var f=OC;break;case 8:f=MC;break;default:f=zp}o=f.bind(null,i,o,r),f=void 0,!Is||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(i,o,{capture:!0,passive:f}):r.addEventListener(i,o,!0):f!==void 0?r.addEventListener(i,o,{passive:f}):r.addEventListener(i,o,!1)}function Rp(r,i,o,u,f){var m=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var C=u.stateNode.containerInfo;if(C===f)break;if(v===4)for(v=u.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;C!==null;){if(v=jt(C),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){u=m=v;continue e}C=C.parentNode}}u=u.return}Ra(function(){var Z=m,se=Vr(o),fe=[];e:{var te=B_.get(r);if(te!==void 0){var ie=Ti,xe=r;switch(r){case"keypress":if(Ns(o)===0)break e;case"keydown":case"keyup":ie=Jc;break;case"focusin":xe="focus",ie=Os;break;case"focusout":xe="blur",ie=Os;break;case"beforeblur":case"afterblur":ie=Os;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=qc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=y;break;case L_:case U_:case j_:ie=Gc;break;case z_:ie=D;break;case"scroll":case"scrollend":ie=Kl;break;case"wheel":ie=ne;break;case"copy":case"cut":case"paste":ie=$c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=qi;break;case"toggle":case"beforetoggle":ie=et}var qe=(i&4)!==0,Pt=!qe&&(r==="scroll"||r==="scrollend"),$=qe?te!==null?te+"Capture":null:te;qe=[];for(var z=Z,J;z!==null;){var le=z;if(J=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||J===null||$===null||(le=Zr(z,$),le!=null&&qe.push(wu(z,le,J))),Pt)break;z=z.return}0<qe.length&&(te=new ie(te,xe,null,o,se),fe.push({event:te,listeners:qe}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ie=r==="mouseout"||r==="pointerout",te&&o!==Hl&&(xe=o.relatedTarget||o.fromElement)&&(jt(xe)||xe[De]))break e;if((ie||te)&&(te=se.window===se?se:(te=se.ownerDocument)?te.defaultView||te.parentWindow:window,ie?(xe=o.relatedTarget||o.toElement,ie=Z,xe=xe?jt(xe):null,xe!==null&&(Pt=l(xe),qe=xe.tag,xe!==Pt||qe!==5&&qe!==27&&qe!==6)&&(xe=null)):(ie=null,xe=Z),ie!==xe)){if(qe=Yl,le="onMouseLeave",$="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(qe=qi,le="onPointerLeave",$="onPointerEnter",z="pointer"),Pt=ie==null?te:zt(ie),J=xe==null?te:zt(xe),te=new qe(le,z+"leave",ie,o,se),te.target=Pt,te.relatedTarget=J,le=null,jt(se)===Z&&(qe=new qe($,z+"enter",xe,o,se),qe.target=J,qe.relatedTarget=Pt,le=qe),Pt=le,ie&&xe)t:{for(qe=aC,$=ie,z=xe,J=0,le=$;le;le=qe(le))J++;le=0;for(var Ue=z;Ue;Ue=qe(Ue))le++;for(;0<J-le;)$=qe($),J--;for(;0<le-J;)z=qe(z),le--;for(;J--;){if($===z||z!==null&&$===z.alternate){qe=$;break t}$=qe($),z=qe(z)}qe=null}else qe=null;ie!==null&&uT(fe,te,ie,qe,!1),xe!==null&&Pt!==null&&uT(fe,Pt,xe,qe,!0)}}e:{if(te=Z?zt(Z):window,ie=te.nodeName&&te.nodeName.toLowerCase(),ie==="select"||ie==="input"&&te.type==="file")var vt=R_;else if(w_(te))if(C_)vt=g1;else{vt=m1;var Oe=d1}else ie=te.nodeName,!ie||ie.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?Z&&Eo(Z.elementType)&&(vt=R_):vt=p1;if(vt&&(vt=vt(r,Z))){A_(fe,vt,o,se);break e}Oe&&Oe(r,te,Z),r==="focusout"&&Z&&te.type==="number"&&Z.memoizedProps.value!=null&&Bl(te,"number",te.value)}switch(Oe=Z?zt(Z):window,r){case"focusin":(w_(Oe)||Oe.contentEditable==="true")&&(Io=Oe,tm=Z,Zl=null);break;case"focusout":Zl=tm=Io=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,P_(fe,o,se);break;case"selectionchange":if(_1)break;case"keydown":case"keyup":P_(fe,o,se)}var it;if(St)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Co?Ms(r,o)&&(ft="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(ft="onCompositionStart");ft&&(wi&&o.locale!=="ko"&&(Co||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Co&&(it=$l()):(Ei=se,Gl="value"in Ei?Ei.value:Ei.textContent,Co=!0)),Oe=Fh(Z,ft),0<Oe.length&&(ft=new Si(ft,r,null,o,se),fe.push({event:ft,listeners:Oe}),it?ft.data=it:(it=Ro(o),it!==null&&(ft.data=it)))),(it=kr?u1(r,o):c1(r,o))&&(ft=Fh(Z,"onBeforeInput"),0<ft.length&&(Oe=new Si("onBeforeInput","beforeinput",null,o,se),fe.push({event:Oe,listeners:ft}),Oe.data=it)),tC(fe,r,Z,o,se)}oT(fe,i)})}function wu(r,i,o){return{instance:r,listener:i,currentTarget:o}}function Fh(r,i){for(var o=i+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Zr(r,o),f!=null&&u.unshift(wu(r,f,m)),f=Zr(r,i),f!=null&&u.push(wu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function aC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function uT(r,i,o,u,f){for(var m=i._reactName,v=[];o!==null&&o!==u;){var C=o,L=C.alternate,Z=C.stateNode;if(C=C.tag,L!==null&&L===u)break;C!==5&&C!==26&&C!==27||Z===null||(L=Z,f?(Z=Zr(o,m),Z!=null&&v.unshift(wu(o,Z,L))):f||(Z=Zr(o,m),Z!=null&&v.push(wu(o,Z,L)))),o=o.return}v.length!==0&&r.push({event:i,listeners:v})}var sC=/\r\n?/g,oC=/\u0000|\uFFFD/g;function cT(r){return(typeof r=="string"?r:""+r).replace(sC,`
`).replace(oC,"")}function hT(r,i){return i=cT(i),cT(r)===i}function Vt(r,i,o,u,f,m){switch(o){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||sr(r,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&sr(r,""+u);break;case"className":dn(r,"class",u);break;case"tabIndex":dn(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":dn(r,o,u);break;case"style":ql(r,u,m);break;case"data":if(i!=="object"){dn(r,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=To(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(i!=="input"&&Vt(r,i,"name",f.name,f,null),Vt(r,i,"formEncType",f.formEncType,f,null),Vt(r,i,"formMethod",f.formMethod,f,null),Vt(r,i,"formTarget",f.formTarget,f,null)):(Vt(r,i,"encType",f.encType,f,null),Vt(r,i,"method",f.method,f,null),Vt(r,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=To(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Jr);break;case"onScroll":u!=null&&ct("scroll",r);break;case"onScrollEnd":u!=null&&ct("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=To(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":ct("beforetoggle",r),ct("toggle",r),Zt(r,"popover",u);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Zt(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Fc.get(o)||o,Zt(r,o,u))}}function Cp(r,i,o,u,f,m){switch(o){case"style":ql(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(a(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(a(60));r.innerHTML=o}}break;case"children":typeof u=="string"?sr(r,u):(typeof u=="number"||typeof u=="bigint")&&sr(r,""+u);break;case"onScroll":u!=null&&ct("scroll",r);break;case"onScrollEnd":u!=null&&ct("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Jr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zn.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),i=o.slice(2,f?o.length-7:void 0),m=r[Se]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(i,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(i,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Zt(r,o,u)}}}function Pn(r,i,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ct("error",r),ct("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var v=o[m];if(v!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Vt(r,i,m,v,o,null)}}f&&Vt(r,i,"srcSet",o.srcSet,o,null),u&&Vt(r,i,"src",o.src,o,null);return;case"input":ct("invalid",r);var C=m=v=f=null,L=null,Z=null;for(u in o)if(o.hasOwnProperty(u)){var se=o[u];if(se!=null)switch(u){case"name":f=se;break;case"type":v=se;break;case"checked":L=se;break;case"defaultChecked":Z=se;break;case"value":m=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(137,i));break;default:Vt(r,i,u,se,o,null)}}jc(r,m,C,L,Z,v,f,!1);return;case"select":ct("invalid",r),u=v=m=null;for(f in o)if(o.hasOwnProperty(f)&&(C=o[f],C!=null))switch(f){case"value":m=C;break;case"defaultValue":v=C;break;case"multiple":u=C;default:Vt(r,i,f,C,o,null)}i=m,o=v,r.multiple=!!u,i!=null?ba(r,!!u,i,!1):o!=null&&ba(r,!!u,o,!0);return;case"textarea":ct("invalid",r),m=f=u=null;for(v in o)if(o.hasOwnProperty(v)&&(C=o[v],C!=null))switch(v){case"value":u=C;break;case"defaultValue":f=C;break;case"children":m=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(a(91));break;default:Vt(r,i,v,C,o,null)}Sa(r,u,f,m);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(u=o[L],u!=null))switch(L){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Vt(r,i,L,u,o,null)}return;case"dialog":ct("beforetoggle",r),ct("toggle",r),ct("cancel",r),ct("close",r);break;case"iframe":case"object":ct("load",r);break;case"video":case"audio":for(u=0;u<Su.length;u++)ct(Su[u],r);break;case"image":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"embed":case"source":case"link":ct("error",r),ct("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in o)if(o.hasOwnProperty(Z)&&(u=o[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:Vt(r,i,Z,u,o,null)}return;default:if(Eo(i)){for(se in o)o.hasOwnProperty(se)&&(u=o[se],u!==void 0&&Cp(r,i,se,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&Vt(r,i,C,u,o,null))}function lC(r,i,o,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,v=null,C=null,L=null,Z=null,se=null;for(ie in o){var fe=o[ie];if(o.hasOwnProperty(ie)&&fe!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":L=fe;default:u.hasOwnProperty(ie)||Vt(r,i,ie,null,u,fe)}}for(var te in u){var ie=u[te];if(fe=o[te],u.hasOwnProperty(te)&&(ie!=null||fe!=null))switch(te){case"type":m=ie;break;case"name":f=ie;break;case"checked":Z=ie;break;case"defaultChecked":se=ie;break;case"value":v=ie;break;case"defaultValue":C=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:ie!==fe&&Vt(r,i,te,ie,u,fe)}}vo(r,v,C,L,Z,se,m,f);return;case"select":ie=v=C=te=null;for(m in o)if(L=o[m],o.hasOwnProperty(m)&&L!=null)switch(m){case"value":break;case"multiple":ie=L;default:u.hasOwnProperty(m)||Vt(r,i,m,null,u,L)}for(f in u)if(m=u[f],L=o[f],u.hasOwnProperty(f)&&(m!=null||L!=null))switch(f){case"value":te=m;break;case"defaultValue":C=m;break;case"multiple":v=m;default:m!==L&&Vt(r,i,f,m,u,L)}i=C,o=v,u=ie,te!=null?ba(r,!!o,te,!1):!!u!=!!o&&(i!=null?ba(r,!!o,i,!0):ba(r,!!o,o?[]:"",!1));return;case"textarea":ie=te=null;for(C in o)if(f=o[C],o.hasOwnProperty(C)&&f!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Vt(r,i,C,null,u,f)}for(v in u)if(f=u[v],m=o[v],u.hasOwnProperty(v)&&(f!=null||m!=null))switch(v){case"value":te=f;break;case"defaultValue":ie=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&Vt(r,i,v,f,u,m)}zc(r,te,ie);return;case"option":for(var xe in o)if(te=o[xe],o.hasOwnProperty(xe)&&te!=null&&!u.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:Vt(r,i,xe,null,u,te)}for(L in u)if(te=u[L],ie=o[L],u.hasOwnProperty(L)&&te!==ie&&(te!=null||ie!=null))switch(L){case"selected":r.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:Vt(r,i,L,te,u,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in o)te=o[qe],o.hasOwnProperty(qe)&&te!=null&&!u.hasOwnProperty(qe)&&Vt(r,i,qe,null,u,te);for(Z in u)if(te=u[Z],ie=o[Z],u.hasOwnProperty(Z)&&te!==ie&&(te!=null||ie!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:Vt(r,i,Z,te,u,ie)}return;default:if(Eo(i)){for(var Pt in o)te=o[Pt],o.hasOwnProperty(Pt)&&te!==void 0&&!u.hasOwnProperty(Pt)&&Cp(r,i,Pt,void 0,u,te);for(se in u)te=u[se],ie=o[se],!u.hasOwnProperty(se)||te===ie||te===void 0&&ie===void 0||Cp(r,i,se,te,u,ie);return}}for(var $ in o)te=o[$],o.hasOwnProperty($)&&te!=null&&!u.hasOwnProperty($)&&Vt(r,i,$,null,u,te);for(fe in u)te=u[fe],ie=o[fe],!u.hasOwnProperty(fe)||te===ie||te==null&&ie==null||Vt(r,i,fe,te,u,ie)}function fT(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,i=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var f=o[u],m=f.transferSize,v=f.initiatorType,C=f.duration;if(m&&C&&fT(v)){for(v=0,C=f.responseEnd,u+=1;u<o.length;u++){var L=o[u],Z=L.startTime;if(Z>C)break;var se=L.transferSize,fe=L.initiatorType;se&&fT(fe)&&(L=L.responseEnd,v+=se*(L<C?1:(C-Z)/(L-Z)))}if(--u,i+=8*(m+v)/(f.duration/1e3),r++,10<r)break}}if(0<r)return i/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Ip=null,Dp=null;function qh(r){return r.nodeType===9?r:r.ownerDocument}function dT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mT(r,i){if(r===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&i==="foreignObject"?0:r}function Np(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var xp=null;function cC(){var r=window.event;return r&&r.type==="popstate"?r===xp?!1:(xp=r,!0):(xp=null,!1)}var pT=typeof setTimeout=="function"?setTimeout:void 0,hC=typeof clearTimeout=="function"?clearTimeout:void 0,gT=typeof Promise=="function"?Promise:void 0,fC=typeof queueMicrotask=="function"?queueMicrotask:typeof gT<"u"?function(r){return gT.resolve(null).then(r).catch(dC)}:pT;function dC(r){setTimeout(function(){throw r})}function $a(r){return r==="head"}function yT(r,i){var o=i,u=0;do{var f=o.nextSibling;if(r.removeChild(o),f&&f.nodeType===8)if(o=f.data,o==="/$"||o==="/&"){if(u===0){r.removeChild(f),tl(i);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")Au(r.ownerDocument.documentElement);else if(o==="head"){o=r.ownerDocument.head,Au(o);for(var m=o.firstChild;m;){var v=m.nextSibling,C=m.nodeName;m[Nt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=v}}else o==="body"&&Au(r.ownerDocument.body);o=f}while(o);tl(i)}function _T(r,i){var o=r;r=0;do{var u=o.nextSibling;if(o.nodeType===1?i?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(i?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(r===0)break;r--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||r++;o=u}while(o)}function Op(r){var i=r.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var o=i;switch(i=i.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Op(o),qt(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function mC(r,i,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Nt])switch(i){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(i==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=qr(r.nextSibling),r===null)break}return null}function pC(r,i,o){if(i==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=qr(r.nextSibling),r===null))return null;return r}function vT(r,i){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!i||(r=qr(r.nextSibling),r===null))return null;return r}function Mp(r){return r.data==="$?"||r.data==="$~"}function Vp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function gC(r,i){var o=r.ownerDocument;if(r.data==="$~")r._reactRetry=i;else if(r.data!=="$?"||o.readyState!=="loading")i();else{var u=function(){i(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function qr(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return r}var Pp=null;function ET(r){r=r.nextSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="/$"||o==="/&"){if(i===0)return qr(r.nextSibling);i--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||i++}r=r.nextSibling}return null}function TT(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(i===0)return r;i--}else o!=="/$"&&o!=="/&"||i++}r=r.previousSibling}return null}function bT(r,i,o){switch(i=qh(o),r){case"html":if(r=i.documentElement,!r)throw Error(a(452));return r;case"head":if(r=i.head,!r)throw Error(a(453));return r;case"body":if(r=i.body,!r)throw Error(a(454));return r;default:throw Error(a(451))}}function Au(r){for(var i=r.attributes;i.length;)r.removeAttributeNode(i[0]);qt(r)}var Hr=new Map,ST=new Set;function Hh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var ia=pe.d;pe.d={f:yC,r:_C,D:vC,C:EC,L:TC,m:bC,X:wC,S:SC,M:AC};function yC(){var r=ia.f(),i=Ph();return r||i}function _C(r){var i=nt(r);i!==null&&i.tag===5&&i.type==="form"?zv(i):ia.r(r)}var Jo=typeof document>"u"?null:document;function wT(r,i,o){var u=Jo;if(u&&typeof i=="string"&&i){var f=ar(i);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),ST.has(f)||(ST.add(f),r={rel:r,crossOrigin:o,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),Pn(i,"link",r),Bt(i),u.head.appendChild(i)))}}function vC(r){ia.D(r),wT("dns-prefetch",r,null)}function EC(r,i){ia.C(r,i),wT("preconnect",r,i)}function TC(r,i,o){ia.L(r,i,o);var u=Jo;if(u&&r&&i){var f='link[rel="preload"][as="'+ar(i)+'"]';i==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+ar(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+ar(o.imageSizes)+'"]')):f+='[href="'+ar(r)+'"]';var m=f;switch(i){case"style":m=Zo(r);break;case"script":m=el(r)}Hr.has(m)||(r=E({rel:"preload",href:i==="image"&&o&&o.imageSrcSet?void 0:r,as:i},o),Hr.set(m,r),u.querySelector(f)!==null||i==="style"&&u.querySelector(Ru(m))||i==="script"&&u.querySelector(Cu(m))||(i=u.createElement("link"),Pn(i,"link",r),Bt(i),u.head.appendChild(i)))}}function bC(r,i){ia.m(r,i);var o=Jo;if(o&&r){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+ar(u)+'"][href="'+ar(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=el(r)}if(!Hr.has(m)&&(r=E({rel:"modulepreload",href:r},i),Hr.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Cu(m)))return}u=o.createElement("link"),Pn(u,"link",r),Bt(u),o.head.appendChild(u)}}}function SC(r,i,o){ia.S(r,i,o);var u=Jo;if(u&&r){var f=In(u).hoistableStyles,m=Zo(r);i=i||"default";var v=f.get(m);if(!v){var C={loading:0,preload:null};if(v=u.querySelector(Ru(m)))C.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":i},o),(o=Hr.get(m))&&kp(r,o);var L=v=u.createElement("link");Bt(L),Pn(L,"link",r),L._p=new Promise(function(Z,se){L.onload=Z,L.onerror=se}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Gh(v,i,u)}v={type:"stylesheet",instance:v,count:1,state:C},f.set(m,v)}}}function wC(r,i){ia.X(r,i);var o=Jo;if(o&&r){var u=In(o).hoistableScripts,f=el(r),m=u.get(f);m||(m=o.querySelector(Cu(f)),m||(r=E({src:r,async:!0},i),(i=Hr.get(f))&&Lp(r,i),m=o.createElement("script"),Bt(m),Pn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function AC(r,i){ia.M(r,i);var o=Jo;if(o&&r){var u=In(o).hoistableScripts,f=el(r),m=u.get(f);m||(m=o.querySelector(Cu(f)),m||(r=E({src:r,async:!0,type:"module"},i),(i=Hr.get(f))&&Lp(r,i),m=o.createElement("script"),Bt(m),Pn(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function AT(r,i,o,u){var f=(f=Te.current)?Hh(f):null;if(!f)throw Error(a(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(i=Zo(o.href),o=In(f).hoistableStyles,u=o.get(i),u||(u={type:"style",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Zo(o.href);var m=In(f).hoistableStyles,v=m.get(r);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,v),(m=f.querySelector(Ru(r)))&&!m._p&&(v.instance=m,v.state.loading=5),Hr.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Hr.set(r,o),m||RC(f,r,o,v.state))),i&&u===null)throw Error(a(528,""));return v}if(i&&u!==null)throw Error(a(529,""));return null;case"script":return i=o.async,o=o.src,typeof o=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=el(o),o=In(f).hoistableScripts,u=o.get(i),u||(u={type:"script",instance:null,count:0,state:null},o.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,r))}}function Zo(r){return'href="'+ar(r)+'"'}function Ru(r){return'link[rel="stylesheet"]['+r+"]"}function RT(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function RC(r,i,o,u){r.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=r.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),Pn(i,"link",o),Bt(i),r.head.appendChild(i))}function el(r){return'[src="'+ar(r)+'"]'}function Cu(r){return"script[async]"+r}function CT(r,i,o){if(i.count++,i.instance===null)switch(i.type){case"style":var u=r.querySelector('style[data-href~="'+ar(o.href)+'"]');if(u)return i.instance=u,Bt(u),u;var f=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Bt(u),Pn(u,"style",f),Gh(u,o.precedence,r),i.instance=u;case"stylesheet":f=Zo(o.href);var m=r.querySelector(Ru(f));if(m)return i.state.loading|=4,i.instance=m,Bt(m),m;u=RT(o),(f=Hr.get(f))&&kp(u,f),m=(r.ownerDocument||r).createElement("link"),Bt(m);var v=m;return v._p=new Promise(function(C,L){v.onload=C,v.onerror=L}),Pn(m,"link",u),i.state.loading|=4,Gh(m,o.precedence,r),i.instance=m;case"script":return m=el(o.src),(f=r.querySelector(Cu(m)))?(i.instance=f,Bt(f),f):(u=o,(f=Hr.get(m))&&(u=E({},o),Lp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Bt(f),Pn(f,"link",u),r.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,Gh(u,o.precedence,r));return i.instance}function Gh(r,i,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,v=0;v<u.length;v++){var C=u[v];if(C.dataset.precedence===i)m=C;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(i=o.nodeType===9?o.head:o,i.insertBefore(r,i.firstChild))}function kp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.title==null&&(r.title=i.title)}function Lp(r,i){r.crossOrigin==null&&(r.crossOrigin=i.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=i.referrerPolicy),r.integrity==null&&(r.integrity=i.integrity)}var $h=null;function IT(r,i,o){if($h===null){var u=new Map,f=$h=new Map;f.set(o,u)}else f=$h,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Nt]||m[Ee]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var v=m.getAttribute(i)||"";v=r+v;var C=u.get(v);C?C.push(m):u.set(v,[m])}}return u}function DT(r,i,o){r=r.ownerDocument||r,r.head.insertBefore(o,i==="title"?r.querySelector("head > title"):null)}function CC(r,i,o){if(o===1||i.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return r=i.disabled,typeof i.precedence=="string"&&r==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function NT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function IC(r,i,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var f=Zo(u.href),m=i.querySelector(Ru(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(r.count++,r=Kh.bind(r),i.then(r,r)),o.state.loading|=4,o.instance=m,Bt(m);return}m=i.ownerDocument||i,u=RT(u),(f=Hr.get(f))&&kp(u,f),m=m.createElement("link"),Bt(m);var v=m;v._p=new Promise(function(C,L){v.onload=C,v.onerror=L}),Pn(m,"link",u),o.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(r.count++,o=Kh.bind(r),i.addEventListener("load",o),i.addEventListener("error",o))}}var Up=0;function DC(r,i){return r.stylesheets&&r.count===0&&Qh(r,r.stylesheets),0<r.count||0<r.imgCount?function(o){var u=setTimeout(function(){if(r.stylesheets&&Qh(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+i);0<r.imgBytes&&Up===0&&(Up=62500*uC());var f=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Qh(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>Up?50:800)+i);return r.unsuspend=o,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function Kh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qh(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Yh=null;function Qh(r,i){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Yh=new Map,i.forEach(NC,r),Yh=null,Kh.call(r))}function NC(r,i){if(!(i.state.loading&4)){var o=Yh.get(r);if(o)var u=o.get(null);else{o=new Map,Yh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var v=f[m];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),u=v)}u&&o.set(null,u)}f=i.instance,v=f.getAttribute("data-precedence"),m=o.get(v)||u,m===u&&o.set(null,f),o.set(v,f),this.count++,u=Kh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),i.state.loading|=4}}var Iu={$$typeof:q,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function xC(r,i,o,u,f,m,v,C,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.hiddenUpdates=Wn(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function xT(r,i,o,u,f,m,v,C,L,Z,se,fe){return r=new xC(r,i,o,v,L,Z,se,fe,C),i=1,m===!0&&(i|=24),m=Er(3,null,null,i),r.current=m,m.stateNode=r,i=ym(),i.refCount++,r.pooledCache=i,i.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:i},Tm(m),r}function OT(r){return r?(r=xo,r):xo}function MT(r,i,o,u,f,m){f=OT(f),u.context===null?u.context=f:u.pendingContext=f,u=Pa(i),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=ka(r,u,i),o!==null&&(hr(o,r,i),su(o,r,i))}function VT(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<i?o:i}}function jp(r,i){VT(r,i),(r=r.alternate)&&VT(r,i)}function PT(r){if(r.tag===13||r.tag===31){var i=ks(r,67108864);i!==null&&hr(i,r,67108864),jp(r,67108864)}}function kT(r){if(r.tag===13||r.tag===31){var i=Ar();i=ee(i);var o=ks(r,i);o!==null&&hr(o,r,i),jp(r,i)}}var Xh=!0;function OC(r,i,o,u){var f=W.T;W.T=null;var m=pe.p;try{pe.p=2,zp(r,i,o,u)}finally{pe.p=m,W.T=f}}function MC(r,i,o,u){var f=W.T;W.T=null;var m=pe.p;try{pe.p=8,zp(r,i,o,u)}finally{pe.p=m,W.T=f}}function zp(r,i,o,u){if(Xh){var f=Bp(u);if(f===null)Rp(r,i,u,Wh,o),UT(r,u);else if(PC(f,r,i,o,u))u.stopPropagation();else if(UT(r,u),i&4&&-1<VC.indexOf(r)){for(;f!==null;){var m=nt(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var v=Mr(m.pendingLanes);if(v!==0){var C=m;for(C.pendingLanes|=2,C.entangledLanes|=2;v;){var L=1<<31-Yt(v);C.entanglements[1]|=L,v&=~L}Ii(m),(wt&6)===0&&(Mh=Ye()+500,bu(0))}}break;case 31:case 13:C=ks(m,2),C!==null&&hr(C,m,2),Ph(),jp(m,2)}if(m=Bp(u),m===null&&Rp(r,i,u,Wh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else Rp(r,i,u,null,o)}}function Bp(r){return r=Vr(r),Fp(r)}var Wh=null;function Fp(r){if(Wh=null,r=jt(r),r!==null){var i=l(r);if(i===null)r=null;else{var o=i.tag;if(o===13){if(r=c(i),r!==null)return r;r=null}else if(o===31){if(r=d(i),r!==null)return r;r=null}else if(o===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Wh=r,null}function LT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dt()){case nr:return 2;case Yn:return 8;case rn:case bn:return 32;case bs:return 268435456;default:return 32}default:return 32}}var qp=!1,Ka=null,Ya=null,Qa=null,Du=new Map,Nu=new Map,Xa=[],VC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function UT(r,i){switch(r){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Ya=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Du.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(i.pointerId)}}function xu(r,i,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},i!==null&&(i=nt(i),i!==null&&PT(i)),r):(r.eventSystemFlags|=u,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function PC(r,i,o,u,f){switch(i){case"focusin":return Ka=xu(Ka,r,i,o,u,f),!0;case"dragenter":return Ya=xu(Ya,r,i,o,u,f),!0;case"mouseover":return Qa=xu(Qa,r,i,o,u,f),!0;case"pointerover":var m=f.pointerId;return Du.set(m,xu(Du.get(m)||null,r,i,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,Nu.set(m,xu(Nu.get(m)||null,r,i,o,u,f)),!0}return!1}function jT(r){var i=jt(r.target);if(i!==null){var o=l(i);if(o!==null){if(i=o.tag,i===13){if(i=c(o),i!==null){r.blockedOn=i,Ce(r.priority,function(){kT(o)});return}}else if(i===31){if(i=d(o),i!==null){r.blockedOn=i,Ce(r.priority,function(){kT(o)});return}}else if(i===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Jh(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var o=Bp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);Hl=u,o.target.dispatchEvent(u),Hl=null}else return i=nt(o),i!==null&&PT(i),r.blockedOn=o,!1;i.shift()}return!0}function zT(r,i,o){Jh(r)&&o.delete(i)}function kC(){qp=!1,Ka!==null&&Jh(Ka)&&(Ka=null),Ya!==null&&Jh(Ya)&&(Ya=null),Qa!==null&&Jh(Qa)&&(Qa=null),Du.forEach(zT),Nu.forEach(zT)}function Zh(r,i){r.blockedOn===i&&(r.blockedOn=null,qp||(qp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kC)))}var ef=null;function BT(r){ef!==r&&(ef=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ef===r&&(ef=null);for(var i=0;i<r.length;i+=3){var o=r[i],u=r[i+1],f=r[i+2];if(typeof u!="function"){if(Fp(u||o)===null)continue;break}var m=nt(o);m!==null&&(r.splice(i,3),i-=3,Bm(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function tl(r){function i(L){return Zh(L,r)}Ka!==null&&Zh(Ka,r),Ya!==null&&Zh(Ya,r),Qa!==null&&Zh(Qa,r),Du.forEach(i),Nu.forEach(i);for(var o=0;o<Xa.length;o++){var u=Xa[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<Xa.length&&(o=Xa[0],o.blockedOn===null);)jT(o),o.blockedOn===null&&Xa.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],v=f[Se]||null;if(typeof m=="function")v||BT(o);else if(v){var C=null;if(m&&m.hasAttribute("formAction")){if(f=m,v=m[Se]||null)C=v.formAction;else if(Fp(f)!==null)continue}else C=v.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),BT(o)}}}function FT(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Hp(r){this._internalRoot=r}tf.prototype.render=Hp.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(a(409));var o=i.current,u=Ar();MT(o,u,r,i,null,null)},tf.prototype.unmount=Hp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;MT(r.current,2,null,r,null,null),Ph(),i[De]=null}};function tf(r){this._internalRoot=r}tf.prototype.unstable_scheduleHydration=function(r){if(r){var i=ve();r={blockedOn:null,target:r,priority:i};for(var o=0;o<Xa.length&&i!==0&&i<Xa[o].priority;o++);Xa.splice(o,0,r),o===0&&jT(r)}};var qT=e.version;if(qT!=="19.2.4")throw Error(a(527,qT,"19.2.4"));pe.findDOMNode=function(r){var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(a(188)):(r=Object.keys(r).join(","),Error(a(268,r)));return r=g(i),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var LC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nf.isDisabled&&nf.supportsFiber)try{mr=nf.inject(LC),Lt=nf}catch{}}return Mu.createRoot=function(r,i){if(!s(r))throw Error(a(299));var o=!1,u="",f=Xv,m=Wv,v=Jv;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError)),i=xT(r,1,!1,null,null,o,u,null,f,m,v,FT),r[De]=i.current,Ap(r),new Hp(i)},Mu.hydrateRoot=function(r,i,o){if(!s(r))throw Error(a(299));var u=!1,f="",m=Xv,v=Wv,C=Jv,L=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),i=xT(r,1,!0,i,o??null,u,f,L,m,v,C,FT),i.context=OT(null),o=i.current,u=Ar(),u=ee(u),f=Pa(u),f.callback=null,ka(o,f,u),o=u,i.current.lanes=o,pi(i,o),Ii(i),r[De]=i.current,Ap(r),new tf(i)},Mu.version="19.2.4",Mu}var ZT;function XC(){if(ZT)return Yp.exports;ZT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Yp.exports=QC(),Yp.exports}var WC=XC();const JC=RS(WC);var Jp={exports:{}},Zp={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function ZC(){if(eb)return Zp;eb=1;var n=gd();function e(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var t=typeof Object.is=="function"?Object.is:e,a=n.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return Zp.useSyncExternalStoreWithSelector=function(p,g,_,E,S){var R=s(null);if(R.current===null){var U={hasValue:!1,value:null};R.current=U}else U=R.current;R=c(function(){function V(re){if(!F){if(F=!0,H=re,re=E(re),S!==void 0&&U.hasValue){var Y=U.value;if(S(Y,re))return q=Y}return q=re}if(Y=q,t(H,re))return Y;var b=E(re);return S!==void 0&&S(Y,b)?(H=re,Y):(H=re,q=b)}var F=!1,H,q,Q=_===void 0?null:_;return[function(){return V(g())},Q===null?void 0:function(){return V(Q())}]},[g,_,E,S]);var B=a(p,R[0],R[1]);return l(function(){U.hasValue=!0,U.value=B},[B]),d(B),B},Zp}var tb;function eI(){return tb||(tb=1,Jp.exports=ZC()),Jp.exports}var tI=eI();function nI(n){n()}function rI(){let n=null,e=null;return{clear(){n=null,e=null},notify(){nI(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let a=n;for(;a;)t.push(a),a=a.next;return t},subscribe(t){let a=!0;const s=e={callback:t,next:null,prev:e};return s.prev?s.prev.next=s:n=s,function(){!a||n===null||(a=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:n=s.next)}}}}var nb={notify(){},get:()=>[]};function iI(n,e){let t,a=nb,s=0,l=!1;function c(B){_();const V=a.subscribe(B);let F=!1;return()=>{F||(F=!0,V(),E())}}function d(){a.notify()}function p(){U.onStateChange&&U.onStateChange()}function g(){return l}function _(){s++,t||(t=n.subscribe(p),a=rI())}function E(){s--,t&&s===0&&(t(),t=void 0,a.clear(),a=nb)}function S(){l||(l=!0,_())}function R(){l&&(l=!1,E())}const U={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:p,isSubscribed:g,trySubscribe:S,tryUnsubscribe:R,getListeners:()=>a};return U}var aI=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sI=aI(),oI=()=>typeof navigator<"u"&&navigator.product==="ReactNative",lI=oI(),uI=()=>sI||lI?M.useLayoutEffect:M.useEffect,cI=uI(),eg=Symbol.for("react-redux-context"),tg=typeof globalThis<"u"?globalThis:{};function hI(){if(!M.createContext)return{};const n=tg[eg]??(tg[eg]=new Map);let e=n.get(M.createContext);return e||(e=M.createContext(null),n.set(M.createContext,e)),e}var fs=hI();function fI(n){const{children:e,context:t,serverState:a,store:s}=n,l=M.useMemo(()=>{const p=iI(s);return{store:s,subscription:p,getServerState:a?()=>a:void 0}},[s,a]),c=M.useMemo(()=>s.getState(),[s]);cI(()=>{const{subscription:p}=l;return p.onStateChange=p.notifyNestedSubs,p.trySubscribe(),c!==s.getState()&&p.notifyNestedSubs(),()=>{p.tryUnsubscribe(),p.onStateChange=void 0}},[l,c]);const d=t||fs;return M.createElement(d.Provider,{value:l},e)}var dI=fI;function cy(n=fs){return function(){return M.useContext(n)}}var DS=cy();function NS(n=fs){const e=n===fs?DS:cy(n),t=()=>{const{store:a}=e();return a};return Object.assign(t,{withTypes:()=>t}),t}var mI=NS();function pI(n=fs){const e=n===fs?mI:NS(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var gI=pI(),yI=(n,e)=>n===e;function _I(n=fs){const e=n===fs?DS:cy(n),t=(a,s={})=>{const{equalityFn:l=yI}=typeof s=="function"?{equalityFn:s}:s,c=e(),{store:d,subscription:p,getServerState:g}=c;M.useRef(!0);const _=M.useCallback({[a.name](S){return a(S)}}[a.name],[a]),E=tI.useSyncExternalStoreWithSelector(p.addNestedSub,d.getState,g||d.getState,_,l);return M.useDebugValue(E),E};return Object.assign(t,{withTypes:()=>t}),t}var vI=_I();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xS=n=>{throw TypeError(n)},EI=(n,e,t)=>e.has(n)||xS("Cannot "+t),ng=(n,e,t)=>(EI(n,e,"read from private field"),t?t.call(n):e.get(n)),TI=(n,e,t)=>e.has(n)?xS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),rb="popstate";function bI(n={}){function e(s,l){let{pathname:c="/",search:d="",hash:p=""}=ya(s.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),nc("",{pathname:c,search:d,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(s,l){let c=s.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");d=g===-1?p:p.slice(0,g)}return d+"#"+(typeof l=="string"?l:ki(l))}function a(s,l){tn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return wI(e,t,a,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function SI(){return Math.random().toString(36).substring(2,10)}function ib(n,e){return{usr:n.state,key:n.key,idx:e}}function nc(n,e,t=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ya(e):e,state:t,key:e&&e.key||a||SI()}}function ki({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ya(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let a=n.indexOf("?");a>=0&&(e.search=n.substring(a),n=n.substring(0,a)),n&&(e.pathname=n)}return e}function wI(n,e,t,a={}){let{window:s=document.defaultView,v5Compat:l=!1}=a,c=s.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function E(){d="POP";let V=_(),F=V==null?null:V-g;g=V,p&&p({action:d,location:B.location,delta:F})}function S(V,F){d="PUSH";let H=nc(B.location,V,F);t&&t(H,V),g=_()+1;let q=ib(H,g),Q=B.createHref(H);try{c.pushState(q,"",Q)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;s.location.assign(Q)}l&&p&&p({action:d,location:B.location,delta:1})}function R(V,F){d="REPLACE";let H=nc(B.location,V,F);t&&t(H,V),g=_();let q=ib(H,g),Q=B.createHref(H);c.replaceState(q,"",Q),l&&p&&p({action:d,location:B.location,delta:0})}function U(V){return OS(V)}let B={get action(){return d},get location(){return n(s,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(rb,E),p=V,()=>{s.removeEventListener(rb,E),p=null}},createHref(V){return e(s,V)},createURL:U,encodeLocation(V){let F=U(V);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:S,replace:R,go(V){return c.go(V)}};return B}function OS(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:ki(n);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}var Uu,ab=class{constructor(n){if(TI(this,Uu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(ng(this,Uu).has(n))return ng(this,Uu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){ng(this,Uu).set(n,e)}};Uu=new WeakMap;var AI=new Set(["lazy","caseSensitive","path","id","index","children"]);function RI(n){return AI.has(n)}var CI=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function II(n){return CI.has(n)}function DI(n){return n.index===!0}function rc(n,e,t=[],a={},s=!1){return n.map((l,c)=>{let d=[...t,String(c)],p=typeof l.id=="string"?l.id:d.join("-");if(st(l.index!==!0||!l.children,"Cannot specify children on an index route"),st(s||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),DI(l)){let g={...l,id:p};return a[p]=sb(g,e(g)),g}else{let g={...l,id:p,children:void 0};return a[p]=sb(g,e(g)),l.children&&(g.children=rc(l.children,e,d,a,s)),g}})}function sb(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Za(n,e,t="/"){return ju(n,e,t,!1)}function ju(n,e,t,a){let s=typeof e=="string"?ya(e):e,l=Yr(s.pathname||"/",t);if(l==null)return null;let c=MS(n);xI(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=FI(l);d=zI(c[p],g,a)}return d}function NI(n,e){let{route:t,pathname:a,params:s}=n;return{id:t.id,pathname:a,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function MS(n,e=[],t=[],a="",s=!1){let l=(c,d,p=s,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(a)&&p)return;st(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length)}let E=xi([a,_.relativePath]),S=t.concat(_);c.children&&c.children.length>0&&(st(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),MS(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:UI(E,c.index),routesMeta:S})};return n.forEach((c,d)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))l(c,d);else for(let g of VS(c.path))l(c,d,!0,g)}),e}function VS(n){let e=n.split("/");if(e.length===0)return[];let[t,...a]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return s?[l,""]:[l];let c=VS(a.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function xI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:jI(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var OI=/^:[\w-]+$/,MI=3,VI=2,PI=1,kI=10,LI=-2,ob=n=>n==="*";function UI(n,e){let t=n.split("/"),a=t.length;return t.some(ob)&&(a+=LI),e&&(a+=VI),t.filter(s=>!ob(s)).reduce((s,l)=>s+(OI.test(l)?MI:l===""?PI:kI),a)}function jI(n,e){return n.length===e.length&&n.slice(0,-1).every((a,s)=>a===e[s])?n[n.length-1]-e[e.length-1]:0}function zI(n,e,t=!1){let{routesMeta:a}=n,s={},l="/",c=[];for(let d=0;d<a.length;++d){let p=a[d],g=d===a.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=zf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),S=p.route;if(!E&&g&&t&&!a[a.length-1].route.index&&(E=zf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:xi([l,E.pathname]),pathnameBase:GI(xi([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=xi([l,E.pathnameBase]))}return c}function zf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,a]=BI(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),d=s.slice(1);return{params:a.reduce((g,{paramName:_,isOptional:E},S)=>{if(_==="*"){let U=d[S]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const R=d[S];return E&&!R?g[_]=void 0:g[_]=(R||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function BI(n,e=!1,t=!0){tn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(a.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),a]}function FI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Yr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=n.charAt(t);return a&&a!=="/"?null:n.slice(t)||"/"}function qI({basename:n,pathname:e}){return e==="/"?n:xi([n,e])}var PS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hy=n=>PS.test(n);function HI(n,e="/"){let{pathname:t,search:a="",hash:s=""}=typeof n=="string"?ya(n):n,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=lb(t.substring(1),"/"):l=lb(t,e)):l=e,{pathname:l,search:$I(a),hash:KI(s)}}function lb(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function rg(n,e,t,a){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kS(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function yd(n){let e=kS(n);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function _d(n,e,t,a=!1){let s;typeof n=="string"?s=ya(n):(s={...n},st(!s.pathname||!s.pathname.includes("?"),rg("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),rg("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),rg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!a&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;s.pathname=S.join("/")}d=E>=0?e[E]:"/"}let p=HI(s,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var xi=n=>n.join("/").replace(/\/\/+/g,"/"),GI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),$I=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,KI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,yc=class{constructor(n,e,t,a=!1){this.status=n,this.statusText=e||"",this.internal=a,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function ic(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function _c(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var LS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function US(n,e){let t=n;if(typeof t!="string"||!PS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let a=t,s=!1;if(LS)try{let l=new URL(window.location.href),c=t.startsWith("//")?new URL(l.protocol+t):new URL(t),d=Yr(c.pathname,e);c.origin===l.origin&&d!=null?t=d+c.search+c.hash:s=!0}catch{tn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:s,to:t}}var is=Symbol("Uninstrumented");function YI(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(l){let c=Object.keys(t);for(let d of c)l[d]&&t[d].push(l[d])}}));let a={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=ul(t.lazy,e.lazy,()=>{});s&&(a.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(l=>{let c=s[l],d=t[`lazy.${l}`];if(typeof c=="function"&&d.length>0){let p=ul(d,c,()=>{});p&&(a.lazy=Object.assign(a.lazy||{},{[l]:p}))}})}return["loader","action"].forEach(s=>{let l=e[s];if(typeof l=="function"&&t[s].length>0){let c=l[is]??l,d=ul(t[s],c,(...p)=>ub(p[0]));d&&(s==="loader"&&c.hydrate===!0&&(d.hydrate=!0),d[is]=c,a[s]=d)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(a.middleware=e.middleware.map(s=>{let l=s[is]??s,c=ul(t.middleware,l,(...d)=>ub(d[0]));return c?(c[is]=l,c):s})),a}function QI(n,e){let t={navigate:[],fetch:[]};if(e.forEach(a=>a({instrument(s){let l=Object.keys(s);for(let c of l)s[c]&&t[c].push(s[c])}})),t.navigate.length>0){let a=n.navigate[is]??n.navigate,s=ul(t.navigate,a,(...l)=>{let[c,d]=l;return{to:typeof c=="number"||typeof c=="string"?c:c?ki(c):".",...cb(n,d??{})}});s&&(s[is]=a,n.navigate=s)}if(t.fetch.length>0){let a=n.fetch[is]??n.fetch,s=ul(t.fetch,a,(...l)=>{let[c,,d,p]=l;return{href:d??".",fetcherKey:c,...cb(n,p??{})}});s&&(s[is]=a,n.fetch=s)}return n}function ul(n,e,t){return n.length===0?null:async(...a)=>{let s=await jS(n,t(...a),()=>e(...a),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function jS(n,e,t,a){let s=n[a],l;if(s){let c,d=async()=>(c?console.error("You cannot call instrumented handlers more than once"):c=jS(n,e,t,a-1),l=await c,st(l,"Expected a result"),l.type==="error"&&l.value instanceof Error?{status:"error",error:l.value}:{status:"success",error:void 0});try{await s(d,e)}catch(p){console.error("An instrumentation function threw an error:",p)}c||await d(),await c}else try{l={type:"success",value:await t()}}catch(c){l={type:"error",value:c}}return l||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function ub(n){let{request:e,context:t,params:a,unstable_pattern:s}=n;return{request:XI(e),params:{...a},unstable_pattern:s,context:WI(t)}}function cb(n,e){return{currentUrl:ki(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function XI(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function WI(n){if(ZI(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var JI=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ZI(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===JI}var zS=["POST","PUT","PATCH","DELETE"],eD=new Set(zS),tD=["GET",...zS],nD=new Set(tD),BS=new Set([301,302,303,307,308]),rD=new Set([307,308]),ig={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},iD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},aD=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),FS="remix-router-transitions",qS=Symbol("ResetLoaderData");function sD(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";st(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=n.hydrationRouteProperties||[],s=n.mapRouteProperties||aD,l=s;if(n.unstable_instrumentations){let k=n.unstable_instrumentations;l=G=>({...s(G),...YI(k.map(ee=>ee.route).filter(Boolean),G)})}let c={},d=rc(n.routes,l,void 0,c),p,g=n.basename||"/";g.startsWith("/")||(g=`/${g}`);let _=n.dataStrategy||hD,E={...n.future},S=null,R=new Set,U=null,B=null,V=null,F=n.hydrationData!=null,H=Za(d,n.history.location,g),q=!1,Q=null,re;if(H==null&&!n.patchRoutesOnNavigation){let k=Gr(404,{pathname:n.history.location.pathname}),{matches:G,route:ee}=rf(d);re=!0,H=G,Q={[ee.id]:k}}else if(H&&!n.hydrationData&&ji(H,d,n.history.location.pathname).active&&(H=null),H)if(H.some(k=>k.route.lazy))re=!1;else if(!H.some(k=>fy(k.route)))re=!0;else{let k=n.hydrationData?n.hydrationData.loaderData:null,G=n.hydrationData?n.hydrationData.errors:null;if(G){let ee=H.findIndex(me=>G[me.route.id]!==void 0);re=H.slice(0,ee+1).every(me=>!Cg(me.route,k,G))}else re=H.every(ee=>!Cg(ee.route,k,G))}else{re=!1,H=[];let k=ji(null,d,n.history.location.pathname);k.active&&k.matches&&(q=!0,H=k.matches)}let Y,b={historyAction:n.history.action,location:n.history.location,matches:H,initialized:re,navigation:ig,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||Q,fetchers:new Map,blockers:new Map},w="POP",I=null,N=!1,x,P=!1,O=new Map,ze=null,Ze=!1,W=!1,pe=new Set,_e=new Map,Be=0,Ve=-1,j=new Map,K=new Set,oe=new Map,ce=new Map,ge=new Set,Te=new Map,Pe,Ke=null;function lt(){if(S=n.history.listen(({action:k,location:G,delta:ee})=>{if(Pe){Pe(),Pe=void 0;return}tn(Te.size===0||ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=mi({currentLocation:b.location,nextLocation:G,historyAction:k});if(me&&ee!=null){let ve=new Promise(Ce=>{Pe=Ce});n.history.go(ee*-1),Xn(me,{state:"blocked",location:G,proceed(){Xn(me,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),ve.then(()=>n.history.go(ee))},reset(){let Ce=new Map(b.blockers);Ce.set(me,Vu),Tt({blockers:Ce})}}),I==null||I.resolve(),I=null;return}return ye(k,G)}),t){DD(e,O);let k=()=>ND(e,O);e.addEventListener("pagehide",k),ze=()=>e.removeEventListener("pagehide",k)}return b.initialized||ye("POP",b.location,{initialHydration:!0}),Y}function Kt(){S&&S(),ze&&ze(),R.clear(),x&&x.abort(),b.fetchers.forEach((k,G)=>va(G)),b.blockers.forEach((k,G)=>ws(G))}function Cn(k){return R.add(k),()=>R.delete(k)}function Tt(k,G={}){k.matches&&(k.matches=k.matches.map(ve=>{let Ce=c[ve.route.id],Ne=ve.route;return Ne.element!==Ce.element||Ne.errorElement!==Ce.errorElement||Ne.hydrateFallbackElement!==Ce.hydrateFallbackElement?{...ve,route:Ce}:ve})),b={...b,...k};let ee=[],me=[];b.fetchers.forEach((ve,Ce)=>{ve.state==="idle"&&(ge.has(Ce)?ee.push(Ce):me.push(Ce))}),ge.forEach(ve=>{!b.fetchers.has(ve)&&!_e.has(ve)&&ee.push(ve)}),[...R].forEach(ve=>ve(b,{deletedFetchers:ee,newErrors:k.errors??null,viewTransitionOpts:G.viewTransitionOpts,flushSync:G.flushSync===!0})),ee.forEach(ve=>va(ve)),me.forEach(ve=>b.fetchers.delete(ve))}function Tn(k,G,{flushSync:ee}={}){var He,Me;let me=b.actionData!=null&&b.navigation.formMethod!=null&&Hn(b.navigation.formMethod)&&b.navigation.state==="loading"&&((He=k.state)==null?void 0:He._isRedirect)!==!0,ve;G.actionData?Object.keys(G.actionData).length>0?ve=G.actionData:ve=null:me?ve=b.actionData:ve=null;let Ce=G.loaderData?Eb(b.loaderData,G.loaderData,G.matches||[],G.errors):b.loaderData,Ne=b.blockers;Ne.size>0&&(Ne=new Map(Ne),Ne.forEach((Qe,at)=>Ne.set(at,Vu)));let Ee=Ze?!1:_o(k,G.matches||b.matches),Se=N===!0||b.navigation.formMethod!=null&&Hn(b.navigation.formMethod)&&((Me=k.state)==null?void 0:Me._isRedirect)!==!0;p&&(d=p,p=void 0),Ze||w==="POP"||(w==="PUSH"?n.history.push(k,k.state):w==="REPLACE"&&n.history.replace(k,k.state));let De;if(w==="POP"){let Qe=O.get(b.location.pathname);Qe&&Qe.has(k.pathname)?De={currentLocation:b.location,nextLocation:k}:O.has(k.pathname)&&(De={currentLocation:k,nextLocation:b.location})}else if(P){let Qe=O.get(b.location.pathname);Qe?Qe.add(k.pathname):(Qe=new Set([k.pathname]),O.set(b.location.pathname,Qe)),De={currentLocation:b.location,nextLocation:k}}Tt({...G,actionData:ve,loaderData:Ce,historyAction:w,location:k,initialized:!0,navigation:ig,revalidation:"idle",restoreScrollPosition:Ee,preventScrollReset:Se,blockers:Ne},{viewTransitionOpts:De,flushSync:ee===!0}),w="POP",N=!1,P=!1,Ze=!1,W=!1,I==null||I.resolve(),I=null,Ke==null||Ke.resolve(),Ke=null}async function Jt(k,G){if(I==null||I.resolve(),I=null,typeof k=="number"){I||(I=wb());let at=I.promise;return n.history.go(k),at}let ee=Rg(b.location,b.matches,g,k,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:me,submission:ve,error:Ce}=hb(!1,ee,G),Ne=b.location,Ee=nc(b.location,me,G&&G.state);Ee={...Ee,...n.history.encodeLocation(Ee)};let Se=G&&G.replace!=null?G.replace:void 0,De="PUSH";Se===!0?De="REPLACE":Se===!1||ve!=null&&Hn(ve.formMethod)&&ve.formAction===b.location.pathname+b.location.search&&(De="REPLACE");let He=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,Me=(G&&G.flushSync)===!0,Qe=mi({currentLocation:Ne,nextLocation:Ee,historyAction:De});if(Qe){Xn(Qe,{state:"blocked",location:Ee,proceed(){Xn(Qe,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),Jt(k,G)},reset(){let at=new Map(b.blockers);at.set(Qe,Vu),Tt({blockers:at})}});return}await ye(De,Ee,{submission:ve,pendingError:Ce,preventScrollReset:He,replace:G&&G.replace,enableViewTransition:G&&G.viewTransition,flushSync:Me,callSiteDefaultShouldRevalidate:G&&G.unstable_defaultShouldRevalidate})}function ae(){Ke||(Ke=wb()),Yn(),Tt({revalidation:"loading"});let k=Ke.promise;return b.navigation.state==="submitting"?k:b.navigation.state==="idle"?(ye(b.historyAction,b.location,{startUninterruptedRevalidation:!0}),k):(ye(w||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation,enableViewTransition:P===!0}),k)}async function ye(k,G,ee){x&&x.abort(),x=null,w=k,Ze=(ee&&ee.startUninterruptedRevalidation)===!0,gr(b.location,b.matches),N=(ee&&ee.preventScrollReset)===!0,P=(ee&&ee.enableViewTransition)===!0;let me=p||d,ve=ee&&ee.overrideNavigation,Ce=ee!=null&&ee.initialHydration&&b.matches&&b.matches.length>0&&!q?b.matches:Za(me,G,g),Ne=(ee&&ee.flushSync)===!0;if(Ce&&b.initialized&&!W&&vD(b.location,G)&&!(ee&&ee.submission&&Hn(ee.submission.formMethod))){Tn(G,{matches:Ce},{flushSync:Ne});return}let Ee=ji(Ce,me,G.pathname);if(Ee.active&&Ee.matches&&(Ce=Ee.matches),!Ce){let{error:qt,notFoundMatches:jt,route:nt}=Qt(G.pathname);Tn(G,{matches:jt,loaderData:{},errors:{[nt.id]:qt}},{flushSync:Ne});return}x=new AbortController;let Se=rl(n.history,G,x.signal,ee&&ee.submission),De=n.getContext?await n.getContext():new ab,He;if(ee&&ee.pendingError)He=[es(Ce).route.id,{type:"error",error:ee.pendingError}];else if(ee&&ee.submission&&Hn(ee.submission.formMethod)){let qt=await ke(Se,G,ee.submission,Ce,De,Ee.active,ee&&ee.initialHydration===!0,{replace:ee.replace,flushSync:Ne});if(qt.shortCircuited)return;if(qt.pendingActionResult){let[jt,nt]=qt.pendingActionResult;if(Rr(nt)&&ic(nt.error)&&nt.error.status===404){x=null,Tn(G,{matches:qt.matches,loaderData:{},errors:{[jt]:nt.error}});return}}Ce=qt.matches||Ce,He=qt.pendingActionResult,ve=ag(G,ee.submission),Ne=!1,Ee.active=!1,Se=rl(n.history,Se.url,Se.signal)}let{shortCircuited:Me,matches:Qe,loaderData:at,errors:Nt}=await Ae(Se,G,Ce,De,Ee.active,ve,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Ne,He,ee&&ee.callSiteDefaultShouldRevalidate);Me||(x=null,Tn(G,{matches:Qe||Ce,...Tb(He),loaderData:at,errors:Nt}))}async function ke(k,G,ee,me,ve,Ce,Ne,Ee={}){Yn();let Se=CD(G,ee);if(Tt({navigation:Se},{flushSync:Ee.flushSync===!0}),Ce){let Me=await Wn(me,G.pathname,k.signal);if(Me.type==="aborted")return{shortCircuited:!0};if(Me.type==="error"){if(Me.partialMatches.length===0){let{matches:at,route:Nt}=rf(d);return{matches:at,pendingActionResult:[Nt.id,{type:"error",error:Me.error}]}}let Qe=es(Me.partialMatches).route.id;return{matches:Me.partialMatches,pendingActionResult:[Qe,{type:"error",error:Me.error}]}}else if(Me.matches)me=Me.matches;else{let{notFoundMatches:Qe,error:at,route:Nt}=Qt(G.pathname);return{matches:Qe,pendingActionResult:[Nt.id,{type:"error",error:at}]}}}let De,He=gf(me,G);if(!He.route.action&&!He.route.lazy)De={type:"error",error:Gr(405,{method:k.method,pathname:G.pathname,routeId:He.route.id})};else{let Me=hl(l,c,k,me,He,Ne?[]:a,ve),Qe=await Dt(k,Me,ve,null);if(De=Qe[He.route.id],!De){for(let at of me)if(Qe[at.route.id]){De=Qe[at.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(Xs(De)){let Me;return Ee&&Ee.replace!=null?Me=Ee.replace:Me=yb(De.response.headers.get("Location"),new URL(k.url),g,n.history)===b.location.pathname+b.location.search,await Ye(k,De,!0,{submission:ee,replace:Me}),{shortCircuited:!0}}if(Rr(De)){let Me=es(me,He.route.id);return(Ee&&Ee.replace)!==!0&&(w="PUSH"),{matches:me,pendingActionResult:[Me.route.id,De,He.route.id]}}return{matches:me,pendingActionResult:[He.route.id,De]}}async function Ae(k,G,ee,me,ve,Ce,Ne,Ee,Se,De,He,Me,Qe){let at=Ce||ag(G,Ne),Nt=Ne||Ee||Sb(at),qt=!Ze&&!De;if(ve){if(qt){let Zt=we(Me);Tt({navigation:at,...Zt!==void 0?{actionData:Zt}:{}},{flushSync:He})}let ot=await Wn(ee,G.pathname,k.signal);if(ot.type==="aborted")return{shortCircuited:!0};if(ot.type==="error"){if(ot.partialMatches.length===0){let{matches:dn,route:xt}=rf(d);return{matches:dn,loaderData:{},errors:{[xt.id]:ot.error}}}let Zt=es(ot.partialMatches).route.id;return{matches:ot.partialMatches,loaderData:{},errors:{[Zt]:ot.error}}}else if(ot.matches)ee=ot.matches;else{let{error:Zt,notFoundMatches:dn,route:xt}=Qt(G.pathname);return{matches:dn,loaderData:{},errors:{[xt.id]:Zt}}}}let jt=p||d,{dsMatches:nt,revalidatingFetchers:zt}=fb(k,me,l,c,n.history,b,ee,Nt,G,De?[]:a,De===!0,W,pe,ge,oe,K,jt,g,n.patchRoutesOnNavigation!=null,Me,Qe);if(Ve=++Be,!n.dataStrategy&&!nt.some(ot=>ot.shouldLoad)&&!nt.some(ot=>ot.route.middleware&&ot.route.middleware.length>0)&&zt.length===0){let ot=Yt();return Tn(G,{matches:ee,loaderData:{},errors:Me&&Rr(Me[1])?{[Me[0]]:Me[1].error}:null,...Tb(Me),...ot?{fetchers:new Map(b.fetchers)}:{}},{flushSync:He}),{shortCircuited:!0}}if(qt){let ot={};if(!ve){ot.navigation=at;let Zt=we(Me);Zt!==void 0&&(ot.actionData=Zt)}zt.length>0&&(ot.fetchers=Fe(zt)),Tt(ot,{flushSync:He})}zt.forEach(ot=>{Lt(ot.key),ot.controller&&_e.set(ot.key,ot.controller)});let In=()=>zt.forEach(ot=>Lt(ot.key));x&&x.signal.addEventListener("abort",In);let{loaderResults:Bt,fetcherResults:rr}=await nr(nt,zt,k,me);if(k.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",In),zt.forEach(ot=>_e.delete(ot.key));let zn=af(Bt);if(zn)return await Ye(k,zn.result,!0,{replace:Se}),{shortCircuited:!0};if(zn=af(rr),zn)return K.add(zn.key),await Ye(k,zn.result,!0,{replace:Se}),{shortCircuited:!0};let{loaderData:ir,errors:Bn}=vb(b,ee,Bt,Me,zt,rr);De&&b.errors&&(Bn={...b.errors,...Bn});let yr=Yt(),gi=Ss(Ve),yi=yr||gi||zt.length>0;return{matches:ee,loaderData:ir,errors:Bn,...yi?{fetchers:new Map(b.fetchers)}:{}}}function we(k){if(k&&!Rr(k[1]))return{[k[0]]:k[1].data};if(b.actionData)return Object.keys(b.actionData).length===0?null:b.actionData}function Fe(k){return k.forEach(G=>{let ee=b.fetchers.get(G.key),me=Pu(void 0,ee?ee.data:void 0);b.fetchers.set(G.key,me)}),new Map(b.fetchers)}async function kt(k,G,ee,me){Lt(k);let ve=(me&&me.flushSync)===!0,Ce=p||d,Ne=Rg(b.location,b.matches,g,ee,G,me==null?void 0:me.relative),Ee=Za(Ce,Ne,g),Se=ji(Ee,Ce,Ne);if(Se.active&&Se.matches&&(Ee=Se.matches),!Ee){bn(k,G,Gr(404,{pathname:Ne}),{flushSync:ve});return}let{path:De,submission:He,error:Me}=hb(!0,Ne,me);if(Me){bn(k,G,Me,{flushSync:ve});return}let Qe=n.getContext?await n.getContext():new ab,at=(me&&me.preventScrollReset)===!0;if(He&&Hn(He.formMethod)){await Rt(k,G,De,Ee,Qe,Se.active,ve,at,He,me&&me.unstable_defaultShouldRevalidate);return}oe.set(k,{routeId:G,path:De}),await Le(k,G,De,Ee,Qe,Se.active,ve,at,He)}async function Rt(k,G,ee,me,ve,Ce,Ne,Ee,Se,De){Yn(),oe.delete(k);let He=b.fetchers.get(k);rn(k,ID(Se,He),{flushSync:Ne});let Me=new AbortController,Qe=rl(n.history,ee,Me.signal,Se);if(Ce){let rt=await Wn(me,new URL(Qe.url).pathname,Qe.signal,k);if(rt.type==="aborted")return;if(rt.type==="error"){bn(k,G,rt.error,{flushSync:Ne});return}else if(rt.matches)me=rt.matches;else{bn(k,G,Gr(404,{pathname:ee}),{flushSync:Ne});return}}let at=gf(me,ee);if(!at.route.action&&!at.route.lazy){let rt=Gr(405,{method:Se.formMethod,pathname:ee,routeId:G});bn(k,G,rt,{flushSync:Ne});return}_e.set(k,Me);let Nt=Be,qt=hl(l,c,Qe,me,at,a,ve),jt=await Dt(Qe,qt,ve,k),nt=jt[at.route.id];if(!nt){for(let rt of qt)if(jt[rt.route.id]){nt=jt[rt.route.id];break}}if(Qe.signal.aborted){_e.get(k)===Me&&_e.delete(k);return}if(ge.has(k)){if(Xs(nt)||Rr(nt)){rn(k,aa(void 0));return}}else{if(Xs(nt))if(_e.delete(k),Ve>Nt){rn(k,aa(void 0));return}else return K.add(k),rn(k,Pu(Se)),Ye(Qe,nt,!1,{fetcherSubmission:Se,preventScrollReset:Ee});if(Rr(nt)){bn(k,G,nt.error);return}}let zt=b.navigation.location||b.location,In=rl(n.history,zt,Me.signal),Bt=p||d,rr=b.navigation.state!=="idle"?Za(Bt,b.navigation.location,g):b.matches;st(rr,"Didn't find any matches after fetcher action");let zn=++Be;j.set(k,zn);let ir=Pu(Se,nt.data);b.fetchers.set(k,ir);let{dsMatches:Bn,revalidatingFetchers:yr}=fb(In,ve,l,c,n.history,b,rr,Se,zt,a,!1,W,pe,ge,oe,K,Bt,g,n.patchRoutesOnNavigation!=null,[at.route.id,nt],De);yr.filter(rt=>rt.key!==k).forEach(rt=>{let _r=rt.key,Ta=b.fetchers.get(_r),bt=Pu(void 0,Ta?Ta.data:void 0);b.fetchers.set(_r,bt),Lt(_r),rt.controller&&_e.set(_r,rt.controller)}),Tt({fetchers:new Map(b.fetchers)});let gi=()=>yr.forEach(rt=>Lt(rt.key));Me.signal.addEventListener("abort",gi);let{loaderResults:yi,fetcherResults:ot}=await nr(Bn,yr,In,ve);if(Me.signal.aborted)return;if(Me.signal.removeEventListener("abort",gi),j.delete(k),_e.delete(k),yr.forEach(rt=>_e.delete(rt.key)),b.fetchers.has(k)){let rt=aa(nt.data);b.fetchers.set(k,rt)}let Zt=af(yi);if(Zt)return Ye(In,Zt.result,!1,{preventScrollReset:Ee});if(Zt=af(ot),Zt)return K.add(Zt.key),Ye(In,Zt.result,!1,{preventScrollReset:Ee});let{loaderData:dn,errors:xt}=vb(b,rr,yi,void 0,yr,ot);Ss(zn),b.navigation.state==="loading"&&zn>Ve?(st(w,"Expected pending action"),x&&x.abort(),Tn(b.navigation.location,{matches:rr,loaderData:dn,errors:xt,fetchers:new Map(b.fetchers)})):(Tt({errors:xt,loaderData:Eb(b.loaderData,dn,rr,xt),fetchers:new Map(b.fetchers)}),W=!1)}async function Le(k,G,ee,me,ve,Ce,Ne,Ee,Se){let De=b.fetchers.get(k);rn(k,Pu(Se,De?De.data:void 0),{flushSync:Ne});let He=new AbortController,Me=rl(n.history,ee,He.signal);if(Ce){let nt=await Wn(me,new URL(Me.url).pathname,Me.signal,k);if(nt.type==="aborted")return;if(nt.type==="error"){bn(k,G,nt.error,{flushSync:Ne});return}else if(nt.matches)me=nt.matches;else{bn(k,G,Gr(404,{pathname:ee}),{flushSync:Ne});return}}let Qe=gf(me,ee);_e.set(k,He);let at=Be,Nt=hl(l,c,Me,me,Qe,a,ve),jt=(await Dt(Me,Nt,ve,k))[Qe.route.id];if(_e.get(k)===He&&_e.delete(k),!Me.signal.aborted){if(ge.has(k)){rn(k,aa(void 0));return}if(Xs(jt))if(Ve>at){rn(k,aa(void 0));return}else{K.add(k),await Ye(Me,jt,!1,{preventScrollReset:Ee});return}if(Rr(jt)){bn(k,G,jt.error);return}rn(k,aa(jt.data))}}async function Ye(k,G,ee,{submission:me,fetcherSubmission:ve,preventScrollReset:Ce,replace:Ne}={}){ee||(I==null||I.resolve(),I=null),G.response.headers.has("X-Remix-Revalidate")&&(W=!0);let Ee=G.response.headers.get("Location");st(Ee,"Expected a Location header on the redirect Response"),Ee=yb(Ee,new URL(k.url),g,n.history);let Se=nc(b.location,Ee,{_isRedirect:!0});if(t){let Nt=!1;if(G.response.headers.has("X-Remix-Reload-Document"))Nt=!0;else if(hy(Ee)){const qt=OS(Ee,!0);Nt=qt.origin!==e.location.origin||Yr(qt.pathname,g)==null}if(Nt){Ne?e.location.replace(Ee):e.location.assign(Ee);return}}x=null;let De=Ne===!0||G.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:He,formAction:Me,formEncType:Qe}=b.navigation;!me&&!ve&&He&&Me&&Qe&&(me=Sb(b.navigation));let at=me||ve;if(rD.has(G.response.status)&&at&&Hn(at.formMethod))await ye(De,Se,{submission:{...at,formAction:Ee},preventScrollReset:Ce||N,enableViewTransition:ee?P:void 0});else{let Nt=ag(Se,me);await ye(De,Se,{overrideNavigation:Nt,fetcherSubmission:ve,preventScrollReset:Ce||N,enableViewTransition:ee?P:void 0})}}async function Dt(k,G,ee,me){var Ne;let ve,Ce={};try{ve=await dD(_,k,G,me,ee,!1)}catch(Ee){return G.filter(Se=>Se.shouldLoad).forEach(Se=>{Ce[Se.route.id]={type:"error",error:Ee}}),Ce}if(k.signal.aborted)return Ce;if(!Hn(k.method))for(let Ee of G){if(((Ne=ve[Ee.route.id])==null?void 0:Ne.type)==="error")break;!ve.hasOwnProperty(Ee.route.id)&&!b.loaderData.hasOwnProperty(Ee.route.id)&&(!b.errors||!b.errors.hasOwnProperty(Ee.route.id))&&Ee.shouldCallHandler()&&(ve[Ee.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ee.route.id}`)})}for(let[Ee,Se]of Object.entries(ve))if(SD(Se)){let De=Se.result;Ce[Ee]={type:"redirect",response:yD(De,k,Ee,G,g)}}else Ce[Ee]=await gD(Se);return Ce}async function nr(k,G,ee,me){let ve=Dt(ee,k,me,null),Ce=Promise.all(G.map(async Se=>{if(Se.matches&&Se.match&&Se.request&&Se.controller){let He=(await Dt(Se.request,Se.matches,me,Se.key))[Se.match.route.id];return{[Se.key]:He}}else return Promise.resolve({[Se.key]:{type:"error",error:Gr(404,{pathname:Se.path})}})})),Ne=await ve,Ee=(await Ce).reduce((Se,De)=>Object.assign(Se,De),{});return{loaderResults:Ne,fetcherResults:Ee}}function Yn(){W=!0,oe.forEach((k,G)=>{_e.has(G)&&pe.add(G),Lt(G)})}function rn(k,G,ee={}){b.fetchers.set(k,G),Tt({fetchers:new Map(b.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function bn(k,G,ee,me={}){let ve=es(b.matches,G);va(k),Tt({errors:{[ve.route.id]:ee},fetchers:new Map(b.fetchers)},{flushSync:(me&&me.flushSync)===!0})}function bs(k){return ce.set(k,(ce.get(k)||0)+1),ge.has(k)&&ge.delete(k),b.fetchers.get(k)||iD}function yo(k,G){Lt(k,G==null?void 0:G.reason),rn(k,aa(null))}function va(k){let G=b.fetchers.get(k);_e.has(k)&&!(G&&G.state==="loading"&&j.has(k))&&Lt(k),oe.delete(k),j.delete(k),K.delete(k),ge.delete(k),pe.delete(k),b.fetchers.delete(k)}function mr(k){let G=(ce.get(k)||0)-1;G<=0?(ce.delete(k),ge.add(k)):ce.set(k,G),Tt({fetchers:new Map(b.fetchers)})}function Lt(k,G){let ee=_e.get(k);ee&&(ee.abort(G),_e.delete(k))}function Qn(k){for(let G of k){let ee=bs(G),me=aa(ee.data);b.fetchers.set(G,me)}}function Yt(){let k=[],G=!1;for(let ee of K){let me=b.fetchers.get(ee);st(me,`Expected fetcher: ${ee}`),me.state==="loading"&&(K.delete(ee),k.push(ee),G=!0)}return Qn(k),G}function Ss(k){let G=[];for(let[ee,me]of j)if(me<k){let ve=b.fetchers.get(ee);st(ve,`Expected fetcher: ${ee}`),ve.state==="loading"&&(Lt(ee),j.delete(ee),G.push(ee))}return Qn(G),G.length>0}function Ea(k,G){let ee=b.blockers.get(k)||Vu;return Te.get(k)!==G&&Te.set(k,G),ee}function ws(k){b.blockers.delete(k),Te.delete(k)}function Xn(k,G){let ee=b.blockers.get(k)||Vu;st(ee.state==="unblocked"&&G.state==="blocked"||ee.state==="blocked"&&G.state==="blocked"||ee.state==="blocked"&&G.state==="proceeding"||ee.state==="blocked"&&G.state==="unblocked"||ee.state==="proceeding"&&G.state==="unblocked",`Invalid blocker state transition: ${ee.state} -> ${G.state}`);let me=new Map(b.blockers);me.set(k,G),Tt({blockers:me})}function mi({currentLocation:k,nextLocation:G,historyAction:ee}){if(Te.size===0)return;Te.size>1&&tn(!1,"A router only supports one blocker at a time");let me=Array.from(Te.entries()),[ve,Ce]=me[me.length-1],Ne=b.blockers.get(ve);if(!(Ne&&Ne.state==="proceeding")&&Ce({currentLocation:k,nextLocation:G,historyAction:ee}))return ve}function Qt(k){let G=Gr(404,{pathname:k}),ee=p||d,{matches:me,route:ve}=rf(ee);return{notFoundMatches:me,route:ve,error:G}}function Mr(k,G,ee){if(U=k,V=G,B=ee||null,!F&&b.navigation===ig){F=!0;let me=_o(b.location,b.matches);me!=null&&Tt({restoreScrollPosition:me})}return()=>{U=null,V=null,B=null}}function pr(k,G){return B&&B(k,G.map(me=>NI(me,b.loaderData)))||k.key}function gr(k,G){if(U&&V){let ee=pr(k,G);U[ee]=V()}}function _o(k,G){if(U){let ee=pr(k,G),me=U[ee];if(typeof me=="number")return me}return null}function ji(k,G,ee){if(n.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:ju(G,ee,g,!0)}}else return{active:!0,matches:ju(G,ee,g,!0)||[]};return{active:!1,matches:null}}async function Wn(k,G,ee,me){if(!n.patchRoutesOnNavigation)return{type:"success",matches:k};let ve=k;for(;;){let Ce=p==null,Ne=p||d,Ee=c;try{await n.patchRoutesOnNavigation({signal:ee,path:G,matches:ve,fetcherKey:me,patch:(He,Me)=>{ee.aborted||db(He,Me,Ne,Ee,l,!1)}})}catch(He){return{type:"error",error:He,partialMatches:ve}}finally{Ce&&!ee.aborted&&(d=[...d])}if(ee.aborted)return{type:"aborted"};let Se=Za(Ne,G,g),De=null;if(Se){if(Object.keys(Se[0].params).length===0)return{type:"success",matches:Se};if(De=ju(Ne,G,g,!0),!(De&&ve.length<De.length&&pi(ve,De.slice(0,ve.length))))return{type:"success",matches:Se}}if(De||(De=ju(Ne,G,g,!0)),!De||pi(ve,De))return{type:"success",matches:null};ve=De}}function pi(k,G){return k.length===G.length&&k.every((ee,me)=>ee.route.id===G[me].route.id)}function zl(k){c={},p=rc(k,l,void 0,c)}function zi(k,G,ee=!1){let me=p==null;db(k,G,p||d,c,l,ee),me&&(d=[...d],Tt({}))}return Y={get basename(){return g},get future(){return E},get state(){return b},get routes(){return d},get window(){return e},initialize:lt,subscribe:Cn,enableScrollRestoration:Mr,navigate:Jt,fetch:kt,revalidate:ae,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:bs,resetFetcher:yo,deleteFetcher:mr,dispose:Kt,getBlocker:Ea,deleteBlocker:ws,patchRoutes:zi,_internalFetchControllers:_e,_internalSetRoutes:zl,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){Tt(k)}},n.unstable_instrumentations&&(Y=QI(Y,n.unstable_instrumentations.map(k=>k.router).filter(Boolean))),Y}function oD(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Rg(n,e,t,a,s,l){let c,d;if(s){c=[];for(let g of e)if(c.push(g),g.route.id===s){d=g;break}}else c=e,d=e[e.length-1];let p=_d(a||".",yd(c),Yr(n.pathname,t)||n.pathname,l==="path");if(a==null&&(p.search=n.search,p.hash=n.hash),(a==null||a===""||a===".")&&d){let g=my(p.search);if(d.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!d.route.index&&g){let _=new URLSearchParams(p.search),E=_.getAll("index");_.delete("index"),E.filter(R=>R).forEach(R=>_.append("index",R));let S=_.toString();p.search=S?`?${S}`:""}}return t!=="/"&&(p.pathname=qI({basename:t,pathname:p.pathname})),ki(p)}function hb(n,e,t){if(!t||!oD(t))return{path:e};if(t.formMethod&&!RD(t.formMethod))return{path:e,error:Gr(405,{method:t.formMethod})};let a=()=>({path:e,error:Gr(400,{type:"invalid-body"})}),l=(t.formMethod||"get").toUpperCase(),c=QS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Hn(l))return a();let E=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((S,[R,U])=>`${S}${R}=${U}
`,""):String(t.body);return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:void 0,text:E}}}else if(t.formEncType==="application/json"){if(!Hn(l))return a();try{let E=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:l,formAction:c,formEncType:t.formEncType,formData:void 0,json:E,text:void 0}}}catch{return a()}}}st(typeof FormData=="function","FormData is not available in this environment");let d,p;if(t.formData)d=Dg(t.formData),p=t.formData;else if(t.body instanceof FormData)d=Dg(t.body),p=t.body;else if(t.body instanceof URLSearchParams)d=t.body,p=_b(d);else if(t.body==null)d=new URLSearchParams,p=new FormData;else try{d=new URLSearchParams(t.body),p=_b(d)}catch{return a()}let g={formMethod:l,formAction:c,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Hn(g.formMethod))return{path:e,submission:g};let _=ya(e);return n&&_.search&&my(_.search)&&d.append("index",""),_.search=`?${d}`,{path:ki(_),submission:g}}function fb(n,e,t,a,s,l,c,d,p,g,_,E,S,R,U,B,V,F,H,q,Q){var Ze;let re=q?Rr(q[1])?q[1].error:q[1].data:void 0,Y=s.createURL(l.location),b=s.createURL(p),w;if(_&&l.errors){let W=Object.keys(l.errors)[0];w=c.findIndex(pe=>pe.route.id===W)}else if(q&&Rr(q[1])){let W=q[0];w=c.findIndex(pe=>pe.route.id===W)-1}let I=q?q[1].statusCode:void 0,N=I&&I>=400,x={currentUrl:Y,currentParams:((Ze=l.matches[0])==null?void 0:Ze.params)||{},nextUrl:b,nextParams:c[0].params,...d,actionResult:re,actionStatus:I},P=_c(c),O=c.map((W,pe)=>{let{route:_e}=W,Be=null;if(w!=null&&pe>w?Be=!1:_e.lazy?Be=!0:fy(_e)?_?Be=Cg(_e,l.loaderData,l.errors):lD(l.loaderData,l.matches[pe],W)&&(Be=!0):Be=!1,Be!==null)return Ig(t,a,n,P,W,g,e,Be);let Ve=!1;typeof Q=="boolean"?Ve=Q:N?Ve=!1:(E||Y.pathname+Y.search===b.pathname+b.search||Y.search!==b.search||uD(l.matches[pe],W))&&(Ve=!0);let j={...x,defaultShouldRevalidate:Ve},K=$u(W,j);return Ig(t,a,n,P,W,g,e,K,j,Q)}),ze=[];return U.forEach((W,pe)=>{if(_||!c.some(ge=>ge.route.id===W.routeId)||R.has(pe))return;let _e=l.fetchers.get(pe),Be=_e&&_e.state!=="idle"&&_e.data===void 0,Ve=Za(V,W.path,F);if(!Ve){if(H&&Be)return;ze.push({key:pe,routeId:W.routeId,path:W.path,matches:null,match:null,request:null,controller:null});return}if(B.has(pe))return;let j=gf(Ve,W.path),K=new AbortController,oe=rl(s,W.path,K.signal),ce=null;if(S.has(pe))S.delete(pe),ce=hl(t,a,oe,Ve,j,g,e);else if(Be)E&&(ce=hl(t,a,oe,Ve,j,g,e));else{let ge;typeof Q=="boolean"?ge=Q:N?ge=!1:ge=E;let Te={...x,defaultShouldRevalidate:ge};$u(j,Te)&&(ce=hl(t,a,oe,Ve,j,g,e,Te))}ce&&ze.push({key:pe,routeId:W.routeId,path:W.path,matches:ce,match:j,request:oe,controller:K})}),{dsMatches:O,revalidatingFetchers:ze}}function fy(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Cg(n,e,t){if(n.lazy)return!0;if(!fy(n))return!1;let a=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!a&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!a&&!s}function lD(n,e,t){let a=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return a||s}function uD(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function $u(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function db(n,e,t,a,s,l){let c;if(n){let g=a[n];st(g,`No route found to patch children into: routeId = ${n}`),g.children||(g.children=[]),c=g.children}else c=t;let d=[],p=[];if(e.forEach(g=>{let _=c.find(E=>HS(g,E));_?p.push({existingRoute:_,newRoute:g}):d.push(g)}),d.length>0){let g=rc(d,s,[n||"_","patch",String((c==null?void 0:c.length)||"0")],a);c.push(...g)}if(l&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:_,newRoute:E}=p[g],S=_,[R]=rc([E],s,[],{},!0);Object.assign(S,{element:R.element?R.element:S.element,errorElement:R.errorElement?R.errorElement:S.errorElement,hydrateFallbackElement:R.hydrateFallbackElement?R.hydrateFallbackElement:S.hydrateFallbackElement})}}function HS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,a)=>{var s;return(s=e.children)==null?void 0:s.some(l=>HS(t,l))}):!1}var mb=new WeakMap,GS=({key:n,route:e,manifest:t,mapRouteProperties:a})=>{let s=t[e.id];if(st(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let l=s.lazy[n];if(!l)return;let c=mb.get(s);c||(c={},mb.set(s,c));let d=c[n];if(d)return d;let p=(async()=>{let g=RI(n),E=s[n]!==void 0&&n!=="hasErrorBoundary";if(g)tn(!g,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),c[n]=Promise.resolve();else if(E)tn(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let S=await l();S!=null&&(Object.assign(s,{[n]:S}),Object.assign(s,a(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(S=>S===void 0)&&(s.lazy=void 0))})();return c[n]=p,p},pb=new WeakMap;function cD(n,e,t,a,s){let l=t[n.id];if(st(l,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let _=pb.get(l);if(_)return{lazyRoutePromise:_,lazyHandlerPromise:_};let E=(async()=>{st(typeof n.lazy=="function","No lazy route function found");let S=await n.lazy(),R={};for(let U in S){let B=S[U];if(B===void 0)continue;let V=II(U),H=l[U]!==void 0&&U!=="hasErrorBoundary";V?tn(!V,"Route property "+U+" is not a supported property to be returned from a lazy route function. This property will be ignored."):H?tn(!H,`Route "${l.id}" has a static property "${U}" defined but its lazy function is also returning a value for this property. The lazy route property "${U}" will be ignored.`):R[U]=B}Object.assign(l,R),Object.assign(l,{...a(l),lazy:void 0})})();return pb.set(l,E),E.catch(()=>{}),{lazyRoutePromise:E,lazyHandlerPromise:E}}let c=Object.keys(n.lazy),d=[],p;for(let _ of c){if(s&&s.includes(_))continue;let E=GS({key:_,route:n,manifest:t,mapRouteProperties:a});E&&(d.push(E),_===e&&(p=E))}let g=d.length>0?Promise.all(d).then(()=>{}):void 0;return g==null||g.catch(()=>{}),p==null||p.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function gb(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,l)=>{t[e[l].route.id]=s}),t}async function hD(n){return n.matches.some(e=>e.route.middleware)?$S(n,()=>gb(n)):gb(n)}function $S(n,e){return fD(n,e,a=>{if(AD(a))throw a;return a},TD,t);function t(a,s,l){if(l)return Promise.resolve(Object.assign(l.value,{[s]:{type:"error",result:a}}));{let{matches:c}=n,d=Math.min(Math.max(c.findIndex(g=>g.route.id===s),0),Math.max(c.findIndex(g=>g.shouldCallHandler()),0)),p=es(c,c[d].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function fD(n,e,t,a,s){let{matches:l,request:c,params:d,context:p,unstable_pattern:g}=n,_=l.flatMap(S=>S.route.middleware?S.route.middleware.map(R=>[S.route.id,R]):[]);return await KS({request:c,params:d,context:p,unstable_pattern:g},_,e,t,a,s)}async function KS(n,e,t,a,s,l,c=0){let{request:d}=n;if(d.signal.aborted)throw d.signal.reason??new Error(`Request aborted: ${d.method} ${d.url}`);let p=e[c];if(!p)return await t();let[g,_]=p,E,S=async()=>{if(E)throw new Error("You may only call `next()` once per middleware");try{return E={value:await KS(n,e,t,a,s,l,c+1)},E.value}catch(R){return E={value:await l(R,g,E)},E.value}};try{let R=await _(n,S),U=R!=null?a(R):void 0;return s(U)?U:E?U??E.value:(E={value:await S()},E.value)}catch(R){return await l(R,g,E)}}function YS(n,e,t,a,s){let l=GS({key:"middleware",route:a.route,manifest:e,mapRouteProperties:n}),c=cD(a.route,Hn(t.method)?"action":"loader",e,n,s);return{middleware:l,route:c.lazyRoutePromise,handler:c.lazyHandlerPromise}}function Ig(n,e,t,a,s,l,c,d,p=null,g){let _=!1,E=YS(n,e,t,s,l);return{...s,_lazyPromises:E,shouldLoad:d,shouldRevalidateArgs:p,shouldCallHandler(S){return _=!0,p?typeof g=="boolean"?$u(s,{...p,defaultShouldRevalidate:g}):typeof S=="boolean"?$u(s,{...p,defaultShouldRevalidate:S}):$u(s,p):d},resolve(S){let{lazy:R,loader:U,middleware:B}=s.route,V=_||d||S&&!Hn(t.method)&&(R||U),F=B&&B.length>0&&!U&&!R;return V&&(Hn(t.method)||!F)?mD({request:t,unstable_pattern:a,match:s,lazyHandlerPromise:E==null?void 0:E.handler,lazyRoutePromise:E==null?void 0:E.route,handlerOverride:S,scopedContext:c}):Promise.resolve({type:"data",result:void 0})}}}function hl(n,e,t,a,s,l,c,d=null){return a.map(p=>p.route.id!==s.route.id?{...p,shouldLoad:!1,shouldRevalidateArgs:d,shouldCallHandler:()=>!1,_lazyPromises:YS(n,e,t,p,l),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Ig(n,e,t,_c(a),p,l,c,!0,d))}async function dD(n,e,t,a,s,l){t.some(g=>{var _;return(_=g._lazyPromises)==null?void 0:_.middleware})&&await Promise.all(t.map(g=>{var _;return(_=g._lazyPromises)==null?void 0:_.middleware}));let c={request:e,unstable_pattern:_c(t),params:t[0].params,context:s,matches:t},p=await n({...c,fetcherKey:a,runClientMiddleware:g=>{let _=c;return $S(_,()=>g({..._,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(g=>{var _,E;return[(_=g._lazyPromises)==null?void 0:_.handler,(E=g._lazyPromises)==null?void 0:E.route]}))}catch{}return p}async function mD({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:a,lazyRoutePromise:s,handlerOverride:l,scopedContext:c}){let d,p,g=Hn(n.method),_=g?"action":"loader",E=S=>{let R,U=new Promise((F,H)=>R=H);p=()=>R(),n.signal.addEventListener("abort",p);let B=F=>typeof S!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${_}" [routeId: ${t.route.id}]`)):S({request:n,unstable_pattern:e,params:t.params,context:c},...F!==void 0?[F]:[]),V=(async()=>{try{return{type:"data",result:await(l?l(H=>B(H)):B())}}catch(F){return{type:"error",result:F}}})();return Promise.race([V,U])};try{let S=g?t.route.action:t.route.loader;if(a||s)if(S){let R,[U]=await Promise.all([E(S).catch(B=>{R=B}),a,s]);if(R!==void 0)throw R;d=U}else{await a;let R=g?t.route.action:t.route.loader;if(R)[d]=await Promise.all([E(R),s]);else if(_==="action"){let U=new URL(n.url),B=U.pathname+U.search;throw Gr(405,{method:n.method,pathname:B,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(S)d=await E(S);else{let R=new URL(n.url),U=R.pathname+R.search;throw Gr(404,{pathname:U})}}catch(S){return{type:"error",result:S}}finally{p&&n.signal.removeEventListener("abort",p)}return d}async function pD(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function gD(n){var a,s,l,c,d;let{result:e,type:t}=n;if(dy(e)){let p;try{p=await pD(e)}catch(g){return{type:"error",error:g}}return t==="error"?{type:"error",error:new yc(e.status,e.statusText,p),statusCode:e.status,headers:e.headers}:{type:"data",data:p,statusCode:e.status,headers:e.headers}}return t==="error"?bb(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:ED(e),statusCode:ic(e)?e.status:void 0,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:ic(e)?e.status:void 0}:bb(e)?{type:"data",data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(d=e.init)!=null&&d.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function yD(n,e,t,a,s){let l=n.headers.get("Location");if(st(l,"Redirects returned/thrown from loaders/actions must have a Location header"),!hy(l)){let c=a.slice(0,a.findIndex(d=>d.route.id===t)+1);l=Rg(new URL(e.url),c,s,l),n.headers.set("Location",l)}return n}function yb(n,e,t,a){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(hy(n)){let l=n,c=l.startsWith("//")?new URL(e.protocol+l):new URL(l);if(s.includes(c.protocol))throw new Error("Invalid redirect location");let d=Yr(c.pathname,t)!=null;if(c.origin===e.origin&&d)return c.pathname+c.search+c.hash}try{let l=a.createURL(n);if(s.includes(l.protocol))throw new Error("Invalid redirect location")}catch{}return n}function rl(n,e,t,a){let s=n.createURL(QS(e)).toString(),l={signal:t};if(a&&Hn(a.formMethod)){let{formMethod:c,formEncType:d}=a;l.method=c.toUpperCase(),d==="application/json"?(l.headers=new Headers({"Content-Type":d}),l.body=JSON.stringify(a.json)):d==="text/plain"?l.body=a.text:d==="application/x-www-form-urlencoded"&&a.formData?l.body=Dg(a.formData):l.body=a.formData}return new Request(s,l)}function Dg(n){let e=new URLSearchParams;for(let[t,a]of n.entries())e.append(t,typeof a=="string"?a:a.name);return e}function _b(n){let e=new FormData;for(let[t,a]of n.entries())e.append(t,a);return e}function _D(n,e,t,a=!1,s=!1){let l={},c=null,d,p=!1,g={},_=t&&Rr(t[1])?t[1].error:void 0;return n.forEach(E=>{if(!(E.route.id in e))return;let S=E.route.id,R=e[S];if(st(!Xs(R),"Cannot handle redirect results in processLoaderData"),Rr(R)){let U=R.error;if(_!==void 0&&(U=_,_=void 0),c=c||{},s)c[S]=U;else{let B=es(n,S);c[B.route.id]==null&&(c[B.route.id]=U)}a||(l[S]=qS),p||(p=!0,d=ic(R.error)?R.error.status:500),R.headers&&(g[S]=R.headers)}else l[S]=R.data,R.statusCode&&R.statusCode!==200&&!p&&(d=R.statusCode),R.headers&&(g[S]=R.headers)}),_!==void 0&&t&&(c={[t[0]]:_},t[2]&&(l[t[2]]=void 0)),{loaderData:l,errors:c,statusCode:d||200,loaderHeaders:g}}function vb(n,e,t,a,s,l){let{loaderData:c,errors:d}=_D(e,t,a);return s.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:_,controller:E}=p;if(E&&E.signal.aborted)return;let S=l[g];if(st(S,"Did not find corresponding fetcher result"),Rr(S)){let R=es(n.matches,_==null?void 0:_.route.id);d&&d[R.route.id]||(d={...d,[R.route.id]:S.error}),n.fetchers.delete(g)}else if(Xs(S))st(!1,"Unhandled fetcher revalidation redirect");else{let R=aa(S.data);n.fetchers.set(g,R)}}),{loaderData:c,errors:d}}function Eb(n,e,t,a){let s=Object.entries(e).filter(([,l])=>l!==qS).reduce((l,[c,d])=>(l[c]=d,l),{});for(let l of t){let c=l.route.id;if(!e.hasOwnProperty(c)&&n.hasOwnProperty(c)&&l.route.loader&&(s[c]=n[c]),a&&a.hasOwnProperty(c))break}return s}function Tb(n){return n?Rr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function es(n,e){return(e?n.slice(0,n.findIndex(a=>a.route.id===e)+1):[...n]).reverse().find(a=>a.route.hasErrorBoundary===!0)||n[0]}function rf(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Gr(n,{pathname:e,routeId:t,method:a,type:s,message:l}={}){let c="Unknown Server Error",d="Unknown @remix-run/router error";return n===400?(c="Bad Request",a&&e&&t?d=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(d="Unable to encode submission body")):n===403?(c="Forbidden",d=`Route "${t}" does not match URL "${e}"`):n===404?(c="Not Found",d=`No route matches URL "${e}"`):n===405&&(c="Method Not Allowed",a&&e&&t?d=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:a&&(d=`Invalid request method "${a.toUpperCase()}"`)),new yc(n||500,c,new Error(d),!0)}function af(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[a,s]=e[t];if(Xs(s))return{key:a,result:s}}}function QS(n){let e=typeof n=="string"?ya(n):n;return ki({...e,hash:""})}function vD(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function ED(n){var e,t;return new yc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function TD(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&bD(t))}function bD(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function SD(n){return dy(n.result)&&BS.has(n.result.status)}function Rr(n){return n.type==="error"}function Xs(n){return(n&&n.type)==="redirect"}function bb(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function dy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function wD(n){return BS.has(n)}function AD(n){return dy(n)&&wD(n.status)&&n.headers.has("Location")}function RD(n){return nD.has(n.toUpperCase())}function Hn(n){return eD.has(n.toUpperCase())}function my(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function gf(n,e){let t=typeof e=="string"?ya(e).search:e.search;if(n[n.length-1].route.index&&my(t||""))return n[n.length-1];let a=kS(n);return a[a.length-1]}function Sb(n){let{formMethod:e,formAction:t,formEncType:a,text:s,formData:l,json:c}=n;if(!(!e||!t||!a)){if(s!=null)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:void 0,text:s};if(l!=null)return{formMethod:e,formAction:t,formEncType:a,formData:l,json:void 0,text:void 0};if(c!==void 0)return{formMethod:e,formAction:t,formEncType:a,formData:void 0,json:c,text:void 0}}}function ag(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function CD(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Pu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function ID(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function aa(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function DD(n,e){try{let t=n.sessionStorage.getItem(FS);if(t){let a=JSON.parse(t);for(let[s,l]of Object.entries(a||{}))l&&Array.isArray(l)&&e.set(s,new Set(l||[]))}}catch{}}function ND(n,e){if(e.size>0){let t={};for(let[a,s]of e)t[a]=[...s];try{n.sessionStorage.setItem(FS,JSON.stringify(t))}catch(a){tn(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function wb(){let n,e,t=new Promise((a,s)=>{n=async l=>{a(l);try{await t}catch{}},e=async l=>{s(l);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var uo=M.createContext(null);uo.displayName="DataRouter";var vc=M.createContext(null);vc.displayName="DataRouterState";var XS=M.createContext(!1);function xD(){return M.useContext(XS)}var py=M.createContext({isTransitioning:!1});py.displayName="ViewTransition";var WS=M.createContext(new Map);WS.displayName="Fetchers";var OD=M.createContext(null);OD.displayName="Await";var xr=M.createContext(null);xr.displayName="Navigation";var vd=M.createContext(null);vd.displayName="Location";var Xr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var gy=M.createContext(null);gy.displayName="RouteError";var JS="REACT_ROUTER_ERROR",MD="REDIRECT",VD="ROUTE_ERROR_RESPONSE";function PD(n){if(n.startsWith(`${JS}:${MD}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function kD(n){if(n.startsWith(`${JS}:${VD}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new yc(e.status,e.statusText,e.data)}catch{}}function LD(n,{relative:e}={}){st(xl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=M.useContext(xr),{hash:s,pathname:l,search:c}=Ec(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:xi([t,l])),a.createHref({pathname:d,search:c,hash:s})}function xl(){return M.useContext(vd)!=null}function Wr(){return st(xl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(vd).location}var ZS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ew(n){M.useContext(xr).static||M.useLayoutEffect(n)}function co(){let{isDataRoute:n}=M.useContext(Xr);return n?JD():UD()}function UD(){st(xl(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(uo),{basename:e,navigator:t}=M.useContext(xr),{matches:a}=M.useContext(Xr),{pathname:s}=Wr(),l=JSON.stringify(yd(a)),c=M.useRef(!1);return ew(()=>{c.current=!0}),M.useCallback((p,g={})=>{if(tn(c.current,ZS),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=_d(p,JSON.parse(l),s,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:xi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,s,n])}var jD=M.createContext(null);function zD(n){let e=M.useContext(Xr).outlet;return M.useMemo(()=>e&&M.createElement(jD.Provider,{value:n},e),[e,n])}function Ed(){let{matches:n}=M.useContext(Xr),e=n[n.length-1];return e?e.params:{}}function Ec(n,{relative:e}={}){let{matches:t}=M.useContext(Xr),{pathname:a}=Wr(),s=JSON.stringify(yd(t));return M.useMemo(()=>_d(n,JSON.parse(s),a,e==="path"),[n,s,a,e])}function BD(n,e,t,a,s){st(xl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(xr),{matches:c}=M.useContext(Xr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",E=d&&d.route;{let H=E&&E.path||"";nw(g,!E||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let S=Wr(),R;R=S;let U=R.pathname||"/",B=U;if(_!=="/"){let H=_.replace(/^\//,"").split("/");B="/"+U.replace(/^\//,"").split("/").slice(H.length).join("/")}let V=Za(n,{pathname:B});return tn(E||V!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),tn(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),$D(V&&V.map(H=>Object.assign({},H,{params:Object.assign({},p,H.params),pathname:xi([_,l.encodeLocation?l.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?_:xi([_,l.encodeLocation?l.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),c,t,a,s)}function FD(){let n=WD(),e=ic(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,c)}var qD=M.createElement(FD,null),tw=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=kD(n.digest);t&&(n=t)}let e=n!==void 0?M.createElement(Xr.Provider,{value:this.props.routeContext},M.createElement(gy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?M.createElement(HD,{error:n},e):e}};tw.contextType=XS;var sg=new WeakMap;function HD({children:n,error:e}){let{basename:t}=M.useContext(xr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let a=PD(e.digest);if(a){let s=sg.get(e);if(s)throw s;let l=US(a.location,t);if(LS&&!sg.get(e))if(l.isExternal||a.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:a.replace}));throw sg.set(e,c),c}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return n}function GD({routeContext:n,match:e,children:t}){let a=M.useContext(uo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Xr.Provider,{value:n},t)}function $D(n,e=[],t=null,a=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t==null?void 0:t.errors;if(c!=null){let _=l.findIndex(E=>E.route.id&&(c==null?void 0:c[E.route.id])!==void 0);st(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,_+1))}let d=!1,p=-1;if(t)for(let _=0;_<l.length;_++){let E=l[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=_),E.route.id){let{loaderData:S,errors:R}=t,U=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!R||R[E.route.id]===void 0);if(E.route.lazy||U){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let g=t&&a?(_,E)=>{var S,R;a(_,{location:t.location,params:((R=(S=t.matches)==null?void 0:S[0])==null?void 0:R.params)??{},unstable_pattern:_c(t.matches),errorInfo:E})}:void 0;return l.reduceRight((_,E,S)=>{let R,U=!1,B=null,V=null;t&&(R=c&&E.route.id?c[E.route.id]:void 0,B=E.route.errorElement||qD,d&&(p<0&&S===0?(nw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,V=null):p===S&&(U=!0,V=E.route.hydrateFallbackElement||null)));let F=e.concat(l.slice(0,S+1)),H=()=>{let q;return R?q=B:U?q=V:E.route.Component?q=M.createElement(E.route.Component,null):E.route.element?q=E.route.element:q=_,M.createElement(GD,{match:E,routeContext:{outlet:_,matches:F,isDataRoute:t!=null},children:q})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?M.createElement(tw,{location:t.location,revalidation:t.revalidation,component:B,error:R,children:H(),routeContext:{outlet:null,matches:F,isDataRoute:!0},onError:g}):H()},null)}function yy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KD(n){let e=M.useContext(uo);return st(e,yy(n)),e}function YD(n){let e=M.useContext(vc);return st(e,yy(n)),e}function QD(n){let e=M.useContext(Xr);return st(e,yy(n)),e}function _y(n){let e=QD(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function XD(){return _y("useRouteId")}function WD(){var a;let n=M.useContext(gy),e=YD("useRouteError"),t=_y("useRouteError");return n!==void 0?n:(a=e.errors)==null?void 0:a[t]}function JD(){let{router:n}=KD("useNavigate"),e=_y("useNavigate"),t=M.useRef(!1);return ew(()=>{t.current=!0}),M.useCallback(async(s,l={})=>{tn(t.current,ZS),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var Ab={};function nw(n,e,t){!e&&!Ab[n]&&(Ab[n]=!0,tn(!1,t))}var Rb={};function Cb(n,e){!n&&!Rb[e]&&(Rb[e]=!0,console.warn(e))}var ZD="useOptimistic",Ib=GC[ZD],eN=()=>{};function tN(n){return Ib?Ib(n):[n,eN]}function nN(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&tn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:M.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&tn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:M.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&tn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:M.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var rN=["HydrateFallback","hydrateFallbackElement"],iN=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",t(a))}})}};function aN({router:n,flushSync:e,onError:t,unstable_useTransitions:a}){a=xD()||a;let[l,c]=M.useState(n.state),[d,p]=tN(l),[g,_]=M.useState(),[E,S]=M.useState({isTransitioning:!1}),[R,U]=M.useState(),[B,V]=M.useState(),[F,H]=M.useState(),q=M.useRef(new Map),Q=M.useCallback((w,{deletedFetchers:I,newErrors:N,flushSync:x,viewTransitionOpts:P})=>{N&&t&&Object.values(N).forEach(ze=>{var Ze;return t(ze,{location:w.location,params:((Ze=w.matches[0])==null?void 0:Ze.params)??{},unstable_pattern:_c(w.matches)})}),w.fetchers.forEach((ze,Ze)=>{ze.data!==void 0&&q.current.set(Ze,ze.data)}),I.forEach(ze=>q.current.delete(ze)),Cb(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let O=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Cb(P==null||O,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!P||!O){e&&x?e(()=>c(w)):a===!1?c(w):M.startTransition(()=>{a===!0&&p(ze=>Db(ze,w)),c(w)});return}if(e&&x){e(()=>{B&&(R==null||R.resolve(),B.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let ze=n.window.document.startViewTransition(()=>{e(()=>c(w))});ze.finished.finally(()=>{e(()=>{U(void 0),V(void 0),_(void 0),S({isTransitioning:!1})})}),e(()=>V(ze));return}B?(R==null||R.resolve(),B.skipTransition(),H({state:w,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(_(w),S({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,e,B,R,a,p,t]);M.useLayoutEffect(()=>n.subscribe(Q),[n,Q]),M.useEffect(()=>{E.isTransitioning&&!E.flushSync&&U(new iN)},[E]),M.useEffect(()=>{if(R&&g&&n.window){let w=g,I=R.promise,N=n.window.document.startViewTransition(async()=>{a===!1?c(w):M.startTransition(()=>{a===!0&&p(x=>Db(x,w)),c(w)}),await I});N.finished.finally(()=>{U(void 0),V(void 0),_(void 0),S({isTransitioning:!1})}),V(N)}},[g,R,n.window,a,p]),M.useEffect(()=>{R&&g&&d.location.key===g.location.key&&R.resolve()},[R,B,d.location,g]),M.useEffect(()=>{!E.isTransitioning&&F&&(_(F.state),S({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}),H(void 0))},[E.isTransitioning,F]);let re=M.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,I,N)=>n.navigate(w,{state:I,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(w,I,N)=>n.navigate(w,{replace:!0,state:I,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),Y=n.basename||"/",b=M.useMemo(()=>({router:n,navigator:re,static:!1,basename:Y,onError:t}),[n,re,Y,t]);return M.createElement(M.Fragment,null,M.createElement(uo.Provider,{value:b},M.createElement(vc.Provider,{value:d},M.createElement(WS.Provider,{value:q.current},M.createElement(py.Provider,{value:E},M.createElement(lN,{basename:Y,location:d.location,navigationType:d.historyAction,navigator:re,unstable_useTransitions:a},M.createElement(sN,{routes:n.routes,future:n.future,state:d,onError:t})))))),null)}function Db(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var sN=M.memo(oN);function oN({routes:n,future:e,state:t,onError:a}){return BD(n,void 0,t,a,e)}function ss({to:n,replace:e,state:t,relative:a}){st(xl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(xr);tn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(Xr),{pathname:c}=Wr(),d=co(),p=_d(n,yd(l),c,a==="path"),g=JSON.stringify(p);return M.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:a})},[d,g,a,e,t]),null}function rw(n){return zD(n.context)}function lN({basename:n="/",children:e=null,location:t,navigationType:a="POP",navigator:s,static:l=!1,unstable_useTransitions:c}){st(!xl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),p=M.useMemo(()=>({basename:d,navigator:s,static:l,unstable_useTransitions:c,future:{}}),[d,s,l,c]);typeof t=="string"&&(t=ya(t));let{pathname:g="/",search:_="",hash:E="",state:S=null,key:R="default"}=t,U=M.useMemo(()=>{let B=Yr(g,d);return B==null?null:{location:{pathname:B,search:_,hash:E,state:S,key:R},navigationType:a}},[d,g,_,E,S,R,a]);return tn(U!=null,`<Router basename="${d}"> is not able to match the URL "${g}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:M.createElement(xr.Provider,{value:p},M.createElement(vd.Provider,{children:e,value:U}))}var yf="get",_f="application/x-www-form-urlencoded";function Td(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function uN(n){return Td(n)&&n.tagName.toLowerCase()==="button"}function cN(n){return Td(n)&&n.tagName.toLowerCase()==="form"}function hN(n){return Td(n)&&n.tagName.toLowerCase()==="input"}function fN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dN(n,e){return n.button===0&&(!e||e==="_self")&&!fN(n)}function Ng(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let a=n[t];return e.concat(Array.isArray(a)?a.map(s=>[t,s]):[[t,a]])},[]))}function mN(n,e){let t=Ng(n);return e&&e.forEach((a,s)=>{t.has(s)||e.getAll(s).forEach(l=>{t.append(s,l)})}),t}var sf=null;function pN(){if(sf===null)try{new FormData(document.createElement("form"),0),sf=!1}catch{sf=!0}return sf}var gN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function og(n){return n!=null&&!gN.has(n)?(tn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_f}"`),null):n}function yN(n,e){let t,a,s,l,c;if(cN(n)){let d=n.getAttribute("action");a=d?Yr(d,e):null,t=n.getAttribute("method")||yf,s=og(n.getAttribute("enctype"))||_f,l=new FormData(n)}else if(uN(n)||hN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(a=p?Yr(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||yf,s=og(n.getAttribute("formenctype"))||og(d.getAttribute("enctype"))||_f,l=new FormData(d,n),!pN()){let{name:g,type:_,value:E}=n;if(_==="image"){let S=g?`${g}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else g&&l.append(g,E)}}else{if(Td(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=yf,a=null,s=_f,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:a,method:t.toLowerCase(),encType:s,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function _N(n,e,t,a){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${a}`:s.pathname=`${s.pathname}.${a}`:s.pathname==="/"?s.pathname=`_root.${a}`:e&&Yr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${a}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${a}`,s}async function vN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function TN(n,e,t){let a=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await vN(l,t);return c.links?c.links():[]}return[]}));return AN(a.flat(1).filter(EN).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Nb(n,e,t,a,s,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>{var _;return t[g].pathname!==p.pathname||((_=t[g].route.path)==null?void 0:_.endsWith("*"))&&t[g].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{var E;let _=a.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function bN(n,e,{includeHydrateFallback:t}={}){return SN(n.map(a=>{let s=e.routes[a.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function SN(n){return[...new Set(n)]}function wN(n){let e={},t=Object.keys(n).sort();for(let a of t)e[a]=n[a];return e}function AN(n,e){let t=new Set;return new Set(e),n.reduce((a,s)=>{let l=JSON.stringify(wN(s));return t.has(l)||(t.add(l),a.push({key:l,link:s})),a},[])}function iw(){let n=M.useContext(uo);return vy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function RN(){let n=M.useContext(vc);return vy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Ey=M.createContext(void 0);Ey.displayName="FrameworkContext";function aw(){let n=M.useContext(Ey);return vy(n,"You must render this element inside a <HydratedRouter> element"),n}function CN(n,e){let t=M.useContext(Ey),[a,s]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:E}=e,S=M.useRef(null);M.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let B=F=>{F.forEach(H=>{c(H.isIntersecting)})},V=new IntersectionObserver(B,{threshold:.5});return S.current&&V.observe(S.current),()=>{V.disconnect()}}},[n]),M.useEffect(()=>{if(a){let B=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(B)}}},[a]);let R=()=>{s(!0)},U=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:ku(d,R),onBlur:ku(p,U),onMouseEnter:ku(g,R),onMouseLeave:ku(_,U),onTouchStart:ku(E,R)}]:[!1,S,{}]}function ku(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function IN({page:n,...e}){let{router:t}=iw(),a=M.useMemo(()=>Za(t.routes,n,t.basename),[t.routes,n,t.basename]);return a?M.createElement(NN,{page:n,matches:a,...e}):null}function DN(n){let{manifest:e,routeModules:t}=aw(),[a,s]=M.useState([]);return M.useEffect(()=>{let l=!1;return TN(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),a}function NN({page:n,matches:e,...t}){let a=Wr(),{future:s,manifest:l,routeModules:c}=aw(),{basename:d}=iw(),{loaderData:p,matches:g}=RN(),_=M.useMemo(()=>Nb(n,e,g,l,a,"data"),[n,e,g,l,a]),E=M.useMemo(()=>Nb(n,e,g,l,a,"assets"),[n,e,g,l,a]),S=M.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let B=new Set,V=!1;if(e.forEach(H=>{var Q;let q=l.routes[H.route.id];!q||!q.hasLoader||(!_.some(re=>re.route.id===H.route.id)&&H.route.id in p&&((Q=c[H.route.id])!=null&&Q.shouldRevalidate)||q.hasClientLoader?V=!0:B.add(H.route.id))}),B.size===0)return[];let F=_N(n,d,s.unstable_trailingSlashAwareDataRequests,"data");return V&&B.size>0&&F.searchParams.set("_routes",e.filter(H=>B.has(H.route.id)).map(H=>H.route.id).join(",")),[F.pathname+F.search]},[d,s.unstable_trailingSlashAwareDataRequests,p,a,l,_,e,n,c]),R=M.useMemo(()=>bN(E,l),[E,l]),U=DN(E);return M.createElement(M.Fragment,null,S.map(B=>M.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),R.map(B=>M.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),U.map(({key:B,link:V})=>M.createElement("link",{key:B,nonce:t.nonce,...V,crossOrigin:V.crossOrigin??t.crossOrigin})))}function xN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ON=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ON&&(window.__reactRouterVersion="7.13.0")}catch{}function MN(n,e){return sD({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:bI({window:e==null?void 0:e.window}),hydrationData:VN(),routes:n,mapRouteProperties:nN,hydrationRouteProperties:rN,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function VN(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:PN(n.errors)}),n}function PN(n){if(!n)return null;let e=Object.entries(n),t={};for(let[a,s]of e)if(s&&s.__type==="RouteErrorResponse")t[a]=new yc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let l=window[s.__subType];if(typeof l=="function")try{let c=new l(s.message);c.stack="",t[a]=c}catch{}}if(t[a]==null){let l=new Error(s.message);l.stack="",t[a]=l}}else t[a]=s;return t}var sw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ow=M.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:S,...R},U){let{basename:B,unstable_useTransitions:V}=M.useContext(xr),F=typeof g=="string"&&sw.test(g),H=US(g,B);g=H.to;let q=LD(g,{relative:s}),[Q,re,Y]=CN(a,R),b=jN(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:S,unstable_useTransitions:V});function w(N){e&&e(N),N.defaultPrevented||b(N)}let I=M.createElement("a",{...R,...Y,href:H.absoluteURL||q,onClick:H.isExternal||l?e:w,ref:xN(U,re),target:p,"data-discover":!F&&t==="render"?"true":void 0});return Q&&!F?M.createElement(M.Fragment,null,I,M.createElement(IN,{page:q})):I});ow.displayName="Link";var kN=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:s=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let E=Ec(c,{relative:g.relative}),S=Wr(),R=M.useContext(vc),{navigator:U,basename:B}=M.useContext(xr),V=R!=null&&GN(E)&&d===!0,F=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,H=S.pathname,q=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(H=H.toLowerCase(),q=q?q.toLowerCase():null,F=F.toLowerCase()),q&&B&&(q=Yr(q,B)||q);const Q=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let re=H===F||!s&&H.startsWith(F)&&H.charAt(Q)==="/",Y=q!=null&&(q===F||!s&&q.startsWith(F)&&q.charAt(F.length)==="/"),b={isActive:re,isPending:Y,isTransitioning:V},w=re?e:void 0,I;typeof a=="function"?I=a(b):I=[a,re?"active":null,Y?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(b):l;return M.createElement(ow,{...g,"aria-current":w,className:I,ref:_,style:N,to:c,viewTransition:d},typeof p=="function"?p(b):p)});kN.displayName="NavLink";var LN=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:s,state:l,method:c=yf,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:S,...R},U)=>{let{unstable_useTransitions:B}=M.useContext(xr),V=qN(),F=HN(d,{relative:g}),H=c.toLowerCase()==="get"?"get":"post",q=typeof d=="string"&&sw.test(d),Q=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let Y=re.nativeEvent.submitter,b=(Y==null?void 0:Y.getAttribute("formmethod"))||c,w=()=>V(Y||re.currentTarget,{fetcherKey:e,method:b,navigate:t,replace:s,state:l,relative:g,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:S});B&&t!==!1?M.startTransition(()=>w()):w()};return M.createElement("form",{ref:U,method:H,action:F,onSubmit:a?p:Q,...R,"data-discover":!q&&n==="render"?"true":void 0})});LN.displayName="Form";function UN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lw(n){let e=M.useContext(uo);return st(e,UN(n)),e}function jN(n,{target:e,replace:t,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=co(),_=Wr(),E=Ec(n,{relative:l});return M.useCallback(S=>{if(dN(S,e)){S.preventDefault();let R=t!==void 0?t:ki(_)===ki(E),U=()=>g(n,{replace:R,state:a,preventScrollReset:s,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:d});p?M.startTransition(()=>U()):U()}},[_,g,E,t,a,e,n,s,l,c,d,p])}function zN(n){tn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(Ng(n)),t=M.useRef(!1),a=Wr(),s=M.useMemo(()=>mN(a.search,t.current?null:e.current),[a.search]),l=co(),c=M.useCallback((d,p)=>{const g=Ng(typeof d=="function"?d(new URLSearchParams(s)):d);t.current=!0,l("?"+g,p)},[l,s]);return[s,c]}var BN=0,FN=()=>`__${String(++BN)}__`;function qN(){let{router:n}=lw("useSubmit"),{basename:e}=M.useContext(xr),t=XD(),a=n.fetch,s=n.navigate;return M.useCallback(async(l,c={})=>{let{action:d,method:p,encType:g,formData:_,body:E}=yN(l,e);if(c.navigate===!1){let S=c.fetcherKey||FN();await a(S,t,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:E,formMethod:c.method||p,formEncType:c.encType||g,flushSync:c.flushSync})}else await s(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:_,body:E,formMethod:c.method||p,formEncType:c.encType||g,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[a,s,e,t])}function HN(n,{relative:e}={}){let{basename:t}=M.useContext(xr),a=M.useContext(Xr);st(a,"useFormAction must be used inside a RouteContext");let[s]=a.matches.slice(-1),l={...Ec(n||".",{relative:e})},c=Wr();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(E=>E).forEach(E=>d.append("index",E));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xi([t,l.pathname])),ki(l)}function GN(n,{relative:e}={}){let t=M.useContext(py);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=lw("useViewTransitionState"),s=Ec(n,{relative:e});if(!t.isTransitioning)return!1;let l=Yr(t.currentLocation.pathname,a)||t.currentLocation.pathname,c=Yr(t.nextLocation.pathname,a)||t.nextLocation.pathname;return zf(s.pathname,c)!=null||zf(s.pathname,l)!=null}var $N=IS();function KN(n){return M.createElement(aN,{flushSync:$N.flushSync,...n})}const YN=M.createContext(void 0),di=()=>gI(),yt=vI.withTypes(),QN=({children:n})=>{const e=yt(t=>t.auth.loading);return A.jsx(YN.Provider,{value:{isLoading:e},children:n})},XN=()=>{};var xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=function(n){const e=[];let t=0;for(let a=0;a<n.length;a++){let s=n.charCodeAt(a);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&a+1<n.length&&(n.charCodeAt(a+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++a)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},WN=function(n){const e=[];let t=0,a=0;for(;t<n.length;){const s=n[t++];if(s<128)e[a++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[a++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],d=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[a++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},cw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,d=c?n[s+1]:0,p=s+2<n.length,g=p?n[s+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let S=(d&15)<<2|g>>6,R=g&63;p||(R=64,c||(S=64)),a.push(t[_],t[E],t[S],t[R])}return a.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):WN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const g=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||d==null||g==null||E==null)throw new JN;const S=l<<2|d>>4;if(a.push(S),g!==64){const R=d<<4&240|g>>2;if(a.push(R),E!==64){const U=g<<6&192|E;a.push(U)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class JN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZN=function(n){const e=uw(n);return cw.encodeByteArray(e,!0)},Bf=function(n){return ZN(n).replace(/\./g,"")},hw=function(n){try{return cw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=()=>ex().__FIREBASE_DEFAULTS__,nx=()=>{if(typeof process>"u"||typeof xb>"u")return;const n=xb.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hw(n[1]);return e&&JSON.parse(e)},bd=()=>{try{return XN()||tx()||nx()||rx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fw=n=>{var e,t;return(t=(e=bd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ix=n=>{const e=fw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),a]:[e.substring(0,t),a]},dw=()=>{var n;return(n=bd())==null?void 0:n.config},mw=n=>{var e;return(e=bd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ol(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pw(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},a=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${a}`,aud:a,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Bf(JSON.stringify(t)),Bf(JSON.stringify(c)),""].join(".")}const Ku={};function ox(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ku))Ku[e]?n.emulator.push(e):n.prod.push(e);return n}function lx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Ob=!1;function gw(n,e){if(typeof window>"u"||typeof document>"u"||!Ol(window.location.host)||Ku[n]===e||Ku[n]||Ob)return;Ku[n]=e;function t(S){return`__firebase__banner__${S}`}const a="__firebase__banner",l=ox().prod.length>0;function c(){const S=document.getElementById(a);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Ob=!0,c()},S}function _(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=lx(a),R=t("text"),U=document.getElementById(R)||document.createElement("span"),B=t("learnmore"),V=document.getElementById(B)||document.createElement("a"),F=t("preprendIcon"),H=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const q=S.element;d(q),_(V,B);const Q=g();p(H,F),q.append(H,U,V,Q),document.body.appendChild(q)}l?(U.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ux(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function cx(){var e;const n=(e=bd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mx(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function px(){return!cx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gx(){try{return typeof indexedDB=="object"}catch{return!1}}function yx(){return new Promise((n,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(a);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(a),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="FirebaseError";class _a extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=_x,Object.setPrototypeOf(this,_a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tc.prototype.create)}}class Tc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?vx(l,a):"Error",d=`${this.serviceName}: ${c} (${s}).`;return new _a(s,d,a)}}function vx(n,e){return n.replace(Ex,(t,a)=>{const s=e[a];return s!=null?String(s):`<${a}?>`})}const Ex=/\{\$([^}]+)}/g;function Tx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ro(n,e){if(n===e)return!0;const t=Object.keys(n),a=Object.keys(e);for(const s of t){if(!a.includes(s))return!1;const l=n[s],c=e[s];if(Mb(l)&&Mb(c)){if(!ro(l,c))return!1}else if(l!==c)return!1}for(const s of a)if(!t.includes(s))return!1;return!0}function Mb(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){const e=[];for(const[t,a]of Object.entries(n))Array.isArray(a)?a.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function bx(n,e){const t=new Sx(n,e);return t.subscribe.bind(t)}class Sx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let s;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");wx(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:a},s.next===void 0&&(s.next=lg),s.error===void 0&&(s.error=lg),s.complete===void 0&&(s.complete=lg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(n){return n&&n._delegate?n._delegate:n}class io{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new ax;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&a.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(a)return null;throw s}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cx(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});a.resolve(l)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);a===d&&c.resolve(s)}return s}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(a)??new Set;s.add(e),this.onInitCallbacks.set(a,s);const l=this.instances.get(a);return l&&e(l,a),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const s of a)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:Rx(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rx(n){return n===Qs?void 0:n}function Cx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ax(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(dt||(dt={}));const Dx={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},Nx=dt.INFO,xx={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Ox=(n,e,...t)=>{if(e<n.logLevel)return;const a=new Date().toISOString(),s=xx[e];if(s)console[s](`[${a}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ty{constructor(e){this.name=e,this._logLevel=Nx,this._logHandler=Ox,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}const Mx=(n,e)=>e.some(t=>n instanceof t);let Vb,Pb;function Vx(){return Vb||(Vb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Px(){return Pb||(Pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yw=new WeakMap,xg=new WeakMap,_w=new WeakMap,ug=new WeakMap,by=new WeakMap;function kx(n){const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(os(n.result)),s()},c=()=>{a(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&yw.set(t,n)}).catch(()=>{}),by.set(e,n),e}function Lx(n){if(xg.has(n))return;const e=new Promise((t,a)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{a(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});xg.set(n,e)}let Og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_w.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Ux(n){Og=n(Og)}function jx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=n.call(cg(this),e,...t);return _w.set(a,e.sort?e.sort():[e]),os(a)}:Px().includes(n)?function(...e){return n.apply(cg(this),e),os(yw.get(this))}:function(...e){return os(n.apply(cg(this),e))}}function zx(n){return typeof n=="function"?jx(n):(n instanceof IDBTransaction&&Lx(n),Mx(n,Vx())?new Proxy(n,Og):n)}function os(n){if(n instanceof IDBRequest)return kx(n);if(ug.has(n))return ug.get(n);const e=zx(n);return e!==n&&(ug.set(n,e),by.set(e,n)),e}const cg=n=>by.get(n);function Bx(n,e,{blocked:t,upgrade:a,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),d=os(c);return a&&c.addEventListener("upgradeneeded",p=>{a(os(c.result),p.oldVersion,p.newVersion,os(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const Fx=["get","getKey","getAll","getAllKeys","count"],qx=["put","add","delete","clear"],hg=new Map;function kb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(hg.get(e))return hg.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,s=qx.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(s||Fx.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,s?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),s&&p.done]))[0]};return hg.set(e,l),l}Ux(n=>({...n,get:(e,t,a)=>kb(e,t)||n.get(e,t,a),has:(e,t)=>!!kb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Gx(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function Gx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mg="@firebase/app",Lb="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=new Ty("@firebase/app"),$x="@firebase/app-compat",Kx="@firebase/analytics-compat",Yx="@firebase/analytics",Qx="@firebase/app-check-compat",Xx="@firebase/app-check",Wx="@firebase/auth",Jx="@firebase/auth-compat",Zx="@firebase/database",e2="@firebase/data-connect",t2="@firebase/database-compat",n2="@firebase/functions",r2="@firebase/functions-compat",i2="@firebase/installations",a2="@firebase/installations-compat",s2="@firebase/messaging",o2="@firebase/messaging-compat",l2="@firebase/performance",u2="@firebase/performance-compat",c2="@firebase/remote-config",h2="@firebase/remote-config-compat",f2="@firebase/storage",d2="@firebase/storage-compat",m2="@firebase/firestore",p2="@firebase/ai",g2="@firebase/firestore-compat",y2="firebase",_2="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",v2={[Mg]:"fire-core",[$x]:"fire-core-compat",[Yx]:"fire-analytics",[Kx]:"fire-analytics-compat",[Xx]:"fire-app-check",[Qx]:"fire-app-check-compat",[Wx]:"fire-auth",[Jx]:"fire-auth-compat",[Zx]:"fire-rtdb",[e2]:"fire-data-connect",[t2]:"fire-rtdb-compat",[n2]:"fire-fn",[r2]:"fire-fn-compat",[i2]:"fire-iid",[a2]:"fire-iid-compat",[s2]:"fire-fcm",[o2]:"fire-fcm-compat",[l2]:"fire-perf",[u2]:"fire-perf-compat",[c2]:"fire-rc",[h2]:"fire-rc-compat",[f2]:"fire-gcs",[d2]:"fire-gcs-compat",[m2]:"fire-fst",[g2]:"fire-fst-compat",[p2]:"fire-vertex","fire-js":"fire-js",[y2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new Map,E2=new Map,Pg=new Map;function Ub(n,e){try{n.container.addComponent(e)}catch(t){fa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vl(n){const e=n.name;if(Pg.has(e))return fa.debug(`There were multiple attempts to register component ${e}.`),!1;Pg.set(e,n);for(const t of Ff.values())Ub(t,n);for(const t of E2.values())Ub(t,n);return!0}function Sy(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function si(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new Tc("app","Firebase",T2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=_2;function vw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const a={name:Vg,automaticDataCollectionEnabled:!0,...e},s=a.name;if(typeof s!="string"||!s)throw ls.create("bad-app-name",{appName:String(s)});if(t||(t=dw()),!t)throw ls.create("no-options");const l=Ff.get(s);if(l){if(ro(t,l.options)&&ro(a,l.config))return l;throw ls.create("duplicate-app",{appName:s})}const c=new Ix(s);for(const p of Pg.values())c.addComponent(p);const d=new b2(t,a,c);return Ff.set(s,d),d}function Ew(n=Vg){const e=Ff.get(n);if(!e&&n===Vg&&dw())return vw();if(!e)throw ls.create("no-app",{appName:n});return e}function us(n,e,t){let a=v2[n]??n;t&&(a+=`-${t}`);const s=a.match(/\s|\//),l=e.match(/\s|\//);if(s||l){const c=[`Unable to register library "${a}" with version "${e}":`];s&&c.push(`library name "${a}" contains illegal characters (whitespace or "/")`),s&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fa.warn(c.join(" "));return}vl(new io(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firebase-heartbeat-database",w2=1,ac="firebase-heartbeat-store";let fg=null;function Tw(){return fg||(fg=Bx(S2,w2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ac)}catch(t){console.warn(t)}}}}).catch(n=>{throw ls.create("idb-open",{originalErrorMessage:n.message})})),fg}async function A2(n){try{const t=(await Tw()).transaction(ac),a=await t.objectStore(ac).get(bw(n));return await t.done,a}catch(e){if(e instanceof _a)fa.warn(e.message);else{const t=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fa.warn(t.message)}}}async function jb(n,e){try{const a=(await Tw()).transaction(ac,"readwrite");await a.objectStore(ac).put(e,bw(n)),await a.done}catch(t){if(t instanceof _a)fa.warn(t.message);else{const a=ls.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});fa.warn(a.message)}}}function bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=1024,C2=30;class I2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N2(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=zb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>C2){const c=x2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){fa.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zb(),{heartbeatsToSend:a,unsentEntries:s}=D2(this._heartbeatsCache.heartbeats),l=Bf(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return fa.warn(t),""}}}function zb(){return new Date().toISOString().substring(0,10)}function D2(n,e=R2){const t=[];let a=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),Bb(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Bb(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class N2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gx()?yx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await A2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Bb(n){return Bf(JSON.stringify({version:2,heartbeats:n})).length}function x2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let a=1;a<n.length;a++)n[a].date<t&&(t=n[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(n){vl(new io("platform-logger",e=>new Hx(e),"PRIVATE")),vl(new io("heartbeat",e=>new I2(e),"PRIVATE")),us(Mg,Lb,n),us(Mg,Lb,"esm2020"),us("fire-js","")}O2("");var Fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,Sw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,w){function I(){}I.prototype=w.prototype,b.F=w.prototype,b.prototype=new I,b.prototype.constructor=b,b.D=function(N,x,P){for(var O=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)O[ze-2]=arguments[ze];return w.prototype[x].apply(N,O)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,t),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,w,I){I||(I=0);const N=Array(16);if(typeof w=="string")for(var x=0;x<16;++x)N[x]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(x=0;x<16;++x)N[x]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=b.g[0],I=b.g[1],x=b.g[2];let P=b.g[3],O;O=w+(P^I&(x^P))+N[0]+3614090360&4294967295,w=I+(O<<7&4294967295|O>>>25),O=P+(x^w&(I^x))+N[1]+3905402710&4294967295,P=w+(O<<12&4294967295|O>>>20),O=x+(I^P&(w^I))+N[2]+606105819&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(w^x&(P^w))+N[3]+3250441966&4294967295,I=x+(O<<22&4294967295|O>>>10),O=w+(P^I&(x^P))+N[4]+4118548399&4294967295,w=I+(O<<7&4294967295|O>>>25),O=P+(x^w&(I^x))+N[5]+1200080426&4294967295,P=w+(O<<12&4294967295|O>>>20),O=x+(I^P&(w^I))+N[6]+2821735955&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(w^x&(P^w))+N[7]+4249261313&4294967295,I=x+(O<<22&4294967295|O>>>10),O=w+(P^I&(x^P))+N[8]+1770035416&4294967295,w=I+(O<<7&4294967295|O>>>25),O=P+(x^w&(I^x))+N[9]+2336552879&4294967295,P=w+(O<<12&4294967295|O>>>20),O=x+(I^P&(w^I))+N[10]+4294925233&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(w^x&(P^w))+N[11]+2304563134&4294967295,I=x+(O<<22&4294967295|O>>>10),O=w+(P^I&(x^P))+N[12]+1804603682&4294967295,w=I+(O<<7&4294967295|O>>>25),O=P+(x^w&(I^x))+N[13]+4254626195&4294967295,P=w+(O<<12&4294967295|O>>>20),O=x+(I^P&(w^I))+N[14]+2792965006&4294967295,x=P+(O<<17&4294967295|O>>>15),O=I+(w^x&(P^w))+N[15]+1236535329&4294967295,I=x+(O<<22&4294967295|O>>>10),O=w+(x^P&(I^x))+N[1]+4129170786&4294967295,w=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(w^I))+N[6]+3225465664&4294967295,P=w+(O<<9&4294967295|O>>>23),O=x+(w^I&(P^w))+N[11]+643717713&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^w&(x^P))+N[0]+3921069994&4294967295,I=x+(O<<20&4294967295|O>>>12),O=w+(x^P&(I^x))+N[5]+3593408605&4294967295,w=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(w^I))+N[10]+38016083&4294967295,P=w+(O<<9&4294967295|O>>>23),O=x+(w^I&(P^w))+N[15]+3634488961&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^w&(x^P))+N[4]+3889429448&4294967295,I=x+(O<<20&4294967295|O>>>12),O=w+(x^P&(I^x))+N[9]+568446438&4294967295,w=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(w^I))+N[14]+3275163606&4294967295,P=w+(O<<9&4294967295|O>>>23),O=x+(w^I&(P^w))+N[3]+4107603335&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^w&(x^P))+N[8]+1163531501&4294967295,I=x+(O<<20&4294967295|O>>>12),O=w+(x^P&(I^x))+N[13]+2850285829&4294967295,w=I+(O<<5&4294967295|O>>>27),O=P+(I^x&(w^I))+N[2]+4243563512&4294967295,P=w+(O<<9&4294967295|O>>>23),O=x+(w^I&(P^w))+N[7]+1735328473&4294967295,x=P+(O<<14&4294967295|O>>>18),O=I+(P^w&(x^P))+N[12]+2368359562&4294967295,I=x+(O<<20&4294967295|O>>>12),O=w+(I^x^P)+N[5]+4294588738&4294967295,w=I+(O<<4&4294967295|O>>>28),O=P+(w^I^x)+N[8]+2272392833&4294967295,P=w+(O<<11&4294967295|O>>>21),O=x+(P^w^I)+N[11]+1839030562&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^w)+N[14]+4259657740&4294967295,I=x+(O<<23&4294967295|O>>>9),O=w+(I^x^P)+N[1]+2763975236&4294967295,w=I+(O<<4&4294967295|O>>>28),O=P+(w^I^x)+N[4]+1272893353&4294967295,P=w+(O<<11&4294967295|O>>>21),O=x+(P^w^I)+N[7]+4139469664&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^w)+N[10]+3200236656&4294967295,I=x+(O<<23&4294967295|O>>>9),O=w+(I^x^P)+N[13]+681279174&4294967295,w=I+(O<<4&4294967295|O>>>28),O=P+(w^I^x)+N[0]+3936430074&4294967295,P=w+(O<<11&4294967295|O>>>21),O=x+(P^w^I)+N[3]+3572445317&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^w)+N[6]+76029189&4294967295,I=x+(O<<23&4294967295|O>>>9),O=w+(I^x^P)+N[9]+3654602809&4294967295,w=I+(O<<4&4294967295|O>>>28),O=P+(w^I^x)+N[12]+3873151461&4294967295,P=w+(O<<11&4294967295|O>>>21),O=x+(P^w^I)+N[15]+530742520&4294967295,x=P+(O<<16&4294967295|O>>>16),O=I+(x^P^w)+N[2]+3299628645&4294967295,I=x+(O<<23&4294967295|O>>>9),O=w+(x^(I|~P))+N[0]+4096336452&4294967295,w=I+(O<<6&4294967295|O>>>26),O=P+(I^(w|~x))+N[7]+1126891415&4294967295,P=w+(O<<10&4294967295|O>>>22),O=x+(w^(P|~I))+N[14]+2878612391&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~w))+N[5]+4237533241&4294967295,I=x+(O<<21&4294967295|O>>>11),O=w+(x^(I|~P))+N[12]+1700485571&4294967295,w=I+(O<<6&4294967295|O>>>26),O=P+(I^(w|~x))+N[3]+2399980690&4294967295,P=w+(O<<10&4294967295|O>>>22),O=x+(w^(P|~I))+N[10]+4293915773&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~w))+N[1]+2240044497&4294967295,I=x+(O<<21&4294967295|O>>>11),O=w+(x^(I|~P))+N[8]+1873313359&4294967295,w=I+(O<<6&4294967295|O>>>26),O=P+(I^(w|~x))+N[15]+4264355552&4294967295,P=w+(O<<10&4294967295|O>>>22),O=x+(w^(P|~I))+N[6]+2734768916&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~w))+N[13]+1309151649&4294967295,I=x+(O<<21&4294967295|O>>>11),O=w+(x^(I|~P))+N[4]+4149444226&4294967295,w=I+(O<<6&4294967295|O>>>26),O=P+(I^(w|~x))+N[11]+3174756917&4294967295,P=w+(O<<10&4294967295|O>>>22),O=x+(w^(P|~I))+N[2]+718787259&4294967295,x=P+(O<<15&4294967295|O>>>17),O=I+(P^(x|~w))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+w&4294967295,b.g[1]=b.g[1]+(x+(O<<21&4294967295|O>>>11))&4294967295,b.g[2]=b.g[2]+x&4294967295,b.g[3]=b.g[3]+P&4294967295}a.prototype.v=function(b,w){w===void 0&&(w=b.length);const I=w-this.blockSize,N=this.C;let x=this.h,P=0;for(;P<w;){if(x==0)for(;P<=I;)s(this,b,P),P+=this.blockSize;if(typeof b=="string"){for(;P<w;)if(N[x++]=b.charCodeAt(P++),x==this.blockSize){s(this,N),x=0;break}}else for(;P<w;)if(N[x++]=b[P++],x==this.blockSize){s(this,N),x=0;break}}this.h=x,this.o+=w},a.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var w=1;w<b.length-8;++w)b[w]=0;w=this.o*8;for(var I=b.length-8;I<b.length;++I)b[I]=w&255,w/=256;for(this.v(b),b=Array(16),w=0,I=0;I<4;++I)for(let N=0;N<32;N+=8)b[w++]=this.g[I]>>>N&255;return b};function l(b,w){var I=d;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=w(b)}function c(b,w){this.h=w;const I=[];let N=!0;for(let x=b.length-1;x>=0;x--){const P=b[x]|0;N&&P==w||(I[x]=P,N=!1)}this.g=I}var d={};function p(b){return-128<=b&&b<128?l(b,function(w){return new c([w|0],w<0?-1:0)}):new c([b|0],b<0?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return E;if(b<0)return V(g(-b));const w=[];let I=1;for(let N=0;b>=I;N++)w[N]=b/I|0,I*=4294967296;return new c(w,0)}function _(b,w){if(b.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(b.charAt(0)=="-")return V(_(b.substring(1),w));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=g(Math.pow(w,8));let N=E;for(let P=0;P<b.length;P+=8){var x=Math.min(8,b.length-P);const O=parseInt(b.substring(P,P+x),w);x<8?(x=g(Math.pow(w,x)),N=N.j(x).add(g(O))):(N=N.j(I),N=N.add(g(O)))}return N}var E=p(0),S=p(1),R=p(16777216);n=c.prototype,n.m=function(){if(B(this))return-V(this).m();let b=0,w=1;for(let I=0;I<this.g.length;I++){const N=this.i(I);b+=(N>=0?N:4294967296+N)*w,w*=4294967296}return b},n.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(U(this))return"0";if(B(this))return"-"+V(this).toString(b);const w=g(Math.pow(b,6));var I=this;let N="";for(;;){const x=Q(I,w).g;I=F(I,x.j(w));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(b);if(I=x,U(I))return P+N;for(;P.length<6;)P="0"+P;N=P+N}},n.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function U(b){if(b.h!=0)return!1;for(let w=0;w<b.g.length;w++)if(b.g[w]!=0)return!1;return!0}function B(b){return b.h==-1}n.l=function(b){return b=F(this,b),B(b)?-1:U(b)?0:1};function V(b){const w=b.g.length,I=[];for(let N=0;N<w;N++)I[N]=~b.g[N];return new c(I,~b.h).add(S)}n.abs=function(){return B(this)?V(this):this},n.add=function(b){const w=Math.max(this.g.length,b.g.length),I=[];let N=0;for(let x=0;x<=w;x++){let P=N+(this.i(x)&65535)+(b.i(x)&65535),O=(P>>>16)+(this.i(x)>>>16)+(b.i(x)>>>16);N=O>>>16,P&=65535,O&=65535,I[x]=O<<16|P}return new c(I,I[I.length-1]&-2147483648?-1:0)};function F(b,w){return b.add(V(w))}n.j=function(b){if(U(this)||U(b))return E;if(B(this))return B(b)?V(this).j(V(b)):V(V(this).j(b));if(B(b))return V(this.j(V(b)));if(this.l(R)<0&&b.l(R)<0)return g(this.m()*b.m());const w=this.g.length+b.g.length,I=[];for(var N=0;N<2*w;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<b.g.length;x++){const P=this.i(N)>>>16,O=this.i(N)&65535,ze=b.i(x)>>>16,Ze=b.i(x)&65535;I[2*N+2*x]+=O*Ze,H(I,2*N+2*x),I[2*N+2*x+1]+=P*Ze,H(I,2*N+2*x+1),I[2*N+2*x+1]+=O*ze,H(I,2*N+2*x+1),I[2*N+2*x+2]+=P*ze,H(I,2*N+2*x+2)}for(b=0;b<w;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=w;b<2*w;b++)I[b]=0;return new c(I,0)};function H(b,w){for(;(b[w]&65535)!=b[w];)b[w+1]+=b[w]>>>16,b[w]&=65535,w++}function q(b,w){this.g=b,this.h=w}function Q(b,w){if(U(w))throw Error("division by zero");if(U(b))return new q(E,E);if(B(b))return w=Q(V(b),w),new q(V(w.g),V(w.h));if(B(w))return w=Q(b,V(w)),new q(V(w.g),w.h);if(b.g.length>30){if(B(b)||B(w))throw Error("slowDivide_ only works with positive integers.");for(var I=S,N=w;N.l(b)<=0;)I=re(I),N=re(N);var x=Y(I,1),P=Y(N,1);for(N=Y(N,2),I=Y(I,2);!U(N);){var O=P.add(N);O.l(b)<=0&&(x=x.add(I),P=O),N=Y(N,1),I=Y(I,1)}return w=F(b,x.j(w)),new q(x,w)}for(x=E;b.l(w)>=0;){for(I=Math.max(1,Math.floor(b.m()/w.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),P=g(I),O=P.j(w);B(O)||O.l(b)>0;)I-=N,P=g(I),O=P.j(w);U(P)&&(P=S),x=x.add(P),b=F(b,O)}return new q(x,b)}n.B=function(b){return Q(this,b).h},n.and=function(b){const w=Math.max(this.g.length,b.g.length),I=[];for(let N=0;N<w;N++)I[N]=this.i(N)&b.i(N);return new c(I,this.h&b.h)},n.or=function(b){const w=Math.max(this.g.length,b.g.length),I=[];for(let N=0;N<w;N++)I[N]=this.i(N)|b.i(N);return new c(I,this.h|b.h)},n.xor=function(b){const w=Math.max(this.g.length,b.g.length),I=[];for(let N=0;N<w;N++)I[N]=this.i(N)^b.i(N);return new c(I,this.h^b.h)};function re(b){const w=b.g.length+1,I=[];for(let N=0;N<w;N++)I[N]=b.i(N)<<1|b.i(N-1)>>>31;return new c(I,b.h)}function Y(b,w){const I=w>>5;w%=32;const N=b.g.length-I,x=[];for(let P=0;P<N;P++)x[P]=w>0?b.i(P+I)>>>w|b.i(P+I+1)<<32-w:b.i(P+I);return new c(x,b.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Sw=a,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,cs=c}).apply(typeof Fb<"u"?Fb:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ww,zu,Aw,vf,kg,Rw,Cw,Iw;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=t(this);function s(h,y){if(y)e:{var T=a;h=h.split(".");for(var D=0;D<h.length-1;D++){var X=h[D];if(!(X in T))break e;T=T[X]}h=h[h.length-1],D=T[h],y=y(D),y!=D&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(y){var T=[],D;for(D in y)Object.prototype.hasOwnProperty.call(y,D)&&T.push([D,y[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function p(h,y,T){return h.call.apply(h.bind,arguments)}function g(h,y,T){return g=p,g.apply(null,arguments)}function _(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function E(h,y){function T(){}T.prototype=y.prototype,h.Z=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Ob=function(D,X,ne){for(var be=Array(arguments.length-2),et=2;et<arguments.length;et++)be[et-2]=arguments[et];return y.prototype[X].apply(D,be)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function R(h){const y=h.length;if(y>0){const T=Array(y);for(let D=0;D<y;D++)T[D]=h[D];return T}return[]}function U(h,y){for(let D=1;D<arguments.length;D++){const X=arguments[D];var T=typeof X;if(T=T!="object"?T:X?Array.isArray(X)?"array":T:"null",T=="array"||T=="object"&&typeof X.length=="number"){T=h.length||0;const ne=X.length||0;h.length=T+ne;for(let be=0;be<ne;be++)h[T+be]=X[be]}else h.push(X)}}class B{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function V(h){c.setTimeout(()=>{throw h},0)}function F(){var h=b;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class H{constructor(){this.h=this.g=null}add(y,T){const D=q.get();D.set(y,T),this.h?this.h.next=D:this.g=D,this.h=D}}var q=new B(()=>new Q,h=>h.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let re,Y=!1,b=new H,w=()=>{const h=Promise.resolve(void 0);re=()=>{h.then(I)}};function I(){for(var h;h=F();){try{h.h.call(h.g)}catch(T){V(T)}var y=q;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}Y=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};c.addEventListener("test",T,y),c.removeEventListener("test",T,y)}catch{}return h})();function O(h){return/^[\s\xa0]*$/.test(h)}function ze(h,y){x.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}E(ze,x),ze.prototype.init=function(h,y){const T=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ze.Z.h.call(this)},ze.prototype.h=function(){ze.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ze="closure_listenable_"+(Math.random()*1e6|0),W=0;function pe(h,y,T,D,X){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!D,this.ha=X,this.key=++W,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Be(h,y,T){for(const D in h)y.call(T,h[D],D,h)}function Ve(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function j(h){const y={};for(const T in h)y[T]=h[T];return y}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(h,y){let T,D;for(let X=1;X<arguments.length;X++){D=arguments[X];for(T in D)h[T]=D[T];for(let ne=0;ne<K.length;ne++)T=K[ne],Object.prototype.hasOwnProperty.call(D,T)&&(h[T]=D[T])}}function ce(h){this.src=h,this.g={},this.h=0}ce.prototype.add=function(h,y,T,D,X){const ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);const be=Te(h,y,D,X);return be>-1?(y=h[be],T||(y.fa=!1)):(y=new pe(y,this.src,ne,!!D,X),y.fa=T,h.push(y)),y};function ge(h,y){const T=y.type;if(T in h.g){var D=h.g[T],X=Array.prototype.indexOf.call(D,y,void 0),ne;(ne=X>=0)&&Array.prototype.splice.call(D,X,1),ne&&(_e(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Te(h,y,T,D){for(let X=0;X<h.length;++X){const ne=h[X];if(!ne.da&&ne.listener==y&&ne.capture==!!T&&ne.ha==D)return X}return-1}var Pe="closure_lm_"+(Math.random()*1e6|0),Ke={};function lt(h,y,T,D,X){if(Array.isArray(y)){for(let ne=0;ne<y.length;ne++)lt(h,y[ne],T,D,X);return null}return T=Ae(T),h&&h[Ze]?h.J(y,T,d(D)?!!D.capture:!1,X):Kt(h,y,T,!1,D,X)}function Kt(h,y,T,D,X,ne){if(!y)throw Error("Invalid event type");const be=d(X)?!!X.capture:!!X;let et=ye(h);if(et||(h[Pe]=et=new ce(h)),T=et.add(y,T,D,be,ne),T.proxy)return T;if(D=Cn(),T.proxy=D,D.src=h,D.listener=T,h.addEventListener)P||(X=be),X===void 0&&(X=!1),h.addEventListener(y.toString(),D,X);else if(h.attachEvent)h.attachEvent(Jt(y.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Cn(){function h(T){return y.call(h.src,h.listener,T)}const y=ae;return h}function Tt(h,y,T,D,X){if(Array.isArray(y))for(var ne=0;ne<y.length;ne++)Tt(h,y[ne],T,D,X);else D=d(D)?!!D.capture:!!D,T=Ae(T),h&&h[Ze]?(h=h.i,ne=String(y).toString(),ne in h.g&&(y=h.g[ne],T=Te(y,T,D,X),T>-1&&(_e(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete h.g[ne],h.h--)))):h&&(h=ye(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Te(y,T,D,X)),(T=h>-1?y[h]:null)&&Tn(T))}function Tn(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ze])ge(y.i,h);else{var T=h.type,D=h.proxy;y.removeEventListener?y.removeEventListener(T,D,h.capture):y.detachEvent?y.detachEvent(Jt(T),D):y.addListener&&y.removeListener&&y.removeListener(D),(T=ye(y))?(ge(T,h),T.h==0&&(T.src=null,y[Pe]=null)):_e(h)}}}function Jt(h){return h in Ke?Ke[h]:Ke[h]="on"+h}function ae(h,y){if(h.da)h=!0;else{y=new ze(y,this);const T=h.listener,D=h.ha||h.src;h.fa&&Tn(h),h=T.call(D,y)}return h}function ye(h){return h=h[Pe],h instanceof ce?h:null}var ke="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ae(h){return typeof h=="function"?h:(h[ke]||(h[ke]=function(y){return h.handleEvent(y)}),h[ke])}function we(){N.call(this),this.i=new ce(this),this.M=this,this.G=null}E(we,N),we.prototype[Ze]=!0,we.prototype.removeEventListener=function(h,y,T,D){Tt(this,h,y,T,D)};function Fe(h,y){var T,D=h.G;if(D)for(T=[];D;D=D.G)T.push(D);if(h=h.M,D=y.type||y,typeof y=="string")y=new x(y,h);else if(y instanceof x)y.target=y.target||h;else{var X=y;y=new x(D,h),oe(y,X)}X=!0;let ne,be;if(T)for(be=T.length-1;be>=0;be--)ne=y.g=T[be],X=kt(ne,D,!0,y)&&X;if(ne=y.g=h,X=kt(ne,D,!0,y)&&X,X=kt(ne,D,!1,y)&&X,T)for(be=0;be<T.length;be++)ne=y.g=T[be],X=kt(ne,D,!1,y)&&X}we.prototype.N=function(){if(we.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const T=h.g[y];for(let D=0;D<T.length;D++)_e(T[D]);delete h.g[y],h.h--}}this.G=null},we.prototype.J=function(h,y,T,D){return this.i.add(String(h),y,!1,T,D)},we.prototype.K=function(h,y,T,D){return this.i.add(String(h),y,!0,T,D)};function kt(h,y,T,D){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let X=!0;for(let ne=0;ne<y.length;++ne){const be=y[ne];if(be&&!be.da&&be.capture==T){const et=be.listener,ln=be.ha||be.src;be.fa&&ge(h.i,be),X=et.call(ln,D)!==!1&&X}}return X&&!D.defaultPrevented}function Rt(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=g(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function Le(h){h.g=Rt(()=>{h.g=null,h.i&&(h.i=!1,Le(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ye extends N{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Le(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dt(h){N.call(this),this.h=h,this.g={}}E(Dt,N);var nr=[];function Yn(h){Be(h.g,function(y,T){this.g.hasOwnProperty(T)&&Tn(y)},h),h.g={}}Dt.prototype.N=function(){Dt.Z.N.call(this),Yn(this)},Dt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rn=c.JSON.stringify,bn=c.JSON.parse,bs=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function yo(){}function va(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Lt(){x.call(this,"d")}E(Lt,x);function Qn(){x.call(this,"c")}E(Qn,x);var Yt={},Ss=null;function Ea(){return Ss=Ss||new we}Yt.Ia="serverreachability";function ws(h){x.call(this,Yt.Ia,h)}E(ws,x);function Xn(h){const y=Ea();Fe(y,new ws(y))}Yt.STAT_EVENT="statevent";function mi(h,y){x.call(this,Yt.STAT_EVENT,h),this.stat=y}E(mi,x);function Qt(h){const y=Ea();Fe(y,new mi(y,h))}Yt.Ja="timingevent";function Mr(h,y){x.call(this,Yt.Ja,h),this.size=y}E(Mr,x);function pr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function gr(){this.g=!0}gr.prototype.ua=function(){this.g=!1};function _o(h,y,T,D,X,ne){h.info(function(){if(h.g)if(ne){var be="",et=ne.split("&");for(let St=0;St<et.length;St++){var ln=et[St].split("=");if(ln.length>1){const Xt=ln[0];ln=ln[1];const kr=Xt.split("_");be=kr.length>=2&&kr[1]=="type"?be+(Xt+"="+ln+"&"):be+(Xt+"=redacted&")}}}else be=null;else be=ne;return"XMLHTTP REQ ("+D+") [attempt "+X+"]: "+y+`
`+T+`
`+be})}function ji(h,y,T,D,X,ne,be){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+X+"]: "+y+`
`+T+`
`+ne+" "+be})}function Wn(h,y,T,D){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+zl(h,T)+(D?" "+D:"")})}function pi(h,y){h.info(function(){return"TIMEOUT: "+y})}gr.prototype.info=function(){};function zl(h,y){if(!h.g)return y;if(!y)return null;try{const ne=JSON.parse(y);if(ne){for(h=0;h<ne.length;h++)if(Array.isArray(ne[h])){var T=ne[h];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var X=D[0];if(X!="noop"&&X!="stop"&&X!="close")for(let be=1;be<D.length;be++)D[be]=""}}}}return rn(ne)}catch{return y}}var zi={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},k={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},G;function ee(){}E(ee,yo),ee.prototype.g=function(){return new XMLHttpRequest},G=new ee;function me(h){return encodeURIComponent(String(h))}function ve(h){var y=1;h=h.split(":");const T=[];for(;y>0&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function Ce(h,y,T,D){this.j=h,this.i=y,this.l=T,this.S=D||1,this.V=new Dt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ne}function Ne(){this.i=null,this.g="",this.h=!1}var Ee={},Se={};function De(h,y,T){h.M=1,h.A=As(xt(y)),h.u=T,h.R=!0,He(h,null)}function He(h,y){h.F=Date.now(),Nt(h),h.B=xt(h.A);var T=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),Eo(T.i,"t",D),h.C=0,T=h.j.L,h.h=new Ne,h.g=Xc(h.j,T?y:null,!h.u),h.P>0&&(h.O=new Ye(g(h.Y,h,h.g),h.P)),y=h.V,T=h.g,D=h.ba;var X="readystatechange";Array.isArray(X)||(X&&(nr[0]=X.toString()),X=nr);for(let ne=0;ne<X.length;ne++){const be=lt(T,X[ne],D||y.handleEvent,!1,y.h||y);if(!be)break;y.g[be.key]=be}y=h.J?j(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),Xn(),_o(h.i,h.v,h.B,h.l,h.S,h.u)}Ce.prototype.ba=function(h){h=h.target;const y=this.O;y&&ei(h)==3?y.j():this.Y(h)},Ce.prototype.Y=function(h){try{if(h==this.g)e:{const et=ei(this.g),ln=this.g.ya(),St=this.g.ca();if(!(et<3)&&(et!=3||this.g&&(this.h.h||this.g.la()||xn(this.g)))){this.K||et!=4||ln==7||(ln==8||St<=0?Xn(3):Xn(2)),jt(this);var y=this.g.ca();this.X=y;var T=Me(this);if(this.o=y==200,ji(this.i,this.v,this.B,this.l,this.S,et,y),this.o){if(this.U&&!this.L){t:{if(this.g){var D,X=this.g;if((D=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(D)){var ne=D;break t}}ne=null}if(h=ne)Wn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,In(this,h);else{this.o=!1,this.m=3,Qt(12),zt(this),nt(this);break e}}if(this.R){h=!0;let Xt;for(;!this.K&&this.C<T.length;)if(Xt=at(this,T),Xt==Se){et==4&&(this.m=4,Qt(14),h=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Ee){this.m=4,Qt(15),Wn(this.i,this.l,T,"[Invalid Chunk]"),h=!1;break}else Wn(this.i,this.l,Xt,null),In(this,Xt);if(Qe(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||T.length!=0||this.h.h||(this.m=1,Qt(16),h=!1),this.o=this.o&&h,!h)Wn(this.i,this.l,T,"[Invalid Chunked Response]"),zt(this),nt(this);else if(T.length>0&&!this.W){this.W=!0;var be=this.j;be.g==this&&be.aa&&!be.P&&(be.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ql(be),be.P=!0,Qt(11))}}else Wn(this.i,this.l,T,null),In(this,T);et==4&&zt(this),this.o&&!this.K&&(et==4?$c(this.j,this):(this.o=!1,Nt(this)))}else Fi(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Qt(12)):(this.m=0,Qt(13)),zt(this),nt(this)}}}catch{}finally{}};function Me(h){if(!Qe(h))return h.g.la();const y=xn(h.g);if(y==="")return"";let T="";const D=y.length,X=ei(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return zt(h),nt(h),"";h.h.i=new c.TextDecoder}for(let ne=0;ne<D;ne++)h.h.h=!0,T+=h.h.i.decode(y[ne],{stream:!(X&&ne==D-1)});return y.length=0,h.h.g+=T,h.C=0,h.h.g}function Qe(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function at(h,y){var T=h.C,D=y.indexOf(`
`,T);return D==-1?Se:(T=Number(y.substring(T,D)),isNaN(T)?Ee:(D+=1,D+T>y.length?Se:(y=y.slice(D,D+T),h.C=D+T,y)))}Ce.prototype.cancel=function(){this.K=!0,zt(this)};function Nt(h){h.T=Date.now()+h.H,qt(h,h.H)}function qt(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=pr(g(h.aa,h),y)}function jt(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Ce.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(pi(this.i,this.B),this.M!=2&&(Xn(),Qt(17)),zt(this),this.m=2,nt(this)):qt(this,this.T-h)};function nt(h){h.j.I==0||h.K||$c(h.j,h)}function zt(h){jt(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Yn(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function In(h,y){try{var T=h.j;if(T.I!=0&&(T.g==h||Bn(T.h,h))){if(!h.L&&Bn(T.h,h)&&T.I==3){try{var D=T.Ba.g.parse(y)}catch{D=null}if(Array.isArray(D)&&D.length==3){var X=D;if(X[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<h.F)Ao(T),Ia(T);else break e;Os(T),Qt(18)}}else T.xa=X[1],0<T.xa-T.K&&X[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=pr(g(T.Va,T),6e3));ir(T.h)<=1&&T.ta&&(T.ta=void 0)}else Si(T,11)}else if((h.L||T.g==h)&&Ao(T),!O(y))for(X=T.Ba.g.parse(y),y=0;y<X.length;y++){let St=X[y];const Xt=St[0];if(!(Xt<=T.K))if(T.K=Xt,St=St[1],T.I==2)if(St[0]=="c"){T.M=St[1],T.ba=St[2];const kr=St[3];kr!=null&&(T.ka=kr,T.j.info("VER="+T.ka));const wi=St[4];wi!=null&&(T.za=wi,T.j.info("SVER="+T.za));const ti=St[5];ti!=null&&typeof ti=="number"&&ti>0&&(D=1.5*ti,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ni=h.g;if(ni){const Ms=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ms){var ne=D.h;ne.g||Ms.indexOf("spdy")==-1&&Ms.indexOf("quic")==-1&&Ms.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(yr(ne,ne.h),ne.h=null))}if(D.G){const Ro=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;Ro&&(D.wa=Ro,bt(D.J,D.G,Ro))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-h.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var be=h;if(D.na=Qc(D,D.L?D.ba:null,D.W),be.L){gi(D.h,be);var et=be,ln=D.O;ln&&(et.H=ln),et.D&&(jt(et),Nt(et)),D.g=be}else Hc(D);T.i.length>0&&bi(T)}else St[0]!="stop"&&St[0]!="close"||Si(T,7);else T.I==3&&(St[0]=="stop"||St[0]=="close"?St[0]=="stop"?Si(T,7):Kl(T):St[0]!="noop"&&T.l&&T.l.qa(St),T.A=0)}}Xn(4)}catch{}}var Bt=class{constructor(h,y){this.g=h,this.map=y}};function rr(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zn(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ir(h){return h.h?1:h.g?h.g.size:0}function Bn(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function yr(h,y){h.g?h.g.add(y):h.h=y}function gi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}rr.prototype.cancel=function(){if(this.i=yi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function yi(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.G);return y}return R(h.i)}var ot=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zt(h,y){if(h){h=h.split("&");for(let T=0;T<h.length;T++){const D=h[T].indexOf("=");let X,ne=null;D>=0?(X=h[T].substring(0,D),ne=h[T].substring(D+1)):X=h[T],y(X,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function dn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof dn?(this.l=h.l,rt(this,h.j),this.o=h.o,this.g=h.g,_r(this,h.u),this.h=h.h,Ta(this,Fc(h.i)),this.m=h.m):h&&(y=String(h).match(ot))?(this.l=!1,rt(this,y[1]||"",!0),this.o=_i(y[2]||""),this.g=_i(y[3]||"",!0),_r(this,y[4]),this.h=_i(y[5]||"",!0),Ta(this,y[6]||"",!0),this.m=_i(y[7]||"")):(this.l=!1,this.i=new Sa(null,this.l))}dn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Rs(y,vo,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Rs(y,vo,!0),"@"),h.push(me(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&h.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Rs(T,T.charAt(0)=="/"?Bl:jc,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Rs(T,zc)),h.join("")},dn.prototype.resolve=function(h){const y=xt(this);let T=!!h.j;T?rt(y,h.j):T=!!h.o,T?y.o=h.o:T=!!h.g,T?y.g=h.g:T=h.u!=null;var D=h.h;if(T)_r(y,h.u);else if(T=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var X=y.h.lastIndexOf("/");X!=-1&&(D=y.h.slice(0,X+1)+D)}if(X=D,X==".."||X==".")D="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){D=X.lastIndexOf("/",0)==0,X=X.split("/");const ne=[];for(let be=0;be<X.length;){const et=X[be++];et=="."?D&&be==X.length&&ne.push(""):et==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),D&&be==X.length&&ne.push("")):(ne.push(et),D=!0)}D=ne.join("/")}else D=X}return T?y.h=D:T=h.i.toString()!=="",T?Ta(y,Fc(h.i)):T=!!h.m,T&&(y.m=h.m),y};function xt(h){return new dn(h)}function rt(h,y,T){h.j=T?_i(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function _r(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Ta(h,y,T){y instanceof Sa?(h.i=y,To(h.i,h.l)):(T||(y=Rs(y,ba)),h.i=new Sa(y,h.l))}function bt(h,y,T){h.i.set(y,T)}function As(h){return bt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function _i(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Rs(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,ar),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ar(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var vo=/[#\/\?@]/g,jc=/[#\?:]/g,Bl=/[#\?]/g,ba=/[#\?@]/g,zc=/#/g;function Sa(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function sr(h){h.g||(h.g=new Map,h.h=0,h.i&&Zt(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=Sa.prototype,n.add=function(h,y){sr(this),this.i=null,h=wa(this,h);let T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Bc(h,y){sr(h),y=wa(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function Fl(h,y){return sr(h),y=wa(h,y),h.g.has(y)}n.forEach=function(h,y){sr(this),this.g.forEach(function(T,D){T.forEach(function(X){h.call(y,X,D,this)},this)},this)};function ql(h,y){sr(h);let T=[];if(typeof y=="string")Fl(h,y)&&(T=T.concat(h.g.get(wa(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)T=T.concat(h[y]);return T}n.set=function(h,y){return sr(this),this.i=null,h=wa(this,h),Fl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=ql(this,h),h.length>0?String(h[0]):y):y};function Eo(h,y,T){Bc(h,y),T.length>0&&(h.i=null,h.g.set(wa(h,y),R(T)),h.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let D=0;D<y.length;D++){var T=y[D];const X=me(T);T=ql(this,T);for(let ne=0;ne<T.length;ne++){let be=X;T[ne]!==""&&(be+="="+me(T[ne])),h.push(be)}}return this.i=h.join("&")};function Fc(h){const y=new Sa;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function wa(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function To(h,y){y&&!h.j&&(sr(h),h.i=null,h.g.forEach(function(T,D){const X=D.toLowerCase();D!=X&&(Bc(this,D),Eo(this,X,T))},h)),h.j=y}function Jr(h,y){const T=new gr;if(c.Image){const D=new Image;D.onload=_(Vr,T,"TestLoadImage: loaded",!0,y,D),D.onerror=_(Vr,T,"TestLoadImage: error",!1,y,D),D.onabort=_(Vr,T,"TestLoadImage: abort",!1,y,D),D.ontimeout=_(Vr,T,"TestLoadImage: timeout",!1,y,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else y(!1)}function Hl(h,y){const T=new gr,D=new AbortController,X=setTimeout(()=>{D.abort(),Vr(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:D.signal}).then(ne=>{clearTimeout(X),ne.ok?Vr(T,"TestPingServer: ok",!0,y):Vr(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(X),Vr(T,"TestPingServer: error",!1,y)})}function Vr(h,y,T,D,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),D(T)}catch{}}function Aa(){this.g=new bs}function vi(h){this.i=h.Sb||null,this.h=h.ab||!1}E(vi,yo),vi.prototype.g=function(){return new Cs(this.i,this.h)};function Cs(h,y){we.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Cs,we),n=Cs.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Zr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Zr(this)),this.g&&(this.readyState=3,Zr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bo(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function bo(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Ra(this):Zr(this),this.readyState==3&&bo(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Ra(this))},n.Na=function(h){this.g&&(this.response=h,Ra(this))},n.ga=function(){this.g&&Ra(this)};function Ra(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Zr(h)}n.setRequestHeader=function(h,y){this.A.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function Zr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pr(h){let y="";return Be(h,function(T,D){y+=D,y+=":",y+=T,y+=`\r
`}),y}function Is(h,y,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=Pr(T),typeof h=="string"?T!=null&&me(T):bt(h,y,T))}function Ot(h){we.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Ot,we);var Ei=/^https?$/i,Gl=["POST","PUT"];n=Ot.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,y,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():G.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(ne){Ds(this,ne);return}if(h=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var X in D)T.set(X,D[X]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const ne of D.keys())T.set(ne,D.get(ne));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),X=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Gl,y,void 0)>=0)||D||X||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,be]of T)this.g.setRequestHeader(ne,be);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(ne){Ds(this,ne)}};function Ds(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,$l(h),Bi(h)}function $l(h){h.A||(h.A=!0,Fe(h,"complete"),Fe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Fe(this,"complete"),Fe(this,"abort"),Bi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bi(this,!0)),Ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ns(this):this.Xa())},n.Xa=function(){Ns(this)};function Ns(h){if(h.h&&typeof l<"u"){if(h.v&&ei(h)==4)setTimeout(h.Ca.bind(h),0);else if(Fe(h,"readystatechange"),ei(h)==4){h.h=!1;try{const ne=h.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var D;if(D=ne===0){let be=String(h.D).match(ot)[1]||null;!be&&c.self&&c.self.location&&(be=c.self.location.protocol.slice(0,-1)),D=!Ei.test(be?be.toLowerCase():"")}T=D}if(T)Fe(h,"complete"),Fe(h,"success");else{h.o=6;try{var X=ei(h)>2?h.g.statusText:""}catch{X=""}h.l=X+" ["+h.ca()+"]",$l(h)}}finally{Bi(h)}}}}function Bi(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const T=h.g;h.g=null,y||Fe(h,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}n.ca=function(){try{return ei(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),bn(y)}};function xn(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(h){const y={};h=(h.g&&ei(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(O(h[D]))continue;var T=ve(h[D]);const X=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=y[X]||[];y[X]=ne,ne.push(T)}Ve(y,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ti(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function Ca(h){this.za=0,this.i=[],this.j=new gr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ti("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ti("baseRetryDelayMs",5e3,h),this.Za=Ti("retryDelaySeedMs",1e4,h),this.Ta=Ti("forwardChannelMaxRetries",2,h),this.va=Ti("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new rr(h&&h.concurrentRequestLimit),this.Ba=new Aa,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ca.prototype,n.ka=8,n.I=1,n.connect=function(h,y,T,D){Qt(0),this.W=h,this.H=y||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Qc(this,null,this.W),bi(this)};function Kl(h){if(So(h),h.I==3){var y=h.V++,T=xt(h.J);if(bt(T,"SID",h.M),bt(T,"RID",y),bt(T,"TYPE","terminate"),xs(h,T),y=new Ce(h,h.j,y),y.M=2,y.A=As(xt(T)),T=!1,c.navigator&&c.navigator.sendBeacon)try{T=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&c.Image&&(new Image().src=y.A,T=!0),T||(y.g=Xc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Nt(y)}Yc(h)}function Ia(h){h.g&&(Ql(h),h.g.cancel(),h.g=null)}function So(h){Ia(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ao(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function bi(h){if(!zn(h.h)&&!h.m){h.m=!0;var y=h.Ea;re||w(),Y||(re(),Y=!0),b.add(y,h),h.D=0}}function wo(h,y){return ir(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=pr(g(h.Ea,h,y),Kc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const X=new Ce(this,this.j,h);let ne=this.o;if(this.U&&(ne?(ne=j(ne),oe(ne,this.U)):ne=this.U),this.u!==null||this.R||(X.J=ne,ne=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(y+=D,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=qc(this,X,y),T=xt(this.J),bt(T,"RID",h),bt(T,"CVER",22),this.G&&bt(T,"X-HTTP-Session-Id",this.G),xs(this,T),ne&&(this.R?y="headers="+me(Pr(ne))+"&"+y:this.u&&Is(T,this.u,ne)),yr(this.h,X),this.Ra&&bt(T,"TYPE","init"),this.S?(bt(T,"$req",y),bt(T,"SID","null"),X.U=!0,De(X,T,null)):De(X,T,y),this.I=2}}else this.I==3&&(h?Yl(this,h):this.i.length==0||zn(this.h)||Yl(this))};function Yl(h,y){var T;y?T=y.l:T=h.V++;const D=xt(h.J);bt(D,"SID",h.M),bt(D,"RID",T),bt(D,"AID",h.K),xs(h,D),h.u&&h.o&&Is(D,h.u,h.o),T=new Ce(h,h.j,T,h.D+1),h.u===null&&(T.J=h.o),y&&(h.i=y.G.concat(h.i)),y=qc(h,T,1e3),T.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),yr(h.h,T),De(T,D,y)}function xs(h,y){h.H&&Be(h.H,function(T,D){bt(y,D,T)}),h.l&&Be({},function(T,D){bt(y,D,T)})}function qc(h,y,T){T=Math.min(h.i.length,T);const D=h.l?g(h.l.Ka,h.l,h):null;e:{var X=h.i;let et=-1;for(;;){const ln=["count="+T];et==-1?T>0?(et=X[0].g,ln.push("ofs="+et)):et=0:ln.push("ofs="+et);let St=!0;for(let Xt=0;Xt<T;Xt++){var ne=X[Xt].g;const kr=X[Xt].map;if(ne-=et,ne<0)et=Math.max(0,X[Xt].g-100),St=!1;else try{ne="req"+ne+"_"||"";try{var be=kr instanceof Map?kr:Object.entries(kr);for(const[wi,ti]of be){let ni=ti;d(ti)&&(ni=rn(ti)),ln.push(ne+wi+"="+encodeURIComponent(ni))}}catch(wi){throw ln.push(ne+"type="+encodeURIComponent("_badmap")),wi}}catch{D&&D(kr)}}if(St){be=ln.join("&");break e}}be=void 0}return h=h.i.splice(0,T),y.G=h,be}function Hc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;re||w(),Y||(re(),Y=!0),b.add(y,h),h.A=0}}function Os(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=pr(g(h.Da,h),Kc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,Gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=pr(g(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Qt(10),Ia(this),Gc(this))};function Ql(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function Gc(h){h.g=new Ce(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=xt(h.na);bt(y,"RID","rpc"),bt(y,"SID",h.M),bt(y,"AID",h.K),bt(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&bt(y,"TO",h.ia),bt(y,"TYPE","xmlhttp"),xs(h,y),h.u&&h.o&&Is(y,h.u,h.o),h.O&&(h.g.H=h.O);var T=h.g;h=h.ba,T.M=1,T.A=As(xt(y)),T.u=null,T.R=!0,He(T,h)}n.Va=function(){this.C!=null&&(this.C=null,Ia(this),Os(this),Qt(19))};function Ao(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function $c(h,y){var T=null;if(h.g==y){Ao(h),Ql(h),h.g=null;var D=2}else if(Bn(h.h,y))T=y.G,gi(h.h,y),D=1;else return;if(h.I!=0){if(y.o)if(D==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var X=h.D;D=Ea(),Fe(D,new Mr(D,T)),bi(h)}else Hc(h);else if(X=y.m,X==3||X==0&&y.X>0||!(D==1&&wo(h,y)||D==2&&Os(h)))switch(T&&T.length>0&&(y=h.h,y.i=y.i.concat(T)),X){case 1:Si(h,5);break;case 4:Si(h,10);break;case 3:Si(h,6);break;default:Si(h,2)}}}function Kc(h,y){let T=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(T*=2),T*y}function Si(h,y){if(h.j.info("Error code "+y),y==2){var T=g(h.bb,h),D=h.Ua;const X=!D;D=new dn(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||rt(D,"https"),As(D),X?Jr(D.toString(),T):Hl(D.toString(),T)}else Qt(2);h.I=0,h.l&&h.l.pa(y),Yc(h),So(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function Yc(h){if(h.I=0,h.ja=[],h.l){const y=yi(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ja,y),U(h.ja,h.i),h.h.i.length=0,R(h.i),h.i.length=0),h.l.oa()}}function Qc(h,y,T){var D=T instanceof dn?xt(T):new dn(T);if(D.g!="")y&&(D.g=y+"."+D.g),_r(D,D.u);else{var X=c.location;D=X.protocol,y=y?y+"."+X.hostname:X.hostname,X=+X.port;const ne=new dn(null);D&&rt(ne,D),y&&(ne.g=y),X&&_r(ne,X),T&&(ne.h=T),D=ne}return T=h.G,y=h.wa,T&&y&&bt(D,T,y),bt(D,"VER",h.ka),xs(h,D),D}function Xc(h,y,T){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new Ot(new vi({ab:T})):new Ot(h.ma),y.Fa(h.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}n=Wc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Da(){}Da.prototype.g=function(h,y){return new Jn(h,y)};function Jn(h,y){we.call(this),this.g=new Ca(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!O(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!O(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new qi(this)}E(Jn,we),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Kl(this.g)},Jn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.v&&(T={},T.__data__=rn(h),h=T);y.i.push(new Bt(y.Ya++,h)),y.I==3&&bi(y)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,Jn.Z.N.call(this)};function Jc(h){Lt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}E(Jc,Lt);function Zc(){Qn.call(this),this.status=1}E(Zc,Qn);function qi(h){this.g=h}E(qi,Wc),qi.prototype.ra=function(){Fe(this.g,"a")},qi.prototype.qa=function(h){Fe(this.g,new Jc(h))},qi.prototype.pa=function(h){Fe(this.g,new Zc)},qi.prototype.oa=function(){Fe(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,Iw=function(){return new Da},Cw=function(){return Ea()},Rw=Yt,kg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,vf=zi,k.COMPLETE="complete",Aw=k,va.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",we.prototype.listen=we.prototype.J,zu=va,Ot.prototype.listenOnce=Ot.prototype.K,Ot.prototype.getLastError=Ot.prototype.Ha,Ot.prototype.getLastErrorCode=Ot.prototype.ya,Ot.prototype.getStatus=Ot.prototype.ca,Ot.prototype.getResponseJson=Ot.prototype.La,Ot.prototype.getResponseText=Ot.prototype.la,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Fa,ww=Ot}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gn.UNAUTHENTICATED=new Gn(null),Gn.GOOGLE_CREDENTIALS=new Gn("google-credentials-uid"),Gn.FIRST_PARTY=new Gn("first-party-uid"),Gn.MOCK_USER=new Gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl="12.8.0";function M2(n){Vl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new Ty("@firebase/firestore");function il(){return ao.logLevel}function Ie(n,...e){if(ao.logLevel<=dt.DEBUG){const t=e.map(wy);ao.debug(`Firestore (${Vl}): ${n}`,...t)}}function da(n,...e){if(ao.logLevel<=dt.ERROR){const t=e.map(wy);ao.error(`Firestore (${Vl}): ${n}`,...t)}}function El(n,...e){if(ao.logLevel<=dt.WARN){const t=e.map(wy);ao.warn(`Firestore (${Vl}): ${n}`,...t)}}function wy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(n,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Dw(n,a,t)}function Dw(n,e,t){let a=`FIRESTORE (${Vl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw da(a),new Error(a)}function At(n,e,t,a){let s="Unexpected state";typeof t=="string"?s=t:a=t,n||Dw(e,s,a)}function Je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends _a{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gn.UNAUTHENTICATED)))}shutdown(){}}class P2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class k2{constructor(e){this.t=e,this.currentUser=Gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){At(this.o===void 0,42304);let a=this.i;const s=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ca,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await s(this.currentUser)}))},d=p=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ca)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(At(typeof a.accessToken=="string",31837,{l:a}),new Nw(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return At(e===null||typeof e=="string",2055,{h:e}),new Gn(e)}}class L2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Gn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class U2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new L2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,si(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){At(this.o===void 0,3512);const a=l=>{l.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const s=l=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>s(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(At(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<n;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const s=z2(40);for(let l=0;l<s.length;++l)a.length<20&&s[l]<t&&(a+=e.charAt(s[l]%62))}return a}}function mt(n,e){return n<e?-1:n>e?1:0}function Lg(n,e){const t=Math.min(n.length,e.length);for(let a=0;a<t;a++){const s=n.charAt(a),l=e.charAt(a);if(s!==l)return dg(s)===dg(l)?mt(s,l):dg(s)?1:-1}return mt(n.length,e.length)}const B2=55296,F2=57343;function dg(n){const e=n.charCodeAt(0);return e>=B2&&e<=F2}function Tl(n,e,t){return n.length===e.length&&n.every(((a,s)=>t(a,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="__name__";class Di{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ge(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ge(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let s=0;s<a;s++){const l=Di.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return mt(e.length,t.length)}static compareSegments(e,t){const a=Di.isNumericId(e),s=Di.isNumericId(t);return a&&!s?-1:!a&&s?1:a&&s?Di.extractNumericId(e).compare(Di.extractNumericId(t)):Lg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class Ft extends Di{construct(e,t,a){return new Ft(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Re(ue.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((s=>s.length>0)))}return new Ft(t)}static emptyPath(){return new Ft([])}}const q2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Di{construct(e,t,a){return new Un(e,t,a)}static isValidIdentifier(e){return q2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hb}static keyField(){return new Un([Hb])}static fromServerFormat(e){const t=[];let a="",s=0;const l=()=>{if(a.length===0)throw new Re(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let c=!1;for(;s<e.length;){const d=e[s];if(d==="\\"){if(s+1===e.length)throw new Re(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Re(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,s+=2}else d==="`"?(c=!c,s++):d!=="."||c?(a+=d,s++):(l(),s++)}if(l(),c)throw new Re(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Ft.fromString(e))}static fromName(e){return new je(Ft.fromString(e).popFirst(5))}static empty(){return new je(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(n,e,t){if(!t)throw new Re(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function H2(n,e,t,a){if(e===!0&&a===!0)throw new Re(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gb(n){if(!je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $b(n){if(je.isDocumentKey(n))throw new Re(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ow(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Sd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ge(12329,{type:typeof n})}function Dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sd(n);throw new Re(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(n,e){const t={typeString:n};return e&&(t.value=e),t}function Sc(n,e){if(!Ow(n))throw new Re(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const s=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in n)){t=`JSON missing required field: '${a}'`;break}const c=n[a];if(s&&typeof c!==s){t=`JSON field '${a}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new Re(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=-62135596800,Yb=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*Yb);return new $t(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Kb)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yb}_compareTo(e){return this.seconds===e.seconds?mt(this.nanoseconds,e.nanoseconds):mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Sc(e,$t._jsonSchema))return new $t(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$t._jsonSchemaVersion="firestore/timestamp/1.0",$t._jsonSchema={type:En("string",$t._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{static fromTimestamp(e){return new Xe(e)}static min(){return new Xe(new $t(0,0))}static max(){return new Xe(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=-1;function G2(n,e){const t=n.toTimestamp().seconds,a=n.toTimestamp().nanoseconds+1,s=Xe.fromTimestamp(a===1e9?new $t(t+1,0):new $t(t,a));return new ds(s,je.empty(),e)}function $2(n){return new ds(n.readTime,n.key,sc)}class ds{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ds(Xe.min(),je.empty(),sc)}static max(){return new ds(Xe.max(),je.empty(),sc)}}function K2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=je.comparator(n.documentKey,e.documentKey),t!==0?t:mt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Q2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==Y2)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de(((a,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):de.reject(t)}static resolve(e){return new de(((t,a)=>{t(e)}))}static reject(e){return new de(((t,a)=>{a(e)}))}static waitFor(e){return new de(((t,a)=>{let s=0,l=0,c=!1;e.forEach((d=>{++s,d.next((()=>{++l,c&&l===s&&t()}),(p=>a(p)))})),c=!0,l===s&&t()}))}static or(e){let t=de.resolve(!1);for(const a of e)t=t.next((s=>s?de.resolve(s):a()));return t}static forEach(e,t){const a=[];return e.forEach(((s,l)=>{a.push(t.call(this,s,l))})),this.waitFor(a)}static mapArray(e,t){return new de(((a,s)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&a(c)}),(_=>s(_)))}}))}static doWhile(e,t){return new de(((a,s)=>{const l=()=>{e()===!0?t().next((()=>{l()}),s):a()};l()}))}}function X2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function kl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=-1;function Ad(n){return n==null}function qf(n){return n===0&&1/n==-1/0}function W2(n){return typeof n=="number"&&Number.isInteger(n)&&!qf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="";function J2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qb(e)),e=Z2(n.get(t),e);return Qb(e)}function Z2(n,e){let t=e;const a=n.length;for(let s=0;s<a;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case Mw:t+="";break;default:t+=l}}return t}function Qb(n){return n+Mw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Es(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Vw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t){this.comparator=e,this.root=t||Ln.EMPTY}insert(e,t){return new nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ln.BLACK,null,null))}remove(e){return new nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const s=this.comparator(e,a.key);if(s===0)return t+a.left.size;s<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,a,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ln{constructor(e,t,a,s,l){this.key=e,this.value=t,this.color=a??Ln.RED,this.left=s??Ln.EMPTY,this.right=l??Ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,s,l){return new Ln(e??this.key,t??this.value,a??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let s=this;const l=a(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,a),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,a)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ln.EMPTY;a=s.right.min(),s=s.copy(a.key,a.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}Ln.EMPTY=null,Ln.RED=!0,Ln.BLACK=!1;Ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,t,a,s,l){return this}insert(e,t,a){return new Ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const s=a.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Wb(this.data.getIterator())}getIteratorFrom(e){return new Wb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wn(this.comparator);return t.data=e,t}}class Wb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new Cr([])}unionWith(e){let t=new wn(Un.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Pw("Invalid base64 string: "+l):l}})(e);return new jn(t)}static fromUint8Array(e){const t=(function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l})(e);return new jn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let s=0;s<t.length;s++)a[s]=t.charCodeAt(s);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jn.EMPTY_BYTE_STRING=new jn("");const eO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(n){if(At(!!n,39018),typeof n=="string"){let e=0;const t=eO.exec(n);if(At(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const a=new Date(n);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:hn(n.seconds),nanos:hn(n.nanos)}}function hn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?jn.fromBase64String(n):jn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="server_timestamp",Lw="__type__",Uw="__previous_value__",jw="__local_write_time__";function Cy(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Lw])==null?void 0:a.stringValue)===kw}function Rd(n){const e=n.mapValue.fields[Uw];return Cy(e)?Rd(e):e}function oc(n){const e=ms(n.mapValue.fields[jw].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t,a,s,l,c,d,p,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=E}}const Hf="(default)";class lc{constructor(e,t){this.projectId=e,this.database=t||Hf}static empty(){return new lc("","")}get isDefaultDatabase(){return this.database===Hf}isEqual(e){return e instanceof lc&&e.projectId===this.projectId&&e.database===this.database}}function nO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Re(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lc(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="__type__",rO="__max__",uf={mapValue:{}},Bw="__vector__",Gf="value";function gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cy(n)?4:aO(n)?9007199254740991:iO(n)?10:11:Ge(28295,{value:n})}function Li(n,e){if(n===e)return!0;const t=gs(n);if(t!==gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return oc(n).isEqual(oc(e));case 3:return(function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=ms(s.timestampValue),d=ms(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,l){return ps(s.bytesValue).isEqual(ps(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,l){return hn(s.geoPointValue.latitude)===hn(l.geoPointValue.latitude)&&hn(s.geoPointValue.longitude)===hn(l.geoPointValue.longitude)})(n,e);case 2:return(function(s,l){if("integerValue"in s&&"integerValue"in l)return hn(s.integerValue)===hn(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=hn(s.doubleValue),d=hn(l.doubleValue);return c===d?qf(c)===qf(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Tl(n.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return(function(s,l){const c=s.mapValue.fields||{},d=l.mapValue.fields||{};if(Xb(c)!==Xb(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Li(c[p],d[p])))return!1;return!0})(n,e);default:return Ge(52216,{left:n})}}function uc(n,e){return(n.values||[]).find((t=>Li(t,e)))!==void 0}function bl(n,e){if(n===e)return 0;const t=gs(n),a=gs(e);if(t!==a)return mt(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return mt(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=hn(l.integerValue||l.doubleValue),p=hn(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(n,e);case 3:return Jb(n.timestampValue,e.timestampValue);case 4:return Jb(oc(n),oc(e));case 5:return Lg(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=ps(l),p=ps(c);return d.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=mt(d[g],p[g]);if(_!==0)return _}return mt(d.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=mt(hn(l.latitude),hn(c.latitude));return d!==0?d:mt(hn(l.longitude),hn(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Zb(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,U,B;const d=l.fields||{},p=c.fields||{},g=(S=d[Gf])==null?void 0:S.arrayValue,_=(R=p[Gf])==null?void 0:R.arrayValue,E=mt(((U=g==null?void 0:g.values)==null?void 0:U.length)||0,((B=_==null?void 0:_.values)==null?void 0:B.length)||0);return E!==0?E:Zb(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===uf.mapValue&&c===uf.mapValue)return 0;if(l===uf.mapValue)return 1;if(c===uf.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const S=Lg(p[E],_[E]);if(S!==0)return S;const R=bl(d[p[E]],g[_[E]]);if(R!==0)return R}return mt(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Ge(23264,{he:t})}}function Jb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return mt(n,e);const t=ms(n),a=ms(e),s=mt(t.seconds,a.seconds);return s!==0?s:mt(t.nanos,a.nanos)}function Zb(n,e){const t=n.values||[],a=e.values||[];for(let s=0;s<t.length&&s<a.length;++s){const l=bl(t[s],a[s]);if(l)return l}return mt(t.length,a.length)}function Sl(n){return Ug(n)}function Ug(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const a=ms(t);return`time(${a.seconds},${a.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return je.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let a="[",s=!0;for(const l of t.values||[])s?s=!1:a+=",",a+=Ug(l);return a+"]"})(n.arrayValue):"mapValue"in n?(function(t){const a=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of a)l?l=!1:s+=",",s+=`${c}:${Ug(t.fields[c])}`;return s+"}"})(n.mapValue):Ge(61005,{value:n})}function Ef(n){switch(gs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(n);return e?16+Ef(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((s,l)=>s+Ef(l)),0)})(n.arrayValue);case 10:case 11:return(function(a){let s=0;return Es(a.fields,((l,c)=>{s+=l.length+Ef(c)})),s})(n.mapValue);default:throw Ge(13486,{value:n})}}function e0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jg(n){return!!n&&"integerValue"in n}function Iy(n){return!!n&&"arrayValue"in n}function t0(n){return!!n&&"nullValue"in n}function n0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Tf(n){return!!n&&"mapValue"in n}function iO(n){var t,a;return((a=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[zw])==null?void 0:a.stringValue)===Bw}function Yu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Es(n.mapValue.fields,((t,a)=>e.mapValue.fields[t]=Yu(a))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yu(n.arrayValue.values[t]);return e}return{...n}}function aO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!Tf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}setAll(e){let t=Un.emptyPath(),a={},s=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,a,s),a={},s=[],t=d.popLast()}c?a[d.lastSegment()]=Yu(c):s.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,s)}delete(e){const t=this.field(e.popLast());Tf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let s=t.mapValue.fields[e.get(a)];Tf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,a){Es(t,((s,l)=>e[s]=l));for(const s of a)delete e[s]}clone(){return new dr(Yu(this.value))}}function Fw(n){const e=[];return Es(n.fields,((t,a)=>{const s=new Un([t]);if(Tf(a)){const l=Fw(a.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)})),new Cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,a,s,l,c,d){this.key=e,this.documentType=t,this.version=a,this.readTime=s,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new $n(e,0,Xe.min(),Xe.min(),Xe.min(),dr.empty(),0)}static newFoundDocument(e,t,a,s){return new $n(e,1,t,Xe.min(),a,s,0)}static newNoDocument(e,t){return new $n(e,2,t,Xe.min(),Xe.min(),dr.empty(),0)}static newUnknownDocument(e,t){return new $n(e,3,t,Xe.min(),Xe.min(),dr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t){this.position=e,this.inclusive=t}}function r0(n,e,t){let a=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?a=je.comparator(je.fromName(c.referenceValue),t.key):a=bl(c,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function i0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Li(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t="asc"){this.field=e,this.dir=t}}function sO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{}class vn extends qw{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new lO(e,t,a):t==="array-contains"?new hO(e,a):t==="in"?new fO(e,a):t==="not-in"?new dO(e,a):t==="array-contains-any"?new mO(e,a):new vn(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new uO(e,a):new cO(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bl(t,this.value)):t!==null&&gs(this.value)===gs(t)&&this.matchesComparison(bl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hi extends qw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new hi(e,t)}matches(e){return Hw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hw(n){return n.op==="and"}function Gw(n){return oO(n)&&Hw(n)}function oO(n){for(const e of n.filters)if(e instanceof hi)return!1;return!0}function zg(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+Sl(n.value);if(Gw(n))return n.filters.map((e=>zg(e))).join(",");{const e=n.filters.map((t=>zg(t))).join(",");return`${n.op}(${e})`}}function $w(n,e){return n instanceof vn?(function(a,s){return s instanceof vn&&a.op===s.op&&a.field.isEqual(s.field)&&Li(a.value,s.value)})(n,e):n instanceof hi?(function(a,s){return s instanceof hi&&a.op===s.op&&a.filters.length===s.filters.length?a.filters.reduce(((l,c,d)=>l&&$w(c,s.filters[d])),!0):!1})(n,e):void Ge(19439)}function Kw(n){return n instanceof vn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Sl(t.value)}`})(n):n instanceof hi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kw).join(" ,")+"}"})(n):"Filter"}class lO extends vn{constructor(e,t,a){super(e,t,a),this.key=je.fromName(a.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.matchesComparison(t)}}class uO extends vn{constructor(e,t){super(e,"in",t),this.keys=Yw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cO extends vn{constructor(e,t){super(e,"not-in",t),this.keys=Yw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Yw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((a=>je.fromName(a.referenceValue)))}class hO extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Iy(t)&&uc(t.arrayValue,this.value)}}class fO extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uc(this.value.arrayValue,t)}}class dO extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uc(this.value.arrayValue,t)}}class mO extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Iy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>uc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e,t=null,a=[],s=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=s,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function a0(n,e=null,t=[],a=[],s=null,l=null,c=null){return new pO(n,e,t,a,s,l,c)}function Dy(n){const e=Je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>zg(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Ad(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Sl(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Sl(a))).join(",")),e.Te=t}return e.Te}function Ny(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!sO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$w(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!i0(n.startAt,e.startAt)&&i0(n.endAt,e.endAt)}function Bg(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t=null,a=[],s=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=s,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gO(n,e,t,a,s,l,c,d){return new wc(n,e,t,a,s,l,c,d)}function Cd(n){return new wc(n)}function s0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yO(n){return je.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Qw(n){return n.collectionGroup!==null}function Qu(n){const e=Je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new wn(Un.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Kf(l,a))})),t.has(Un.keyField().canonicalString())||e.Ie.push(new Kf(Un.keyField(),a))}return e.Ie}function Oi(n){const e=Je(n);return e.Ee||(e.Ee=_O(e,Qu(n))),e.Ee}function _O(n,e){if(n.limitType==="F")return a0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const l=s.dir==="desc"?"asc":"desc";return new Kf(s.field,l)}));const t=n.endAt?new $f(n.endAt.position,n.endAt.inclusive):null,a=n.startAt?new $f(n.startAt.position,n.startAt.inclusive):null;return a0(n.path,n.collectionGroup,e,n.filters,n.limit,t,a)}}function Fg(n,e){const t=n.filters.concat([e]);return new wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qg(n,e,t){return new wc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Id(n,e){return Ny(Oi(n),Oi(e))&&n.limitType===e.limitType}function Xw(n){return`${Dy(Oi(n))}|lt:${n.limitType}`}function al(n){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((s=>Kw(s))).join(", ")}]`),Ad(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((s=>Sl(s))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((s=>Sl(s))).join(",")),`Target(${a})`})(Oi(n))}; limitType=${n.limitType})`}function Dd(n,e){return e.isFoundDocument()&&(function(a,s){const l=s.key.path;return a.collectionGroup!==null?s.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):je.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(n,e)&&(function(a,s){for(const l of Qu(a))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(a,s){for(const l of a.filters)if(!l.matches(s))return!1;return!0})(n,e)&&(function(a,s){return!(a.startAt&&!(function(c,d,p){const g=r0(c,d,p);return c.inclusive?g<=0:g<0})(a.startAt,Qu(a),s)||a.endAt&&!(function(c,d,p){const g=r0(c,d,p);return c.inclusive?g>=0:g>0})(a.endAt,Qu(a),s))})(n,e)}function vO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ww(n){return(e,t)=>{let a=!1;for(const s of Qu(n)){const l=EO(s,e,t);if(l!==0)return l;a=a||s.field.isKeyField()}return 0}}function EO(n,e,t){const a=n.field.isKeyField()?je.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?bl(p,g):Ge(42886)})(n.field,e,t);switch(n.dir){case"asc":return a;case"desc":return-1*a;default:return Ge(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[s,l]of a)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),s=this.inner[a];if(s===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],e))return a.length===1?delete this.inner[t]:a.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,((t,a)=>{for(const[s,l]of a)e(s,l)}))}isEmpty(){return Vw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new nn(je.comparator);function ma(){return TO}const Jw=new nn(je.comparator);function Bu(...n){let e=Jw;for(const t of n)e=e.insert(t.key,t);return e}function Zw(n){let e=Jw;return n.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function Ws(){return Xu()}function eA(){return Xu()}function Xu(){return new ho((n=>n.toString()),((n,e)=>n.isEqual(e)))}const bO=new nn(je.comparator),SO=new wn(je.comparator);function pt(...n){let e=SO;for(const t of n)e=e.add(t);return e}const wO=new wn(mt);function AO(){return wO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qf(e)?"-0":e}}function tA(n){return{integerValue:""+n}}function RO(n,e){return W2(e)?tA(e):xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function CO(n,e,t){return n instanceof Yf?(function(s,l){const c={fields:{[Lw]:{stringValue:kw},[jw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Cy(l)&&(l=Rd(l)),l&&(c.fields[Uw]=l),{mapValue:c}})(t,e):n instanceof cc?rA(n,e):n instanceof hc?iA(n,e):(function(s,l){const c=nA(s,l),d=o0(c)+o0(s.Ae);return jg(c)&&jg(s.Ae)?tA(d):xy(s.serializer,d)})(n,e)}function IO(n,e,t){return n instanceof cc?rA(n,e):n instanceof hc?iA(n,e):t}function nA(n,e){return n instanceof Qf?(function(a){return jg(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class Yf extends Nd{}class cc extends Nd{constructor(e){super(),this.elements=e}}function rA(n,e){const t=aA(e);for(const a of n.elements)t.some((s=>Li(s,a)))||t.push(a);return{arrayValue:{values:t}}}class hc extends Nd{constructor(e){super(),this.elements=e}}function iA(n,e){let t=aA(e);for(const a of n.elements)t=t.filter((s=>!Li(s,a)));return{arrayValue:{values:t}}}class Qf extends Nd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function o0(n){return hn(n.integerValue||n.doubleValue)}function aA(n){return Iy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function DO(n,e){return n.field.isEqual(e.field)&&(function(a,s){return a instanceof cc&&s instanceof cc||a instanceof hc&&s instanceof hc?Tl(a.elements,s.elements,Li):a instanceof Qf&&s instanceof Qf?Li(a.Ae,s.Ae):a instanceof Yf&&s instanceof Yf})(n.transform,e.transform)}class NO{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xd{}function sA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Oy(n.key,Nr.none()):new Ac(n.key,n.data,Nr.none());{const t=n.data,a=dr.empty();let s=new wn(Un.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?a.delete(l):a.set(l,c),s=s.add(l)}return new Ts(n.key,a,new Cr(s.toArray()),Nr.none())}}function xO(n,e,t){n instanceof Ac?(function(s,l,c){const d=s.value.clone(),p=u0(s.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ts?(function(s,l,c){if(!bf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const d=u0(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(oA(s)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Wu(n,e,t,a){return n instanceof Ac?(function(l,c,d,p){if(!bf(l.precondition,c))return d;const g=l.value.clone(),_=c0(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,a):n instanceof Ts?(function(l,c,d,p){if(!bf(l.precondition,c))return d;const g=c0(l.fieldTransforms,p,c),_=c.data;return _.setAll(oA(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,a):(function(l,c,d){return bf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function OO(n,e){let t=null;for(const a of n.fieldTransforms){const s=e.data.field(a.field),l=nA(a.transform,s||null);l!=null&&(t===null&&(t=dr.empty()),t.set(a.field,l))}return t||null}function l0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(a,s){return a===void 0&&s===void 0||!(!a||!s)&&Tl(a,s,((l,c)=>DO(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ac extends xd{constructor(e,t,a,s=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ts extends xd{constructor(e,t,a,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function oA(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=n.data.field(t);e.set(t,a)}})),e}function u0(n,e,t){const a=new Map;At(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,d=e.data.field(l.field);a.set(l.field,IO(c,d,t[s]))}return a}function c0(n,e,t){const a=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);a.set(s.field,CO(l,c,e))}return a}class Oy extends xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MO extends xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t,a,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=s}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&xO(l,e,a[s])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Wu(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Wu(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=eA();return this.mutations.forEach((s=>{const l=e.get(s.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(s.key)?null:d;const p=sA(c,d);p!==null&&a.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(Xe.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pt())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,((t,a)=>l0(t,a)))&&Tl(this.baseMutations,e.baseMutations,((t,a)=>l0(t,a)))}}class My{constructor(e,t,a,s){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=s}static from(e,t,a){At(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let s=(function(){return bO})();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,a[c].version);return new My(e,t,a,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,_t;function LO(n){switch(n){case ue.OK:return Ge(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return Ge(15467,{code:n})}}function lA(n){if(n===void 0)return da("GRPC error has no .code"),ue.UNKNOWN;switch(n){case _n.OK:return ue.OK;case _n.CANCELLED:return ue.CANCELLED;case _n.UNKNOWN:return ue.UNKNOWN;case _n.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case _n.INTERNAL:return ue.INTERNAL;case _n.UNAVAILABLE:return ue.UNAVAILABLE;case _n.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case _n.NOT_FOUND:return ue.NOT_FOUND;case _n.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case _n.ABORTED:return ue.ABORTED;case _n.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case _n.DATA_LOSS:return ue.DATA_LOSS;default:return Ge(39323,{code:n})}}(_t=_n||(_n={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=new cs([4294967295,4294967295],0);function h0(n){const e=UO().encode(n),t=new Sw;return t.update(e),new Uint8Array(t.digest())}function f0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new cs([t,a],0),new cs([s,l],0)]}class Vy{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Fu(`Invalid padding: ${t}`);if(a<0)throw new Fu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Fu(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Fu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=cs.fromNumber(this.ge)}ye(e,t,a){let s=e.add(t.multiply(cs.fromNumber(a)));return s.compare(jO)===1&&(s=new cs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=h0(e),[a,s]=f0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);if(!this.we(c))return!1}return!0}static create(e,t,a){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Vy(l,s,t);return a.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=h0(e),[a,s]=f0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(a,s,l);this.be(c)}}be(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Fu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,a,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const s=new Map;return s.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Od(Xe.min(),s,new nn(mt),ma(),pt())}}class Rc{constructor(e,t,a,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Rc(a,t,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,a,s){this.Se=e,this.removedTargetIds=t,this.key=a,this.De=s}}class uA{constructor(e,t){this.targetId=e,this.Ce=t}}class cA{constructor(e,t,a=jn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=s}}class d0{constructor(){this.ve=0,this.Fe=m0(),this.Me=jn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pt(),t=pt(),a=pt();return this.Fe.forEach(((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:a=a.add(s);break;default:Ge(38017,{changeType:l})}})),new Rc(this.Me,this.xe,e,t,a)}Ke(){this.Oe=!1,this.Fe=m0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class zO{constructor(e){this.Ge=e,this.ze=new Map,this.je=ma(),this.He=cf(),this.Je=cf(),this.Ze=new nn(mt)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,a=e.Ce.count,s=this.ot(t);if(s){const l=s.target;if(Bg(l))if(a===0){const c=new je(l.path);this.et(t,c,$n.newNoDocument(c,Xe.min()))}else At(a===1,20013,{expectedCount:a});else{const c=this._t(t);if(c!==a){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:s=0},hashCount:l=0}=t;let c,d;try{c=ps(a).toUint8Array()}catch(p){if(p instanceof Pw)return El("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Vy(c,s,l)}catch(p){return El(p instanceof Fu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let s=0;return a.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Bg(d.target)){const p=new je(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,$n.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let a=pt();this.Je.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(a=a.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const s=new Od(e,t,this.Ze,this.je,a);return this.je=ma(),this.He=cf(),this.Je=cf(),this.Ze=new nn(mt),s}Ye(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,a),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new d0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new wn(mt),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new wn(mt),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new d0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cf(){return new nn(je.comparator)}function m0(){return new nn(je.comparator)}const BO={asc:"ASCENDING",desc:"DESCENDING"},FO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qO={and:"AND",or:"OR"};class HO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hg(n,e){return n.useProto3Json||Ad(e)?e:{value:e}}function Xf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GO(n,e){return Xf(n,e.toTimestamp())}function Mi(n){return At(!!n,49232),Xe.fromTimestamp((function(t){const a=ms(t);return new $t(a.seconds,a.nanos)})(n))}function Py(n,e){return Gg(n,e).canonicalString()}function Gg(n,e){const t=(function(s){return new Ft(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function fA(n){const e=Ft.fromString(n);return At(yA(e),10190,{key:e.toString()}),e}function $g(n,e){return Py(n.databaseId,e.path)}function mg(n,e){const t=fA(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(mA(t))}function dA(n,e){return Py(n.databaseId,e)}function $O(n){const e=fA(n);return e.length===4?Ft.emptyPath():mA(e)}function Kg(n){return new Ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function mA(n){return At(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function p0(n,e,t){return{name:$g(n,e),fields:t.value.mapValue.fields}}function KO(n,e){let t;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(At(_===void 0||typeof _=="string",58123),jn.fromBase64String(_||"")):(At(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),jn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?ue.UNKNOWN:lA(g.code);return new Re(_,g.message||"")})(c);t=new cA(a,s,l,d||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const s=mg(n,a.document.name),l=Mi(a.document.updateTime),c=a.document.createTime?Mi(a.document.createTime):Xe.min(),d=new dr({mapValue:{fields:a.document.fields}}),p=$n.newFoundDocument(s,l,c,d),g=a.targetIds||[],_=a.removedTargetIds||[];t=new Sf(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const s=mg(n,a.document),l=a.readTime?Mi(a.readTime):Xe.min(),c=$n.newNoDocument(s,l),d=a.removedTargetIds||[];t=new Sf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const s=mg(n,a.document),l=a.removedTargetIds||[];t=new Sf([],l,s,null)}else{if(!("filter"in e))return Ge(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:s=0,unchangedNames:l}=a,c=new kO(s,l),d=a.targetId;t=new uA(d,c)}}return t}function YO(n,e){let t;if(e instanceof Ac)t={update:p0(n,e.key,e.value)};else if(e instanceof Oy)t={delete:$g(n,e.key)};else if(e instanceof Ts)t={update:p0(n,e.key,e.data),updateMask:rM(e.fieldMask)};else{if(!(e instanceof MO))return Ge(16599,{dt:e.type});t={verify:$g(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,c){const d=c.transform;if(d instanceof Yf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof cc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Qf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ge(20930,{transform:c.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(s,l){return l.updateTime!==void 0?{updateTime:GO(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ge(27497)})(n,e.precondition)),t}function QO(n,e){return n&&n.length>0?(At(e!==void 0,14353),n.map((t=>(function(s,l){let c=s.updateTime?Mi(s.updateTime):Mi(l);return c.isEqual(Xe.min())&&(c=Mi(l)),new NO(c,s.transformResults||[])})(t,e)))):[]}function XO(n,e){return{documents:[dA(n,e.path)]}}function WO(n,e){const t={structuredQuery:{}},a=e.path;let s;e.collectionGroup!==null?(s=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=dA(n,s);const l=(function(g){if(g.length!==0)return gA(hi.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(S){return{field:sl(S.field),direction:eM(S.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Hg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:s}}function JO(n){let e=$O(n.parent);const t=n.structuredQuery,a=t.from?t.from.length:0;let s=null;if(a>0){At(a===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const S=pA(E);return S instanceof hi&&Gw(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(U){return new Kf(ol(U.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let S;return S=typeof E=="object"?E.value:E,Ad(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,R=E.values||[];return new $f(R,S)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const S=!E.before,R=E.values||[];return new $f(R,S)})(t.endAt)),gO(e,s,c,l,d,"F",p,g)}function ZO(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=ol(t.unaryFilter.field);return vn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const s=ol(t.unaryFilter.field);return vn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=ol(t.unaryFilter.field);return vn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=ol(t.unaryFilter.field);return vn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(n):n.fieldFilter!==void 0?(function(t){return vn.create(ol(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return hi.create(t.compositeFilter.filters.map((a=>pA(a))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(t.compositeFilter.op))})(n):Ge(30097,{filter:n})}function eM(n){return BO[n]}function tM(n){return FO[n]}function nM(n){return qO[n]}function sl(n){return{fieldPath:n.canonicalString()}}function ol(n){return Un.fromServerFormat(n.fieldPath)}function gA(n){return n instanceof vn?(function(t){if(t.op==="=="){if(n0(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NAN"}};if(t0(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n0(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NAN"}};if(t0(t.value))return{unaryFilter:{field:sl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sl(t.field),op:tM(t.op),value:t.value}}})(n):n instanceof hi?(function(t){const a=t.getFilters().map((s=>gA(s)));return a.length===1?a[0]:{compositeFilter:{op:nM(t.op),filters:a}}})(n):Ge(54877,{filter:n})}function rM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function _A(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t,a,s,l=Xe.min(),c=Xe.min(),d=jn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new as(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new as(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.yt=e}}function aM(n){const e=JO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(){this.Sn=new oM}addToCollectionParentIndex(e,t){return this.Sn.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ds.min())}updateCollectionGroup(e,t,a){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class oM{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t]||new wn(Ft.comparator),l=!s.has(a);return this.index[t]=s.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),s=this.index[t];return s&&s.has(a)}getEntries(e){return(this.index[e]||new wn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vA=41943040;class fr{static withCacheSize(e){return new fr(e,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fr.DEFAULT_COLLECTION_PERCENTILE=10,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fr.DEFAULT=new fr(vA,fr.DEFAULT_COLLECTION_PERCENTILE,fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fr.DISABLED=new fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wl(0)}static ar(){return new wl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="LruGarbageCollector",lM=1048576;function _0([n,e],[t,a]){const s=mt(n,t);return s===0?mt(e,a):s}class uM{constructor(e){this.Pr=e,this.buffer=new wn(_0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();_0(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cM{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(y0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){kl(t)?Ie(y0,"Ignoring IndexedDB error during garbage collection: ",t):await Pl(t)}await this.Ar(3e5)}))}}class hM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return de.resolve(wd.ce);const a=new uM(t);return this.Vr.forEachTarget(e,(s=>a.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>a.Er(s))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.Vr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(g0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),g0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let a,s,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(a=E,d=Date.now(),this.removeTargets(e,a,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(g=Date.now(),il()<=dt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E}))))}}function fM(n,e){return new hM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.changes=new ho((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?de.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t,a,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=s}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(a=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(a!==null&&Wu(a.mutation,s,Cr.empty(),$t.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,pt()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=pt()){const s=Ws();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,a).next((l=>{let c=Bu();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const a=Ws();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,pt())))}populateOverlays(e,t,a){const s=[];return a.forEach((l=>{t.has(l)||s.push(l)})),this.documentOverlayCache.getOverlays(e,s).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,a,s){let l=ma();const c=Xu(),d=(function(){return Xu()})();return t.forEach(((p,g)=>{const _=a.get(g.key);s.has(g.key)&&(_===void 0||_.mutation instanceof Ts)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Wu(_.mutation,g,_.mutation.getFieldMask(),$t.now())):c.set(g.key,Cr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new mM(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const a=Xu();let s=new nn(((c,d)=>c-d)),l=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=a.get(p)||Cr.empty();_=d.applyToLocalView(g,_),a.set(p,_);const E=(s.get(d.batchId)||pt()).add(p);s=s.insert(d.batchId,E)}))})).next((()=>{const c=[],d=s.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,E=eA();_.forEach((S=>{if(!l.has(S)){const R=sA(t.get(S),a.get(S));R!==null&&E.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return de.waitFor(c)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,s){return yO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,s):this.getDocumentsMatchingCollectionQuery(e,t,a,s)}getNextDocuments(e,t,a,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,s).next((l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,s-l.size):de.resolve(Ws());let d=sc,p=l;return c.next((g=>de.forEach(g,((_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?de.resolve():this.remoteDocumentCache.getEntry(e,_).next((S=>{p=p.insert(_,S)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,pt()))).next((_=>({batchId:d,changes:Zw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new je(t)).next((a=>{let s=Bu();return a.isFoundDocument()&&(s=s.insert(a.key,a)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,s){const l=t.collectionGroup;let c=Bu();return this.indexManager.getCollectionParents(e,l).next((d=>de.forEach(d,(p=>{const g=(function(E,S){return new wc(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,a,s).next((_=>{_.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,a,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,s)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,$n.newInvalidDocument(_)))}));let d=Bu();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&Wu(_.mutation,g,Cr.empty(),$t.now()),Dd(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return de.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Mi(s.createTime)}})(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:aM(s.bundledQuery),readTime:Mi(s.readTime)}})(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(){this.overlays=new nn(je.comparator),this.Lr=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const a=Ws();return de.forEach(t,(s=>this.getOverlay(e,s).next((l=>{l!==null&&a.set(s,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((s,l)=>{this.bt(e,t,l)})),de.resolve()}removeOverlaysForBatchId(e,t,a){const s=this.Lr.get(a);return s!==void 0&&(s.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(a)),de.resolve()}getOverlaysForCollection(e,t,a){const s=Ws(),l=t.length+1,c=new je(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>a&&s.set(p.getKey(),p)}return de.resolve(s)}getOverlaysForCollectionGroup(e,t,a,s){let l=new nn(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>a){let _=l.get(g.largestBatchId);_===null&&(_=Ws(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ws(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=s)););return de.resolve(d)}bt(e,t,a){const s=this.overlays.get(a.key);if(s!==null){const c=this.Lr.get(s.largestBatchId).delete(a.key);this.Lr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(a.key,new PO(t,a));let l=this.Lr.get(t);l===void 0&&(l=pt(),this.Lr.set(t,l)),this.Lr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(){this.sessionToken=jn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this.kr=new wn(Nn.Kr),this.qr=new wn(Nn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const a=new Nn(e,t);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Wr(new Nn(e,t))}Qr(e,t){e.forEach((a=>this.removeReference(a,t)))}Gr(e){const t=new je(new Ft([])),a=new Nn(t,e),s=new Nn(t,e+1),l=[];return this.qr.forEachInRange([a,s],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new je(new Ft([])),a=new Nn(t,e),s=new Nn(t,e+1);let l=pt();return this.qr.forEachInRange([a,s],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Nn(e,0),a=this.kr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class Nn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return je.comparator(e.key,t.key)||mt(e.Hr,t.Hr)}static Ur(e,t){return mt(e.Hr,t.Hr)||je.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new wn(Nn.Kr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,s){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new VO(l,t,a,s);this.mutationQueue.push(c);for(const d of s)this.Jr=this.Jr.add(new Nn(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,t){return de.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,s=this.Xr(a),l=s<0?0:s;return de.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?Ry:this.Yn-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Nn(t,0),s=new Nn(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([a,s],(c=>{const d=this.Zr(c.Hr);l.push(d)})),de.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new wn(mt);return t.forEach((s=>{const l=new Nn(s,0),c=new Nn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(d=>{a=a.add(d.Hr)}))})),de.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,s=a.length+1;let l=a;je.isDocumentKey(l)||(l=l.child(""));const c=new Nn(new je(l),0);let d=new wn(mt);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===s&&(d=d.add(p.Hr)),!0)}),c),de.resolve(this.Yr(d))}Yr(e){const t=[];return e.forEach((a=>{const s=this.Zr(a);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){At(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return de.forEach(t.mutations,(s=>{const l=new Nn(s.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,t){const a=new Nn(t,0),s=this.Jr.firstAfterOrEqual(a);return de.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e){this.ti=e,this.docs=(function(){return new nn(je.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,s=this.docs.get(a),l=s?s.size:0,c=this.ti(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return de.resolve(a?a.document.mutableCopy():$n.newInvalidDocument(t))}getEntries(e,t){let a=ma();return t.forEach((s=>{const l=this.docs.get(s);a=a.insert(s,l?l.document.mutableCopy():$n.newInvalidDocument(s))})),de.resolve(a)}getDocumentsMatchingQuery(e,t,a,s){let l=ma();const c=t.path,d=new je(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||K2($2(_),a)<=0||(s.has(_.key)||Dd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return de.resolve(l)}getAllFromCollectionGroup(e,t,a,s){Ge(9500)}ni(e,t){return de.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new TM(this)}getSize(e){return de.resolve(this.size)}}class TM extends dM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(a)})),de.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e){this.persistence=e,this.ri=new ho((t=>Dy(t)),Ny),this.lastRemoteSnapshotVersion=Xe.min(),this.highestTargetId=0,this.ii=0,this.si=new ky,this.targetCount=0,this.oi=wl._r()}forEachTarget(e,t){return this.ri.forEach(((a,s)=>t(s))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.ii&&(this.ii=t),de.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new wl(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.lr(t),de.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,a){let s=0;const l=[];return this.ri.forEach(((c,d)=>{d.sequenceNumber<=t&&a.get(d.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),s++)})),de.waitFor(l).next((()=>s))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const a=this.ri.get(t)||null;return de.resolve(a)}addMatchingKeys(e,t,a){return this.si.$r(t,a),de.resolve()}removeMatchingKeys(e,t,a){this.si.Qr(t,a);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach((c=>{l.push(s.markPotentiallyOrphaned(e,c))})),de.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const a=this.si.jr(t);return de.resolve(a)}containsKey(e,t){return de.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t){this._i={},this.overlays={},this.ai=new wd(0),this.ui=!1,this.ui=!0,this.ci=new _M,this.referenceDelegate=e(this),this.li=new bM(this),this.indexManager=new sM,this.remoteDocumentCache=(function(s){return new EM(s)})((a=>this.referenceDelegate.hi(a))),this.serializer=new iM(t),this.Pi=new gM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this._i[e.toKey()];return a||(a=new vM(t,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,a){Ie("MemoryPersistence","Starting transaction:",e);const s=new SM(this.ai.next());return this.referenceDelegate.Ti(),a(s).next((l=>this.referenceDelegate.Ii(s).next((()=>l)))).toPromise().then((l=>(s.raiseOnCommittedEvent(),l)))}Ei(e,t){return de.or(Object.values(this._i).map((a=>()=>a.containsKey(e,t))))}}class SM extends Q2{constructor(e){super(),this.currentSequenceNumber=e}}class Ly{constructor(e){this.persistence=e,this.Ri=new ky,this.Ai=null}static Vi(e){return new Ly(e)}get di(){if(this.Ai)return this.Ai;throw Ge(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.di.delete(a.toString()),de.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.di.add(a.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),de.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((l=>this.di.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.di,(a=>{const s=je.fromPath(a);return this.mi(e,s).next((l=>{l||t.removeEntry(s,Xe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((a=>{a?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return de.or([()=>de.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Wf{constructor(e,t){this.persistence=e,this.fi=new ho((a=>J2(a.path)),((a,s)=>a.isEqual(s))),this.garbageCollector=fM(this,t)}static Vi(e,t){return new Wf(e,t)}Ti(){}Ii(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((s=>a+s))))}pr(e){let t=0;return this.mr(e,(a=>{t++})).next((()=>t))}mr(e,t){return de.forEach(this.fi,((a,s)=>this.wr(e,a,s).next((l=>l?de.resolve():t(s)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ni(e,(c=>this.wr(e,c,t).next((d=>{d||(a++,l.removeEntry(c,Xe.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),de.resolve()}removeReference(e,t,a){return this.fi.set(a,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),de.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}wr(e,t,a){return de.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return de.resolve(s!==void 0&&s>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,t,a,s){this.targetId=e,this.fromCache=t,this.Ts=a,this.Is=s}static Es(e,t){let a=pt(),s=pt();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Uy(e,t.fromCache,a,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return px()?8:X2(Kn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,s){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,s,a).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new wM;return this.ys(e,t,c).next((d=>{if(l.result=d,this.As)return this.ws(e,t,c,d.size)}))})).next((()=>l.result))}ws(e,t,a,s){return a.documentReadCount<this.Vs?(il()<=dt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),de.resolve()):(il()<=dt.DEBUG&&Ie("QueryEngine","Query:",al(t),"scans",a.documentReadCount,"local documents and returns",s,"documents as results."),a.documentReadCount>this.ds*s?(il()<=dt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Oi(t))):de.resolve())}gs(e,t){if(s0(t))return de.resolve(null);let a=Oi(t);return this.indexManager.getIndexType(e,a).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=qg(t,null,"F"),a=Oi(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const c=pt(...l);return this.fs.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(t,d);return this.Ss(t,g,c,p.readTime)?this.gs(e,qg(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,a,s){return s0(t)||s.isEqual(Xe.min())?de.resolve(null):this.fs.getDocuments(e,a).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,a,s)?de.resolve(null):(il()<=dt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),al(t)),this.Ds(e,c,t,G2(s,sc)).next((d=>d)))}))}bs(e,t){let a=new wn(Ww(e));return t.forEach(((s,l)=>{Dd(e,l)&&(a=a.add(l))})),a}Ss(e,t,a,s){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ys(e,t,a){return il()<=dt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",al(t)),this.fs.getDocumentsMatchingQuery(e,t,ds.min(),a)}Ds(e,t,a,s){return this.fs.getDocumentsMatchingQuery(e,a,s).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="LocalStore",RM=3e8;class CM{constructor(e,t,a,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new nn(mt),this.Fs=new ho((l=>Dy(l)),Ny),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pM(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function IM(n,e,t,a){return new CM(n,e,t,a)}async function TA(n,e){const t=Je(n);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let s;return t.mutationQueue.getAllMutationBatches(a).next((l=>(s=l,t.Os(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const c=[],d=[];let p=pt();for(const g of s){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function DM(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const s=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const E=g.batch,S=E.keys();let R=de.resolve();return S.forEach((U=>{R=R.next((()=>_.getEntry(p,U))).next((B=>{const V=g.docVersions.get(U);At(V!==null,48541),B.version.compareTo(V)<0&&(E.applyToRemoteDocument(B,g),B.isValidDocument()&&(B.setReadTime(g.commitVersion),_.addEntry(B)))}))})),R.next((()=>d.mutationQueue.removeMutationBatch(p,E)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(d){let p=pt();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,s)))}))}function bA(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function NM(n,e){const t=Je(n),a=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const d=[];e.targetChanges.forEach(((_,E)=>{const S=s.get(E);if(!S)return;d.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?R=R.withResumeToken(jn.EMPTY_BYTE_STRING,Xe.min()).withLastLimboFreeSnapshotVersion(Xe.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,a)),s=s.insert(E,R),(function(B,V,F){return B.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=RM?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(S,R,_)&&d.push(t.li.updateTargetData(l,R))}));let p=ma(),g=pt();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(xM(l,c,e.documentUpdates).next((_=>{p=_.Bs,g=_.Ls}))),!a.isEqual(Xe.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,a)));d.push(_)}return de.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=s,l)))}function xM(n,e,t){let a=pt(),s=pt();return t.forEach((l=>a=a.add(l))),e.getEntries(n,a).next((l=>{let c=ma();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(s=s.add(d)),p.isNoDocument()&&p.version.isEqual(Xe.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):Ie(jy,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:s}}))}function OM(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Ry),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function MM(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let s;return t.li.getTargetData(a,e).next((l=>l?(s=l,de.resolve(s)):t.li.allocateTargetId(a).next((c=>(s=new as(e,c,"TargetPurposeListen",a.currentSequenceNumber),t.li.addTargetData(a,s).next((()=>s)))))))})).then((a=>{const s=t.vs.get(a.targetId);return(s===null||a.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(a.targetId,a),t.Fs.set(e,a.targetId)),a}))}async function Yg(n,e,t){const a=Je(n),s=a.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(c=>a.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!kl(c))throw c;Ie(jy,`Failed to update sequence numbers for target ${e}: ${c}`)}a.vs=a.vs.remove(e),a.Fs.delete(s.target)}function v0(n,e,t){const a=Je(n);let s=Xe.min(),l=pt();return a.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const E=Je(p),S=E.Fs.get(_);return S!==void 0?de.resolve(E.vs.get(S)):E.li.getTargetData(g,_)})(a,c,Oi(e)).next((d=>{if(d)return s=d.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(c,e,t?s:Xe.min(),t?l:pt()))).next((d=>(VM(a,vO(e),d),{documents:d,ks:l})))))}function VM(n,e,t){let a=n.Ms.get(e)||Xe.min();t.forEach(((s,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),n.Ms.set(e,a)}class E0{constructor(){this.activeTargetIds=AO()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PM{constructor(){this.vo=new E0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,a){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new E0,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="ConnectivityMonitor";class b0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(T0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(T0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function Qg(){return hf===null?hf=(function(){return 268435456+Math.round(2147483648*Math.random())})():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",LM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class UM{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${a}/databases/${s}`,this.$o=this.databaseId.database===Hf?`project_id=${a}`:`project_id=${a}&database_id=${s}`}Wo(e,t,a,s,l){const c=Qg(),d=this.Qo(e,t.toUriEncodedString());Ie(pg,`Sending RPC '${e}' ${c}:`,d,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,s,l);const{host:g}=new URL(d),_=Ol(g);return this.zo(e,d,p,a,_).then((E=>(Ie(pg,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw El(pg,`RPC '${e}' ${c} failed with error: `,E,"url: ",d,"request:",a),E}))}jo(e,t,a,s,l,c){return this.Wo(e,t,a,s,l)}Go(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,l)=>e[l]=s)),a&&a.headers.forEach(((s,l)=>e[l]=s))}Qo(e,t){const a=LM[e];let s=`${this.qo}/v1/${t}:${a}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection",Lu=(n,e,t)=>{n.listen(e,(a=>{try{t(a)}catch(s){setTimeout((()=>{throw s}),0)}}))};class fl extends UM{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!fl.c_){const e=Cw();Lu(e,Rw.STAT_EVENT,(t=>{t.stat===kg.PROXY?Ie(qn,"STAT_EVENT: detected buffering proxy"):t.stat===kg.NOPROXY&&Ie(qn,"STAT_EVENT: detected no buffering proxy")})),fl.c_=!0}}zo(e,t,a,s,l){const c=Qg();return new Promise(((d,p)=>{const g=new ww;g.setWithCredentials(!0),g.listenOnce(Aw.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case vf.NO_ERROR:const E=g.getResponseJson();Ie(qn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),d(E);break;case vf.TIMEOUT:Ie(qn,`RPC '${e}' ${c} timed out`),p(new Re(ue.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const S=g.getStatus();if(Ie(qn,`RPC '${e}' ${c} failed with status:`,S,"response text:",g.getResponseText()),S>0){let R=g.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R==null?void 0:R.error;if(U&&U.status&&U.message){const B=(function(F){const H=F.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(H)>=0?H:ue.UNKNOWN})(U.status);p(new Re(B,U.message))}else p(new Re(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new Re(ue.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ie(qn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(s);Ie(qn,`RPC '${e}' ${c} sending request:`,s),g.send(t,"POST",_,a,15)}))}T_(e,t,a){const s=Qg(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Go(d.initMessageHeaders,t,a),d.encodeInitMessageHeaders=!0;const g=l.join("");Ie(qn,`Creating RPC '${e}' stream ${s}: ${g}`,d);const _=c.createWebChannel(g,d);this.I_(_);let E=!1,S=!1;const R=new jM({Ho:U=>{S?Ie(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,U):(E||(Ie(qn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),Ie(qn,`RPC '${e}' stream ${s} sending:`,U),_.send(U))},Jo:()=>_.close()});return Lu(_,zu.EventType.OPEN,(()=>{S||(Ie(qn,`RPC '${e}' stream ${s} transport opened.`),R.i_())})),Lu(_,zu.EventType.CLOSE,(()=>{S||(S=!0,Ie(qn,`RPC '${e}' stream ${s} transport closed`),R.o_(),this.E_(_))})),Lu(_,zu.EventType.ERROR,(U=>{S||(S=!0,El(qn,`RPC '${e}' stream ${s} transport errored. Name:`,U.name,"Message:",U.message),R.o_(new Re(ue.UNAVAILABLE,"The operation could not be completed")))})),Lu(_,zu.EventType.MESSAGE,(U=>{var B;if(!S){const V=U.data[0];At(!!V,16349);const F=V,H=(F==null?void 0:F.error)||((B=F[0])==null?void 0:B.error);if(H){Ie(qn,`RPC '${e}' stream ${s} received error:`,H);const q=H.status;let Q=(function(b){const w=_n[b];if(w!==void 0)return lA(w)})(q),re=H.message;Q===void 0&&(Q=ue.INTERNAL,re="Unknown error status: "+q+" with message "+H.message),S=!0,R.o_(new Re(Q,re)),_.close()}else Ie(qn,`RPC '${e}' stream ${s} received:`,V),R.__(V)}})),fl.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,a){super.Go(e,t,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Iw()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(n){return new fl(n)}function gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(n){return new HO(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fl.c_=!1;class SA{constructor(e,t,a=1e3,s=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=a,this.A_=s,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-a);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="PersistentStream";class wA{constructor(e,t,a,s,l,c,d,p){this.Ci=e,this.b_=a,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new SA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(da(t.toString()),da("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,s])=>{this.D_===t&&this.G_(a,s)}),(a=>{e((()=>{const s=new Re(ue.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(s)}))}))}G_(e,t){const a=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{a((()=>this.z_(s)))})),this.stream.onMessage((s=>{a((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(S0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ie(S0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class BM extends wA{constructor(e,t,a,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KO(this.serializer,e),a=(function(l){if(!("targetChange"in l))return Xe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Xe.min():c.readTime?Mi(c.readTime):Xe.min()})(e);return this.listener.J_(t,a)}Z_(e){const t={};t.database=Kg(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Bg(p)?{documents:XO(l,p)}:{query:WO(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=hA(l,c.resumeToken);const g=Hg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Xe.min())>0){d.readTime=Xf(l,c.snapshotVersion.toTimestamp());const g=Hg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const a=ZO(this.serializer,e);a&&(t.labels=a),this.K_(t)}X_(e){const t={};t.database=Kg(this.serializer),t.removeTarget=e,this.K_(t)}}class FM extends wA{constructor(e,t,a,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,s,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return At(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,At(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){At(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=QO(e.writeResults,e.commitTime),a=Mi(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=Kg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>YO(this.serializer,a)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{}class HM extends qM{constructor(e,t,a,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Gg(t,a),s,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ue.UNKNOWN,l.toString())}))}jo(e,t,a,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.jo(e,Gg(t,a),s,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Re(ue.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function GM(n,e,t,a){return new HM(n,e,t,a)}class $M{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(da(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class KM{constructor(e,t,a,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{a.enqueueAndForget((async()=>{fo(this)&&(Ie(so,"Restarting streams for network reachability change."),await(async function(p){const g=Je(p);g.Ea.add(4),await Cc(g),g.Va.set("Unknown"),g.Ea.delete(4),await Vd(g)})(this))}))})),this.Va=new $M(a,s)}}async function Vd(n){if(fo(n))for(const e of n.Ra)await e(!0)}async function Cc(n){for(const e of n.Ra)await e(!1)}function AA(n,e){const t=Je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),qy(t)?Fy(t):Ll(t).O_()&&By(t,e))}function zy(n,e){const t=Je(n),a=Ll(t);t.Ia.delete(e),a.O_()&&RA(t,e),t.Ia.size===0&&(a.O_()?a.L_():fo(t)&&t.Va.set("Unknown"))}function By(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ll(n).Z_(e)}function RA(n,e){n.da.$e(e),Ll(n).X_(e)}function Fy(n){n.da=new zO({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ll(n).start(),n.Va.ua()}function qy(n){return fo(n)&&!Ll(n).x_()&&n.Ia.size>0}function fo(n){return Je(n).Ea.size===0}function CA(n){n.da=void 0}async function YM(n){n.Va.set("Online")}async function QM(n){n.Ia.forEach(((e,t)=>{By(n,e)}))}async function XM(n,e){CA(n),qy(n)?(n.Va.ha(e),Fy(n)):n.Va.set("Unknown")}async function WM(n,e,t){if(n.Va.set("Online"),e instanceof cA&&e.state===2&&e.cause)try{await(async function(s,l){const c=l.cause;for(const d of l.targetIds)s.Ia.has(d)&&(await s.remoteSyncer.rejectListen(d,c),s.Ia.delete(d),s.da.removeTarget(d))})(n,e)}catch(a){Ie(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Jf(n,a)}else if(e instanceof Sf?n.da.Xe(e):e instanceof uA?n.da.st(e):n.da.tt(e),!t.isEqual(Xe.min()))try{const a=await bA(n.localStore);t.compareTo(a)>=0&&await(function(l,c){const d=l.da.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(jn.EMPTY_BYTE_STRING,_.snapshotVersion)),RA(l,p);const E=new as(_.target,p,g,_.sequenceNumber);By(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(a){Ie(so,"Failed to raise snapshot:",a),await Jf(n,a)}}async function Jf(n,e,t){if(!kl(e))throw e;n.Ea.add(1),await Cc(n),n.Va.set("Offline"),t||(t=()=>bA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(so,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Vd(n)}))}function IA(n,e){return e().catch((t=>Jf(n,t,e)))}async function Pd(n){const e=Je(n),t=ys(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ry;for(;JM(e);)try{const s=await OM(e.localStore,a);if(s===null){e.Ta.length===0&&t.L_();break}a=s.batchId,ZM(e,s)}catch(s){await Jf(e,s)}DA(e)&&NA(e)}function JM(n){return fo(n)&&n.Ta.length<10}function ZM(n,e){n.Ta.push(e);const t=ys(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function DA(n){return fo(n)&&!ys(n).x_()&&n.Ta.length>0}function NA(n){ys(n).start()}async function eV(n){ys(n).ra()}async function tV(n){const e=ys(n);for(const t of n.Ta)e.ea(t.mutations)}async function nV(n,e,t){const a=n.Ta.shift(),s=My.from(a,e,t);await IA(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Pd(n)}async function rV(n,e){e&&ys(n).Y_&&await(async function(a,s){if((function(c){return LO(c)&&c!==ue.ABORTED})(s.code)){const l=a.Ta.shift();ys(a).B_(),await IA(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,s))),await Pd(a)}})(n,e),DA(n)&&NA(n)}async function w0(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ie(so,"RemoteStore received new credentials");const a=fo(t);t.Ea.add(3),await Cc(t),a&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Vd(t)}async function iV(n,e){const t=Je(n);e?(t.Ea.delete(2),await Vd(t)):e||(t.Ea.add(2),await Cc(t),t.Va.set("Unknown"))}function Ll(n){return n.ma||(n.ma=(function(t,a,s){const l=Je(t);return l.sa(),new BM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:YM.bind(null,n),Yo:QM.bind(null,n),t_:XM.bind(null,n),J_:WM.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),qy(n)?Fy(n):n.Va.set("Unknown")):(await n.ma.stop(),CA(n))}))),n.ma}function ys(n){return n.fa||(n.fa=(function(t,a,s){const l=Je(t);return l.sa(),new FM(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eV.bind(null,n),t_:rV.bind(null,n),ta:tV.bind(null,n),na:nV.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Pd(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(so,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t,a,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=s,this.removalCallback=l,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,s,l){const c=Date.now()+a,d=new Hy(e,t,c,s,l);return d.start(a),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Re(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gy(n,e){if(da("AsyncQueue",`${e}: ${n}`),kl(n))return new Re(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{static emptySet(e){return new dl(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||je.comparator(t.key,a.key):(t,a)=>je.comparator(t.key,a.key),this.keyedMap=Bu(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=a.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new dl;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.ga=new nn(je.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ge(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Al{constructor(e,t,a,s,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,a,s,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Al(e,t,dl.emptySet(t),c,a,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==a[s].type||!t[s].doc.isEqual(a[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class sV{constructor(){this.queries=R0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const s=Je(t),l=s.queries;s.queries=R0(),l.forEach(((c,d)=>{for(const p of d.ba)p.onError(a)}))})(this,new Re(ue.ABORTED,"Firestore shutting down"))}}function R0(){return new ho((n=>Xw(n)),Id)}async function $y(n,e){const t=Je(n);let a=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.Da()&&(a=2):(l=new aV,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(s,!0);break;case 1:l.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const d=Gy(c,`Initialization of query '${al(e.query)}' failed`);return void e.onError(d)}t.queries.set(s,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Yy(t)}async function Ky(n,e){const t=Je(n),a=e.query;let s=3;const l=t.queries.get(a);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?s=e.Da()?0:1:!l.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function oV(n,e){const t=Je(n);let a=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const d of c.ba)d.Fa(s)&&(a=!0);c.wa=s}}a&&Yy(t)}function lV(n,e,t){const a=Je(n),s=a.queries.get(e);if(s)for(const l of s.ba)l.onError(t);a.queries.delete(e)}function Yy(n){n.Ca.forEach((e=>{e.next()}))}var Xg,C0;(C0=Xg||(Xg={})).Ma="default",C0.Cache="cache";class Qy{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const s of e.docChanges)s.type!==3&&a.push(s);e=new Al(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.key=e}}class OA{constructor(e){this.key=e}}class uV{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.eu=Ww(e),this.tu=new dl(this.eu)}get nu(){return this.Za}ru(e,t){const a=t?t.iu:new A0,s=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,d=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,g=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const S=s.get(_),R=Dd(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),B=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let V=!1;S&&R?S.data.isEqual(R.data)?U!==B&&(a.track({type:3,doc:R}),V=!0):this.su(S,R)||(a.track({type:2,doc:R}),V=!0,(p&&this.eu(R,p)>0||g&&this.eu(R,g)<0)&&(d=!0)):!S&&R?(a.track({type:0,doc:R}),V=!0):S&&!R&&(a.track({type:1,doc:S}),V=!0,(p||g)&&(d=!0)),V&&(R?(c=c.add(R),l=B?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),a.track({type:1,doc:_})}return{tu:c,iu:a,Ss:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,s){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(R,U){const B=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Vt:V})}};return B(R)-B(U)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(a),s=s??!1;const d=t&&!s?this._u():[],p=this.Ya.size===0&&this.current&&!s?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Al(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new A0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const t=[];return e.forEach((a=>{this.Ya.has(a)||t.push(new OA(a))})),this.Ya.forEach((a=>{e.has(a)||t.push(new xA(a))})),t}cu(e){this.Za=e.ks,this.Ya=pt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xy="SyncEngine";class cV{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class hV{constructor(e){this.key=e,this.hu=!1}}class fV{constructor(e,t,a,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ho((d=>Xw(d)),Id),this.Iu=new Map,this.Eu=new Set,this.Ru=new nn(je.comparator),this.Au=new Map,this.Vu=new ky,this.du={},this.mu=new Map,this.fu=wl.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dV(n,e,t=!0){const a=UA(n);let s;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.lu()):s=await MA(a,e,t,!0),s}async function mV(n,e){const t=UA(n);await MA(t,e,!0,!1)}async function MA(n,e,t,a){const s=await MM(n.localStore,Oi(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return a&&(d=await pV(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&AA(n.remoteStore,s),d}async function pV(n,e,t,a,s){n.pu=(E,S,R)=>(async function(B,V,F,H){let q=V.view.ru(F);q.Ss&&(q=await v0(B.localStore,V.query,!1).then((({documents:b})=>V.view.ru(b,q))));const Q=H&&H.targetChanges.get(V.targetId),re=H&&H.targetMismatches.get(V.targetId)!=null,Y=V.view.applyChanges(q,B.isPrimaryClient,Q,re);return D0(B,V.targetId,Y.au),Y.snapshot})(n,E,S,R);const l=await v0(n.localStore,e,!0),c=new uV(e,l.ks),d=c.ru(l.documents),p=Rc.createSynthesizedTargetChangeForCurrentChange(t,a&&n.onlineState!=="Offline",s),g=c.applyChanges(d,n.isPrimaryClient,p);D0(n,t,g.au);const _=new cV(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function gV(n,e,t){const a=Je(n),s=a.Tu.get(e),l=a.Iu.get(s.targetId);if(l.length>1)return a.Iu.set(s.targetId,l.filter((c=>!Id(c,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(s.targetId),a.sharedClientState.isActiveQueryTarget(s.targetId)||await Yg(a.localStore,s.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(s.targetId),t&&zy(a.remoteStore,s.targetId),Wg(a,s.targetId)})).catch(Pl)):(Wg(a,s.targetId),await Yg(a.localStore,s.targetId,!0))}async function yV(n,e){const t=Je(n),a=t.Tu.get(e),s=t.Iu.get(a.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),zy(t.remoteStore,a.targetId))}async function _V(n,e,t){const a=AV(n);try{const s=await(function(c,d){const p=Je(c),g=$t.now(),_=d.reduce(((R,U)=>R.add(U.key)),pt());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let U=ma(),B=pt();return p.xs.getEntries(R,_).next((V=>{U=V,U.forEach(((F,H)=>{H.isValidDocument()||(B=B.add(F))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,U))).next((V=>{E=V;const F=[];for(const H of d){const q=OO(H,E.get(H.key).overlayedDocument);q!=null&&F.push(new Ts(H.key,q,Fw(q.value.mapValue),Nr.exists(!0)))}return p.mutationQueue.addMutationBatch(R,g,F,d)})).next((V=>{S=V;const F=V.applyToLocalDocumentSet(E,B);return p.documentOverlayCache.saveOverlays(R,V.batchId,F)}))})).then((()=>({batchId:S.batchId,changes:Zw(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(s.batchId),(function(c,d,p){let g=c.du[c.currentUser.toKey()];g||(g=new nn(mt)),g=g.insert(d,p),c.du[c.currentUser.toKey()]=g})(a,s.batchId,t),await Ic(a,s.changes),await Pd(a.remoteStore)}catch(s){const l=Gy(s,"Failed to persist write");t.reject(l)}}async function VA(n,e){const t=Je(n);try{const a=await NM(t.localStore,e);e.targetChanges.forEach(((s,l)=>{const c=t.Au.get(l);c&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?At(c.hu,14607):s.removedDocuments.size>0&&(At(c.hu,42227),c.hu=!1))})),await Ic(t,a,e)}catch(a){await Pl(a)}}function I0(n,e,t){const a=Je(n);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const s=[];a.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&s.push(d.snapshot)})),(function(c,d){const p=Je(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,E)=>{for(const S of E.ba)S.va(d)&&(g=!0)})),g&&Yy(p)})(a.eventManager,e),s.length&&a.Pu.J_(s),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function vV(n,e,t){const a=Je(n);a.sharedClientState.updateQueryState(e,"rejected",t);const s=a.Au.get(e),l=s&&s.key;if(l){let c=new nn(je.comparator);c=c.insert(l,$n.newNoDocument(l,Xe.min()));const d=pt().add(l),p=new Od(Xe.min(),new Map,new nn(mt),c,d);await VA(a,p),a.Ru=a.Ru.remove(l),a.Au.delete(e),Wy(a)}else await Yg(a.localStore,e,!1).then((()=>Wg(a,e,t))).catch(Pl)}async function EV(n,e){const t=Je(n),a=e.batch.batchId;try{const s=await DM(t.localStore,e);kA(t,a,null),PA(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Ic(t,s)}catch(s){await Pl(s)}}async function TV(n,e,t){const a=Je(n);try{const s=await(function(c,d){const p=Je(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((E=>(At(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(a.localStore,e);kA(a,e,t),PA(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Ic(a,s)}catch(s){await Pl(s)}}function PA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function kA(n,e,t){const a=Je(n);let s=a.du[a.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),a.du[a.currentUser.toKey()]=s}}function Wg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const a of n.Iu.get(e))n.Tu.delete(a),t&&n.Pu.yu(a,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((a=>{n.Vu.containsKey(a)||LA(n,a)}))}function LA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(zy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Wy(n))}function D0(n,e,t){for(const a of t)a instanceof xA?(n.Vu.addReference(a.key,e),bV(n,a)):a instanceof OA?(Ie(Xy,"Document no longer in limbo: "+a.key),n.Vu.removeReference(a.key,e),n.Vu.containsKey(a.key)||LA(n,a.key)):Ge(19791,{wu:a})}function bV(n,e){const t=e.key,a=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(a)||(Ie(Xy,"New document in limbo: "+t),n.Eu.add(a),Wy(n))}function Wy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new je(Ft.fromString(e)),a=n.fu.next();n.Au.set(a,new hV(t)),n.Ru=n.Ru.insert(t,a),AA(n.remoteStore,new as(Oi(Cd(t.path)),a,"TargetPurposeLimboResolution",wd.ce))}}async function Ic(n,e,t){const a=Je(n),s=[],l=[],c=[];a.Tu.isEmpty()||(a.Tu.forEach(((d,p)=>{c.push(a.pu(p,e,t).then((g=>{var _;if((g||t)&&a.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;a.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){s.push(g);const E=Uy.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),a.Pu.J_(s),await(async function(p,g){const _=Je(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>de.forEach(g,(S=>de.forEach(S.Ts,(R=>_.persistence.referenceDelegate.addReference(E,S.targetId,R))).next((()=>de.forEach(S.Is,(R=>_.persistence.referenceDelegate.removeReference(E,S.targetId,R)))))))))}catch(E){if(!kl(E))throw E;Ie(jy,"Failed to update sequence numbers: "+E)}for(const E of g){const S=E.targetId;if(!E.fromCache){const R=_.vs.get(S),U=R.snapshotVersion,B=R.withLastLimboFreeSnapshotVersion(U);_.vs=_.vs.insert(S,B)}}})(a.localStore,l))}async function SV(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ie(Xy,"User change. New user:",e.toKey());const a=await TA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new Re(ue.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Ic(t,a.Ns)}}function wV(n,e){const t=Je(n),a=t.Au.get(e);if(a&&a.hu)return pt().add(a.key);{let s=pt();const l=t.Iu.get(e);if(!l)return s;for(const c of l){const d=t.Tu.get(c);s=s.unionWith(d.view.nu)}return s}}function UA(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vV.bind(null,e),e.Pu.J_=oV.bind(null,e.eventManager),e.Pu.yu=lV.bind(null,e.eventManager),e}function AV(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TV.bind(null,e),e}class Zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Md(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return IM(this.persistence,new AM,e.initialUser,this.serializer)}Cu(e){return new EA(Ly.Vi,this.serializer)}Du(e){return new PM}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zf.provider={build:()=>new Zf};class RV extends Zf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){At(this.persistence.referenceDelegate instanceof Wf,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new cM(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?fr.withCacheSize(this.cacheSizeBytes):fr.DEFAULT;return new EA((a=>Wf.Vi(a,t)),this.serializer)}}class Jg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>I0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=SV.bind(null,this.syncEngine),await iV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new sV})()}createDatastore(e){const t=Md(e.databaseInfo.databaseId),a=zM(e.databaseInfo);return GM(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,s,l,c,d){return new KM(a,s,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>I0(this.syncEngine,t,0)),(function(){return b0.v()?new b0:new kM})())}createSyncEngine(e,t){return(function(s,l,c,d,p,g,_){const E=new fV(s,l,c,d,p,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const l=Je(s);Ie(so,"RemoteStore shutting down."),l.Ea.add(5),await Cc(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Jg.provider={build:()=>new Jg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):da("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class CV{constructor(e,t,a,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this._databaseInfo=s,this.user=Gn.UNAUTHENTICATED,this.clientId=Ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async c=>{Ie(_s,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(a,(c=>(Ie(_s,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Gy(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function yg(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(_s,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let a=t.initialUser;n.setCredentialChangeListener((async s=>{a.isEqual(s)||(await TA(e.localStore,s),a=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function N0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IV(n);Ie(_s,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((a=>w0(e.remoteStore,a))),n.setAppCheckTokenChangeListener(((a,s)=>w0(e.remoteStore,s))),n._onlineComponents=e}async function IV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(_s,"Using user provided OfflineComponentProvider");try{await yg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ue.FAILED_PRECONDITION||s.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;El("Error using user provided cache. Falling back to memory cache: "+t),await yg(n,new Zf)}}else Ie(_s,"Using default OfflineComponentProvider"),await yg(n,new RV(void 0));return n._offlineComponents}async function jA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(_s,"Using user provided OnlineComponentProvider"),await N0(n,n._uninitializedComponentsProvider._online)):(Ie(_s,"Using default OnlineComponentProvider"),await N0(n,new Jg))),n._onlineComponents}function DV(n){return jA(n).then((e=>e.syncEngine))}async function ed(n){const e=await jA(n),t=e.eventManager;return t.onListen=dV.bind(null,e.syncEngine),t.onUnlisten=gV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yV.bind(null,e.syncEngine),t}function NV(n,e,t,a){const s=new Jy(a),l=new Qy(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>$y(await ed(n),l))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>Ky(await ed(n),l)))}}function xV(n,e,t={}){const a=new ca;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new Jy({next:S=>{_.Nu(),c.enqueueAndForget((()=>Ky(l,E)));const R=S.docs.has(d);!R&&S.fromCache?g.reject(new Re(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&p&&p.source==="server"?g.reject(new Re(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Qy(Cd(d.path),_,{includeMetadataChanges:!0,Ka:!0});return $y(l,E)})(await ed(n),n.asyncQueue,e,t,a))),a.promise}function OV(n,e,t={}){const a=new ca;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new Jy({next:S=>{_.Nu(),c.enqueueAndForget((()=>Ky(l,E))),S.fromCache&&p.source==="server"?g.reject(new Re(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),E=new Qy(d,_,{includeMetadataChanges:!0,Ka:!0});return $y(l,E)})(await ed(n),n.asyncQueue,e,t,a))),a.promise}function MV(n,e){const t=new ca;return n.asyncQueue.enqueueAndForget((async()=>_V(await DV(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="ComponentProvider",x0=new Map;function PV(n,e,t,a,s){return new tO(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,zA(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="firestore.googleapis.com",O0=!0;class M0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Re(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BA,this.ssl=O0}else this.host=e.host,this.ssl=e.ssl??O0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lM)throw new Re(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zA(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Re(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,s){return a.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kd{constructor(e,t,a,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Re(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Re(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new V2;switch(a.type){case"firstParty":return new U2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new Re(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=x0.get(t);a&&(Ie(VV,"Removing Datastore"),x0.delete(t),a.terminate())})(this),Promise.resolve()}}function kV(n,e,t,a={}){var g;n=Dr(n,kd);const s=Ol(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;s&&(pw(`https://${d}`),gw("Firestore",!0)),l.host!==BA&&l.host!==d&&El("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:s,emulatorOptions:a};if(!ro(p,c)&&(n._setSettings(p),a.mockUserToken)){let _,E;if(typeof a.mockUserToken=="string")_=a.mockUserToken,E=Gn.MOCK_USER;else{_=sx(a.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const S=a.mockUserToken.sub||a.mockUserToken.user_id;if(!S)throw new Re(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Gn(S)}n._authCredentials=new P2(new Nw(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class on{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Sc(t,on._jsonSchema))return new on(e,a||null,new je(Ft.fromString(t.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:En("string",on._jsonSchemaVersion),referencePath:En("string")};class hs extends mo{constructor(e,t,a){super(e,t,Cd(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new je(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Dc(n,e,...t){if(n=An(n),xw("collection","path",e),n instanceof kd){const a=Ft.fromString(e,...t);return $b(a),new hs(n,null,a)}{if(!(n instanceof on||n instanceof hs))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ft.fromString(e,...t));return $b(a),new hs(n.firestore,null,a)}}function Qr(n,e,...t){if(n=An(n),arguments.length===1&&(e=Ay.newId()),xw("doc","path",e),n instanceof kd){const a=Ft.fromString(e,...t);return Gb(a),new on(n,null,new je(a))}{if(!(n instanceof on||n instanceof hs))throw new Re(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=n._path.child(Ft.fromString(e,...t));return Gb(a),new on(n.firestore,n instanceof hs?n.converter:null,new je(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="AsyncQueue";class P0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new SA(this,"async_queue_retry"),this._c=()=>{const a=gg();a&&Ie(V0,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=gg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!kl(e))throw e;Ie(V0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,da("INTERNAL UNHANDLED ERROR: ",k0(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Hy.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(s),s}uc(){this.nc&&Ge(47125,{Pc:k0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function k0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class vs extends kd{constructor(e,t,a,s){super(e,t,a,s),this.type="firestore",this._queue=new P0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P0(e),this._firestoreClient=void 0,await e}}}function LV(n,e){const t=typeof n=="object"?n:Ew(),a=typeof n=="string"?n:Hf,s=Sy(t,"firestore").getImmediate({identifier:a});if(!s._initialized){const l=ix("firestore");l&&kV(s,...l)}return s}function Nc(n){if(n._terminated)throw new Re(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UV(n),n._firestoreClient}function UV(n){var a,s,l,c;const e=n._freezeSettings(),t=PV(n._databaseId,((a=n._app)==null?void 0:a.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new CV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(jn.fromBase64String(e))}catch(t){throw new Re(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kr(jn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Sc(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:En("string",Kr._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Re(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return mt(this._lat,e._lat)||mt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Sc(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:En("string",Vi._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,s){if(a.length!==s.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==s[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Sc(e,ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ui(e.vectorValues);throw new Re(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ui._jsonSchemaVersion="firestore/vectorValue/1.0",ui._jsonSchema={type:En("string",ui._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=/^__.*__$/;class zV{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ac(e,this.data,t,this.fieldTransforms)}}class FA{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new Ts(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{dataSource:n})}}class e_{constructor(e,t,a,s,l,c){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=s,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new e_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),a=this.contextWith({path:t,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return td(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(qA(this.dataSource)&&jV.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class BV{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||Md(e)}createContext(e,t,a,s=!1){return new e_({dataSource:e,methodName:t,targetDoc:a,path:Un.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ud(n){const e=n._freezeSettings(),t=Md(n._databaseId);return new BV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function HA(n,e,t,a,s,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,s);t_("Data must be an object, but it was:",c,a);const d=KA(a,c);let p,g;if(l.merge)p=new Cr(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const S=Rl(e,E,t);if(!c.contains(S))throw new Re(ue.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);XA(_,S)||_.push(S)}p=new Cr(_),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new zV(new dr(d),p,g)}class jd extends Zy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jd}}function GA(n,e,t,a){const s=n.createContext(1,e,t);t_("Data must be an object, but it was:",s,a);const l=[],c=dr.empty();Es(a,((p,g)=>{const _=QA(e,p,t);g=An(g);const E=s.childContextForFieldPath(_);if(g instanceof jd)l.push(_);else{const S=xc(g,E);S!=null&&(l.push(_),c.set(_,S))}}));const d=new Cr(l);return new FA(c,d,s.fieldTransforms)}function $A(n,e,t,a,s,l){const c=n.createContext(1,e,t),d=[Rl(e,a,t)],p=[s];if(l.length%2!=0)throw new Re(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(Rl(e,l[S])),p.push(l[S+1]);const g=[],_=dr.empty();for(let S=d.length-1;S>=0;--S)if(!XA(g,d[S])){const R=d[S];let U=p[S];U=An(U);const B=c.childContextForFieldPath(R);if(U instanceof jd)g.push(R);else{const V=xc(U,B);V!=null&&(g.push(R),_.set(R,V))}}const E=new Cr(g);return new FA(_,E,c.fieldTransforms)}function FV(n,e,t,a=!1){return xc(t,n.createContext(a?4:3,e))}function xc(n,e){if(YA(n=An(n)))return t_("Unsupported field value:",e,n),KA(n,e);if(n instanceof Zy)return(function(a,s){if(!qA(s.dataSource))throw s.createError(`${a._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(s);l&&s.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,s){const l=[];let c=0;for(const d of a){let p=xc(d,s.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(a,s){if((a=An(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return RO(s.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=$t.fromDate(a);return{timestampValue:Xf(s.serializer,l)}}if(a instanceof $t){const l=new $t(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Xf(s.serializer,l)}}if(a instanceof Vi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Kr)return{bytesValue:hA(s.serializer,a._byteString)};if(a instanceof on){const l=s.databaseId,c=a.firestore._databaseId;if(!c.isEqual(l))throw s.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Py(a.firestore._databaseId||s.databaseId,a._key.path)}}if(a instanceof ui)return(function(c,d){const p=c instanceof ui?c.toArray():c;return{mapValue:{fields:{[zw]:{stringValue:Bw},[Gf]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw d.createError("VectorValues must only contain numeric values.");return xy(d.serializer,_)}))}}}}}})(a,s);if(_A(a))return a._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Sd(a)}`)})(n,e)}function KA(n,e){const t={};return Vw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(n,((a,s)=>{const l=xc(s,e.childContextForField(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function YA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof $t||n instanceof Vi||n instanceof Kr||n instanceof on||n instanceof Zy||n instanceof ui||_A(n))}function t_(n,e,t){if(!YA(t)||!Ow(t)){const a=Sd(t);throw a==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+a)}}function Rl(n,e,t){if((e=An(e))instanceof Ld)return e._internalPath;if(typeof e=="string")return QA(n,e);throw td("Field path arguments must be of type string or ",n,!1,void 0,t)}const qV=new RegExp("[~\\*/\\[\\]]");function QA(n,e,t){if(e.search(qV)>=0)throw td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ld(...e.split("."))._internalPath}catch{throw td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function td(n,e,t,a,s){const l=a&&!a.isEmpty(),c=s!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${a}`),c&&(p+=` in document ${s}`),p+=")"),new Re(ue.INVALID_ARGUMENT,d+n+p)}function XA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{convertValue(e,t="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return Es(e,((s,l)=>{a[s]=this.convertValue(l,t)})),a}convertVectorValue(e){var a,s,l;const t=(l=(s=(a=e.fields)==null?void 0:a[Gf].arrayValue)==null?void 0:s.values)==null?void 0:l.map((c=>hn(c.doubleValue)));return new ui(t)}convertGeoPoint(e){return new Vi(hn(e.latitude),hn(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Rd(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(oc(e));default:return null}}convertTimestamp(e){const t=ms(e);return new $t(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Ft.fromString(e);At(yA(a),9688,{name:e});const s=new lc(a.get(1),a.get(3)),l=new je(a.popFirst(5));return s.isEqual(t)||da(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends HV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,t)}}const L0="@firebase/firestore",U0="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n){return(function(t,a){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of a)if(l in s&&typeof s[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t,a,s,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Rl("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GV extends WA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Re(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r_{}class $V extends r_{}function Oc(n,e,...t){let a=[];e instanceof r_&&a.push(e),a=a.concat(t),(function(l){const c=l.filter((p=>p instanceof a_)).length,d=l.filter((p=>p instanceof zd)).length;if(c>1||c>0&&d>0)throw new Re(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const s of a)n=s._apply(n);return n}class zd extends $V{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new zd(e,t,a)}_apply(e){const t=this._parse(e);return ZA(e._query,t),new mo(e.firestore,e.converter,Fg(e._query,t))}_parse(e){const t=Ud(e.firestore);return(function(l,c,d,p,g,_,E){let S;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){B0(E,_);const U=[];for(const B of E)U.push(z0(p,l,B));S={arrayValue:{values:U}}}else S=z0(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||B0(E,_),S=FV(d,c,E,_==="in"||_==="not-in");return vn.create(g,_,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function i_(n,e,t){const a=e,s=Rl("where",n);return zd._create(s,a,t)}class a_ extends r_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new a_(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:hi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,l){let c=s;const d=l.getFlattenedFilters();for(const p of d)ZA(c,p),c=Fg(c,p)})(e._query,t),new mo(e.firestore,e.converter,Fg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function z0(n,e,t){if(typeof(t=An(t))=="string"){if(t==="")throw new Re(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(e)&&t.indexOf("/")!==-1)throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Ft.fromString(t));if(!je.isDocumentKey(a))throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return e0(n,new je(a))}if(t instanceof on)return e0(n,t._key);throw new Re(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(t)}.`)}function B0(n,e){if(!Array.isArray(n)||n.length===0)throw new Re(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZA(n,e){const t=(function(s,l){for(const c of s)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Re(ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Re(ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function eR(n,e,t){let a;return a=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,a}class qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends WA{constructor(e,t,a,s,l,c){super(e,t,a,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(Rl("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:En("string",Zs._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class wf extends Zs{data(e={}){return super.data(e)}}class eo{constructor(e,t,a,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new qu(s.hasPendingWrites,s.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new wf(this._firestore,this._userDataWriter,a.key,a,new qu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((d=>{const p=new wf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new qu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new wf(s._firestore,s._userDataWriter,d.doc.key,d.doc,new qu(s._snapshot.mutatedKeys.has(d.doc.key),s._snapshot.fromCache),s.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:KV(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Re(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],s=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:En("string",eo._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ud(e)}set(e,t,a){this._verifyNotCommitted();const s=_g(e,this._firestore),l=eR(s.converter,t,a),c=HA(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,a);return this._mutations.push(c.toMutation(s._key,Nr.none())),this}update(e,t,a,...s){this._verifyNotCommitted();const l=_g(e,this._firestore);let c;return c=typeof(t=An(t))=="string"||t instanceof Ld?$A(this._dataReader,"WriteBatch.update",l._key,t,a,s):GA(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_g(e,this._firestore);return this._mutations=this._mutations.concat(new Oy(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _g(n,e){if((n=An(n)).firestore!==e)throw new Re(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){n=Dr(n,on);const e=Dr(n.firestore,vs),t=Nc(e);return xV(t,n._key).then((a=>tR(e,n,a)))}function Vc(n){n=Dr(n,mo);const e=Dr(n.firestore,vs),t=Nc(e),a=new n_(e);return JA(n._query),OV(t,n._query).then((s=>new eo(e,a,n,s)))}function QV(n,e,t){n=Dr(n,on);const a=Dr(n.firestore,vs),s=eR(n.converter,e,t),l=Ud(a);return s_(a,[HA(l,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Nr.none())])}function Bd(n,e,t,...a){n=Dr(n,on);const s=Dr(n.firestore,vs),l=Ud(s);let c;return c=typeof(e=An(e))=="string"||e instanceof Ld?$A(l,"updateDoc",n._key,e,t,a):GA(l,"updateDoc",n._key,e),s_(s,[c.toMutation(n._key,Nr.exists(!0))])}function XV(n,...e){var g,_,E;n=An(n);let t={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||j0(e[a])||(t=e[a++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(j0(e[a])){const S=e[a];e[a]=(g=S.next)==null?void 0:g.bind(S),e[a+1]=(_=S.error)==null?void 0:_.bind(S),e[a+2]=(E=S.complete)==null?void 0:E.bind(S)}let l,c,d;if(n instanceof on)c=Dr(n.firestore,vs),d=Cd(n._key.path),l={next:S=>{e[a]&&e[a](tR(c,n,S))},error:e[a+1],complete:e[a+2]};else{const S=Dr(n,mo);c=Dr(S.firestore,vs),d=S._query;const R=new n_(c);l={next:U=>{e[a]&&e[a](new eo(c,R,S,U))},error:e[a+1],complete:e[a+2]},JA(n._query)}const p=Nc(c);return NV(p,d,s,l)}function s_(n,e){const t=Nc(n);return MV(t,e)}function tR(n,e,t){const a=t.docs.get(e._key),s=new n_(n);return new Zs(n,s,e._key,a,new qu(t.hasPendingWrites,t.fromCache),e.converter)}function nR(n){return n=Dr(n,vs),Nc(n),new YV(n,(e=>s_(n,e)))}(function(e,t=!0){M2(Ml),vl(new io("firestore",((a,{instanceIdentifier:s,options:l})=>{const c=a.getProvider("app").getImmediate(),d=new vs(new k2(a.getProvider("auth-internal")),new j2(c,a.getProvider("app-check-internal")),nO(c,s),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),us(L0,U0,e),us(L0,U0,"esm2020")})();var WV="firebase",JV="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(WV,JV,"app");function rR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZV=rR,iR=new Tc("auth","Firebase",rR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Ty("@firebase/auth");function eP(n,...e){nd.logLevel<=dt.WARN&&nd.warn(`Auth (${Ml}): ${n}`,...e)}function Af(n,...e){nd.logLevel<=dt.ERROR&&nd.error(`Auth (${Ml}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(n,...e){throw l_(n,...e)}function ci(n,...e){return l_(n,...e)}function o_(n,e,t){const a={...ZV(),[e]:t};return new Tc("auth","Firebase",a).create(e,{appName:n.name})}function to(n){return o_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tP(n,e,t){const a=t;if(!(e instanceof a))throw a.name!==e.constructor.name&&Ui(n,"argument-error"),o_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function l_(n,...e){if(typeof n!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=n.name),n._errorFactory.create(t,...a)}return iR.create(n,...e)}function $e(n,e,...t){if(!n)throw l_(e,...t)}function la(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Af(e),new Error(e)}function pa(n,e){n||la(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function nP(){return F0()==="http:"||F0()==="https:"}function F0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nP()||fx()||"connection"in navigator)?navigator.onLine:!0}function iP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t){this.shortDelay=e,this.longDelay=t,pa(t>e,"Short delay should be less than long delay!"),this.isMobile=ux()||dx()}get(){return rP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(n,e){pa(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;la("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;la("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;la("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oP=new Pc(3e4,6e4);function c_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ul(n,e,t,a,s={}){return sR(n,s,async()=>{let l={},c={};a&&(e==="GET"?c=a:l={body:JSON.stringify(a)});const d=bc({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return hx()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ol(n.emulatorConfig.host)&&(g.credentials="include"),aR.fetch()(await oR(n,n.config.apiHost,t,d),g)})}async function sR(n,e,t){n._canInitEmulator=!1;const a={...aP,...e};try{const s=new uP(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw ff(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ff(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw ff(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw ff(n,"user-disabled",c);const _=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw o_(n,_,g);Ui(n,_)}}catch(s){if(s instanceof _a)throw s;Ui(n,"network-request-failed",{message:String(s)})}}async function lP(n,e,t,a,s={}){const l=await Ul(n,e,t,a,s);return"mfaPendingCredential"in l&&Ui(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function oR(n,e,t,a){const s=`${e}${t}?${a}`,l=n,c=l.config.emulator?u_(n.config,s):`${n.config.apiScheme}://${s}`;return sP.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class uP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(ci(this.auth,"network-request-failed")),oP.get())})}}function ff(n,e,t){const a={appName:n.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const s=ci(n,e,a);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cP(n,e){return Ul(n,"POST","/v1/accounts:delete",e)}async function rd(n,e){return Ul(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hP(n,e=!1){const t=An(n),a=await t.getIdToken(e),s=h_(a);$e(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:s,token:a,authTime:Ju(vg(s.auth_time)),issuedAtTime:Ju(vg(s.iat)),expirationTime:Ju(vg(s.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function vg(n){return Number(n)*1e3}function h_(n){const[e,t,a]=n.split(".");if(e===void 0||t===void 0||a===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const s=hw(t);return s?JSON.parse(s):(Af("Failed to decode base64 JWT payload"),null)}catch(s){return Af("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function q0(n){const e=h_(n);return $e(e,"internal-error"),$e(typeof e.exp<"u","internal-error"),$e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(n,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof _a&&fP(a)&&n.auth.currentUser===n&&await n.auth.signOut(),a}}function fP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ju(this.lastLoginAt),this.creationTime=Ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(n){var E;const e=n.auth,t=await n.getIdToken(),a=await fc(n,rd(e,{idToken:t}));$e(a==null?void 0:a.users.length,e,"internal-error");const s=a.users[0];n._notifyReloadListener(s);const l=(E=s.providerUserInfo)!=null&&E.length?lR(s.providerUserInfo):[],c=pP(n.providerData,l),d=n.isAnonymous,p=!(n.email&&s.passwordHash)&&!(c!=null&&c.length),g=d?p:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new ey(s.createdAt,s.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function mP(n){const e=An(n);await id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pP(n,e){return[...n.filter(a=>!e.some(s=>s.providerId===a.providerId)),...e]}function lR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n,e){const t=await sR(n,{},async()=>{const a=bc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await oR(n,s,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:a};return n.emulatorConfig&&Ol(n.emulatorConfig.host)&&(p.credentials="include"),aR.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yP(n,e){return Ul(n,"POST","/v2/accounts:revokeToken",c_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){$e(e.idToken,"internal-error"),$e(typeof e.idToken<"u","internal-error"),$e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){$e(e.length!==0,"internal-error");const t=q0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:($e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:s,expiresIn:l}=await gP(e,t);this.updateTokensAndExpiration(a,s,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:s,expirationTime:l}=t,c=new ml;return a&&($e(typeof a=="string","internal-error",{appName:e}),c.refreshToken=a),s&&($e(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&($e(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ml,this.toJSON())}_performRefresh(){return la("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(n,e){$e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:t,stsTokenManager:a,...s}){this.providerId="firebase",this.proactiveRefresh=new dP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ey(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await fc(this,this.stsTokenManager.getToken(this.auth,e));return $e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return hP(this,e)}reload(){return mP(this)}_assign(e){this!==e&&($e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){$e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await id(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(si(this.auth.app))return Promise.reject(to(this.auth));const e=await this.getIdToken();return await fc(this,cP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,s=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:R,providerData:U,stsTokenManager:B}=t;$e(E&&B,e,"internal-error");const V=ml.fromJSON(this.name,B);$e(typeof E=="string",e,"internal-error"),Ja(a,e.name),Ja(s,e.name),$e(typeof S=="boolean",e,"internal-error"),$e(typeof R=="boolean",e,"internal-error"),Ja(l,e.name),Ja(c,e.name),Ja(d,e.name),Ja(p,e.name),Ja(g,e.name),Ja(_,e.name);const F=new li({uid:E,auth:e,email:s,emailVerified:S,displayName:a,isAnonymous:R,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:V,createdAt:g,lastLoginAt:_});return U&&Array.isArray(U)&&(F.providerData=U.map(H=>({...H}))),p&&(F._redirectEventId=p),F}static async _fromIdTokenResponse(e,t,a=!1){const s=new ml;s.updateFromServerResponse(t);const l=new li({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:a});return await id(l),l}static async _fromGetAccountInfoResponse(e,t,a){const s=t.users[0];$e(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?lR(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),d=new ml;d.updateFromIdToken(a);const p=new li({uid:s.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ey(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Map;function ua(n){pa(n instanceof Function,"Expected a class definition");let e=H0.get(n);return e?(pa(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,H0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uR.type="NONE";const G0=uR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n,e,t){return`firebase:${n}:${e}:${t}`}class pl{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:s,name:l}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Rf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rd(this.auth,{idToken:e}).catch(()=>{});return t?li._fromGetAccountInfoResponse(this.auth,t,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new pl(ua(G0),e,a);const s=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=s[0]||ua(G0);const c=Rf(a,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const S=await rd(e,{idToken:_}).catch(()=>{});if(!S)break;E=await li._fromGetAccountInfoResponse(e,S,_)}else E=li._fromJSON(e,_);g!==l&&(d=E),l=g;break}}catch{}const p=s.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new pl(l,e,a):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new pl(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pR(e))return"Blackberry";if(gR(e))return"Webos";if(hR(e))return"Safari";if((e.includes("chrome/")||fR(e))&&!e.includes("edge/"))return"Chrome";if(mR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=n.match(t);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function cR(n=Kn()){return/firefox\//i.test(n)}function hR(n=Kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fR(n=Kn()){return/crios\//i.test(n)}function dR(n=Kn()){return/iemobile/i.test(n)}function mR(n=Kn()){return/android/i.test(n)}function pR(n=Kn()){return/blackberry/i.test(n)}function gR(n=Kn()){return/webos/i.test(n)}function f_(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _P(n=Kn()){var e;return f_(n)&&!!((e=window.navigator)!=null&&e.standalone)}function vP(){return mx()&&document.documentMode===10}function yR(n=Kn()){return f_(n)||mR(n)||gR(n)||pR(n)||/windows phone/i.test(n)||dR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n,e=[]){let t;switch(n){case"Browser":t=$0(Kn());break;case"Worker":t=`${$0(Kn())}-${n}`;break;default:t=n}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ml}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});a.onAbort=t,this.queue.push(a);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TP(n,e={}){return Ul(n,"GET","/v2/passwordPolicy",c_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=6;class SP{constructor(e){var a;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let s=0;s<e.length;s++)a=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,a,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K0(this),this.idTokenSubscription=new K0(this),this.beforeStateQueue=new EP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ua(t)),this._initializationPromise=this.queue(async()=>{var a,s,l;if(!this._deleted&&(this.persistenceManager=await pl.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rd(this,{idToken:e}),a=await li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(si(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=a==null?void 0:a._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(a=p.user,s=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return $e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(si(this.app))return Promise.reject(to(this));const t=e?An(e):null;return t&&$e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&$e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return si(this.app)?Promise.reject(to(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return si(this.app)?Promise.reject(to(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ua(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TP(this),t=new SP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await yP(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ua(e)||this._popupRedirectResolver;$e(t,this,"argument-error"),this.redirectPersistenceManager=await pl.create(this,[ua(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,a;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if($e(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return $e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_R(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var t;if(si(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&eP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Fd(n){return An(n)}class K0{constructor(e){this.auth=e,this.observer=null,this.addObserver=bx(t=>this.observer=t)}get next(){return $e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AP(n){d_=n}function RP(n){return d_.loadJS(n)}function CP(){return d_.gapiScript}function IP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n,e){const t=Sy(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(ro(l,e??{}))return s;Ui(s,"already-initialized")}return t.initialize({options:e})}function NP(n,e){const t=(e==null?void 0:e.persistence)||[],a=(Array.isArray(t)?t:[t]).map(ua);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function xP(n,e,t){const a=Fd(n);$e(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const s=!1,l=vR(e),{host:c,port:d}=OP(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!a._canInitEmulator){$e(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),$e(ro(g,a.config.emulator)&&ro(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,Ol(c)?(pw(`${l}//${c}${p}`),gw("Auth",!0)):MP()}function vR(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OP(n){const e=vR(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(a);if(s){const l=s[1];return{host:l,port:Y0(a.substr(l.length+1))}}else{const[l,c]=a.split(":");return{host:l,port:Y0(c)}}}function Y0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function MP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return la("not implemented")}_getIdTokenResponse(e){return la("not implemented")}_linkToIdToken(e,t){return la("not implemented")}_getReauthenticationResolver(e){return la("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(n,e){return lP(n,"POST","/v1/accounts:signInWithIdp",c_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="http://localhost";class oo extends ER{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:s,...l}=t;if(!a||!s)return null;const c=new oo(a,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return gl(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,gl(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,gl(e,t)}buildRequest(){const e={requestUri:VP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=bc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends m_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends kc{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oo._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return oa.credential(t,a)}catch{return null}}}oa.GOOGLE_SIGN_IN_METHOD="google.com";oa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends kc{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends kc{constructor(){super("twitter.com")}static credential(e,t){return oo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return rs.credential(t,a)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,s=!1){const l=await li._fromIdTokenResponse(e,a,s),c=Q0(a);return new Cl({user:l,providerId:c,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const s=Q0(a);return new Cl({user:e,providerId:s,_tokenResponse:a,operationType:t})}}function Q0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends _a{constructor(e,t,a,s){super(t.code,t.message),this.operationType=a,this.user=s,Object.setPrototypeOf(this,ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,s){return new ad(e,t,a,s)}}function TR(n,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ad._fromErrorAndOperation(n,l,e,a):l})}async function PP(n,e,t=!1){const a=await fc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Cl._forOperation(n,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kP(n,e,t=!1){const{auth:a}=n;if(si(a.app))return Promise.reject(to(a));const s="reauthenticate";try{const l=await fc(n,TR(a,s,e,n),t);$e(l.idToken,a,"internal-error");const c=h_(l.idToken);$e(c,a,"internal-error");const{sub:d}=c;return $e(n.uid===d,a,"user-mismatch"),Cl._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ui(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(n,e,t=!1){if(si(n.app))return Promise.reject(to(n));const a="signIn",s=await TR(n,a,e),l=await Cl._fromIdTokenResponse(n,a,s);return t||await n._updateCurrentUser(l.user),l}function UP(n,e,t,a){return An(n).onIdTokenChanged(e,t,a)}function jP(n,e,t){return An(n).beforeAuthStateChanged(e,t)}function zP(n,e,t,a){return An(n).onAuthStateChanged(e,t,a)}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1e3,FP=10;class SR extends bR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),s=this.localCache[t];a!==s&&e(t,s,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(a);!t&&this.localCache[a]===c||this.notifyListeners(a,c)},l=this.storage.getItem(a);vP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FP):s()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},BP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SR.type="LOCAL";const qP=SR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR extends bR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wR.type="SESSION";const AR=wR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const a=new qd(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:s});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await HP(d);t.ports[0].postMessage({status:"done",eventId:a,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=p_("",20);s.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},a);c={messageChannel:s,onMessage(E){const S=E;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function $P(n){Pi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function KP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YP(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function QP(){return RR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firebaseLocalStorageDb",XP=1,od="firebaseLocalStorage",IR="fbase_key";class Lc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Hd(n,e){return n.transaction([od],e?"readwrite":"readonly").objectStore(od)}function WP(){const n=indexedDB.deleteDatabase(CR);return new Lc(n).toPromise()}function ty(){const n=indexedDB.open(CR,XP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const a=n.result;try{a.createObjectStore(od,{keyPath:IR})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const a=n.result;a.objectStoreNames.contains(od)?e(a):(a.close(),await WP(),e(await ty()))})})}async function X0(n,e,t){const a=Hd(n,!0).put({[IR]:e,value:t});return new Lc(a).toPromise()}async function JP(n,e){const t=Hd(n,!1).get(e),a=await new Lc(t).toPromise();return a===void 0?null:a.value}function W0(n,e){const t=Hd(n,!0).delete(e);return new Lc(t).toPromise()}const ZP=800,e4=3;class DR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ty(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>e4)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qd._getInstance(QP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,a;if(this.activeServiceWorker=await KP(),!this.activeServiceWorker)return;this.sender=new GP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ty();return await X0(e,sd,"1"),await W0(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>X0(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>JP(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>W0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Hd(s,!1).getAll();return new Lc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)a.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!a.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const s of Array.from(a))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DR.type="LOCAL";const t4=DR;new Pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n,e){return e?ua(e):($e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends ER{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function n4(n){return LP(n.auth,new g_(n),n.bypassAuthState)}function r4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),kP(t,new g_(n),n.bypassAuthState)}async function i4(n){const{auth:e,user:t}=n;return $e(t,e,"internal-error"),PP(t,new g_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t,a,s,l=!1){this.auth=e,this.resolver=a,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:s,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return n4;case"linkViaPopup":case"linkViaRedirect":return i4;case"reauthViaPopup":case"reauthViaRedirect":return r4;default:Ui(this.auth,"internal-error")}}resolve(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=new Pc(2e3,1e4);async function s4(n,e,t){if(si(n.app))return Promise.reject(ci(n,"operation-not-supported-in-this-environment"));const a=Fd(n);tP(n,e,m_);const s=NR(a,t);return new Js(a,"signInViaPopup",e,s).executeNotNull()}class Js extends xR{constructor(e,t,a,s,l){super(e,t,s,l),this.provider=a,this.authWindow=null,this.pollId=null,Js.currentPopupAction&&Js.currentPopupAction.cancel(),Js.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return $e(e,this.auth,"internal-error"),e}async onExecution(){pa(this.filter.length===1,"Popup operations only handle one event");const e=p_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Js.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,a;if((a=(t=this.authWindow)==null?void 0:t.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,a4.get())};e()}}Js.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4="pendingRedirect",Cf=new Map;class l4 extends xR{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=Cf.get(this.auth._key());if(!e){try{const a=await u4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}Cf.set(this.auth._key(),e)}return this.bypassAuthState||Cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function u4(n,e){const t=f4(e),a=h4(n);if(!await a._isAvailable())return!1;const s=await a._get(t)==="true";return await a._remove(t),s}function c4(n,e){Cf.set(n._key(),e)}function h4(n){return ua(n._redirectPersistence)}function f4(n){return Rf(o4,n.config.apiKey,n.name)}async function d4(n,e,t=!1){if(si(n.app))return Promise.reject(to(n));const a=Fd(n),s=NR(a,e),c=await new l4(a,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await a._persistUserIfCurrent(c.user),await a._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=600*1e3;class p4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!g4(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var a;if(e.error&&!OR(e)){const s=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";t.onError(ci(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=m4&&this.cachedEventUids.clear(),this.cachedEventUids.has(J0(e))}saveEventToCache(e){this.cachedEventUids.add(J0(e)),this.lastProcessedEventTime=Date.now()}}function J0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function OR({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function g4(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OR(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(n,e={}){return Ul(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,v4=/^https?/;async function E4(n){if(n.config.emulator)return;const{authorizedDomains:e}=await y4(n);for(const t of e)try{if(T4(t))return}catch{}Ui(n,"unauthorized-domain")}function T4(n){const e=Zg(),{protocol:t,hostname:a}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&a===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===a}if(!v4.test(t))return!1;if(_4.test(n))return a===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=new Pc(3e4,6e4);function Z0(){const n=Pi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function S4(n){return new Promise((e,t)=>{var s,l,c;function a(){Z0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Z0(),t(ci(n,"network-request-failed"))},timeout:b4.get()})}if((l=(s=Pi().gapi)==null?void 0:s.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Pi().gapi)!=null&&c.load)a();else{const d=IP("iframefcb");return Pi()[d]=()=>{gapi.load?a():t(ci(n,"network-request-failed"))},RP(`${CP()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw If=null,e})}let If=null;function w4(n){return If=If||S4(n),If}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=new Pc(5e3,15e3),R4="__/auth/iframe",C4="emulator/auth/iframe",I4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function N4(n){const e=n.config;$e(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?u_(e,C4):`https://${n.config.authDomain}/${R4}`,a={apiKey:e.apiKey,appName:n.name,v:Ml},s=D4.get(n.config.apiHost);s&&(a.eid=s);const l=n._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${bc(a).slice(1)}`}async function x4(n){const e=await w4(n),t=Pi().gapi;return $e(t,n,"internal-error"),e.open({where:document.body,url:N4(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:I4,dontclear:!0},a=>new Promise(async(s,l)=>{await a.restyle({setHideOnLeave:!1});const c=ci(n,"network-request-failed"),d=Pi().setTimeout(()=>{l(c)},A4.get());function p(){Pi().clearTimeout(d),s(a)}a.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M4=500,V4=600,P4="_blank",k4="http://localhost";class eS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function L4(n,e,t,a=M4,s=V4){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-a)/2,0).toString();let d="";const p={...O4,width:a.toString(),height:s.toString(),top:l,left:c},g=Kn().toLowerCase();t&&(d=fR(g)?P4:t),cR(g)&&(e=e||k4,p.scrollbars="yes");const _=Object.entries(p).reduce((S,[R,U])=>`${S}${R}=${U},`,"");if(_P(g)&&d!=="_self")return U4(e||"",d),new eS(null);const E=window.open(e||"",d,_);$e(E,n,"popup-blocked");try{E.focus()}catch{}return new eS(E)}function U4(n,e){const t=document.createElement("a");t.href=n,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="__/auth/handler",z4="emulator/auth/handler",B4=encodeURIComponent("fac");async function tS(n,e,t,a,s,l){$e(n.config.authDomain,n,"auth-domain-config-required"),$e(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:a,v:Ml,eventId:s};if(e instanceof m_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Tx(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof kc){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${B4}=${encodeURIComponent(p)}`:"";return`${F4(n)}?${bc(d).slice(1)}${g}`}function F4({config:n}){return n.emulator?u_(n,z4):`https://${n.authDomain}/${j4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="webStorageSupport";class q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AR,this._completeRedirectFn=d4,this._overrideRedirectResult=c4}async _openPopup(e,t,a,s){var c;pa((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await tS(e,t,a,Zg(),s);return L4(e,l,p_())}async _openRedirect(e,t,a,s){await this._originValidation(e);const l=await tS(e,t,a,Zg(),s);return $P(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(pa(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await x4(e),a=new p4(e);return t.register("authEvent",s=>($e(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:a.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Eg,{type:Eg},s=>{var c;const l=(c=s==null?void 0:s[0])==null?void 0:c[Eg];l!==void 0&&t(!!l),Ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=E4(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yR()||hR()||f_()}}const H4=q4;var nS="@firebase/auth",rS="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){$e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function K4(n){vl(new io("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=a.options;$e(c&&!c.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_R(n)},g=new wP(a,s,l,p);return NP(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),vl(new io("auth-internal",e=>{const t=Fd(e.getProvider("auth").getImmediate());return(a=>new G4(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),us(nS,rS,$4(n)),us(nS,rS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=300,Q4=mw("authIdTokenMaxAge")||Y4;let iS=null;const X4=n=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>Q4)return;const s=t==null?void 0:t.token;iS!==s&&(iS=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function W4(n=Ew()){const e=Sy(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DP(n,{popupRedirectResolver:H4,persistence:[t4,qP,AR]}),a=mw("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const c=X4(l.toString());jP(t,c,()=>c(t.currentUser)),UP(t,d=>c(d))}}const s=fw("auth");return s&&xP(t,`http://${s}`),t}function J4(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}AP({loadJS(n){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",n),a.onload=e,a.onerror=s=>{const l=ci("internal-error");l.customData=s,t(l)},a.type="text/javascript",a.charset="UTF-8",J4().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});K4("Browser");const Z4={BASE_URL:"/GIG_Roster/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"chris.sm.kang542@gmail.com",VITE_FIREBASE_API_KEY:"AIzaSyBrABPwgyh2eahhQZEqjh7vXgNLxtSoOcY",VITE_FIREBASE_APP_ID:"1:770561557903:web:fbcc85b6e9be1e06b2f7fa",VITE_FIREBASE_AUTH_DOMAIN:"gig-roster.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"770561557903",VITE_FIREBASE_PROJECT_ID:"gig-roster",VITE_FIREBASE_STORAGE_BUCKET:"gig-roster.firebasestorage.app"};function nl(n){const e=Z4[n];if(!e)throw new Error(`Missing environment variable: ${n}. Did you forget to create a .env.local?`);return e}const ek={apiKey:nl("VITE_FIREBASE_API_KEY"),authDomain:nl("VITE_FIREBASE_AUTH_DOMAIN"),projectId:nl("VITE_FIREBASE_PROJECT_ID"),storageBucket:nl("VITE_FIREBASE_STORAGE_BUCKET"),messagingSenderId:nl("VITE_FIREBASE_MESSAGING_SENDER_ID"),appId:nl("VITE_FIREBASE_APP_ID")},MR=vw(ek),Il=W4(MR),tk=new oa,Rn=LV(MR),VR=M.createContext(void 0),nk=({children:n})=>{const[e,t]=M.useState(()=>{const c=localStorage.getItem("app-theme");return c||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}),a=M.useCallback(c=>{document.documentElement.setAttribute("data-theme",c),localStorage.setItem("app-theme",c)},[]);M.useEffect(()=>{a(e)},[e,a]);const s=M.useCallback(c=>{t(c),a(c);const d=Il.currentUser;if(d){const p=Qr(Rn,"users",d.uid);Bd(p,{preferredTheme:c}).catch(g=>console.error("Error updating preferred theme in Firebase:",g))}},[a]),l=M.useCallback(()=>{t(c=>c==="light"?"dark":"light")},[t]);return M.useEffect(()=>Il.onAuthStateChanged(async d=>{if(d){const p=Qr(Rn,"users",d.uid),g=await Mc(p);if(g.exists()&&g.data().preferredTheme){const _=g.data().preferredTheme;t(_),a(_)}}}),[a]),A.jsx(VR.Provider,{value:{theme:e,toggleTheme:l,setTheme:s},children:n})},jl=({container:n=!0})=>{const e=A.jsx("div",{className:"spinner"});return n?A.jsx("div",{className:"spinner-container",children:e}):e},Dl=()=>A.jsx("div",{className:"loading-container",children:A.jsx(jl,{container:!1})}),rk=()=>{const n=yt(a=>a.auth.firebaseUser),e=yt(a=>a.auth.userData);return yt(a=>a.auth.loading)?A.jsx(Dl,{}):n?e?e.isApproved?A.jsx(ss,{to:"/app/dashboard",replace:!0}):A.jsx(ss,{to:"/guest",replace:!0}):A.jsx(Dl,{}):A.jsx(ss,{to:"/login",replace:!0})};function kn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var ik=typeof Symbol=="function"&&Symbol.observable||"@@observable",aS=ik,Tg=()=>Math.random().toString(36).substring(7).split("").join("."),ak={INIT:`@@redux/INIT${Tg()}`,REPLACE:`@@redux/REPLACE${Tg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Tg()}`},ld=ak;function y_(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function PR(n,e,t){if(typeof n!="function")throw new Error(kn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(kn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(kn(1));return t(PR)(n,e)}let a=n,s=e,l=new Map,c=l,d=0,p=!1;function g(){c===l&&(c=new Map,l.forEach((V,F)=>{c.set(F,V)}))}function _(){if(p)throw new Error(kn(3));return s}function E(V){if(typeof V!="function")throw new Error(kn(4));if(p)throw new Error(kn(5));let F=!0;g();const H=d++;return c.set(H,V),function(){if(F){if(p)throw new Error(kn(6));F=!1,g(),c.delete(H),l=null}}}function S(V){if(!y_(V))throw new Error(kn(7));if(typeof V.type>"u")throw new Error(kn(8));if(typeof V.type!="string")throw new Error(kn(17));if(p)throw new Error(kn(9));try{p=!0,s=a(s,V)}finally{p=!1}return(l=c).forEach(H=>{H()}),V}function R(V){if(typeof V!="function")throw new Error(kn(10));a=V,S({type:ld.REPLACE})}function U(){const V=E;return{subscribe(F){if(typeof F!="object"||F===null)throw new Error(kn(11));function H(){const Q=F;Q.next&&Q.next(_())}return H(),{unsubscribe:V(H)}},[aS](){return this}}}return S({type:ld.INIT}),{dispatch:S,subscribe:E,getState:_,replaceReducer:R,[aS]:U}}function sk(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:ld.INIT})>"u")throw new Error(kn(12));if(typeof t(void 0,{type:ld.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kn(13))})}function ok(n){const e=Object.keys(n),t={};for(let l=0;l<e.length;l++){const c=e[l];typeof n[c]=="function"&&(t[c]=n[c])}const a=Object.keys(t);let s;try{sk(t)}catch(l){s=l}return function(c={},d){if(s)throw s;let p=!1;const g={};for(let _=0;_<a.length;_++){const E=a[_],S=t[E],R=c[E],U=S(R,d);if(typeof U>"u")throw d&&d.type,new Error(kn(14));g[E]=U,p=p||U!==R}return p=p||a.length!==Object.keys(c).length,p?g:c}}function ud(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...a)=>e(t(...a)))}function lk(...n){return e=>(t,a)=>{const s=e(t,a);let l=()=>{throw new Error(kn(15))};const c={getState:s.getState,dispatch:(p,...g)=>l(p,...g)},d=n.map(p=>p(c));return l=ud(...d)(s.dispatch),{...s,dispatch:l}}}function uk(n){return y_(n)&&"type"in n&&typeof n.type=="string"}var kR=Symbol.for("immer-nothing"),sS=Symbol.for("immer-draftable"),tr=Symbol.for("immer-state");function oi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Ir=Object,Nl=Ir.getPrototypeOf,cd="constructor",Gd="prototype",ny="configurable",hd="enumerable",Df="writable",dc="value",ga=n=>!!n&&!!n[tr];function fi(n){var e;return n?LR(n)||Kd(n)||!!n[sS]||!!((e=n[cd])!=null&&e[sS])||Yd(n)||Qd(n):!1}var ck=Ir[Gd][cd].toString(),oS=new WeakMap;function LR(n){if(!n||!__(n))return!1;const e=Nl(n);if(e===null||e===Ir[Gd])return!0;const t=Ir.hasOwnProperty.call(e,cd)&&e[cd];if(t===Object)return!0;if(!ll(t))return!1;let a=oS.get(t);return a===void 0&&(a=Function.toString.call(t),oS.set(t,a)),a===ck}function $d(n,e,t=!0){Uc(n)===0?(t?Reflect.ownKeys(n):Ir.keys(n)).forEach(s=>{e(s,n[s],n)}):n.forEach((a,s)=>e(s,a,n))}function Uc(n){const e=n[tr];return e?e.type_:Kd(n)?1:Yd(n)?2:Qd(n)?3:0}var lS=(n,e,t=Uc(n))=>t===2?n.has(e):Ir[Gd].hasOwnProperty.call(n,e),ry=(n,e,t=Uc(n))=>t===2?n.get(e):n[e],fd=(n,e,t,a=Uc(n))=>{a===2?n.set(e,t):a===3?n.add(t):n[e]=t};function hk(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}var Kd=Array.isArray,Yd=n=>n instanceof Map,Qd=n=>n instanceof Set,__=n=>typeof n=="object",ll=n=>typeof n=="function",bg=n=>typeof n=="boolean";function fk(n){const e=+n;return Number.isInteger(e)&&String(e)===n}var sa=n=>n.copy_||n.base_,v_=n=>n.modified_?n.copy_:n.base_;function iy(n,e){if(Yd(n))return new Map(n);if(Qd(n))return new Set(n);if(Kd(n))return Array[Gd].slice.call(n);const t=LR(n);if(e===!0||e==="class_only"&&!t){const a=Ir.getOwnPropertyDescriptors(n);delete a[tr];let s=Reflect.ownKeys(a);for(let l=0;l<s.length;l++){const c=s[l],d=a[c];d[Df]===!1&&(d[Df]=!0,d[ny]=!0),(d.get||d.set)&&(a[c]={[ny]:!0,[Df]:!0,[hd]:d[hd],[dc]:n[c]})}return Ir.create(Nl(n),a)}else{const a=Nl(n);if(a!==null&&t)return{...n};const s=Ir.create(a);return Ir.assign(s,n)}}function E_(n,e=!1){return Xd(n)||ga(n)||!fi(n)||(Uc(n)>1&&Ir.defineProperties(n,{set:df,add:df,clear:df,delete:df}),Ir.freeze(n),e&&$d(n,(t,a)=>{E_(a,!0)},!1)),n}function dk(){oi(2)}var df={[dc]:dk};function Xd(n){return n===null||!__(n)?!0:Ir.isFrozen(n)}var dd="MapSet",ay="Patches",uS="ArrayMethods",UR={};function lo(n){const e=UR[n];return e||oi(0,n),e}var cS=n=>!!UR[n],mc,jR=()=>mc,mk=(n,e)=>({drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:cS(dd)?lo(dd):void 0,arrayMethodsPlugin_:cS(uS)?lo(uS):void 0});function hS(n,e){e&&(n.patchPlugin_=lo(ay),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function sy(n){oy(n),n.drafts_.forEach(pk),n.drafts_=null}function oy(n){n===mc&&(mc=n.parent_)}var fS=n=>mc=mk(mc,n);function pk(n){const e=n[tr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function dS(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];if(n!==void 0&&n!==t){t[tr].modified_&&(sy(e),oi(4)),fi(n)&&(n=mS(e,n));const{patchPlugin_:s}=e;s&&s.generateReplacementPatches_(t[tr].base_,n,e)}else n=mS(e,t);return gk(e,n,!0),sy(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==kR?n:void 0}function mS(n,e){if(Xd(e))return e;const t=e[tr];if(!t)return md(e,n.handledSet_,n);if(!Wd(t,n))return e;if(!t.modified_)return t.base_;if(!t.finalized_){const{callbacks_:a}=t;if(a)for(;a.length>0;)a.pop()(n);FR(t,n)}return t.copy_}function gk(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&E_(e,t)}function zR(n){n.finalized_=!0,n.scope_.unfinalizedDrafts_--}var Wd=(n,e)=>n.scope_===e,yk=[];function BR(n,e,t,a){const s=sa(n),l=n.type_;if(a!==void 0&&ry(s,a,l)===e){fd(s,a,t,l);return}if(!n.draftLocations_){const d=n.draftLocations_=new Map;$d(s,(p,g)=>{if(ga(g)){const _=d.get(g)||[];_.push(p),d.set(g,_)}})}const c=n.draftLocations_.get(e)??yk;for(const d of c)fd(s,d,t,l)}function _k(n,e,t){n.callbacks_.push(function(s){var d;const l=e;if(!l||!Wd(l,s))return;(d=s.mapSetPlugin_)==null||d.fixSetContents(l);const c=v_(l);BR(n,l.draft_??l,c,t),FR(l,s)})}function FR(n,e){var a;if(n.modified_&&!n.finalized_&&(n.type_===3||n.type_===1&&n.allIndicesReassigned_||(((a=n.assigned_)==null?void 0:a.size)??0)>0)){const{patchPlugin_:s}=e;if(s){const l=s.getPath(n);l&&s.generatePatches_(n,l,e)}zR(n)}}function vk(n,e,t){const{scope_:a}=n;if(ga(t)){const s=t[tr];Wd(s,a)&&s.callbacks_.push(function(){Nf(n);const c=v_(s);BR(n,t,c,e)})}else fi(t)&&n.callbacks_.push(function(){const l=sa(n);n.type_===3?l.has(t)&&md(t,a.handledSet_,a):ry(l,e,n.type_)===t&&a.drafts_.length>1&&(n.assigned_.get(e)??!1)===!0&&n.copy_&&md(ry(n.copy_,e,n.type_),a.handledSet_,a)})}function md(n,e,t){return!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||ga(n)||e.has(n)||!fi(n)||Xd(n)||(e.add(n),$d(n,(a,s)=>{if(ga(s)){const l=s[tr];if(Wd(l,t)){const c=v_(l);fd(n,a,c,n.type_),zR(l)}}else fi(s)&&md(s,e,t)})),n}function Ek(n,e){const t=Kd(n),a={type_:t?1:0,scope_:e?e.scope_:jR(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=a,l=pd;t&&(s=[a],l=pc);const{revoke:c,proxy:d}=Proxy.revocable(s,l);return a.draft_=d,a.revoke_=c,[d,a]}var pd={get(n,e){if(e===tr)return n;let t=n.scope_.arrayMethodsPlugin_;const a=n.type_===1&&typeof e=="string";if(a&&t!=null&&t.isArrayOperationMethod(e))return t.createMethodInterceptor(n,e);const s=sa(n);if(!lS(s,e,n.type_))return Tk(n,s,e);const l=s[e];if(n.finalized_||!fi(l)||a&&n.operationMethod&&(t!=null&&t.isMutatingArrayMethod(n.operationMethod))&&fk(e))return l;if(l===Sg(n.base_,e)){Nf(n);const c=n.type_===1?+e:e,d=uy(n.scope_,l,n,c);return n.copy_[c]=d}return l},has(n,e){return e in sa(n)},ownKeys(n){return Reflect.ownKeys(sa(n))},set(n,e,t){const a=qR(sa(n),e);if(a!=null&&a.set)return a.set.call(n.draft_,t),!0;if(!n.modified_){const s=Sg(sa(n),e),l=s==null?void 0:s[tr];if(l&&l.base_===t)return n.copy_[e]=t,n.assigned_.set(e,!1),!0;if(hk(t,s)&&(t!==void 0||lS(n.base_,e,n.type_)))return!0;Nf(n),ly(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_.set(e,!0),vk(n,e,t)),!0},deleteProperty(n,e){return Nf(n),Sg(n.base_,e)!==void 0||e in n.base_?(n.assigned_.set(e,!1),ly(n)):n.assigned_.delete(e),n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=sa(n),a=Reflect.getOwnPropertyDescriptor(t,e);return a&&{[Df]:!0,[ny]:n.type_!==1||e!=="length",[hd]:a[hd],[dc]:t[e]}},defineProperty(){oi(11)},getPrototypeOf(n){return Nl(n.base_)},setPrototypeOf(){oi(12)}},pc={};for(let n in pd){let e=pd[n];pc[n]=function(){const t=arguments;return t[0]=t[0][0],e.apply(this,t)}}pc.deleteProperty=function(n,e){return pc.set.call(this,n,e,void 0)};pc.set=function(n,e,t){return pd.set.call(this,n[0],e,t,n[0])};function Sg(n,e){const t=n[tr];return(t?sa(t):n)[e]}function Tk(n,e,t){var s;const a=qR(e,t);return a?dc in a?a[dc]:(s=a.get)==null?void 0:s.call(n.draft_):void 0}function qR(n,e){if(!(e in n))return;let t=Nl(n);for(;t;){const a=Object.getOwnPropertyDescriptor(t,e);if(a)return a;t=Nl(t)}}function ly(n){n.modified_||(n.modified_=!0,n.parent_&&ly(n.parent_))}function Nf(n){n.copy_||(n.assigned_=new Map,n.copy_=iy(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var bk=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,a)=>{if(ll(e)&&!ll(t)){const l=t;t=e;const c=this;return function(p=l,...g){return c.produce(p,_=>t.call(this,_,...g))}}ll(t)||oi(6),a!==void 0&&!ll(a)&&oi(7);let s;if(fi(e)){const l=fS(this),c=uy(l,e,void 0);let d=!0;try{s=t(c),d=!1}finally{d?sy(l):oy(l)}return hS(l,a),dS(s,l)}else if(!e||!__(e)){if(s=t(e),s===void 0&&(s=e),s===kR&&(s=void 0),this.autoFreeze_&&E_(s,!0),a){const l=[],c=[];lo(ay).generateReplacementPatches_(e,s,{patches_:l,inversePatches_:c}),a(l,c)}return s}else oi(1,e)},this.produceWithPatches=(e,t)=>{if(ll(e))return(c,...d)=>this.produceWithPatches(c,p=>e(p,...d));let a,s;return[this.produce(e,t,(c,d)=>{a=c,s=d}),a,s]},bg(n==null?void 0:n.autoFreeze)&&this.setAutoFreeze(n.autoFreeze),bg(n==null?void 0:n.useStrictShallowCopy)&&this.setUseStrictShallowCopy(n.useStrictShallowCopy),bg(n==null?void 0:n.useStrictIteration)&&this.setUseStrictIteration(n.useStrictIteration)}createDraft(n){fi(n)||oi(8),ga(n)&&(n=Sk(n));const e=fS(this),t=uy(e,n,void 0);return t[tr].isManual_=!0,oy(e),t}finishDraft(n,e){const t=n&&n[tr];(!t||!t.isManual_)&&oi(9);const{scope_:a}=t;return hS(a,e),dS(void 0,a)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}setUseStrictIteration(n){this.useStrictIteration_=n}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const s=e[t];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}t>-1&&(e=e.slice(t+1));const a=lo(ay).applyPatches_;return ga(n)?a(n,e):this.produce(n,s=>a(s,e))}};function uy(n,e,t,a){const[s,l]=Yd(e)?lo(dd).proxyMap_(e,t):Qd(e)?lo(dd).proxySet_(e,t):Ek(e,t);return((t==null?void 0:t.scope_)??jR()).drafts_.push(s),l.callbacks_=(t==null?void 0:t.callbacks_)??[],l.key_=a,t&&a!==void 0?_k(t,l,a):l.callbacks_.push(function(p){var _;(_=p.mapSetPlugin_)==null||_.fixSetContents(l);const{patchPlugin_:g}=p;l.modified_&&g&&g.generatePatches_(l,[],p)}),s}function Sk(n){return ga(n)||oi(10,n),HR(n)}function HR(n){if(!fi(n)||Xd(n))return n;const e=n[tr];let t,a=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=iy(n,e.scope_.immer_.useStrictShallowCopy_),a=e.scope_.immer_.shouldUseStrictIteration()}else t=iy(n,!0);return $d(t,(s,l)=>{fd(t,s,HR(l))},a),e&&(e.finalized_=!1),t}var wk=new bk,GR=wk.produce;function $R(n){return({dispatch:t,getState:a})=>s=>l=>typeof l=="function"?l(t,a,n):s(l)}var Ak=$R(),Rk=$R,Ck=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?ud:ud.apply(null,arguments)},Ik=n=>n&&typeof n.match=="function";function Zu(n,e){function t(...a){if(e){let s=e(...a);if(!s)throw new Error(ha(0));return{type:n,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:n,payload:a[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=a=>uk(a)&&a.type===n,t}var KR=class Hu extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Hu.prototype)}static get[Symbol.species](){return Hu}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Hu(...e[0].concat(this)):new Hu(...e.concat(this))}};function pS(n){return fi(n)?GR(n,()=>{}):n}function mf(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function Dk(n){return typeof n=="boolean"}var Nk=()=>function(e){const{thunk:t=!0,immutableCheck:a=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=e??{};let c=new KR;return t&&(Dk(t)?c.push(Ak):c.push(Rk(t.extraArgument))),c},xk="RTK_autoBatch",gS=n=>e=>{setTimeout(e,n)},Ok=(n={type:"raf"})=>e=>(...t)=>{const a=e(...t);let s=!0,l=!1,c=!1;const d=new Set,p=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gS(10):n.type==="callback"?n.queueNotification:gS(n.timeout),g=()=>{c=!1,l&&(l=!1,d.forEach(_=>_()))};return Object.assign({},a,{subscribe(_){const E=()=>s&&_(),S=a.subscribe(E);return d.add(_),()=>{S(),d.delete(_)}},dispatch(_){var E;try{return s=!((E=_==null?void 0:_.meta)!=null&&E[xk]),l=!s,l&&(c||(c=!0,p(g))),a.dispatch(_)}finally{s=!0}}})},Mk=n=>function(t){const{autoBatch:a=!0}=t??{};let s=new KR(n);return a&&s.push(Ok(typeof a=="object"?a:void 0)),s};function Vk(n){const e=Nk(),{reducer:t=void 0,middleware:a,devTools:s=!0,preloadedState:l=void 0,enhancers:c=void 0}=n||{};let d;if(typeof t=="function")d=t;else if(y_(t))d=ok(t);else throw new Error(ha(1));let p;typeof a=="function"?p=a(e):p=e();let g=ud;s&&(g=Ck({trace:!1,...typeof s=="object"&&s}));const _=lk(...p),E=Mk(_);let S=typeof c=="function"?c(E):E();const R=g(...S);return PR(d,l,R)}function YR(n){const e={},t=[];let a;const s={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ha(28));if(d in e)throw new Error(ha(29));return e[d]=c,s},addAsyncThunk(l,c){return c.pending&&(e[l.pending.type]=c.pending),c.rejected&&(e[l.rejected.type]=c.rejected),c.fulfilled&&(e[l.fulfilled.type]=c.fulfilled),c.settled&&t.push({matcher:l.settled,reducer:c.settled}),s},addMatcher(l,c){return t.push({matcher:l,reducer:c}),s},addDefaultCase(l){return a=l,s}};return n(s),[e,t,a]}function Pk(n){return typeof n=="function"}function kk(n,e){let[t,a,s]=YR(e),l;if(Pk(n))l=()=>pS(n());else{const d=pS(n);l=()=>d}function c(d=l(),p){let g=[t[p.type],...a.filter(({matcher:_})=>_(p)).map(({reducer:_})=>_)];return g.filter(_=>!!_).length===0&&(g=[s]),g.reduce((_,E)=>{if(E)if(ga(_)){const R=E(_,p);return R===void 0?_:R}else{if(fi(_))return GR(_,S=>E(S,p));{const S=E(_,p);if(S===void 0){if(_===null)return _;throw Error("A case reducer on a non-draftable value must not return undefined")}return S}}return _},d)}return c.getInitialState=l,c}var Lk=(n,e)=>Ik(n)?n.match(e):n(e);function Uk(...n){return e=>n.some(t=>Lk(t,e))}var jk="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zk=(n=21)=>{let e="",t=n;for(;t--;)e+=jk[Math.random()*64|0];return e},Bk=["name","message","stack","code"],wg=class{constructor(n,e){Gp(this,"_type");this.payload=n,this.meta=e}},yS=class{constructor(n,e){Gp(this,"_type");this.payload=n,this.meta=e}},Fk=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of Bk)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},_S="External signal was aborted",Or=(()=>{function n(e,t,a){const s=Zu(e+"/fulfilled",(p,g,_,E)=>({payload:p,meta:{...E||{},arg:_,requestId:g,requestStatus:"fulfilled"}})),l=Zu(e+"/pending",(p,g,_)=>({payload:void 0,meta:{..._||{},arg:g,requestId:p,requestStatus:"pending"}})),c=Zu(e+"/rejected",(p,g,_,E,S)=>({payload:E,error:(a&&a.serializeError||Fk)(p||"Rejected"),meta:{...S||{},arg:_,requestId:g,rejectedWithValue:!!E,requestStatus:"rejected",aborted:(p==null?void 0:p.name)==="AbortError",condition:(p==null?void 0:p.name)==="ConditionError"}}));function d(p,{signal:g}={}){return(_,E,S)=>{const R=a!=null&&a.idGenerator?a.idGenerator(p):zk(),U=new AbortController;let B,V;function F(q){V=q,U.abort()}g&&(g.aborted?F(_S):g.addEventListener("abort",()=>F(_S),{once:!0}));const H=(async function(){var re,Y;let q;try{let b=(re=a==null?void 0:a.condition)==null?void 0:re.call(a,p,{getState:E,extra:S});if(Hk(b)&&(b=await b),b===!1||U.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const w=new Promise((I,N)=>{B=()=>{N({name:"AbortError",message:V||"Aborted"})},U.signal.addEventListener("abort",B,{once:!0})});_(l(R,p,(Y=a==null?void 0:a.getPendingMeta)==null?void 0:Y.call(a,{requestId:R,arg:p},{getState:E,extra:S}))),q=await Promise.race([w,Promise.resolve(t(p,{dispatch:_,getState:E,extra:S,requestId:R,signal:U.signal,abort:F,rejectWithValue:(I,N)=>new wg(I,N),fulfillWithValue:(I,N)=>new yS(I,N)})).then(I=>{if(I instanceof wg)throw I;return I instanceof yS?s(I.payload,R,p,I.meta):s(I,R,p)})])}catch(b){q=b instanceof wg?c(null,R,p,b.payload,b.meta):c(b,R,p)}finally{B&&U.signal.removeEventListener("abort",B)}return a&&!a.dispatchConditionRejection&&c.match(q)&&q.meta.condition||_(q),q})();return Object.assign(H,{abort:F,requestId:R,arg:p,unwrap(){return H.then(qk)}})}}return Object.assign(d,{pending:l,rejected:c,fulfilled:s,settled:Uk(c,s),typePrefix:e})}return n.withTypes=()=>n,n})();function qk(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function Hk(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var Gk=Symbol.for("rtk-slice-createasyncthunk");function $k(n,e){return`${n}/${e}`}function Kk({creators:n}={}){var t;const e=(t=n==null?void 0:n.asyncThunk)==null?void 0:t[Gk];return function(s){const{name:l,reducerPath:c=l}=s;if(!l)throw new Error(ha(11));const d=(typeof s.reducers=="function"?s.reducers(Qk()):s.reducers)||{},p=Object.keys(d),g={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},_={addCase(Q,re){const Y=typeof Q=="string"?Q:Q.type;if(!Y)throw new Error(ha(12));if(Y in g.sliceCaseReducersByType)throw new Error(ha(13));return g.sliceCaseReducersByType[Y]=re,_},addMatcher(Q,re){return g.sliceMatchers.push({matcher:Q,reducer:re}),_},exposeAction(Q,re){return g.actionCreators[Q]=re,_},exposeCaseReducer(Q,re){return g.sliceCaseReducersByName[Q]=re,_}};p.forEach(Q=>{const re=d[Q],Y={reducerName:Q,type:$k(l,Q),createNotation:typeof s.reducers=="function"};Wk(re)?Zk(Y,re,_,e):Xk(Y,re,_)});function E(){const[Q={},re=[],Y=void 0]=typeof s.extraReducers=="function"?YR(s.extraReducers):[s.extraReducers],b={...Q,...g.sliceCaseReducersByType};return kk(s.initialState,w=>{for(let I in b)w.addCase(I,b[I]);for(let I of g.sliceMatchers)w.addMatcher(I.matcher,I.reducer);for(let I of re)w.addMatcher(I.matcher,I.reducer);Y&&w.addDefaultCase(Y)})}const S=Q=>Q,R=new Map,U=new WeakMap;let B;function V(Q,re){return B||(B=E()),B(Q,re)}function F(){return B||(B=E()),B.getInitialState()}function H(Q,re=!1){function Y(w){let I=w[Q];return typeof I>"u"&&re&&(I=mf(U,Y,F)),I}function b(w=S){const I=mf(R,re,()=>new WeakMap);return mf(I,w,()=>{const N={};for(const[x,P]of Object.entries(s.selectors??{}))N[x]=Yk(P,w,()=>mf(U,w,F),re);return N})}return{reducerPath:Q,getSelectors:b,get selectors(){return b(Y)},selectSlice:Y}}const q={name:l,reducer:V,actions:g.actionCreators,caseReducers:g.sliceCaseReducersByName,getInitialState:F,...H(c),injectInto(Q,{reducerPath:re,...Y}={}){const b=re??c;return Q.inject({reducerPath:b,reducer:V},Y),{...q,...H(b,!0)}}};return q}}function Yk(n,e,t,a){function s(l,...c){let d=e(l);return typeof d>"u"&&a&&(d=t()),n(d,...c)}return s.unwrapped=n,s}var po=Kk();function Qk(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function Xk({type:n,reducerName:e,createNotation:t},a,s){let l,c;if("reducer"in a){if(t&&!Jk(a))throw new Error(ha(17));l=a.reducer,c=a.prepare}else l=a;s.addCase(n,l).exposeCaseReducer(e,l).exposeAction(e,c?Zu(n,c):Zu(n))}function Wk(n){return n._reducerDefinitionType==="asyncThunk"}function Jk(n){return n._reducerDefinitionType==="reducerWithPrepare"}function Zk({type:n,reducerName:e},t,a,s){if(!s)throw new Error(ha(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:p,settled:g,options:_}=t,E=s(n,l,_);a.exposeAction(e,E),c&&a.addCase(E.fulfilled,c),d&&a.addCase(E.pending,d),p&&a.addCase(E.rejected,p),g&&a.addMatcher(E.settled,g),a.exposeCaseReducer(e,{fulfilled:c||pf,pending:d||pf,rejected:p||pf,settled:g||pf})}function pf(){}function ha(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const eL={positions:[],loading:!1,error:null,fetched:!1},no=Or("positions/fetchPositions",async(n,{rejectWithValue:e})=>{try{const t=Qr(Rn,"metadata","positions"),a=await Mc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list:[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch positions")}}),QR=Or("positions/updatePositions",async(n,{rejectWithValue:e})=>{try{const t=Qr(Rn,"metadata","positions");return await Bd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update positions")}}),tL=po({name:"positions",initialState:eL,reducers:{},extraReducers:n=>{n.addCase(no.pending,e=>{e.loading=!0,e.error=null}).addCase(no.fulfilled,(e,t)=>{e.positions=t.payload,e.loading=!1,e.fetched=!0}).addCase(no.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(QR.fulfilled,(e,t)=>{e.positions=t.payload})}}),nL=tL.reducer,rL={teams:[],loading:!1,error:null,fetched:!1},yl=Or("teams/fetchTeams",async(n,{rejectWithValue:e})=>{try{const t=Qr(Rn,"metadata","teams"),a=await Mc(t);if(a.exists()){const s=a.data();return Array.isArray(s.list)?s.list.map(c=>({...c,maxConflict:c.maxConflict||1})):[]}return[]}catch(t){return e(t instanceof Error?t.message:"Failed to fetch teams")}}),xf=Or("teams/updateTeams",async(n,{rejectWithValue:e})=>{try{const t=Qr(Rn,"metadata","teams");return await Bd(t,{list:n}),n}catch(t){return e(t instanceof Error?t.message:"Failed to update teams")}}),XR=po({name:"teams",initialState:rL,reducers:{clearError:n=>{n.error=null}},extraReducers:n=>{n.addCase(yl.pending,e=>{e.loading=!0,e.error=null}).addCase(yl.fulfilled,(e,t)=>{e.teams=t.payload,e.loading=!1,e.fetched=!0}).addCase(yl.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(xf.pending,e=>{e.error=null}).addCase(xf.fulfilled,(e,t)=>{e.teams=t.payload}).addCase(xf.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:bU}=XR.actions,iL=XR.reducer,aL=()=>{const n=di(),{firebaseUser:e,userData:t,loading:a}=yt(p=>p.auth),{fetched:s,loading:l}=yt(p=>p.teams),{fetched:c,loading:d}=yt(p=>p.positions);return M.useEffect(()=>{e&&(t!=null&&t.isApproved)&&(!s&&!l&&n(yl()),!c&&!d&&n(no()))},[n,e,t,s,l,c,d]),a||t!=null&&t.isApproved&&(!s||!c)?A.jsx(Dl,{}):e?t?t.isApproved?A.jsx(rw,{}):A.jsx(ss,{to:"/guest",replace:!0}):A.jsx(Dl,{}):A.jsx(ss,{to:"/login",replace:!0})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=(...n)=>n.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=n=>{const e=oL(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:s="",children:l,iconNode:c,...d},p)=>M.createElement("svg",{ref:p,...lL,width:e,height:e,stroke:n,strokeWidth:a?Number(t)*24/Number(e):t,className:WR("lucide",s),...!l&&!uL(d)&&{"aria-hidden":"true"},...d},[...c.map(([g,_])=>M.createElement(g,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=(n,e)=>{const t=M.forwardRef(({className:a,...s},l)=>M.createElement(cL,{ref:l,iconNode:e,className:WR(`lucide-${sL(vS(n))}`,`lucide-${n}`,a),...s}));return t.displayName=vS(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JR=go("chevron-up",hL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],dL=go("copy",fL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"m15 10 5 5-5 5",key:"qqa56n"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]],ZR=go("corner-down-right",mL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],gL=go("moon",pL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],_L=go("panel-left-close",yL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],EL=go("panel-left-open",vL);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],bL=go("sun",TL),SL=()=>{try{const n=localStorage.getItem("hidden-users");return n?JSON.parse(n):{}}catch{return{}}},wL={isMobileSidebarOpen:!1,isDesktopSidebarExpanded:!0,expandedTeams:[],hiddenUsers:SL(),lastVisitedPaths:{}},e1=po({name:"ui",initialState:wL,reducers:{setMobileSidebarOpen:(n,e)=>{n.isMobileSidebarOpen=e.payload},setDesktopSidebarExpanded:(n,e)=>{n.isDesktopSidebarExpanded=e.payload},setLastVisitedPath:(n,e)=>{const{tabId:t,path:a}=e.payload;n.lastVisitedPaths[t]=a},toggleTeamExpansion:(n,e)=>{const t=e.payload,a=n.expandedTeams.indexOf(t);a>=0?n.expandedTeams.splice(a,1):n.expandedTeams.push(t)},toggleUserVisibility:(n,e)=>{const{teamName:t,positionName:a,userEmail:s}=e.payload;n.hiddenUsers[t]||(n.hiddenUsers[t]={}),n.hiddenUsers[t][a]||(n.hiddenUsers[t][a]=[]);const l=n.hiddenUsers[t][a],c=l.indexOf(s);c>=0?l.splice(c,1):l.push(s),localStorage.setItem("hidden-users",JSON.stringify(n.hiddenUsers))}}}),{setMobileSidebarOpen:Gu,setDesktopSidebarExpanded:AL,setLastVisitedPath:RL,toggleTeamExpansion:CL,toggleUserVisibility:IL}=e1.actions,DL=e1.reducer,NL=()=>{const n=M.useContext(VR);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},T_=({showText:n})=>{const{theme:e,toggleTheme:t}=NL();return A.jsxs("button",{className:"theme-toggle-button",onClick:t,"aria-label":"Toggle theme",children:[e==="dark"?A.jsx(bL,{size:20}):A.jsx(gL,{size:20}),n&&A.jsx("span",{children:"Toggle theme"})]})},xL=({title:n,hasSideNav:e=!0})=>{const t=di(),{isMobileSidebarOpen:a}=yt(l=>l.ui),s=()=>{e&&t(Gu(!a))};return A.jsxs("header",{className:"mobile-header",children:[A.jsxs("div",{className:`mobile-header-pill ${a?"mobile-header-pill-active":""} ${e?"":"mobile-header-pill-disabled"}`,onClick:s,children:[A.jsx("span",{className:"mobile-header-text",children:n}),e&&A.jsx(JR,{className:`mobile-header-chevron ${a?"rotate":""}`})]}),A.jsx(T_,{})]})};var en=(n=>(n.DASHBOARD="dashboard",n.ROSTER="roster",n.SETTINGS="settings",n))(en||{}),cl=(n=>(n.PROFILE="Profile",n.USER_MANAGEMENT="Users",n.POSITIONS="Positions",n.TEAMS="Teams",n))(cl||{});const b_=[{id:"dashboard",label:"Dashboard",icon:""},{id:"roster",label:"Roster",icon:""},{id:"settings",label:"Settings",icon:""}],ES=[{id:"Profile",label:"My Profile",icon:""},{id:"Users",label:"User Management",icon:"",adminOnly:!0},{id:"Teams",label:"Team Management",icon:"",adminOnly:!0},{id:"Positions",label:"Position Setup",icon:"",adminOnly:!0}],OL=()=>{const n=co(),e=Wr(),{lastVisitedPaths:t}=yt(l=>l.ui),a=e.pathname.includes("/settings")?en.SETTINGS:e.pathname.includes("/dashboard")?en.DASHBOARD:en.ROSTER,s=l=>{if(a===l){l===en.DASHBOARD&&n("/app/dashboard");return}const c=t[l];n(c||`/app/${l}`)};return A.jsx("nav",{className:"bottom-nav-container",children:A.jsx("div",{className:"bottom-nav",children:b_.map(l=>A.jsxs("button",{className:`bottom-nav-btn ${a===l.id?"bottom-nav-btn-active":""}`,onClick:()=>s(l.id),children:[A.jsx("span",{children:l.icon}),A.jsx("span",{children:l.label})]},l.id))})})},ML=()=>{var q;const n=co(),e=Wr(),t=Ed(),a=di(),{userData:s}=yt(Q=>Q.auth),{isDesktopSidebarExpanded:l,expandedTeams:c}=yt(Q=>Q.ui),{teams:d,fetched:p,loading:g}=yt(Q=>Q.teams),{fetched:_}=yt(Q=>Q.positions),E=e.pathname.includes("/settings")?en.SETTINGS:e.pathname.includes("/dashboard")?en.DASHBOARD:en.ROSTER,{teamName:S,positionName:R,section:U}=t,B=R||U;M.useEffect(()=>{p||a(yl()),_||a(no())},[a,p,_]);const V=M.useCallback(Q=>{n(Q)},[n]),F=Q=>{a(CL(Q))},H=()=>{const Q=b_.find(Y=>Y.id===E),re=Q?Q.label:"GIG ROSTER";return S&&B?`${S}  ${B}`:S||(B?`${re}  ${B}`:re)};return A.jsxs("aside",{className:"side-nav",children:[A.jsxs("div",{className:"sidebar-content",children:[A.jsxs("div",{className:"tablet-sidebar-header",children:[l&&A.jsx("h3",{children:H()}),A.jsx("button",{className:"sidebar-toggle-button",onClick:()=>a(AL(!l)),"aria-label":l?"Collapse sidebar":"Expand sidebar",children:l?A.jsx(_L,{size:20}):A.jsx(EL,{size:20})})]}),A.jsxs("nav",{className:"side-menu-list",children:[E===en.ROSTER&&g&&A.jsx("div",{className:"side-nav-item loading",children:"Loading teams..."}),E===en.ROSTER?(q=s==null?void 0:s.teams)==null?void 0:q.map(Q=>{var w,I;const re=d.find(N=>N.name===Q);if(!re)return null;const Y=s.teams.length===1,b=Y||c.includes(re.name);return A.jsxs("div",{children:[!Y&&A.jsxs("div",{className:"sidenav-menu-subheading sidenav-menu-subheading-clickable",style:{cursor:"pointer"},onClick:()=>F(re.name),children:[A.jsxs("div",{children:[re.emoji," ",l&&re.name]}),A.jsx("span",{className:"expand-icon",children:b?"":""})]}),b&&A.jsxs("div",{className:"side-nav-sub-items",children:[(I=(w=re.positions)==null?void 0:w.filter(N=>!N.parentId))==null?void 0:I.map(N=>{const x=B===N.name&&S===re.name;return A.jsxs("button",{className:`side-nav-item side-nav-item-sub ${x?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${re.name}/${N.name}`),a(Gu(!1))},style:{borderLeft:x?`4px solid ${N.colour}`:"4px solid transparent",backgroundColor:x?`${N.colour}15`:"transparent",color:x?N.colour:""},children:[A.jsx("span",{className:"side-emoji",children:N.emoji})," ",l&&N.name]},N.name)}),A.jsxs("button",{className:`side-nav-item side-nav-item-sub ${B==="Absence"&&S===re.name?"side-nav-item-active":""}`,onClick:()=>{V(`/app/roster/${re.name}/Absence`),a(Gu(!1))},style:{borderLeft:B==="Absence"&&S===re.name?"4px solid var(--color-error)":"4px solid transparent",backgroundColor:B==="Absence"&&S===re.name?"var(--background-toggle-off-transparent)":"transparent"},children:[A.jsx("span",{className:"side-emoji",children:""})," ",l&&"Absence"]})]})]},re.name)}):ES.filter(Q=>!Q.adminOnly).map(Q=>A.jsxs("button",{className:`side-nav-item ${B===Q.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${Q.id}`),a(Gu(!1))},children:[A.jsx("span",{className:"side-emoji",children:Q.icon})," ",l&&Q.label]},Q.id))]})]}),(s==null?void 0:s.isAdmin)&&E===en.SETTINGS&&A.jsxs("div",{className:"admin-only-section-wrapper",children:[A.jsx("div",{className:"sidenav-menu-subheading",children:l&&A.jsx("h4",{children:"Admin Only"})}),ES.filter(Q=>Q.adminOnly).map(Q=>A.jsxs("button",{className:`side-nav-item ${B===Q.id?"side-nav-item-active":""}`,onClick:()=>{V(`/app/settings/${Q.id}`),a(Gu(!1))},children:[A.jsx("span",{className:"side-emoji",children:Q.icon})," ",l&&Q.label]},Q.id))]}),A.jsx("div",{className:"sidebar-footer",children:A.jsx(T_,{showText:l})})]})},VL=()=>{const n=di(),e=co(),t=Wr(),a=Ed(),{userData:s}=yt(F=>F.auth),{teams:l}=yt(F=>F.teams),{isMobileSidebarOpen:c,isDesktopSidebarExpanded:d,lastVisitedPaths:p}=yt(F=>F.ui),g=t.pathname.includes("/settings")?en.SETTINGS:t.pathname.includes("/dashboard")?en.DASHBOARD:en.ROSTER,{teamName:_,positionName:E,section:S}=a,R=E||S||null,U=g!==en.DASHBOARD;M.useEffect(()=>{const F=g===en.ROSTER&&!_,H=g===en.SETTINGS&&!R;if(t.pathname.startsWith("/app/")&&!F&&!H&&g!==en.DASHBOARD){const q=t.pathname+t.search;n(RL({tabId:g,path:q}))}},[t.pathname,t.search,g,_,R,n]),M.useEffect(()=>{var Q,re;const F=t.pathname==="/app"||t.pathname==="/app/",H=g===en.ROSTER&&!_,q=g===en.SETTINGS&&!R;if(F)e(p[en.DASHBOARD]||"/app/dashboard",{replace:!0});else if(H){const Y=p[en.ROSTER];if(Y)e(Y,{replace:!0});else if((Q=s==null?void 0:s.teams)!=null&&Q[0]&&l.length>0){const b=l.find(w=>w.name===s.teams[0]);(re=b==null?void 0:b.positions)!=null&&re[0]&&e(`/app/roster/${b.name}/${b.positions[0].name}`,{replace:!0})}}else if(q){const Y=p[en.SETTINGS];e(Y||`/app/settings/${cl.PROFILE}`,{replace:!0})}},[g,_,R,s,l,e,t.pathname,t.search,p]);const B=()=>{const F=b_.find(q=>q.id===g),H=F?F.label:"GIG ROSTER";return _&&R?`${_}  ${R}`:_||(R?`${H}  ${R}`:H)},V=["app-shell",c?"menu-open":"",d?"sidebar-expanded":"sidebar-collapsed",U?"":"no-sidebar"].filter(Boolean).join(" ");return A.jsxs(A.Fragment,{children:[A.jsx(xL,{title:B(),hasSideNav:U}),A.jsxs("div",{className:V,children:[U&&A.jsx(ML,{}),A.jsx("main",{className:"main-content",children:A.jsx("div",{className:"content-container",children:A.jsx(rw,{})})}),A.jsx(OL,{})]})]})},t1=n=>{const e=[];return Object.entries(n).forEach(([t,a])=>{a.forEach(s=>{e.push(`${t}|${s}`)})}),e},n1=n=>{const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),a=String(n.getDate()).padStart(2,"0");return`${e}-${t}-${a}`},_l=()=>new Intl.DateTimeFormat("en-CA",{timeZone:"Pacific/Auckland",year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),PL={entries:{},dirtyEntries:{},loading:!1,saving:!1,error:null},ec=Or("roster/fetchEntries",async(n,{rejectWithValue:e})=>{try{const t=Oc(Dc(Rn,"roster")),a=await Vc(t),s={};return a.docs.forEach(l=>{const c=l.data(),d=c.updatedAt,p={...c,updatedAt:d&&typeof d=="object"&&"toMillis"in d?d.toMillis():d};s[l.id]={...p,id:l.id}}),s}catch(t){return e(t instanceof Error?t.message:"Failed to fetch roster entries")}}),tc=Or("roster/saveChanges",async(n,{rejectWithValue:e})=>{try{const t=nR(Rn),a=Date.now(),s={};return Object.values(n).forEach(l=>{const c=Qr(Rn,"roster",l.id),d={...l,updatedAt:a};t.set(c,d),s[l.id]=d}),await t.commit(),s}catch(t){return e(t instanceof Error?t.message:"Failed to save roster changes")}}),r1=po({name:"roster",initialState:PL,reducers:{clearError:n=>{n.error=null},updateLocalAssignment(n,e){const{date:t,teamName:a,userIdentifier:s,positionGroupNames:l,maxConflict:c}=e.payload,d=n.dirtyEntries[t]||n.entries[t];let p;d?p=JSON.parse(JSON.stringify(d)):p={id:t,date:t,teams:{},absence:{}},p.teams[a]||(p.teams[a]={});const g=p.teams[a][s]||[],_=l.findIndex(U=>g.includes(U)),E=_>=0?l[_]:null;let S=null;E===null?S=l[0]:_<l.length-1?S=l[_+1]:S=null;const R=g.filter(U=>!l.includes(U));if(S)if(R.length<c)R.push(S);else{n.error=`User already has ${c} assignment(s) in this team.`;return}R.length===0?delete p.teams[a][s]:p.teams[a][s]=R,n.dirtyEntries[t]=p},updateLocalEventName(n,e){const{date:t,eventName:a}=e.payload,s=n.dirtyEntries[t]||n.entries[t];let l;s?l=JSON.parse(JSON.stringify(s)):l={id:t,date:t,teams:{},absence:{}},l.eventName=a,n.dirtyEntries[t]=l},resetRosterEdits(n){n.dirtyEntries={},n.error=null},updateLocalAbsence(n,e){var p;const{date:t,userIdentifier:a,reason:s,isAbsent:l}=e.payload,c=n.dirtyEntries[t]||n.entries[t];let d;c?d=JSON.parse(JSON.stringify(c)):d={id:t,date:t,teams:{},absence:{}},l?d.absence[a]={reason:s??((p=d.absence[a])==null?void 0:p.reason)??""}:delete d.absence[a],n.dirtyEntries[t]=d}},extraReducers:n=>{n.addCase(ec.pending,e=>{e.loading=!0,e.error=null}).addCase(ec.fulfilled,(e,t)=>{e.entries=t.payload,e.loading=!1}).addCase(ec.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(tc.pending,e=>{e.saving=!0,e.error=null}).addCase(tc.fulfilled,(e,t)=>{e.entries={...e.entries,...t.payload},e.dirtyEntries={},e.saving=!1}).addCase(tc.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{clearError:SU,updateLocalAssignment:kL,updateLocalEventName:LL,resetRosterEdits:i1,updateLocalAbsence:TS}=r1.actions,UL=r1.reducer,Of=(n,e,t)=>{const a=[],s=new Date;s.setHours(0,0,0,0);const l=s.getFullYear(),c=e||l,d=t||l,p={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},g=n.map(R=>p[R]);let _;c===l?_=new Date(s):_=new Date(c,0,1),_.setHours(0,0,0,0);const E=new Date(d,11,31);E.setHours(23,59,59,999);const S=new Date(_);for(;S.getTime()<=E.getTime();)g.includes(S.getDay())&&a.push(new Date(S)),S.setDate(S.getDate()+1);return a.sort((R,U)=>R.getTime()-U.getTime()),a.map(R=>n1(R))},jL=(n,e,t=5)=>{const a=[],s=new Date(e);s.setHours(0,0,0,0);const l={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},c=n.map(p=>l[p]),d=new Date(s);for(;a.length<t;){d.setDate(d.getDate()-1),c.includes(d.getDay())&&a.push(new Date(d));const p=new Date(s);if(p.setFullYear(p.getFullYear()-1),d<p)break}return a.map(p=>n1(p)).sort()},zL={users:[],allTeamUsers:[],currentTeamData:null,rosterDates:[],loadingUsers:!1,loadingTeam:!1,loadingAllTeamUsers:!1,error:null},Mf=Or("rosterView/fetchAllTeamUsers",async(n,{rejectWithValue:e})=>{if(!n)return[];try{const t=Dc(Rn,"users"),a=Oc(t,i_("teams","array-contains",n)),s=await Vc(a),l=[];return s.forEach(c=>{l.push(c.data())}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return console.error("Error fetching team users:",t),e("Failed to load team users.")}}),Vf=Or("rosterView/fetchUsers",async({teamName:n,positionName:e},{rejectWithValue:t,getState:a})=>{if(!n||!e)return[];try{const c=a().positions.positions.filter(R=>R.parentId===e),p=[e,...c.map(R=>R.name)].map(R=>`${n}|${R}`),g=Dc(Rn,"users"),_=Oc(g,i_("indexedAssignments","array-contains-any",p)),E=await Vc(_),S=[];return E.forEach(R=>{S.push(R.data())}),S.sort((R,U)=>(R.name||"").localeCompare(U.name||""))}catch(s){return console.error("Error fetching users:",s),t("Failed to load users.")}}),Pf=Or("rosterView/fetchTeamData",async(n,{rejectWithValue:e})=>{if(!n)return null;try{const t=Qr(Rn,"metadata","teams"),a=await Mc(t);if(a.exists()){const s=a.data();return(Array.isArray(s.list)?s.list.map(d=>({...d,preferredDays:d.preferredDays||[],positions:d.positions||[]})):[]).find(d=>d.name===n)||null}return null}catch(t){return console.error("Error fetching team data:",t),e("Failed to load team data.")}}),a1=po({name:"rosterView",initialState:zL,reducers:{loadPreviousDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const e=jL(n.currentTeamData.preferredDays,n.rosterDates[0]);n.rosterDates=[...e,...n.rosterDates]}},resetToUpcomingDates(n){var e;(e=n.currentTeamData)!=null&&e.preferredDays&&(n.rosterDates=Of(n.currentTeamData.preferredDays))},loadNextYearDates(n){if(n.currentTeamData&&n.rosterDates.length>0){const t=new Date(n.rosterDates[n.rosterDates.length-1]).getFullYear()+1,a=Of(n.currentTeamData.preferredDays,t,t);n.rosterDates=[...n.rosterDates,...a]}}},extraReducers:n=>{n.addCase(Vf.pending,e=>{e.loadingUsers=!0,e.users=[],e.error=null}).addCase(Vf.fulfilled,(e,t)=>{e.users=t.payload,e.loadingUsers=!1}).addCase(Vf.rejected,(e,t)=>{e.error=t.payload,e.loadingUsers=!1}).addCase(Mf.pending,e=>{e.loadingAllTeamUsers=!0,e.allTeamUsers=[]}).addCase(Mf.fulfilled,(e,t)=>{e.allTeamUsers=t.payload,e.loadingAllTeamUsers=!1}).addCase(Mf.rejected,(e,t)=>{e.error=t.payload,e.loadingAllTeamUsers=!1}).addCase(Pf.pending,e=>{e.loadingTeam=!0,e.currentTeamData=null,e.rosterDates=[],e.error=null}).addCase(Pf.fulfilled,(e,t)=>{var a;e.currentTeamData=t.payload,(a=t.payload)!=null&&a.preferredDays&&(e.rosterDates=Of(t.payload.preferredDays)),e.loadingTeam=!1}).addCase(Pf.rejected,(e,t)=>{e.error=t.payload,e.loadingTeam=!1})}}),{loadPreviousDates:BL,resetToUpcomingDates:FL,loadNextYearDates:qL}=a1.actions,HL=a1.reducer,GL=()=>{const n=di(),[e,t]=zN(),a=e.get("date"),{userData:s}=yt(K=>K.auth),{teams:l}=yt(K=>K.teams),{entries:c,dirtyEntries:d,loading:p,saving:g}=yt(K=>K.roster),{positions:_}=yt(K=>K.positions),[E,S]=M.useState([]),[R,U]=M.useState(!1),[B,V]=M.useState(0),[F,H]=M.useState(0),[q,Q]=M.useState(!1),re=M.useRef(null),Y=M.useRef(!1),b=Object.keys(d).length>0;M.useEffect(()=>{n(ec())},[n]),M.useEffect(()=>{const K=re.current;if(!K)return;const oe=new ResizeObserver(ce=>{for(const ge of ce){const Te=ge.contentRect.width;Te>0&&H(Te)}});return oe.observe(K),()=>oe.disconnect()},[p,R]);const w=M.useMemo(()=>{const K=_l();if(!(s!=null&&s.teams)||l.length===0)return[];const oe=l.filter(Te=>s.teams.includes(Te.name)),ce=new Set;oe.forEach(Te=>{Of(Te.preferredDays).forEach(Ke=>ce.add(Ke))});const ge=Array.from(ce).sort();return a&&a<K?[a]:ge.filter(Te=>{const Pe=Te;if(a===Pe)return!0;const Ke=c[Pe]||d[Pe];return Ke?oe.some(lt=>{var Cn;const Kt=((Cn=Ke.teams)==null?void 0:Cn[lt.name])||{};return Object.values(Kt).some(Tt=>Tt.length>0)}):!1})},[s,l,c,d,a]);M.useEffect(()=>{if(w.length===0||!re.current||p||F===0)return;const K=re.current,oe=(ce,ge)=>{const Te=K.offsetWidth||F;Te!==0&&(K.style.scrollSnapType="none",K.scrollTo({left:Te*ce,behavior:ge?"smooth":"auto"}),setTimeout(()=>{K&&(K.style.scrollSnapType="x mandatory"),Q(!0)},50),V(ce),Y.current=!0)};if(a){const ce=w.findIndex(ge=>ge===a);if(ce>=0){const ge=Math.round(K.scrollLeft/(K.offsetWidth||F||1));!Y.current||ge!==ce?requestAnimationFrame(()=>{oe(ce,Y.current)}):Q(!0)}else Q(!0)}else K.scrollLeft!==0?oe(0,!0):Q(!0),Y.current=!0},[a,w,p,F]);const I=()=>{t({},{replace:!0})};M.useEffect(()=>{(async()=>{if(!(!(s!=null&&s.teams)||s.teams.length===0)){U(!0);try{const oe=Dc(Rn,"users"),ce=Oc(oe,i_("teams","array-contains-any",s.teams)),ge=await Vc(ce),Te=[];ge.forEach(Pe=>Te.push(Pe.data())),S(Te)}catch(oe){console.error("Error fetching users for dashboard:",oe)}finally{U(!1)}}})()},[s==null?void 0:s.teams]);const N=M.useCallback(K=>{if(!K||!(s!=null&&s.teams)||l.length===0)return null;const oe=K,ce=d[oe]||c[oe],Pe=l.filter(Ke=>s.teams.includes(Ke.name)).map(Ke=>{var Tn;const lt=((Tn=ce==null?void 0:ce.teams)==null?void 0:Tn[Ke.name])||{},Kt=[],Cn=Ke.positions.map(Jt=>Jt.name);let Tt=0;return Cn.forEach(Jt=>{const ae=_.find(Ae=>Ae.name===Jt),ye=[];Object.entries(lt).forEach(([Ae,we])=>{if(we.includes(Jt)){const Fe=E.find(kt=>kt.email===Ae);Fe?ye.push(Fe):ye.push({email:Ae,name:Ae}),Tt++}});const ke=[...ye].sort((Ae,we)=>ae!=null&&ae.sortByGender&&Ae.gender!==we.gender?Ae.gender==="Male"?-1:we.gender==="Male"?1:(Ae.gender||"").localeCompare(we.gender||""):(Ae.name||"").localeCompare(we.name||""));Kt.push({posName:Jt,emoji:(ae==null?void 0:ae.emoji)||"",names:ke.map(Ae=>Ae.name||Ae.email||"Unknown")})}),{teamName:Ke.name,teamEmoji:Ke.emoji,positions:Kt,hasAssignments:Tt>0}}).filter(Ke=>Ke.hasAssignments);return Pe.length>0?Pe:null},[c,d,s,l,_,E]),x=(K,oe,ce,ge)=>{let Ke=`${new Date(K).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"})} - ${ce} ${oe}
`;ge.forEach(lt=>{const Kt=lt.names.length>0?lt.names.join(", "):"-";Ke+=`${lt.emoji}: ${Kt}
`}),navigator.clipboard.writeText(Ke).then(()=>{})},P=()=>{if(!re.current)return;const K=re.current,oe=K.offsetWidth,ce=Math.round(K.scrollLeft/oe);if(ce!==B&&w[ce]){V(ce);const ge=w[ce];if(a!==ge){const Te=_l();ce===0&&Te===ge?t({},{replace:!0}):t({date:ge},{replace:!0})}}},O=(K,oe)=>{n(LL({date:K,eventName:oe}))},ze=()=>{n(tc(d))},Ze=()=>{n(i1())};if(p||R)return A.jsx(jl,{});if(w.length===0)return A.jsxs("div",{className:"dashboard-empty",children:[A.jsx("h2",{children:"No upcoming events found"}),A.jsx("p",{children:"You are not rostered for any upcoming team events."})]});const W=w[B],pe=_l(),_e=W&&W<pe,Be=_e?"Previous Event":"Upcoming Events",Ve=K=>new Date(K).toLocaleDateString("en-GB",{day:"numeric",month:"long",year:"numeric",timeZone:"UTC"}),j=(K,oe=!1)=>{const ce=N(K);return ce?A.jsx("div",{className:"team-cards-container",children:ce.map(ge=>A.jsxs("div",{className:"team-event-card",children:[A.jsxs("div",{className:"team-event-header",children:[A.jsxs("h3",{children:[A.jsx("span",{className:"team-card-emoji",children:ge.teamEmoji}),A.jsx("span",{className:"team-card-name",children:ge.teamName})]}),!oe&&A.jsxs("button",{className:"copy-roster-btn",onClick:()=>x(K,ge.teamName,ge.teamEmoji,ge.positions),title:"Copy to clipboard",children:[A.jsx(dL,{size:16})," Copy"]})]}),A.jsx("div",{className:"team-event-details",children:ge.positions.map(Te=>A.jsxs("div",{className:"pos-assignment-row",children:[A.jsx("span",{className:"pos-emoji-label",title:Te.posName,children:Te.emoji}),A.jsx("span",{className:`assigned-names ${Te.names.length===0?"unassigned":""}`,children:Te.names.length>0?Te.names.join(", "):"Unassigned"})]},Te.posName))})]},ge.teamName))}):null};return A.jsxs("div",{className:"dashboard-container",children:[A.jsxs("div",{className:"dashboard-header",children:[A.jsx("h1",{children:Be}),A.jsx("div",{className:"dashboard-header-actions",children:_e&&A.jsx("button",{className:"clear-past-btn",onClick:I,children:"Reset to upcoming"})})]}),A.jsx("div",{className:"carousel-outer-wrapper",style:{opacity:q?1:0,transition:"opacity 0.3s ease-in-out"},children:A.jsx("div",{className:"events-carousel-track",ref:re,onScroll:P,children:w.map((K,oe)=>{const ce=K,ge=d[ce]||c[ce],Te=(ge==null?void 0:ge.eventName)||"";return A.jsxs("div",{className:`event-card-wrapper ${oe===B?"active":"peek"}`,children:[A.jsx("div",{className:"event-name-container",children:A.jsx("input",{type:"text",className:"dashboard-event-name-input",placeholder:"Event name (e.g. Easter Sunday)",value:Te,onChange:Pe=>O(K,Pe.target.value),disabled:oe!==B})}),A.jsx("div",{className:"event-card-date",children:Ve(K)}),j(K,oe!==B)]},K)})})}),A.jsxs("div",{className:"carousel-pagination",children:[B+1," / ",w.length]}),b&&A.jsx("div",{className:"roster-save-footer",children:A.jsxs("div",{className:"save-footer-content",children:[A.jsx("span",{className:"changes-label",children:"Unsaved event labels"}),A.jsxs("div",{className:"save-footer-actions",children:[A.jsx("button",{className:"cancel-btn",onClick:Ze,disabled:g,children:"Discard"}),A.jsx("button",{className:"save-btn",onClick:ze,disabled:g,children:g?"Saving...":"Save Changes"})]})]})})]})},Ni=({children:n,nowrap:e})=>A.jsx("div",{className:`pill-group ${e?"pill-group-nowrap":""}`,children:n}),er=({colour:n,isDropdown:e,isActive:t,isDisabled:a,minWidth:s,onClick:l,children:c})=>{const[d,p]=M.useState(!1);return n&&n.startsWith("var(--color-")&&(n=getComputedStyle(document.documentElement).getPropertyValue(n.slice(4,-1)).trim()),A.jsxs("div",{className:`pill pill--text ${t?"pill-active":""} ${a?"pill-disabled":""}`,style:{"--pill-colour":n||"var(--color-link)","--pill-subtle-hover-color":`${n}15`,minWidth:s?`${s}px`:"fit-content"},onClick:g=>{a||(p(_=>!_),l&&l(g))},children:[c,e&&A.jsx(JR,{style:{rotate:d?"90deg":"0"}})]})},$L={firebaseUser:null,userData:null,loading:!0,error:null},kf=Or("auth/initializeUserData",async(n,{rejectWithValue:e})=>{try{const t=Qr(Rn,"users",n),a=await Mc(t);if(!a.exists()){const s="chris.sm.kang542@gmail.com",l=Il.currentUser,c=(l==null?void 0:l.email)===s,d={name:(l==null?void 0:l.displayName)||null,email:(l==null?void 0:l.email)||null,isApproved:c,isAdmin:c,isActive:!0,teams:[],teamPositions:{},indexedAssignments:[],gender:""};return await QV(t,d),d}return a.data()}catch(t){return e(t instanceof Error?t.message:"Unknown error")}}),Lf=Or("auth/updateUserProfile",async({uid:n,data:e},{rejectWithValue:t})=>{try{const a=Qr(Rn,"users",n),s={...e};return s.teamPositions&&(s.indexedAssignments=t1(s.teamPositions)),await Bd(a,s),s}catch(a){return t(a instanceof Error?a.message:"Failed to update profile")}}),s1=po({name:"auth",initialState:$L,reducers:{setUser:(n,e)=>{n.firebaseUser=e.payload},setUserData:(n,e)=>{n.userData=e.payload},setLoading:(n,e)=>{n.loading=e.payload},logout:n=>{n.firebaseUser=null,n.userData=null,n.loading=!1}},extraReducers:n=>{n.addCase(kf.pending,e=>{e.loading=!0,e.error=null}).addCase(kf.fulfilled,(e,t)=>{e.userData=t.payload,e.loading=!1}).addCase(kf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(Lf.pending,e=>{e.error=null}).addCase(Lf.fulfilled,(e,t)=>{e.userData&&(e.userData={...e.userData,...t.payload})}).addCase(Lf.rejected,(e,t)=>{e.error=t.payload})}}),{setUser:KL,setUserData:YL,setLoading:wU,logout:QL}=s1.actions,XL=s1.reducer,o1=()=>{const n=di(),{userData:e,firebaseUser:t}=yt(q=>q.auth),a=yt(q=>q.teams.teams),[s,l]=M.useState((e==null?void 0:e.name)||""),[c,d]=M.useState((e==null?void 0:e.gender)||""),[p,g]=M.useState((e==null?void 0:e.isActive)??!0),[_,E]=M.useState((e==null?void 0:e.teams)||[]),[S,R]=M.useState((e==null?void 0:e.teamPositions)||{}),[U,B]=M.useState("idle"),V=async()=>{if(t){B("saving");try{const q={name:s,gender:c,isActive:p,teams:_,teamPositions:S};await n(Lf({uid:t.uid,data:q})).unwrap(),B("success"),setTimeout(()=>B("idle"),2e3)}catch(q){console.error(q),B("idle")}}},F=q=>{E(Q=>{const re=Q.includes(q),Y=re?Q.filter(b=>b!==q):[...Q,q];return R(b=>{const w={...b};return re?delete w[q]:w[q]||(w[q]=[]),w}),Y})},H=(q,Q)=>{R(re=>{const Y=re[q]||[],b=Y.includes(Q)?Y.filter(w=>w!==Q):[...Y,Q];return{...re,[q]:b}})};return e?A.jsxs("section",{className:"profile-card",children:[A.jsx("div",{className:"profile-readonly",children:A.jsxs("p",{children:[A.jsx("strong",{children:"Email:"})," ",e.email]})}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Name"}),A.jsx(Ni,{children:A.jsx("input",{type:"text",value:s,onChange:q=>l(q.target.value),className:"form-input form-input-width-auto"})})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Gender"}),A.jsx(Ni,{children:[{value:"Male",colour:"var(--color-male)"},{value:"Female",colour:"var(--color-female)"}].map(q=>A.jsx(er,{colour:q.colour,onClick:()=>d(q.value),isActive:c===q.value,children:q.value},q.value))})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"My Teams"}),A.jsx(Ni,{children:a.map(q=>{const Q=_.includes(q.name);return A.jsxs(er,{onClick:()=>F(q.name),isActive:Q,children:[A.jsx("span",{children:q.emoji})," ",q.name]},q.name)})})]}),_.length>0&&A.jsxs("div",{className:"team-positions-section",children:[A.jsx("label",{className:"section-label",children:"Positions per Team"}),_.map(q=>{var re,Y;const Q=a.find(b=>b.name===q);return Q?A.jsxs("div",{className:"team-position-group",children:[A.jsxs("div",{className:"team-position-header",children:[Q.emoji," ",Q.name]}),A.jsx(Ni,{children:(Y=(re=Q.positions)==null?void 0:re.filter(b=>!b.parentId))==null?void 0:Y.map(b=>{var I;const w=(I=S[q])==null?void 0:I.includes(b.name);return A.jsxs(er,{onClick:()=>H(q,b.name),isActive:w,colour:b.colour,children:[A.jsx("span",{children:b.emoji})," ",b.name]},b.name)})})]},q):null})]}),A.jsxs("div",{className:"form-group",children:[A.jsx("label",{children:"Availability Status"}),A.jsx(er,{colour:p?"var(--color-success-dark)":"var(--color-warning-dark)",onClick:()=>g(!p),isActive:!0,children:p?"ACTIVE & AVAILABLE":"INACTIVE / AWAY"}),A.jsx("p",{className:"form-field-hint",children:"Turn off if you want to be hidden from the roster."})]}),A.jsxs("div",{className:"action-container",children:[A.jsx("button",{onClick:V,disabled:U!=="idle",className:`save-button ${U}`,children:U==="saving"?"Saving...":U==="success"?"Done ":"Update Profile"}),A.jsx("button",{onClick:()=>Il.signOut(),className:"logout-btn",children:"Logout"})]})]}):A.jsx("div",{children:"Loading profile..."})},WL=()=>{const{userData:n,firebaseUser:e,loading:t}=yt(a=>a.auth);return t?A.jsx(Dl,{}):e?n?n.isApproved?A.jsx(ss,{to:"/app",replace:!0}):A.jsxs("div",{className:"guest-container",children:[A.jsxs("header",{className:"guest-header",children:[A.jsx("h2",{className:"brand-title",children:"God is Good"}),A.jsx("p",{className:"pending-label",children:"PENDING ADMIN APPROVAL"}),A.jsx("div",{className:"guest-theme-toggle-container",children:A.jsx(T_,{})})]}),A.jsx(o1,{})]}):A.jsx(Dl,{}):A.jsx(ss,{to:"/login",replace:!0})},JL=()=>{const{firebaseUser:n,loading:e}=yt(a=>a.auth),t=()=>s4(Il,tk);return e?null:n?A.jsx(ss,{to:"/",replace:!0}):A.jsxs("div",{className:"login-container",children:[A.jsxs("header",{className:"login-header",children:[A.jsx("h1",{className:"brand-title",children:"God is Good"}),A.jsx("p",{className:"brand-subtitle",children:"Worship Team Roster"})]}),A.jsx("div",{className:"login-button-container",children:A.jsxs("button",{onClick:t,className:"login-button google",children:[A.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",height:"18",alt:"Google"}),"Login with Google"]})})]})},ZL="_clickable_wqmab_102",eU="_disabled_wqmab_111",tU="_focused_wqmab_475",he={"roster-table-container":"_roster-table-container_wqmab_1","roster-table":"_roster-table_wqmab_1","sticky-col":"_sticky-col_wqmab_35","roster-table-header-cell":"_roster-table-header-cell_wqmab_58","roster-table-loading":"_roster-table-loading_wqmab_63","roster-table-error":"_roster-table-error_wqmab_64","roster-table-wrapper":"_roster-table-wrapper_wqmab_71","load-more-footer":"_load-more-footer_wqmab_78","load-next-year-btn":"_load-next-year-btn_wqmab_84",clickable:ZL,disabled:eU,"date-cell":"_date-cell_wqmab_117","roster-cell":"_roster-cell_wqmab_125","gender-divider-cell":"_gender-divider-cell_wqmab_130","assigned-positions":"_assigned-positions_wqmab_144","pos-emoji":"_pos-emoji_wqmab_151","other-team-emoji":"_other-team-emoji_wqmab_155","date-header-content":"_date-header-content_wqmab_161","date-header-actions":"_date-header-actions_wqmab_168","load-prev-btn":"_load-prev-btn_wqmab_173","reset-dates-btn":"_reset-dates-btn_wqmab_195","peek-header":"_peek-header_wqmab_215","peek-selector":"_peek-selector_wqmab_220","peek-cell":"_peek-cell_wqmab_237","sticky-right":"_sticky-right_wqmab_247","clickable-header":"_clickable-header_wqmab_259","hidden-members-bar":"_hidden-members-bar_wqmab_269","hidden-members-label":"_hidden-members-label_wqmab_281","hidden-members-list":"_hidden-members-list_wqmab_289","unhide-pill":"_unhide-pill_wqmab_295","absent-strike":"_absent-strike_wqmab_329","past-date":"_past-date_wqmab_335","no-data":"_no-data_wqmab_339","today-date":"_today-date_wqmab_351","date-cell-content":"_date-cell-content_wqmab_366","today-badge":"_today-badge_wqmab_374","closest-next-date-row":"_closest-next-date-row_wqmab_384","highlighted-header":"_highlighted-header_wqmab_390","highlighted-cell":"_highlighted-cell_wqmab_395","special-event-dot":"_special-event-dot_wqmab_399","absent-cell":"_absent-cell_wqmab_410","absence-input-container":"_absence-input-container_wqmab_414","absence-reason-input":"_absence-reason-input_wqmab_421","remove-absence-btn":"_remove-absence-btn_wqmab_444","absence-roster-cell":"_absence-roster-cell_wqmab_464","gender-label":"_gender-label_wqmab_468",focused:tU,"roster-save-footer":"_roster-save-footer_wqmab_513","save-footer-content":"_save-footer-content_wqmab_535","changes-label":"_changes-label_wqmab_544","save-footer-actions":"_save-footer-actions_wqmab_549","save-btn":"_save-btn_wqmab_554","cancel-btn":"_cancel-btn_wqmab_569"},nU=()=>{const n=di(),e=co(),{teamName:t,positionName:a}=Ed(),{users:s,allTeamUsers:l,rosterDates:c,currentTeamData:d,loadingUsers:p,loadingTeam:g,loadingAllTeamUsers:_,error:E}=yt(ae=>ae.rosterView),{entries:S,dirtyEntries:R,saving:U,error:B}=yt(ae=>ae.roster),{teams:V}=yt(ae=>ae.teams),{positions:F}=yt(ae=>ae.positions),{hiddenUsers:H}=yt(ae=>ae.ui),[q,Q]=M.useState(null),[re,Y]=M.useState(null),b=Object.keys(R).length>0,w=M.useMemo(()=>F.find(ae=>ae.name===a),[F,a]),I=M.useMemo(()=>d?d.positions.filter(ae=>ae.name!==a):[],[d,a]),N=M.useMemo(()=>{var ae;return!t||!a?[]:((ae=H[t])==null?void 0:ae[a])||[]},[H,t,a]),x=M.useMemo(()=>{const ae=s.filter(ye=>ye.email&&!N.includes(ye.email));return w!=null&&w.sortByGender?ae.sort((ye,ke)=>ye.gender===ke.gender?(ye.name||"").localeCompare(ke.name||""):ye.gender==="Male"?-1:ke.gender==="Male"?1:(ye.gender||"").localeCompare(ke.gender||"")):ae},[s,w,N]),P=M.useMemo(()=>{if(!(w!=null&&w.sortByGender)||x.length===0)return-1;const ae=x.findIndex(ye=>ye.gender==="Female");return ae>0&&ae<x.length?ae:-1},[w,x]),O=ae=>{!t||!a||n(IL({teamName:t,positionName:a,userEmail:ae}))},ze=()=>{n(BL())},Ze=()=>{n(FL())},W=()=>{n(qL())},pe=ae=>{_e(ae)&&e(`/app/dashboard?date=${ae}`)},_e=M.useCallback(ae=>{const ye=ae.split("T")[0],ke=R[ye]||S[ye];return ke?Object.values(ke.teams).some(Ae=>Object.values(Ae).some(we=>we.length>0)):!1},[S,R]),Be=M.useCallback(ae=>{if(!re||!t)return[];const ye=ae.split("T")[0],ke=R[ye]||S[ye];return!ke||!ke.teams[t]?[]:Object.entries(ke.teams[t]).filter(([,Ae])=>Ae.includes(re)).map(([Ae])=>{const we=l.find(Fe=>Fe.email===Ae);return(we==null?void 0:we.name)||Ae})},[re,t,R,S,l]);M.useEffect(()=>{n(ec())},[n]),M.useEffect(()=>{a&&t&&a!=="Absence"&&n(Vf({teamName:t,positionName:a}))},[a,t,n]),M.useEffect(()=>{t&&(n(Pf(t)),n(Mf(t)))},[t,n]);const Ve=M.useCallback((ae,ye)=>{const ke=ae,Ae=R[ke]||S[ke];return!!(Ae&&Ae.absence&&Ae.absence[ye])},[R,S]),j=M.useCallback((ae,ye)=>{var we,Fe;const ke=ae,Ae=R[ke]||S[ke];return((Fe=(we=Ae==null?void 0:Ae.absence)==null?void 0:we[ye])==null?void 0:Fe.reason)||""},[R,S]),K=M.useCallback((ae,ye)=>{if(!t||!a||a==="Absence")return!1;if(Ve(ae,ye))return!0;const ke=ae,Ae=R[ke]||S[ke],we=V.find(Dt=>Dt.name===t),Fe=(we==null?void 0:we.maxConflict)||1;if(!Ae||!Ae.teams[t]||!Ae.teams[t][ye])return!1;const kt=Ae.teams[t][ye],Rt=F.filter(Dt=>Dt.parentId===a),Le=[a,...Rt.map(Dt=>Dt.name)];return kt.some(Dt=>Le.includes(Dt))?!1:kt.length>=Fe},[t,a,Ve,R,S,V,F]),oe=M.useCallback((ae,ye,ke,Ae)=>{if(!t||!a||a==="Absence"||K(ae,ye)){Q({row:ke,col:Ae,table:"roster"});return}Q({row:ke,col:Ae,table:"roster"});const we=V.find(Le=>Le.name===t),Fe=(we==null?void 0:we.maxConflict)||1,kt=F.filter(Le=>Le.parentId===a),Rt=[a,...kt.map(Le=>Le.name)];n(kL({date:ae,teamName:t,userIdentifier:ye,positionGroupNames:Rt,maxConflict:Fe}))},[n,t,a,K,V,F]),ce=M.useCallback((ae,ye,ke,Ae)=>{Q({row:ke,col:Ae,table:"absence"});const we=Ve(ae,ye);n(TS({date:ae,userIdentifier:ye,isAbsent:!we}))},[n,Ve]),ge=M.useCallback((ae,ye,ke)=>{n(TS({date:ae,userIdentifier:ye,reason:ke,isAbsent:!0}))},[n]),Te=M.useCallback(()=>{n(tc(R))},[n,R]),Pe=M.useCallback(()=>{n(i1()),Q(null)},[n]),Ke=(ae,ye)=>{var kt;const ke=ae,Ae=R[ke]||S[ke];if(!Ae||!t)return"";const we=((kt=Ae.teams[t])==null?void 0:kt[ye])||[],Fe=[];return Object.entries(Ae.teams).forEach(([Rt,Le])=>{Rt!==t&&Le[ye]&&Fe.push({team:Rt,positions:Le[ye]})}),we.length===0&&Fe.length===0?"":A.jsxs("div",{className:he["assigned-positions"],children:[we.map(Rt=>{const Le=F.find(Ye=>Ye.name===Rt);return A.jsx("span",{title:`${t}: ${Rt}`,className:he["pos-emoji"],children:(Le==null?void 0:Le.emoji)||""},Rt)}),Fe.map(Rt=>Rt.positions.map(Le=>{const Ye=F.find(Dt=>Dt.name===Le);return A.jsx("span",{title:`${Rt.team}: ${Le}`,className:`${he["pos-emoji"]} ${he["other-team-emoji"]}`,children:(Ye==null?void 0:Ye.emoji)||""},`${Rt.team}-${Le}`)}))]})};M.useEffect(()=>{const ae=ye=>{const ke=ye.target;if(ke.tagName==="INPUT"||ke.tagName==="TEXTAREA"||!q)return;const{row:Ae,col:we,table:Fe}=q,kt=c,Rt=Fe==="roster"?x:l;switch(ye.key){case"ArrowUp":ye.preventDefault(),Ae>0&&Q({row:Ae-1,col:we,table:Fe});break;case"ArrowDown":ye.preventDefault(),Ae<kt.length-1&&Q({row:Ae+1,col:we,table:Fe});break;case"ArrowLeft":ye.preventDefault(),we>0&&Q({row:Ae,col:we-1,table:Fe});break;case"ArrowRight":ye.preventDefault(),we<Rt.length-1&&Q({row:Ae,col:we+1,table:Fe});break;case"Tab":ye.preventDefault(),ye.shiftKey?Ae>0&&Q({row:Ae-1,col:we,table:Fe}):Ae<kt.length-1&&Q({row:Ae+1,col:we,table:Fe});break;case" ":{ye.preventDefault();const Le=c[Ae],Ye=Rt[we];Ye!=null&&Ye.email&&(Fe==="roster"?oe(Le,Ye.email,Ae,we):ce(Le,Ye.email,Ae,we));break}case"Enter":b&&(ye.preventDefault(),Te());break;case"Escape":b&&(ye.preventDefault(),Pe());break}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[q,c,x,l,b,oe,ce,Te,Pe]);const lt=M.useMemo(()=>{const ae=_l();return c.length===0?!1:c[0]<ae},[c]),Kt=M.useMemo(()=>{const ae=_l();return c.find(ye=>ye.split("T")[0]>=ae)},[c]),Cn=M.useMemo(()=>{if(!Kt||!t||!a)return[];const ae=Kt.split("T")[0],ye=R[ae]||S[ae];if(!ye||!ye.teams[t])return[];const ke=F.filter(we=>we.parentId===a),Ae=[a,...ke.map(we=>we.name)];return Object.entries(ye.teams[t]).filter(([,we])=>we.some(Fe=>Ae.includes(Fe))).map(([we])=>we)},[Kt,t,a,R,S,F]),Tt=M.useCallback(ae=>{const ye=_l(),ke=ae.split("T")[0];return ke<ye?he["past-date"]:ke===ye?he["today-date"]:he["future-date"]},[]);if(p||g||_)return A.jsx(jl,{});const Tn=E||B;if(Tn)return A.jsxs("div",{className:he["roster-table-error"],children:["Error: ",Tn]});const Jt=a==="Absence";return!Jt&&x.length===0?A.jsx("div",{className:he["roster-table-loading"],children:"No users found for this position."}):A.jsxs("div",{className:he["roster-table-wrapper"],children:[!Jt&&N.length>0&&A.jsxs("div",{className:he["hidden-members-bar"],children:[A.jsx("span",{className:he["hidden-members-label"],children:"Hidden Members:"}),A.jsx("div",{className:he["hidden-members-list"],children:N.map(ae=>{const ye=s.find(ke=>ke.email===ae);return A.jsxs("button",{className:he["unhide-pill"],onClick:()=>O(ae),title:"Click to unhide",children:[(ye==null?void 0:ye.name)||ae," ",A.jsx("span",{children:"+"})]},ae)})})]}),Jt?A.jsxs("div",{className:`${he["roster-section"]} ${he["absence-section"]}`,children:[A.jsx("div",{className:he["roster-table-container"],children:A.jsxs("table",{className:`${he["roster-table"]} ${he["absence-table"]}`,children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{className:`${he["roster-table-header-cell"]} ${he["sticky-col"]} ${he["sticky-header"]}`,children:A.jsxs("div",{className:he["date-header-content"],children:["Date",A.jsxs("div",{className:he["date-header-actions"],children:[A.jsx("button",{className:he["load-prev-btn"],onClick:ze,title:"Load 5 previous dates",children:""}),lt&&A.jsx("button",{className:`${he["load-prev-btn"]} ${he["reset-dates-btn"]}`,onClick:Ze,title:"Hide previous dates",children:""})]})]})}),l.map(ae=>A.jsx("th",{className:`${he["roster-table-header-cell"]} ${he["sticky-header"]} ${ae.email&&Cn.includes(ae.email)?he["highlighted-header"]:""}`,children:ae.name},ae.email)),A.jsx("th",{className:`${he["gender-divider-cell"]} ${he["sticky-header"]}`}),A.jsx("th",{className:`${he["roster-table-header-cell"]} ${he["sticky-header"]} ${he["sticky-right"]} ${he["peek-header"]}`,children:A.jsxs("select",{className:he["peek-selector"],value:re||"",onChange:ae=>Y(ae.target.value||null),children:[A.jsx("option",{value:"",children:"Peek Position..."}),I.map(ae=>A.jsxs("option",{value:ae.name,children:[ae.emoji," ",ae.name]},ae.name))]})})]})}),A.jsx("tbody",{children:c.map((ae,ye)=>{const ke=ae.split("T")[0],Ae=R[ke]||S[ke],we=Ae==null?void 0:Ae.eventName,Fe=Tt(ae),kt=Fe===he["today-date"],Rt=_e(ae);return A.jsxs("tr",{className:`${Fe} ${Rt?"":he["no-data"]} ${we?he["special-event-row"]:""} ${ae===Kt?he["closest-next-date-row"]:""}`,children:[A.jsx("td",{className:`${he["date-cell"]} ${he["sticky-col"]} ${Rt?he.clickable:""}`,onClick:()=>pe(ae),title:we,children:A.jsxs("div",{className:he["date-cell-content"],children:[we&&A.jsx("span",{className:he["special-event-dot"]}),new Date(ae.replace(/-/g,"/")).toLocaleDateString(),kt&&A.jsx("span",{className:he["today-badge"],children:"TODAY"})]})}),l.map((Le,Ye)=>{const Dt=(q==null?void 0:q.row)===ye&&(q==null?void 0:q.col)===Ye&&(q==null?void 0:q.table)==="absence",nr=Le.email?Ve(ae,Le.email):!1,Yn=Le.email?j(ae,Le.email):"",rn=ae===Kt&&Le.email&&Cn.includes(Le.email);return A.jsx("td",{className:`${he["roster-cell"]} ${he.clickable} ${he["absence-roster-cell"]} ${Dt?he.focused:""} ${nr?he["absent-cell"]:""} ${rn?he["highlighted-cell"]:""}`,onClick:()=>{Le.email&&ce(ae,Le.email,ye,Ye)},tabIndex:0,onFocus:()=>Q({row:ye,col:Ye,table:"absence"}),title:Yn,children:nr?A.jsxs("div",{className:he["absence-input-container"],children:[A.jsx("input",{type:"text",className:he["absence-reason-input"],value:Yn,placeholder:"Reason...",maxLength:20,autoFocus:Dt,onClick:bn=>bn.stopPropagation(),onChange:bn=>{Le.email&&ge(ae,Le.email,bn.target.value)}}),A.jsx("button",{className:he["remove-absence-btn"],onClick:bn=>{bn.stopPropagation(),Le.email&&ce(ae,Le.email,ye,Ye)},title:"Mark as present",children:""})]}):""},Le.email)}),A.jsx("td",{className:he["gender-divider-cell"]}),A.jsx("td",{className:`${he["roster-cell"]} ${he["peek-cell"]} ${he["sticky-right"]}`,children:Be(ae).join(", ")||""})]},ae)})})]})}),A.jsx("div",{className:he["load-more-footer"],children:A.jsx("button",{className:he["load-next-year-btn"],onClick:W,children:"Load Next Year "})})]}):A.jsxs("div",{className:he["roster-section"],children:[A.jsx("div",{className:he["roster-table-container"],children:A.jsxs("table",{className:he["roster-table"],children:[A.jsx("thead",{children:A.jsxs("tr",{children:[A.jsx("th",{className:`${he["roster-table-header-cell"]} ${he["sticky-col"]} ${he["sticky-header"]}`,children:A.jsxs("div",{className:he["date-header-content"],children:["Date",A.jsxs("div",{className:he["date-header-actions"],children:[A.jsx("button",{className:he["load-prev-btn"],onClick:ze,title:"Load 5 previous dates",children:""}),lt&&A.jsx("button",{className:`${he["load-prev-btn"]} ${he["reset-dates-btn"]}`,onClick:Ze,title:"Hide previous dates",children:""})]})]})}),x.map((ae,ye)=>A.jsxs(M.Fragment,{children:[P===ye&&A.jsx("th",{className:`${he["gender-divider-cell"]} ${he["sticky-header"]}`}),A.jsxs("th",{className:`${he["roster-table-header-cell"]} ${he["sticky-header"]} ${he["clickable-header"]} ${ae.email&&Cn.includes(ae.email)?he["highlighted-header"]:""}`,onClick:()=>ae.email&&O(ae.email),title:"Click to hide member",children:[ae.name,(w==null?void 0:w.sortByGender)&&A.jsxs("span",{className:he["gender-label"],children:["(",ae.gender==="Male"?"M":ae.gender==="Female"?"F":"?",")"]})]})]},ae.email)),A.jsx("th",{className:`${he["gender-divider-cell"]} ${he["sticky-header"]}`}),A.jsx("th",{className:`${he["roster-table-header-cell"]} ${he["sticky-header"]} ${he["sticky-right"]} ${he["peek-header"]}`,children:A.jsxs("select",{className:he["peek-selector"],value:re||"",onChange:ae=>Y(ae.target.value||null),children:[A.jsx("option",{value:"",children:"Peek Position..."}),I.map(ae=>A.jsxs("option",{value:ae.name,children:[ae.emoji," ",ae.name]},ae.name))]})})]})}),A.jsx("tbody",{children:c.map((ae,ye)=>{const ke=ae.split("T")[0],Ae=R[ke]||S[ke],we=Ae==null?void 0:Ae.eventName,Fe=Tt(ae),kt=Fe===he["today-date"],Rt=_e(ae);return A.jsxs("tr",{className:`${Fe} ${Rt?"":he["no-data"]} ${we?he["special-event-row"]:""} ${ae===Kt?he["closest-next-date-row"]:""}`,children:[A.jsx("td",{className:`${he["date-cell"]} ${he["sticky-col"]} ${Rt?he.clickable:""}`,onClick:()=>pe(ae),title:we,children:A.jsxs("div",{className:he["date-cell-content"],children:[we&&A.jsx("span",{className:he["special-event-dot"]}),new Date(ae.replace(/-/g,"/")).toLocaleDateString(),kt&&A.jsx("span",{className:he["today-badge"],children:"TODAY"})]})}),x.map((Le,Ye)=>{const Dt=(q==null?void 0:q.row)===ye&&(q==null?void 0:q.col)===Ye&&(q==null?void 0:q.table)==="roster",nr=Le.email?K(ae,Le.email):!1,Yn=Le.email?Ve(ae,Le.email):!1,rn=ae===Kt&&Le.email&&Cn.includes(Le.email);return A.jsxs(M.Fragment,{children:[P===Ye&&A.jsx("td",{className:he["gender-divider-cell"]}),A.jsx("td",{className:`${he["roster-cell"]} ${nr?he.disabled:he.clickable} ${Dt?he.focused:""} ${Yn?he["absent-strike"]:""} ${rn?he["highlighted-cell"]:""}`,onClick:()=>{Le.email&&!nr&&oe(ae,Le.email,ye,Ye)},tabIndex:0,onFocus:()=>Q({row:ye,col:Ye,table:"roster"}),children:Le.email&&(Yn?A.jsx("span",{title:j(ae,Le.email),children:""}):Ke(ae,Le.email))})]},Le.email)}),A.jsx("td",{className:he["gender-divider-cell"]}),A.jsx("td",{className:`${he["roster-cell"]} ${he["peek-cell"]} ${he["sticky-right"]}`,children:Be(ae).join(", ")||""})," "]},ae)})})]})}),A.jsx("div",{className:he["load-more-footer"],children:A.jsx("button",{className:he["load-next-year-btn"],onClick:W,children:"Load Next Year "})})]}),b&&A.jsx("div",{className:he["roster-save-footer"],children:A.jsxs("div",{className:he["save-footer-content"],children:[A.jsx("span",{className:he["changes-label"],children:"You have unsaved changes"}),A.jsxs("div",{className:he["save-footer-actions"],children:[A.jsx("button",{className:he["cancel-btn"],onClick:Pe,disabled:U,children:"Discard"}),A.jsx("button",{className:he["save-btn"],onClick:Te,disabled:U,children:U?"Saving...":"Save Roster"})]})]})})]})},rU=()=>A.jsx("div",{className:"roster-page",style:{height:"100%"},children:A.jsx(nU,{})}),gc={"app-table-container":"_app-table-container_4r29u_1","app-table":"_app-table_4r29u_1","color-picker-group":"_color-picker-group_4r29u_37","sticky-col":"_sticky-col_4r29u_47"},iU=({text:n,textAlign:e="left",width:t,minWidth:a,isSticky:s=!1})=>A.jsx("th",{className:s?gc["sticky-col"]:void 0,style:{textAlign:e,width:t?`${t}px`:"auto",minWidth:a?`${a}px`:"auto"},children:n}),fn=({isSticky:n=!1,textAlign:e="left",className:t,children:a})=>A.jsx("td",{style:{textAlign:e},className:`${t||""} ${n?gc["sticky-col"]:""}
`,children:a}),$r=({name:n,value:e,placeholder:t,type:a="text",isSticky:s,isReadOnly:l=!1,isChild:c=!1,onChange:d})=>A.jsxs(fn,{isSticky:s,children:[c&&A.jsx(ZR,{}),A.jsx("input",{name:n,className:"form-input",type:a,placeholder:t,value:e,onChange:d,readOnly:l})]}),bS=({name:n,value:e,placeholder:t,onChange:a})=>A.jsxs(fn,{className:gc["color-picker-group"],children:[A.jsx("input",{name:n,type:"color",value:e||"#FFFFFF",onChange:a}),A.jsx("input",{name:n,className:"form-input",value:e,placeholder:t,onChange:a})]}),S_=({headers:n,children:e})=>A.jsx("div",{className:gc["app-table-container"],children:A.jsxs("table",{className:gc["app-table"],children:[A.jsx("thead",{children:A.jsx("tr",{children:n.map((t,a)=>A.jsx(iU,{...t},a))})}),A.jsx("tbody",{children:e})]})}),Ag={name:"",emoji:"",colour:"",parentId:void 0,sortByGender:!1},aU=()=>{const n=di(),{positions:e,fetched:t,loading:a}=yt(V=>V.positions),[s,l]=M.useState(e),[c,d]=M.useState(Ag),[p,g]=M.useState("idle");M.useEffect(()=>{t||n(no())},[n,t]),M.useEffect(()=>{l(e)},[e]);const _=(V,F,H)=>{const q=[...s];q[V]={...q[V],[F]:H},l(q)},E=(V,F)=>{const H=[...s],q=H[V],Q=q.parentId,re=Y=>{const b=H[Y];if(!b)return{block:[],startIndex:-1,endIndex:-1};const w=[],I=[b],N=new Set;let x=Y,P=Y,O=0;for(;O<I.length;){const Ze=I[O++];N.has(Ze.name)||(N.add(Ze.name),w.push(Ze),H.forEach((W,pe)=>{W.parentId===Ze.name&&!N.has(W.name)&&(I.push(W),x=Math.min(x,pe),P=Math.max(P,pe))}))}return{block:w,startIndex:x,endIndex:P}};if(Q){const Y=H.filter(O=>O.parentId===Q),w=Y.findIndex(O=>O.name===q.name)+(F==="up"?-1:1);if(w<0||w>=Y.length)return;const I=Y[w],N=H.indexOf(q),x=H.indexOf(I);if(N===-1||x===-1)return;const P=[...H];P[N]=I,P[x]=q,l(P)}else{const Y=re(V),{block:b,startIndex:w,endIndex:I}=Y;if(!b||b.length===0)return;if(F==="up"){if(w===0)return;let N=w-1;for(;N>=0&&H[N].parentId;)N--;if(N<0)return;const x=re(N),{block:P,startIndex:O}=x;if(!P||P.length===0)return;const ze=[...H.slice(0,O),...b,...P,...H.slice(I+1)].filter(Boolean);l(ze)}else{if(I===H.length-1)return;let N=I+1;for(;N<H.length&&H[N].parentId;)N++;if(N>=H.length)return;const x=re(N),{block:P,startIndex:O}=x;if(!P||P.length===0)return;const ze=[...H.slice(0,w),...P,...b,...H.slice(O+P.length)].filter(Boolean);l(ze)}}},S=()=>{if(!c.name.trim()||!c.emoji.trim())return alert("Please provide both an emoji and a name.");l([...s,c]),d(Ag)},R=V=>{if(window.confirm("Delete this position? This will remove it from the global list, and any associated child positions.")){const F=s[V];let H=s.filter((q,Q)=>Q!==V);F.parentId||(H=H.filter(q=>q.parentId!==F.name)),l(H)}},U=async()=>{g("saving");try{const V=s.map(F=>({...F,parentId:F.parentId===void 0?void 0:F.parentId}));await n(QR(V)).unwrap(),g("success"),setTimeout(()=>g("idle"),2e3)}catch(V){console.error("Save Error:",V),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),g("idle")}},B=V=>{l(F=>{const H={...Ag,parentId:V},q=F.findIndex(Y=>Y.name===V);if(q===-1)return[...F,H];let Q=q;for(;Q+1<F.length&&F[Q+1].parentId===V;)Q++;return[...F.slice(0,Q+1),H,...F.slice(Q+1)]})};return a?A.jsx(jl,{}):A.jsxs(A.Fragment,{children:[A.jsxs(S_,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:80},{text:"Colour",minWidth:100},{text:"Sort by Gender",width:100,textAlign:"center"},{text:"Add Child",width:80,textAlign:"center"},{text:"Delete",width:60,textAlign:"center"}],children:[s.map((V,F)=>A.jsxs("tr",{children:[A.jsx(fn,{textAlign:"center",children:V.parentId?A.jsx(ZR,{}):A.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(F,"up"),disabled:F===0,children:""}),A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>E(F,"down"),disabled:F===s.length-1,children:""})]})}),A.jsx($r,{name:`emoji-${F}`,value:V.emoji,onChange:H=>_(F,"emoji",H.target.value)}),A.jsx($r,{name:`name-${F}`,value:V.name,onChange:H=>_(F,"name",H.target.value)}),A.jsx(bS,{name:`colour-${F}`,value:V.colour,onChange:H=>_(F,"colour",H.target.value)}),A.jsx(fn,{textAlign:"center",children:A.jsx(er,{colour:V.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:V.sortByGender,onClick:()=>_(F,"sortByGender",!V.sortByGender),children:V.sortByGender?"YES":"NO"})}),A.jsx(fn,{textAlign:"center",children:!V.parentId&&A.jsx("button",{className:"icon-button icon-button--add-child",onClick:()=>B(V.name),title:"Add Child Position",children:"+"})}),A.jsx(fn,{textAlign:"center",children:A.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>R(F),children:""})})]},`${V.emoji}-${F}`)),A.jsxs("tr",{className:"pos-row-new",children:[A.jsx("td",{className:"",children:""}),A.jsx($r,{name:"new-emoji",value:c.emoji,placeholder:"",onChange:V=>d({...c,emoji:V.target.value})}),A.jsx($r,{name:"new-name",value:c.name,placeholder:"Position Name",onChange:V=>d({...c,name:V.target.value})}),A.jsx(bS,{name:"new-colour",value:c.colour,placeholder:"#FFFFFF",onChange:V=>d({...c,colour:V.target.value})}),A.jsx(fn,{textAlign:"center",children:A.jsx(er,{colour:c.sortByGender?"var(--color-success-dark)":"var(--color-text-dim)",isActive:c.sortByGender,onClick:()=>d({...c,sortByGender:!c.sortByGender}),children:c.sortByGender?"YES":"NO"})}),A.jsx(fn,{textAlign:"center",children:A.jsx("button",{onClick:S,className:"icon-button icon-button--add",disabled:!c.name.trim()||!c.emoji.trim(),children:"Add"})})]})]}),A.jsx("div",{className:"settings-footer",children:A.jsx("button",{className:`save-button ${p}`,onClick:U,disabled:p!=="idle",children:p==="saving"?"Saving...":p==="success"?"Done ":"Save"})})]})},SS={name:"",emoji:"",positions:[],preferredDays:[],maxConflict:1},wS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],sU=()=>{var Q,re;const n=di(),{teams:e,fetched:t,loading:a}=yt(Y=>Y.teams),{positions:s,fetched:l,loading:c}=yt(Y=>Y.positions),[d,p]=M.useState(e),[g,_]=M.useState(SS),[E,S]=M.useState("idle");M.useEffect(()=>{t||n(yl()),l||n(no())},[n,t,l]),M.useEffect(()=>{p(e)},[e]);const R=(Y,b,w)=>{const I=[...d];I[Y]={...I[Y],[b]:w},p(I)},U=(Y,b)=>{const w=[...d],I=b==="up"?Y-1:Y+1;if(I<0||I>=w.length)return;const N=w[Y];w[Y]=w[I],w[I]=N,p(w)},B=(Y,b)=>{const w=d.map((I,N)=>{if(N!==Y)return I;const x=I.positions||[],P=x.find(O=>O.name===b.name)?x.filter(O=>O.name!==b.name):[...x,b];return{...I,positions:P}});p(w)},V=(Y,b)=>{const w=d.map((I,N)=>{if(N!==Y)return I;const x=I.preferredDays||[],P=x.includes(b)?x.filter(O=>O!==b):[...x,b];return{...I,preferredDays:P}});p(w)},F=()=>{if(!g.name.trim()||!g.emoji.trim())return alert("Please provide both an emoji and a name for the team.");p([...d,g]),_(SS)},H=Y=>{window.confirm("Are you sure you want to delete this team?")&&p(d.filter((b,w)=>w!==Y))},q=async()=>{S("saving");try{await n(xf(d)).unwrap(),S("success"),setTimeout(()=>S("idle"),2e3)}catch(Y){console.error("Save Error:",Y),alert("Check Firestore Rules: You may lack permission to write to 'metadata'."),S("idle")}};return a||c?A.jsx(jl,{}):A.jsxs(A.Fragment,{children:[A.jsxs(S_,{headers:[{text:"Order",minWidth:50,textAlign:"center"},{text:"Emoji",width:30},{text:"Name",minWidth:100},{text:"Conflicts",width:60,textAlign:"center"},{text:"Allowed Positions",minWidth:200},{text:"Preferred Days",minWidth:250},{text:"",width:50}],children:[d.map((Y,b)=>{var w,I;return A.jsxs("tr",{children:[A.jsxs(fn,{children:[" ",A.jsxs("div",{style:{display:"flex",gap:"4px",justifyContent:"center"},children:[A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>U(b,"up"),disabled:b===0,children:""}),A.jsx("button",{className:"icon-button icon-button--small icon-button--secondary",onClick:()=>U(b,"down"),disabled:b===d.length-1,children:""})]})]}),A.jsx($r,{name:`team-emoji-${b}`,value:Y.emoji,onChange:N=>R(b,"emoji",N.target.value)}),A.jsx($r,{name:`team-name-${b}`,value:Y.name,onChange:N=>R(b,"name",N.target.value)}),A.jsx($r,{name:`team-maxConflict-${b}`,value:((w=Y.maxConflict)==null?void 0:w.toString())||"1",type:"number",onChange:N=>R(b,"maxConflict",parseInt(N.target.value)||1)}),A.jsx(fn,{children:A.jsx(Ni,{nowrap:!0,children:(I=s==null?void 0:s.filter(N=>!N.parentId))==null?void 0:I.map(N=>{var P;const x=(P=Y.positions)==null?void 0:P.some(O=>O.name===N.name);return A.jsx(er,{colour:N.colour,isActive:x,onClick:()=>B(b,N),children:N.emoji},N.name)})})}),A.jsx(fn,{children:A.jsx(Ni,{nowrap:!0,children:wS.map(N=>{var P;const x=(P=Y.preferredDays)==null?void 0:P.includes(N);return A.jsx(er,{isActive:x,onClick:()=>V(b,N),children:N.substring(0,3)},N)})})}),A.jsx(fn,{children:A.jsx("button",{className:"icon-button icon-button--delete",onClick:()=>H(b),children:""})})]},`${Y.emoji}-${b}`)}),A.jsxs("tr",{className:"team-row-new",children:[A.jsx("td",{className:"",children:""}),A.jsx($r,{name:"new-team-emoji",value:g.emoji,placeholder:"",onChange:Y=>_({...g,emoji:Y.target.value})}),A.jsx($r,{name:"new-team-name",value:g.name,placeholder:"Team Name",onChange:Y=>_({...g,name:Y.target.value})}),A.jsx($r,{name:"new-team-maxConflict",value:((Q=g.maxConflict)==null?void 0:Q.toString())||"1",type:"number",onChange:Y=>_({...g,maxConflict:parseInt(Y.target.value)||1})}),A.jsx(fn,{children:A.jsx(Ni,{nowrap:!0,children:(re=s==null?void 0:s.filter(Y=>!Y.parentId))==null?void 0:re.map(Y=>{var w;const b=(w=g.positions)==null?void 0:w.some(I=>I.name===Y.name);return A.jsx(er,{colour:Y.colour,isActive:b,onClick:()=>_(I=>{const N=I.positions||[],x=N.some(P=>P.name===Y.name)?N.filter(P=>P.name!==Y.name):[...N,Y];return{...I,positions:x}}),children:Y.emoji},`new-${Y.name}`)})})}),A.jsx(fn,{children:A.jsx(Ni,{nowrap:!0,children:wS.map(Y=>{var w;const b=(w=g.preferredDays)==null?void 0:w.includes(Y);return A.jsx(er,{isActive:b,onClick:()=>_(I=>{const N=I.preferredDays||[],x=N.includes(Y)?N.filter(P=>P!==Y):[...N,Y];return{...I,preferredDays:x}}),children:Y.substring(0,3)},`new-team-${Y}`)})})}),A.jsx(fn,{children:A.jsx("button",{onClick:F,className:"icon-button icon-button--add",disabled:!g.name.trim()||!g.emoji.trim(),children:"+"})})]})]}),A.jsx("div",{className:"settings-footer",children:A.jsx("button",{className:`save-button ${E}`,onClick:q,disabled:E!=="idle",children:E==="saving"?"Saving...":E==="success"?"Done ":"Save All Team Changes"})})]})},oU={allUsers:[],loading:!1,saving:!1,error:null},Uf=Or("userManagement/fetchAllUsers",async(n,{rejectWithValue:e})=>{try{const t=Dc(Rn,"users"),a=Oc(t),s=await Vc(a),l=[];return s.forEach(c=>{l.push({...c.data(),id:c.id})}),l.sort((c,d)=>(c.name||"").localeCompare(d.name||""))}catch(t){return e(t instanceof Error?t.message:"Failed to fetch all users")}}),jf=Or("userManagement/saveAllChanges",async(n,{rejectWithValue:e})=>{try{const t=nR(Rn);n.forEach(a=>{const{id:s,...l}=a;l.teamPositions&&(l.indexedAssignments=t1(l.teamPositions)),t.update(Qr(Rn,"users",s),l)}),await t.commit();return}catch(t){return e(t instanceof Error?t.message:"Failed to save changes")}}),l1=po({name:"userManagement",initialState:oU,reducers:{updateUserField(n,e){const{id:t,field:a,value:s}=e.payload,l=n.allUsers.find(c=>c.id===t);l&&(l[a]=s)},toggleUserTeam(n,e){const{userId:t,teamName:a}=e.payload,s=n.allUsers.find(l=>l.id===t);if(s){const l=s.teams||[],c=l.includes(a)?l.filter(d=>d!==a):[...l,a];s.teams=c,s.teamPositions||(s.teamPositions={}),c.includes(a)?s.teamPositions[a]||(s.teamPositions[a]=[]):delete s.teamPositions[a]}},toggleUserTeamPosition(n,e){const{userId:t,teamName:a,posName:s}=e.payload,l=n.allUsers.find(c=>c.id===t);if(l){l.teamPositions||(l.teamPositions={}),l.teamPositions[a]||(l.teamPositions[a]=[]);const c=l.teamPositions[a],d=c.includes(s)?c.filter(p=>p!==s):[...c,s];l.teamPositions[a]=d}}},extraReducers:n=>{n.addCase(Uf.pending,e=>{e.loading=!0,e.error=null}).addCase(Uf.fulfilled,(e,t)=>{e.allUsers=t.payload,e.loading=!1}).addCase(Uf.rejected,(e,t)=>{e.error=t.payload,e.loading=!1}).addCase(jf.pending,e=>{e.saving=!0,e.error=null}).addCase(jf.fulfilled,e=>{e.saving=!1}).addCase(jf.rejected,(e,t)=>{e.error=t.payload,e.saving=!1})}}),{updateUserField:lU,toggleUserTeam:uU,toggleUserTeamPosition:cU}=l1.actions,hU=l1.reducer,fU=({user:n,availableTeams:e,adminEmail:t})=>{var d;const a=di(),s=(p,g)=>{a(lU({id:n.id,field:p,value:g}))},l=p=>{a(uU({userId:n.id,teamName:p}))},c=(p,g)=>{a(cU({userId:n.id,teamName:p,posName:g}))};return A.jsxs("tr",{children:[A.jsx($r,{name:`name-${n.id}`,value:n.name||"",onChange:p=>s("name",p.target.value),isSticky:!0}),A.jsx($r,{name:`email-${n.id}`,value:n.email||"",isReadOnly:!0}),A.jsx(fn,{children:A.jsxs("select",{name:`gender-${n.id}`,className:"form-select",value:n.gender,onChange:p=>s("gender",p.target.value),children:[A.jsx("option",{value:"",children:"-"}),A.jsx("option",{value:"Male",children:"Male"}),A.jsx("option",{value:"Female",children:"Female"})]})}),A.jsx(fn,{children:A.jsx(Ni,{children:e.map(p=>{var _;const g=(_=n.teams)==null?void 0:_.includes(p.name);return A.jsxs(er,{onClick:()=>l(p.name),isActive:g,children:[A.jsx("span",{children:p.emoji})," ",p.name]},p.name)})})}),A.jsx(fn,{children:(d=n.teams)==null?void 0:d.map(p=>{var _,E;const g=e.find(S=>S.name===p);return g?A.jsxs("div",{style:{marginBottom:"12px"},children:[A.jsxs("div",{style:{fontSize:"0.65rem",fontWeight:"bold",marginBottom:"4px",color:"var(--color-text-dim)",textTransform:"uppercase"},children:[g.emoji," ",g.name]}),A.jsx(Ni,{children:(E=(_=g.positions)==null?void 0:_.filter(S=>!S.parentId))==null?void 0:E.map(S=>{var U,B;const R=(B=(U=n.teamPositions)==null?void 0:U[p])==null?void 0:B.includes(S.name);return A.jsx(er,{colour:S.colour,isActive:R,onClick:()=>c(p,S.name),children:S.emoji},S.name)})})]},p):null})}),A.jsx(fn,{children:A.jsx(er,{colour:n.isActive?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isActive",!n.isActive),isActive:!0,children:n.isActive?"YES":"NO"})}),A.jsx(fn,{children:A.jsx(er,{colour:n.isApproved?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isApproved",!n.isApproved),isActive:!0,children:n.isApproved?"YES":"NO"})}),A.jsx(fn,{children:A.jsx(er,{colour:n.isAdmin?"var(--color-success-dark)":"var(--color-warning-dark)",minWidth:35,onClick:()=>s("isAdmin",!n.isAdmin),isActive:!0,isDisabled:n.email===t,children:n.isAdmin?"YES":"NO"})})]},n.id)},dU=()=>{const n=di(),{allUsers:e,loading:t,saving:a,error:s}=yt(d=>d.userManagement),l=yt(d=>d.teams.teams);M.useEffect(()=>{n(Uf())},[n]);const c=()=>{n(jf(e))};return t?A.jsx(jl,{}):s?A.jsxs("div",{children:["Error: ",s]}):A.jsxs(A.Fragment,{children:[A.jsx(S_,{headers:[{text:"Name",minWidth:70,isSticky:!0},{text:"Email",minWidth:170},{text:"Gender",minWidth:90},{text:"Teams",minWidth:200},{text:"Positions",minWidth:200},{text:"Active",minWidth:95,textAlign:"center"},{text:"Approved",minWidth:95,textAlign:"center"},{text:"Admin",minWidth:95,textAlign:"center"}],children:e.map(d=>A.jsx(fU,{user:d,availableTeams:l,adminEmail:"chris.sm.kang542@gmail.com"},d.id))}),A.jsx("div",{className:"settings-footer",children:A.jsx("button",{className:`save-button ${a?"saving":""}`,onClick:c,disabled:a,children:a?"Saving Changes...":"Save All User Changes"})})]})},mU=()=>{const{userData:n}=yt(t=>t.auth),{section:e}=Ed();return n?A.jsxs("div",{className:"settings-container",children:[e===cl.PROFILE&&A.jsx(o1,{}),e===cl.USER_MANAGEMENT&&(n.isAdmin?A.jsx(dU,{}):A.jsx("p",{children:"Access Denied"})),e===cl.TEAMS&&(n.isAdmin?A.jsx(sU,{}):A.jsx("p",{children:"Access Denied"})),e===cl.POSITIONS&&(n.isAdmin?A.jsx(aU,{}):A.jsx("p",{children:"Access Denied"}))]}):null},pU=[{path:"/",element:A.jsx(rk,{})},{path:"/login",element:A.jsx(JL,{})},{path:"/guest",element:A.jsx(WL,{})},{path:"/app",element:A.jsx(aL,{}),children:[{path:"",element:A.jsx(VL,{}),children:[{path:"dashboard",element:A.jsx(GL,{})},{path:"roster/:teamName?/:positionName?",element:A.jsx(rU,{})},{path:"settings/:section?",element:A.jsx(mU,{})}]}]}];let AS=!1;const gU=n=>{if(!AS){AS=!0;let e;zP(Il,t=>{if(t){n.dispatch(KL(t)),n.dispatch(kf(t.uid));const a=Qr(Rn,"users",t.uid);e=XV(a,s=>{if(s.exists()){const l=s.data();n.dispatch(YL(l))}})}else n.dispatch(QL()),e&&e()})}return e=>t=>e(t)},yU=Vk({reducer:{auth:XL,positions:nL,roster:UL,rosterView:HL,teams:iL,ui:DL,userManagement:hU},middleware:n=>n({serializableCheck:{ignoredActions:["auth/setUser","roster/fetchEntries/fulfilled","roster/saveChanges/fulfilled"],ignoredPaths:["auth.firebaseUser","roster.entries","roster.dirtyEntries","rosterView.users","rosterView.allTeamUsers"]}}).concat(gU)}),_U=MN(pU);JC.createRoot(document.getElementById("root")).render(A.jsx(CS.StrictMode,{children:A.jsx(dI,{store:yU,children:A.jsx(QN,{children:A.jsx(nk,{children:A.jsx(KN,{router:_U})})})})}));
